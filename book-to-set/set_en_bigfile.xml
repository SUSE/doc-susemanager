<?xml version="1.0"?>
<!DOCTYPE set PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<?asciidoc-toc?><?asciidoc-numbered?><set xml:base="MAIN-manager.xml" id="set.mgr" lang="en"><title>SUSE Manager 3.2</title><setinfo>

<date>2018-05-22</date>
</setinfo>
<book id="book.suma.getting-started"><bookinfo><title>SUSE Manager 3.2</title><date/><legalnotice><para/></legalnotice></bookinfo>
<?dbjsp dir="getting-started/en-US"?>
<?dbjsp filename="index.jsp"?>
<chapter id="quickstart.chapt.overview.requirements"><title>Introduction</title><para>This quick-start provides guidance on setting up  server with KVM.
You will learn the fundamentals of managing both traditional  clients and Salt clients.
This guide is intended for system administrators.</para>
<note>
<title> Version Information</title>
<para>In this manual if not other specified,  version <phrase>3.2</phrase> is assumed and this version is required if a feature is discussed.
 <phrase>3.2</phrase> and  <phrase>3.2</phrase> Proxy were originally released as a SLES 12 SP3 extension.
Whenever features of the <phrase>3.2</phrase> host operating system are documented and not other specified version 12 SP3 is assumed.</para>
</note>
<sect1 id="quickstart.sect.introduction"><title>What is ?</title><para> lets you manage large sets of Linux systems and keep them up to date.
It provides automated software management, asset management, and system provisioning.
 is a solution for organizations requiring absolute control of maintenance and package deployment on their servers.
 allows administrators to maintain a high level of security while facilitating and advancing an organizations system life-cycle requirements.</para>
<variablelist>
<varlistentry>
<term>Salt</term>
<listitem>
<para>The inclusion of <emphasis>Salt</emphasis> in  provides powerful event-driven configuration and management capabilities for fine grained control of any modern infrastructure.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Salt-master</term>
<listitem>
<para> takes a commanding role as a Salt-master capable of orchestrating thousands of Salt-minions ( Clients) via remote execution.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Distribution Management</term>
<listitem>
<para> is fully compatible with Red Hat Satellite Server and offers seamless management of both <phrase>SUSE Linux Enterprise</phrase> and <phrase>Red Hat Enterprise Linux</phrase> client systems.</para>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="quickstart.sect.bird.eye.view"><title>Overview</title><para> may be integrated within your network infrastructure in multiple ways.
In this guide you will perform the following steps for an initial test setup.</para>
<itemizedlist>
<listitem>
<para>Install <phrase>SUSE Linux Enterprise Server</phrase> with  as an extension</para>
</listitem>
<listitem>
<para>Setup  Server via YaST</para>
</listitem>
<listitem>
<para>Register  with SCC (SUSE Customer Center)</para>
</listitem>
<listitem>
<para>Synchronize a repository channel for use with both traditional clients and Salt minions</para>
</listitem>
<listitem>
<para>Create an authentication key to act as an ID for the synced repository channel</para>
</listitem>
<listitem>
<para>Add the new authentication key to a bootstrap template script and connect a traditional client</para>
</listitem>
<listitem>
<para>Register a Salt minion with  (salt-master) and assign it a channel with an authentication key</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="quickstart.sect.prerequisites.install"><title>Prerequisites for Installation</title><para>This guide requires that you have created an account with SCC (<phrase>SUSE Customer Center</phrase>).
During installation of both <phrase>SUSE Linux Enterprise Server</phrase> (SLES) and , SCC credentials will be requested and you must enter them to receive the latest packages and updates.
The following procedure will guide you through obtaining your SCC <emphasis>Organizational Credentials</emphasis>.</para>
<orderedlist id="creating.scc.account.mgr" numeration="arabic">
<title>Procedure: Obtaining Your SCC Organization Credentials</title>
<listitem>
<para>Open a browser and direct it to <ulink url="https://scc.suse.com/login">https://scc.suse.com/login</ulink>.</para>
</listitem>
<listitem>
<para>If you have not done so, create an account now.</para>
</listitem>
<listitem>
<para>Log in to your new SCC account.</para>
</listitem>
<listitem>
<para>Under the <guimenu>Management tools</guimenu> widget select <guimenu>Manage Users</guimenu>.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Organization Credentials</guimenu> tab.</para>
</listitem>
<listitem>
<para>Keep this information handy during  setup.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="_obtaining_installation_media"><title>Obtaining Installation Media</title><para>After logging into your SCC account, you can find the installation images provided at the following addresses.</para>
<para>Select one and continue reading:</para>
<itemizedlist>
<listitem>
<para>Just Enough Operating System (JeOS) 290 MB  <ulink url="https://www.suse.com/products/server/jeos/">JeOS - Media Download</ulink></para>
</listitem>
<listitem>
<para>SLES DVD image 3 GB <ulink url="https://www.suse.com/products/server/download/">SUSE Linux Enterprise Server - Media Download</ulink></para>
</listitem>
</itemizedlist>
<note>
<title>Just Enough Operating System (JeOS) vs. Full Media Image</title>
<para>The SLES JeOS image provides the quickest route for setup of a test environment.
The JeOS image total size is about 290 MB.
The alternative would be the 3 GB SLES DVD image.
Both installation media are appropriate, but depend upon available bandwidth or your application needs.
Both methods of installation will be covered in this guide.</para>
</note>
</sect1>
<sect1 id="quickstart.sect.software.requirements"><title>Hardware Requirements</title><para>Review the following table for  hardware and software requirements.
For installation on z Systems, see:</para>
<itemizedlist>
<listitem>
<para><xref linkend="art.suma.install.zsystems"/></para>
</listitem>
</itemizedlist>
<table frame="all" rowsep="1" colsep="1">
<title>Hardware Requirements</title>
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry><para>Hardware</para></entry>
<entry><para>Recommended</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>CPU</para></entry>
<entry><para>Multi-core 64-bit CPU (x86_64, IBM POWER)</para></entry>
</row>
<row>
<entry><para>RAM:</para></entry>
<entry><para><emphasis>Test Server</emphasis> Minimum 4 GB</para></entry>
</row>
<row>
<entry><para/></entry>
<entry><para><emphasis>Base Installation</emphasis> Minimum 16 GB</para></entry>
</row>
<row>
<entry><para/></entry>
<entry><para><emphasis>Production Server</emphasis> Minimum 32 GB</para></entry>
</row>
<row>
<entry><para>Disk Space:</para></entry>
<entry><para><filename>/</filename> <emphasis>(root) The default JeOS root partition size of 24 GB is sufficient for this guide</emphasis></para></entry>
</row>
<row>
<entry><para/></entry>
<entry><para><filename>/var/lib/pgsql</filename> Minimum 50 GB</para></entry>
</row>
<row>
<entry><para/></entry>
<entry><para><filename>/var/spacewalk</filename> Minimum 50 GB per SUSE product and 250 GB per Red Hat product</para></entry>
</row>
</tbody>
</tgroup>
</table>
</sect1>
<sect1 id="_base_host_operating_system"><title>Base Host Operating System</title><para> <phrase>3.2</phrase> is based on SLES {sles-version} {sp-version} as the host operating system.</para>
</sect1>
<sect1 id="mgr.supported.client.systems"><title>Supported Client Systems</title><para>Clients with the following operating systems are supported for registration with .
If you plan on using the new Salt features, ensure your clients are supported.</para>
<note>
<title>Supported Versions and SP Levels</title>
<para>Client operating system versions and SP levels must be under general support (normal or LTSS) to be supported with .
For details on supported product versions, see <ulink url="https://www.suse.com/lifecycle">https://www.suse.com/lifecycle</ulink>.</para>
</note>
<table frame="all" rowsep="1" colsep="1">
<title>Supported Client Systems</title>
<tgroup cols="4">
<colspec colname="col_1" colwidth="25*"/>
<colspec colname="col_2" colwidth="25*"/>
<colspec colname="col_3" colwidth="25*"/>
<colspec colname="col_4" colwidth="25*"/>
<thead>
<row>
<entry><para>Operating Systems</para></entry>
<entry><para>Architecture</para></entry>
<entry><para>Traditional Clients</para></entry>
<entry><para>Salt Clients</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para><phrase>SUSE Linux Enterprise</phrase> 11 SP4</para></entry>
<entry><para>x86, x86_64, Itanium, IBM POWER, z Systems</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para><phrase>SUSE Linux Enterprise</phrase> 12 SP3</para></entry>
<entry><para>x86_64, IBM POWER(ppc64le), z Systems, ARM</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para><phrase>SUSE Linux Enterprise</phrase> 15</para></entry>
<entry><para>x86_64, IBM POWER(ppc64le), z Systems, ARM</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para><emphasis>Latest minor release Red Hat Enterprise Linux Server 6</emphasis></para></entry>
<entry><para>x86, x86_64</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para><emphasis>Latest minor release Red Hat Enterprise Linux Server 7</emphasis></para></entry>
<entry><para>x86_64</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Open Enterprise Server 2015, 2015 SP1, 2018</para></entry>
<entry><para>x86_64</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
</tbody>
</tgroup>
</table>
</sect1>
<sect1 id="mgr.additional.requirements"><title>Network Requirements</title><para>To successfully complete this guide some network requirements must be met.
The following section will walk you through these requirements.</para>
<variablelist>
<varlistentry>
<term>Fully Qualified Domain Name (FQDN)</term>
<listitem>
<para>The  server must resolve its FQDN correctly or cookies will not work properly on the WebUI.</para>
<itemizedlist>
<listitem>
<para><ulink url="https://www.suse.com/documentation/sles-12/book_sle_admin/data/sec_basicnet_yast.html#sec_basicnet_yast_change_host">SUSE Linux Enterprise Server Documentation - Configuring Host Name and DNS</ulink></para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Hostname and IP Address</term>
<listitem>
<para>To ensure that the  domain name can be resolved by its clients, both server and client machines must be connected to a working Domain Name System (DNS) server.
This guide assumes the required infrastructure exists within your environment.
For more information on setting up a (DNS) server see:</para>
<itemizedlist>
<listitem>
<para><ulink url="https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_dns.html">SUSE Linux Enterprise Server Documentation - The Domain Name System</ulink></para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Using a Proxy When Installing from <phrase>SUSE Linux Enterprise</phrase> Media</term>
<listitem>
<para>If you are on an internal network and do not have access to <phrase>SUSE Customer Center</phrase>, you can setup and use a proxy during a <phrase>SUSE Linux Enterprise</phrase> installation.
For more information on configuring a proxy for access to <phrase>SUSE Customer Center</phrase> during a <phrase>SUSE Linux Enterprise</phrase> installation see:</para>
<itemizedlist>
<listitem>
<para><ulink url="https://www.suse.com/documentation/sled-12/singlehtml/book_sle_deployment/book_sle_deployment.html#sec.i.yast2.start.parameters.proxy">SUSE Linux Enterprise Server Documentation -  Using a Proxy During Installation</ulink></para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
</variablelist>
<important>
<title>Naming Your Server</title>
<para>The hostname of  must not contain uppercase letters as this may cause <emphasis>jabberd</emphasis> to fail.
Choose the hostname of your  server carefully.
Although changing the server name is possible, it is a complex process and unsupported.</para>
</important>
</sect1>
<sect1 id="_firewall_port_rules"><title>Firewall Port Rules</title><para>In a production environment  server and its clients should always utilize firewall rules.
The following table provides an overview of required ports.</para>
<para>Traditional client systems connect to  via port 443.
In addition, enabling push actions from  to client systems, requires inbound connections on port 5222.
If  will also push to a  proxy, you must allow inbound connections on port 5269.</para>
<table id="tab.install.ports.server1" frame="all" rowsep="1" colsep="1">
<title>Required Ports on  Server</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33.3333*"/>
<colspec colname="col_2" colwidth="33.3333*"/>
<colspec colname="col_3" colwidth="33.3334*"/>
<thead>
<row>
<entry><para>Port</para></entry>
<entry><para>Direction</para></entry>
<entry><para>Reason</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>67</para></entry>
<entry><para>Inbound</para></entry>
<entry><para>Required when configured as a DHCP server for systems requesting IP addresses</para></entry>
</row>
<row>
<entry><para>69</para></entry>
<entry><para>Inbound</para></entry>
<entry><para>Used when configured as a PXE server and allows installation and re-installation of PXE-boot enabled systems</para></entry>
</row>
<row>
<entry><para>80</para></entry>
<entry><para>Outbound</para></entry>
<entry><para>Used to contact <phrase>SUSE Customer Center</phrase></para></entry>
</row>
<row>
<entry><para>443</para></entry>
<entry><para>Inbound</para></entry>
<entry><para>All WebUI, traditional client, and proxy server requests and  uses this port for <phrase>SUSE Customer Center</phrase> inbound traffic</para></entry>
</row>
<row>
<entry><para>443</para></entry>
<entry><para>Outbound</para></entry>
<entry><para> uses this port to reach <phrase>SUSE Customer Center</phrase> unless running in disconnected mode with RMT or SMT</para></entry>
</row>
<row>
<entry><para>4505</para></entry>
<entry><para>Inbound</para></entry>
<entry><para>Required by the Salt-master to accept communication requests via TCP from minions</para></entry>
</row>
<row>
<entry><para>4506</para></entry>
<entry><para>Inbound</para></entry>
<entry><para>Required by the Salt-master to accept communication requests via TCP from minions</para></entry>
</row>
<row>
<entry><para>5222</para></entry>
<entry><para>Inbound</para></entry>
<entry><para>When you wish to push actions to clients this port is required by the <emphasis>osad</emphasis> daemon running on the client systems</para></entry>
</row>
<row>
<entry><para>5269</para></entry>
<entry><para>Inbound/Outbound</para></entry>
<entry><para>Needed if you push actions to or via a <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase></para></entry>
</row>
<row>
<entry><para/></entry>
<entry><para>Outbound</para></entry>
<entry><para>Squid HTTP proxy for outgoing connections. It could be any port you configure</para></entry>
</row>
</tbody>
</tgroup>
</table>
<para>For more information on disconnected setup and port configuration, see:</para>
<itemizedlist>
<listitem>
<para><xref linkend="disconnect-setup"/></para>
</listitem>
<listitem>
<para><xref linkend="advanced.topics.app.ports.server"/></para>
</listitem>
</itemizedlist>
</sect1>
</chapter>
<chapter id="sles.installation.within.kvm.jeos"><title>JeOS Installation</title><sect1 id="quickstart.sect.kvm.settings"><title>Virtual Machine Manager (virt-manager) Settings</title><para>This chapter provides the required (KVM) settings for installation of <phrase>SUSE Linux Enterprise</phrase> Just Enough Operating System (JeOS) 12 as the base for <phrase><phrase>SUSE</phrase> Manager</phrase>.
A kernel virtual machine (KVM) combined with Virtual Machine Manager (<emphasis>virt-manager</emphasis>) will be used as a sandbox for your first installation.</para>
<tip>
<title>SUSEVirtualization Guide</title>
<para>For more information on virtualization, see: <ulink url="https://www.suse.com/documentation/sles-12/singlehtml/book_virt/book_virt.html">SUSE Linux Enterprise Virtualization Guide</ulink></para>
</tip>
<para>Enter the following settings when creating a new virtual machine using <emphasis role="strong">virt-manager</emphasis>.
In the following table replace <emphasis>version</emphasis> with the actual product version string.</para>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry><para>KVM Settings</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>Installation Method</para></entry>
<entry><para>Import Existing Disk Image</para></entry>
</row>
<row>
<entry><para>OS:</para></entry>
<entry><para>Linux</para></entry>
</row>
<row>
<entry><para>Version:</para></entry>
<entry><para>SLES&lt;VERSION&gt;-JeOS-for-kvm-and-xen.x86_64-GM.qcow2</para></entry>
</row>
<row>
<entry><para>Memory:</para></entry>
<entry><para>4096 MB</para></entry>
</row>
<row>
<entry><para>CPU’s:</para></entry>
<entry><para>2</para></entry>
</row>
<row>
<entry><para>Storage Format:</para></entry>
<entry><para><emphasis>.qcow2</emphasis> 24 GB (Default) JeOS Root Partition</para></entry>
</row>
<row>
<entry><para>Virtual Disks:</para></entry>
<entry><para/></entry>
</row>
<row>
<entry><para>VirtIO Disk 2</para></entry>
<entry><para>101 GB for <filename>/var/spacewalk</filename></para></entry>
</row>
<row>
<entry><para>VirtIO Disk 3</para></entry>
<entry><para>50 GB for <filename>/var/lib/pgsql</filename></para></entry>
</row>
<row>
<entry><para>VirtIO Disk 4</para></entry>
<entry><para>4 GB for swap</para></entry>
</row>
<row>
<entry><para>Name:</para></entry>
<entry><para>test-setup</para></entry>
</row>
<row>
<entry><para>Network</para></entry>
<entry><para>Bridge <emphasis>br0</emphasis></para></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<tip>
<title>SUSE Virtualization Guide</title>
<para>For more information on virtualization, see: <ulink url="https://www.suse.com/documentation/sles-12/singlehtml/book_virt/book_virt.html">SUSE Linux Enterprise Virtualization Guide</ulink></para>
</tip>
</sect1>
<sect1 id="jeos.kvm.settings"><title>JeOS KVM Settings</title><para>Create 3 additional virtual disks required for the <phrase><phrase>SUSE</phrase> Manager</phrase> storage partitions.</para>
<orderedlist numeration="arabic">
<title>Procedure: Creating the Required Partitions with KVM</title>
<listitem>
<para>Create a new virtual machine using the downloaded JeOS KVM image and select <guimenu>Import existing disk image</guimenu> .</para>
</listitem>
<listitem>
<para>Configure RAM and number of CPUs (At least 4 GB RAM and 2 CPUs).</para>
</listitem>
<listitem>
<para>Name your KVM machine and select the <guimenu>Customize configuration before install</guimenu> check box.</para>
</listitem>
<listitem>
<para>Select the <guimenu>Add Hardware</guimenu> button and create three new virtual disks with the following specifications.
These disks will be partitioned and mounted in <xref linkend="proc.jeos.susemgr.prep"/>.</para>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="3">
<colspec colname="col_1" colwidth="33.3333*"/>
<colspec colname="col_2" colwidth="33.3333*"/>
<colspec colname="col_3" colwidth="33.3334*"/>
<thead>
<row>
<entry><para>VirtIO Storage Disks</para></entry>
<entry><para>Name</para></entry>
<entry><para>Sizing</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>VirtIO Disk 2</para></entry>
<entry><para>spacewalk</para></entry>
<entry><para>101 GB</para></entry>
</row>
<row>
<entry><para>VirtIO Disk 3</para></entry>
<entry><para>pgsql</para></entry>
<entry><para>50 GB</para></entry>
</row>
<row>
<entry><para>VirtIO Disk 4</para></entry>
<entry><para>swap</para></entry>
<entry><para>4 GB</para></entry>
</row>
</tbody>
</tgroup>
</informaltable>
</listitem>
<listitem>
<para>Click <guimenu>Begin Installation</guimenu> and your new VM will boot from the JeOS image.</para>
</listitem>
</orderedlist>
<para>Proceed through the basic JeOS installation prompts until you reach the command line.</para>
<tip>
<title>Root Password</title>
<para>During the basic installation prompts you are asked to enter the root password.
Select a strong password and then in the next message box <guimenu>Confirm root Password</guimenu>.</para>
</tip>
</sect1>
<sect1 id="jeos.susemgr.prep"><title>Preparing JeOS for SUSE Manager</title><orderedlist id="proc.jeos.susemgr.prep" numeration="arabic">
<title>Procedure: Preparing JeOS for SUSE ManagerInstallation</title>
<listitem>
<para>Register with SCC:</para>
<screen>SUSEConnect -e`EMAIL_ADDRESS`-r`SUSE_MANAGER_CODE`</screen>
</listitem>
<listitem>
<para>Add <phrase><phrase>SUSE</phrase> Manager</phrase> repositories:</para>
<screen>SUSEConnect -p SUSE-Manager-Server/&lt;productnumber&gt;/x86_64 -r`SUSE_MANAGER_CODE`</screen>
</listitem>
<listitem>
<para>Install <systemitem class="resource">yast2-storage</systemitem> with all required dependencies (approx. 40 packages, 30 MB when installed).
This basic administration package is required for preparing storage partitions:</para>
<screen>zypper in -t package yast2-storage</screen>
</listitem>
<listitem>
<para>Partition and mount the virtual disks at the following locations using YaST Partitioner (<command>yast2 disk</command>).</para>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="4">
<colspec colname="col_1" colwidth="25*"/>
<colspec colname="col_2" colwidth="25*"/>
<colspec colname="col_3" colwidth="25*"/>
<colspec colname="col_4" colwidth="25*"/>
<thead>
<row>
<entry><para>VirtIO Storage Disks</para></entry>
<entry><para>Name</para></entry>
<entry><para>Storage Size</para></entry>
<entry><para>File System Type</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>VirtIO Disk 2</para></entry>
<entry><para><filename>/var/spacewalk</filename></para></entry>
<entry><para>101 GB</para></entry>
<entry><para>XFS</para></entry>
</row>
<row>
<entry><para>VirtIO Disk 3</para></entry>
<entry><para><filename>/var/lib/pgsql</filename></para></entry>
<entry><para>50 GB</para></entry>
<entry><para>XFS</para></entry>
</row>
<row>
<entry><para>VirtIO Disk 4</para></entry>
<entry><para><filename>swap</filename></para></entry>
<entry><para>4 GB</para></entry>
<entry><para>swap</para></entry>
</row>
</tbody>
</tgroup>
</informaltable>
</listitem>
<listitem>
<para>SLES by default uses the BTRFS file system. A mount point is created automatically for <filename>/var/lib/pgsql/</filename> (even when not installed). This must be removed or commented out from the <filename>/etc/fstab</filename> entries. As root edit <filename>/etc/fstab</filename> and comment out or remove the line:</para>
<screen>/var/lib/pgsql btrfs subvol=@/var/lib/pgsql 0 0</screen>
<warning>
<title>Removing the pgsql in the/etc/fstabEntry</title>
<para>If you do not remove this line from fstab the first time you shutdown the server you will lose your database.
This occurs because you will have duplicate entries in the fstab. <emphasis>Updated tools shipped with recent SPs will no longer require human intervention.</emphasis></para>
</warning>
</listitem>
<listitem>
<para>Exit the partitioner and install the <phrase><phrase>SUSE</phrase> Manager</phrase> pattern:</para>
<screen>zypper in -t pattern suma_server</screen>
</listitem>
</orderedlist>
<para>For proceeding with <phrase><phrase>SUSE</phrase> Manager</phrase> setup, see:
<ulink url="suma-setup-with-yast-sumasetup.xml#suma-setup-with-yast-sumasetup">Setup SUSE Manager with YaST</ulink></para>
</sect1>
</chapter>
<chapter id="quickstart3.chap.suma.installation.sles"><title>SUSE Linux Enterprise Server Installation</title><para>This chapter provides the required KVM settings for installation of <phrase>SUSE Linux Enterprise Server</phrase> media as the base for <phrase><phrase>SUSE</phrase> Manager</phrase>.
A kernel virtual machine KVM combined with Virtual Machine Manager (<command>virt-manager</command>) will be used as a sandbox for this installation.</para>
<sect1 id="_sles_kvm_requirements"><title>SLES KVM Requirements</title><para>Enter the following settings when creating a new virtual machine using <command>virt-manager</command> (replace <replaceable>version</replaceable> with the actual version string):</para>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry><para>KVM Settings for SLES</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>Installation Method:</para></entry>
<entry><para>Local install media (ISO image or CDROM)</para></entry>
</row>
<row>
<entry><para>OS:</para></entry>
<entry><para>Linux</para></entry>
</row>
<row>
<entry><para>Version:</para></entry>
<entry><para><literal>SLE-[replaceable]</literal>version<literal>-Server-x86_64-GM-DVD1.iso</literal></para></entry>
</row>
<row>
<entry><para>Memory:</para></entry>
<entry><para>4096 MB</para></entry>
</row>
<row>
<entry><para>CPUs:</para></entry>
<entry><para>2</para></entry>
</row>
<row>
<entry><para>Storage Format:</para></entry>
<entry><para>ISO 3 GB</para></entry>
</row>
<row>
<entry><para>Disk Space:</para></entry>
<entry><para>234 GB split between 4 GB swap and 130 GB mounted at <filename>/var/spacewalk/</filename></para></entry>
</row>
<row>
<entry><para/></entry>
<entry><para>(Virtual Disk 1) and 50 GB mounted at <filename>/var/lib/pgsql</filename></para></entry>
</row>
<row>
<entry><para/></entry>
<entry><para>(Virtual Disk 2).  The rest for the root partition (100 GB+).</para></entry>
</row>
<row>
<entry><para>Name:</para></entry>
<entry><para><literal>example-server</literal></para></entry>
</row>
<row>
<entry><para>Network</para></entry>
<entry><para>Bridge <literal>br0</literal></para></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<sect2 id="sles.installation.within.kvm.media"><title>SLES KVM Settings</title><para>This section provides guidance on installation of <phrase><phrase>SUSE</phrase> Manager</phrase>
utilizing the full installation media with KVM and <command>virt-manager</command>.
This section assumes you have previously setup an account with SCC and downloaded the SLES full installation media.</para>
<orderedlist numeration="arabic">
<title>Procedure: Preparing for SLES Installation</title>
<listitem>
<para>In <command>virt-manager</command> select <menuchoice><guimenu>File</guimenu> <guimenu>New Virtual Machine</guimenu></menuchoice>.</para>
</listitem>
<listitem>
<para>Select <guimenu>Local install media (ISO image or CDROM)</guimenu>.</para>
</listitem>
<listitem>
<para>Ensure <guimenu>Use ISO Image</guimenu> is selected then click <guimenu>Browse</guimenu> and locate the full SLES image you downloaded from your SCC account.</para>
</listitem>
<listitem>
<para>Configure your machine with at least 4096 MB RAM and a minimum of 2 CPUs.</para>
</listitem>
<listitem>
<para>Create a storage device with a minimum of 234 GB storage space for the installation.
During the partitioning setup of the SLES installation this disk should be partitioned into the following disks:</para>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="1">
<colspec colname="col_1" colwidth="100*"/>
<thead>
<row>
<entry><para>Disk Space Requirements</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>4 GB <literal>swap</literal></para></entry>
</row>
<row>
<entry><para>130 GB XFS partition (or dedicated virtual disk) for <filename>/var/spacewalk/</filename></para></entry>
</row>
<row>
<entry><para>50 GB XFS partition (or dedicated virtual disk) for <filename>/var/lib/pgsql/</filename></para></entry>
</row>
</tbody>
</tgroup>
</informaltable>
</listitem>
<listitem>
<para>The remaining storage space will be used by the operating system for the root partition.
Select <guimenu>Finish</guimenu> to begin the installation.</para>
</listitem>
</orderedlist>
<para>Installation of <phrase>SUSE Linux Enterprise Server</phrase> will begin.
For more information on completing an installation of <phrase>SUSE Linux Enterprise Server</phrase>, see: <ulink url="https://www.suse.com/documentation/sles-12/book_quickstarts/data/sec_sle_installquick.html">SUSE Linux Enterprise Installation Quickstart</ulink>.</para>
</sect2>
</sect1>
<sect1 id="quickstart3.sec.suma.installation.sles.sumaext"><title>Selecting the SUSE Manager Extension</title><orderedlist numeration="arabic">
<listitem>
<para>During the <phrase>SUSE Linux Enterprise Server</phrase> installation you will be presented with the <guimenu>Extension and Module Selection</guimenu>.</para>
</listitem>
<listitem>
<para>Select the <phrase><phrase>SUSE</phrase> Manager</phrase> Extension and then click the <guimenu>Next</guimenu> button.</para>
</listitem>
<listitem>
<para>Complete the <phrase>SUSE Linux Enterprise Server</phrase> installation.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>manager extension</phrase></textobject><imageobject>
<imagedata fileref="manager-extension.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect1>
</chapter>
<chapter id="suma.setup.with.yast"><title>SUSE Manager Setup</title><sect1 id="suma.setup.with.yast.setup"><title>Topics</title><para>This section covers <phrase><phrase>SUSE</phrase> Manager</phrase> setup.
You will perform the following procedures:</para>
<itemizedlist>
<listitem>
<para>Start <phrase><phrase>SUSE</phrase> Manager</phrase> setup via YaST or command line</para>
</listitem>
<listitem>
<para>Create the main administration account with the <phrase><phrase>SUSE</phrase> Manager</phrase> Web UI</para>
</listitem>
<listitem>
<para>Name your base organization and add login credentials</para>
</listitem>
<listitem>
<para>Sync the <phrase>SUSE Linux Enterprise</phrase> product channel from <phrase>SUSE Customer Center</phrase></para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="suma-setup-with-yast-sumasetup"><title>SUSE Manager Setup</title><para>This section will guide you through <phrase><phrase>SUSE</phrase> Manager</phrase> setup procedures.</para>
<orderedlist numeration="arabic">
<title>Procedure: SUSE ManagerSetup</title>
<listitem>
<para>Login to the <phrase><phrase>SUSE</phrase> Manager</phrase> server desktop and perform one of the following actions to begin setup:</para>
<itemizedlist>
<listitem>
<para>Select <menuchoice><guimenu>Applications</guimenu> <guimenu>System Tools</guimenu> <guimenu>YaST</guimenu> <guimenu>SUSE Manager Setup</guimenu></menuchoice>.</para>
</listitem>
<listitem>
<para>Open a terminal as root and type <literal>yast2 susemanager_setup</literal> to begin setup.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>From the introduction screen select <menuchoice><guimenu>SUSE Manager Setup</guimenu> <guimenu>Setup SUSE Manager from scratch</guimenu></menuchoice> then select <guimenu>Next</guimenu> to continue.</para>
</listitem>
<listitem>
<para>Enter the email address that should receive status notifications about <phrase><phrase>SUSE</phrase> Manager</phrase>.
The number of emails sent from <phrase><phrase>SUSE</phrase> Manager</phrase> can be extensive, therefore notifications via email may be disabled from the Web UI after setup.</para>
</listitem>
<listitem>
<para>Select <guimenu>Next</guimenu> to continue.</para>
</listitem>
<listitem>
<para>Enter your certificate information and a password. The password should be stored in a secure location.</para>
<important>
<title>Certificate Password</title>
<para><emphasis>Without this password it will not be possible to set up a <phrase><phrase>SUSE</phrase> Manager</phrase> Proxy Server.</emphasis></para>
</important>
</listitem>
<listitem>
<para>Select <guimenu>Next</guimenu> to continue.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>quickstart mgr setup4</phrase></textobject><imageobject>
<imagedata fileref="quickstart-mgr-setup4.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>From the <menuchoice><guimenu>SUSE Manager Setup</guimenu> <guimenu>Database Settings</guimenu></menuchoice> screen, enter a database user and password.
This password should be stored in a secure location.
Select <guimenu>Next</guimenu> to continue.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>quickstart mgr setup5</phrase></textobject><imageobject>
<imagedata fileref="quickstart-mgr-setup5.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>Enter your <phrase>SUSE Customer Center</phrase><literal role="systemitem">Organization Credentials</literal>.
Open <ulink url="https://scc.suse.com/login">https://scc.suse.com/login</ulink> to register or access to your organization credentials.</para>
<note>
<title>Skip</title>
<para>If you are using SUSE Enterprise products, <phrase><phrase>SUSE</phrase> Manager</phrase> requires that you connect to <phrase>SUSE Customer Center</phrase> for software, updates and patches.
You will not be able to synchronize or provide Enterprise channels to your clients without this information.</para>
<para>However if you would like to work with open source software channels and repositories then select the <guimenu>Skip</guimenu> button to continue.
You can setup your <phrase>SUSE Customer Center</phrase> credentials or configure inter-server sync at a later time.</para>
</note>
<informalfigure>
<mediaobject><textobject role="description"><phrase>NOTE</phrase></textobject><imageobject>
<imagedata fileref="quickstart-mgr-setup9.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>Select <guimenu>Next</guimenu> to continue.</para>
</listitem>
<listitem>
<para>Select <guimenu>Yes</guimenu> to run setup when prompted.</para>
</listitem>
<listitem>
<para>Once setup has completed, select <guimenu>Next</guimenu> to continue.
You will be presented with the new <phrase><phrase>SUSE</phrase> Manager</phrase> Web UI address.</para>
</listitem>
<listitem>
<para>Select <guimenu>Finish</guimenu> to complete <phrase><phrase>SUSE</phrase> Manager</phrase> setup.</para>
</listitem>
</orderedlist>
<para>In the next section you will create the administrator’s account and synchronize with <phrase>SUSE Customer Center</phrase>.</para>
<sect2 id="suma.setup.with.yast.admin"><title>Creating the Main Administration Account</title><para>This section will walk you through creating your organizations main administration account for <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<warning>
<title>Admin and User Accounts</title>
<para>The main administration account is the <emphasis>highest authority account</emphasis> within <phrase><phrase>SUSE</phrase> Manager</phrase> and therefore account access information should be stored in a secure location.</para>
<para>For security it is recommended that the main administrator creates <emphasis>low level admin accounts</emphasis> designated for administration of organizations and individual groups.</para>
</warning>
<orderedlist id="suma.setup.admin.account" numeration="arabic">
<title>Procedure: Setup the Main Administration Account</title>
<listitem>
<para>Open a browser and direct it to the <phrase><phrase>SUSE</phrase> Manager</phrase> Server URL provided after completing setup.</para>
</listitem>
<listitem>
<para>Add your organization name to the <menuchoice><guimenu>Create Organization</guimenu> <guimenu>Organization Name</guimenu></menuchoice> field.</para>
</listitem>
<listitem>
<para>Add your username and password to the <menuchoice><guimenu>Create Organization</guimenu> <guimenu>Desired Login</guimenu></menuchoice> and <menuchoice><guimenu>Create Organization</guimenu> <guimenu>Desired Password</guimenu></menuchoice> fields.</para>
</listitem>
<listitem>
<para>Fill in the Account Information fields including an email for system notifications.</para>
</listitem>
<listitem>
<para>Select <guimenu>Create Organization</guimenu> to finish creating your administration account.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>quickstart mgr setup admin1</phrase></textobject><imageobject>
<imagedata fileref="quickstart-mgr-setup-admin1.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
</orderedlist>
<para>You should now be presented with the <phrase><phrase>SUSE</phrase> Manager</phrase> Front Page. In the next section you will prepare the server for connecting the first client.</para>
</sect2>
<sect2 id="quickstart.first.channel.sync"><title>Syncing Products from SUSE Customer Center</title><para><phrase>SUSE Customer Center</phrase> (SCC) maintains a collection of repositories which contain packages, software and updates for all supported enterprise client systems.
These repositories are organized into channels each of which provide software specific to a distribution, release and architecture.
After synchronizing with SCC clients may receive updates, and be organized into groups and assigned to specific product software channels.</para>
<para>This section covers synchronizing with SCC from the Web UI and adding your first client channel.</para>
<orderedlist id="proc-quickstart-first-channel-sync" numeration="arabic">
<title>Procedure: Synchronizing with SUSE Customer Center</title>
<listitem>
<para>From the <phrase><phrase>SUSE</phrase> Manager</phrase> Web UI start page select <menuchoice><guimenu>Admin</guimenu> <guimenu>Setup Wizard</guimenu></menuchoice>.</para>
</listitem>
<listitem>
<para>From the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu> <guimenu>Setup Wizard</guimenu></menuchoice> page select the <guimenu>SUSE Products</guimenu> tab.
Wait a moment for the products list to populate.
If you previously registered with <phrase>SUSE Customer Center</phrase> a list of products will populate the table.
This table lists architecture, channels, and status information.
For more information, see:
<xref linkend="vle.webui.admin.wizard.products"/></para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin suse products</phrase></textobject><imageobject>
<imagedata fileref="admin_suse_products.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>Since Your <phrase>SUSE Linux Enterprise</phrase> client is based on <literal role="systemitem">x86_64</literal> architecture scroll down the page and select the check box for this channel now.</para>
<itemizedlist>
<listitem>
<para>Add channels to <phrase><phrase>SUSE</phrase> Manager</phrase> by selecting the check box to the left of each channel.
Click the arrow symbol to the left of the description to unfold a product and list available modules.</para>
</listitem>
<listitem>
<para>Start product synchronization by clicking the <guimenu>Add Products</guimenu> button.</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<para>After adding the channel <phrase><phrase>SUSE</phrase> Manager</phrase> will schedule the channel to be copied.
This can take a long time as <phrase><phrase>SUSE</phrase> Manager</phrase> will copy channel software sources from the <phrase>SUSE</phrase> repositories located at <phrase>SUSE Customer Center</phrase> to local <filename>/var/spacewalk/</filename> directory of your server.</para>
<tip>
<title>PostgreSQL and Transparant Huge Pages</title>
<para>In some environments, <emphasis>Transparent Huge Pages</emphasis> provided by the kernel may slow down PostgreSQL workloads significantly.</para>
<para>To disable <emphasis>Transparant Huge Pages</emphasis> set the <option>transparent_hugepage</option> kernel parameter to <option>never</option>.
This has to be changed in <filename>/etc/default/grub</filename> and added to the line <option>GRUB_CMDLINE_LINUX_DEFAULT</option>, for example:</para>
<screen>GRUB_CMDLINE_LINUX_DEFAULT="resume=/dev/sda1 splash=silent quiet showopts elevator=noop transparent_hugepage=never"</screen>
<para>To write the new configuration run <command>grub2-mkconfig -o /boot/grub2/grub.cfg</command>.
To update the grub2 during boot run <command>grub2-install /dev/sda</command>.</para>
</tip>
<para>Monitor channel synchronization process in real-time by viewing channel log files located in the directory <filename>/var/log/rhn/reposync</filename>:</para>
<screen>tailf /var/log/rhn/reposync/&lt;CHANNEL_NAME&gt;.log</screen>
<para>After the channel sync process has completed proceed to:
 <xref linkend="preparing.and.registering.clients"/></para>
</sect2>
</sect1>
</chapter>
<chapter id="preparing.and.registering.clients"><title>Registering Clients</title><sect1 id="_introduction"><title>Introduction</title><para>Releases prior to <phrase><phrase>SUSE</phrase> Manager</phrase> 2.1 were shipped with a <emphasis role="strong">traditional</emphasis> client management framework (which is still fully supported today).
SUSE Manager 3 and later include the Salt framework in addition to the <emphasis role="strong">traditional</emphasis> framework.</para>
<variablelist>
<varlistentry>
<term>Salt</term>
<listitem>
<para>Is an end-to-end data-center automation tool which may also be used outside the scope of <phrase><phrase>SUSE</phrase> Manager</phrase> to introduce reactive, real-time orchestration, and configuration management.
Managed systems can coexist using both <emphasis role="strong">traditional</emphasis> and <emphasis role="strong">Salt</emphasis> frameworks.
This functionality provides a safe learning environment when switching to <emphasis role="strong">Salt</emphasis> while you continue to maintain existing deployments.</para>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="create.act.keys"><title>Creating Activation Keys</title><para>The following procedure will guide you through creating the activation keys for your test channels.
Activation keys can be used with both Salt and traditional clients.</para>
<para>Activation keys define the number of software entitlements, channels, and groups a client system is allowed to subscribe to.
This information is passed on to all systems registered with said key.
Each activation key is bound to the organization for which it has been created.</para>
<orderedlist id="create.activation.keys" numeration="arabic">
<title>Procedure: Creating Activation Keys</title>
<listitem>
<para>As the administrator login to the <phrase><phrase>SUSE</phrase> Manager</phrase> Web UI.</para>
</listitem>
<listitem>
<para>Switch to <menuchoice><guimenu>Systems</guimenu> <guimenu>Activation Keys</guimenu></menuchoice>.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Create Key</guimenu> link at the upper right corner.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems create activation key</phrase></textobject><imageobject>
<imagedata fileref="systems_create_activation_key.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>Enter an <menuchoice><guimenu>Activation Key Details</guimenu> <guimenu>Description</guimenu></menuchoice> to identify the generated activation key.</para>
</listitem>
<listitem>
<para>Enter a human readable <menuchoice><guimenu>Activation Key Details</guimenu> <guimenu>Key</guimenu></menuchoice> string value such as <emphasis role="strong">SLES12-SP3</emphasis> to represent the distribution and service pack associated with the key.</para>
<warning>
<title>Allowed Characters</title>
<para>For all <phrase>SUSE</phrase>
Products do not use commas within the key string.
Red Hat Products require commas.
For more information, see <xref linkend="ref.webui.systems.activ-keys"/>.</para>
</warning>
</listitem>
<listitem>
<para>Select the <phrase>SUSE Linux Enterprise</phrase> channel that was added during
<ulink url="proc-quickstart-first-channel-sync.xml#proc-quickstart-first-channel-sync">First Channel Sync</ulink>
from the <menuchoice><guimenu>Activation Key Details</guimenu> <guimenu>Base Channels</guimenu></menuchoice> drop down.</para>
</listitem>
<listitem>
<para>For this guide leave <menuchoice><guimenu>Activation Key Details</guimenu> <guimenu>Contact Method</guimenu></menuchoice> set to default.</para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Activation Key Details</guimenu> <guimenu>Universal Default</guimenu></menuchoice> should remain unchecked. Click <guimenu>Create Activation Key</guimenu> to complete creation of the activation key.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="create.tools.repository"><title>Creating the SUSE Manager Tools Repository</title><para>In this section you will create a tools repository on the <phrase><phrase>SUSE</phrase> Manager</phrase> Server for providing client tools.
The client tools repository contains packages for installing Salt on minions as well as required packages for registering traditional clients during the bootstrapping procedure.
These packages will be installed from the newly generated repository during the registration process.
In the following procedure you will create the <phrase>SUSE Linux Enterprise</phrase> tools repository.</para>
<important>
<title>Creating a Tools Repository when an SCC Channel has not been Synced</title>
<para>Before following the procedure to create the tools repository make sure the <phrase>SUSE</phrase> vendor channel you will be using with your client has been completely synced.
You can check this by running <command>tail -f /var/log/rhn/reposync/</command>&lt;CHANNEL_NAME&gt;<literal>.log</literal> as <emphasis>root</emphasis>.
In the following example replace <replaceable>version</replaceable> with the actual version string:</para>
<screen># tail -f /var/log/rhn/reposync/sles`version`-pool-x86_64.log</screen>
<para>Once completed you should see the following output in your terminal:</para>
<screen>2017/12/12 15:20:32 +02:00 Importing packages started.
2017/12/12 15:22:02 +02:00 1.07 %
...
2017/12/12 15:34:25 +02:00 86.01 %
2017/12/12 15:35:49 +02:00 Importing packages finished.
2017/12/12 15:35:49 +02:00 Linking packages to channel.
...
2017/12/12 15:35:59 +02:00 Sync completed.</screen>
</important>
<orderedlist numeration="arabic">
<title>Procedure: Generating the Tools Repository for SUSE Linux Enterprise</title>
<listitem>
<para>Open a terminal on the server as root and enter the following command to list available bootstrap repositories:</para>
<screen>mgr-create-bootstrap-repo -l SLE-`version`-x86_64</screen>
</listitem>
<listitem>
<para>Then invoke the same command using the listed repository as the product label to actually create the bootstrap repository:</para>
<screen>mgr-create-bootstrap-repo -c SLE-version-x86_64</screen>
</listitem>
<listitem>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> will create and add the client tools to the newly created <filename>repositories</filename> directory located at <filename>/srv/www/htdocs/pub/repositories/</filename> .</para>
</listitem>
</orderedlist>
<para>This repository is suitable for both Server and Desktop of <phrase>SUSE Linux Enterprise</phrase>
.</para>
</sect1>
<sect1 id="registering.clients.traditional"><title>Registering Traditional Clients</title><para><remark role="fixme">Add a short description</remark></para><sect2 id="generate.bootstrap.script"><title>Generating a Bootstrap Script</title><para>This section goes over generating a template bootstrap script which will be copied and modified for use with <quote>traditional</quote> clients.
Traditional clients register with <phrase><phrase>SUSE</phrase> Manager</phrase> via a bootstrap script executed on the client which deploys all necessary packages to it.
The bootstrap script contains parameters which assigns a client system to its base channel.
Two of these important parameters are:</para>
<itemizedlist>
<listitem>
<para>Activation Keys</para>
</listitem>
<listitem>
<para>GNU Privacy Guard (GPG) Keys</para>
</listitem>
</itemizedlist>
<note>
<title>Using the --traditional [option]</title>
<para>As of <phrase><phrase>SUSE</phrase> Manager</phrase> 3.1 the <command>--traditional</command> option must be used if creating a bootstrap script from the command line via the <command>mgr-bootstrap</command> command for traditional clients.
Generated bootstrap scripts target Salt minions by default.</para>
</note>
<note>
<title>Bootstrap Scripting Best Practices</title>
<para>It is possible to use various methods to register clients for use with <phrase><phrase>SUSE</phrase> Manager</phrase> in mass using bootstrap.
Using batch scripts for mass registration of both VM and Bare Metal machines is a possibility.
Some of these methods will be covered in the <emphasis><phrase role="ref">Best Practices Guide</phrase></emphasis> and will be added as examples at a later time.</para>
</note>
<important>
<title>SLES 15 and Python 3</title>
<para>SLES 15 utilizes Python 3 as its default system version. Due to this change any older
bootstrap scripts(based on python 2) must be re-created for SLES 15 systems. Attempting to
register SLES 15 systems with SUSE Manager using Python 2 versions of the bootstrap script will
fail.</para>
</important>
<para>The following procedure will guide you through generating a bootstrap script.</para>
<orderedlist id="create.boot.script" numeration="arabic">
<title>Procedure: Creating a Bootstrap Script</title>
<listitem>
<para>From the <phrase><phrase>SUSE</phrase> Manager</phrase> Web UI, browse to <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu> <guimenu>Manager Configuration</guimenu> <guimenu>Bootstrap Script</guimenu></menuchoice>. For more information, see <xref linkend="s3-sattools-config-bootstrap"/>.</para>
</listitem>
<listitem>
<para>Uncheck <menuchoice><guimenu>SUSE Manager Configuration - Bootstrap</guimenu> <guimenu>Bootstrap Script</guimenu> <guimenu>Bootstrap using Salt</guimenu></menuchoice>.
Use default settings and click the <guimenu>Update</guimenu> button.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>mgr configuration bootstrap trad</phrase></textobject><imageobject>
<imagedata fileref="mgr_configuration_bootstrap_trad.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<warning>
<title>Using SSL</title>
<para>Unchecking <guimenu>Enable SSL</guimenu> in the Web UI or setting <literal>USING_SSL=0</literal> in the bootstrap script is not recommended.
If you disable SSL nevertheless you will need to manage custom CA certificates to be able to run the registration process successfully.</para>
</warning>
</listitem>
<listitem>
<para>A template bootstrap script is generated and stored on the server’s file system in the <filename>/srv/www/htdocs/pub/bootstrap</filename> directory.</para>
<screen>cd /srv/www/htdocs/pub/bootstrap</screen>
<para>The bootstrap script is also available at <filename><ulink url="https://example.com/pub/bootstrap/bootstrap.sh">https://example.com/pub/bootstrap/bootstrap.sh</ulink></filename>
.</para>
</listitem>
</orderedlist>
<para><xref linkend="modify.bootstrap.script"/> will cover copying and modifying your bootstrap template for use with each client.</para>
</sect2>
<sect2 id="modify.bootstrap.script"><title>Editing the Bootstrap Script</title><para>In this section you will copy and modify the template bootstrap script you created from <xref linkend="generate.bootstrap.script"/>.</para>
<para>A minimal requirement when modifying a bootstrap script for use with <phrase><phrase>SUSE</phrase> Manager</phrase> is the inclusion of an activation key.
Depending on your organizations security requirements it is strongly recommended to include one or more (GPG) keys (for example, your organization key, and package signing keys).
For this tutorial you will be registering with the activation keys created in the previous section.</para>
<orderedlist id="mod.bootstrap.script" numeration="arabic">
<title>Procedure: Modifying the Bootstrap Script</title>
<listitem>
<para>Login as root from the command line on your <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
</listitem>
<listitem>
<para>Navigate to the bootstrap directory with:</para>
<screen>cd /srv/www/htdocs/pub/bootstrap/</screen>
</listitem>
<listitem>
<para>Create and rename two copies of the template bootstrap script for use with each of your clients.</para>
<screen>cp bootstrap.sh bootstrap-sles11.sh
cp bootstrap.sh bootstrap-sles12.sh</screen>
</listitem>
<listitem>
<para>Open <filename>sles12.sh</filename> for modification.
Scroll down and modify both lines marked in green.
You must comment out <literal>exit 1</literal> with a hash mark (<literal>\#</literal>) to activate the script and then enter the name of the key for this script in the <literal>ACTIVATION_KEYS=</literal> field as follows:</para>
<screen>echo "Enable this script: comment (with #'s) this block (or, at least just"
echo "the exit below)"
echo
#exit 1

# can be edited, but probably correct (unless created during initial install):
# NOTE: ACTIVATION_KEYS *must* be used to bootstrap a client machine.
ACTIVATION_KEYS=1-sles12
ORG_GPG_KEY=</screen>
</listitem>
<listitem>
<para>Once you have completed your modifications save the file and repeat this procedure for the second bootstrap script.
Proceed to <xref linkend="connect.first.client"/>.</para>
</listitem>
</orderedlist>
<note>
<title>Finding Your Keys</title>
<para>To find key names you have created: In the Web UI, click <menuchoice><guimenu>Home</guimenu> <guimenu>Overview</guimenu> <guimenu>Manage Activation keys</guimenu> <guimenu>Key Field</guimenu></menuchoice>.
All keys created for channels are listed on this page.
You must enter the full name of the key you wish to use in the bootstrap script exactly as presented in the key field.</para>
</note>
</sect2>
<sect2 id="connect.first.client"><title>Connecting Clients</title><para>This section covers connecting your clients to <phrase><phrase>SUSE</phrase> Manager</phrase> with the modified bootstrap script.</para>
<orderedlist id="run.bootstrap.script" numeration="arabic">
<title>Procedure: Running the Bootstrap Script</title>
<listitem>
<para>From your <phrase><phrase>SUSE</phrase> Manager</phrase> Server command line as root navigate to the following directory:</para>
<screen>cd /srv/www/htdocs/pub/bootstrap/</screen>
</listitem>
<listitem>
<para>Run the following command to execute the bootstrap script on the client:</para>
<screen>cat MODIFIED-SCRIPT.SH \
| ssh root@example.com /bin/bash</screen>
</listitem>
<listitem>
<para>The script will execute and proceed to download the required dependencies located in the repositories directory you created earlier.
Once the script has finished running, log in to the Web UI and click <menuchoice><guimenu>Systems</guimenu> <guimenu>Overview</guimenu></menuchoice> to see the new client listed.</para>
</listitem>
</orderedlist>
<para>This concludes the bootstrap section of this guide. <xref linkend="preparing.and.registering.clients.salt"/> will go over registering Salt minions for use with <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
</sect2>
</sect1>
<sect1 id="preparing.and.registering.clients.salt"><title>Registering Salt Clients</title><para>There are currently three methods for registering Salt minions.
The following section describes the first method and uses a bootstrap repository.
The second method is to create a bootstrap script using <command>mgr-bootstrap</command>.
Bootstrapping Salt minions with <command>mgr-bootstrap</command> is performed in the same manner as bootstrapping traditional clients; for more information, see <xref linkend="registering.clients.traditional"/>.
The third method is performed from the <phrase><phrase>SUSE</phrase> Manager</phrase>{webui}
; find this method located in <xref linkend="ref.webui.systems.bootstrapping"/>.</para>
<important>
<title>Deprecation Warning</title>
<para>The <command>mgr-bootstrap --salt</command> option will be deprecated as of SUSE Manager 3.1.
To bootstrap a Salt minion call <command>mgr-bootstrap</command> from the command line as you would for a traditional system.</para>
</important>
<para>The following section assumes you have created a SUSE Manager tools repository.
You can review creating a tools repository in <xref linkend="create.tools.repository"/>.</para>
<warning>
<title>Ensure the Salt Master is Reachable During Bootstrap</title>
<para>The Salt master and its proxy should always be reachable via both IP address and the FQDN.
In the following rare scenario:</para>
<itemizedlist>
<listitem>
<para>The Salt master (SUSE Manager) is in some DNS.</para>
</listitem>
<listitem>
<para>Your Minions are in a different subnet bound to an alternate DNS and the Salt master record is absent.</para>
</listitem>
<listitem>
<para>The Salt master cannot know that the minion is not utilizing the same DNS record. The the Salt master nevertheless sends the FQDN of itself to the minion expecting it to join.</para>
</listitem>
<listitem>
<para>The minion looks for a different DNS, one where the master record does not exist therefore bootstrap fails.</para>
</listitem>
</itemizedlist>
</warning>
<para>Once you have fully synced a base channel from the Web UI
for clients to obtain software sources from, for example: <literal>SLES12-SP3-Pool_for_x86_64</literal> perform the following procedure to register a Salt minion.</para>
<orderedlist numeration="arabic">
<title>Procedure: Registering Salt Minions</title>
<listitem>
<para>On your minion as <systemitem class="username">root</systemitem> enter the following command:</para>
<screen>zypper ar http://`FQDN.SUSE.Manager.com`/pub/repositories/sle/12/3/bootstrap/ \
   sles12-sp3</screen>
<note>
<para>Do not use <literal>HTTPS</literal>.
Use <literal>HTTP</literal> instead to avoid errors.</para>
</note>
</listitem>
<listitem>
<para>After adding the repository containing the necessary Salt packages execute:</para>
<screen>zypper in salt-minion</screen>
</listitem>
<listitem>
<para>Modify the minion configuration file to point to the fully qualified domain name (<replaceable>FQDN</replaceable>) of the <phrase><phrase>SUSE</phrase> Manager</phrase> server (master):</para>
<screen>vi /etc/salt/minion</screen>
<para>Find and change the line:</para>
<screen>master: salt</screen>
<para>to:</para>
<screen>master:`FQDN.SUSE.Manager.com`</screen>
</listitem>
<listitem>
<para>Restart the Salt minion with:</para>
<screen>systemctl restart salt-minion</screen>
<para>or on non-systemd OS:</para>
<screen>rcsalt-minion restart</screen>
<para>Your newly registered minion should now show up within the Web UI under <menuchoice><guimenu>Salt</guimenu> <guimenu>Onboarding</guimenu></menuchoice>.
Accept the key to begin management.</para>
</listitem>
</orderedlist>
</sect1>
</chapter>
<chapter id="salt.gs.guide.introduction"><title>Getting Started with Salt</title><sect1 id="salt.gs.guide.intro"><title>Introduction</title><para>This section introduces you to the new Salt features added in <phrase><phrase>SUSE</phrase> Manager</phrase> 3.
This chapter assumes you have completed all previous Getting Started sections.
At a minimum have the following setup:</para>
<itemizedlist>
<listitem>
<para>A freshly installed <phrase><phrase>SUSE</phrase> Manager</phrase> server with a main admin account and a synced product channel</para>
</listitem>
<listitem>
<para>Preferably two registered Salt minions to experiment with.</para>
</listitem>
</itemizedlist>
<para>If you find yourself stuck at any point refer to the <emphasis><phrase role="ref">SaltStack Get Started</phrase></emphasis> tutorial located at <ulink url="https://docs.saltstack.com/en/getstarted/fundamentals/index.html">https://docs.saltstack.com/en/getstarted/fundamentals/index.html</ulink>.</para>
<note>
<para>This guide does not attempt to cover all that Salt has to offer.
This guide is a primer for using Salt with <phrase><phrase>SUSE</phrase> Manager</phrase>.
For comprehensive Salt documentation, see <ulink url="https://docs.saltstack.com/en/latest/contents.html">https://docs.saltstack.com/en/latest/contents.html</ulink>.</para>
</note>
<para>The current version of Salt in <phrase><phrase>SUSE</phrase> Manager</phrase> is 2018.3.0.</para>
</sect1>
<sect1 id="salt.gs.guide.testing.first.minion"><title>Understanding Salt Calls</title><variablelist>
<varlistentry>
<term>Salt Calls</term>
<listitem>
<para>Salt calls are defined by three main properties:</para>
<screen>salt 'target' &lt;function&gt; [arguments]</screen>
<variablelist>
<varlistentry>
<term>Target</term>
<listitem>
<para>Use the second property in a Salt call to target a single machine or group of machines.
Specify the minion or group of minions you would like to run a function on.</para>
<variablelist>
<varlistentry>
<term>General Targeting</term>
<listitem>
<para>List available grains on all minions:</para>
<screen>salt '*' grains.ls</screen>
<para>Ping a specific minion:</para>
<screen>salt 'web1.example.com' test.ping</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Glob Targeting</term>
<listitem>
<para>Ping all minions using a domain:</para>
<screen>salt '*example.com' test.ping</screen>
<para>Display the OS name of all minions with the label <literal>webserver</literal>:</para>
<screen>salt 'webserver*' grains.item oscodename</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>List Targeting</term>
<listitem>
<screen>salt -L 'webserver.example.com,db.example.com' test.ping</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Regular Expression Targeting</term>
<listitem>
<para>You may use PCRE-compliant regular expressions:</para>
<screen>salt -E '(?!web)' test.ping</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>IP Address Targeting</term>
<listitem>
<para>List minion IP addresses:</para>
<screen>salt '*' network.ip_addrs</screen>
<para>Ping a specific minion IP address:</para>
<screen>salt -S '172.31.60.74' test.ping</screen>
<para>Ping all minions on a subnet:</para>
<screen>salt -S 172.31.0.0/16 test.ping</screen>
<tip>
<title>Lookup a Subnet Using the ip Command</title>
<para>You can use the <command>ip</command> command to find the subnet mask in the format of <literal>192.168.1.1/24</literal>:</para>
<screen>ip -o -f inet addr show | awk '/scope global/ {print $4}'</screen>
</tip>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
<varlistentry>
<term>Function</term>
<listitem>
<para>Once you have specified a target, provide the function you would like to call.
Functions also accept arguments.
Arguments are space-delimited, for example:</para>
<screen>salt '*' cmd.run 'echo "Hello: $FIRST_NAME"' env='{FIRST_NAME: "John"}'</screen>
<variablelist>
<varlistentry>
<term>Locating Additional Minion Functions</term>
<listitem>
<para>Find more functions which can be called on minions by running:</para>
<screen>salt '*' sys.doc</screen>
<para>A full list of callable functions are located here: <ulink url="https://docs.saltstack.com/en/2015.8/ref/modules/all/index.html">https://docs.saltstack.com/en/2015.8/ref/modules/all/index.html</ulink></para>
</listitem>
</varlistentry>
<varlistentry>
<term>Arguments</term>
<listitem>
<para>Provides the extra data needed by a function you are calling.
The command <literal>pkg.install</literal> requires an argument specifying a package to install. YaST has been selected for installation, for example:</para>
<screen>salt '*' pkg.install yast2</screen>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="salt.gs.guide.term.overview"><title>Common Salt Terminology</title><variablelist>
<varlistentry>
<term>Grains</term>
<listitem>
<para>Grains provide information about the hardware of a minion.
For example, the operating system, IP addresses, network interfaces, memory, etc.
When running a Salt command from keep in mind any modules and functions called are run locally from the system being called.
Salt modules are stored on minions and master within the following directory:</para>
<screen>/usr/lib/python2.7/site-packages/salt/</screen>
<para>List all available grains with the <literal>grains.ls</literal> function:</para>
<screen>salt '*' grains.ls</screen>
<para>List collected grain system data by using the <literal>grains.items</literal> function:</para>
<screen>salt '*' grains.items</screen>
<para>For more information on grains, see <ulink url="https://docs.saltstack.com/en/latest/topics/grains/">https://docs.saltstack.com/en/latest/topics/grains/</ulink>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>States</term>
<listitem>
<para>States are templates which place systems into a known configuration, for example which applications and services are installed and running on those systems.
States are a way for you to describe what each of your systems should look like.
Once written, states are applied to target systems automating the process of managing and maintaining a large numbers of systems into a known state.
For more information on states, see <ulink url="https://docs.saltstack.com/en/latest/topics/tutorials/starting_states.html">https://docs.saltstack.com/en/latest/topics/tutorials/starting_states.html</ulink>.</para>
<warning>
<title>Updating Salt</title>
<para>Do not update <systemitem class="resource">salt</systemitem> itself using Salt states.
First update all other system packages using Salt states then update <systemitem class="resource">salt</systemitem> as a separate stand-alone step from the <phrase><phrase>SUSE</phrase> Manager</phrase>{webui}.</para>
</warning>
</listitem>
</varlistentry>
<varlistentry>
<term>Pillar</term>
<listitem>
<para>Pillars unlike grains are created on the master.
Pillar files contain information about a minion or group of minions.
Pillars allow you to send confidential information to a targeted minion or group of minions.
Pillars are useful for sensitive data, configuration of minions, variables, and any arbitrary data which should be defined.
For more information on pillars, see <ulink url="https://docs.saltstack.com/en/latest/topics/tutorials/pillar.html">https://docs.saltstack.com/en/latest/topics/tutorials/pillar.html</ulink>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Beacons</term>
<listitem>
<para>Beacons allow an admin to use the event system in Salt to monitor non-Salt processes.
Minions may use beacons to hook into many types of system proceses for constant monitoring.
Once a targeted monitored activity occurs an event is sent on the Salt event bus that may be used to trigger a reactor.</para>
<important>
<title>Enabling Beacons</title>
<para>To work with beacons on Salt minions the package python-pyinotify must be installed for SUSE systems.
For RES systems install python-inotify.
This package is not installed automatically during the salt minion package installation.</para>
</important>
<note>
<title>Peer Communication with salt-broker</title>
<para>The salt-broker acts like a switch and not like a hub, therefore Peer communication will only work for minions behind the same broker/Proxy.
For more information on Salt and peer communication see: <ulink url="https://docs.saltstack.com/en/latest/ref/peer.html">https://docs.saltstack.com/en/latest/ref/peer.html</ulink></para>
</note>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="salt.gs.guide.useful.salt.commands"><title>Useful Salt Commands</title><para>The following list provides several useful Salt commands.</para>
<variablelist>
<varlistentry>
<term>salt-run</term>
<listitem>
<para>Print a list of all minions that are up:</para>
<screen>salt-run manage.up</screen>
<para>Print a list of all minions that are down:</para>
<screen>salt-run manage.down</screen>
<para>Print a list with the current status of all Salt minions:</para>
<screen>salt-run manage.status</screen>
<para>Check the version of Salt running on the master and active minions:</para>
<screen>salt-run manage.versions</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>salt-cp</term>
<listitem>
<para>Copy a file to a minion or set of minions.</para>
<screen>salt-cp '*' foo.conf /root</screen>
<para>For more information, see <ulink url="https://docs.saltstack.com/en/latest/ref/cli/salt-cp.html">https://docs.saltstack.com/en/latest/ref/cli/salt-cp.html</ulink>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>salt-key -l</term>
<listitem>
<para>List public keys:</para>
<screen>salt-key -l</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>salt-key -A</term>
<listitem>
<para>Accept all pending keys:</para>
<screen>salt-key -A</screen>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="salt.gs.guide.salt.file.locations"><title>Salt File Locations and Structure</title><para>The following screen describes Salt file structures and their locations used by the <phrase><phrase>SUSE</phrase> Manager</phrase> server.
These files are listed in <filename>/etc/salt/master.d/susemanager.conf</filename>:</para>
<screen># Configure different file roots

file_roots:
  base:
    - /usr/share/susemanager/salt    #Should not be touched by a user
    - /srv/susemanager/salt          #Should not be touched by a user
    - /srv/salt                      #Your custom states go here

# Configure different pillar roots

pillar_roots:
  base:
    - /usr/share/susemanager/pillar  #Should not be touched by a user
    - /srv/pillar                    #Custom pillars go here

# Extension modules path

extension_modules: /usr/share/susemanager/modules

# Master top configuration

master_tops:
  mgr_master_tops: True</screen>
<para>The following tips should be kept in mind when working with <filename>/etc/salt/master.d/susemanager.conf</filename>.</para>
<itemizedlist>
<listitem>
<para>Files listed are searched in the order they appear.</para>
</listitem>
<listitem>
<para>The first file found is called.</para>
</listitem>
</itemizedlist>
<sect2 id="salt.gs.guide.salt.file.locations.file.roots"><title>file_roots</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> as the Salt master reads its state data from three specific file root directories.</para>
<variablelist>
<varlistentry>
<term>/usr/share/susemanager/salt</term>
<listitem>
<para>This directory is created by <phrase><phrase>SUSE</phrase> Manager</phrase> and its content generated by the <literal>/usr/share/susemanager/modules/tops/mgr_master_tops.py</literal> python module.
It is shipped and updated together with <phrase><phrase>SUSE</phrase> Manager</phrase> and includes certificate setup and common state logic that will be applied to packages and channels.</para>
<warning>
<title>Do Not Edit</title>
<para>You should not edit or add custom Salt data to this directory.</para>
</warning>
</listitem>
</varlistentry>
<varlistentry>
<term>/srv/susemanager/salt</term>
<listitem>
<para>This directory is created by <phrase><phrase>SUSE</phrase> Manager</phrase> and contains assigned channels and packages for minions, groups, and organizations.
These files will be overwritten and regenerated.
A good analogy for this directory would be the SUSE Manager database translated into Salt directives.</para>
<warning>
<title>Do Not Edit</title>
<para>You should not edit or add custom Salt data to this directory.</para>
</warning>
</listitem>
</varlistentry>
<varlistentry>
<term>/srv/salt</term>
<listitem>
<para>The directory <filename>/srv/salt</filename> is for your custom state data, salt modules etc.
SUSE Manager does not perform any actions on this directory.
However the state data placed here affects the Highstate of minions and is merged with the result generated by <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<note>
<title>Editable</title>
<para>Place custom Salt data here.</para>
</note>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="salt.gs.guide.salt.file.locations.pillar.roots"><title>pillar_roots</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> as the Salt master reads its pillar data from two specific pillar root directories.</para>
<variablelist>
<varlistentry>
<term>/usr/share/susemanager/pillar</term>
<listitem>
<para>This directory is generated by <phrase><phrase>SUSE</phrase> Manager</phrase>.
It is shipped and updated together with <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<warning>
<title>Do Not Edit</title>
<para>You should not edit or add custom Salt data to this directory.</para>
</warning>
</listitem>
</varlistentry>
<varlistentry>
<term>/srv/pillar</term>
<listitem>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> by default does not touch or do anything with this directory.
However the custom pillar data placed here is merged with the pillar result created by <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<tip>
<title>Editable Directory</title>
<para>Place your custom Salt pillar data here.</para>
</tip>
</listitem>
</varlistentry>
</variablelist>
</sect2>
</sect1>
<sect1 id="_install_the_suse_manager_locale_formula"><title>Install the SUSE Manager Locale Formula</title><para>The following section provides guidance on installing and using SUSE provided Salt formulas.</para>
<orderedlist numeration="arabic">
<title>Procedure: Installing the Locale Formula</title>
<listitem>
<para>Install the locale formula with:</para>
<screen>zypper install locale-formula</screen>
<note>
<para>This installs the package contents to <filename>/usr/share/susemanager/formulas/{metadata,states}</filename></para>
</note>
</listitem>
<listitem>
<para>After installing the RPM, log in to the <phrase><phrase>SUSE</phrase> Manager</phrase> Web UI.</para>
</listitem>
<listitem>
<para>Browse to the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>System Details</guimenu></menuchoice> page of any minion you would like to apply the formula to.</para>
</listitem>
<listitem>
<para>On the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>System Details</guimenu></menuchoice> page you will see a new <guimenu>Formulas</guimenu> tab.
Select it to view a list of installed formulas.</para>
</listitem>
<listitem>
<para>From the <guimenu>Formulas</guimenu> list select <menuchoice><guimenu>Formulas</guimenu> <guimenu>Locale</guimenu></menuchoice> and click <guimenu>Save</guimenu>.</para>
</listitem>
<listitem>
<para>A new tab will appear next to the <menuchoice><guimenu>Formula</guimenu> <guimenu>Locale</guimenu></menuchoice> subtab. Select the new <menuchoice><guimenu>Formulas</guimenu> <guimenu>Locale</guimenu></menuchoice> tab.</para>
</listitem>
<listitem>
<para>The <menuchoice><guimenu>Formalas</guimenu> <guimenu>Locale</guimenu></menuchoice> tab contains options for setting the language, keyboard layout, timezone, and whether hardware clock is set to UTC. Select the desired options and click <guimenu>Save</guimenu>.</para>
</listitem>
<listitem>
<para>Run the following command to verify pillar settings. The output has been truncated.</para>
<screen>salt '$your_minion' pillar.items</screen>
<screen>...
   keyboard_and_language:
       ----------
       keyboard_layout:
           English (US)
       language:
           English (US)
   machine_password:
       foobar
   mgr_server:
       manager_server
   org_id:alt '$your_minion_here'
       1
   timezone:
       ----------
       hardware_clock_set_to_utc:
           True
       name:
           CET
    ...</screen>
</listitem>
<listitem>
<para>Apply this state to your minion by applying the highstate from the command line with:</para>
<screen>salt '$your_minion' state.highstate</screen>
<note>
<para>You can also apply the highstate from the previous formula tab from the <phrase><phrase>SUSE</phrase> Manager</phrase> Web UI by clicking <menuchoice><guimenu>System Details</guimenu> <guimenu>States</guimenu> <guimenu>Apply Highstate</guimenu></menuchoice>.</para>
</note>
</listitem>
</orderedlist>
</sect1>
</chapter>
</book>
<book id="book.suma.best.practices"><bookinfo><title>SUSE Manager 3.2</title><date/><legalnotice><para/></legalnotice></bookinfo>
  <?dbjsp dir="best-practices/en-US"?>
  <?dbjsp filename="index.jsp"?>
 <chapter id="mgr.conceptual.overview"><title>Introduction</title><para>This document targets system administrators.</para>
<sect1 id="_what_s_covered_in_this_guide"><title>What’s Covered in this Guide?</title><para>This document describes <phrase>SUSE</phrase> recommended best practices for <phrase><phrase>SUSE</phrase> Manager</phrase>.
This information has been collected from a large number of successful <phrase><phrase>SUSE</phrase> Manager</phrase> real world implementations and includes feedback provided by product management, sales and engineering.</para>
<note>
<title> Version Information</title>
<para>In this manual if not other specified,  version <phrase>3.2</phrase> is assumed and this version is required if a feature is discussed.
 <phrase>3.2</phrase> and  <phrase>3.2</phrase> Proxy were originally released as a SLES 12 SP3 extension.
Whenever features of the <phrase>3.2</phrase> host operating system are documented and not other specified version 12 SP3 is assumed.</para>
</note>
<para>This chapter will discuss the following topics:</para>
<itemizedlist>
<listitem>
<para>Prerequisites</para>
</listitem>
<listitem>
<para>Network Requirements</para>
</listitem>
<listitem>
<para>Hardware Requirements</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="_prerequisites"><title>Prerequisites</title><formalpara>
<title>Purchased Registration Keys</title>
<para>During initial setup <phrase><phrase>SUSE</phrase> Manager</phrase> will request a product <literal role="systemitem">Registration Key</literal>.
This key will be provided to you after purchasing the product.
You can find your key located under your <phrase>SUSE Customer Center</phrase> account.
Log-in with your <phrase>SUSE Customer Center</phrase> credentials or register for a new account. —https://scc.suse.com</para>
</formalpara>
<formalpara>
<title>Evaluation Keys</title>
<para>If you wish to run a test system (non-production) a 60 day evaluation key may be obtained.
On the <phrase><phrase>SUSE</phrase> Manager</phrase> product page click <guimenu>TRY SUSE MANAGER</guimenu>.
The evaluation key limits the number of systems that may be registered with SUSE Manager to 10.
For more information see:</para>
</formalpara>
<itemizedlist>
<listitem>
<para><ulink url="https://www.suse.com/products/suse-manager/">https://www.suse.com/products/suse-manager/</ulink></para>
</listitem>
</itemizedlist>
<formalpara>
<title>SCC Organization Credentials</title>
<para>During setup you will also be asked to enter your <phrase>SUSE Customer Center</phrase> <literal role="systemitem">Organization Credentials</literal>.</para>
</formalpara>
<formalpara>
<title>Users and Passwords</title>
<para>During both the <phrase>SUSE Linux Enterprise</phrase> installation and setup of <phrase><phrase>SUSE</phrase> Manager</phrase> several users and passwords will be created:</para>
</formalpara>
<itemizedlist>
<listitem>
<para><phrase>SUSE Linux Enterprise</phrase> root user account</para>
</listitem>
<listitem>
<para>PostgreSQL database user and password</para>
</listitem>
<listitem>
<para>Certificate of Authority password</para>
</listitem>
<listitem>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> administrator user and password</para>
</listitem>
</itemizedlist>
<tip>
<title>Safe Passwords</title>
<para>Maintain security by creating safe passwords.
Store passwords within a secure location.
Use the following guidelines when creating your passwords.</para>
<itemizedlist>
<listitem>
<para>At least 8 characters long</para>
</listitem>
<listitem>
<para>Should contain uppercase characters <command>A B C</command></para>
</listitem>
<listitem>
<para>Should contain lowercase characters <command>a b c</command></para>
</listitem>
<listitem>
<para>Should contain numbers <command>1 2 3</command></para>
</listitem>
<listitem>
<para>Should contain symbols <command>~ ! @ #</command></para>
</listitem>
</itemizedlist>
</tip>
</sect1>
<sect1 id="bp.chapt.intro.network.requires"><title>Network Requirements</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> and <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> both contact several external addresses in order to maintain updates and subscriptions.
The following lists provide the up-to-date hostnames for each service requiring permission when used in combination with corporate firewall and content filters.</para>
<itemizedlist>
<title>SUSE Customer Center Hostnames (Required)</title>
<listitem>
<para><ulink url="https://scc.suse.com">https://scc.suse.com</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://updates.suse.com">https://updates.suse.com</ulink></para>
</listitem>
</itemizedlist>
<itemizedlist>
<title>Novell Customer Center Hostnames (Legacy)</title>
<listitem>
<para><ulink url="https://secure-www.novell.com">https://secure-www.novell.com</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://nu.novell.com">https://nu.novell.com</ulink></para>
</listitem>
</itemizedlist>
<para>For <phrase><phrase>SUSE</phrase> Manager</phrase> to function properly it requires the following pre-configured components within your network.</para>
<important>
<title>Websocket Support</title>
<para>If SUSE Manager is accessed via an HTTP proxy (Squid, etc) the proxy must support websocket connections.</para>
</important>
<formalpara>
<title>Networking Hardware</title>
<para>The following table provides networking hardware info.
As <phrase><phrase>SUSE</phrase> Manager</phrase> will likely be managing a large number of systems (quite possibly numbering in hundreds or even thousands), networking hardware that increases bandwidth becomes increasingly more valuable.</para>
</formalpara>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry><para>Hardware</para></entry>
<entry><para>Recommended</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>100Mbits/s Link</para></entry>
<entry><para>Non-production test server</para></entry>
</row>
<row>
<entry><para>1Gb/s Link<?asciidoc-br?></para></entry>
<entry><para>Production Server</para></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<formalpara>
<title>DHCP Server</title>
<para>The purpose of the Dynamic Host Configuration Protocol (DHCP) is to assign network settings centrally (from a server) rather than configuring them locally on each and every workstation.
A host configured to use DHCP does not have control over its own static address.
It is enabled to configure itself completely and automatically according to directions from the server.
A DHCP server supplies not only the IP address and the netmask, but also the host name, domain name, gateway, and name server addresses for the client to use.
For more information on configuring DHCP see also:</para>
</formalpara>
<itemizedlist>
<listitem>
<para><ulink url="https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_dhcp.html">https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_dhcp.html</ulink></para>
</listitem>
</itemizedlist>
<formalpara>
<title>FQDN (Fully Qualified Domain Name)</title>
<para>DNS assists in assigning an IP address to one or more names and assigning a name to an IP address.
In Linux, this conversion is usually carried out by a special type of software known as bind.
The machine that takes care of this conversion is called a <emphasis>name server</emphasis>.
The names make up a hierarchical system in which each name component is separated by a period.
The name hierarchy is, however, independent of the IP address hierarchy described above.
Consider a complete name, such as <replaceable>jupiter.example.com</replaceable>, written in the format <replaceable>hostname.domain</replaceable>.
A full name, referred to as a <emphasis>fully qualified domain name</emphasis> (FQDN), consists of a host name and a domain name (example.com).
For more information on configuring a name server see also:</para>
</formalpara>
<itemizedlist>
<listitem>
<para><ulink url="https://www.suse.com/documentation/sles-12/book_sle_admin/data/sec_basicnet_nameres.html">https://www.suse.com/documentation/sles-12/book_sle_admin/data/sec_basicnet_nameres.html</ulink></para>
</listitem>
</itemizedlist>
<formalpara>
<title>DNS (Dynamic Name System) Server</title>
<para>A DNS Server is required for resolving domain names and host names into IP addresses.
For example, the IP address 192.168.2.100 could be assigned to the host name jupiter.
In the case of <phrase><phrase>SUSE</phrase> Manager</phrase> the DNS server must be resolvable both via DNS and reverse lookup.
For more information on configuring DNS see also:</para>
</formalpara>
<itemizedlist>
<listitem>
<para><ulink url="https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_dns.html">https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_dns.html</ulink></para>
</listitem>
</itemizedlist>
<important>
<title>Microsoft NT Lan Manager Compatibility</title>
<para>Microsoft NT Lan Manager can be configured for use with basic authentication and will work with <phrase><phrase>SUSE</phrase> Manager</phrase> but authentication using native (NTLM) Microsoft protocols is not supported.</para>
</important>
<formalpara>
<title>Open Port List</title>
<para>During the setup process of <phrase><phrase>SUSE</phrase> Manager</phrase> all required ports will be opened automatically.
The following tables provide you with an overview of ports which are used by <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
</formalpara>
<table id="tab.install.ports.server" frame="all" rowsep="1" colsep="1">
<title>Required Server Ports</title>
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry><para>Port</para></entry>
<entry><para>Description</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>67</para></entry>
<entry><para>Required when <phrase><phrase>SUSE</phrase> Manager</phrase> is configured as a DHCP server for systems requesting IP addresses.</para></entry>
</row>
<row>
<entry><para>69</para></entry>
<entry><para>Used when <phrase><phrase>SUSE</phrase> Manager</phrase> is configured as a PXE server and allows installation and re-installation of PXE-boot enabled systems.</para></entry>
</row>
<row>
<entry><para>80</para></entry>
<entry><para>Used to contact <phrase>SUSE Customer Center</phrase>. All WebGUI, client, and proxy server requests travel via http or https.</para></entry>
</row>
<row>
<entry><para>443</para></entry>
<entry><para>All WebGUI, client, and proxy server requests via http or https and <phrase><phrase>SUSE</phrase> Manager</phrase> uses this port for <phrase>SUSE Customer Center</phrase> inbound traffic.</para></entry>
</row>
<row>
<entry><para>5222</para></entry>
<entry><para>When you wish to push actions to clients this port is required by the <literal role="systemitem">osad</literal> daemon running on client systems.</para></entry>
</row>
<row>
<entry><para>5269</para></entry>
<entry><para>Needed if you push actions to or via a <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase>.</para></entry>
</row>
<row>
<entry><para>4505</para></entry>
<entry><para>Required by the Salt-master to accept communication requests via TCP from minions. Inbound.</para></entry>
</row>
<row>
<entry><para>4506</para></entry>
<entry><para>Required by the Salt-master to accept communication requests via TCP from minions. Inbound.</para></entry>
</row>
</tbody>
</tgroup>
</table>
<para>For more information, see <ulink url="advanced.topics.app.ports.server.xml#at-ports">Port Listing</ulink>.</para>
<tip>
<title>Denying External Network Access</title>
<para>When your network requires denying external network access to and from <phrase><phrase>SUSE</phrase> Manager</phrase>, an RMT or SMT Server may be registered against <phrase><phrase>SUSE</phrase> Manager</phrase>.
The RMT or SMT server can then be used to synchronize the necessary <phrase>SUSE</phrase> repositories.
For more information on utilizing an RMT or SMT Server, see: <xref linkend="disconnect-setup"/>.</para>
</tip>
<note>
<title>Blocking Port 80</title>
<para>Port 80 may be blocked as traffic is automatically redirected through port 443.
It should be noted you will lose redirection.
Keep in mind you will need additional ports open when using traditional clients in combination with <literal role="systemitem">osad</literal> (XMPP TCP 5222).</para>
</note>
</sect1>
<sect1 id="_hardware_recommendations"><title>Hardware Recommendations</title><para>This section provides tested production recommendations for small to mid size networks that will be managed by <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry><para>Hardware</para></entry>
<entry><para>Recommended</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>CPU</para></entry>
<entry><para>Multi-core 64bit CPU (x86_64, ppc64le).</para></entry>
</row>
<row>
<entry><para>RAM</para></entry>
<entry><para>Minimum 4 GB+ for test server</para></entry>
</row>
<row>
<entry><para/></entry>
<entry><para>Minimum 16 GB+ for base installation</para></entry>
</row>
<row>
<entry><para/></entry>
<entry><para>Minimum 32 GB+ for a production server</para></entry>
</row>
<row>
<entry><para>Free Disk Space</para></entry>
<entry><para>Minimum 100 GB+ for root partition</para></entry>
</row>
<row>
<entry><para/></entry>
<entry><para>Minimum 50 GB+ for <filename>/var/lib/pgsql</filename></para></entry>
</row>
<row>
<entry><para/></entry>
<entry><para>Minimum 50 GB per SUSE product, or 200 GB per Red Hat product <filename>/var/spacewalk</filename></para></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<formalpara>
<title>Advised Number of CPUs</title>
<para>Review the following list for CPU recommendations.</para>
</formalpara>
<itemizedlist>
<listitem>
<para>Connecting 200 systems or less to <phrase><phrase>SUSE</phrase> Manager</phrase> : 4 CPUs</para>
</listitem>
<listitem>
<para>Connecting 500 systems or less to <phrase><phrase>SUSE</phrase> Manager</phrase> : 4-8 CPUs</para>
</listitem>
<listitem>
<para>When implementing RHEL channels: 8 CPUs</para>
</listitem>
</itemizedlist>
<formalpara>
<title>Disk Space</title>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> stores information in several directories.
For these directories it is strongly recommend that you create separate file-systems or use an NFS share.
During installation one VG will be created that contains all disks selected during installation.
Therefore the first disk should be large enough to contain the OS.
Normally 20GB - 50GB is sufficient.
A 50 GB partition would be the recommended size.
The following directories should be created on a separate file-system.</para>
</formalpara>
<itemizedlist>
<listitem>
<para><filename>/var/spacewalk</filename> This directory will contain all rpm’s. Each RPM will be stored only once.
The needed size will depend on the number of channels and type of channels that will be downloaded.
The general rule would be that per SUSE Service Pack (including SUSE RedHat Expanded Support) around 50 GB should be enough.
An extra 150 GB for RES/CentOS repositories should be added on top.
If other non-enterprise distributions (eg OpenSUSE) are added,  calculated 50 GB per distribution.
This directory could also be stored on an NFS share.</para>
</listitem>
<listitem>
<para><filename>/var/lib/pgsql</filename> This directory contains the PostgreSQL database.
Recommended is to create a file-system of 50 GB.
This volume should be monitored, because a full file-system where the database is running on can cause unexpected errors (and this even months after it happened).</para>
</listitem>
<listitem>
<para><filename>/srv/tftpboot</filename> If PXE/cobbler is used, this directory will contain the images (initrd and linux) for all created auto-installation profiles.
Each image is around 50 MB.
Depending on the number of profiles a decision has to be made if it would be useful to move this directory to a separate file-system.</para>
</listitem>
<listitem>
<para><filename>/var/log</filename> As SUSE Manager writes a large number of logs, it is recommended to create a separate file-system for /var/log.
The size should be around 20 GB.</para>
</listitem>
<listitem>
<para><filename>/var/spacewalk/db_backup</filename> For the backup of the PostgreSQL database, it is recommended the create a separate directory.
As the database can be rather large, it is advised to mount it on a separate file-system.
A safe estimate would be to provide twice space as for the directory created for <filename>/var/lib/pqsql</filename>.</para>
</listitem>
</itemizedlist>
<formalpara>
<title>Supported Databases</title>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> 3 and later no longer provides support for an external Oracle database.
The default database is an embedded PostgreSQL.
During <phrase><phrase>SUSE</phrase> Manager</phrase> setup the database will be created and configured.</para>
</formalpara>
</sect1>
</chapter>
<chapter id="suma.choosing.dist.scheme"><title>Managing Your Subscriptions</title><para>There are two methods for managing your subscriptions.
Both methods access <phrase>SUSE Customer Center</phrase>
and provide specialized benefits.</para>
<itemizedlist>
<listitem>
<para>Directly connecting to <phrase>SUSE Customer Center</phrase> is the recommended default way of managing your <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
</listitem>
<listitem>
<para>If you have special network security requirements which do not allow access from your internal network to the internet then you can use <phrase>SUSE Linux Enterprise Server</phrase> 12 running the Repository Mirroring Tool (RMT) or Subscription Management Tool (SMT).  These tools will contact <phrase>SUSE Customer Center</phrase> from a system connected to the external network and obtain updates for your clients which you may then mount on your internal <phrase><phrase>SUSE</phrase> Manager</phrase> server. This is the preferred method for managing client systems within a highly secure network infrastructure.</para>
</listitem>
</itemizedlist>
<sect1 id="scc"><title>SUSE Customer Center (SCC)</title><para><phrase>SUSE Customer Center</phrase>
(SCC) is the central place to manage your purchased <phrase>SUSE</phrase>
subscriptions, helping you access your update channels and get in contact with <phrase>SUSE</phrase>
experts.
The user-friendly interface gives you a centralized view of all your <phrase>SUSE</phrase>
subscriptions, allowing you to easily find all subscription information you need.
The improved registration provides faster access to your patches and updates. <phrase>SUSE Customer Center</phrase>
is also designed to provide a common platform for your support requests and feedback.
Discover a new way of managing your <phrase>SUSE</phrase>
account and subscriptions via one interface—​anytime, anywhere.
For more information on using <phrase>SUSE Customer Center</phrase>
, see <ulink url="https://scc.suse.com/docs/userguide">https://scc.suse.com/docs/userguide</ulink>.</para>
</sect1>
<sect1 id="disconnect-setup"><title>Disconnected Setup with RMT or SMT (DMZ)</title><para>If it is not possible to connect <phrase><phrase>SUSE</phrase> Manager</phrase>
directly or via a proxy to the Internet, a disconnected setup in combination with RMT or SMT is the recommended solution.
In this scenario, RMT or SMT stays in an <quote>external</quote>
 network with a connection to <phrase>SUSE Customer Center</phrase>
 and synchronizes the software channels and repositories on a removable storage medium.
Then you separate the storage medium from RMT or SMT, and mount it locally on your <phrase><phrase>SUSE</phrase> Manager</phrase>
 server to read the updated data.</para>
<formalpara>
<title>RMT</title>
<para>The successor of SMT and currently runs on the following systems:</para>
</formalpara>
<itemizedlist>
<listitem>
<para><phrase>SUSE Linux Enterprise</phrase> 15 (when available)</para>
</listitem>
<listitem>
<para>Temporarily (for testing only): 12 SP2, and 12 SP3</para>
</listitem>
<listitem>
<para>Not officially supported: openSUSE Leap 42.2, Leap 42.3, and openSUSE Tumbleweed</para>
</listitem>
</itemizedlist>
<para>RMT allows you to provision updates for all of your devices running a product based on <phrase>SUSE Linux Enterprise</phrase>
 12 SPx and later as well as openSUSE Leap.</para>
<formalpara>
<title>SMT</title>
<para>The predecessor of RMT and is no longer actively developed.
It runs on <phrase>SUSE Linux Enterprise Server</phrase>
 12 SPx and allows you to provision updates for products based on <phrase>SUSE Linux Enterprise</phrase>
 12 SPx and earlier.
You will still need it, if you want to update <phrase>SUSE Linux Enterprise</phrase>
 11 clients.</para>
</formalpara>
<sect2 id="rmtool"><title>Repository Mirroring Tool (RMT) and Disconnected Setup (DMZ)</title><para>The following procedure will guide you through using RMT.
It will work best with a dedicated RMT instance per <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
<orderedlist numeration="arabic">
<title>Procedure: RMT: Fetching Repository Data from SUSE Customer Center</title>
<listitem>
<para>Configure RMT in the external network with SCC. For details about configuring RMT, see the official guide (when available).</para>
<orderedlist numeration="loweralpha">
<listitem>
<para>Preparation work:</para>
<para>Run <command>rmt-cli sync</command> to download available products and repositories data for your organization from SCC.</para>
<para>Run <command>rmt-cli products list --all</command> to see the list of products that are available for your organization.</para>
<para>Run <command>rmt-cli repos list --all</command> to see the list of all repositories available.</para>
</listitem>
<listitem>
<para>With <command>rmt-cli repos enable</command> enable repositories you want to mirror.</para>
</listitem>
<listitem>
<para>With <command>rmt-cli products enable</command>enable products. For example, to enable SLES _15:</para>
<screen>rmt-cli product enable sles/15/x86_64</screen>
</listitem>
</orderedlist>
</listitem>
<listitem>
<para>Using RMT, mirror all required repositories.</para>
</listitem>
<listitem>
<para>Get the required JSON responses from SCC and save them as files at the specified path (for example, <filename>/mnt/usb</filename> ).</para>
<important>
<title>Write Permissions for RMT User</title>
<para>The directory being written to must be writeable for the same user as the rmt service.
The rmt user setting is defined in the <literal>cli</literal> section of <filename>/etc/rmt.conf</filename>
.</para>
</important>
<para>Enter:</para>
<screen>{prompt.root}rmt-cli export data /mnt/usb</screen>
</listitem>
<listitem>
<para>Export settings about repositories to mirror to the specified path (in this case, <filename>/mnt/usb</filename> ); this command will create a <filename>repos.json</filename> file there:</para>
<screen>{prompt.root}rmt-cli export settings /mnt/usb</screen>
</listitem>
<listitem id="pro.rmtool.export.repos">
<para>Mirror the repositories according to the settings in the <filename>repos.json</filename> file to the specified path (in this case, <filename>/mnt/usb</filename> ).</para>
<screen>{prompt.root}rmt-cli export repos /mnt/usb</screen>
</listitem>
<listitem>
<para>Unmount the storage medium and carry it securely to your <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
</listitem>
</orderedlist>
<para>On the <phrase><phrase>SUSE</phrase> Manager</phrase>
server, continue with <xref linkend="disconnect.mgr.update-repos"/>.</para>
</sect2>
<sect2 id="sub.mgr.tool"><title>Subscription Management Tool (SMT) and Disconnected Setup (DMZ)</title><para>The following procedure will guide you through using SMT.</para>
<orderedlist numeration="arabic">
<title>Procedure: SMT: Fetching Repository Data from SUSE Customer Center</title>
<listitem>
<para>Configure SMT in the external network with SCC. For details about configuring SMT with <phrase>SUSE Linux Enterprise</phrase> 12, see <ulink url="https://www.suse.com/documentation/sles-12/book_smt/data/book_smt.html">https://www.suse.com/documentation/sles-12/book_smt/data/book_smt.html</ulink>.</para>
</listitem>
<listitem>
<para>Using SMT, mirror all required repositories.</para>
</listitem>
<listitem>
<para>Create a <quote>database replacement file</quote> (for example, <filename>/tmp/dbrepl.xml</filename> ).</para>
<screen>{prompt.root}smt-sync --createdbreplacementfile /tmp/dbrepl.xml</screen>
</listitem>
</orderedlist>
<orderedlist id="pro.mgr.tool.mount.storage" numeration="arabic">
<listitem>
<para>Mount a removable storage medium such as an external hard disk or USB flash drive.</para>
</listitem>
<listitem>
<para>Export the data to the mounted medium:</para>
<screen>smt-sync --todir /media/disk/
smt-mirror --dbreplfile /tmp/dbrepl.xml --directory /media/disk \
           --fromlocalsmt -L /var/log/smt/smt-mirror-export.log</screen>
<important>
<title>Write Permissions for SMT User</title>
<para>The directory being written to must be writeable for the same user as the smt daemon (user=smt). The smt user setting is defined in <filename>/etc/smt.conf</filename>
.
You can check if the correct user is specified via the following command:</para>
</important>
</listitem>
</orderedlist>
<screen>{prompt.root}egrep '^smtUser' /etc/smt.conf</screen>
<para>+</para>
<para>+
.Keeping the Disconnected Server Up-to-date
NOTE: <command>smt-sync</command> also exports your subscription data.
To keep <phrase><phrase>SUSE</phrase> Manager</phrase>
 up-to-date with your subscriptions, you must frequently import and export this data.</para>
<para>+</para>
<orderedlist numeration="arabic">
<listitem>
<para>Unmount the storage medium and carry it securely to your <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
</listitem>
</orderedlist>
<para>On the <phrase><phrase>SUSE</phrase> Manager</phrase>
server, continue with <xref linkend="disconnect.mgr.update-repos"/>.</para>
</sect2>
<sect2 id="disconnect.mgr.update-repos"><title>Updating Repositories on SUSE Manager From Storage Media</title><para>This procedure will show you how to update the repositories on the <phrase><phrase>SUSE</phrase> Manager</phrase>
server from the storage media.</para>
<orderedlist numeration="arabic">
<title>Procedure: Updating the SUSE ManagerServer from the Storage Medium</title>
<listitem>
<para>Mount the storage medium on your <phrase><phrase>SUSE</phrase> Manager</phrase> server (for example, at <filename>/media/disk</filename> ).</para>
</listitem>
<listitem>
<para>Specify the local path on the <phrase><phrase>SUSE</phrase> Manager</phrase> server in <literal>/etc/rhn/rhn.conf</literal>:</para>
<screen>server.susemanager.fromdir = /media/disk</screen>
<para>This setting is mandatory for <phrase>SUSE Customer Center</phrase>
and <command>mgr-sync</command>.</para>
</listitem>
<listitem>
<para>Restart Tomcat:</para>
<screen>systemctl restart tomcat</screen>
</listitem>
</orderedlist>
<orderedlist id="pro.mgr.tool.sync" numeration="arabic">
<listitem>
<para>Before performing another operation on the server execute a full sync:</para>
<screen>mgr-sync refresh   # SCC (fromdir in rhn.conf required!)</screen>
</listitem>
<listitem>
<para><command>mgr-sync</command> can now be executed normally:</para>
<screen>mgr-sync list channels
mgr-sync add channel channel-label</screen>
<warning>
<title>Data Corruption</title>
<para>The disk must always be available at the same mount point.
To avoid data corruption, do not trigger a sync, if the storage medium is not mounted.
If you have already added a channel from a local repository path, you will not be able to change its URL to point to a different path afterwards.</para>
</warning>
</listitem>
</orderedlist>
<para>Up-to-date data is now available on your <phrase><phrase>SUSE</phrase> Manager</phrase>
server and is ready for updating client systems.
According to your maintenance windows or update schedule refresh the data on the storage medium with RMT or SMT.</para>
</sect2>
<sect2 id="_refreshing_data_on_the_storage_medium"><title>Refreshing Data on the Storage Medium</title><orderedlist numeration="arabic">
<title>Procedure: Refreshing Data on the Storage Medium from RMT or SMT</title>
<listitem>
<para>On your <phrase><phrase>SUSE</phrase> Manager</phrase> server, unmount the storage medium and carry it to your RMT or SMT.</para>
</listitem>
<listitem>
<para>On your RMT or SMT system, continue with the synchronization step (either <xref linkend="pro.rmtool.export.repos"/> or <xref linkend="pro.mgr.tool.sync"/>).</para>
<warning>
<title>Data Corruption</title>
<para>The storage medium must always be available at the same mount point.
To avoid data corruption, do not trigger a sync if the storage medium is not mounted.</para>
</warning>
</listitem>
</orderedlist>
<para>This concludes using RMT or SMT with <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
</sect2>
</sect1>
</chapter>
<chapter id="bp.expanded-support"><title>Expanded Support</title><para>In the following sections find information about Red Hat and Centos clients.</para>
<sect1 id="bp.expanded-support.resclients"><title>Managing RES Clients</title><para>The following sections provide guidance on managing Red Hat Expanded Support clients, this includes Salt minions and traditional systems.</para>
<sect2 id="bp.expanded-support.resclients.server"><title>Server Configuration for RES Channels</title><para>This section provides guidance on server configuration for RES Channels provided by <phrase>SUSE</phrase>
.</para>
<itemizedlist>
<listitem>
<para>Minimum of 8 GB RAM and at least two physical or virtual CPUs. Taskomatic will use one of these CPUs.</para>
</listitem>
<listitem>
<para>Taskomatic requires of minimum of 3072 MB RAM. This should be set in <filename>/etc/rhn/rhn.conf</filename> :</para>
<screen>taskomatic.java.maxmemory=3072</screen>
</listitem>
<listitem>
<para>Provision enough disk space. <filename>/var/spacewalk</filename> contains all mirrored RPMs. For example, RES 6 x86_64 channels require 90 GB and more.</para>
</listitem>
<listitem>
<para>LVM or an NFS mount is recommended.</para>
</listitem>
<listitem>
<para>Access to RHEL 5/6/7 Subscription Media.</para>
</listitem>
</itemizedlist>
<warning>
<title>Access to RHEL Media or Repositories</title>
<para>Access to Red Hat base media repositories and RHEL installation media is the responsibility of the user.
Ensure that all your RHEL systems obtain support from RHEL or all your RHEL systems obtain support from <phrase>SUSE</phrase>
.
If you do not follow these practices you may violate terms with Red Hat.</para>
</warning>
</sect2>
<sect2 id="bp.expanded-support.resclients.tips"><title>RES Channel Management Tips</title><para>This section provides tips on RES channel management.</para>
<itemizedlist>
<listitem>
<para>The base parent distribution RES channel per architecture contains zero packages. No base media is provided by <phrase>SUSE</phrase> . The RHEL media or installation ISOs should be added as child channels of the RES parent channel.</para>
</listitem>
<listitem>
<para>The RES and tools channels are provided by SUSE Customer Center (SCC) using <command>mgr-sync</command>.</para>
</listitem>
<listitem>
<para>It can take up to 24 hours for an initial channel synchronization to complete.</para>
</listitem>
<listitem>
<para>When you have completed the initial synchronization process of any RES channel it is recommended to clone the channel before working with it. This provides you with a backup of the original synchronization.</para>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="_mirroring_rhel_media_into_a_channel"><title>Mirroring RHEL Media into a Channel</title><para>The following procedure guides you through setup of the RHEL media as a <phrase><phrase>SUSE</phrase> Manager</phrase>
channel.
All packages on the RHEL media will be mirrored into a child channel located under RES 5/6/7 distribution per architecture.</para>
<orderedlist numeration="arabic">
<title>Procedure: Mirroring RHEL Media into a Channel</title>
<listitem>
<para>Create a new Channel by log in to the Web UI and selecting <menuchoice><guimenu>Channels</guimenu> <guimenu>Manage Software Channels</guimenu> <guimenu>Create Channel</guimenu></menuchoice> .</para>
</listitem>
<listitem>
<para>Fill in basic channel details and add the channel as a child to the corresponding RES 5/6/7 distribution channel per architecture from SCC. The base parent channel should contain zero packages.</para>
</listitem>
<listitem>
<para>Modify the RES 5/6/7 activation key to include this new child channel.</para>
</listitem>
<listitem>
<para>As <systemitem class="username">root</systemitem> on the <phrase><phrase>SUSE</phrase> Manager</phrase> command line copy the ISO to the <filename>/tmp</filename> directory.</para>
</listitem>
<listitem>
<para>Create a directory to contain the media content:</para>
<screen>{prompt.root}mkdir -p /srv/www/htdocs/pub/rhel</screen>
</listitem>
<listitem>
<para>Mount the ISO:</para>
<screen>{prompt.root}mount -o loop /tmp/name_of_iso /srv/www/htdocs/pub/rhel</screen>
</listitem>
<listitem>
<para>Start <command>spacewalk-repo-sync</command> to synchronize packages:</para>
<screen>{prompt.root}spacewalk-repo-sync -c channel_name -u https://127.0.0.1/pub/rhel/Server/
Repo URL: https://127.0.0.1/pub/rhel/Server/
Packages in repo:              3690
Packages already synced:          0
Packages to sync:              3690
1/3690 : texlive-latex-2007-57.el6_2-0.x86_64
2/3690 : boost-filesystem-1.41.0-18.el6-0.i686
3/3690 : policycoreutils-newrole-2.0.83-19.39.el6-0.x86_64
[...]</screen>
</listitem>
<listitem>
<para>When the channel has completed the synchronization process you can use the channel as any normal <phrase><phrase>SUSE</phrase> Manager</phrase> channel.</para>
</listitem>
</orderedlist>
</sect2>
<sect2 id="_registering_res_salt_minions_with_susemgr"><title>Registering RES Salt Minions with SUSE Manager</title><para>This section will guide you through registering RHEL minions with <phrase><phrase>SUSE</phrase> Manager</phrase>
.
This section assumes you have updated your server to the latest patch level.</para>
<sect3 id="_synchronizing_appropriate_res_channels"><title>Synchronizing Appropriate RES Channels</title><para>Ensure you have the corresponding RES product enabled and required channels have been fully synchronized:</para>
<itemizedlist>
<title>RHEL 7.x</title>
<listitem>
<para>Product: RES 7</para>
</listitem>
<listitem>
<para>Mandatory channels: <literal role="systemitem">rhel-x86_64-server-7</literal> , <literal role="systemitem">res7-suse-manager-tools-x86_64</literal> , <literal role="systemitem">res7-x86_64</literal> systemitem&gt;</para>
</listitem>
</itemizedlist>
<itemizedlist>
<title>RHEL 6.x</title>
<listitem>
<para>Product: RES 6</para>
</listitem>
<listitem>
<para>Mandatory channels: <literal role="systemitem">rhel-x86_64-server-6</literal> , <literal role="systemitem">res6-suse-manager-tools-x86_64</literal> , <literal role="systemitem">res6-x86_64</literal></para>
</listitem>
</itemizedlist>
<tip>
<title>Checking Synchronization Progress</title>
<para>To check if a channel has finished synchronizing you can do one of the following:</para>
<itemizedlist>
<listitem>
<para>From the <phrase><phrase>SUSE</phrase> Manager</phrase>{webui} browse to <menuchoice><guimenu>Admin</guimenu> <guimenu>Setup Wizard</guimenu></menuchoice> and select the <guimenu>SUSE Products</guimenu> tab. Here you will find a percent completion bar for each product.</para>
</listitem>
<listitem>
<para>Alternatively, you may check the synchronization log file located under <filename>/var/log/rhn/reposync/channel-label.log</filename> using cat or the tailf command. Keep in mind that base channels can contain multiple child channels. Each of these child channels will generate its own log during the synchronization progress. Do not assume a channel has finished synchronizing until you have checked all relevant log files including base and child channels.</para>
</listitem>
</itemizedlist>
</tip>
<para>Create an activation key associated with the RES channel.</para>
</sect3>
<sect3 id="_creating_a_bootstrap_repository"><title>Creating a Bootstrap Repository</title><para>The following procedure demonstrate creating a bootstrap repository for RHEL</para>
<orderedlist numeration="arabic">
<listitem>
<para>On the server command line as root, create a bootstrap repo for RHEL with the following command:</para>
<screen>mgr-create-bootstrap-repo RHEL_activation_channel_key</screen>
</listitem>
<listitem>
<para>Rename <command>bootstrap.sh</command> to <command>resversion-boostrap.sh</command>:</para>
<screen>{prompt.root}cp bootstrap.sh res7-bootstrap.sh</screen>
</listitem>
</orderedlist>
</sect3>
</sect2>
<sect2 id="_register_a_salt_minion_via_bootstrap"><title>Register a Salt Minion via Bootstrap</title><para>The following procedure will guide you through registering a Salt minion using the bootstrap script.</para>
<orderedlist numeration="arabic">
<title>Procedure: Registration Using the Bootstrap Script</title>
<listitem>
<para>For your new minion download the bootstrap script from the <phrase><phrase>SUSE</phrase> Manager</phrase> server:</para>
<screen>wget --no-check-certificate https://`server`/pub/bootstrap/res7-bootstrap.sh</screen>
</listitem>
<listitem>
<para>Add the appropriate res-gpg-pubkey-<emphasis role="marked"><emphasis role="marked"/>-<emphasis role="marked"/></emphasis>.key to the <literal>ORG_GPG_KEY</literal> key parameter, comma delimited in your <command>res7-bootstrap.sh</command> script. These are located on your <phrase><phrase>SUSE</phrase> Manager</phrase> server at:</para>
<screen>http://`server`/pub/</screen>
</listitem>
<listitem>
<para>Make the <command>res7-bootstrap.sh</command> script executable and run it. This will install necessary Salt packages from the bootstrap repository and start the Salt minion service:</para>
<screen>{prompt.root}chmod +x res7-bootstrap.sh{prompt.root}./res7-boostrap.sh</screen>
</listitem>
<listitem>
<para>From the <phrase><phrase>SUSE</phrase> Manager</phrase>{webui} select <menuchoice><guimenu>Salt</guimenu> <guimenu>Keys</guimenu></menuchoice> and accept the new minion’s key.</para>
</listitem>
</orderedlist>
<important>
<title>Troubleshooting Bootstrap</title>
<para>If bootstrapping a minion fails it is usually caused by missing packages.
These missing packages are contained on the RHEL installation media.
The RHEL installation media should be loop mounted and added as a child channel to the RES channel.
See the warning in <xref linkend="bp.expanded-support.resclients"/> on access to RHEL Media.</para>
</important>
</sect2>
<sect2 id="_manual_salt_minion_registration"><title>Manual Salt Minion Registration</title><para>The following procedure will guide you through the registration of a Salt minion manually.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Add the bootstrap repository:</para>
<screen>yum-config-manager --add-repo https://`server`/pub/repositories/res/7/bootstrap</screen>
</listitem>
<listitem>
<para>Install the <systemitem class="resource">salt-minion</systemitem> package:</para>
<screen>{prompt.root}yum install salt-minion</screen>
</listitem>
<listitem>
<para>Edit the Salt minion configuration file to point to the <phrase><phrase>SUSE</phrase> Manager</phrase> server:</para>
<screen>{prompt.root}mkdir /etc/salt/minion.d{prompt.root}echo "master:`server_fqdn`" &gt; /etc/salt/minion.d/susemanager.conf</screen>
</listitem>
<listitem>
<para>Start the minion service:</para>
<screen>{prompt.root}systemctl start salt-minion</screen>
</listitem>
<listitem>
<para>From the <phrase><phrase>SUSE</phrase> Manager</phrase>{webui} select the <menuchoice><guimenu>Salt</guimenu> <guimenu>Keys</guimenu></menuchoice> and accept the new minion’s key.</para>
</listitem>
</orderedlist>
</sect2>
</sect1>
<sect1 id="bp.expanded-support.centos_repos.trad"><title>Preparing Channels and Repositories for CentOS Traditional Clients</title><para>This following section provides an example procedure for configuring CentOS channels and repositories and finally registering a CentOS client with <phrase><phrase>SUSE</phrase> Manager</phrase>
.
These steps will be identical for Scientific Linux and Fedora.</para>
<orderedlist numeration="arabic">
<title>Procedure: Preparing Channels and Repositories</title>
<listitem>
<para>As <systemitem class="username">root</systemitem> install <systemitem class="resource">spacewalk-utils</systemitem> on your <phrase><phrase>SUSE</phrase> Manager</phrase> server:</para>
<screen>zypper in spacewalk-utils</screen>
<important>
<title>Supported Tools</title>
<para>The <systemitem class="resource">spacewalk-utils</systemitem>
 package contains a collection of upstream command line tools which provide assistance with spacewalk administrative operations.
You will be using the <command>spacewalk-common-channels</command> tool.
Keep in mind <phrase>SUSE</phrase>
 only provides support for <command>spacewalk-clone-by-date</command> and <command>spacewalk-manage-channel-lifecycle</command> tools.</para>
</important>
</listitem>
<listitem>
<para>Run the <command>spacewalk-common-channels</command> script to add the CentOS7 base, updates, and Spacewalk client channels.</para>
<screen>{prompt.root}spacewalk-common-channels -u admin -p`secret`-a x86_64 'centos7'{prompt.root}spacewalk-common-channels -u admin -p`secret`-a x86_64 'centos7-updates'{prompt.root}spacewalk-common-channels -u admin -p`secret`-a x86_64 'spacewalk26-client-centos7'</screen>
<note>
<title>Required Channel References</title>
<para>The <filename>/etc/rhn/spacewalk-common-channels.ini</filename>
 must contain the channel references to be added.
If a channel is not listed, check the latest version here for updates: <ulink url="https://github.com/spacewalkproject/spacewalk/tree/master/utils">https://github.com/spacewalkproject/spacewalk/tree/master/utils</ulink></para>
</note>
</listitem>
<listitem>
<para>From the Web UI select <menuchoice><guimenu>Software</guimenu> <guimenu>Manage Software Channels</guimenu> <guimenu>Overview</guimenu></menuchoice> . Select the base channel you want to synchronize, in this case <literal>CentOS7 (x86_64)</literal>. Select <menuchoice><guimenu>Repositories</guimenu> <guimenu>Sync</guimenu></menuchoice> . Check the channels you want to synchronize and then click the <guimenu>Sync Now</guimenu> button or, optionally, schedule a regular synchronization time.</para>
</listitem>
<listitem>
<para>Copy all relevant GPG keys to <filename>/srv/www/htdocs/pub</filename> . Depending on what distribution you are interested in managing these could include an EPEL key, SUSE keys, Red Hat keys, and CentOS keys. After copying these you can reference them in a comma-delimited list within your bootstrap script (see <xref linkend="proc.bp.expanded-support.centos-repos.trad.bsscript"/>).</para>
<itemizedlist>
<listitem>
<para>CentOS7 key files: <ulink url="http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-7">http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-7</ulink></para>
</listitem>
<listitem>
<para>EPEL key file: <ulink url="http://mirrors.kernel.org/fedora-epel/RPM-GPG-KEY-EPEL-7">http://mirrors.kernel.org/fedora-epel/RPM-GPG-KEY-EPEL-7</ulink></para>
</listitem>
<listitem>
<para>Spacewalk key: <ulink url="http://spacewalk.redhat.com/yum/RPM-GPG-KEY-spacewalk-2015">http://spacewalk.redhat.com/yum/RPM-GPG-KEY-spacewalk-2015</ulink></para>
</listitem>
<listitem>
<para>Red Hat keys: <ulink url="http://www.redhat.com/contact/security-response-team/gpg-keys.html">http://www.redhat.com/contact/security-response-team/gpg-keys.html</ulink></para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Install and setup a CentOS 7 client with the default installation packages.</para>
</listitem>
<listitem>
<para>Ensure the client machine can resolve itself and your <phrase><phrase>SUSE</phrase> Manager</phrase> server via DNS. Validate that there is an entry in <filename>/etc/hosts</filename> for the real IP address of the client.</para>
</listitem>
<listitem>
<para>Create an activation key (<literal>centos7</literal>) on the <phrase><phrase>SUSE</phrase> Manager</phrase> server that points to the correct parent/child channels, including the CentOS base repo, updates, and Spacewalk client.</para>
</listitem>
</orderedlist>
<para>Now prepare the bootstrap script.</para>
<orderedlist id="proc.bp.expanded-support.centos-repos.trad.bsscript" numeration="arabic">
<title>Procedure: Preparing the Bootstrap Script</title>
<listitem>
<para>Create/edit your bootstrap script to correctly reflect the following:</para>
<screen># can be edited, but probably correct (unless created during initial install):

# NOTE: ACTIVATION_KEYS *must* be used to bootstrap a client machine.

ACTIVATION_KEYS=1-centos7

ORG_GPG_KEY=res.key,RPM-GPG-KEY-CentOS-7,suse-307E3D54.key,suse-9C800ACA.key,RPM-GPG-KEY-spacewalk-2015

FULLY_UPDATE_THIS_BOX=0

yum clean all
# Install the prerequisites
yum -y install yum-rhn-plugin rhn-setup</screen>
</listitem>
<listitem>
<para>Add the following lines to the bottom of your script, (just before <literal>echo <quote>-bootstrap complete -</quote></literal> ):</para>
<screen># This section is for commands to be executed after registration
mv /etc/yum.repos.d/Cent* /root/
yum clean all
chkconfig rhnsd on
chkconfig osad on
service rhnsd restart
service osad restart</screen>
</listitem>
<listitem>
<para>Continue by following normal bootstrap procedures to bootstrap the new client.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="bp.expanded-support.centos_salt"><title>Registering CentOS Salt Minions with SUSE Manager</title><para>The following procedure will guide you through registering a CentOS Minion.</para>
<warning>
<title>Support for CentOS Patches</title>
<para>CentOS uses patches originating from CentOS is not officially supported by <phrase>SUSE</phrase>
.
See the matrix of <phrase><phrase>SUSE</phrase> Manager</phrase>
clients on the main page of the <phrase><phrase>SUSE</phrase> Manager</phrase>
wiki, linked from the <emphasis><phrase role="ref">Quick
    Links</phrase></emphasis>
 section: <ulink url="https://wiki.microfocus.com/index.php?title=SUSE_Manager">https://wiki.microfocus.com/index.php?title=SUSE_Manager</ulink></para>
</warning>
<orderedlist numeration="arabic">
<title>Procedure: Register a CentOS 7 Minion</title>
<listitem>
<para>Add the Open Build Service repo for Salt:</para>
<screen>{prompt.root}yum-config-manager --add-repo http://download.opensuse.org/repositories/systemsmanagement:/saltstack:/products/RHEL_7/</screen>
</listitem>
<listitem>
<para>Import the repo key:</para>
<screen>{prompt.root}rpm --import http://download.opensuse.org/repositories/systemsmanagement:/saltstack:/products/RHEL_7/repodata/repomd.xml.key</screen>
</listitem>
<listitem>
<para>Check if there is a different repository that contains Salt. If there is more than one repository listed disable the repository that contains Salt apart from the OBS one.</para>
<screen>{prompt.root}yum list --showduplicates salt</screen>
</listitem>
<listitem>
<para>Install the Salt minion:</para>
<screen>{prompt.root}yum install salt salt-minion</screen>
</listitem>
<listitem>
<para>Change the Salt configuration to point to the <phrase><phrase>SUSE</phrase> Manager</phrase> server:</para>
<screen>{prompt.root}mkdir -p /etc/salt/minion.d{prompt.root}echo "master:`server_fqdn`" &gt; /etc/salt/minion.d/susemanager.conf</screen>
</listitem>
<listitem>
<para>Restart the minion</para>
<screen>{prompt.root}systemctl restart salt-minion</screen>
</listitem>
<listitem>
<para>Proceed to <menuchoice><guimenu>Salt</guimenu> <guimenu>Keys</guimenu></menuchoice> from the Web UI and accept the minion’s key.</para>
</listitem>
</orderedlist>
</sect1>
</chapter>
<chapter id="best.practice.salt.formulas.and.forms"><title>Salt Formulas and SUSE Manager</title><para>This chapter provides an introduction for using Salt Formulas with <phrase><phrase>SUSE</phrase> Manager</phrase>.
Creation of custom formulas will also be introduced.</para>
<sect1 id="best.practice.salt.formulas.what"><title>What are Salt Formulas?</title><para>Formulas are collections of Salt States that have been pre-written by other Salt users and contain generic parameter fields.
Formulas allow for reliable reproduction of a specific configuration again and again.
Formulas can be installed from RPM packages or an external git repository.</para>
<para>The following list will help you in making the decision to use a state or a formula.</para>
<itemizedlist>
<title>Formula Tips</title>
<listitem>
<para>When writing states for trivial tasks, formulas are probably not worth the time investment.</para>
</listitem>
<listitem>
<para>For large, non-trivial configurations use formulas.</para>
</listitem>
<listitem>
<para>Formulas and States both act as a kind of configuration documentation.
Once written and stored you will have a snapshot of what your infrastructure should look like.</para>
</listitem>
<listitem>
<para>You can greatly decrease the amount of time required for writing a formula by grabbing one of the many pre-written formulas on github.
There are pre-written formulas for hundreds of configurations.
You can find these located at <ulink url="https://github.com/saltstack-formulas">https://github.com/saltstack-formulas</ulink>.</para>
</listitem>
</itemizedlist>
<note>
<title>Formula with Forms Improvements</title>
<itemizedlist>
<listitem>
<para>Formula data can now be managed via the XMLRPC API</para>
</listitem>
<listitem>
<para>New types were added to help SUSE Manager handle almost any kind of upstream formula.</para>
</listitem>
</itemizedlist>
</note>
</sect1>
<sect1 id="best.practice.salt.formulas.install"><title>Installing Salt Formulas via RPM</title><para><phrase>SUSE</phrase> releases formulas as RPM packages.</para>
<note>
<title>Formula Channel Location</title>
<para>Available formulas can be located within the <literal role="systemitem">SUSE-Manager-Server-3.2-Pool</literal> channel.</para>
</note>
<orderedlist numeration="arabic">
<title>Procedure: Installing Salt Formulas from an RPM</title>
<listitem>
<para>To search for available formulas, as root execute the following command on your <phrase><phrase>SUSE</phrase> Manager</phrase> server:</para>
<screen>zypper se formula</screen>
<para>You will be presented with a list of available Salt formulas:</para>
<screen>S | Name              | Summary                                                    | Type
--+-------------------+------------------------------------------------------------+-----------
  | locale-formula    | Locale Salt Formula for SUSE Manager                       | package
  | locale-formula    | Locale Salt Formula for SUSE Manager                       | srcpackage</screen>
</listitem>
<listitem>
<para>For more information regarding a specific formula run the following from the command line as root:</para>
<screen>zypper info locale-formula</screen>
<screen>Information for package locale-formula:
-----------------------------------------
Repository: SUSE-Manager-Server-<phrase>3.2</phrase>-Pool
Name:  locale-formula
Version:  0.2-1.1
Arch: noarch
Vendor:  SUSE LLC &lt;https://www.suse.com/&gt;
Support Level: Level 3
Status: not installed
Installed Size: 47.9 KiB
Installed: No
Source package : locale-formula-0.2-1.1.src
Summary        : Locale Salt Formula for SUSE Manager
Description    : Salt Formula for SUSE Manager. Sets up the locale.</screen>
</listitem>
<listitem>
<para>To install a formula as root run:</para>
<screen>zypper in locale-formula</screen>
</listitem>
</orderedlist>
</sect1>
<sect1 id="best.practice.salt.formulas.filedir"><title>File Structure Overview</title><para>RPM-based formulas need to be placed within a specific directory structure to ensure proper functionality.
A formula always consists of two separate directories: The <filename>states</filename> directory and the <filename>metadata</filename> directory.
Folders in these directories need to have an exactly matching name, for example <literal>locale</literal>.</para>
<variablelist>
<varlistentry>
<term>The Formula State Directory</term>
<listitem>
<para>The formula states directory contains anything necessary for a Salt state to work independently.
This includes <filename>.sls</filename> files, a <filename>map.jinja</filename> file and any other required files.
This directory should only be modified by RPMs and should not be edited manually.
For example, the <systemitem class="resource">locale-formula</systemitem> states directory is located in:</para>
<screen>/usr/share/susemanager/formulas/states/locale/</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>The Formula Metadata Directory</term>
<listitem>
<para>The metadata directory contains a <filename>form.yml</filename>
file which defines the forms for <phrase><phrase>SUSE</phrase> Manager</phrase>
and an optional <filename>metadata.yml</filename>
file that can contain additional information about a formula.
For example, the <systemitem class="resource">locale-formula</systemitem>
metadata directory is located in:</para>
<screen>/usr/share/susemanager/formulas/metadata/locale/</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Custom Formulas</term>
<listitem>
<para>Custom formula data or (non-RPM) formulas need to be placed into any state directory configured as a Salt file root:</para>
<variablelist>
<varlistentry>
<term>State directory</term>
<listitem>
<para>Custom state formula data need to be placed in:</para>
<screen>/srv/salt/custom/</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Metadata Directory</term>
<listitem>
<para>Custom metadata (information) need to be placed in:</para>
<screen>/srv/formula_metadata/custom/</screen>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
<para>All custom folders located in the following directories needs to contain a <filename>form.yml</filename> file.
These files are detected as form recipes and may be applied to groups and systems from the Web UI:</para>
<screen>/srv/salt/formula_metadata/`custom-formula-name`/form.yml</screen>
</sect1>
<sect1 id="best.practice.salt.formulas.pillar"><title>Editing Pillar Data in SUSE Manager</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> requires a file called <filename>form.yml</filename>, to describe how formula data should look within the Web UI.
<filename>form.yml</filename> is used by <phrase><phrase>SUSE</phrase> Manager</phrase> to generate the desired form, with values editable by a user.</para>
<para>For example, the <filename>form.yml</filename> that is included with the <systemitem class="resource">locale-formula</systemitem> is placed in:</para>
<screen>/usr/share/susemanager/formulas/metadata/locale/form.yml</screen>
<para>See part of the following <systemitem class="resource">locale-formula</systemitem> example:</para>
<screen># This file is part of locale-formula.
#
# Foobar is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# Foobar is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with Foobar.  If not, see &lt;http://www.gnu.org/licenses/&gt;.

timezone:
  $type: group

  name:
    $type: select
    $values: ["CET",
              "CST6CDT",
              "EET",
              "EST",
              "EST5EDT",
              "GMT",
              "GMT+0",
              "GMT-0",
              "GMT0",
              "Greenwich",
              "HST",
              "MET",
              "MST",
              "MST7MDT",
              "NZ",
              "NZ-CHAT",
              "Navajo",
              "PST8PDT",
              "UCT",
              "UTC",
              "Universal",
              "W-SU",
              "WET",
              "Zulu",
              "Etc/GMT+1",
              "Etc/GMT+2",
              "Etc/GMT+3",
              "Etc/GMT+4",
              "Etc/GMT+5",
              "Etc/GMT+6",
              "Etc/GMT+7",
              "Etc/GMT+8",
              "Etc/GMT+9",
              "Etc/GMT+10",
              "Etc/GMT+11",
              "Etc/GMT+12",
              "Etc/GMT-1",
              "Etc/GMT-2",
              "Etc/GMT-3",
              "Etc/GMT-4",
              "Etc/GMT-5",
              "Etc/GMT-6",
              "Etc/GMT-7",
              "Etc/GMT-8",
              "Etc/GMT-9",
              "Etc/GMT-10",
              "Etc/GMT-11",
              "Etc/GMT-12",
              "Etc/GMT-13",
              "Etc/GMT-14",
              "Etc/GMT",
              "Etc/GMT+0",
              "Etc/GMT-0",
              "Etc/GMT0",
              "Etc/Greenwich",
              "Etc/UCT",
              "Etc/UTC",
              "Etc/Universal",
              "Etc/Zulu"
              ]
    $default: CET

  hardware_clock_set_to_utc:
    $type: boolean
    $default: True
...</screen>
<para><filename>form.yml</filename> contains additional information that describes how the form for a pillar should look for <phrase><phrase>SUSE</phrase> Manager</phrase>.
This information is contained in attributes that always start with a <literal>$</literal> sign.</para>
<important>
<title>Ignored Values</title>
<para>All values that start with a <literal>$</literal> sign are annotations used to display the UI that users interact with.
These annotations are not part of pillar data itself and are handled as metadata.</para>
</important>
<para>The following are valid attributes.</para>
<variablelist>
<varlistentry>
<term>$type</term>
<listitem>
<para>The most important attribute is the <literal>$type</literal> attribute.
It defines the type of the pillar value and the form-field that is generated.
The following represent the supported types:</para>
<itemizedlist>
<listitem>
<para><literal>text</literal></para>
</listitem>
<listitem>
<para><literal>password</literal></para>
</listitem>
<listitem>
<para><literal>number</literal></para>
</listitem>
<listitem>
<para><literal>url</literal></para>
</listitem>
<listitem>
<para><literal>email</literal></para>
</listitem>
<listitem>
<para><literal>date</literal></para>
</listitem>
<listitem>
<para><literal>time</literal></para>
</listitem>
<listitem>
<para><literal>datetime</literal></para>
</listitem>
<listitem>
<para><literal>boolean</literal></para>
</listitem>
<listitem>
<para><literal>color</literal></para>
</listitem>
<listitem>
<para><literal>select</literal></para>
</listitem>
<listitem>
<para><literal>group</literal></para>
</listitem>
<listitem>
<para><literal>edit-group</literal></para>
</listitem>
<listitem>
<para><literal>namespace</literal></para>
</listitem>
<listitem>
<para><literal>hidden-group</literal> (obsolete, renamed to <literal>namespace</literal>)</para>
<note>
<title>Text Attribute</title>
<para>The text attribute is the default and does not need to be specified explicitly.</para>
</note>
<note>
<para>Many of these values are self-explanatory:</para>
</note>
</listitem>
<listitem>
<para>The <literal>text</literal> type generates a simple text field</para>
</listitem>
<listitem>
<para>The <literal>password</literal> type generates a password field</para>
</listitem>
<listitem>
<para>The <literal>color</literal> type generates a color picker.</para>
<para>The <literal>group</literal>, <literal>edit-group</literal>, and <literal>namespace</literal> (formerly <literal>hidden-group</literal>) types do not generate an editable field and are used to structure form and pillar data.
The difference between <literal>group</literal> and <literal>namespace</literal> is <literal>group</literal> generates a visible border with a heading, and <literal>namespace</literal> shows nothing visually (and is only used to structure pillar data).
The difference between <literal>group</literal> and <literal>edit-group</literal> is <literal>edit-group</literal> allows to structure and restrict editable fields in a more flexible way.
For example, <literal>edit-group</literal> supports the <literal>$minItems</literal> and <literal>$maxItems</literal> attributes, and thus it simplifies complex and repeatable input structures.
For an <literal>edit-group</literal> example, see <xref linkend="salt.formulas.ex.edit-group"/>.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>$default</term>
<listitem>
<para><literal>$default</literal> allows you to specify a default value that is displayed and used, if no other value is entered.
In an <literal>edit-group</literal> it allows to create initial members of the group and populate them with specified data.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>$name</term>
<listitem>
<para><literal>$name</literal> allows you to specify the name of a value that is shown in the form.
If this value is not set, the pillar name is used and capitalized without underscores and dashes.
You reference it in the same section with <literal>${name}</literal>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>$help and $placeholder</term>
<listitem>
<para>The <literal>$help</literal> and <literal>$placeholder</literal> attributes are used to give a user a better understanding of what the value should be.</para>
<itemizedlist>
<listitem>
<para><literal>$help</literal> defines the message a user sees when hovering over a field</para>
</listitem>
<listitem>
<para><literal>$placeholder</literal> displays a gray placeholder text in the field.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
</variablelist>
<para><literal>$placeholder</literal> may only be used with text fields like text, password, email or date.
It does not make sense to add a placeholder if you also use <literal>$default</literal> as this will hide the placeholder.</para>
<variablelist>
<varlistentry>
<term>$minItems and $maxItems</term>
<listitem>
<para>In an <literal>edit-group</literal>, <literal>$minItems</literal> and <literal>$maxItems</literal> allow you to specify the lowest and highest number the group can occur.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>$itemName</term>
<listitem>
<para>In an <literal>edit-group</literal>, <literal>$itemName</literal> allows to define a template for the name to be used for the members of the group.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>$prototype</term>
<listitem>
<para>In an <literal>edit-group</literal>, <literal>$prototype</literal> allows to define default (or pre-filled) values for newly added members in the group.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>$scope</term>
<listitem>
<para><literal>$scope</literal> allows you to specify a hierarchy level at which a value may be edited.
Possible values are <literal>system</literal>, <literal>group</literal> and <literal>readonly</literal>.</para>
<para>The default <literal>$scope: system</literal> allows values to be edited at group and system levels.
A value can be entered for each system but if no value is entered the system will fall back to the group default.</para>
<para>If using <literal>$scope: group</literal>, a value may only be edited for a group.
On the system level you will be able to see the value, but not edit it.</para>
<para>The <literal>$scope: readonly</literal> option makes a field read-only.
It can be used to show a user data which should be known, but should not be editable.
This option only makes sense in combination with the $default attribute.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>$visibleIf</term>
<listitem>
<para><literal>$visibleIf</literal> allows you to show a field or group if a simple condition is met.
A condition always looks similar to the following example:</para>
<screen>some_group$another_group$my_checkbox == true</screen>
<para>The left part of the above statement is the path to another value, and groups are separated by <literal>$</literal> signs.
The middle section of the command should be either <literal>==</literal> for a value to be equal or <literal>!=</literal> for values that should be not equal.
The last field in the statement can be any value which a field should have or not have.</para>
<para>The field with this attribute associated with it will now be shown only when the condition is met.
In this example the field will be shown only if <literal>my_checkbox</literal> is checked.
The ability to use conditional statements is not limited to check boxes.
It may also be used to check values of select-fields, text-fields etc.</para>
<para>A check box should be structured like the following example:</para>
<screen>some_group:
  $type: group

  another_group:
    $type: group

      my_checkbox:
        $type: boolean</screen>
<para>By using multiple groups with the attribute, you can allow a user to select an option and show a completely different form, dependent upon the selected value.</para>
<note>
<title>Hidden Values</title>
<para>Values from hidden fields may be merged into the pillar data and sent to the minion.
A formula must check the condition again and use the appropriate data.
For example:</para>
</note>
</listitem>
</varlistentry>
</variablelist>
<screen>show_option:
  $type: checkbox
some_text:
  $visibleIf: show_option == true</screen>
<screen>{% if pillar.show_option %}
do_something:
  with: {{ pillar.some_text }}
{% endif %}</screen>
<variablelist>
<varlistentry>
<term>$values</term>
<listitem>
<para><literal>$values</literal> can only be used together with <literal>$type</literal>: select to specify the different options in the select-field.
<literal>$values</literal> must be a list of possible values to select.
For example:</para>
<screen>select_something:
  $type: select
  $values: [“option1”, “option2”]</screen>
<para>Or alternatively:</para>
<screen>select_something:
  $type: select
  $values:
    - option1
    - option2</screen>
</listitem>
</varlistentry>
</variablelist>
<sect2 id="salt.formulas.ex.edit-group"><title>Simple edit-group Example</title><para>See the following <emphasis role="strong">edit-group</emphasis> example:</para>
<screen>partitions:
  $name: "Hard Disk Partitions"
  $type: "edit-group"
  $minItems: 1
  $maxItems: 4
  $itemName: "Partition ${name}"
  $prototype:
    name:
      $default: "New partition"
    mountpoint:
      $default: "/var"
    size:
      $type: "number"
      $name: "Size in GB"
  $default:
    - name: "Boot"
      mountpoint: "/boot"
    - name: "Root"
      mountpoint: "/"
      size: 5000</screen>
<para>After clicking <guimenu>Add</guimenu> for one time you will see <xref linkend="fig-formula-custom-harddisk-partitions"/> filled with the default values.
The formula itself is called <filename>hd-partitions</filename> and will appear as <literal role="guimenu">Hd Partitions</literal> in the Web UI.</para>
<figure id="fig-formula-custom-harddisk-partitions">
<title>edit-group Example in the Web UI</title>
<mediaobject><textobject role="description"><phrase>formula custom harddisk partitions</phrase></textobject><imageobject>
<imagedata fileref="formula-custom-harddisk-partitions.png"/>
</imageobject></mediaobject>
</figure>
<para>To remove definition of a partition click the minus symbol in the title line of an inner group.
When form fields are properly filled confirm with clicking <guimenu>Save Formula</guimenu> in the upper right corner of the formula.</para>
</sect2>
</sect1>
<sect1 id="best.practice.salt.formulas.writing"><title>Writing Salt Formulas</title><para>Salt formulas are pre-written Salt states, which may be configured with pillar data.
You can parametrize state files using Jinja.
Jinja allows you to access pillar data by using the following syntax.
(This syntax works best when your uncertain a pillar value exists as it will throw an error):</para>
<screen>pillar.some.value</screen>
<para>When you are sure a pillar exists may also use the following syntax:</para>
<screen>salt['pillar.get']('some:value', 'default value')</screen>
<para>You may also replace the <literal>pillar</literal> value with <literal>grains</literal> (for example, <literal>grains.some.value</literal>) allowing access to grains.</para>
<para>Using data this way allows you to make a formula configurable.
The following code snippet will install a package specified in the pillar <literal>package_name</literal>.
For example:</para>
<screen>install_a_package:
  pkg.installed:
    - name: {{ pillar.package_name }}</screen>
<para>You may also use more complex constructs such as <literal>if/else</literal> and <literal>for-loops</literal> To provide greater functionality.
For Example:</para>
<screen>{% if pillar.installSomething %}
something:
  pkg.installed
{% else %}
anotherPackage:
  pkg.installed
{% endif %}</screen>
<para>Another example:</para>
<screen>{% for service in pillar.services %}
start_{{ service }}:
  service.running:
    - name: {{ service }}
{% endfor %}</screen>
<para>Jinja also provides other helpful functions.
For example, you can iterate over a dictionary:</para>
<screen>{% for key, value in some_dictionary.items() %}
do_something_with_{{ key }}: {{ value }}
{% endfor %}</screen>
<para>You may want to have Salt manage your files (for example, configuration files for a program), and you can change these with pillar data.
For example, the following snippet shows how you can manage a file using Salt:</para>
<screen>/etc/my_program/my_program.conf:
  file.managed:
    - source: salt://my_state/files/my_program.conf
    - template: jinja</screen>
<para>Salt will copy the file <filename>salt-file_roots/my_state/files/my_program.conf</filename> on the salt master to <filename>/etc/my_program/my_program.conf</filename> on the minion and template it with Jinja.
This allows you to use Jinja in the file, exactly like shown above for states:</para>
<screen>some_config_option = {{ pillar.config_option_a }}</screen>
</sect1>
<sect1 id="best.practice.salt.formulas.data"><title>Separating Data</title><para>It is often a good idea to separate data from a state to increase its flexibility and add re-usability value.
This is often done by writing values into a separate file named <filename>map.jinja</filename>.
This file should be placed within the same directory as your state files.</para>
<para>The following example will set <literal>data</literal> to a dictionary with different values, depending on which system the state runs on.
It will also merge data with the pillar using the <literal>some.pillar.data</literal> value so you can access <literal>some.pillar.data.value</literal> by just using <literal>data.value</literal>.</para>
<para>You can also choose to override defined values from pillars (for example, by overriding <literal>some.pillar.data.package</literal> in the example).</para>
<screen>{% set data = salt['grains.filter_by']({
    'Suse': {
        'package': 'packageA',
        'service': 'serviceA'
    },
    'RedHat': {
        'package': 'package_a',
        'service': 'service_a'
    }
}, merge=salt['pillar.get']('some:pillar:data')) %}</screen>
<para>After creating a map file like the above example, you can easily maintain compatibility with multiple system types while accessing "deep" pillar data in a simpler way.
Now you can import and use <literal>data</literal> in any file.
For example:</para>
<screen>{% from "some_folder/map.jinja" import data with context %}

install_package_a:
  pkg.installed:
    - name: {{ data.package }}</screen>
<para>You can also define multiple variables by copying the <literal>{% set …​%}</literal> statement with different values and then merge it with other pillars.
For example:</para>
<screen>{% set server = salt['grains.filter_by']({
    'Suse': {
        'package': 'my-server-pkg'
    }
}, merge=salt['pillar.get']('myFormula:server')) %}
{% set client = salt['grains.filter_by']({
    'Suse': {
        'package': 'my-client-pkg'
    }
}, merge=salt['pillar.get']('myFormula:client')) %}</screen>
<para>To import multiple variables, separate them with a comma.
For Example:</para>
<screen>{% from "map.jinja" import server, client with context %}</screen>
<para>Formulas utilized with <phrase><phrase>SUSE</phrase> Manager</phrase> should follow formula conventions listed in the official documentation:</para>
<itemizedlist>
<listitem>
<para><ulink url="https://docs.saltstack.com/en/latest/topics/development/conventions/formulas.html">https://docs.saltstack.com/en/latest/topics/development/conventions/formulas.html</ulink></para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="best.practice.salt.formulas.pillardata"><title>SUSE Manager Generated Pillar Data</title><para>When pillar data is generated (for example, after applying the highstate) the following external pillar script generates pillar data for packages, group ids, etc.
and includes all pillar data for a system:</para>
<screen>/usr/share/susemanager/modules/pillar/suma_minion.py</screen>
<para>The process is executed as follows:</para>
<orderedlist numeration="arabic">
<listitem>
<para>The <literal>suma_minion.py</literal> script starts and finds all formulas for a system (by checking the <literal>group_formulas.json</literal> and <literal>server_formulas.json</literal> files).</para>
</listitem>
<listitem>
<para><literal>suma_minion.py</literal> loads the values for each formula (groups and from the system) and merges them with the highstate (default: if no values are found, a group overrides a system if $scope: group etc.).</para>
</listitem>
<listitem>
<para><literal>suma_minion.py</literal> also includes a list of formulas applied to the system in a pillar named formulas.
This structure makes it possible to include states.
The top file (in this case specifically generated by the <literal>mgr_master_tops.py</literal> script) includes a state called formulas for each system.
This includes the <literal>formulas.sls</literal> file located in:</para>
<screen>/usr/share/susemanager/formulas/states/</screen>
<para>The content looks similar to the following:</para>
<screen>include: {{ pillar["formulas"] }}</screen>
<para>This pillar includes all formulas, that are specified in pillar data generated from the external pillar script.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="best.practice.salt.formulas.req"><title>Formula Requirements</title><para>Formulas should be designed/created directly after a <phrase><phrase>SUSE</phrase> Manager</phrase> installation, but if you encounter any issues check the following:</para>
<itemizedlist>
<listitem>
<para>The external pillar script (<literal>suma_minion.py</literal>) must include formula data.</para>
</listitem>
<listitem>
<para>Data is saved to <filename>/srv/susemanager/formula_data</filename> and the <filename>pillar</filename> and <filename>group_pillar</filename> sub-directories.
These should be automatically generated by the server.</para>
</listitem>
<listitem>
<para>Formulas must be included for every minion listed in the top file.
Currently this process is initiated by the <filename>mgr_master_tops.py</filename> script which includes the formulas.sls file located in:</para>
<screen>/usr/share/susemanager/formulas/states/</screen>
<para>This directory must be a salt file root.
File roots are configured on the salt-master (<phrase><phrase>SUSE</phrase> Manager</phrase>) located in:</para>
<screen>/etc/salt/master.d/susemanager.conf</screen>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="best.practice.salt.formulas.using"><title>Using Salt Formulas with SUSE Manager</title><para>The following procedure provides an overview on using Salt Formulas with <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Official formulas may be installed as RPMs.
Place the custom states within <filename>/srv/salt/your-formula-name/</filename> and the metadata (<filename>form.yml</filename> and <filename>metadata.yml</filename> ) in <filename>/srv/formula_metadata/your-formula-name/</filename>.
After installing your formulas they will appear in <menuchoice><guimenu>Salt</guimenu> <guimenu>Formula Catalog</guimenu></menuchoice>.</para>
</listitem>
<listitem>
<para>To begin using a formula, apply it to a group or system.
Apply a formula to a group or system by selecting the <menuchoice><guimenu>System Details</guimenu> <guimenu>Formulas</guimenu></menuchoice> tab of a <emphasis role="strong">system’s details</emphasis> page or <emphasis role="strong">system group</emphasis>. From the <menuchoice><guimenu>System Details</guimenu> <guimenu>Formulas</guimenu></menuchoice> page you can select any formulas you wish to apply to a group or system.
Click the <guimenu>Save</guimenu> button to save your changes to the database.</para>
</listitem>
<listitem>
<para>After applying one or more formulas to a group or system, additional tabs will become available from the top menu, one for each formula selected.
From these tabs you may configure your formulas.</para>
</listitem>
<listitem>
<para>When you have finished customizing your formula values you will need to apply the highstate for them to take effect.
Applying the highstate will execute the state associated with the formula and configure targeted systems.
You can use the <guimenu>Apply Highstate</guimenu> button from any formulas page of a group.</para>
</listitem>
<listitem>
<para>When a change to any of your values is required or you need to re-apply the formula state because of a failure or bug, change values located on your formula pages and re-apply the highstate.
Salt will ensure that only modified values are adjusted and restart or reinstall services only when necessary.</para>
</listitem>
</orderedlist>
<para>This conclude your introduction to Salt Formulas.
For additional information, see:</para>
<itemizedlist>
<listitem>
<para><ulink url="https://docs.saltstack.com/en/latest/topics/development/conventions/formulas.html">https://docs.saltstack.com/en/latest/topics/development/conventions/formulas.html</ulink></para>
</listitem>
</itemizedlist>
</sect1>
</chapter>
<chapter id="bp.chapt.config.management.with.salt"><title>Configuration Management with Salt</title><sect1 id="bp.chapt.config.mgr.overview"><title>Configuration Management Overview</title><para>Salt is capable of applying states by matching minions with relevant state data.
This data comes from <phrase><phrase>SUSE</phrase> Manager</phrase>
in the form of package and custom states.</para>
</sect1>
<sect1 id="bp.chapt.config.mgr.level.hierarchy"><title>State Data</title><subtitle>Levels of Hierarchy</subtitle><para>State data comes from <phrase><phrase>SUSE</phrase> Manager</phrase>
in the form of package and custom states and targets minions at three specific levels of hierarchy.
The state hierarchy is defined by the following order or priority: individual minions have priority on packages and custom states over groups; next a group has priority over the organization.</para>
<itemizedlist>
<listitem>
<para>Minion Level</para>
<para><menuchoice><guimenu>Systems</guimenu> <guimenu>Specific Minion</guimenu> <guimenu>States</guimenu></menuchoice></para>
</listitem>
<listitem>
<para>Group Level</para>
<para><menuchoice><guimenu>Systems</guimenu> <guimenu>System Groups</guimenu></menuchoice></para>
</listitem>
<listitem>
<para>Organization Level</para>
<para><menuchoice><guimenu>Systems</guimenu> <guimenu>Manage System Types:</guimenu> <guimenu>My Organization</guimenu></menuchoice></para>
</listitem>
</itemizedlist>
<para>For example:</para>
<itemizedlist>
<listitem>
<para>Org1 requires that vim version 1 is installed</para>
</listitem>
<listitem>
<para>Group1 requires that vim version 2 is installed</para>
</listitem>
<listitem>
<para>Group2 requires any version installed</para>
</listitem>
</itemizedlist>
<para>This would lead to the following order of hierarchy:</para>
<itemizedlist>
<listitem>
<para>Minion1 part of [Org1, Group1] wants vim removed, vim is removed (Minion Level)</para>
</listitem>
<listitem>
<para>Minion2 part of [Org1, Group1] wants vim version 2 gets version 2 (Group Level)</para>
</listitem>
<listitem>
<para>Minion3 part of [Org1, Group1] wants any version, gets version 2 (Org Level)</para>
</listitem>
<listitem>
<para>Minion4 part of[Org1, Group2] wants any version, gets vim version 1 (Org Level)</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="bp.chapt.config.mgr.salt.states.storage.locations"><title>Salt States Storage Locations</title><para>The <phrase><phrase>SUSE</phrase> Manager</phrase>
salt-master reads its state data from three file root locations.</para>
<para>The directory <filename>/usr/share/susemanager/salt</filename>
 is used by <phrase><phrase>SUSE</phrase> Manager</phrase>
 and comes from the susemanager-sls.
It is shipped and updated together with <phrase><phrase>SUSE</phrase> Manager</phrase>
 and includes certificate setup and common state logic to be applied to packages and channels.</para>
<para>The directory <filename>/srv/susemanager/salt</filename>
 is generated by <phrase><phrase>SUSE</phrase> Manager</phrase>
 and based on assigned channels and packages for minions, groups and organizations.
This file will be overwritten and regenerated.
This could be thought of as the <phrase><phrase>SUSE</phrase> Manager</phrase>
 database translated into salt directives.</para>
<para>The third directory <filename>/srv/salt</filename>
 is for custom state data, modules etc. <phrase><phrase>SUSE</phrase> Manager</phrase>
 does not operate within or utilize this directory.
However the state data placed here affects the Highstate of minions and is merged with the total state result generated by <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
</sect1>
<sect1 id="bp.chapt.config.mgr.susemgr.states"><title>SUSE Manager States</title><para>All sls files created by users will be saved to disk on the salt-master server.
These files will be placed in <filename>/srv/susemanager/salt/</filename>
 and each organization will be placed within its own directory.
Although these states are custom, these states are created using <phrase><phrase>SUSE</phrase> Manager</phrase>
.
The following provides an overview of directory structure:</para>
<screen>├── manager_org_DEVEL
│   ├── files
│   │    ... files needed by states (uploaded by users)...
│   └── state.sls
         ... other sls files (created by users)...
E.g.:
├── manager_org_TESTING
│   ├── files
│   │   └── motd     # user created
│   │    ... other files needed by states ...
│   └── motd.sls     # user created
            ... other sls files ...</screen>
</sect1>
<sect1 id="bp.chapt.config.mgr.pillar.data.exposed.susemgr"><title>Pillar Data Exposed by SUSE Manager</title><para>SUSE Manager exposes a small amount of internal data like group membership, organization membership and file roots as pillars which can be used with custom sls states.
These are managed by <phrase><phrase>SUSE</phrase> Manager</phrase>
or by the user.</para>
<para>To avoid hard-coding organization id’s within sls files, a pillar entry is added for each organization:</para>
<screen>org-files-dir: relative_path_to_files</screen>
<para>This file will be available for all minions which belong to this organization.</para>
<para>The following represents a Pillar example located in <filename>/etc/motd</filename>
:</para>
<screen>file.managed:
    - source: salt://{{ pillar['org-files-dir']}}/motd
    - user: root
    - group: root
    - mode: 644</screen>
</sect1>
</chapter>
<chapter id="bp.chap.salt.minion.scaleability"><title>Salt Minion Scalability</title><sect1 id="_salt_minion_onboarding_rate"><title>Salt Minion Onboarding Rate</title><para>The rate at which SUSE Manager can on-board minions (accept Salt keys) is limited and depends on hardware resources.
On-boarding minions at a faster rate than SUSE Manager is configured for will build up a backlog of unprocessed keys slowing the process and potentially exhausting resources.
It is recommended to limit the acceptance key rate pro-grammatically.
A safe starting point would be to on-board a minion every 15 seconds, which can be implemented via the following command:</para>
<screen>for k in $(salt-key -l un|grep -v Unaccepted); do salt-key -y -a $k; sleep 15; done</screen>
</sect1>
<sect1 id="bp.chap.salt.minion.scaleability.unaccepted"><title>Minions Running with Unaccepted Salt Keys</title><para>Minions which have not been on-boarded, (minions running with unaccepted Salt keys) consume resources, in particular inbound network bandwidth for ~2.5 Kb/s per minion.
1000 idle minions will consume around ~2.5 Mb/s, and this number will drop to almost 0 once on-boarding has been completed.
Limit non-onboarded systems for optimal performance.</para>
<para>Salt’s official documentation suggests the maximum number of opened files should be set to at least 2 × the minion count.
Current default is 16384, which is sufficient for ~8000 minions.
For larger installations, this number may be increased by editing the following line in <filename>/usr/lib/systemd/system/salt-master.service</filename>
:</para>
<screen>LimitNOFILE=16384</screen>
</sect1>
<sect1 id="bp.chap.salt.minion.scaleability.timeouts"><title>Salt Timeouts</title><para><remark role="fixme">Add a short description</remark></para><sect2 id="_background_information"><title>Background Information</title><para>Salt features two timeout parameters called <literal>timeout</literal> and <literal>gather_job_timeout</literal> that are relevant during the execution of Salt commands and jobs—​it does not matter whether they are triggered using the command line interface or API.
These two parameters are explained in the following article.</para>
<para>This is a normal workflow when all minions are well reachable:</para>
<itemizedlist>
<listitem>
<para>A salt command or job is executed:</para>
<screen>salt '*' test.ping</screen>
</listitem>
<listitem>
<para>Salt master publishes the job with the targeted minions into the Salt PUB channel.</para>
</listitem>
<listitem>
<para>Minions take that job and start working on it.</para>
</listitem>
<listitem>
<para>Salt master is looking at the Salt RET channel to gather responses from the minions.</para>
</listitem>
<listitem>
<para>If Salt master gets all responses from targeted minions, then everything is completed and Salt master will return a response containing all the minion responses.</para>
</listitem>
</itemizedlist>
<para>If some of the minions are down during this process, the workflow continues as follows:</para>
<orderedlist numeration="arabic">
<listitem>
<para>If <literal>timeout</literal> is reached before getting all expected responses from the minions, then Salt master would trigger an aditional job (a Salt <command>find_job</command> job) targeting only pending minions to check whether the job is already running on the minion.</para>
</listitem>
<listitem>
<para>Now <literal>gather_job_timeout</literal> is evaluated. A new counter is now triggered.</para>
</listitem>
<listitem>
<para>If this new <command>find_job</command> job responses that the original job is actually running on the minion, then Salt master will wait for that minion’s response.</para>
</listitem>
<listitem>
<para>In case of reaching <literal>gather_job_timeout</literal> without having any response from the minion (neither for the initial <command>test.ping</command> nor for the <command>find_job</command> job), Salt master will return with only the gathered responses from the responding minions.</para>
</listitem>
</orderedlist>
<para>By default, <phrase><phrase>SUSE</phrase> Manager</phrase>
globally sets <literal>timeout</literal> and <literal>gather_job_timeout</literal> to 120 seconds.
So, in the worst case, a Salt call targeting unreachable minions will end up <emphasis>with 240 seconds of waiting</emphasis> until getting a response.</para>
</sect2>
<sect2 id="bp.chap.salt.minion.scaleability.timeouts.presence"><title>A Presence Ping Mechanism for Unreachable Salt Minions</title><para>In order to prevent waiting until timeouts are reached when some minions are down, <phrase>SUSE</phrase>
introduced a so-called "presence mechanism" for Salt minions.</para>
<para>This presence mechanism checks for unreachable Salt minions when <phrase><phrase>SUSE</phrase> Manager</phrase>
is performing synchronous calls to these minions, and it excludes unreachable minions from that call.
Synchronous calls are going to be displaced in favor of asynchronous calls but currently still being used during some workflows.</para>
<para>The presence mechanism triggers a Salt <command>test.ping</command> with a custom and fixed short Salt timeout values.
Default Salt values for the presence ping are: <literal>timeout
     = 4</literal> and <literal>gather_job_timeout = 1</literal>.
This way, we can quickly detect which targeted minions are unreachable, and then exclude them from the synchronous call.</para>
</sect2>
<sect2 id="_overriding_salt_presence_timeout_values"><title>Overriding Salt Presence Timeout Values</title><para><phrase><phrase>SUSE</phrase> Manager</phrase>
administrators can increase or decrease default presence ping timeout values by removing the comment markers (<literal>\#</literal>) and setting the desired values for <literal>salt_presence_ping_timeout</literal> and <literal>salt_presence_ping_gather_job_timeout</literal> options in <filename>/etc/rhn/rhn.conf</filename>
:</para>
<screen># SUSE Manager presence timeouts for Salt minions
# salt_presence_ping_timeout = 4
# salt_presence_ping_gather_job_timeout = 1</screen>
</sect2>
<sect2 id="_salt_ssh_minions_ssh_push"><title>Salt SSH Minions (SSH Push)</title><para>Salt SSH minions are slightly different that regular minions (zeromq). Salt SSH minions do not use Salt PUB/RET channels but a wrapper Salt command inside of an SSH call.
Salt <literal>timeout</literal> and <literal>gather_job_timeout</literal> are not playing a role here.</para>
<para><phrase><phrase>SUSE</phrase> Manager</phrase>
defines a timeout for SSH connections in <filename>/etc/rhn/rhn.conf</filename>
:</para>
<screen># salt_ssh_connect_timeout = 180</screen>
<para>The presence ping mechanism is also working with SSH minions.
In this case, <phrase><phrase>SUSE</phrase> Manager</phrase>
will use <literal>salt_presence_ping_timeout</literal> to override the default timeout value for SSH connections.</para>
</sect2>
</sect1>
</chapter>
<chapter id="bp.key.managment"><title>Activation Key Management</title><sect1 id="_what_are_activation_keys"><title>What are Activation Keys?</title><para>An <literal>activation key</literal> in <phrase><phrase>SUSE</phrase> Manager</phrase>
 is a group of configuration settings with a label.
You can apply all configuration settings associated with an activation key by adding its label as a parameter to a bootstrap script.
Under normal operating conditions best practices suggest using an activation key label in combination with a bootstrap script.</para>
<para>An activation key can specify:</para>
<itemizedlist>
<listitem>
<para>Channel Assignment</para>
</listitem>
<listitem>
<para>System Types (Traditionally called Add-on Entitlements)</para>
</listitem>
<listitem>
<para>Contact Method</para>
</listitem>
<listitem>
<para>Configuration Files</para>
</listitem>
<listitem>
<para>Packages to be Installed</para>
</listitem>
<listitem>
<para>System Group Assignment</para>
</listitem>
</itemizedlist>
<para>Activation keys are just a collection of configuration settings which have been given a label name and then added to a bootstrap script.
When the bootstrap script is executed all configuration settings associated with the label are applied to the system the script is run on.</para>
</sect1>
<sect1 id="_provisioning_and_configuration"><title>Provisioning and Configuration</title><figure>
<title>Provisioning and Configuration Overview</title>
<mediaobject><textobject role="description"><phrase>provision config keys</phrase></textobject><imageobject>
<imagedata fileref="provision-config-keys.png" width="80%"/>
</imageobject></mediaobject>
</figure>
</sect1>
<sect1 id="_activation_keys_best_practices"><title>Activation Keys Best Practices</title><para>There are a few important concepts which should be kept in mind when creating activation keys.
The following sections provide insight when creating and naming your activation keys.</para>
<sect2 id="_key_label_naming"><title>Key Label Naming</title><para>One of the most important things to consider during activation key creation is label naming.
Creating names which are associated with your organization’s infrastructure will make it easier for you when performing more complex operations.
When naming key labels keep the following in mind:</para>
<itemizedlist>
<listitem>
<para>OS naming (mandatory): Keys should always refer to the OS they provide settings for</para>
</listitem>
<listitem>
<para>Architecture naming (recommended): Unless your company is running on one architecture only, for example x86_64, then providing labels with an architecture type is a good idea.</para>
</listitem>
<listitem>
<para>Server type naming: What is, or what will this server be used for?</para>
</listitem>
<listitem>
<para>Location naming: Where is the server located? Room, building, or department?</para>
</listitem>
<listitem>
<para>Date naming: Maintenance windows, quarter, etc.</para>
</listitem>
<listitem>
<para>Custom naming: What naming scheme suits your organizations needs?</para>
</listitem>
</itemizedlist>
<para>Example activation key label names:</para>
<screen>sles12-sp2-web_server-room_129-x86_64</screen>
<screen>sles12-sp2-test_packages-blg_502-room_21-ppc64le</screen>
</sect2>
<sect2 id="_channels_which_will_be_included"><title>Channels which will be Included</title><para>When creating activation keys you also need to keep in mind which channels (software sources) will be associated with it.</para>
<important>
<title>Default Base Channel</title>
<para>Keys should have a specific base channel assigned to it, for example <literal>SLES12-SP2-Pool-x86_64</literal>.
If this is not the case <phrase><phrase>SUSE</phrase> Manager</phrase>
 cannot utilize specific stages.
Using the default base channel is not recommended and may cause problems.</para>
</important>
<itemizedlist>
<listitem>
<para>Channels to be included:</para>
<itemizedlist>
<listitem>
<para>suse-manager-tools</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Typical packages to be included:</para>
<itemizedlist>
<listitem>
<para>osad (pushing tasks)</para>
<itemizedlist>
<listitem>
<para>Installs <systemitem class="resource">python-jabberpy</systemitem> and <systemitem class="resource">pyxml</systemitem> as dependencies</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para><systemitem class="resource">rhncfg-actions</systemitem> (Remote Command, Configuration Managment)</para>
<itemizedlist>
<listitem>
<para>Installs <systemitem class="resource">rhncfg</systemitem> and <systemitem class="resource">rhncfg-client</systemitem> as dependencies</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</sect2>
</sect1>
<sect1 id="_combining_activation_keys"><title>Combining Activation Keys</title><para>You can combine activation keys when executing the bootstrap script on your clients.
Combining keys allows for more control on what is installed on your systems and reduces duplication of keys for large complex environments.</para>
<figure>
<title>Combining Activation Keys</title>
<mediaobject><textobject role="description"><phrase>combine keys</phrase></textobject><imageobject>
<imagedata fileref="combine-keys.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<figure>
<title>Combining Activation Keys 2</title>
<mediaobject><textobject role="description"><phrase>combine keys2</phrase></textobject><imageobject>
<imagedata fileref="combine-keys2.png" width="80%"/>
</imageobject></mediaobject>
</figure>
</sect1>
<sect1 id="_using_activation_keys_and_bootstrap_with_traditional_clients_non_salt"><title>Using Activation Keys and Bootstrap with Traditional Clients (Non-Salt)</title><para>Create the initial bootstrap script template from the command line on the <phrase><phrase>SUSE</phrase> Manager</phrase>
server with:</para>
<screen># mgr-bootstrap</screen>
<para>This command will generate the bootstrap script and place them in <filename>/srv/www/htdocs/pub/bootstrap</filename>
.</para>
<para>Alternatively you may use the Web UI
to create your bootstrap script template.
For more information, see <xref linkend="s3-sattools-config-bootstrap"/>.</para>
<para>Use the Web UI
to create your keys.
From the Web UI
proceed to <menuchoice><guimenu>Overview</guimenu> <guimenu>Tasks</guimenu> <guimenu>Manage
   Activation Keys</guimenu></menuchoice>
.</para>
</sect1>
<sect1 id="bp.chapt.act.keys.with.salt.minions"><title>Using Activation Keys when Registering Salt Minions</title><para>With the addition of Salt to <phrase><phrase>SUSE</phrase> Manager</phrase>
 3 states should now be considered best practice over the more traditional way of combining activation keys.
Although states allow for more configuration options you need to place the new system within the correct group so the desired states will be applied to the system.
Using an activation key on your minions will place the system within the correct group automatically.</para>
<para>You should be aware of a few facts when working with Salt over traditional activation keys:</para>
<itemizedlist>
<listitem>
<para>Currently we do not support specifying an activation key on the minion on-boarding page.</para>
</listitem>
<listitem>
<para>Activation keys used with Salt minions are the same as those used with traditional systems and may be shared.</para>
</listitem>
<listitem>
<para>The equivalent of specifying a key using the traditional bootstrap method is to place the desired key in the grain of a minion. For more information on grains, see <ulink url="https://docs.saltstack.com/en/latest/topics/targeting/grains.html">https://docs.saltstack.com/en/latest/topics/targeting/grains.html</ulink></para>
</listitem>
<listitem>
<para>Once a minion has been accepted either from the <menuchoice><guimenu>Salt</guimenu> <guimenu>Keys</guimenu></menuchoice> page located in the Web UI or from the command line, all configurations specified by the activation key placed within a salt grain will be applied.</para>
</listitem>
<listitem>
<para>Currently you may only use one activation key when working with salt. You cannot combine them, despite this, salt states allow for even more control.</para>
</listitem>
</itemizedlist>
<sect2 id="_using_an_activation_key_and_custom_grains_file"><title>Using an Activation Key and Custom Grains File</title><para>Create a custom grains file and place it on the minion here:</para>
<screen># /etc/salt/grains</screen>
<para>Then add the following lines to the grains file replacing 1-sles12-sp2 with your activation key label:</para>
<screen>susemanager:
  activation_key: 1-sles12-sp2</screen>
<para>Now restart the minion with:</para>
<screen># systemctl restart salt-minion</screen>
</sect2>
<sect2 id="_using_an_activation_key_in_the_minion_configuration_file"><title>Using an Activation Key in the Minion Configuration File</title><para>You may also place the activation key grain within the minion configuration file located in:</para>
<screen># /etc/salt/minion</screen>
<para>Now add the following lines to the minion configuration file replacing 1-sles12-sp2 with your activation key label:</para>
<screen>grains:
  susemanager:
    activation_key: 1-sles12-sp2</screen>
<para>Reboot the minion with:</para>
<screen># systemctl restart salt-minion</screen>
</sect2>
</sect1>
</chapter>
<chapter id="bp.systems.management"><title>Contact Methods</title><sect1 id="_selecting_a_contact_method"><title>Selecting a Contact Method</title><para><phrase><phrase>SUSE</phrase> Manager</phrase>
provides several methods for communication between client and server.
All commands your <phrase><phrase>SUSE</phrase> Manager</phrase>
server sends its clients to do will be routed through one of them.
Which one you select will depend on your network infrastructure.
The following sections provide a starting point for selecting a method which best suits your network environment.</para>
<note>
<title>Contact Methods and Salt</title>
<para>This chapter is only relevant for traditional clients as Salt clients (minions) utilize a Salt specific contact method.
For general information about Salt clients, see <xref linkend="salt.gs.guide.intro"/>.</para>
</note>
</sect1>
<sect1 id="bp.contact.methods.rhnsd"><title>Default (the SUSE Manager Daemon rhnsd)</title><para>The <phrase><phrase>SUSE</phrase> Manager</phrase>
daemon (<command>rhnsd</command>) runs on client systems and periodically connects with <phrase><phrase>SUSE</phrase> Manager</phrase>
 to check for new updates and notifications.
The daemon, which runs in the background, is started by <literal role="systemitem">rhnsd.service</literal>
.
By default, it will check every 4 hours for new actions, therefore it may take some time for your clients to begin updating after actions have been scheduled for them.</para>
<para>To check for updates, <literal role="systemitem">rhnsd</literal>
 runs the external <literal role="systemitem">mgr_check</literal>
 program located in <filename>/usr/sbin/</filename>
.
This is a small application that establishes the network connection to <phrase><phrase>SUSE</phrase> Manager</phrase>
.
The SUSE Manager daemon does not listen on any network ports or talk to the network directly.
All network activity is done via the <literal role="systemitem">mgr_check</literal>
 utility.</para>
<warning>
<title>Auto accepting (EULAs)</title>
<para>When new packages or updates are installed on the client via <phrase><phrase>SUSE</phrase> Manager</phrase>
, any licenses (EULAs) requiring agreement before installation are automatically accepted.</para>
</warning>
<para>This figure provides an overview of the default <literal role="systemitem">rhnsd</literal>
 process path.
All items left of the <literal role="systemitem">Python XMLRPC server</literal>
 block represent processes running on a <phrase><phrase>SUSE</phrase> Manager</phrase>
 client.</para>
<figure>
<title>rhnsd Contact Method</title>
<mediaobject><textobject role="description"><phrase>rhnsd taigon</phrase></textobject><imageobject>
<imagedata fileref="rhnsd-taigon.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<sect2 id="_configuring_susemgr_rhnsd_daemon"><title>Configuring SUSE Manager rhnsd Daemon</title><para>The <phrase><phrase>SUSE</phrase> Manager</phrase>
daemon can be configured by editing the file on the client:</para>
<screen>/etc/sysconfig/rhn/rhnsd</screen>
<para>This is the configuration file the rhnsd initialization script uses.
An important parameter for the daemon is its check-in frequency.
The default interval time is four hours (240 minutes). If you modify the configuration file, you must as <systemitem class="username">root</systemitem>
restart the daemon with <command>systemctl rhnsd restart</command>.</para>
<important>
<title>Minimum Allowed Check-in Parameter</title>
<para>The minimum allowed time interval is one hour (60 minutes). If you set the interval below one hour, it will change back to the default of 4 hours (240 minutes).</para>
</important>
</sect2>
<sect2 id="_viewing_rhnsd_daemon_status"><title>Viewing rhnsd Daemon Status</title><para>You can view the status of rhnsd by typing the command <command>systemctl status
     rhnsd</command> as <systemitem class="username">root</systemitem>
.</para>
</sect2>
</sect1>
<sect1 id="bp.contact.methods.ssh.push"><title>Push via SSH</title><para>Push via SSH is intended to be used in environments where your clients cannot reach the <phrase><phrase>SUSE</phrase> Manager</phrase>
server directly to regularly check in and, for example, fetch package updates.</para>
<para>In detail, this feature enables a <phrase><phrase>SUSE</phrase> Manager</phrase>
located within an internal network to manage clients located on a <quote>Demilitarized Zone</quote>
 (DMZ) outside of the firewall protected network.
Due to security reasons, no system on a DMZ is authorized to open a connection to the internal network and therefore your <phrase><phrase>SUSE</phrase> Manager</phrase>
 server.
The solution is to configure Push via SSH which utilizes an encrypted tunnel from your <phrase><phrase>SUSE</phrase> Manager</phrase>
 server on the internal network to the clients located on the DMZ.
After all actions/events are executed, the tunnel is closed.
The server will contact the clients in regular intervals (using SSH) to check in and perform all actions and events.</para>
<important>
<title>Push via SSH Unsupported Actions</title>
<para>Certain actions are currently not supported on scheduled clients which are managed via Push via SSH.
This includes re-installation of systems using the provisioning module.</para>
</important>
<para>The following figure provides an overview of the Push via SSH process path.
All items left of the <literal role="systemitem">Taskomatic</literal>
 block represent processes running on a <phrase><phrase>SUSE</phrase> Manager</phrase>
 client.</para>
<figure>
<title>Push via SSH Contact Method</title>
<mediaobject><textobject role="description"><phrase>sshpush taigon</phrase></textobject><imageobject>
<imagedata fileref="sshpush-taigon.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<sect2 id="bp.contact.methods.ssh.push.requirements"><title>Configuring the Server for Push via SSH</title><para>For tunneling connections via SSH, two available port numbers are required, one for tunneling HTTP and the second for tunneling via HTTPS (HTTP is only necessary during the registration process). The port numbers used by default are <literal>1232</literal> and <literal>1233</literal>.
To overwrite these, add two custom port numbers greater than 1024 to <filename>/etc/rhn/rhn.conf</filename>
 like this:</para>
<screen>ssh_push_port_http = high port 1
ssh_push_port_https = high port 2</screen>
<para>If you would like your clients to be contacted via their hostnames instead of an IP address, set the following option:</para>
<screen>ssh_push_use_hostname = true</screen>
<para>It is also possible to adjust the number of threads to use for opening client connections in parallel.
By default two parallel threads are used.
Set <literal role="systemitem">taskomatic.ssh_push_workers</literal>
 in <filename>/etc/rhn/rhn.conf</filename>
 like this:</para>
<screen>taskomatic.ssh_push_workers = number</screen>
</sect2>
<sect2 id="bp.contact.methods.ssh.push.sudo"><title>Using sudo with Push via SSH</title><para>For security reasons you may desire to use sudo and SSH into a system as a user other than <systemitem class="username">root</systemitem>
.
The following procedure will guide you through configuring sudo for use with Push via SSH.</para>
<note>
<title>sudo Requirements</title>
<para>The packages <filename>spacewalk-taskomatic &gt;= 2.1.165.19</filename>
 and <filename>spacewalk-certs-tools ⇒ 2.1.6.7</filename>
 are required for using sudo with Push via SSH.</para>
</note>
<orderedlist id="pro.bp.contact.methods.ssh.push.sudo.user" numeration="arabic">
<title>Procedure: Configuring sudo</title>
<listitem>
<para>Set the following parameter on the server located in <filename>/etc/rhn/rhn.conf</filename> .</para>
<screen>ssh_push_sudo_user =`user`</screen>
<para>The server will use sudo to ssh as the configured <replaceable>user</replaceable>.</para>
</listitem>
<listitem>
<para>You must create the user specified in <xref linkend="pro.bp.contact.methods.ssh.push.sudo.user"/> on each of your clients and the following parameters should be commented out within each client’s <filename>/etc/sudoers</filename> file:</para>
<screen>#Defaults targetpw   # ask for the password of the target user i.e. root
#ALL    ALL=(ALL) ALL   # WARNING! Only use this together with 'Defaults targetpw'!</screen>
</listitem>
<listitem>
<para>Add the following lines beneath the <literal>\## User privilege specification</literal> section of each client’s <filename>/etc/sudoers</filename> file:</para>
<screen>&lt;user&gt; ALL=(ALL) NOPASSWD:/usr/sbin/mgr_check
&lt;user&gt; ALL=(ALL) NOPASSWD:/home/&lt;user&gt;/enable.sh
&lt;user&gt; ALL=(ALL) NOPASSWD:/home/&lt;user&gt;/bootstrap.sh</screen>
</listitem>
<listitem>
<para>On each client add the following two lines to the <filename>/home/user/.bashrc</filename> file:</para>
<screen>PATH=$PATH:/usr/sbin
export PATH</screen>
</listitem>
</orderedlist>
</sect2>
<sect2 id="_client_registration"><title>Client Registration</title><para>As your clients cannot reach the server, you will need to register your clients from the server.
A tool for performing registration of clients from the server is included with <phrase><phrase>SUSE</phrase> Manager</phrase>
and is called <command>mgr-ssh-push-init</command>.
This tool expects a client’s hostname or IP address and the path to a valid bootstrap script located in the server’s filesystem for registration as parameters.</para>
<important>
<title>Specifying Ports for Tunneling before Registering Clients</title>
<para>The ports for tunneling need to be specified before the first client is registered.
Clients already registered before changing the port numbers must be registered again, otherwise the server will not be able to contact them anymore.</para>
</important>
<note>
<title>mgr-ssh-push-init Disables rhnsd</title>
<para>The <command>mgr-ssh-push-init</command> command disables the <literal role="systemitem">rhnsd</literal>
 daemon which normally checks for updates every 4 hours.
Because your clients cannot reach the server without using the Push via SSH contact method, the <literal role="systemitem">rhnsd</literal>
 daemon is disabled.</para>
</note>
<para>For registration of systems which should be managed via the Push via SSH tunnel contact method, it is required to use an activation key that is configured to use this method.
Normal <literal role="systemitem">Push via SSH</literal>
 is unable to reach the server.
For managing activation keys, see <xref linkend="bp.key.managment"/>.</para>
<para>Run the following command as <systemitem class="username">root</systemitem>
on the server to register a client:</para>
<screen># mgr-ssh-push-init --client client --register \
/srv/www/htdocs/pub/bootstrap/bootstrap_script --tunnel</screen>
<para>To enable a client to be managed using Push via SSH (without tunneling), the same script may be used.
Registration is optional since it can also be done from within the client in this case. <command>mgr-ssh-push-init</command> will also automatically generate the necessary SSH key pair if it does not yet exist on the server:</para>
<screen># mgr-ssh-push-init --client`client`--register bootstrap_script</screen>
<para>When using the Push via SSH tunnel contact method, the client is configured to connect <phrase><phrase>SUSE</phrase> Manager</phrase>
via the high ports mentioned above (see <filename>/etc/sysconfig/rhn/up2date</filename>
). Tools like <command>rhn_check</command> and <command>zypper</command> will need an active SSH session with the proper port forwarding options in order to access the <phrase><phrase>SUSE</phrase> Manager</phrase>
 API.
To verify the Push via SSH tunnel connection manually, run the following command on the <phrase><phrase>SUSE</phrase> Manager</phrase>
 server:</para>
<screen># ssh -i /root/.ssh/id_susemanager -R high port: susemanager :443`client`zypper ref</screen>
</sect2>
<sect2 id="bp.contact.methods.ssh.push.api.support"><title>API Support for Push via SSH</title><para>The contact method to be used for managing a server can also be modified via the API.
The following example code (python) shows how to set a system’s contact method to <literal>ssh-push</literal>.
Valid values are:</para>
<itemizedlist>
<listitem>
<para><literal>default</literal> (pull)</para>
</listitem>
<listitem>
<para><literal>ssh-push</literal></para>
</listitem>
<listitem>
<para><literal>ssh-push-tunnel</literal></para>
</listitem>
</itemizedlist>
<screen>client = xmlrpclib.Server(SUMA_HOST + "/rpc/api", verbose=0)
key = client.auth.login(SUMA_LOGIN, SUMA_PASSWORD)
client.system.setDetails(key, 1000012345, {'contact_method' : 'ssh-push'})</screen>
<note>
<title>Migration and Management via Push via SSH</title>
<para>When a system should be migrated and managed using Push via SSH, it requires setup using the <literal role="systemitem">mgr-ssh-push-init</literal>
 script before the server can connect via SSH.
This separate command requires human interaction to install the server’s SSH key onto the managed client (<systemitem class="username">root</systemitem>
 password). The following procedure illustrates how to migrate an already registered system:</para>
</note>
<orderedlist numeration="arabic">
<title>Procedure: Migrating Registered Systems</title>
<listitem>
<para>Setup the client using the <literal role="systemitem">mgr-ssh-push-init</literal> script (without <option>--register</option>).</para>
</listitem>
<listitem>
<para>Change the client’s contact method to <literal>ssh-push</literal> or <literal>ssh-push-tunnel</literal> respectively (via API or Web UI).</para>
</listitem>
</orderedlist>
<para>Existing activation keys can also be edited via API to use the Push via SSH contact method for clients registered with these keys:</para>
<screen>client.activationkey.setDetails(key, '1-mykey', {'contact_method' : 'ssh-push'})</screen>
</sect2>
<sect2 id="bp.contact.methods.ssh.push.proxy.support"><title>Proxy Support with Push via SSH</title><para>It is possible to use Push via SSH to manage systems that are connected to the <phrase><phrase>SUSE</phrase> Manager</phrase>
server via a proxy.
To register a system, run <literal role="systemitem">mgr-ssh-push-init</literal>
 on the proxy system for each client you wish to register.
Update your proxy with the latest packages to ensure the registration tool is available.
It is necessary to copy the ssh key to your proxy.
This can be achieved by executing the following command from the server:</para>
<screen>{prompt.root}mgr-ssh-push-init --client`proxy`</screen>
</sect2>
</sect1>
<sect1 id="bp.contact.methods.saltssh.push"><title>Push via Salt SSH</title><para>Push via Salt SSH is intended to be used in environments where your Salt clients cannot reach the <phrase><phrase>SUSE</phrase> Manager</phrase>
server directly to regularly checking in and, for example, fetch package updates.</para>
<note>
<title>Push via SSH</title>
<para>This feature is not related to Push via SSH for the traditional clients.
For Push via SSH, see <xref linkend="bp.contact.methods.ssh.push"/>.</para>
</note>
<sect2 id="_overview"><title>Overview</title><figure>
<title>Push via Salt SSH Contact Method</title>
<mediaobject><textobject role="description"><phrase>salt ssh contact taigon</phrase></textobject><imageobject>
<imagedata fileref="salt-ssh-contact-taigon.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<para>Salt provides <quote>Salt SSH</quote>
 (<command>salt-ssh</command>), a feature to manage clients from a server.
It works without installing Salt related software on clients.
Using Salt SSH there is no need to have minions connected to the Salt master.
Using this as a <phrase><phrase>SUSE</phrase> Manager</phrase>
 connect method, this feature provides similar functionality for Salt clients as the traditional Push via SSH feature for traditional clients.</para>
<para>This feature allows:</para>
<itemizedlist>
<listitem>
<para>Managing Salt entitled systems with the Push via SSH contact method using Salt SSH.</para>
</listitem>
<listitem>
<para>Bootstrapping such systems.</para>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="_requirements"><title>Requirements</title><itemizedlist>
<listitem>
<para>SSH daemon must be running on the remote system and reachable by the <literal role="systemitem">salt-api</literal> daemon (typically running on the <phrase><phrase>SUSE</phrase> Manager</phrase> server).</para>
</listitem>
<listitem>
<para>Python must be available on the remote system (Python must be supported by the installed Salt). Currently: python 2.6.</para>
</listitem>
</itemizedlist>
<note>
<title>Unsupported Systems</title>
<para><phrase>Red Hat Enterprise Linux</phrase>
and CentOS versions ⇐ 5 are not supported because they do not have Python 2.6 by default.</para>
</note>
</sect2>
<sect2 id="_bootstrapping"><title>Bootstrapping</title><para>To bootstrap a Salt SSH system, proceed as follows:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Open the <guimenu>Bootstrap Minions</guimenu> dialog in the Web UI (<menuchoice><guimenu>Systems</guimenu> <guimenu>Bootstrapping</guimenu></menuchoice> ).</para>
</listitem>
<listitem>
<para>Fill out the required fields. Select an <guimenu>Activation Key</guimenu> with the <guimenu>Push via SSH</guimenu> contact method configured. For more information about activation keys, see <xref linkend="ref.webui.systems.activ-keys"/>.</para>
</listitem>
<listitem>
<para>Check the <guimenu>Manage system completely via SSH</guimenu> option.</para>
</listitem>
<listitem>
<para>Confirm with clicking the <guimenu>Bootstrap</guimenu> button.</para>
</listitem>
</orderedlist>
<para>Now the system will be bootstrapped and registered in <phrase><phrase>SUSE</phrase> Manager</phrase>
.
If done successfully, it will appear in the <guimenu>Systems</guimenu>
 list.</para>
</sect2>
<sect2 id="_configuration"><title>Configuration</title><para>There are two kinds of parameters for Push via Salt SSH:</para>
<itemizedlist>
<listitem>
<para>Bootstrap-time parameters — configured in the <guimenu>Bootstrapping</guimenu> page:</para>
<itemizedlist>
<listitem>
<para>Host</para>
</listitem>
<listitem>
<para>Activation key</para>
</listitem>
<listitem>
<para>Password — used only for bootstrapping, not saved anywhere; all future SSH sessions are authorized via a key/certificate pair</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Persistent parameters — configured <phrase><phrase>SUSE</phrase> Manager</phrase> -wide:</para>
<itemizedlist>
<listitem>
<para>sudo user — same as in <xref linkend="bp.contact.methods.ssh.push.sudo"/>.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="_action_execution"><title>Action Execution</title><para>The Push via Salt SSH feature uses a taskomatic job to execute scheduled actions using <command>salt-ssh</command>.
The taskomatic job periodically checks for scheduled actions and executes them.
While on traditional clients with SSH push configured only <command>rhn_check</command> is executed via SSH, the Salt SSH push job executes a complete <command>salt-ssh</command> call based on the scheduled action.</para>
</sect2>
<sect2 id="_known_limitation"><title>Known Limitation</title><itemizedlist>
<listitem>
<para>OpenSCAP auditing is not available on Salt SSH minions.</para>
</listitem>
<listitem>
<para>Beacons do not work with Salt SSH.</para>
<itemizedlist>
<listitem>
<para>Installing a package on a system using <command>zypper</command> will not invoke the package refresh.</para>
</listitem>
<listitem>
<para>Virtual Host functions (for example, a host to guests) will not work if the virtual host system is Salt SSH-based.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="_for_more_information"><title>For More Information</title><para>For more information, see</para>
<itemizedlist>
<listitem>
<para><ulink url="https://wiki.microfocus.com/index.php/SUSE_Manager/SaltSSHServerPush">https://wiki.microfocus.com/index.php/SUSE_Manager/SaltSSHServerPush</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://docs.saltstack.com/en/latest/topics/ssh/">https://docs.saltstack.com/en/latest/topics/ssh/</ulink></para>
</listitem>
</itemizedlist>
</sect2>
</sect1>
<sect1 id="bp.contact.methods.osad"><title>osad</title><para>The default contact method between <phrase><phrase>SUSE</phrase> Manager</phrase>
and its clients is <literal role="systemitem">rhnsd</literal>
.
When using the <literal role="systemitem">rhnsd</literal>
 daemon the client will contact the server every 4 hours and then execute a scheduled action on clients.
Depending on your network environment <literal role="systemitem">rhnsd</literal>
 may not suit your requirements.
Alternatively, you may configure <literal role="systemitem">osad</literal>
 for use with registered client systems enabling immediate execution of scheduled actions. <literal role="systemitem">osad</literal>
 consists of three components:</para>
<formalpara>
<title>osad</title>
<para>A client-side service that responds to pings and runs <command>mgr_check</command> when directed by the <literal role="systemitem">osa-dispatcher</literal>
 running on <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
</formalpara>
<formalpara>
<title>osa-dispatcher</title>
<para>A service running on <phrase><phrase>SUSE</phrase> Manager</phrase>
that checks the database to determine if a client running <literal role="systemitem">osad</literal>
 needs to be pinged or is required to run <command>mgr_check</command>, then sends a message telling the client to do so.</para>
</formalpara>
<formalpara>
<title>jabberd</title>
<para>A daemon that runs on <phrase><phrase>SUSE</phrase> Manager</phrase>
and uses the <literal role="systemitem">XMPP</literal>
 protocol. <literal role="systemitem">osad</literal>
 and <literal role="systemitem">osa-dispatcher</literal>
 both connect to this daemon. <literal role="systemitem">jabberd</literal>
 also handles authentication when using <literal role="systemitem">osad</literal>
.</para>
</formalpara>
<para>The following figure represents the osad contact method.
All items left of the <literal role="systemitem">osa-dispatcher</literal>
 block represent running processes on the client.</para>
<figure>
<title>osad Contact Method</title>
<mediaobject><textobject role="description"><phrase>osad</phrase></textobject><imageobject>
<imagedata fileref="osad.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<itemizedlist>
<title>How it Works</title>
<listitem>
<para>On <phrase><phrase>SUSE</phrase> Manager</phrase> the <literal role="systemitem">osa-dispatcher</literal> periodically runs a query which checks to see if there are any clients overdue for a ping.</para>
</listitem>
<listitem>
<para>If an overdue client is found, a message is sent via <literal role="systemitem">jabberd</literal> to the <literal role="systemitem">osad</literal> instances running on all clients registered with your <phrase><phrase>SUSE</phrase> Manager</phrase> server. The <literal role="systemitem">osad</literal> instances respond to the ping through the <literal role="systemitem">jabberd</literal> deamon running in the background on your <phrase><phrase>SUSE</phrase> Manager</phrase> Server. <literal role="systemitem">osa-dispatcher</literal> receives the response, and marks the client as 'online'.</para>
</listitem>
<listitem>
<para>If <literal role="systemitem">osa-dispatcher</literal> fails to receive a response from an <literal role="systemitem">osad</literal> instance in a certain amount of time, the client is marked 'offline'.</para>
</listitem>
<listitem>
<para><literal role="systemitem">osa-dispatcher</literal> also periodically executes a select on the database to check all <phrase><phrase>SUSE</phrase> Manager</phrase> clients which have actions that need to be executed. If an action is found, a message is sent through <literal role="systemitem">jabberd</literal> to <literal role="systemitem">osad</literal> which then executes <command>mgr_check</command> on the client. <command>mgr_check</command> then takes over performing the actual action.</para>
</listitem>
</itemizedlist>
<sect2 id="_configuring_and_enabling_osad"><title>Configuring and Enabling osad</title><para>The following procedure enables use of <literal role="systemitem">osad</literal>
 with <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
<important>
<title>Enabling SSL</title>
<para>For this communication method to work SSL is mandatory.
If SSL certificates are not available, the daemon on your client systems will fail to connect.
Make sure your firewall rules are set to allow for the required ports.
For more information, see <xref linkend="tab.install.ports.server"/>.</para>
</important>
<orderedlist numeration="arabic">
<title>Procedure: Enabling osa-dispatcher on SUSE Managerand osad on Clients</title>
<listitem>
<para>On your <phrase><phrase>SUSE</phrase> Manager</phrase> server use the following command as <systemitem class="username">root</systemitem> to start the <literal role="systemitem">osa-dispatcher</literal> service:</para>
<screen>systemctl start osa-dispatcher</screen>
</listitem>
<listitem>
<para>Install the <literal role="systemitem">osad</literal> package on all client systems allowing communication to the osa-dispatcher on <phrase><phrase>SUSE</phrase> Manager</phrase>.
The package can be found in the Tools child channel.</para>
<warning>
<title>osad conflicts with osa-dispatcher</title>
<para>Do <emphasis>not</emphasis> install the <literal role="systemitem">osad</literal>
 client package on your <phrase><phrase>SUSE</phrase> Manager</phrase>
 server.
The <literal role="systemitem">osad</literal>
 client service conflicts with <literal role="systemitem">osa-dispatcher</literal>
 server package.</para>
</warning>
</listitem>
<listitem>
<para>When <literal role="systemitem">osad</literal> has been installed, start the service on your client systems. As <systemitem class="username">root</systemitem> enter:</para>
<screen>systemctl start osad</screen>
<para>Like other services, osa-dispatcher and osad accept <literal>stop</literal>, <literal>restart</literal>, and <literal>status</literal> commands as well.</para>
</listitem>
</orderedlist>
<para>This feature depends on the client systems recognizing the fully qualified domain name (FQDN) of <phrase><phrase>SUSE</phrase> Manager</phrase>
.
The client systems use this name and not the IP address of the server when configuring the YaST Online Update.</para>
<para>Now when you schedule actions from <phrase><phrase>SUSE</phrase> Manager</phrase>
on any of the osad enabled systems, the task will be carried out immediately rather than after a client checks in using <literal role="systemitem">rhnsd</literal>
.</para>
</sect2>
<sect2 id="_osad_configuration_and_logging_files"><title>osad Configuration and Logging Files</title><para>Each component of <literal role="systemitem">osad</literal>
 is configured via local configuration files.
Changing default parameters is not recommended.
For reference the configuration files and logs are found in the following locations.</para>
<formalpara>
<title>osa-dispatcher</title>
<para><literal role="systemitem">osa-dispatcher</literal>
 is configured via the <filename>rhn.conf</filename>
 file located on the <phrase><phrase>SUSE</phrase> Manager</phrase>
 at:</para>
</formalpara>
<screen>/etc/rhn/rhn.conf</screen>
<para>All parameters for configuring osa-dispatcher are located under this section heading:</para>
<screen># OSA configuration #</screen>
<formalpara>
<title>osad</title>
<para><literal role="systemitem">osad</literal>
 configuration files are located on all <phrase><phrase>SUSE</phrase> Manager</phrase>
 clients at:</para>
</formalpara>
<screen>/etc/sysconfig/rhn/osad.conf
/etc/syseconfig/rhn/up2date</screen>
<para>For troubleshooting <literal role="systemitem">osad</literal>
 the log file is located in:</para>
<screen>/var/log/osad</screen>
<para>The location of this log file is configurable via the <filename>osad.conf</filename>
 file.</para>
<formalpara>
<title>jabberd</title>
<para>Configuration of <literal role="systemitem">jabberd</literal>
 goes beyond the scope of this document.
The <literal role="systemitem">jabberd</literal>
 log file is located at:</para>
</formalpara>
<screen>/var/log/messages</screen>
</sect2>
</sect1>
</chapter>
<chapter id="bp.susecom.lifecycle.management"><title>Advanced Patch Lifecycle Management</title><para>Keeping systems patched and secure remains one of the greatest ongoing challenges that you will face as an administrator.
Both proprietary and open-source companies are constantly working to provide updates which fix flaws discovered within their software products.</para>
<para>For the official <emphasis><phrase role="ref">Best Practice Guide</phrase></emphasis>
 on <quote>Advanced Patch Lifecycle Management</quote>
, see <ulink url="https://www.suse.com/documentation/suse-best-practices/susemanager/data/susemanager.html">https://www.suse.com/documentation/suse-best-practices/susemanager/data/susemanager.html</ulink>.</para>
</chapter>
<chapter id="bp.live.patching"><title>Live Patching with SUSE Manager</title><sect1 id="live.patching.intro"><title>Introduction</title><para>Under normal circumstances a system needs to be rebooted after a kernel update.
SLE Live Patching allows you skipping the reboot by applying a subset of Linux kernel releases injected via kGraft live patching technology.</para>
<para>In the following sections you will learn how to use SLE Live Patching to avoid the typical reboot requirement after updating a system kernel.</para>
<para>For in depth information covering kGraft use, see <ulink url="https://www.suse.com/documentation/sles-12/singlehtml/book_sle_admin/book_sle_admin.html#cha.kgraft">https://www.suse.com/documentation/sles-12/singlehtml/book_sle_admin/book_sle_admin.html#cha.kgraft</ulink>.</para>
</sect1>
<sect1 id="live.patching.req"><title>Initial Setup Requirements</title><para>To work with SLE Live Patching the following expectations are assumed:</para>
<itemizedlist>
<listitem>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> fully updated.</para>
</listitem>
<listitem>
<para>At least 1 Salt Minion running SLES 12 SP1 or later and registered with <phrase><phrase>SUSE</phrase> Manager</phrase> .</para>
</listitem>
<listitem>
<para>The matching SLES 12 SPx channels including the SLE Live Patching child channel fully synced.</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="live.patching.setup"><title>Live Patching Setup</title><orderedlist numeration="arabic">
<listitem>
<para>Subscribe all systems to be managed via live patching to your fully synced live patching child channels within your systems base channel by browsing to <menuchoice><guimenu>Software</guimenu> <guimenu>Software Channels</guimenu></menuchoice> . Select both live patching channels and change subscription.</para>
<note>
<para>When subscribing to a channel that contains a product, the product package will automatically be installed on traditionaly registered systems and added to the package state on Salt managed systems.
For Salt managed systems please apply the highstate to push these changes to your systems.</para>
</note>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>enable live patching channels</phrase></textobject><imageobject>
<imagedata fileref="enable_live_patching_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Use the search field listed under <menuchoice><guimenu>Software</guimenu> <guimenu>Packages</guimenu> <guimenu>Install</guimenu></menuchoice> to install the latest <filename>kgraft</filename> package to all systems to be managed via live patching.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>enable live patching kgraft install</phrase></textobject><imageobject>
<imagedata fileref="enable_live_patching_kgraft_install.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Apply the highstate to enable live patching:</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>enable live patching apply highstate</phrase></textobject><imageobject>
<imagedata fileref="enable_live_patching_apply_highstate.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Once the highstate has been applied on Salt systems or the package has been installed on traditional systems browse to the systems details page for confirmation that live patching has been enabled. You can check the live patching state listed under the <menuchoice><guimenu>System Info</guimenu> <guimenu>Kernel</guimenu></menuchoice> table field:</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>enable live patching successful</phrase></textobject><imageobject>
<imagedata fileref="enable_live_patching_successful.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect1>
<sect1 id="live.patching.clones"><title>Cloning Channels</title><para>It is considered best practice to clone a vendor channel that will be modified into a new channel with one of the following prefix names: <literal>dev</literal>, <literal>testing</literal>, and <literal>prod</literal>.
In the following procedure you will clone the default vendor channel into a new channel named <literal role="systemitem">dev-sles12-sp3-pool-x86_64</literal>
 using the command line.</para>
<orderedlist id="proc.live.patching.clones" numeration="arabic">
<listitem>
<para>Open a terminal and as root enter:</para>
<screen># spacewalk-manage-channel-lifecycle --list-channels
Spacewalk Username: admin
Spacewalk Password:
Channel tree:

 1. sles{sles-version}-sp{sp-ver}-pool-x86_64
      \__ sle-live-patching{sles-version}-pool-x86_64-sp{sp-ver}\__ sle-live-patching{sles-version}-updates-x86_64-sp{sp-ver}\__ sle-manager-tools{sles-version}-pool-x86_64-sp{sp-ver}\__ sle-manager-tools{sles-version}-updates-x86_64-sp{sp-ver}\__ sles{sles-version}-sp{sp-ver}-updates-x86_64</screen>
</listitem>
<listitem>
<para>Now use the <emphasis>--init</emphasis> argument to automatically create a new development clone of the original vendor channel:</para>
<screen>spacewalk-manage-channel-lifecycle --init -c sles{sles-version}-sp{sp-ver}-pool-x86_64</screen>
</listitem>
</orderedlist>
</sect1>
<sect1 id="live.patching.kernel"><title>Removing Non-live Kernel Patches from the Cloned Channels</title><para>In the following procedure you will remove all kernel patch updates located in the dev-sles{sles-version}
-sp{sp-ver}
-updates-x86_64 channel that require a reboot.
You created dev-sles{sles-version}
-sp{sp-ver}
-updates-x86_64 during <xref linkend="proc.live.patching.clones"/>.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Check the current kernel version in use on your client:</para>
<screen># uname -r
3.12.62-60.64.8-default</screen>
</listitem>
<listitem>
<para>From the <phrase><phrase>SUSE</phrase> Manager</phrase>{webui} select <menuchoice><guimenu>Software</guimenu> <guimenu>Manage Software Channels</guimenu> <guimenu>Overview</guimenu> <guimenu>dev-sles12-sp3-updates-x86_64</guimenu> <guimenu>Patches</guimenu> <guimenu>List/Remove</guimenu></menuchoice> . Type <literal>kernel</literal> in the search field. Find the kernel version that matches the kernel in use on your minion.</para>
</listitem>
<listitem>
<para>Remove all kernel update versions that are later than the current kernel.</para>
</listitem>
<listitem>
<para>Your channel is now ready to promote for testing SLE Live Patching.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="live.patching.channel-promo"><title>Promoting Channels</title><para>The following procedure will guide you through promoting and cloning a development channel to a testing channel.
You will change the subscription from the dev repositories on your client to the new testing channel repositories.
You will also add the SLE Live Patching child channels to your client.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Promote and clone the <literal>dev-sles{sles-version} -sp{sp-ver} -pool-x86_64</literal> to a new testing channel:</para>
<screen>{prompt.root}spacewalk-manage-channel-lifecycle -promote -c dev-sles{sles-version}-sp{sp-ver}-pool-x86_64</screen>
</listitem>
<listitem>
<para>From the <phrase><phrase>SUSE</phrase> Manager</phrase>{webui} under the <guimenu>Systems</guimenu> tab select your client system to view the <guimenu>System Details</guimenu> page. Select <menuchoice><guimenu>Software</guimenu> <guimenu>Software Channels</guimenu></menuchoice> . From the Software Channels page you can edit which channels a system is subscribed to. Select the new base software channel, in this case it should be <literal role="systemitem">test-sles12-sp3-pool-x86_64</literal> . Click the <guimenu>Confirm</guimenu> button to switch the Base Software Channel and finalize it by clicking the <guimenu>Modify Base Software Channel</guimenu> button.</para>
</listitem>
<listitem>
<para>From the <guimenu>Software Channels</guimenu> page select and add both SLE Live Patching child channels by clicking the <guimenu>Change Subscriptions</guimenu> button.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="live.patching.applying"><title>Applying Live Patches to a Kernel</title><para>The following procedure will guide you through selecting and viewing available CVE Patches (Common Vulnerabilities and Exposures) then applying these kernel updates using the new SLE Live Patching feature.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Select your SLES {sles-version} SP{sp-ver} minion from the <guimenu>Systems</guimenu> page to view its <guimenu>System Details</guimenu> . Once you have added the SLES {sles-version} SP{sp-ver} Updates child channel to your client, you should see several <literal>Critical</literal> software updates available. Click on <literal>Critical</literal> to see a list of available patches. Select any of these patches listed with the following synopsis: <emphasis>Important: Security update for the Linux kernel</emphasis>. All fixed security bugs will be listed along with their number. For example:(CVE-2016-8666)</para>
<important>
<title>Reboot Icon</title>
<para>Normal or non-live kernel patches always require a reboot.
In <phrase><phrase>SUSE</phrase> Manager</phrase>
these are represented by a <literal>Reboot Required</literal> icon located next to the <literal>Security</literal> shield icon.</para>
</important>
</listitem>
<listitem>
<para>You can search for individual CVE’s by selecting the <guimenu>Audit</guimenu> tab from the navigation menu. Try searching for <literal>CVE-2016-8666</literal>. You will see that the patch is available in the vendor update channel and the systems it applies to will be listed.</para>
</listitem>
</orderedlist>
<important>
<title>CVE Availability</title>
<para>Not all security issues can be fixed by applying a live patch.
Some security issues can only be fixed by applying a full kernel update and will required a reboot.
The assigned CVE numbers for these issues are not included in live patches.
A CVE audit will display this requirement.</para>
</important>
</sect1>
</chapter>
<chapter id="bp.sp.migration"><title>SUSE Manager Server Migration</title><sect1 id="bp.sp.migration.sp.intro"><title>Service Pack Migration Introduction</title><para>You can upgrade the underlying operating system and also migrate <phrase><phrase>SUSE</phrase> Manager</phrase>
server from one patch level to the other (SP migration) or from one version to the next.
This works for migrating <phrase><phrase>SUSE</phrase> Manager</phrase> server 3.0 or version 3.1 to version <phrase>3.2</phrase>.</para>
<para>For migrating from version 2.1 to 3.0, see <xref linkend="bp.chap.mgr.migration"/>.</para>
</sect1>
<sect1 id="bp.sp.migration.sp"><title>Service Pack Migration</title><para>SUSE Manager utilizes <phrase>SUSE Linux Enterprise Server</phrase> 12 as its underlying operating system.
Therefore Service Pack migration (for example, from version 12 SP1 to 12 SP3) may be performed in the same way as a typical SLES migration.</para>
<warning>
<title>Upgrading PostgreSQL to Version 9.6 before Migrating to SLES12 SP3</title>
<para>Before migrating the underlying system to <phrase>SUSE Linux Enterprise</phrase>
12 SP3 you must upgrade PostgreSQL to version 9.6.</para>
<para>The migration needs PostgreSQL 9.4 and 9.6 installed in parallel and PostgreSQL 9.4 is only available in SLES 12 SP2.
For more information, see <xref linkend="sp.migration.postgresql"/>.</para>
</warning>
<para><phrase>SUSE</phrase> offers a graphical and command line tool for upgrading to a new service pack.
Comprehensive documentation for executing service pack migration scenarios is located in the <phrase>SUSE Linux Enterprise Server</phrase> documentation chapter <ulink url="https://www.suse.com/documentation/sles-12/book_sle_deployment/data/cha_update_sle.html">https://www.suse.com/documentation/sles-12/book_sle_deployment/data/cha_update_sle.html</ulink>.</para>
</sect1>
<sect1 id="sp.migration.postgresql"><title>Upgrading PostgreSQL to Version 9.6</title><warning>
<title>Migrating to SLES 12 SP3</title>
<para><phrase><phrase>SUSE</phrase> Manager</phrase>
Server 3.1 must <emphasis>not</emphasis> be migrated to SLES 12 SP3 before upgrading PostgreSQL to version 9.6.</para>
</warning>
<para>The upgrade needs PostgreSQL 9.4 and 9.6 installed in parallel.
PostgreSQL 9.4 is only available in SLES 12 SP2.</para>
<para>Before starting the update, prepare an up-to-date backup of your database.</para>
<para>On existing installations of <phrase><phrase>SUSE</phrase> Manager</phrase> Server 3.1 you must run to migrate from PostgreSQL 9.4 to version 9.6.</para>
<screen>/usr/lib/susemanager/bin/pg-migrate.sh</screen>
<para>During the upgrade your <phrase><phrase>SUSE</phrase> Manager</phrase> Server will not be accessible.</para>
<para>The upgrade will create a copy of the database under <filename>/var/lib/pgsql</filename> and thus needs sufficient disk space to hold two copies (9.4 and 9.6) of the database.
Because it does a full copy of the database, it also needs considerable time depending on the size of the database and the IO speed of the storage system.</para>
<para>If your system is short on disk space you can do an fast, in-place upgrade by running</para>
<screen>/usr/lib/susemanager/bin/pg-migrate.sh fast</screen>
<para>The fast upgrade usually only takes minutes and no additional disk space.
However, in case of failure you need to restore the database from a backup.</para>
<para>For more information, see <ulink url="https://wiki.microfocus.com/index.php?title=SUSE_Manager/postgresql96">https://wiki.microfocus.com/index.php?title=SUSE_Manager/postgresql96</ulink>.</para>
</sect1>
<sect1 id="update.suse.manager"><title>Updating SUSE Manager</title><para>This section provides information on performing regular updates and running a <command>spacewalk-schema-upgrade</command> on your postgresql database.</para>
<orderedlist numeration="arabic">
<title>Procedure: Updating SUSE Manager</title>
<listitem>
<para>As the <systemitem class="username">root</systemitem> user stop Spacewalk services:</para>
<screen>spacewalk-service stop</screen>
</listitem>
<listitem>
<para>Apply latest patches with:</para>
<screen>zypper patch</screen>
</listitem>
<listitem>
<para>You will be informed if a new database schema was included in the latest patch. Ensure the database is started with:</para>
<screen>rcpostgresql start</screen>
</listitem>
<listitem>
<para>Perform the upgrade with:</para>
<screen>spacewalk-schema-upgrade</screen>
</listitem>
<listitem>
<para>Start Spacewalk services again with:</para>
<screen>spacewalk-service start</screen>
<important>
<title>Restart of Services and Applications</title>
<para>Services affected by a package update are not automatically restarted after an update.
You need to restart these services manually to avoid potential failures.</para>
<para>You may use <command>zypper ps</command> to check for any applications which may be using old code.
Restart these applications.</para>
</important>
</listitem>
</orderedlist>
</sect1>
<sect1 id="bp.sp.migration.version"><title>Migrating SUSE Manager version 3.0 to 3.1</title><para>The migration can either be done with the Online Migration tool (YaST) or with the Zypper command line tool.</para>
<note>
<title>Reduce Installation Size</title>
<para>When performing the migration, YaST will install all recommended packages.
Especially in the case of custom minimal installations, this may increase the installation size of the system significantly.</para>
<para>To change this default behavior and allow only required packages, adjust <filename>/etc/zypp/zypp.conf</filename> and set the following variable:</para>
<screen>solver.onlyRequires = true
installRecommends=false # or commented</screen>
<para>This changes the behavior of all package operations, such as the installation of patches or new packages.</para>
</note>
<sect2 id="bp.sp.migration.version.yast"><title>Using YaST</title><warning>
<title>Checking PostgreSQL Version</title>
<para>Before migrating to SLES 12 SP3, check whether PostgreSQL is already updated to version 9.6.
For more information, see <xref linkend="sp.migration.postgresql"/>.</para>
</warning>
<para>To perform the migration with YaST, use the <guimenu>Online Migration</guimenu> tool:</para>
<orderedlist numeration="arabic">
<title>Procedure: Migrating using YaST</title>
<listitem>
<para>If you are logged into a GNOME session running on the machine you are going to update, switch to a text console.
Running the update from within a GNOME session is not recommended.
This does not apply when being logged in from a remote machine (unless you are running a VNC session with GNOME).</para>
</listitem>
<listitem>
<para>Start in YaST<menuchoice><guimenu>System</guimenu> <guimenu>Online Migration</guimenu></menuchoice> (<command>yast2 migration</command>).
{yast} will show possible migration targets with detailed summaries.</para>
<para>In case of trouble, resolve the following issues first:</para>
<itemizedlist>
<listitem>
<para>If the <guimenu>Online Migration</guimenu> is not available, install the <systemitem class="resource">yast2-migration</systemitem> package and its dependencies.
Restart YaST , otherwise the newly installed module will not be shown in the control center.</para>
</listitem>
<listitem>
<para>If there are <quote>old</quote> online updates available for installation, the migration tool will warn and ask to install them now before starting the actual migration.
It is recommended to install all updates before proceeding.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>If more than one migration target is available for your system, select one from the list.
In case you are still on <phrase>SUSE Linux Enterprise Server</phrase> 12 SP1 or SP2, SLES 12 will be upgraded to SP2 or SP3, while selecting <guimenu>SUSE Manager Server 3.1</guimenu> as a migration target.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>yast migration target31</phrase></textobject><imageobject>
<imagedata fileref="yast_migration_target31.png" width="90%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>Update the <phrase><phrase>SUSE</phrase> Manager</phrase> database schema (<command>spacewalk-schema-upgrade</command>).</para>
</listitem>
<listitem>
<para>Make sure <phrase><phrase>SUSE</phrase> Manager</phrase> is up and running (<command>spacewalk-service start</command>).</para>
</listitem>
</orderedlist>
<para>After finishing the migration procedure <phrase><phrase>SUSE</phrase> Manager</phrase> 3.1 on <phrase>SUSE Linux Enterprise Server</phrase> 12 (SP2 or) SP3 is available to be used.</para>
</sect2>
<sect2 id="bp.sp.migration.version.zypper"><title>Using zypper</title><warning>
<title>Checking PostgreSQL Version</title>
<para>Before migrating to SLES 12 SP3, check whether PostgreSQL is already updated to version 9.6.
For more information, see <xref linkend="sp.migration.postgresql"/>.</para>
</warning>
<para>To perform the migration with Zypper on the command-line, use the <command>zypper migration</command> subcommand tool:</para>
<orderedlist numeration="arabic">
<title>Procedure: Migrating using zypper migration</title>
<listitem>
<para>If you are logged into a GNOME session running on the machine you are going to update, switch to a text console.
Running the update from within a GNOME session is not recommended.
This does not apply when being logged in from a remote machine (unless you are running a VNC session with GNOME).</para>
</listitem>
<listitem>
<para>The <command>zypper migration</command> subcommand show possible migration targets and a summary:</para>
<screen># zypper migration
Executing 'zypper  refresh'

Repository 'SLES12-SP1 12.1-0' is up to date.
Repository 'SLES12-SP1-Pool' is up to date.
Repository 'SLES12-SP1-Updates' is up to date.
Repository 'SUSE-Manager-Server-3.0-Pool' is up to date.
Repository 'SUSE-Manager-Server-3.0-Updates' is up to date.
All repositories have been refreshed.

Executing 'zypper  --no-refresh patch-check --updatestack-only'

Loading repository data...
Reading installed packages...
0 patches needed (0 security patches)

Available migrations:

    1 | SUSE Linux Enterprise Server 12 SP3 x86_64
        SUSE Manager Server 3.1 x86_64

    2 | SUSE Linux Enterprise Server 12 SP3 x86_64
        SUSE Manager Server 3.0 x86_64 (already installed)

    3 | SUSE Linux Enterprise Server 12 SP2 x86_64
        SUSE Manager Server 3.1 x86_64

    4 | SUSE Linux Enterprise Server 12 SP2 x86_64
        SUSE Manager Server 3.0 x86_64 (already installed)</screen>
<para>In case of trouble, resolve the following issues first:</para>
<itemizedlist>
<listitem>
<para>If the <command>migration</command> subcommand is not available install the <systemitem class="resource">zypper-migration-plugin</systemitem> package and its dependencies.</para>
</listitem>
<listitem>
<para>If there are <quote>old</quote> online updates available for installation, the migration tool will warn and ask to install them now before starting the actual migration.
It is recommended to install all updates before proceeding.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>If more than one migration target is available for your system, select one from the list (specify the number).
In case you are still on <phrase>SUSE Linux Enterprise Server</phrase> 12 SP1 or SP2, SLES 12 will be upgraded to (SP2 or) SP3, while selecting <guimenu>SUSE Manager Server 3.1</guimenu> as a migration target.</para>
</listitem>
<listitem>
<para>Read the notification and update the <phrase><phrase>SUSE</phrase> Manager</phrase> database schema as described (<command>spacewalk-schema-upgrade</command>).</para>
</listitem>
<listitem>
<para>Make sure <phrase><phrase>SUSE</phrase> Manager</phrase> is up and running (<command>spacewalk-service start</command>).</para>
</listitem>
</orderedlist>
<para>After finishing the migration procedure <phrase><phrase>SUSE</phrase> Manager</phrase> 3.1 on <phrase>SUSE Linux Enterprise Server</phrase> 12 (SP2 or) SP3 is available to be used.</para>
</sect2>
</sect1>
</chapter>
<chapter id="bp.chap.mgr.migration"><title>SUSE Manager Migration from Version 2.1 to Version 3</title><para>The migration from <phrase><phrase>SUSE</phrase> Manager</phrase>
 2.1 to <phrase><phrase>SUSE</phrase> Manager</phrase>
 3 works quite the same as a migration from Red Hat Satellite to <phrase><phrase>SUSE</phrase> Manager</phrase>
.
The migration happens from the original machine to a new one.
There is no in-place migration.
While this has the drawback that you temporarily need two machines, it also has the advantage that the original machine will remain fully functional in case something goes wrong.</para>
<important>
<title>Migration Process</title>
<para>The whole process may be tricky, so it is strongly advised that the migration is done by an experienced consultant.</para>
</important>
<para>Given the complexity of the product, the migration is an <quote>all-or-nothing</quote>
 procedure—
if something goes wrong you will need to start all over.
Error handling is very limited.
Nevertheless it should work more or less out of the box if all the steps are carefully executed as documented.</para>
<note>
<title>Time-Consuming Operation</title>
<para>The migration involves dumping the whole database on the source machine and restoring it on the target machine.
Also all of the channels and packages need to be copied to the new machine, so expect the whole migration to take several hours,</para>
</note>
<sect1 id="bp.sec.mgr.migration.prereq"><title>Prerequisites</title><warning>
<title>Latest Updates</title>
<para>The source machine needs to run <phrase><phrase>SUSE</phrase> Manager</phrase>
 2.1 with all the latest updates applied.
Before starting the migration process, make sure that the machine is up to date and all updates have been installed sucessfully.</para>
</warning>
<para>Only machines running with the embedded PostgreSQL database may be migrated in one go.
For the migration of an Oracle based installation, a two-step migration is required: First the installation needs to get migrated from Oracle to PostgreSQL (by means of a separate tool) and afterwards the migration to <phrase><phrase>SUSE</phrase> Manager</phrase>
 3 can be performed as documented here.</para>
<para><phrase><phrase>SUSE</phrase> Manager</phrase>
 3 does no longer support <phrase>Novell Customer Center</phrase>
but only SCC (<phrase>SUSE Customer Center</phrase>
). Therefore, you can migrate a machine only after it has been switched to SCC.
The migration script will check if the installation has already been switched to SCC and will terminate if this is not the case.
Switch to SCC on the source machine and repeat the migration.
During migration the database from the source machine needs to get dumped and this dump needs to be temporarily stored on the target system.
The dump gets compressed with <command>gzip</command> using the default compression options (maximum compression only yields about 10% of space savings but costs a lot of runtime); so check the disk usage of the database with:</para>
<screen>{prompt.root}du -sch /var/lib/pgsql/data</screen>
<para>This will ensure that you have at least 30 % of this value available in <filename>/var/spacewalk/tmp</filename>
.</para>
<para>These values from a test migration should aid in illustrating space requirements:</para>
<screen>suma21:/var/lib/pgsql# du -sch data
1,8G    data
1,8G    total
suma21:/var/spacewalk/tmp# ls -lh susemanager.dmp.gz
-rw-r--r-- 1 root root 506M Jan 12 14:58 susemanager.dmp.gz</screen>
<para>This is a small test installation; for bigger installations the ratio might be better (space required for the database dump might be less than 30%). The dump will be written to the directory <filename>/var/spacewalk/tmp</filename>
, the directory will be created if it does not exist yet.
If you want the dump to be stored somewhere else, change the definition of the variable <varname>$TMPDIR</varname> on the beginning of the script to suit your needs.</para>
</sect1>
<sect1 id="bp.sec.mgr.migration.setup.target"><title>Setup the Target Machine</title><para>To prepare the target machine (with the example host name <literal>suma30</literal>) proceed as follows:</para>
<orderedlist id="proc.mgr.migration.setup.target" numeration="arabic">
<title>Procedure: Setup Target Machine</title>
<listitem>
<para>On the target machine install <phrase>SUSE Linux Enterprise Server</phrase> 12 SP2 including the extension product <quote><phrase><phrase>SUSE</phrase> Manager</phrase></quote> .</para>
<important>
<title>Background Information on Required Target Machine</title>
<para>It is actually required to install version 12 SP2 on the target machine.
On that version you will upgrade the PostgreSQL database from version_9.4 to 9.6.
For more information about the PostgreSQL upgrade, see <xref linkend="sp.migration.postgresql"/>.</para>
</important>
</listitem>
<listitem>
<para>Initiate <command>yast2 susemanagersetup</command> as you would normally do for an installation of <phrase><phrase>SUSE</phrase> Manager</phrase> .</para>
<para>For more information about installing <phrase><phrase>SUSE</phrase> Manager</phrase>
, see <xref linkend="sles.installation.within.kvm.jeos"/>.</para>
</listitem>
<listitem>
<para>On the first <phrase><phrase>SUSE</phrase> Manager</phrase> setup screen, ensure that <guimenu>Migrate a SUSE Manager compatible server</guimenu> is marked instead of <guimenu>Set up SUSE Manager from scratch</guimenu> .</para>
</listitem>
<listitem>
<para>On the second screen, enter the name of the source system as <guimenu>Hostname of source SUSE Manager Server</guimenu> as well as the domain name. Also enter the database credentials of the source system.</para>
</listitem>
<listitem>
<para>On the next screen, you will need to specify the IP address of the <phrase><phrase>SUSE</phrase> Manager</phrase> 3 target system. Normally this value should be pre-set to the correct value and you only should need to press <keycap>Enter</keycap> . Only in the case of multiple IP addresses you might need to specify the one that should be used during migration.</para>
<important>
<title>Faking the Host Name</title>
<para>During the migration process, the target system will fake its host name to be the same as the source system, this is necessary as the host name of a <phrase><phrase>SUSE</phrase> Manager</phrase>
installation is vital and should not be changed once set.
Therefore do not be confused when logging in to your systems during migration; they both will present you with the same host name.</para>
</important>
</listitem>
<listitem>
<para>Continue by following the normal installation steps.</para>
<important>
<title>Database Parameters</title>
<para>Specify the database parameters using the same database parameters as the source system is recommended.
At least, using the the same database credentials as when creating the source or original <phrase><phrase>SUSE</phrase> Manager</phrase>
database is mandatory.</para>
</important>
<para>Enter your SCC credentials.
After all the data has been gathered, YaST
will terminate.</para>
</listitem>
</orderedlist>
<para>The actual migration will not start automatically but needs to be triggered manually as outlined in <xref linkend="bp.sec.mgr.migration.performing"/>.</para>
</sect1>
<sect1 id="bp.sec.mgr.migration.performing"><title>Performing the Migration</title><para>A migration is performed by excecuting the following command:</para>
<screen>/usr/lib/susemanager/bin/mgr-setup -m</screen>
<para>This command reads the data gathered during <xref linkend="proc.mgr.migration.setup.target"/>, sets up <phrase><phrase>SUSE</phrase> Manager</phrase>
 onto a new target machine and transfers all of the data from the source machine.
As several operations need to be performed on the source machine via SSH, you will be prompted once for the root password of the source machine.
A temporary SSH key named <literal>migration-key</literal> is created and installed on the source machine, so you need to give the <systemitem class="username">root</systemitem>
 password only once.
The temporary SSH key will be deleted after successful migration.
Ideally, this is all you will need to do.</para>
<para>Depending on the size of the installation, the actual migration will take up to several hours.
Once finished, you will be prompted to shutdown the source machine, re-configure the network of the target machine to use the same IP address and host name as the original machine and restart it.
It should now be a fully functional replacement for your previous <phrase><phrase>SUSE</phrase> Manager</phrase>
 2.1 installation.
The following numbers illustrate the runtime for dumping and importing a small database:</para>
<screen>14:53:37   Dumping remote database to /var/spacewalk/tmp/susemanager.dmp.gz on target system. Please wait...
14:58:14   Database successfully dumped. Size is: 506M
14:58:29   Importing database dump. Please wait...
15:05:11   Database dump successfully imported.</screen>
<para>For this example dumping the database takes around five minutes to complete.
Importing the dump onto the target system will take an additional seven minutes.
For big installations this can take up to several hours.
You should also account for the time it takes to copy all the package data to the new machine.
Depending on your network infrastructure and hardware, this can also take a significant amount of time.</para>
</sect1>
<sect1 id="bp.sec.mgr.migration.speedup"><title>Speeding up the Migration</title><para>A complete migration can consume a lot of time.
This is caused by the amount of data that must be copied.
Total migration time can be greatly decreased by eliminating the need to copy data prior to performing the migration (for example, channels, packages, auto-install images, and any additional data). You can gather all data via YaST
by running the command <command>mgr-setup -r</command>.</para>
<para>Executing <command>mgr-setup -r</command> will copy the data from the old server to the new one.
This command may be run at any time and your current server will remain fully functional.
Once the migration has been initiated only data changed since running <command>mgr-setup -r</command> will need to be transferred which will significantly reduces downtime.</para>
<para>On large installations transfering the database (which involves dumping the database onto the source machine and then importing the dump onto the target system) will still take some time.
During the database transfer no write operations should occurr therefore the migration script will shutdown running <phrase><phrase>SUSE</phrase> Manager</phrase>
database services running on the source machine.</para>
</sect1>
<sect1 id="bp.sec.mgr.migration.pkg.extern"><title>Packages on External Storage</title><para>Some installations may store the package data on external storage (for example, NFS mount on <filename>/var/spacewalk/packages</filename>
). You do not need to copy this data to the new machine.
Edit the script located in <filename>/usr/lib/susemanager/bin/mgr-setup</filename>
 and remove the respective <command>rsync</command> command (located around line 345).</para>
<important>
<title>Mounting External Storage</title>
<para>Make sure your external storage is mounted on the new machine before starting the system for the first time.
Analogue handling for <filename>/srv/www/htdocs/pub</filename>
 if appropriate.</para>
<para>In general, all needed files and directories, not copied by the migration tool, should be copied to the new server manually.</para>
</important>
</sect1>
<sect1 id="bp.sec.mgr.migration.trouble"><title>Troubleshooting a Broken Web UI after Migration</title><para>It is possible that the Web UI
may break during migration.
This behavior is not a bug, but a browser caching issue.
The new machine has the same host name and IP address as the old machine.
This duplication can confuse some Web browsers.
If you experience this issue reload the page.
For example, in Firefox pressing the key combination <keycombo><keycap>Ctrl</keycap><keycap>F5</keycap></keycombo>
 should resume normal functionality.</para>
</sect1>
<sect1 id="bp.sec.mgr.migration.example"><title>Example Session</title><para>This is the output of a typical migration:</para>
<screen>suma30# /usr/lib/susemanager/bin/mgr-setup -m
  Filesystem type for /var/spacewalk is ext4 - ok.
  Open needed firewall ports...
  Migration needs to execute several commands on the remote machine.
  Please enter the root password of the remote machine.
Password:
  Remote machine is SUSE Manager
  Remote system is already migrated to SCC. Good.
  Shutting down remote spacewalk services...
  Shutting down spacewalk services...
  Stopping Taskomatic...
  Stopped Taskomatic.
  Stopping cobbler daemon: ..done

  Stopping rhn-search...
  Stopped rhn-search.
  Stopping MonitoringScout ...
  [ OK ]
  Stopping Monitoring ...
  [ OK ]
  Shutting down osa-dispatcher: ..done
  Shutting down httpd2 (waiting for all children to terminate) ..done
  Shutting down Tomcat (/usr/share/tomcat6)
  ..done
  Terminating jabberd processes...
        Stopping router ..done
        Stopping sm ..done
        Stopping c2s ..done
        Stopping s2s ..done
  Done.
  CREATE ROLE
  * Loading answer file: /root/spacewalk-answers.
  ** Database: Setting up database connection for PostgreSQL backend.
  ** Database: Populating database.
  ** Database: Skipping database population.
  * Configuring tomcat.
  * Setting up users and groups.
  ** GPG: Initializing GPG and importing key.
  * Performing initial configuration.
  * Configuring apache SSL virtual host.
  ** /etc/apache2/vhosts.d/vhost-ssl.conf has been backed up to vhost-ssl.conf-swsave
  * Configuring jabberd.
  * Creating SSL certificates.
  ** Skipping SSL certificate generation.
  * Deploying configuration files.
  * Setting up Cobbler..
  * Setting up Salt Master.
  11:26:47   Dumping remote database. Please wait...
  11:26:50   Database successfully dumped.
  Copy remote database dump to local machine...
  Delete remote database dump...
  11:26:50   Importing database dump. Please wait...
  11:28:55   Database dump successfully imported.
  Schema upgrade: [susemanager-schema-2.1.50.14-3.2.devel21] -&gt; [susemanager-schema-3.0.5-5.1.develHead]
  Searching for upgrade path to: [susemanager-schema-3.0.5-5.1]
  Searching for upgrade path to: [susemanager-schema-3.0.5]
  Searching for upgrade path to: [susemanager-schema-3.0]
  Searching for start path:  [susemanager-schema-2.1.50.14-3.2]
  Searching for start path:  [susemanager-schema-2.1.50.14]
  The path: [susemanager-schema-2.1.50.14] -&gt; [susemanager-schema-2.1.50.15] -&gt; [susemanager-schema-2.1.51] -&gt; [susemanager-schema-3.0]
  Planning to run schema upgrade with dir '/var/log/spacewalk/schema-upgrade/schema-from-20160112-112856'
  Executing spacewalk-sql, the log is in [/var/log/spacewalk/schema-upgrade/schema-from-20160112-112856-to-susemanager-schema-3.0.log].
(248/248) apply upgrade [schema-from-20160112-112856/99_9999-upgrade-end.sql]        e-suse-channels-to-public-channel-family.sql.postgresql]
  The database schema was upgraded to version [susemanager-schema-3.0.5-5.1.develHead].
  Copy files from old SUSE Manager...
  receiving incremental file list
  ./
  packages/

  sent 18 bytes  received 66 bytes  168.00 bytes/sec
  total size is 0  speedup is 0.00
  receiving incremental file list
  ./
  RHN-ORG-TRUSTED-SSL-CERT
  res.key
  rhn-org-trusted-ssl-cert-1.0-1.noarch.rpm
  suse-307E3D54.key
  suse-39DB7C82.key
  suse-9C800ACA.key
  bootstrap/
  bootstrap/bootstrap.sh
  bootstrap/client-config-overrides.txt
  bootstrap/sm-client-tools.rpm

  sent 189 bytes  received 66,701 bytes  44,593.33 bytes/sec
  total size is 72,427  speedup is 1.08
  receiving incremental file list
  ./
  .mtime
  lock
  web.ss
  config/
  config/distros.d/
  config/images.d/
  config/profiles.d/
  config/repos.d/
  config/systems.d/
  kickstarts/
  kickstarts/autoyast_sample.xml
  loaders/
  snippets/
  triggers/
  triggers/add/
  triggers/add/distro/
  triggers/add/distro/post/
  triggers/add/distro/pre/
  triggers/add/profile/
  triggers/add/profile/post/
  triggers/add/profile/pre/
  triggers/add/repo/
  triggers/add/repo/post/
  triggers/add/repo/pre/
  triggers/add/system/
  triggers/add/system/post/
  triggers/add/system/pre/
  triggers/change/
  triggers/delete/
  triggers/delete/distro/
  triggers/delete/distro/post/
  triggers/delete/distro/pre/
  triggers/delete/profile/
  triggers/delete/profile/post/
  triggers/delete/profile/pre/
  triggers/delete/repo/
  triggers/delete/repo/post/
  triggers/delete/repo/pre/
  triggers/delete/system/
  triggers/delete/system/post/
  triggers/delete/system/pre/
  triggers/install/
  triggers/install/post/
  triggers/install/pre/
  triggers/sync/
  triggers/sync/post/
  triggers/sync/pre/

  sent 262 bytes  received 3,446 bytes  7,416.00 bytes/sec
  total size is 70,742  speedup is 19.08
  receiving incremental file list
  kickstarts/
  kickstarts/snippets/
  kickstarts/snippets/default_motd
  kickstarts/snippets/keep_system_id
  kickstarts/snippets/post_delete_system
  kickstarts/snippets/post_reactivation_key
  kickstarts/snippets/redhat_register
  kickstarts/snippets/sles_no_signature_checks
  kickstarts/snippets/sles_register
  kickstarts/snippets/sles_register_script
  kickstarts/snippets/wait_for_networkmanager_script
  kickstarts/upload/
  kickstarts/wizard/

  sent 324 bytes  received 1,063 bytes  2,774.00 bytes/sec
  total size is 12,133  speedup is 8.75
  receiving incremental file list
  ssl-build/
  ssl-build/RHN-ORG-PRIVATE-SSL-KEY
  ssl-build/RHN-ORG-TRUSTED-SSL-CERT
  ssl-build/index.txt
  ssl-build/index.txt.attr
  ssl-build/latest.txt
  ssl-build/rhn-ca-openssl.cnf
  ssl-build/rhn-ca-openssl.cnf.1
  ssl-build/rhn-org-trusted-ssl-cert-1.0-1.noarch.rpm
  ssl-build/rhn-org-trusted-ssl-cert-1.0-1.src.rpm
  ssl-build/serial
  ssl-build/d248/
  ssl-build/d248/latest.txt
  ssl-build/d248/rhn-org-httpd-ssl-archive-d248-1.0-1.tar
  ssl-build/d248/rhn-org-httpd-ssl-key-pair-d248-1.0-1.noarch.rpm
  ssl-build/d248/rhn-org-httpd-ssl-key-pair-d248-1.0-1.src.rpm
  ssl-build/d248/rhn-server-openssl.cnf
  ssl-build/d248/server.crt
  ssl-build/d248/server.csr
  ssl-build/d248/server.key
  ssl-build/d248/server.pem

  sent 380 bytes  received 50,377 bytes  101,514.00 bytes/sec
  total size is 90,001  speedup is 1.77
  SUSE Manager Database Control. Version 1.5.2
  Copyright (c) 2012 by SUSE Linux Products GmbH

  INFO: Database configuration has been changed.
  INFO: Wrote new general configuration. Backup as /var/lib/pgsql/data/postgresql.2016-01-12-11-29-42.conf
  INFO: Wrote new client auth configuration. Backup as /var/lib/pgsql/data/pg_hba.2016-01-12-11-29-42.conf
  INFO: New configuration has been applied.
  Database is online
  System check finished

  ============================================================================
  Migration complete.
  Please shut down the old SUSE Manager server now.
  Reboot the new server and make sure it uses the same IP address and hostname
  as the old SUSE Manager server!

  IMPORTANT: Make sure, if applicable, that your external storage is mounted
  in the new server as well as the ISO images needed for distributions before
  rebooting the new server!
  ============================================================================</screen>
</sect1>
</chapter>
<chapter id="bp.client.migration"><title>Client Migration</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> supports you with upgrading SLE clients to the latest version or SP (service pack).
Upgrading from SLE 12, SLE 12 SP1, or SP2 to SLE 12 SP3 or later (when available) is straight forward.
Upgrading from SLE 11 SPx to SLE 12 SP3 or later (when available) requires some additional steps, but can be automated.</para>
<sect1 id="bp.client.migration.sle12"><title>Migrating SUSE Linux Enterprise Server  12 or later to version 12 SP3</title><para>Existing <phrase>SUSE Linux Enterprise Server</phrase>
 12 clients (SLE) may be upgraded to SP3 with the <guimenu>SP Migration</guimenu>
 procedure provided by the Web UI
.
The same applies for other supported products based on <phrase>SUSE Linux Enterprise</phrase>
 12.</para>
<warning>
<title>Synchronizing Target Channels</title>
<para>Before successfully initializing the product migration, you first must make sure that the migration target channels are completely mirrored.
For the upgrade to <phrase>SUSE Linux Enterprise</phrase>
 12 SP3, at least the <literal role="systemitem">SLES12-SP3-Pool</literal>
 base channel with the <literal role="systemitem">SLE-Manager-Tools12-Pool</literal>
 child channel for your architecture is required.
The matching update channels such as <literal role="systemitem">SLE-Manager-Tools12-Updates</literal>
 and <literal role="systemitem">SLES12-SP3-Updates</literal>
 are recommended.</para>
</warning>
<orderedlist numeration="arabic">
<title>Procedure: Migrating SUSE Linux Enterprise12 Client to SP3</title>
<listitem>
<para>Direct your browser to the <phrase><phrase>SUSE</phrase> Manager</phrase>{webui} where your client is registered, and login.</para>
</listitem>
<listitem>
<para>On the <menuchoice><guimenu>Systems</guimenu> <guimenu>All</guimenu></menuchoice> page select your client system from the table.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>sles old details page</phrase></textobject><imageobject>
<imagedata fileref="sles_old_details_page.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>If there are <guimenu>Software Updates Available</guimenu>
in the <guimenu>System Status</guimenu>
notification install these updates first to avoid trouble during the migration process.</para>
</listitem>
<listitem>
<para>On the system’s detail page select the <guimenu>Software</guimenu> tab, then the <guimenu>SP Migration</guimenu> tab.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>sles old details spmigration</phrase></textobject><imageobject>
<imagedata fileref="sles_old_details_spmigration.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>From this tab you will see the installed products listed on your client. Select the wanted <guimenu>Target Products</guimenu> (if there is more than one), which is <literal role="systemitem">SUSE Linux Enterprise Server 12 SP3</literal> .</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>sles migration target</phrase></textobject><imageobject>
<imagedata fileref="sles_migration_target.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Then confirm with <guimenu>Select Channels</guimenu>
.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>sles migration target</phrase></textobject><imageobject>
<imagedata fileref="sles_migration_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>Select <guimenu>Schedule Migration</guimenu> , and then <guimenu>Confirm</guimenu> .</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>sles migration schedule</phrase></textobject><imageobject>
<imagedata fileref="sles_migration_schedule.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
</orderedlist>
<para>Check the <guimenu>System Status</guimenu> on the system’s details when the migration is done.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>sles migrated</phrase></textobject><imageobject>
<imagedata fileref="sles_migrated.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>If the <guimenu>System Status</guimenu>
 notification does not report a successful migration but lists <guimenu>Software Updates Available</guimenu>
, install the update now and then check again.</para>
<para>Finally, consider to schedule a reboot.</para>
</sect1>
<sect1 id="bp.client.migration.sle11"><title>Migrating SUSE Linux Enterprise  11 SPx to version 12 SP3</title><para><phrase>SUSE Linux Enterprise</phrase>
 11 SPx clients may be auto-upgraded to version 12 SP3 by means of YaST
auto-installation.
The same applies for other supported products based on <phrase>SUSE Linux Enterprise</phrase>
 11.</para>
<note>
<title>Supported Upgrade Paths</title>
<para>For generally supported <phrase>SUSE Linux Enterprise</phrase>
upgrade paths, see the SLE{deploy}
, chapter <quote>Supported Upgrade Paths to SLE 12
    SP3</quote>
: <ulink url="https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_update_sle_paths.html">https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_update_sle_paths.html</ulink>.</para>
<para>As you can see, it is especially important that you migrate the client to the latest available SP first (December 2017: Version 11 SP4).</para>
</note>
<para>This procedure will work for <quote>traditionally</quote>
 managed systems (system type <literal>management</literal>).  Using Salt it will not be available (system type <literal>salt</literal>).</para>
<para>During the procedure, the machine reboots and performs the system upgrade.
The process is controlled by YaST
and AutoYaST
, not by plain <command>zypper</command> commands.</para>
<important>
<para>Only perform this migration on client systems managed by <phrase><phrase>SUSE</phrase> Manager</phrase>
servers.
For upgrading the <phrase><phrase>SUSE</phrase> Manager</phrase>
server itself, see <xref linkend="bp.sp.migration"/>.
This is a viable method for major version upgrades such as an upgrade from <phrase>SUSE Linux Enterprise</phrase>
 11 to 12.</para>
</important>
<para>Perform the following steps:</para>
<note id="bp.proc.client.migration.sle11.prep">
<title>Procedure: System Upgrade Preparation</title>
<para>Make sure your <phrase><phrase>SUSE</phrase> Manager</phrase>
and all the clients you want to upgrade have installed all available updates, including the <phrase><phrase>SUSE</phrase> Manager</phrase>
tools.
This is absolutely necessary, otherwise the system upgrade will fail.</para>
</note>
<para>+</para>
<orderedlist numeration="arabic">
<listitem>
<para>On the <phrase><phrase>SUSE</phrase> Manager</phrase> server, create a local tree with the SLES 12 SP3 installation sources. This is needed for booting the clients into the installation or upgrade scenario. For example, download the ISO image of the DVD1 with the installation sources and mount the ISO image as <filename>/mnt/sles12-sp3</filename> :</para>
<screen>mkdir /mnt/sles12-sp3
mount -o loop`DVD1`.iso /mnt/sles12-sp3</screen>
</listitem>
<listitem>
<para>Create an auto-installation distribution: For all distributions you want to perform a system upgrade, you need to create a SLE 12 SP3 distribution in <phrase><phrase>SUSE</phrase> Manager</phrase> . Use the following steps to create one:</para>
<itemizedlist>
<listitem>
<para>In the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface, click <menuchoice><guimenu>Systems</guimenu> <guimenu>Autoinstallation</guimenu> <guimenu>Distributions</guimenu></menuchoice> .</para>
</listitem>
<listitem>
<para>Enter a <guimenu>Distribution Label</guimenu> for your distribution (for example, use <literal>summer2017</literal>) as a label and specify the <guimenu>Tree Path</guimenu> , which is the root directory of the <phrase>SUSE Linux Enterprise Server</phrase> 12 SP3 installation sources (for example, in this case <filename>/mnt/sles12-sp3</filename> ). As the <guimenu>Base Channel</guimenu> use the update target distribution <quote>SLES12-SP3-Pool for x86_64</quote> .</para>
</listitem>
<listitem>
<para>Confirm with <guimenu>Create Autoinstallable Distribution</guimenu> .</para>
</listitem>
</itemizedlist>
<para>For more information about Autoinstallation, see <xref linkend="ref.webui.systems.autoinst"/>.</para>
</listitem>
<listitem>
<para>Create an activation key for your SLE 12 SP3 systems.</para>
<para>In order to switch from the old SLES 11 base channel to the new SLE 12 SP3 base channel, you need an activation key.
Use the following steps to create it:</para>
<itemizedlist>
<listitem>
<para>Go to <menuchoice><guimenu>Systems</guimenu> <guimenu>Activation Keys</guimenu></menuchoice> and click <guimenu>Create Key</guimenu> .</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<itemizedlist id="st.maintenance-migration.activationkey">
<listitem>
<para>Enter a description for your key.</para>
</listitem>
<listitem>
<para>Enter a key or leave it blank to generate an automatic key.</para>
</listitem>
<listitem>
<para>If you want to limit the usage, enter your value in the <guimenu>Usage</guimenu> text field.</para>
</listitem>
<listitem>
<para>Select the <quote>SLES12-SP3-Pool for x86_64</quote> base channel.</para>
</listitem>
<listitem>
<para>Decide about <guimenu>Add-On System Types</guimenu> .</para>
</listitem>
<listitem>
<para>Click <guimenu>Create Activation Key</guimenu> .</para>
</listitem>
<listitem>
<para>Click the <guimenu>Child Channels</guimenu> tab and select the required channels. Finish with <guimenu>Update Key</guimenu> .</para>
<orderedlist id="st.maintenance-migration.upload" numeration="arabic">
<listitem>
<para>Upload an AutoYaST profile.</para>
</listitem>
</orderedlist>
</listitem>
<listitem>
<para>Create an AutoYaST XML file according to <xref linkend="ap-sample-autoinst-system-upgrade"/>.</para>
<para>For more information about AutoYaST
, see <xref linkend="ref.webui.systems.autoinst.ay_intro"/>.</para>
</listitem>
<listitem>
<para>Go to <menuchoice><guimenu>Systems</guimenu> <guimenu>Autoinstallation</guimenu></menuchoice> and click <guimenu>Upload Kickstart/Autoyast File</guimenu> .</para>
</listitem>
<listitem>
<para>Paste the XML content in the text area or select the file to upload. Click <guimenu>Create</guimenu> .</para>
</listitem>
<listitem>
<para>Add <literal>autoupgrade=1</literal> in the <guimenu>Kernel Options</guimenu> of the <guimenu>Details</guimenu> tab and click <guimenu>Update</guimenu> .</para>
</listitem>
<listitem>
<para>Switch to the <guimenu>Variable</guimenu> tab.</para>
</listitem>
<listitem>
<para>Enter in the text field <literal>registration_key=</literal> and the key from <xref linkend="st.maintenance-migration.activationkey"/>.</para>
</listitem>
<listitem>
<para>Click <guimenu>Update Variables</guimenu> .</para>
</listitem>
</itemizedlist>
<para>After you have successfully finished the previous procedure, everything is prepared for an upgrade.
To upgrade a system, continue with <xref linkend="bp.proc.client.migration.sle11.upgrade"/>.</para>
<warning id="bp.proc.client.migration.sle11.upgrade">
<title>Synchronizing Target Channels</title>
<para>Before successfully initializing the product migration, make sure that the migration target channels are completely mirrored.
For the upgrade to <phrase>SUSE Linux Enterprise</phrase>
 12 SP3, at least the <literal role="systemitem">SLES12-SP3-Pool</literal>
 base channel with the <literal role="systemitem">SLE-Manager-Tools12-Pool</literal>
 child channel for your architecture is required.
The matching update channels such as <literal role="systemitem">SLE-Manager-Tools12-Updates</literal>
 and <literal role="systemitem">SLES12-SP3-Updates</literal>
 are recommended.</para>
</warning>
<para>For example, watch progress in <filename>/var/log/rhn/reposync/sles12-sp3-pool-x86_64.log</filename>
.</para>
<para>+</para>
<orderedlist numeration="arabic">
<listitem>
<para>Go to the system via <guimenu>Systems</guimenu> and click the name of the system. Then on the systems details page, click <menuchoice><guimenu>Provisioning</guimenu> <guimenu>Autoinstallation</guimenu> <guimenu>Schedule</guimenu></menuchoice> , and choose the AutoYaST XML profile you have uploaded in <xref linkend="bp.proc.client.migration.sle11.prep"/>, <xref linkend="st.maintenance-migration.upload"/>.</para>
</listitem>
<listitem>
<para>Click <guimenu>Schedule Autoinstallation and Finish</guimenu> .</para>
<para>Next time the machine asks the <phrase><phrase>SUSE</phrase> Manager</phrase>
server for jobs, it will receive a reinstallation job which fetches kernel and initrd and writes a new <filename>/boot/grub/menu.lst</filename>
(containing pointers to the new kernel and initrd).</para>
<para>When the machine boots, it will use the GRUB
configuration and boots the new kernel with its initrd.
No PXE boot is required for this process.
A shutdown of the machine is initiated as well, effectively 3 minutes after the job was fetched.</para>
</listitem>
</orderedlist>
</sect1>
</chapter>
<chapter id="ap-sample-autoinst-system-upgrade"><title>Sample Autoinstallation Script for System Upgrade (SLES 11 SP4 to SLES 12 SP3)</title><para><indexterm>
<primary>autoinstallation system upgrade</primary><secondary>sample file</secondary>
</indexterm>
<indexterm>
<primary>sample file</primary>
</indexterm></para>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns"
         xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;general&gt;
  $SNIPPET('spacewalk/sles_no_signature_checks')
    &lt;mode&gt;
      &lt;confirm config:type="boolean"&gt;false&lt;/confirm&gt;
    &lt;/mode&gt;
  &lt;/general&gt;
  &lt;add-on&gt;
    &lt;add_on_products config:type="list"&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sles12-sp3-updates-x86_64/summer2017&lt;/media_url&gt;
        &lt;name&gt;SLES12 SP3 Updates&lt;/name&gt;
        &lt;product&gt;SLES12-SP3&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sle-manager-tools12-pool-x86_64-sp3/summer2017&lt;/media_url&gt;
        &lt;name&gt;SLE12 SP3 Manager Tools Pool&lt;/name&gt;
        &lt;product&gt;SLES12-SP3&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sle-manager-tools12-updates-x86_64-sp3/summer2017&lt;/media_url&gt;
        &lt;name&gt;SLE12 SP3 Manager Tools Updates&lt;/name&gt;
        &lt;product&gt;SLES12-SP3&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
    &lt;/add_on_products&gt;
  &lt;/add-on&gt;
  &lt;upgrade&gt;
    &lt;only_installed_packages config:type="boolean"&gt;false&lt;/only_installed_packages&gt;
    &lt;stop_on_solver_conflict config:type="boolean"&gt;true&lt;/stop_on_solver_conflict&gt;
  &lt;/upgrade&gt;
  &lt;backup&gt;
    &lt;sysconfig config:type="boolean"&gt;true&lt;/sysconfig&gt;
    &lt;modified config:type="boolean"&gt;true&lt;/modified&gt;
    &lt;remove_old config:type="boolean"&gt;false&lt;/remove_old&gt;
  &lt;/backup&gt;
  &lt;networking&gt;
    &lt;keep_install_network config:type="boolean"&gt;true&lt;/keep_install_network&gt;
    &lt;start_immediately config:type="boolean"&gt;true&lt;/start_immediately&gt;
  &lt;/networking&gt;
   &lt;scripts&gt;
    &lt;init-scripts config:type="list"&gt;
      $SNIPPET('spacewalk/sles_register_script')
    &lt;/init-scripts&gt;
  &lt;/scripts&gt;
&lt;/profile&gt;</screen>
</chapter>
<chapter id="bp.postgresql.database.migration"><title>Postgresql Database Migration</title><abstract>
<para><phrase><phrase>SUSE</phrase> Manager</phrase>
3 uses postgresql database version 9.4.
postgresql version 9.6 has been officially released for SLES 12 SP3.
In the near future postgresql 9.6 will become the base version provided by <phrase><phrase>SUSE</phrase> Manager</phrase>
.
Currently version 9.4 is hardcoded into SUSE Manager, therefore when installing <phrase><phrase>SUSE</phrase> Manager</phrase>
it will explicitly use this version.
This chapter provides guidance on migrating an existing 9.4 database to 9.6 on your <phrase><phrase>SUSE</phrase> Manager</phrase>
Server.</para>
</abstract>
<sect1 id="bp.postgresql.database.migration.new.installations"><title>New SUSE Manager Installations</title><para>Once support for postgresql version 9.6 has been officially released for SUSE Manager, no action will be required for new installations.
The <phrase><phrase>SUSE</phrase> Manager</phrase>
extension will pick up the latest version during installation on SLES 12 SP3.
This will be fully transparent to the user.
Check the active postgresql version with the following command:</para>
<screen>suse-manager-example-srv:~ # psql --version
psql (PostgreSQL) 9.6.3</screen>
</sect1>
<sect1 id="bp.postgresql.database.migrating.existing.installations"><title>Migrating an Existing Installation</title><para>Before migrating to the new database version, ensure SUSE Manager is fully patched to the latest version.
You can check if the system is ready to use postgresql 9.6 by issuing the following command:</para>
<screen>suma-test-srv:~ # rpm -q smdba
smdba-1.5.8-0.2.3.1.x86_64</screen>
<important>
<para>Postgresql 9.6 requires smdba version 1.5.8 or higher</para>
</important>
<warning>
<para>Always create a database backup before performing a migration</para>
</warning>
<para>.
The database migration begins by executing the following command:</para>
<screen>$&gt; /usr/lib/susemanager/bin/pg-migrate.sh</screen>
<para>The <filename>pg-migrate.sh</filename>
 script will automatically perform the following operations:</para>
<itemizedlist>
<listitem>
<para>Stop spacewalk services</para>
</listitem>
<listitem>
<para>Shut down the running database</para>
</listitem>
<listitem>
<para>Check if postgresql 9.6 is installed and install it if not already present</para>
</listitem>
<listitem>
<para>Switch from postgresql 9.4 to postgresql 9.6 as the new default</para>
</listitem>
<listitem>
<para>Initiates the database migration</para>
</listitem>
<listitem>
<para>Creates a postgresql configuration file tuned for use by SUSE Manager (The reason for the latest version of smdba)</para>
</listitem>
<listitem>
<para>Start both the database and spacewalk services</para>
</listitem>
</itemizedlist>
<note>
<para>Please note that during the migration the data directory of the database is copied for use by the postgresql 9.6.
This results in temporarily doubling the amount of required disk space.
In case of a failure, the migration script will attempt a restore to the original state.
After a successful migration, you may safely delete the old database directory (renamed to /var/lib/pgsql/data-pg94) to reclaim lost disk space.</para>
</note>
</sect1>
<sect1 id="_performing_a_fast_migration"><title>Performing a Fast Migration</title><para>There are two negative aspects to performing a regular migration:</para>
<itemizedlist>
<listitem>
<para>You temporarily need double the disk space under <filename>/var/lib/pgsql</filename></para>
</listitem>
<listitem>
<para>Depending on the size of the database the migration can take up some time because the whole data directory needs to be copied.</para>
</listitem>
</itemizedlist>
<para>It is possible however to perform a <literal>fast migration</literal>.
In this case you do not need the additional disk space as the database files will not be copied but hard linked.
This also has the natural effect of greatly increasing the speed of the migration process The entire migration could be completed in less than one minute.</para>
<warning>
<para>Keep in mind if a fast migration fails, database restoration will only be possible with a database backup.
Only perform a fast migration if you have an availabel database backup.</para>
</warning>
<para>Perform a fast migration with the following command (Ensure you have a database backup):</para>
<screen>$&gt; /usr/lib/susemanager/bin/pg-migrate.sh fast</screen>
</sect1>
<sect1 id="_typical_migration_sample_session"><title>Typical Migration Sample Session</title><para>A slow migration should provide you with the following output:</para>
<screen>d235:~ # /usr/lib/susemanager/bin/pg-migrate.sh
15:58:00   Shut down spacewalk services...
Shutting down spacewalk services...
Done.
15:58:03   Checking postgresql version...
15:58:03   Installing postgresql 9.6...
Dienst 'SUSE_Linux_Enterprise_Server_12_SP2_x86_64' wird aktualisiert.
Dienst 'SUSE_Manager_Server_3.1_x86_64' wird aktualisiert.
Repository-Daten werden geladen...
Installierte Pakete werden gelesen...
Paketabhängigkeiten werden aufgelöst...

Die folgenden 3 NEUEN Pakete werden installiert:
  postgresql96 postgresql96-contrib postgresql96-server

3 neue Pakete zu installieren.
Gesamtgröße des Downloads: 5,7 MiB. Bereits im Cache gespeichert: 0 B. Nach der Operation werden zusätzlich 25,3 MiB belegt.
Fortfahren? [j/n/...? zeigt alle Optionen] (j): j
Paket postgresql96-9.6.3-2.4.x86_64 abrufen (1/3),   1,3 MiB (  5,1 MiB entpackt)
Abrufen: postgresql96-9.6.3-2.4.x86_64.rpm [fertig]
Paket postgresql96-server-9.6.3-2.4.x86_64 abrufen (2/3),   3,7 MiB ( 17,9 MiB entpackt)
Abrufen: postgresql96-server-9.6.3-2.4.x86_64.rpm [.fertig]
Paket postgresql96-contrib-9.6.3-2.4.x86_64 abrufen (3/3), 648,9 KiB (  2,2 MiB entpackt)
Abrufen: postgresql96-contrib-9.6.3-2.4.x86_64.rpm [fertig]
Überprüfung auf Dateikonflikte läuft: [......fertig]
(1/3) Installieren: postgresql96-9.6.3-2.4.x86_64 [............fertig]
(2/3) Installieren: postgresql96-server-9.6.3-2.4.x86_64 [............fertig]
(3/3) Installieren: postgresql96-contrib-9.6.3-2.4.x86_64 [............fertig]
15:58:08   Ensure postgresql 9.6 is being used as default...
15:58:09   Successfully switched to new postgresql version 9.6.
15:58:09   Create new database directory...
15:58:09   Initialize new postgresql 9.6 database...
The files belonging to this database system will be owned by user "postgres".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /var/lib/pgsql/data ... ok
creating subdirectories ... ok
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting dynamic shared memory implementation ... posix
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... ok
syncing data to disk ... ok

WARNING: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    pg_ctl -D /var/lib/pgsql/data -l logfile start

15:58:12   Successfully initialized new postgresql 9.6 database.
15:58:12   Upgrade database to new version postgresql 9.6...
Performing Consistency Checks
-----------------------------
Checking cluster versions                                   ok
Checking database user is the install user                  ok
Checking database connection settings                       ok
Checking for prepared transactions                          ok
Checking for reg* system OID user data types                ok
Checking for contrib/isn with bigint-passing mismatch       ok
Checking for roles starting with 'pg_'                      ok
Creating dump of global objects                             ok
Creating dump of database schemas
  postgres
  susemanager
  template1
                                                            ok
Checking for presence of required libraries                 ok
Checking database user is the install user                  ok
Checking for prepared transactions                          ok

If pg_upgrade fails after this point, you must re-initdb the
new cluster before continuing.

Performing Upgrade
------------------
Analyzing all rows in the new cluster                       ok
Freezing all rows on the new cluster                        ok
Deleting files from new pg_clog                             ok
Copying old pg_clog to new server                           ok
Setting next transaction ID and epoch for new cluster       ok
Deleting files from new pg_multixact/offsets                ok
Copying old pg_multixact/offsets to new server              ok
Deleting files from new pg_multixact/members                ok
Copying old pg_multixact/members to new server              ok
Setting next multixact ID and offset for new cluster        ok
Resetting WAL archives                                      ok
Setting frozenxid and minmxid counters in new cluster       ok
Restoring global objects in the new cluster                 ok
Restoring database schemas in the new cluster
  postgres
  susemanager
  template1
                                                            ok
Copying user relation files
  /var/lib/pgsql/data-pg94/base/12753/12710

[...]

  /var/lib/pgsql/data-pg94/base/1/12574
                                                            ok
Setting next OID for new cluster                            ok
Sync data directory to disk                                 ok
Creating script to analyze new cluster                      ok
Creating script to delete old cluster                       ok

Upgrade Complete
----------------
Optimizer statistics are not transferred by pg_upgrade so,
once you start the new server, consider running:
    ./analyze_new_cluster.sh

Running this script will delete the old cluster's data files:
    ./delete_old_cluster.sh
15:58:51   Successfully upgraded database to postgresql 9.6.
15:58:51   Tune new postgresql configuration...
INFO: Database configuration has been changed.
INFO: Wrote new general configuration. Backup as /var/lib/pgsql/data/postgresql.2017-07-26-15-58-51.conf
INFO: Wrote new client auth configuration. Backup as /var/lib/pgsql/data/pg_hba.2017-07-26-15-58-51.conf
INFO: Configuration has been changed, but your database is right now offline.
Database is offline
System check finished
15:58:51   Successfully tuned new postgresql configuration.
15:58:51   Starting spacewalk services...
Starting spacewalk services...
Done.</screen>
</sect1>
</chapter>
<chapter id="bp.chap.suma.backup"><title>Database Backup and Restoration</title><para>Backing up SUSE Manager can be done in several ways.
Regardless of the method chosen, the associated database also needs to be backed up.</para>
<sect1 id="_files_and_directories_requiring_backup"><title>Files and Directories Requiring Backup</title><para>The following files and directories should be backed up:</para>
<itemizedlist>
<listitem>
<para>The location of your SUSE Manager database, for example: <filename>/var/spacewalk/db-backup</filename></para>
</listitem>
<listitem>
<para><filename>/etc/sysconfig/rhn/</filename></para>
</listitem>
<listitem>
<para><filename>/etc/rhn/</filename></para>
</listitem>
<listitem>
<para><filename>/etc/sudoers</filename></para>
</listitem>
<listitem>
<para><filename>/srv/www/htdocs/pub/</filename></para>
</listitem>
<listitem>
<para><filename>/var/spacewalk/packages/1</filename> (/2, /3, for each additional organization using custom RPMs)</para>
</listitem>
<listitem>
<para><filename>/root/.gnupg/</filename></para>
</listitem>
<listitem>
<para><filename>/root/ssl-build/</filename></para>
</listitem>
<listitem>
<para><filename>/etc/dhcp.conf</filename></para>
</listitem>
<listitem>
<para><filename>/srv/tftpboot/</filename></para>
</listitem>
<listitem>
<para><filename>/etc/cobbler/</filename></para>
</listitem>
<listitem>
<para><filename>/var/lib/cobbler/</filename></para>
</listitem>
<listitem>
<para><filename>/var/lib/rhn/kickstarts/</filename></para>
</listitem>
<listitem>
<para><filename>/srv/www/cobbler</filename></para>
</listitem>
<listitem>
<para><filename>/root/.ssh</filename> (Backup is required when using ssh tunnel or ssh push. Keep in mind if you need to reinstall the server and you do not have a copy of the id-susemanager key saved, you must perform a mgr-ssh-push-init again for all clients.lsls)</para>
</listitem>
<listitem>
<para>Directories containing your custom data (scripts, kickstart profiles, autoyast, custom rpms, etc) should be included in the backup.</para>
</listitem>
<listitem>
<para>If you have mountpoints to ISO’s needed for distributions, these ISOs and the <filename>/etc/fstab</filename> should be part of your backup.</para>
</listitem>
</itemizedlist>
<para><phrase>SUSE</phrase>
recommends backing up the entire <filename>/var/spacewalk/</filename>
 tree.
In case of failure, this will save you lengthy download/resync time.
Since <filename>/var/spacewalk/</filename>
 (more specifically <filename>/var/spacewalk/packages/NULL/</filename>
) is primarily a duplicate of the package repository, it can be regenerated with <command>mgr-sync</command>.</para>
<para>If you are running SUSE Manager in a disconnected setup <filename>/var/spacewalk/</filename><emphasis>must</emphasis> be backed up.</para>
<para>Backing up only these files and directories requires reinstalling the <phrase><phrase>SUSE</phrase> Manager</phrase>
RPMs and re-registering <phrase><phrase>SUSE</phrase> Manager</phrase>
.
In addition, packages need to be resynchronized using the <command>mgr-sync</command> tool.
Finally, you have to reinstall the <filename>/root/ssl-build/rhn-org-httpd-ssl-key-pair-MACHINE_NAME-VER-REL.noarch.rpm</filename>
.</para>
<para>Another method is to back up all the files and directories mentioned above but reinstall the <phrase><phrase>SUSE</phrase> Manager</phrase>
without re-registering it.
During the installation, cancel or skip the registration and SSL certificate generation sections.</para>
<para>The most comprehensive method is to back up the entire machine.
This saves time in downloading and reinstalling but requires additional disk space and backup time.</para>
<note>
<para>Regardless of the backup method used, when restoring <phrase><phrase>SUSE</phrase> Manager</phrase>
from a backup, you must run the following command to schedule the recreation of search indexes the next time the <command>rhn-search</command> service is started:</para>
<screen>rcrhn-search cleanindex</screen>
</note>
</sect1>
<sect1 id="config.suma.database.smdba"><title>Administering The SUSE Manager Database with (smdba)</title><para><phrase><phrase>SUSE</phrase> Manager</phrase>
provides the <command>smdba</command> command for managing the installed database.</para>
<para>The <command>smdba</command> command works on local databases only, not remote.
This utility allows you to do several administrative tasks like backing up and restoring the database, everything from creating, verifying, and restoring backups to obtain the database status and restart the database if necessary.
The <command>smdba</command> command supports postgres databases.</para>
<important>
<title>Running smdba Relies on sudoEnablement</title>
<para>Running <command>smdba</command> relies on proper <command>sudo</command> configuration. <command>sudo</command> allows you to invoke <command>smdba</command> as a regular user and thus, you are save from executing unwanted system changes.</para>
<para>For example, to allow the user <literal role="username">admin</literal>
 (the <quote>administrative UID</quote>
) to execute <command>smdba</command> commands, and thus manipulating the underlying database with the <quote>operative
                    UID</quote>
, make sure something as follows is configured in <filename>/etc/sudoers</filename>
:</para>
<screen>admin   ALL=(postgres) /usr/bin/smdba</screen>
<para>With these settings <literal role="username">admin</literal>
 user will be allowed to access the target database account (<literal>oracle</literal> or <literal>postgres</literal>).</para>
<para>For configuring <command>sudo</command> and its security implications, see the <literal>sudo</literal> and <literal>sudoers</literal> manpages and the extensive comments in the <filename>/etc/sudoers</filename>
 configuration file.</para>
</important>
<para>Find basic information about <command>smdba</command> in the <literal>smdba</literal> manpage.</para>
<note>
<title>Restart Spacewalk Services When Connection is Lost</title>
<para>If you have stopped or restarted the database, Spacewalk services connections may be interrupted.
In such a case, execute the following command:</para>
<screen>``spacewalk-service`` restart</screen>
</note>
</sect1>
<sect1 id="config-smdb.start-and-stop"><title>Starting and Stopping the Database</title><para>There are three commands to start, stop, or retrieve the status of the database.
These commands work with both databases.
Use the following commands:</para>
<screen>smdba db-status
Checking database core...       online</screen>
<screen>smdba db-stop
Stopping the SUSE Manager database...
Stopping core:         done</screen>
<screen>smdba db-status
Checking database core...       offline</screen>
<screen>smdba db-start
Starting core...       done</screen>
</sect1>
<sect1 id="config-smdb.create-backup"><title>Backing up the Database</title><variablelist>
<varlistentry>
<term>smdba</term>
<listitem>
<para>The <command>smdba</command> command performs a <emphasis>continuous
archiving backup</emphasis>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Hot Backup</term>
<listitem>
<para>The term hot backup refers to a backup performed when both the database and SUSE Manager are running.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Cold Backup</term>
<listitem>
<para>The term cold backup refers to a backup performed when both the database and SUSE Manager services are shutdown.</para>
</listitem>
</varlistentry>
</variablelist>
<important>
<title>Database Backup Space Requirements</title>
<para>For both a running/hot database backup or an automated backup of the database using cron you must have at least 3 times the amount of space of the current database.
Check current database space usage with <command>df -h</command> on <filename>/var/lib/pgsql/</filename>
.</para>
</important>
<para>To perform a hot database backup for postgresql, do the following:</para>
<orderedlist numeration="arabic">
<title>Procedure: Performing a Hot Backup</title>
<listitem>
<para>Allocate permanent space on your remote storage, which you use for general backups (NAS, iSCSI target, etc.). For example:</para>
<screen>/var/spacewalk/db-backup</screen>
<note>
<title>Backup on NFS Share</title>
<para>A backup from the SUSE Manager server is not required when the mount point for <filename>/var/spacewalk</filename>
 is on an NFS share.</para>
</note>
<para>This directory should always be the same and never change.
It will be a permanent target to store new backups and restore from it during a disaster recovery.</para>
</listitem>
<listitem>
<para>Create a directory with the correct permissions in your target directory, e.g., with using <command>sudo</command>:</para>
<screen>sudo -u postgres mkdir /var/spacewalk/db-backup</screen>
<para>Alternatively, as <systemitem class="username">root</systemitem>
:</para>
<screen>install -d -o postgres /var/spacewalk/db-backup</screen>
<para>Or:</para>
<screen>mkdir /var/spacewalk/db-backup
chown postgres:postgres /var/spacewalk/db-backup</screen>
</listitem>
<listitem>
<para>If you want to create a backup for the first time, run:</para>
<screen>``smdba`` backup-hot --enable=on --backup-dir=/var/spacewalk/db-backup</screen>
<para>This command performs a restart of the postgresql database.
If you want to renew the basic backup, use the same command.</para>
</listitem>
<listitem>
<para>Perform the hot database backup:</para>
<screen>smdba backup-hot --backup-dir=/var/spacewalk/db-backup
...</screen>
<para>If the command exits without any errors, find the backup files in your <filename>/mnt/backup/database</filename>
directory.</para>
</listitem>
</orderedlist>
<tip>
<title>Performing a Cold Backup</title>
<para>When using smdba, you should never require a cold backup.
You may perform a cold backup once after initial SUSE Manager installation and configuration. <phrase>SUSE</phrase>
recommends creating a full-backup once a month or weekly and an additional incremental backup for single days.
Moving <filename>/var/spacewalk</filename>
 to an NFS share that is centrally backed-up, will save you alot of time when a restore is required.
The NFS share may also be used during the migration from SUSE Manager 2.1 to SUSE Manager 3.</para>
</tip>
</sect1>
<sect1 id="smdba.automatic.backup.with.cron"><title>Automatic Backup with cron</title><para>It is important to ensure your SUSE Manager database is backed up within a regularly defined schedule.
You can do this with a cron job.
The following procedure describes this process.</para>
<important>
<title>Database Backup Space Requirements</title>
<para>For all forms of database backup (hot, cold, or automated via cron) you must have at least 3 times the amount of space of the current database.
Check current database space usage with <command>df -h</command> on <filename>/var/spacewalk/</filename>
.</para>
</important>
<orderedlist numeration="arabic">
<title>Procedure: Automatic Backup with cron</title>
<listitem>
<para>If you have not created a backup directory do so now:</para>
<screen># mkdir /var/spacewalk/db-backup</screen>
</listitem>
<listitem>
<para>Set the correct user and rights permissions to the directory:</para>
<screen># chown -R postgres:postgres /var/spacewalk/db-backup</screen>
<screen># chmod 700 /var/spacewalk/db-backup</screen>
</listitem>
<listitem>
<para>Add the following line to the cron job at <filename>/etc/cron.d/db-backup-mgr</filename> :</para>
<screen>0 2 * * * root /usr/bin/smdba backup-hot --enable=on --backup-dir=/var/spacewalk/db-backup</screen>
</listitem>
</orderedlist>
</sect1>
<sect1 id="config-smdb.restore-backup"><title>Restoring a Database Backup</title><para>Use <command>smdba backup-restore</command> to restore to an earlier point in time.
To restore the backup, proceed as follows:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Shutdown the database:</para>
<screen>smdba db-stop</screen>
</listitem>
<listitem>
<para>Start the restore process:</para>
<screen>smdba backup-restore start</screen>
</listitem>
<listitem>
<para>Restart the database:</para>
<screen>smdba db-start</screen>
</listitem>
<listitem>
<para>Run <command>spacewalk-data-fsck</command> to check if there are differences between the RPMs and the database.</para>
</listitem>
</orderedlist>
<para>The above steps can be combined with:</para>
<screen>smdba backup-restore force</screen>
<para>In this case it will select the most recent backup and purge the rest.
Every time you create a new backup, it also purges the previous backups.</para>
<note>
<title>Restoring the Most Recent Backup Only</title>
<para>Because <command>smdba</command> makes automatic running database backups, it allows restoration of only the most recent backup, which includes merging of current archive logs.</para>
</note>
</sect1>
<sect1 id="config-smdb.archivelog"><title>Archive Log Settings</title><para>In <phrase><phrase>SUSE</phrase> Manager</phrase>
with an embedded database, archive logging is enabled by default.
This feature allows the database management tool <command>smdba</command> to perform hot backups.</para>
<para>With archive log enabled, even more data is stored on the hard disk:</para>
<itemizedlist>
<listitem>
<para>Postgresql maintains a limited number of archive logs. Using the default configuration, approx. 64 files with a size of 16 MiB are stored.</para>
</listitem>
</itemizedlist>
<para>Creating a user and syncing the channels:</para>
<itemizedlist>
<listitem>
<para>SLES12-SP2-Pool-x86_64</para>
</listitem>
<listitem>
<para>SLES12-SP2-Updates-x86_64</para>
</listitem>
<listitem>
<para>SLE-Manager-Tools12-Pool-x86_64-SP2</para>
</listitem>
<listitem>
<para>SLE-Manager-Tools12-Updates-x86_64-SP2</para>
</listitem>
</itemizedlist>
<para>Postgresql will generate an additional ~1 GB of data.
So it is important to think about a backup strategy and create a backups in a regular way.</para>
<para>Archive logs are stored at:</para>
<itemizedlist>
<listitem>
<para><filename>/var/lib/pgsql/data/pg_xlog/</filename> (postgresql)</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="config-smdb.spaces"><title>Retrieving an Overview of Occupied Database Space</title><para>Database administrators may use the subcommand <command>space-overview</command> to get a report about occupied table spaces, for example:</para>
<screen>smdba space-overview
SUSE Manager Database Control. Version 1.5.2
Copyright (c) 2012 by SUSE Linux Products GmbH


Tablespace  | Size (Mb) | Avail (Mb) | Use %
------------+-----------+------------+------
postgres    | 7         | 49168      | 0.013
susemanager | 776       | 48399      | 1.602</screen>
<para>The following command is available for Postgresql.
For a more detailed report, use the <command>space-tables</command> subcommand.
It lists the table and its size, for example:</para>
<screen>smdba space-tables
SUSE Manager Database Control. Version 1.5.2
Copyright (c) 2012 by SUSE Linux Products GmbH


Table                                 | Size
--------------------------------------+-----------
public.all_primary_keys               | 0 bytes
public.all_tab_columns                | 0 bytes
public.allserverkeywordsincereboot    | 0 bytes
public.dblink_pkey_results            | 0 bytes
public.dual                           | 8192 bytes
public.evr_t                          | 0 bytes
public.log                            | 32 kB
...</screen>
</sect1>
<sect1 id="_moving_the_database"><title>Moving the Database</title><para>It is possible to move the database to another location.
For example if your database storage space is running low.
The following procedure will guide you through moving the database to a new location for use by SUSE Manager.</para>
<orderedlist numeration="arabic">
<title>Procedure: Moving the Database</title>
<listitem>
<para>The default storage location for <phrase><phrase>SUSE</phrase> Manager</phrase> is: <filename>/var/lib/pgsql/</filename> . You would like to move it, for example to: <filename>/storage/postgres/</filename> . To begin, stop the running database with:</para>
<screen># rcpostgresql stop</screen>
<para>Shutdown running spacewalk services with:</para>
<screen># spacewalk-service stop</screen>
</listitem>
<listitem>
<para>Copy the current working directory structure with the following syntax:</para>
<screen>cp [OPTION]... SOURCE... DIRECTORY</screen>
<para>using the <option>-a, --archive</option> option.
For example:</para>
<screen># cp -ar /var/lib/pgsql/ /storage/postgres/</screen>
<para>This command will copy the contents of <filename>/var/lib/pgsql/</filename>
to <filename>/storage/postgres/pgsql/</filename>
.</para>
<important>
<para>The contents of the /var/lib/pgsql needs to remain the same or the SUSE Manager database may malfunction.
You also should ensure there is enough available disk space.</para>
</important>
</listitem>
<listitem>
<para>Mount the new database directory with:</para>
<screen># mount /storage/postgres/pgsql</screen>
</listitem>
<listitem>
<para>Make sure ownership is <literal>postgres:postgres</literal> and not <literal>root:root</literal> by changing to the new directory and running the following command:</para>
<screen>/var/lib/pgsql/ # cd /storage/postgres/pgsql/
/storage/postgres/pgsql/ # l
total 8
drwxr-x---  4 postgres postgres   47 Jun  2 14:35 ./</screen>
</listitem>
<listitem>
<para>Add the new database mount location to your servers fstab by editing  <filename>etc/fstab</filename> .</para>
</listitem>
<listitem>
<para>Start the database with:</para>
<screen># rcpostgresql start</screen>
<para>Start spacewalk-services with:</para>
<screen># spacewalk-service start</screen>
</listitem>
</orderedlist>
</sect1>
<sect1 id="_recovering_from_a_crashed_root_partition"><title>Recovering from a Crashed Root Partition</title><para>This section provides guidance on restoring your server after its root partition has crashed.
This section assumes you have setup your server similar to the procedure explained in Getting Started guide with separate partitions for the database and for channels mounted at <filename>/var/lib/pgsql</filename>
 and <filename>/var/spacewalk/</filename>
.</para>
<orderedlist numeration="arabic">
<title>Procedure: Recovering from a Crashed Root Partition</title>
<listitem>
<para>Start by installing SLES12 SP2 and the SUSE Manager Extension. Do not mount the <filename>/var/spacewalk</filename> and <filename>/var/lib/pgsql</filename> partitions.</para>
</listitem>
<listitem>
<para>Once installation of SUSE Manager has completed shutdown services with <command>spacewalk-service shutdown</command> and the database with <command>rcpostgresql stop</command>.</para>
</listitem>
<listitem>
<para>Mount your <filename>/var/spacewalk</filename> and <filename>/var/lib/pgsql</filename> partitions and restore the directories listed in section one.</para>
</listitem>
<listitem>
<para>Start SUSE Manager services and the database with <command>spacewalk-services start</command> and <command>rcpostgresql start</command></para>
</listitem>
<listitem>
<para>SUSE Manager should now operate normally without loss of your database or synced channels.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="_database_connection_information"><title>Database Connection Information</title><para>The information for connecting to the SUSE Manager database is located in <filename>/etc/rhn/rhn.conf</filename>
:</para>
<screen>db_backend = postgresql
db_user = susemanager
db_password = susemanager
db_name = susemanager
db_host = localhost
db_port = 5432
db_ssl_enabled =</screen>
</sect1>
</chapter>
<chapter id="bp.authentication.with.pam.and.ad"><title>Authentication Methods</title><sect1 id="_authentication_via_pam"><title>Authentication Via PAM</title><para>As security measures become increasingly complex, SUSE Manager supports network-based authentication systems via Pluggable Authentication Modules (PAM). PAM is a suite of libraries that allows to integrate SUSE Manager with a centralized authentication mechanism, thus eliminating the need to remember multiple passwords.
SUSE Manager supports LDAP, Kerberos, and other network-based authentication systems via PAM.
To enable SUSE Manager to use PAM in your organization’s authentication infrastructure, follow the steps below.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Set up a PAM service file (default location: <filename>/etc/pam.d/susemanager</filename> ) then enforce its use by adding the following line to <filename>/etc/rhn/rhn.conf</filename> :</para>
<screen>pam_auth_service = susemanager</screen>
<note>
<para>This assumes the PAM service file is named susemanager.</para>
</note>
</listitem>
<listitem>
<para>To enable a new or existing user to authenticate with PAM, proceed to the <guimenu>Create User</guimenu> page and select the checkbox labeled Pluggable Authentication Modules (PAM) positioned below the password and password confirmation fields.</para>
</listitem>
<listitem>
<para>To authenticate a SLES system against Kerberos add the following lines to <filename>/etc/pam.d/susemanager</filename> :</para>
<screen>#%PAM-1.0
 auth     include        common-auth
 account  include        common-account
 password include        common-password
 session  include        common-session</screen>
<note>
<para>To register a Red Hat Enterprise Linux System against Kerberos add the following lines to <filename>/etc/pam.d/susemanager</filename></para>
</note>
</listitem>
</orderedlist>
<screen>#%PAM-1.0
 auth        required      pam_env.so
 auth        sufficient    pam_krb5.so no_user_check
 auth        required      pam_deny.so
 account     required      pam_krb5.so no_user_check</screen>
<para>+</para>
<orderedlist numeration="arabic">
<listitem>
<para>YaST can now be used to configure PAM, when packages such as yast2-ldap-client and yast2-kerberos-client are installed; for detailed information on configuring PAM, see the SUSE Linux Enterprise Server Security Guide <ulink url="https://www.suse.com/documentation/sles-12/book_security/data/part_auth.html">https://www.suse.com/documentation/sles-12/book_security/data/part_auth.html</ulink>. This example is not limited to Kerberos; it is generic and uses the current server configuration. Note that only network based authentication services are supported.</para>
<important>
<title>Changing Passwords</title>
<para>Changing the password on the SUSE Manager Web interface changes only the local password on the SUSE Manager server.
But this password may not be used at all if PAM is enabled for that user.
In the above example, for instance, the Kerberos password will not be changed.</para>
</important>
</listitem>
</orderedlist>
</sect1>
<sect1 id="_authentication_via_edirectory_and_pam"><title>Authentication Via eDirectory and PAM</title><orderedlist numeration="arabic">
<listitem>
<para>First check to ensure eDirectory authentication is working with your current OS for example:</para>
<screen>#getent passwd</screen>
</listitem>
<listitem>
<para>If users are returned from eDirectory then create the following file:</para>
<screen># cat /etc/pam.d/susemanager</screen>
</listitem>
<listitem>
<para>And add the following content:</para>
<screen>#%PAM-1.0
 auth     include        common-auth
 account  include        common-account
 password include        common-password
 session  include        common-session
 #</screen>
</listitem>
<listitem>
<para>Finally add the following lines to the <phrase><phrase>SUSE</phrase> Manager</phrase> conf file:</para>
<screen># grep -i pam /etc/rhn/rhn.conf
 pam_auth_service = susemanager</screen>
</listitem>
<listitem>
<para>You may now create users with the same id that appears on eDirectory and mark the Use PAM check-box from the SUSE Manager WebUI.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="_example_quest_vas_active_directory_authentication_template"><title>Example Quest VAS Active Directory Authentication Template</title><para>If you are using Quest VAS for active directory authentication, you can use the following <filename>/etc/pam.d/susemanager</filename>
 file.</para>
<screen>#%PAM-1.0
auth       required       pam_env.so
auth       sufficient     pam_vas3.so no_user_check
auth       requisite      pam_vas3.so echo_return
auth       required       pam_deny.so
account    required       pam_vas3.so no_user_check</screen>
</sect1>
</chapter>
<chapter id="bp.chap.bring.your.own.cert"><title>Using a Custom SSL Certificate</title><para>The following section will guide you through using a custom certificate with <phrase><phrase>SUSE</phrase> Manager</phrase>{productnumber}
and <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase>{productnumber}
.</para>
<sect1 id="bp.cert.custom.req"><title>Prerequisites</title><para>The following list provides requirements for using a custom certificate.</para>
<itemizedlist>
<listitem>
<para>A Certificate Authority (CA) SSL public certificate file</para>
</listitem>
<listitem>
<para>A Web server SSL private key file</para>
</listitem>
<listitem>
<para>A Web server SSL public certificate file</para>
</listitem>
<listitem>
<para>Key and Certificate files must be in PEM format</para>
</listitem>
</itemizedlist>
<important>
<title>Hostname and SSL Keys</title>
<para>The hostname of the web server’s SSL keys and relevant certificate files must match the hostname of the machine which they will be deployed on.</para>
</important>
<tip>
<title>Intermediate Certificates</title>
<para>In case you want to use CAs with intermediate certificates, merge the intermediate and root CA certificates into one file.
It is important that the intermediate certificate comes first within the combined file.</para>
</tip>
</sect1>
<sect1 id="bp.cert.custom.setup"><title>Setup</title><para>After completing YaST
firstboot procedures, export your current environment variables and point them to the correct SSL files to be imported.
Running these commands will make the default certificate obsolete after executing the <command>yast2 susemanagersetup</command> command.
For more information on YaST
 firstboot, see <ulink url="https://www.suse.com/documentation/suse-manager-3/singlehtml/suse_manager21/book_susemanager_install/book_susemanager_install.html#sec.manager.inst.setup">https://www.suse.com/documentation/suse-manager-3/singlehtml/suse_manager21/book_susemanager_install/book_susemanager_install.html#sec.manager.inst.setup</ulink>.</para>
<orderedlist id="bp.cert.custom.setup.proc.export" numeration="arabic">
<listitem>
<para>Export the environment variables and point to the SSL files to be imported:</para>
<screen>export CA_CERT=`path_to_CA_certificate_file`export SERVER_KEY=`path_to_web_server_key`export SERVER_CERT=`path_to_web_server_certificate`</screen>
</listitem>
<listitem>
<para>Execute <phrase><phrase>SUSE</phrase> Manager</phrase> setup with</para>
<screen>yast2 susemanagersetup</screen>
<para>Proceed with the default setup.
Upon reaching the Certificate Setup window during YaST
installation, fill in random values, as these will be overridden with the values specified in <xref linkend="bp.cert.custom.setup.proc.export"/>.</para>
<note>
<title>Shell Requirements</title>
<para>Make sure that you execute <command>yast2
      susemanagersetup</command> from within the same shell the environment variables were exported from.</para>
</note>
</listitem>
</orderedlist>
</sect1>
<sect1 id="bp.cert.custom.proxy"><title>Using a Custom Certificate with SUSE Manager Proxy</title><para>After completing the installation with yast found in <xref linkend="advanced.topics.proxy.quickstart"/> continue with a modified <xref linkend="at.manager.proxy.run.confproxy"/> procedure:</para>
<orderedlist id="bp.cert.custom.proxy.proc" numeration="arabic">
<listitem>
<para>Execute <command>configure-proxy.sh</command>.</para>
</listitem>
<listitem>
<para>When prompted with:</para>
<screen>Do you want to import existing certificates?</screen>
<para>Answer with <keycap>y</keycap>
.</para>
</listitem>
<listitem>
<para>Continue by following the script prompts.</para>
</listitem>
</orderedlist>
</sect1>
</chapter>
<chapter id="bp.chapt.suma3.troubleshooting"><title>Troubleshooting</title><para>This chapter provides guidance on registering cloned systems with SUSE Manager.
This includes both Salt and Traditional clients.
For more information, see <ulink url="https://www.novell.com/support/kb/doc.php?id=7012170">https://www.novell.com/support/kb/doc.php?id=7012170</ulink>.</para>
<sect1 id="bp.chapt.suma3.troubleshooting.registering.cloned.salt.systems"><title>Registering Cloned Salt Minions</title><orderedlist numeration="arabic">
<title>Procedure: Registering a Cloned Salt Minion with SUSE Manager</title>
<listitem>
<para>Clone your system (for example using the existing cloning mechanism of your favorite Hypervisor)</para>
<note>
<title>Quick Tips</title>
<para>Each step in this section is performed on the cloned system, this procedure does not manipulate the original system, which will still be registered to SUSE Manager.
The cloned virtual machine should have a different UUID from the original (this UUID is generated by your hypervisor) or SUSE Manager will overwrite the original system data with the new one.</para>
</note>
</listitem>
<listitem>
<para>Make sure your machines have different hostnames and IP addresses, also check that /etc/hosts contains the changes you made and the correct host entries.</para>
</listitem>
</orderedlist>
<para>The next step you take will depend on the Operating System of the clone.</para>
<para>The following scenario can occur after on-boarding cloned Salt minions.
If after accepting all cloned minion keys from the onboarding page and you see only one minion on the System Overview page, this is likely due to these machines being clones of the original and using a duplicate machine-id.
Perform the following steps to resolve this conflict based on OS.</para>
<orderedlist numeration="arabic">
<title>Procedure: SLES 12 Registering Salt Clones</title>
<listitem>
<para>SLES 12: If your machines have the same machine ids then delete the file on each minion and recreate it:</para>
<screen># rm /etc/machine-id
# rm /var/lib/dbus/machine-id
# dbus-uuidgen --ensure
# systemd-machine-id-setup</screen>
</listitem>
</orderedlist>
<orderedlist numeration="arabic">
<title>Procedure: SLES 11 Registering Salt Clones</title>
<listitem>
<para>SLES 11: As there is no systemd machine id, generate one from dbus:</para>
<screen># rm /var/lib/dbus/machine-id
# dbus-uuidgen --ensure</screen>
</listitem>
</orderedlist>
<para>If your machines still have the same minion id then delete the minion_id file on each minion (FQDN will be used when it is regenerated on minion restart):</para>
<screen># rm /etc/salt/minion_id</screen>
<para>Finally delete accepted keys from Onboarding page and system profile from SUSE Manager, and restart the minion with:</para>
<screen># systemctl restart salt-minion</screen>
<para>You should be able to re-register them again, but each minion will use a different '/etc/machine-id' and should now be correctly displayed on the System Overview page.</para>
</sect1>
<sect1 id="bp.chapt.suma3.troubleshooting.registering.cloned.traditional.systems"><title>Registering Cloned Traditional Systems</title><para>This section provides guidance on troubleshooting cloned traditional systems registered via bootstrap.</para>
<orderedlist numeration="arabic">
<title>Procedure: Registering a Cloned System with SUSE Manager (Traditional Systems)</title>
<listitem>
<para>Clone your system (using your favorite hypervisor.)</para>
<note>
<title>Quick Tips</title>
<para>Each step in this section is performed on the cloned system, this procedure does not manipulate the original system, which will still be registered to SUSE Manager.
The cloned virtual machine should have a different UUID from the original (this UUID is generated by your hypervisor) or SUSE Manager will overwrite the original system data with the new one.</para>
</note>
</listitem>
<listitem>
<para>Change the Hostname and IP addresses, also make sure /etc/hosts contains the changes you made and the correct host entries.</para>
</listitem>
<listitem>
<para>Stop rhnsd daemon with:</para>
<screen># /etc/init.d/rhnsd stop</screen>
<para>or alternativly:</para>
<screen># rcrhnsd stop</screen>
</listitem>
<listitem>
<para>Stop osad with:</para>
<screen># /etc/init.d/osad stop</screen>
<para>or alternativly:</para>
<screen># rcosad stop</screen>
</listitem>
<listitem>
<para>Remove the osad authentifcation configuration file and the systemid with:</para>
<screen># rm -f /etc/sysconfig/rhn/{osad-auth.conf,systemid}</screen>
</listitem>
</orderedlist>
<para>The next step you take will depend on the Operating System of the clone.</para>
<orderedlist numeration="arabic">
<title>Procedure: SLES 12 Registering A Cloned Traditional System</title>
<listitem>
<para/>
<para>If your machines have the same machine ids then delete the file on each client and recreate it:</para>
<screen># rm /etc/machine-id
# rm /var/lib/dbus/machine-id
# dbus-uuidgen --ensure
# systemd-machine-id-setup</screen>
</listitem>
<listitem>
<para>Remove the following credential files:</para>
<screen># rm  -f /etc/zypp/credentials.d/{SCCcredentials,NCCcredentials}</screen>
</listitem>
<listitem>
<para>Re-run the bootstrap script. You should now see the cloned system in SUSE Manager without overwriting the system it was cloned from.</para>
</listitem>
</orderedlist>
<orderedlist numeration="arabic">
<title>Procedure: SLES 11 Registering A Cloned Traditional System</title>
<listitem>
<para>Continued from section 1 step 5:</para>
<screen># suse_register -E</screen>
<para>(--erase-local-regdata, Erase all local files created from a previous executed registration.
This option make the system look like never registered)</para>
</listitem>
<listitem>
<para>Re-run the bootstrap script. You should now see the cloned system in SUSE Manager without overwriting the system it was cloned from.</para>
</listitem>
</orderedlist>
<orderedlist numeration="arabic">
<title>Procedure: SLES 10 Registering A Cloned Traditional System</title>
<listitem>
<para>Continued from section 1 step 5:</para>
<screen># rm -rf /etc/{zmd,zypp}</screen>
</listitem>
<listitem>
<para/>
<screen># ¡¡¡¡¡ everthing in /var/lib/zypp/ except /var/lib/zypp/db/products/ !!!!!
# check whether this command works for you
# rm -rf /var/lib/zypp/!(db)</screen>
</listitem>
<listitem>
<para/>
<screen># rm -rf /var/lib/zmd/</screen>
</listitem>
<listitem>
<para>Re-run the bootstrap script. You should now see the cloned system in SUSE Manager without overwriting the system it was cloned from.</para>
</listitem>
</orderedlist>
<orderedlist numeration="arabic">
<title>Procedure: RHEL 5,6 and 7</title>
<listitem>
<para>Continued from section 1 step 5:</para>
<screen># rm  -f /etc/NCCcredentials</screen>
</listitem>
<listitem>
<para>Re-run the bootstrap script. You should now see the cloned system in SUSE Manager without overwriting the system it was cloned from.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="bp.chapt.suma3.troubleshooting.osad.jabberd"><title>Typical OSAD/jabberd Challenges</title><para>This section provides answers for typical issues regarding OSAD and jabberd.</para>
<sect2 id="_open_file_count_exceeded"><title>Open File Count Exceeded</title><para><literal>SYMPTOMS</literal>: OSAD clients cannot contact the SUSE Manager Server, and jabberd requires long periods of time to respond on port 5222.</para>
<para><literal>CAUSE</literal>: The number of maximum files that a jabber user can open is lower than the number of connected clients.
Each client requires one permanently open TCP connection and each connection requires one file handler.
The result is jabberd begins to queue and refuse connections.</para>
<para><literal>CURE</literal>: Edit the <filename>/etc/security/limits.conf</filename>
 to something similar to the following: <literal>jabbersoftnofile&lt;#clients + 100&gt;
    jabberhardnofile&lt;#clients + 1000&gt;</literal></para>
<para>This will vary according to your setup.
For example in the case of 5000 clients: <literal>jabbersoftnofile5100 jabberhardnofile6000</literal></para>
<para>Ensure you update the <filename>/etc/jabberd/c2s.xml</filename>
 max_fds parameter as well.
For example: <literal>&lt;max_fds&gt;6000&lt;/max_fds&gt;</literal></para>
<para><literal>EXPLANATION</literal>: The soft file limit is the limit of the maximum number of open files for a single process.
In SUSE Manager the highest consuming process is c2s, which opens a connection per client.
100 additional files are added, here, to accommodate for any non-connection file that c2s requires to work correctly.
The hard limit applies to all processes belonging to the jabber user, and accounts for open files from the router, s2s and sm processes additionally.</para>
</sect2>
<sect2 id="_jabberd_database_corruption"><title>jabberd Database Corruption</title><para><literal>SYMPTOMS</literal>: After a disk is full error or a disk crash event, the jabberd database may have become corrupted.
jabberd may then fail to start during spacewalk-service start:</para>
<screen>Starting spacewalk services...
   Initializing jabberd processes...
       Starting router                                                                   done
       Starting sm startproc:  exit status of parent of /usr/bin/sm: 2                   failed
   Terminating jabberd processes...</screen>
<para>/var/log/messages shows more details:</para>
<screen>jabberd/sm[31445]: starting up
jabberd/sm[31445]: process id is 31445, written to /var/lib/jabberd/pid/sm.pid
jabberd/sm[31445]: loading 'db' storage module
jabberd/sm[31445]: db: corruption detected! close all jabberd processes and run db_recover
jabberd/router[31437]: shutting down</screen>
<para><literal>CURE</literal>: Remove the jabberd database and restart.
Jabberd will automatically re-create the database:</para>
<screen>spacewalk-service stop
 rm -Rf /var/lib/jabberd/db/*
 spacewalk-service start</screen>
<para>An alternative approach would be to test another database, but SUSE Manager does not deliver drivers for this:</para>
<screen>rcosa-dispatcher stop
 rcjabberd stop
 cd /var/lib/jabberd/db
 rm *
 cp /usr/share/doc/packages/jabberd/db-setup.sqlite .
 sqlite3 sqlite.db &lt; db-setup.sqlite
 chown jabber:jabber *
 rcjabberd start
 rcosa-dispatcher start</screen>
</sect2>
<sect2 id="_capturing_xmpp_network_data_for_debugging_purposes"><title>Capturing XMPP Network Data for Debugging Purposes</title><para>If you are experiencing bugs regarding OSAD, it can be useful to dump network messages in order to help with debugging.
The following procedures provide information on capturing data from both the client and server side.</para>
<orderedlist numeration="arabic">
<title>Procedure: Server Side Capture</title>
<listitem>
<para>Install the <systemitem class="resource">tcpdump</systemitem> package on the SUSE Manager Server as root: <command>zypper in tcpdump </command></para>
</listitem>
<listitem>
<para>Stop the OSA dispatcher and Jabber processes with <command>rcosa-dispatcher stop</command> and <command>rcjabberd stop.</command></para>
</listitem>
<listitem>
<para>Start data capture on port 5222: <command>tcpdump -s 0 port 5222 -w server_dump.pcap</command></para>
</listitem>
<listitem>
<para>Start the OSA dispatcher and Jabber processes: <command>rcosa-dispatcher start</command> and <command>rcjabberd start</command>.</para>
</listitem>
<listitem>
<para>Open a second terminal and execute the following commands: <command>rcosa-dispatcher start</command> and <command>rcjabberd start</command>.</para>
</listitem>
<listitem>
<para>Operate the SUSE Manager server and clients so the bug you formerly experienced is reproduced.</para>
</listitem>
<listitem>
<para>Once you have finished your capture re-open terminal 1 and stop the capture of data with: <keycombo><keycap>CTRL</keycap><keycap>c</keycap></keycombo></para>
</listitem>
</orderedlist>
<orderedlist numeration="arabic">
<title>Procedure: Client Side Capture</title>
<listitem>
<para>Install the tcpdump package on your client as root: <command>zypper in tcpdump</command></para>
</listitem>
<listitem>
<para>Stop the OSA process: <command>rcosad stop</command>.</para>
</listitem>
<listitem>
<para>Begin data capture on port 5222: <command>tcpdump -s 0 port 5222 -w client_client_dump.pcap</command></para>
</listitem>
<listitem>
<para>Open a second terminal and start the OSA process: <command>rcosad start</command></para>
</listitem>
<listitem>
<para>Operate the SUSE Manager server and clients so the bug you formerly experienced is reproduced.</para>
</listitem>
<listitem>
<para>Once you have finished your capture re-open terminal 1 and stop the capture of data with: <keycombo><keycap>CTRL</keycap><keycap>c</keycap></keycombo></para>
</listitem>
</orderedlist>
</sect2>
<sect2 id="_engineering_notes_analyzing_captured_data"><title>Engineering Notes</title><subtitle>Analyzing Captured Data</subtitle><para>This section provides information on analyzing the previously captured data from client and server.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Obtain the certificate file from your SUSE Manager server: /etc/pki/spacewalk/jabberd/server.pem</para>
</listitem>
<listitem>
<para>Edit the certificate file removing all lines before <literal>----BEGIN RSA PRIVATE KEY-----</literal>, save it as key.pem</para>
</listitem>
<listitem>
<para>Install Wireshark as root with: <command>zypper in wireshark</command></para>
</listitem>
<listitem>
<para>Open the captured file in wireshark.</para>
</listitem>
<listitem>
<para>From <guimenu>Eidt</guimenu><guimenu>Preferences</guimenu> select SSL from the left pane.</para>
</listitem>
<listitem>
<para>Select RSA keys list: <guimenu>Edit</guimenu><guimenu>New</guimenu></para>
<itemizedlist>
<listitem>
<para>IP Address any</para>
</listitem>
<listitem>
<para>Port: 5222</para>
</listitem>
<listitem>
<para>Protocol: xmpp</para>
</listitem>
<listitem>
<para>Key File: open the key.pem file previously edited.</para>
</listitem>
<listitem>
<para>Password: leave blank</para>
</listitem>
</itemizedlist>
<para>For more information see also:</para>
<itemizedlist>
<listitem>
<para><ulink url="https://wiki.wireshark.org/SSL">https://wiki.wireshark.org/SSL</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=3444">https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=3444</ulink></para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</sect2>
</sect1>
<sect1 id="bp.troubleshooting.timeouts"><title>RPC Connection Timeout Settings</title><para><indexterm>
<primary>connection timeout</primary>
</indexterm></para>
<para><indexterm>
<primary>timeout settings</primary><secondary>RPC connection</secondary>
</indexterm>
<indexterm>
<primary>RPC connection</primary>
</indexterm></para>
<para>RPC connection timeouts are configurable on the <phrase><phrase>SUSE</phrase> Manager</phrase>
server, <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase>
server, and the clients.
For example, if package downloads take longer then expected, you can increase timeout values. <command>spacewalk-proxy restart</command> should be run after the setting is added or modified.</para>
<para>Set the following variables to a value in seconds specifying how long an RPC connection may take at maximum:</para>
<variablelist>
<varlistentry>
<term>Server —<filename>/etc/rhn/rhn.conf</filename> </term>
<listitem>
<screen>server.timeout =`number`</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Proxy Server —<filename>/etc/rhn/rhn.conf</filename> </term>
<listitem>
<screen>proxy.timeout =`number`</screen>
</listitem>
</varlistentry>
<varlistentry>
<term><phrase>SUSE Linux Enterprise Server</phrase> Clients (using <systemitem class="resource">zypp-plugin-spacewalk</systemitem> ) —<filename>/etc/zypp/zypp.conf</filename> </term>
<listitem>
<screen>## Valid values:  [0,3600]
## Default value: 180
download.transfer_timeout = 180</screen>
<para>This is the maximum time in seconds that a transfer operation is allowed to take.
This is useful for preventing batch jobs from hanging for hours due to slow networks or links going down.
If limiting operations to less than a few minutes, you risk aborting perfectly normal operations.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><phrase>Red Hat Enterprise Linux</phrase> Clients (using <systemitem class="resource">yum-rhn-plugin</systemitem> ) —<filename>/etc/yum.conf</filename> </term>
<listitem>
<screen>timeout =`number`</screen>
</listitem>
</varlistentry>
</variablelist>
</sect1>
</chapter>
<chapter id="mgr.additional.resources"><title>Additional Resources</title><para>This chapter contains links to helpful resources.</para>
<sect1 id="_learning_yaml_syntax_for_salt_states"><title>Learning YAML Syntax for Salt States</title><para>Learn how to write states and pillars with YAML.</para>
<itemizedlist>
<listitem>
<para><ulink url="https://docs.saltstack.com/en/latest/topics/yaml/index.html">https://docs.saltstack.com/en/latest/topics/yaml/index.html</ulink></para>
</listitem>
<listitem>
<para><ulink url="http://yaml-online-parser.appspot.com/">http://yaml-online-parser.appspot.com/</ulink></para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="_getting_started_with_jinja_templates"><title>Getting Started with Jinja Templates</title><para>Learn how to begin writing templates in Jinja</para>
<itemizedlist>
<listitem>
<para><ulink url="https://docs.saltstack.com/en/latest/topics/jinja/index.html">https://docs.saltstack.com/en/latest/topics/jinja/index.html</ulink></para>
</listitem>
<listitem>
<para><ulink url="http://jinja.pocoo.org/docs/dev/">http://jinja.pocoo.org/docs/dev/</ulink></para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="_salt_best_practices"><title>Salt Best Practices</title><para>Best practices from the Salt team.</para>
<itemizedlist>
<listitem>
<para><ulink url="https://docs.saltstack.com/en/latest/topics/best_practices.html">https://docs.saltstack.com/en/latest/topics/best_practices.html</ulink></para>
</listitem>
</itemizedlist>
</sect1>
</chapter>
<chapter id="mgr.product.comparison"><title>A SUSE Manager 2.1 and 3.2 Product Comparison</title><para>You may already have experience managing your systems using <phrase><phrase>SUSE</phrase> Manager</phrase>
2.1.
The good news is all the features you are used to working with, (regarding the traditional stack) have not changed.
The only real exception is that the original built-in monitoring feature has been removed.
Icinga, a third party monitoring solution is included within the SUSE Manager Tools Channel for SLES 12. <phrase><phrase>SUSE</phrase> Manager</phrase>
 <phrase>3.2</phrase>
supports managing systems via the popular IT orchestration engine Salt, in addition to the previously existing traditional management stack.</para>
<important>
<title>Selecting a Management Method</title>
<para>You cannot and should not mix a single system with both methods although you can have Salt managed systems and traditionally managed systems coexisting and managed by a <phrase><phrase>SUSE</phrase> Manager</phrase>
server.
You may for example have a development department and assign all machines in this department as Salt minions, likewise you could also have a production department and assign machines as traditional bootstrap clients.
Remember a single machine is either traditionally managed or Salt but never both.</para>
</important>
<para>Keep in mind that minions are not traditional clients and their feature set is currently limited.
Future maintenance updates will provide feature parity over time and your feedback for prioritization of these features is welcome! The following tables provide a comparison between each feature set.
This includes features in development and features available only to their parent management stack.</para>
<table frame="all" rowsep="1" colsep="1">
<title>Comparing Traditional Management and Salt Management</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33.3333*"/>
<colspec colname="col_2" colwidth="33.3333*"/>
<colspec colname="col_3" colwidth="33.3334*"/>
<thead>
<row>
<entry><para>Feature/Function</para></entry>
<entry><para>Traditional Management</para></entry>
<entry><para>Salt Management</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>Registration</para></entry>
<entry><para>bootstrap/rhnreg_ks</para></entry>
<entry><para>bootstrap scripts and Web UI</para></entry>
</row>
<row>
<entry><para>Install Packages</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Install Patches</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Remote Commands</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>System Package States</para></entry>
<entry><para>Unsupported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>System Custom States</para></entry>
<entry><para>Unsupported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Group Custom States</para></entry>
<entry><para>Unsupported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Organization Custom States</para></entry>
<entry><para>Unsupported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>System Set Manager</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Service Pack Migration</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Virtualization Host Management: <emphasis>Auto-installation/bare metal installation support</emphasis></para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported (read-only)</para></entry>
</row>
<row>
<entry><para>System Redeployment: <emphasis>With Auto-installation</emphasis></para></entry>
<entry><para>Supported</para></entry>
<entry><para>Coming Soon</para></entry>
</row>
<row>
<entry><para>Contact Methods: <emphasis>How the server communicates with a client</emphasis></para></entry>
<entry><para>osad, rhnsd, ssh push</para></entry>
<entry><para>zeromq: Salt default salt-ssh</para></entry>
</row>
<row>
<entry><para>Red Hat Network Clients <emphasis>RHEL 6, 7</emphasis></para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>SUSE Manager Proxy</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Action Chains</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Software Crash Reporting</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Unsupported</para></entry>
</row>
<row>
<entry><para>Staging</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Duplicate Package Reporting <emphasis>Example: Multiple Versions of the Linux Kernel</emphasis></para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>SCAP Auditing</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Support for Multiple Organizations</para></entry>
<entry><para>Supported  **</para></entry>
<entry><para>Supported **</para></entry>
</row>
<row>
<entry><para>Package Verification</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Under Review</para></entry>
</row>
<row>
<entry><para>System Locking</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Under Review</para></entry>
</row>
<row>
<entry><para>Configuration File Management</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Snapshots and Profiles</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Under Review (Profiles are supported)</para></entry>
</row>
<row>
<entry><para>Power Management</para></entry>
<entry><para>Supported</para></entry>
<entry><para>Coming Soon</para></entry>
</row>
</tbody>
</tgroup>
</table>
<warning>
<title>Isolation Enforcement **</title>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> 2.1 is multi-tenant and organizations are completely isolated from one another.
This isolation includes both privacy and security.</para>
<para>For example: User A in Org_1 cannot see user B in Org_2.
(This relates to any data specific to an organization including: servers, channels, activation keys, configuration channels, files and so on.)</para>
<para>In <phrase><phrase>SUSE</phrase> Manager</phrase> <phrase>3.2</phrase> Salt currently does not support any level of multi-tenancy and therefore information specific to an organization is accessible across organizations.
For example:</para>
<screen>salt '*' cmd.run "some_dangerous_command"</screen>
<para>The above command will target all organization, groups and single systems including their files, channels, activation keys etc.
This should be kept in mind when working with Salt.</para>
</warning>
<para>The following table provides an overview of differences in functionality between <phrase><phrase>SUSE</phrase> Manager</phrase> 2.1 and <phrase>3.2</phrase>.</para>
<table frame="all" rowsep="1" colsep="1">
<title>Comparing SUSE Manager2.1 and 3.2Functionality</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33.3333*"/>
<colspec colname="col_2" colwidth="33.3333*"/>
<colspec colname="col_3" colwidth="33.3334*"/>
<thead>
<row>
<entry><para>Functionality</para></entry>
<entry><para>SUSE Manager 2.1</para></entry>
<entry><para>SUSE Manager 3.2</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>Configuration Management</para></entry>
<entry><para>Based on Static Configuration</para></entry>
<entry><para>Redesigned with Salt Integration</para></entry>
</row>
<row>
<entry><para>Configuration Management</para></entry>
<entry><para>No Concept of States</para></entry>
<entry><para>States are Supported</para></entry>
</row>
<row>
<entry><para>Subscription Management</para></entry>
<entry><para>Limited Functionality</para></entry>
<entry><para>New Design, Full Featured</para></entry>
</row>
<row>
<entry><para>Monitoring</para></entry>
<entry><para>Traditional Monitoring Supported until End of Life</para></entry>
<entry><para>Nagios Compatible, Icinga Monitoring Server is Included</para></entry>
</row>
<row>
<entry><para>Installation Approach</para></entry>
<entry><para>Appliance Based</para></entry>
<entry><para>Installed as an Add-on</para></entry>
</row>
<row>
<entry><para>Compatibility</para></entry>
<entry><para>Compatibility Carried Forward to <phrase><phrase>SUSE</phrase> Manager</phrase> 3</para></entry>
<entry><para>Maintains full <phrase><phrase>SUSE</phrase> Manager</phrase> 2.1 Functionality <emphasis>Traditional Monitoring Removed</emphasis></para></entry>
</row>
</tbody>
</tgroup>
</table>
</chapter>
<appendix id="_gnu_licenses"><title>GNU Licenses</title><para>This appendix contains the GNU Free Documentation License version 1.2.</para>
</appendix>
<chapter id="_gnu_free_documentation_license"><title>GNU Free Documentation License</title><para>Copyright © 2000, 2001, 2002 Free Software Foundation, Inc.
51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.</para>
<bridgehead id="_0_preamble" renderas="sect2">0. PREAMBLE</bridgehead>
<para>The purpose of this License is to make a manual, textbook, or other functional and useful document "free" in the sense of freedom: to assure everyone the effective freedom to copy and redistribute it, with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way to get credit for their work, while not being considered responsible for modifications made by others.</para>
<para>This License is a kind of "copyleft", which means that derivative works of the document must themselves be free in the same sense.
It complements the GNU General Public License, which is a copyleft license designed for free software.</para>
<para>We have designed this License in order to use it for manuals for free software, because free software needs free documentation: a free program should come with manuals providing the same freedoms that the software does.
But this License is not limited to software manuals; it can be used for any textual work, regardless of subject matter or whether it is published as a printed book.
We recommend this License principally for works whose purpose is instruction or reference.</para>
<bridgehead id="_1_applicability_and_definitions" renderas="sect2">1. APPLICABILITY AND DEFINITIONS</bridgehead>
<para>This License applies to any manual or other work, in any medium, that contains a notice placed by the copyright holder saying it can be distributed under the terms of this License.
Such a notice grants a world-wide, royalty-free license, unlimited in duration, to use that work under the conditions stated herein.
The "Document", below, refers to any such manual or work.
Any member of the public is a licensee, and is addressed as "you". You accept the license if you copy, modify or distribute the work in a way requiring permission under copyright law.</para>
<para>A "Modified Version" of the Document means any work containing the Document or a portion of it, either copied verbatim, or with modifications and/or translated into another language.</para>
<para>A "Secondary Section" is a named appendix or a front-matter section of the Document that deals exclusively with the relationship of the publishers or authors of the Document to the Document’s overall subject (or to related matters) and contains nothing that could fall directly within that overall subject.
(Thus, if the Document is in part a textbook of mathematics, a Secondary Section may not explain any mathematics.) The relationship could be a matter of historical connection with the subject or with related matters, or of legal, commercial, philosophical, ethical or political position regarding them.</para>
<para>The "Invariant Sections" are certain Secondary Sections whose titles are designated, as being those of Invariant Sections, in the notice that says that the Document is released under this License.
If a section does not fit the above definition of Secondary then it is not allowed to be designated as Invariant.
The Document may contain zero Invariant Sections.
If the Document does not identify any Invariant Sections then there are none.</para>
<para>The "Cover Texts" are certain short passages of text that are listed, as Front-Cover Texts or Back-Cover Texts, in the notice that says that the Document is released under this License.
A Front-Cover Text may be at most 5 words, and a Back-Cover Text may be at most 25 words.</para>
<para>A "Transparent" copy of the Document means a machine-readable copy, represented in a format whose specification is available to the general public, that is suitable for revising the document straightforwardly with generic text editors or (for images composed of pixels) generic paint programs or (for drawings) some widely available drawing editor, and that is suitable for input to text formatters or for automatic translation to a variety of formats suitable for input to text formatters.
A copy made in an otherwise Transparent file format whose markup, or absence of markup, has been arranged to thwart or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount of text.
A copy that is not "Transparent" is called "Opaque".</para>
<para>Examples of suitable formats for Transparent copies include plain ASCII without markup, Texinfo input format, LaTeX input format, SGML or XML using a publicly available DTD, and standard-conforming simple HTML, PostScript or PDF designed for human modification.
Examples of transparent image formats include PNG, XCF and JPG.
Opaque formats include proprietary formats that can be read and edited only by proprietary word processors, SGML or XML for which the DTD and/or processing tools are not generally available, and the machine-generated HTML, PostScript or PDF produced by some word processors for output purposes only.</para>
<para>The "Title Page" means, for a printed book, the title page itself, plus such following pages as are needed to hold, legibly, the material this License requires to appear in the title page.
For works in formats which do not have any title page as such, "Title Page" means the text near the most prominent appearance of the work’s title, preceding the beginning of the body of the text.</para>
<para>A section "Entitled XYZ" means a named subunit of the Document whose title either is precisely XYZ or contains XYZ in parentheses following text that translates XYZ in another language.
(Here XYZ stands for a specific section name mentioned below, such as "Acknowledgements", "Dedications", "Endorsements", or "History".) To "Preserve the Title" of such a section when you modify the Document means that it remains a section "Entitled XYZ" according to this definition.</para>
<para>The Document may include Warranty Disclaimers next to the notice which states that this License applies to the Document.
These Warranty Disclaimers are considered to be included by reference in this License, but only as regards disclaiming warranties: any other implication that these Warranty Disclaimers may have is void and has no effect on the meaning of this License.</para>
<bridgehead id="_2_verbatim_copying" renderas="sect2">2. VERBATIM COPYING</bridgehead>
<para>You may copy and distribute the Document in any medium, either commercially or noncommercially, provided that this License, the copyright notices, and the license notice saying this License applies to the Document are reproduced in all copies, and that you add no other conditions whatsoever to those of this License.
You may not use technical measures to obstruct or control the reading or further copying of the copies you make or distribute.
However, you may accept compensation in exchange for copies.
If you distribute a large enough number of copies you must also follow the conditions in section 3.</para>
<para>You may also lend copies, under the same conditions stated above, and you may publicly display copies.</para>
<bridgehead id="_3_copying_in_quantity" renderas="sect2">3. COPYING IN QUANTITY</bridgehead>
<para>If you publish printed copies (or copies in media that commonly have printed covers) of the Document, numbering more than 100, and the Document’s license notice requires Cover Texts, you must enclose the copies in covers that carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on the back cover.
Both covers must also clearly and legibly identify you as the publisher of these copies.
The front cover must present the full title with all words of the title equally prominent and visible.
You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve the title of the Document and satisfy these conditions, can be treated as verbatim copying in other respects.</para>
<para>If the required texts for either cover are too voluminous to fit legibly, you should put the first ones listed (as many as fit reasonably) on the actual cover, and continue the rest onto adjacent pages.</para>
<para>If you publish or distribute Opaque copies of the Document numbering more than 100, you must either include a machine-readable Transparent copy along with each Opaque copy, or state in or with each Opaque copy a computer-network location from which the general network-using public has access to download using public-standard network protocols a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps, when you begin distribution of Opaque copies in quantity, to ensure that this Transparent copy will remain thus accessible at the stated location until at least one year after the last time you distribute an Opaque copy (directly or through your agents or retailers) of that edition to the public.</para>
<para>It is requested, but not required, that you contact the authors of the Document well before redistributing any large number of copies, to give them a chance to provide you with an updated version of the Document.</para>
<bridgehead id="_4_modifications" renderas="sect2">4. MODIFICATIONS</bridgehead>
<para>You may copy and distribute a Modified Version of the Document under the conditions of sections 2 and 3 above, provided that you release the Modified Version under precisely this License, with the Modified Version filling the role of the Document, thus licensing distribution and modification of the Modified Version to whoever possesses a copy of it.
In addition, you must do these things in the Modified Version:</para>
<orderedlist numeration="upperalpha">
<listitem>
<para>Use in the Title Page (and on the covers, if any) a title distinct from that of the Document, and from those of previous versions (which should, if there were any, be listed in the History section of the Document). You may use the same title as a previous version if the original publisher of that version gives permission.</para>
</listitem>
<listitem>
<para>List on the Title Page, as authors, one or more persons or entities responsible for authorship of the modifications in the Modified Version, together with at least five of the principal authors of the Document (all of its principal authors, if it has fewer than five), unless they release you from this requirement.</para>
</listitem>
<listitem>
<para>State on the Title page the name of the publisher of the Modified Version, as the publisher.</para>
</listitem>
<listitem>
<para>Preserve all the copyright notices of the Document.</para>
</listitem>
<listitem>
<para>Add an appropriate copyright notice for your modifications adjacent to the other copyright notices.</para>
</listitem>
<listitem>
<para>Include, immediately after the copyright notices, a license notice giving the public permission to use the Modified Version under the terms of this License, in the form shown in the Addendum below.</para>
</listitem>
<listitem>
<para>Preserve in that license notice the full lists of Invariant Sections and required Cover Texts given in the Document’s license notice.</para>
</listitem>
<listitem>
<para>Include an unaltered copy of this License.</para>
</listitem>
<listitem>
<para>Preserve the section Entitled "History", Preserve its Title, and add to it an item stating at least the title, year, new authors, and publisher of the Modified Version as given on the Title Page. If there is no section Entitled "History" in the Document, create one stating the title, year, authors, and publisher of the Document as given on its Title Page, then add an item describing the Modified Version as stated in the previous sentence.</para>
</listitem>
<listitem>
<para>Preserve the network location, if any, given in the Document for public access to a Transparent copy of the Document, and likewise the network locations given in the Document for previous versions it was based on. These may be placed in the "History" section. You may omit a network location for a work that was published at least four years before the Document itself, or if the original publisher of the version it refers to gives permission.</para>
</listitem>
<listitem>
<para>For any section Entitled "Acknowledgements" or "Dedications", Preserve the Title of the section, and preserve in the section all the substance and tone of each of the contributor acknowledgements and/or dedications given therein.</para>
</listitem>
<listitem>
<para>Preserve all the Invariant Sections of the Document, unaltered in their text and in their titles. Section numbers or the equivalent are not considered part of the section titles.</para>
</listitem>
<listitem>
<para>Delete any section Entitled "Endorsements". Such a section may not be included in the Modified Version.</para>
</listitem>
<listitem>
<para>Do not retitle any existing section to be Entitled "Endorsements" or to conflict in title with any Invariant Section.</para>
</listitem>
<listitem>
<para>Preserve any Warranty Disclaimers.</para>
</listitem>
</orderedlist>
<para>If the Modified Version includes new front-matter sections or appendices that qualify as Secondary Sections and contain no material copied from the Document, you may at your option designate some or all of these sections as invariant.
To do this, add their titles to the list of Invariant Sections in the Modified Version’s license notice.
These titles must be distinct from any other section titles.</para>
<para>You may add a section Entitled "Endorsements", provided it contains nothing but endorsements of your Modified Version by various parties—​for example, statements of peer review or that the text has been approved by an organization as the authoritative definition of a standard.</para>
<para>You may add a passage of up to five words as a Front-Cover Text, and a passage of up to 25 words as a Back-Cover Text, to the end of the list of Cover Texts in the Modified Version.
Only one passage of Front-Cover Text and one of Back-Cover Text may be added by (or through arrangements made by) any one entity.
If the Document already includes a cover text for the same cover, previously added by you or by arrangement made by the same entity you are acting on behalf of, you may not add another; but you may replace the old one, on explicit permission from the previous publisher that added the old one.</para>
<para>The author(s) and publisher(s) of the Document do not by this License give permission to use their names for publicity for or to assert or imply endorsement of any Modified Version.</para>
<bridgehead id="_5_combining_documents" renderas="sect2">5. COMBINING DOCUMENTS</bridgehead>
<para>You may combine the Document with other documents released under this License, under the terms defined in section 4 above for modified versions, provided that you include in the combination all of the Invariant Sections of all of the original documents, unmodified, and list them all as Invariant Sections of your combined work in its license notice, and that you preserve all their Warranty Disclaimers.</para>
<para>The combined work need only contain one copy of this License, and multiple identical Invariant Sections may be replaced with a single copy.
If there are multiple Invariant Sections with the same name but different contents, make the title of each such section unique by adding at the end of it, in parentheses, the name of the original author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of Invariant Sections in the license notice of the combined work.</para>
<para>In the combination, you must combine any sections Entitled "History" in the various original documents, forming one section Entitled "History"; likewise combine any sections Entitled "Acknowledgements", and any sections Entitled "Dedications". You must delete all sections Entitled "Endorsements".</para>
<bridgehead id="_6_collections_of_documents" renderas="sect2">6. COLLECTIONS OF DOCUMENTS</bridgehead>
<para>You may make a collection consisting of the Document and other documents released under this License, and replace the individual copies of this License in the various documents with a single copy that is included in the collection, provided that you follow the rules of this License for verbatim copying of each of the documents in all other respects.</para>
<para>You may extract a single document from such a collection, and distribute it individually under this License, provided you insert a copy of this License into the extracted document, and follow this License in all other respects regarding verbatim copying of that document.</para>
<bridgehead id="_7_aggregation_with_independent_works" renderas="sect2">7. AGGREGATION WITH INDEPENDENT WORKS</bridgehead>
<para>A compilation of the Document or its derivatives with other separate and independent documents or works, in or on a volume of a storage or distribution medium, is called an "aggregate" if the copyright resulting from the compilation is not used to limit the legal rights of the compilation’s users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not apply to the other works in the aggregate which are not themselves derivative works of the Document.</para>
<para>If the Cover Text requirement of section 3 is applicable to these copies of the Document, then if the Document is less than one half of the entire aggregate, the Document’s Cover Texts may be placed on covers that bracket the Document within the aggregate, or the electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole aggregate.</para>
<bridgehead id="_8_translation" renderas="sect2">8. TRANSLATION</bridgehead>
<para>Translation is considered a kind of modification, so you may distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special permission from their copyright holders, but you may include translations of some or all Invariant Sections in addition to the original versions of these Invariant Sections.
You may include a translation of this License, and all the license notices in the Document, and any Warranty Disclaimers, provided that you also include the original English version of this License and the original versions of those notices and disclaimers.
In case of a disagreement between the translation and the original version of this License or a notice or disclaimer, the original version will prevail.</para>
<para>If a section in the Document is Entitled "Acknowledgements", "Dedications", or "History", the requirement (section 4) to Preserve its Title (section 1) will typically require changing the actual title.</para>
<bridgehead id="_9_termination" renderas="sect2">9. TERMINATION</bridgehead>
<para>You may not copy, modify, sublicense, or distribute the Document except as expressly provided for under this License.
Any other attempt to copy, modify, sublicense or distribute the Document is void, and will automatically terminate your rights under this License.
However, parties who have received copies, or rights, from you under this License will not have their licenses terminated so long as such parties remain in full compliance.</para>
<bridgehead id="_10_future_revisions_of_this_license" renderas="sect2">10. FUTURE REVISIONS OF THIS LICENSE</bridgehead>
<para>The Free Software Foundation may publish new, revised versions of the GNU Free Documentation License from time to time.
Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns.
See <ulink url="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</ulink>.</para>
<para>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this License "or any later version" applies to it, you have the option of following the terms and conditions either of that specified version or of any later version that has been published (not as a draft) by the Free Software Foundation.
If the Document does not specify a version number of this License, you may choose any version ever published (not as a draft) by the Free Software Foundation.</para>
<bridgehead id="_addendum_how_to_use_this_license_for_your_documents" renderas="sect2">ADDENDUM: How to use this License for your documents</bridgehead>
<screen>Copyright (c) YEAR YOUR NAME.
   Permission is granted to copy, distribute and/or modify this document
   under the terms of the GNU Free Documentation License, Version 1.2
   or any later version published by the Free Software Foundation;
   with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
   A copy of the license is included in the section entitled“GNU
   Free Documentation License”.</screen>
<para>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts, replace the “
with…​Texts.”
line with this:</para>
<screen>with the Invariant Sections being LIST THEIR TITLES, with the
   Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</screen>
<para>If you have Invariant Sections without Cover Texts, or some other combination of the three, merge those two alternatives to suit the situation.</para>
<para>If your document contains nontrivial examples of program code, we recommend releasing these examples in parallel under your choice of free software license, such as the GNU General Public License, to permit their use in free software.</para>
</chapter>
</book>
<book id="book.suma.reference.manual"><bookinfo><title>SUSE Manager 3.2</title><date/><legalnotice><para/></legalnotice></bookinfo>
  <?dbjsp dir="reference/en-US"?>
  <?dbjsp filename="index.jsp"?>
 <preface id="preface.susemanager.user"><title>About This Guide</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> enables you to efficiently manage a set of Linux systems and keep them up-to-date.
It provides automated and cost-effective software management, asset management, system provisioning, and monitoring capabilities.
{susemgr} is compatible with Red Hat Satellite Server and offers seamless management of both <phrase>SUSE Linux Enterprise</phrase> and <phrase>Red Hat Enterprise Linux</phrase> client systems.</para>
<note>
<title> Version Information</title>
<para>In this manual if not other specified,  version <phrase>3.2</phrase> is assumed and this version is required if a feature is discussed.
 <phrase>3.2</phrase> and  <phrase>3.2</phrase> Proxy were originally released as a SLES 12 SP3 extension.
Whenever features of the <phrase>3.2</phrase> host operating system are documented and not other specified version 12 SP3 is assumed.</para>
</note>
<para>This manual explains the features of the Web interface and is intended for <phrase><phrase>SUSE</phrase> Manager</phrase> administrators and administrators with restricted roles for specific tasks.
On certain topics we also provide background information, while some chapters contain links to additional documentation resources.
The latter include additional documentation available on the installed system as well as documentation on the Internet.</para>
<para>For an overview of the documentation available for your product and the latest documentation updates, refer to <ulink url="http://www.suse.com/documentation/suse-manager-3/">Available Documentation,window="_blank"</ulink> or to the following section.</para>
<para>HTML versions of the manuals are also available from the <emphasis role="strong">Help</emphasis> menu of the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface.</para>
<note>
<title>Obtaining the Release Notes</title>
<para>Although this manual reflects the most current information possible, read the <emphasis><phrase role="ref">SUSE Manager Release Notes</phrase></emphasis> for information that may not have been available prior to the finalization of the documentation.
The release notes can be found at <ulink url="http://www.suse.com/documentation/suse-manager-3/">SUSE Manager Release Notes,window="_blank"</ulink>.</para>
</note>
</preface>
<chapter id="_available_documentation"><title>Available Documentation</title><para>The following manuals are available on this product:</para>
<variablelist>
<varlistentry>
<term><xref linkend="book.suma.getting-started"/></term>
<listitem>
<para>Lists installation scenarios and example topologies for different <phrase><phrase>SUSE</phrase> Manager</phrase> setups.
Guides you step by step through the installation, setup and basic configuration of <phrase><phrase>SUSE</phrase> Manager</phrase>.
Also contains detailed information about <phrase><phrase>SUSE</phrase> Manager</phrase> maintenance and troubleshooting.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><xref linkend="book.suma.reference.manual"/></term>
<listitem>
<para>Reference documentation that covers the Web interface to <phrase><phrase>SUSE</phrase> Manager</phrase> (Web UI).</para>
</listitem>
</varlistentry>
<varlistentry>
<term><xref linkend="book.suma.best.practices"/></term>
<listitem>
<para>Best practices on selected topics.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><xref linkend="book.suma.advanced.topics"/></term>
<listitem>
<para>A collection of advanced topics not covered under the Best Practices Guide.</para>
</listitem>
</varlistentry>
</variablelist>
<para>HTML versions of the product manuals can be found in the installed system under <filename>/usr/share/doc/manual</filename>.
Find the latest documentation updates at <ulink url="http://www.suse.com/documentation/suse-manager/">Latest Docmentation,window="_blank"</ulink> where you can download PDF or HTML versions of the manuals for your product.</para>
</chapter>
<chapter id="_feedback"><title>Feedback</title><para>Several feedback channels are available:</para>
<variablelist>
<varlistentry>
<term>Bugs and Enhancement Requests</term>
<listitem>
<para>For services and support options available for your product, refer to <ulink url="http://www.suse.com/support/">http://www.suse.com/support/</ulink>.</para>
<para>To report bugs for a product component, go to <ulink url="https://scc.suse.com/support/requests">https://scc.suse.com/support/requests</ulink>, log in, and click <emphasis role="strong">Create New</emphasis>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>User Comments</term>
<listitem>
<para>We want to hear your comments about and suggestions for this manual and the other documentation included with this product.
Use the User Comments feature at the bottom of each page in the online documentation or go to <ulink url="http://www.suse.com/doc/feedback.html">http://www.suse.com/doc/feedback.html</ulink> and enter your comments there.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Mail</term>
<listitem>
<para>For feedback on the documentation of this product, you can also send a mail to <email>doc-team@suse.de</email>.
Make sure to include the document title, the product version and the publication date of the documentation.
To report errors or suggest enhancements, provide a concise description of the problem and refer to the respective section number and page (or URL).</para>
</listitem>
</varlistentry>
</variablelist>
</chapter>
<chapter id="_documentation_conventions"><title>Documentation Conventions</title><para>The following typographical conventions are used in this manual:</para>
<itemizedlist>
<listitem>
<para><filename>/etc/passwd</filename> : directory names and file names</para>
</listitem>
<listitem>
<para><replaceable>placeholder</replaceable>: replace <replaceable>placeholder</replaceable> with the actual value</para>
</listitem>
<listitem>
<para><varname>PATH</varname>: the environment variable PATH</para>
</listitem>
<listitem>
<para><command>ls</command>, <option>--help</option>: commands, options, and parameters</para>
</listitem>
<listitem>
<para><literal role="username">user</literal> : users or groups</para>
</listitem>
<listitem>
<para><systemitem class="resource">packagename</systemitem> : name of a package</para>
</listitem>
<listitem>
<para><keycap>Alt</keycap> , <keycombo><keycap>Alt</keycap><keycap>F1</keycap></keycombo> : a key to press or a key combination; keys are shown in uppercase as on a keyboard</para>
</listitem>
<listitem>
<para><menuchoice><guimenu>File</guimenu> <guimenu>Save As</guimenu></menuchoice>, <guimenu>Cancel</guimenu>: menu items, buttons</para>
</listitem>
<listitem>
<para>This paragraph is only relevant for the x86_64 architecture. The arrows mark the beginning and the end of the text block.</para>
<para>This paragraph is only relevant for the architectures <literal>z Systems</literal> and <literal>POWER</literal>.
The arrows mark the beginning and the end of the text block.</para>
</listitem>
<listitem>
<para><emphasis>Dancing Penguins</emphasis> (Chapter <emphasis>Penguins</emphasis>, ↑ Another Manual): This is a reference to a chapter in another manual.</para>
</listitem>
</itemizedlist>
</chapter>
<chapter id="_special_susemgr_documentation_conventions"><title>Special SUSE Manager Documentation Conventions</title><para>Additionally, the following typographical conventions are used in this manual:</para>
<itemizedlist>
<listitem>
<para>[<emphasis>system_type</emphasis>]: This tag is used in chapter or section titles and indicates that this feature is only available for registered client of that system type. For example, these system types could appear in this context: [Management] (= clients registered via the traditional bootstrap method), [Salt] (= Salt minions), [Proxy], etc.</para>
</listitem>
</itemizedlist>
</chapter>
<chapter id="ref.webui.overview"><title>Overview and Navigation</title><sect1 id="ref.webui.overview.intro"><sectioninfo><abstract>
<para>This topic introduces you to the <phrase><phrase>SUSE</phrase> Manager</phrase> WebUI.
This section covers the <guimenu>Home</guimenu> menu.</para>
</abstract></sectioninfo><title>Overview</title>
<para>Entering the <phrase><phrase>SUSE</phrase> Manager</phrase> URL in a browser leads you to the <guimenu>Sign In</guimenu> screen.</para>
<para>Before logging in, select <menuchoice><guimenu>Header</guimenu> <guimenu>About</guimenu></menuchoice>, to browse and search for available documentation topics.
You may reset your username and password from the <menuchoice><guimenu>About</guimenu> <guimenu>Lookup Login/Password</guimenu></menuchoice> page.
For more information, see: <xref linkend="ref.webui.overview.account"/></para>
</sect1>
</chapter>
<chapter id="ref.webui.intro"><title>Navigation</title><para>The top bar provides access to commonly used tools and user settings.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>topnav</phrase></textobject><imageobject>
<imagedata fileref="topnav.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>The right part of the top bar contains functionalities such as a bell icon with a counter bubble of unread notification messages, optionally, an eye icon with a context legend to the current page, quick search, links to background information, user preferences, and sign off.
On the left is the so-called breadcrumb.
The breadcrumb tells you how far you are from the root of the menu and it brings you back to any previous step.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home overview legend</phrase></textobject><imageobject>
<imagedata fileref="home-overview-legend.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>The left navigation bar is the main menu to the <phrase><phrase>SUSE</phrase> Manager</phrase> Web UI from where you load the Web UI pages.
If you click a the label of a menu entry you either open that page, or, if it is just a container of sub-entries, it expands this part of the menu tree without actually loading a page.
To collaps all open parts of the menu system, click the <guimenu>Clear Menus</guimenu> button at the top of menu, right to the <literal role="guimenu">Search page</literal> field.
If you click the small circle icon on the right of a menu label, the first available page of that menu entry will get loaded and displayed automatically.
Enter a search string in the <literal role="guimenu">Search page</literal> field to find an entry of the menu tree.
Available menu entries depend on the roles of the user.</para>
<para>Only <phrase><phrase>SUSE</phrase> Manager</phrase> Administrators see the following navigation items:</para>
<itemizedlist>
<listitem>
<para><menuchoice><guimenu>Main Menu</guimenu> <guimenu>Images</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Main Menu</guimenu> <guimenu>Users</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu></menuchoice></para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>sidenav</phrase></textobject><imageobject>
<imagedata fileref="sidenav.png" width="40%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Some pages have tabs and subtabs. These tabs offer an additional layer of granularity in performing tasks for systems or users.
The following example displays the tabs and subtabs available under <literal role="guimenu">System Details</literal>.
Green bars underline active tabs.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>subtabs</phrase></textobject><imageobject>
<imagedata fileref="subtabs.png" width="60%"/>
</imageobject></mediaobject>
</informalfigure>
<important>
<title>Views Depending on User Roles</title>
<para>This guide covers the administrator user role level, some tabs, pages, and even whole categories described here may not be visible to you. Text markers are not used to identify which functions are available to each user role level.</para>
</important>
<sect1 id="ref.webui.intro.categories_pages"><title>Categories and Pages</title><para>This section summarizes all of the categories and primary pages (those linked from the left navigation bar) within the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface (Web UI). It does not list the many subpages, tabs and subtabs accessible from the individual pages.
Each area of the Web interface is explained in detail later in this guide.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>sidenav</phrase></textobject><imageobject>
<imagedata fileref="sidenav.png" width="40%"/>
</imageobject></mediaobject>
</informalfigure>
<formalpara>
<title>Main Menu+Home</title>
<para>Check your tasks and systems.
View and manage your primary account information and get help.</para>
</formalpara>
<itemizedlist>
<listitem>
<para/>
<formalpara>
<title>Overview</title>
<para>Obtain a quick overview of your account.
This page notifies you if your systems need attention, provides a quick link directly to these systems, displays the most recent patch alerts for your account, and recently registered systems.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Your Account</title>
<para>Update your personal profile, addresses, email, and credentials.
Deactivate your account.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Your Preferences</title>
<para>Indicate if you wish to receive email notifications about available patches for your systems.
Set how many items are displayed in system and group lists.
Set contents of the overview start page.
Select your preferred CSV separator.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Locale Preferences</title>
<para>Configure timezone.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Your Organization</title>
<para>Update organization configuration and display organization trusts.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title>Main Menu+Systems</title>
<para>Manage all your systems (including virtual guests) here.</para>
</formalpara>
<itemizedlist>
<listitem>
<para/>
<formalpara>
<title>Overview</title>
<para>View a summary of your systems or system groups showing how many available patches each system has and which systems are entitled.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Systems</title>
<para>Select and view subsets of your systems by specific criteria, such as Virtual Systems, Unprovisioned Systems, Recently Registered, Proxy, and Inactive.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>System Groups</title>
<para>List your system groups.
Create additional groups.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>System Set Manager</title>
<para>Perform various actions on sets of systems, including scheduling patch updates, package management, listing and creating new groups, managing channel entitlements, deploying configuration files, schedule audits, apply system states, and check status.
The availability of these actions depend on the system type.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Bootstrapping</title>
<para>Bootstrap minion machines using SSH.
Input SSH credentials and the activation key the selected system will use for its software sources.
SUSE Manager will install required software (salt-minion packages on the client machine) and remotely perform the registration.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Visualization</title>
<para>Graphically visualize the client topology.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Advanced Search</title>
<para>Quickly search all your systems by specific criteria, such as name, hardware, devices, system info, networking, packages, and location.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Activation Keys</title>
<para>Generate an activation key for a <phrase><phrase>SUSE</phrase> Manager</phrase>-entitled system.
This activation key can be used to grant a specific level of entitlement or group membership to a newly registered system using the <command>rhnreg_ks</command> command.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Stored Profiles</title>
<para>View system profiles used to provision systems.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Custom System Info</title>
<para>Create and edit system information keys with completely customizable values assigned while provisioning systems.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Autoinstallation</title>
<para>Display and modify various aspects of autoinstallation profiles (Kickstart and AutoYaST) used in provisioning systems.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Software Crashes</title>
<para>List software crashes grouped by UUID.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Virtual Host Managers</title>
<para>Display and modify virtual host managers, file-based or VMware-based.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title>Salt</title>
<para>View all minions.
Manage on-boarding, remote commands, and states catalogs.</para>
</formalpara>
<itemizedlist>
<listitem>
<para/>
<formalpara>
<title>Keys</title>
<para>Manage minion keys.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Remote Commands</title>
<para>Execute remote commands on targeted systems.
Select the preview button to ensure selected targets are available and click Run to execute.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>State Catalog</title>
<para>Create, store, and manage states for your Salt minions from the State Catalog.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title>Main Menu+Images</title>
<para>Image building and inspection.</para>
</formalpara>
<itemizedlist>
<listitem>
<para/>
<formalpara>
<title>Images</title>
<para>View all built images.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Build</title>
<para>Execute image build.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Profiles</title>
<para>View and create image building profiles.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Stores</title>
<para>View and create image stores.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title>Main Menu+Patches</title>
<para>View and manage patch (errata) alerts here.</para>
</formalpara>
<itemizedlist>
<listitem>
<para/>
<formalpara>
<title>Patches</title>
<para>Lists patch alerts and downloads associated RPMs relevant to your systems.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Advanced Search</title>
<para>Search patch alerts based on specific criteria, such as synopsis, advisory type, and package name.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Manage Patches</title>
<para>Manage the patches for an organization’s channels.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Clone Patches</title>
<para>Clone patches for an organization for ease of replication and distribution across an organization.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title>Software</title>
<para>View and manage the available <phrase><phrase>SUSE</phrase> Manager</phrase> channels and the files they contain.</para>
</formalpara>
<itemizedlist>
<listitem>
<para/>
<formalpara>
<title>Main Menu+Channels</title>
<para>View a list of all software channels and those applicable to your systems.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Package Search</title>
<para>Search packages using all or some portion of the package name, description, or summary, with support for limiting searches to supported platforms.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Manage Software Channels</title>
<para>Create and edit channels used to deploy configuration files.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Distribution Channel Mapping</title>
<para>Define default base channels for servers according to their operating system or architecture when registering.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title>Main Menu+Audit</title>
<para>View and search CVE audits, system subscriptions, and OpenSCAP scans.</para>
</formalpara>
<itemizedlist>
<listitem>
<para/>
<formalpara>
<title>CVE Audit</title>
<para>View a list of systems with their patch status regarding a given CVE (Common Vulnerabilities and Exposures) number.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Subscription Matching</title>
<para>List subscriptions.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>OpenSCAP</title>
<para>View and search OpenSCAP (Security Content Automation Protocol) scans.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title>Main Menu+Configuration</title>
<para>Keep track of and manage configuration channels, actions, individual configuration files, and systems with <phrase><phrase>SUSE</phrase> Manager</phrase>-managed configuration files.</para>
</formalpara>
<itemizedlist>
<listitem>
<para/>
<formalpara>
<title>Overview</title>
<para>A general dashboard view that shows a configuration summary.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Configuration Channels</title>
<para>List and create configuration channels from which any subscribed system can receive configuration files.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Configuration Files</title>
<para>List and create files from which systems receive configuration input.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Systems</title>
<para>List the systems that have <phrase><phrase>SUSE</phrase> Manager</phrase>-managed configuration files.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title>Main Menu+Schedule</title>
<para>Keep track of your scheduled actions.</para>
</formalpara>
<itemizedlist>
<listitem>
<para/>
<formalpara>
<title>Pending Actions</title>
<para>List scheduled actions that have not been completed.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Failed Actions</title>
<para>List scheduled actions that have failed.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Completed Actions</title>
<para>List scheduled actions that have been completed.
Completed actions can be archived at any time.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Archived Actions</title>
<para>List completed actions that have been selected to archive.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Action Chains</title>
<para>View and edit defined action chains.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title>Main Menu+Users</title>
<para>View and manage users in your organization.</para>
</formalpara>
<itemizedlist>
<listitem>
<para/>
<formalpara>
<title>User List</title>
<para>List users in your organization.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>System Group Configuration</title>
<para>Configure user group creation.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title>Main Menu+Admin</title>
<para>Use the Setup Wizard to configure <phrase><phrase>SUSE</phrase> Manager</phrase>.
List, create, and manage one or more <phrase><phrase>SUSE</phrase> Manager</phrase> organizations.
The <phrase><phrase>SUSE</phrase> Manager</phrase> administrator can assign channel entitlements, create and assign administrators for each organization, and other tasks.</para>
</formalpara>
<itemizedlist>
<listitem>
<para/>
<formalpara>
<title>Setup Wizard</title>
<para>Streamlined configuration of basic tasks.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Organizations</title>
<para>List and create new organizations.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Users</title>
<para>List all users known by <phrase><phrase>SUSE</phrase> Manager</phrase>, across all organizations.
Click individual user names to change administrative privileges of the user.</para>
</formalpara>
<note>
<para>Users created for organization administration can only be configured by the organization administrator, <emphasis>not</emphasis> the <phrase><phrase>SUSE</phrase> Manager</phrase>  administrator.</para>
</note>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Manager Configuration</title>
<para>Make General configuration changes to the <phrase><phrase>SUSE</phrase> Manager</phrase> server, including Proxy settings, Certificate configuration, Bootstrap Script configuration, Organization changes, and Restart the <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>ISS Configuration</title>
<para>Configure master and slave servers for inter-server synchronization.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Task Schedules</title>
<para>View and create schedules.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Task Engine Status</title>
<para>View the status of the various tasks of the <phrase><phrase>SUSE</phrase> Manager</phrase> task engine.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Show Tomcat Logs</title>
<para>Display the log entries of the Tomcat server, on which the <phrase><phrase>SUSE</phrase> Manager</phrase> server is running.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title>Main Menu+Help</title>
<para>List references to available help resources such as the product documentation, release notes, and a general search for all of this.</para>
</formalpara>
<formalpara>
<title>Main Menu+External Links</title>
<para>List external links to the knowledge base and the online documentation.</para>
</formalpara>
</sect1>
<sect1 id="ref.webui.intro.patch_alerts"><title>Patch Alert Icons</title><para>Throughout <phrase><phrase>SUSE</phrase> Manager</phrase> you will see three patch (errata) alert icons.</para>
<itemizedlist>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-shield.svg"/>
</imageobject>
<textobject role="description"><phrase>Security Alert</phrase></textobject>
</inlinemediaobject>—represents a security alert.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-bug.svg"/>
</imageobject>
<textobject role="description"><phrase>Bug Fix Alert</phrase></textobject>
</inlinemediaobject>—represents a bug fix alert.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="spacewalk-icon-enhancement.svg"/>
</imageobject>
<textobject role="description"><phrase>Enhancement Alert</phrase></textobject>
</inlinemediaobject>—represents an enhancement alert.</para>
</listitem>
</itemizedlist>
<para>On the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Home</guimenu> <guimenu>Overview</guimenu></menuchoice> page, in the <literal role="guimenu">Relevant Security Patches</literal> section click the patch advisory to view details about the patch or click the number of affected systems to see which systems are affected by the patch alert.
Both links take you to tabs of the <literal role="guimenu">Patch Details</literal> page.
If all patches are installed, there is just a <literal role="guimenu">View All Patches</literal> link to open the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Patches</guimenu></menuchoice> page.
Refer to
<xref linkend="s3-sm-errata-details"/>
for more information.</para>
</sect1>
<sect1 id="ref.webui.intro.quick_search"><title>Search</title><para>In the top bar, <phrase><phrase>SUSE</phrase> Manager</phrase> offers a search functionality for Packages, Patches (Errata), Documentation, and Systems.
To use the search, click the magnifier, then select the search item (choose from <literal role="guimenu">Systems</literal>, <literal role="guimenu">Packages</literal>, <literal role="guimenu">Documentation</literal>, and <literal role="guimenu">Patches</literal>) and type a string to look for a name match.
Click the <guimenu>Search</guimenu> button.
Your results appear at the bottom of the page.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>top search</phrase></textobject><imageobject>
<imagedata fileref="top_search.png" width="40%"/>
</imageobject></mediaobject>
</informalfigure>
<para>If you misspell a word during your search query, the <phrase><phrase>SUSE</phrase> Manager</phrase> search engine performs approximate string (or fuzzy string) matching, returning results that may be similar in spelling to your misspelled queries.</para>
<para>For example, if you want to search for a certain development system called <literal>test-1.example.com</literal> that is registered with <phrase><phrase>SUSE</phrase> Manager</phrase>, but you misspell your query <literal>tset</literal>, the <literal>test-1.example.com</literal> system still appears in the search results.</para>
<note>
<para>If you add a distribution or register a system with a <phrase><phrase>SUSE</phrase> Manager</phrase> server, it may take several minutes for it to be indexed and appear in search results.</para>
</note>
<itemizedlist>
<listitem>
<para>For advanced System searches, refer to
<xref linkend="ref.webui.systems.search"/>.</para>
</listitem>
<listitem>
<para>For advanced Patch or Errata searches, refer to
<xref linkend="ref.webui.patches.search"/>.</para>
</listitem>
<listitem>
<para>For advanced Package searches, refer to
<xref linkend="ref.webui.channels.search"/>.</para>
</listitem>
<listitem>
<para>For advanced Documentation searches, refer to
<xref linkend="s2-sm-your-rhn-help-docsearch"/>.</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="ref.webui.intro.systems_selected"><title>Systems Selected</title><para>On the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>Overview</guimenu></menuchoice> page, if you mark the check box next to a system, the <literal role="guimenu">system selected</literal> number on the right area of the top bar increases.
This number keeps track of the systems you have selected for use in the System Set Manager (SSM); for more information, see to
<xref linkend="ref.webui.systems.ssm"/>.</para>
<para>At any time, it identifies the number of selected systems and provides the means to work (simultaneously) with an entire selection.
Clicking the the rubber symbol (<literal role="guimenu">Clear</literal>) deselects all systems, while clicking the <literal role="guimenu">system selected</literal> string (<literal role="guimenu">Manage</literal>) launches the System Set Manager with your selected systems in place.</para>
<para>These systems can be selected in a number of ways.
Only systems with at least a Management system role are eligible for selection.
On all system and system group lists, a check boxes exist for this purpose.
Each time you select a check box next to the systems or groups the <literal role="guimenu">systems selected</literal> counter at the top of the page changes to reflect the new number of systems ready for use in the System Set Manager.</para>
</sect1>
<sect1 id="ref.webui.intro.list_nav"><title>Lists</title><para>The information within most categories is presented in the form of lists.
These lists have some common features for navigation.
For instance, you can set the number of <literal role="guimenu">items per page</literal> and navigate through virtually all lists by clicking the back and next arrows above and below the right side of the table.
Some lists also offer the option to retrieve items alphabetically by clicking numbers or letters from the <literal role="guimenu">Alphabetical Index</literal> above the table.</para>
<note>
<title>Performing Large List Operations</title>
<para>Performing operations on large lists—such as removing RPM packages from the database with the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface—may take some time and the system may become unresponsive or signal <quote>Internal Server Error 500</quote>.
Nevertheless, the command will succeed in the background if you wait long enough.</para>
</note>
<para>Login to the <phrase><phrase>SUSE</phrase> Manager</phrase> WebUI to view the <menuchoice><guimenu>Home</guimenu> <guimenu>Overview</guimenu></menuchoice> page.
The Overview page contains summary panes that provide important information about your systems.</para>
<para><menuchoice><guimenu>Home</guimenu> <guimenu>Overview</guimenu></menuchoice> is split into functional sections, with the most critical sections displayed first.
Users can control which of the following sections are displayed by making selections on the <menuchoice><guimenu>Home</guimenu> <guimenu>Your Preferences</guimenu></menuchoice> page.
Refer to <xref linkend="ref.webui.overview.prefs"/> for more information.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home overview</phrase></textobject><imageobject>
<imagedata fileref="home_overview.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para>The <menuchoice><guimenu>Overview</guimenu> <guimenu>Tasks</guimenu></menuchoice> pane lists the most common tasks an administrator performs via the Web interface.
Click any link to reach the page within <phrase><phrase>SUSE</phrase> Manager</phrase> that allows you to accomplish that task.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home overview tasks pane</phrase></textobject><imageobject>
<imagedata fileref="home_overview_tasks_pane.png" width="40%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>The <menuchoice><guimenu>Overview</guimenu> <guimenu>Inactive Systems</guimenu></menuchoice> list provides a list of all systems that have stopped checking into <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home overview inactive systems pane</phrase></textobject><imageobject>
<imagedata fileref="home_overview_inactive_systems_pane.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>The <menuchoice><guimenu>Overview</guimenu> <guimenu>Most Critical Systems</guimenu></menuchoice> pane lists the most critical systems within your organization.
It provides a link to quickly view those systems and displays a summary of the patch updates that have yet to be applied to those systems.
Click the name of a system to see its <menuchoice><guimenu>System</guimenu> <guimenu>System Details</guimenu></menuchoice> page and apply the patch updates.
Below the list is a link to <menuchoice><guimenu>Overview</guimenu> <guimenu>View All Critical Systems</guimenu></menuchoice> on one page.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home overview critical systems pane</phrase></textobject><imageobject>
<imagedata fileref="home_overview_critical_systems_pane.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>The <menuchoice><guimenu>Overview</guimenu> <guimenu>Recently Scheduled Actions</guimenu></menuchoice> pane lists all actions less than thirty days old and their status: failed, completed, or pending.
Click the label of any given action to view its details page.
Below the list is a link to <menuchoice><guimenu>Overview</guimenu> <guimenu>View All Scheduled Actions</guimenu></menuchoice> on one page, which lists all actions that have not yet been carried out on your client systems.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home overview pending actions pane</phrase></textobject><imageobject>
<imagedata fileref="home_overview_pending_actions_pane.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>The <menuchoice><guimenu>Overview</guimenu> <guimenu>Relevant Security Patches</guimenu></menuchoice> pane lists all available security patches that have yet to be applied to some or all of your client systems.
It is critical that you apply these security patches to keep your systems secure.
Below this list find links to all available patches <menuchoice><guimenu>Overview</guimenu> <guimenu>View All Patches</guimenu></menuchoice>.
You may also view patches that only apply to your systems <menuchoice><guimenu>Overview</guimenu> <guimenu>View All Relevant Patches</guimenu></menuchoice>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home overview latest errata pane</phrase></textobject><imageobject>
<imagedata fileref="home_overview_latest_errata_pane.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>The <menuchoice><guimenu>Overview</guimenu> <guimenu>System Group Name</guimenu></menuchoice> pane lists groups you may have created and indicates whether the systems in those groups are fully updated.
Click the link below this section to get to the <menuchoice><guimenu>System</guimenu> <guimenu>System Groups</guimenu></menuchoice> page, where you can choose <menuchoice><guimenu>System Groups</guimenu> <guimenu>Group Name</guimenu></menuchoice> to use with the System Set Manager.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home overview system groups pane</phrase></textobject><imageobject>
<imagedata fileref="home_overview_system_groups_pane.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>The <menuchoice><guimenu>Overview</guimenu> <guimenu>Recently Registered Systems</guimenu></menuchoice> pane lists all systems added to <phrase><phrase>SUSE</phrase> Manager</phrase> in the past 30 days.
Select a system’s name to see its <menuchoice><guimenu>System</guimenu> <guimenu>System Details</guimenu></menuchoice> page.
At the bottom of the <menuchoice><guimenu>Overview</guimenu> <guimenu>Recently Registered Systems</guimenu></menuchoice> pane select the <menuchoice><guimenu>Overview</guimenu> <guimenu>View All Recently Registered Systems</guimenu></menuchoice> link to view all recently registered systems on one page.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home overview recently registered pane</phrase></textobject><imageobject>
<imagedata fileref="home_overview_recently_registered_pane.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
</itemizedlist>
<para>To return to this page, select <menuchoice><guimenu>Home</guimenu> <guimenu>Overview</guimenu></menuchoice> on the left bar that is also known as <emphasis>The Menu</emphasis>
.</para>
</sect1>
<sect1 id="ref.webui.overview.notifications"><title>Notification Messages</title><para>The <menuchoice><guimenu>Home</guimenu> <guimenu>Notification Messages</guimenu></menuchoice> page allows you to manage your notification messages of the <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home notification messages</phrase></textobject><imageobject>
<imagedata fileref="home_notification_messages.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<sect2 id="_notification_messages_tabs"><title>Notification Messages Tabs</title><para>The <menuchoice><guimenu>Home</guimenu> <guimenu>Notification Messages</guimenu></menuchoice> page displays two tabs:</para>
<itemizedlist>
<listitem>
<para><menuchoice><guimenu>Notification Messages</guimenu> <guimenu>Unread Messages</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Notification Messages</guimenu> <guimenu>All Messages</guimenu></menuchoice></para>
</listitem>
</itemizedlist>
<para>These tabs contain a list of collected messages filtered by tab name.</para>
</sect2>
<sect2 id="_notification_messages_buttons"><title>Notification Messages Buttons</title><para>The following buttons are available for working with notification messages:</para>
<itemizedlist>
<listitem>
<para><guimenu>Refresh</guimenu> — Refreshes the message list</para>
</listitem>
<listitem>
<para><guimenu>Delete Selected Messages</guimenu> — Check any messages you would like removed and then mass delete them via this button.</para>
</listitem>
<listitem>
<para><guimenu>Mark all as Read</guimenu> — Mark all messages as read.</para>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="_notification_messages_legend"><title>Notification Messages Legend</title><para>Several columns provide information for each message:</para>
<itemizedlist>
<listitem>
<para><menuchoice><guimenu>Notification Messages</guimenu> <guimenu>Severity</guimenu></menuchoice> : The following severity levels are available and for every failure a customized button (in line with the message) is available to react to that failure:</para>
<itemizedlist>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="info-circle.svg" contentwidth="32" contentdepth="32"/>
</imageobject>
<textobject role="description"><phrase>Info</phrase></textobject>
</inlinemediaobject> — <emphasis role="strong">Info</emphasis></para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-warning.svg"/>
</imageobject>
<textobject role="description"><phrase>Warning</phrase></textobject>
</inlinemediaobject> — <emphasis role="strong">Warning</emphasis></para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="times-circle.svg"/>
</imageobject>
<textobject role="description"><phrase>Error</phrase></textobject>
</inlinemediaobject> — <emphasis role="strong">Error</emphasis></para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para><guimenu>Type</guimenu> : Available types are:</para>
<itemizedlist>
<listitem>
<para>Onboarding failed(<emphasis>Error</emphasis>)</para>
</listitem>
<listitem>
<para>Channel sync finished (<emphasis>Info</emphasis>)</para>
</listitem>
<listitem>
<para>Channel sync failed (<emphasis>Error</emphasis>)</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para><guimenu>Description</guimenu> : The text of the message with a link to the channel.</para>
</listitem>
<listitem>
<para><guimenu>Created</guimenu> : The date when the message was created.</para>
</listitem>
<listitem>
<para><guimenu>Action Read|Delete</guimenu> :</para>
<itemizedlist>
<listitem>
<para>Click the letter icon to flag a message as <emphasis>Read</emphasis> or <emphasis>Unread</emphasis>.</para>
</listitem>
<listitem>
<para>Click the waste bin icon delete a message immediately.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
<para>You can sort the messages by clicking a column label of the list header line.</para>
</sect2>
</sect1>
<sect1 id="ref.webui.overview.account"><title>User Account</title><para><remark role="fixme">Add a short description</remark></para><sect2 id="ref.webui.overview.account.your"><title>Your Account</title><para><indexterm>
<primary>WebLogic</primary><secondary>Your Account</secondary>
</indexterm>
<indexterm>
<primary>Your Account</primary>
</indexterm></para>
<para>Modify your personal information, such as name, password, and title from the <menuchoice><guimenu>Home</guimenu> <guimenu>User Account</guimenu> <guimenu>Your Account</guimenu></menuchoice> page.
To modify this information, make the changes in the appropriate text fields and click the <menuchoice><guimenu>Personal Info</guimenu> <guimenu>Update</guimenu></menuchoice> button at the bottom.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home user account user details</phrase></textobject><imageobject>
<imagedata fileref="home_user_account_user_details.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>If you change your <phrase><phrase>SUSE</phrase> Manager</phrase> password, for security reasons you will not see the new password while you enter it.
Replace the asterisks in the <menuchoice><guimenu>Personal Info</guimenu> <guimenu>Password</guimenu></menuchoice> and <menuchoice><guimenu>Personal Info</guimenu> <guimenu>Confirm Password</guimenu></menuchoice> text fields with the new password.</para>
<note>
<para>If you forget your password or username, proceed to the sign in screen and select the <menuchoice><guimenu>Header</guimenu> <guimenu>About</guimenu></menuchoice> link, then select the <menuchoice><guimenu>About</guimenu> <guimenu>Lookup Login/Password</guimenu></menuchoice> page.
Here you can either specify your login and email address or only your email address if you are not sure about the username.
Then click <guimenu>Send Password</guimenu> or <guimenu>Send Login</guimenu> respectively.</para>
</note>
</sect2>
<sect2 id="ref.webui.overview.account.addresses"><title>Addresses</title><para><indexterm>
<primary>Oracle</primary><secondary>Addresses</secondary>
</indexterm>
<indexterm>
<primary>Addresses</primary>
</indexterm></para>
<para>On the <menuchoice><guimenu>Home</guimenu> <guimenu>User Account</guimenu> <guimenu>Addresses</guimenu></menuchoice> page you can manage your mailing, billing and shipping addresses, and associated phone numbers.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home user account addresses</phrase></textobject><imageobject>
<imagedata fileref="home_user_account_addresses.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Click <menuchoice><guimenu>Addresses</guimenu> <guimenu>Fill in this address</guimenu></menuchoice> or <menuchoice><guimenu>Addresses</guimenu> <guimenu>Edit this address</guimenu></menuchoice> below the address to be modified or added, make your changes, and click <guimenu>Update</guimenu>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home user account edit address</phrase></textobject><imageobject>
<imagedata fileref="home_user_account_edit_address.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.overview.account.email"><title>Change Email</title><para><indexterm>
<primary>Oracle</primary><secondary>Email</secondary>
</indexterm>
<indexterm>
<primary>Email</primary>
</indexterm></para>
<para>Set the email <phrase><phrase>SUSE</phrase> Manager</phrase> sends notifications to on the <menuchoice><guimenu>Home</guimenu> <guimenu>User Account</guimenu> <guimenu>Change Email</guimenu></menuchoice> page.
If you would like to receive email notifications about patch alerts or daily summaries for your systems, check the <guimenu>Receive email notifications</guimenu> checkbox located on the <menuchoice><guimenu>Home</guimenu> <guimenu>Your Preferences</guimenu></menuchoice> page.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home user account change email</phrase></textobject><imageobject>
<imagedata fileref="home_user_account_change_email.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>To change your preferred email address, click <menuchoice><guimenu>Home</guimenu> <guimenu>User Account</guimenu> <guimenu>Change Email</guimenu></menuchoice> in the left navigation bar.
Enter your new email address and click the <guimenu>Update</guimenu> button.
Invalid email addresses like those ending in <literal>@localhost</literal> are filtered and rejected.</para>
</sect2>
<sect2 id="ref.webui.overview.account.deactivate"><title>Account Deactivation</title><para><indexterm>
<primary>account</primary><secondary>deactivate</secondary>
</indexterm>
<indexterm>
<primary>deactivate</primary>
</indexterm></para>
<para>The <menuchoice><guimenu>Home</guimenu> <guimenu>User Account</guimenu> <guimenu>Account Deactivation</guimenu></menuchoice> page provides a means to cancel your <phrase><phrase>SUSE</phrase> Manager</phrase> service.
To do so, click the <menuchoice><guimenu>Home</guimenu> <guimenu>User Account</guimenu> <guimenu>Deactivate Account</guimenu></menuchoice> button.
The Web interface returns you to the login screen.
If you attempt to log back in, an error message advises you to contact the <phrase><phrase>SUSE</phrase> Manager</phrase> administrator for your organization.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home user account account deactivation</phrase></textobject><imageobject>
<imagedata fileref="home_user_account_account_deactivation.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<note>
<title>SUSE ManagerAdministrator Account</title>
<para>If you are the only <phrase><phrase>SUSE</phrase> Manager</phrase> Administrator for your organization, you cannot deactivate your account.</para>
</note>
</sect2>
</sect1>
<sect1 id="ref.webui.overview.prefs"><title>Your Preferences</title><para><indexterm>
<primary>WebUI</primary><secondary>Your Preferences</secondary>
</indexterm>
<indexterm>
<primary>Your Preferences</primary>
</indexterm></para>
<para>The <menuchoice><guimenu>Home</guimenu> <guimenu>YourPreferences</guimenu></menuchoice> page allows you to configure <phrase><phrase>SUSE</phrase> Manager</phrase> options.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home your preferences</phrase></textobject><imageobject>
<imagedata fileref="home_your_preferences.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para><guimenu>Email Notifications</guimenu> — Determine whether you want to receive email every time a patch alert is applicable to one or more systems in your account.</para>
<important>
<para>This setting enables Management and Provisioning customers to receive a daily summary of system events.
These include actions affecting packages, such as scheduled patches, system reboots, or failures to check in.
In addition to selecting this check box, you must identify each system to be included in this summary email.
By default, all Management and Provisioning systems are included in the summary.
Add more systems either individually on the <menuchoice><guimenu>System</guimenu> <guimenu>System Details</guimenu></menuchoice> page or for multiple systems at once in the <menuchoice><guimenu>Systems</guimenu> <guimenu>System Set Manager</guimenu></menuchoice> interface.
Note that <phrase><phrase>SUSE</phrase> Manager</phrase> sends these summaries only to verified email addresses.
To disable all messages, simply deselect this check box.</para>
</important>
</listitem>
<listitem>
<para><menuchoice><guimenu>Your Preferences</guimenu> <guimenu>SUSE Manager List Page Size</guimenu></menuchoice> — Maximum number of items that appear in a list on a single page.
If more items are in the list, clicking the <guimenu>Next</guimenu> button displays the next group of items.
This preference applies to system lists, patch lists, package lists, and so on.</para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Your Preferences</guimenu> <guimenu>"Overview" Start Page</guimenu></menuchoice> — Select the information panes that are displayed on the <menuchoice><guimenu>Home</guimenu> <guimenu>Overview</guimenu></menuchoice> page.
Check the box to the left of each information pane that which be included.</para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Your Preferences</guimenu> <guimenu>Time Zone</guimenu></menuchoice> - Set the <phrase><phrase>SUSE</phrase> Manager</phrase> interface to your local time by selecting the appropriate <menuchoice><guimenu>Your Preferences</guimenu> <guimenu>Time Zone</guimenu></menuchoice> from the drop-down box.
Click the <guimenu>Save Preferences</guimenu> button to apply the selection.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home locale preferences</phrase></textobject><imageobject>
<imagedata fileref="home_locale_preferences.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para><menuchoice><guimenu>Your Preferences</guimenu> <guimenu>CSV Files</guimenu></menuchoice> — Select the separator character to be used in downloadable CSV files.
<guimenu>Comma</guimenu> is the default; as an alternative use <guimenu>Semicolon</guimenu> , which provides better compatibility with Microsoft Excel.</para>
</listitem>
</itemizedlist>
<para>After making changes to any of these options, click the <guimenu>Save Preferences</guimenu> button.</para>
</sect1>
<sect1 id="ref.webui.overview.org"><title>Your Organization</title><para>From the <menuchoice><guimenu>Home</guimenu> <guimenu>Your Organization</guimenu></menuchoice> tabs you can modify the following pages:</para>
<itemizedlist>
<listitem>
<para><menuchoice><guimenu>Your Organization</guimenu> <guimenu>Configuration</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Your Organization</guimenu> <guimenu>Organization Trusts</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Your Organization</guimenu> <guimenu>Configuration Channels</guimenu></menuchoice></para>
</listitem>
</itemizedlist>
<sect2 id="ref.webui.overview.org.config"><title>Configuration</title><para>On the <menuchoice><guimenu>Home</guimenu> <guimenu>Your Organization</guimenu> <guimenu>Configuration</guimenu></menuchoice> page modify your personal information, such as name, password, and title.
To modify any of this information, make the changes in the appropriate text fields and click the <guimenu>Update</guimenu> button at the bottom.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home your organization configuration</phrase></textobject><imageobject>
<imagedata fileref="home_your_organization_configuration.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.overview.org.trust"><title>Organization Trusts</title><para>The <menuchoice><guimenu>Home</guimenu> <guimenu>Your Organization</guimenu> <guimenu>Organization Trusts</guimenu></menuchoice> page displays the trusts established with your organization (that is, the organization with which you, the logged-in user, are associated).
The page also lists <guimenu>Channels Shared</guimenu>, which refers to channels available to your organization via others in the established trusts.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home your organization trusts</phrase></textobject><imageobject>
<imagedata fileref="home_your_organization_trusts.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>You can filter the list of trusts by keyword using the <guimenu>Filter by Organization</guimenu>
 text box and clicking <guimenu>Go</guimenu>
.</para>
</sect2>
<sect2 id="ref.webui.overview.org.cfgch"><title>Configuration Channels</title><para>The <guimenu>Configuration Channels</guimenu>
 page displays the channels which have been created and added using <menuchoice><guimenu>Configuration</guimenu> <guimenu>Configuration Channels</guimenu></menuchoice>
.</para>
<para>From <menuchoice><guimenu>Home</guimenu> <guimenu>Your
     Organization</guimenu> <guimenu>Configuration Channels</guimenu></menuchoice>
 you can select which configuration channels should be applied across your organization.
If there is more than one configuration channel selected you can specify the order of the channels.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>home your organization custom</phrase></textobject><imageobject>
<imagedata fileref="home_your_organization_custom.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<title>Procedure: Apply a Configuration Channel at the Organization Level</title>
<listitem>
<para>Create a channel using <menuchoice><guimenu>Configuration</guimenu> <guimenu>Configuration Channels</guimenu></menuchoice> or via the command line.</para>
</listitem>
<listitem>
<para>Browse to <menuchoice><guimenu>Home</guimenu> <guimenu>Your Organization</guimenu> <guimenu>Configuration Channels</guimenu></menuchoice> .</para>
</listitem>
<listitem>
<para>Use the search feature to locate a channel by name.</para>
</listitem>
<listitem>
<para>Select the check box for the channel to be applied and click the <guimenu>Save Changes</guimenu> button. The save button will save the change to the database but will not apply the channel.</para>
</listitem>
<listitem>
<para>Apply the channel by clicking the <guimenu>Apply</guimenu> button. The channel will be scheduled and applied to any systems included within the organization.</para>
</listitem>
</orderedlist>
</sect2>
</sect1>
</chapter>
<chapter id="ref.webui.systems.systems"><title>Systems</title><para>If you select <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>Overview</guimenu></menuchoice>, an overview of all Systems appears.
From this page you can select systems to perform actions on and may create system profiles.</para>
<sect1 id="ref.webui.systems.systems.intro"><title>Overview Conventions</title><para>The <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>Overview</guimenu></menuchoice> page displays a list of all your registered systems.
Several columns provide information about each system:</para>
<variablelist>
<varlistentry>
<term>Select box</term>
<listitem>
<para>Systems without a system type cannot be selected. To select systems, mark the appropriate check boxes.
Selected systems are added to the <emphasis role="strong">System Set Manager</emphasis>, where actions can be carried out simultaneously on all systems in the set.
For more information, see:
 <xref linkend="ref.webui.systems.ssm"/>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>System</term>
<listitem>
<para>The name of the system specified during registration.
The default name is the host name of the system.
Clicking the name of a system displays its <emphasis role="strong">System Details</emphasis> page.
For more information, see:
<xref linkend="s3-sm-system-details"/></para>
<itemizedlist>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="spacewalk-icon-virtual-host.svg"/>
</imageobject>
<textobject role="description"><phrase>Virtual Host</phrase></textobject>
</inlinemediaobject> — Virtual Host.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="spacewalk-icon-virtual-guest.svg"/>
</imageobject>
<textobject role="description"><phrase>Virtual Guest</phrase></textobject>
</inlinemediaobject> — Virtual Guest.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-236-non-virtual-system.svg"/>
</imageobject>
<textobject role="description"><phrase>Non-Virtual System</phrase></textobject>
</inlinemediaobject> — Non-Virtual System.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="spacewalk-icon-unprov-system.svg"/>
</imageobject>
<textobject role="description"><phrase>Unprovisioned System</phrase></textobject>
</inlinemediaobject> — Unprovisioned System.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Updates</term>
<listitem>
<para>Shows which type of update action is applicable to the system or confirms that the system is up-to-date.
Some icons are linked to related tasks.
For example, the standard Updates icon is linked to the <guimenu>Upgrade</guimenu> subtab of the packages list, while the Critical Updates icon links directly to the <guimenu>Software Patches</guimenu> page.</para>
<itemizedlist>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-check-circle.svg"/>
</imageobject>
<textobject role="description"><phrase>Check Circle</phrase></textobject>
</inlinemediaobject> — System is up-to-date.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-exclamation-circle.svg"/>
</imageobject>
<textobject role="description"><phrase>Exclamation Circle</phrase></textobject>
</inlinemediaobject> — Critical patch (errata) available, update <emphasis>strongly</emphasis> recommended.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-warning.svg"/>
</imageobject>
<textobject role="description"><phrase>Warning</phrase></textobject>
</inlinemediaobject> — Updates available and recommended.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-question-circle.svg"/>
</imageobject>
<textobject role="description"><phrase>Question</phrase></textobject>
</inlinemediaobject> — System not checking in properly (for 24 hours or more).</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-lock.svg"/>
</imageobject>
<textobject role="description"><phrase>Lock</phrase></textobject>
</inlinemediaobject> — System is locked; actions prohibited.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-rocket.svg"/>
</imageobject>
<textobject role="description"><phrase>Rocket</phrase></textobject>
</inlinemediaobject> — System is being deployed using AutoYaST or Kickstart.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-clock-o.svg"/>
</imageobject>
<textobject role="description"><phrase>Clock</phrase></textobject>
</inlinemediaobject> — Updates have been scheduled.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-times-circle.svg"/>
</imageobject>
<textobject role="description"><phrase>Times</phrase></textobject>
</inlinemediaobject> — System not entitled to any update service.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Patches</term>
<listitem>
<para>Total number of patch alerts applicable to the system.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Packages</term>
<listitem>
<para>Total number of package updates for the system, including packages related to patch alerts and newer versions of packages not related to patch alerts.
For example, if a client system that has an earlier version of a package installed gets subscribed to the appropriate base channel (such as <phrase>SUSE Linux Enterprise</phrase> 12 SP2), that channel may have an updated version of the package.
If so, the package appears in the list of available package updates.</para>
<important>
<title>Package Conflict</title>
<para>If <phrase><phrase>SUSE</phrase> Manager</phrase> identifies package updates for the system, but the package updater (such as Red Hat Update Agent or YaST) responds with a message such as "Your system is fully updated", a conflict likely exists in the system’s package profile or in the <filename>up2date</filename> configuration file.
To resolve the conflict, either schedule a package list update or remove the packages from the package exceptions list.
For more information, see:
<xref linkend="s3-sm-system-details"/></para>
</important>
</listitem>
</varlistentry>
<varlistentry>
<term>Configs</term>
<listitem>
<para>Total number of configuration files applicable to the system.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Base Channel</term>
<listitem>
<para>The primary channel for the system based on its operating system.
For more information, see:
<xref linkend="ref.webui.channels.software"/></para>
</listitem>
</varlistentry>
<varlistentry>
<term>System Type</term>
<listitem>
<para>Shows whether the system is managed and at what service level.</para>
</listitem>
</varlistentry>
</variablelist>
<para>Links in the navigation bar below <guimenu>Systems</guimenu> enable you to select and view predefined sets of your systems.
All of the options described above can be applied within these pages.</para>
</sect1>
<sect1 id="ref.webui.systems.overview"><title>Systems &gt; Overview</title><para>The <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>Overview</guimenu></menuchoice> page provides a summary of your systems, including their status, number of associated patches (errata) and packages, and their so-called system type.
Clicking the name of a system takes you to its <menuchoice><guimenu>Selected Systems</guimenu> <guimenu>System Details</guimenu></menuchoice> page.
For more information, see:
<xref linkend="s3-sm-system-details"/></para>
<para>Clicking the <guimenu>View System Groups</guimenu> button at the top of the page takes you to a summary of your system groups.
It identifies group status and displays the number of systems contained.
Clicking the number of systems in a group takes you to the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>Systems Groups</guimenu> <guimenu>Systems</guimenu></menuchoice> tab.
Selecting a group name takes you to the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>System Groups</guimenu> <guimenu>Group Details</guimenu></menuchoice> tab for that system group.
For more information, see:
 <xref linkend="ref.webui.systems.systemgroups.details"/></para>
<para>You can also click <guimenu>Use in SSM</guimenu> from the <menuchoice><guimenu>Systems</guimenu> <guimenu>Overview</guimenu> <guimenu>View System Groups</guimenu></menuchoice> page to go directly to the <menuchoice><guimenu>Systems</guimenu> <guimenu>System Set Manager</guimenu></menuchoice>.
For more information, see:
<xref linkend="ref.webui.systems.ssm"/></para>
<sect2 id="ref.webui.systems.systems.all"><title>Systems &gt; All</title><para>The <menuchoice><guimenu>Systems</guimenu> <guimenu>All</guimenu></menuchoice> page contains the default set of your systems.
It displays every system you have permission to manage.
You have permission if you are the only user in your organization, if you are a <phrase><phrase>SUSE</phrase> Manager</phrase> Administrator, or if the system belongs to a group for which you have admin rights.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems all</phrase></textobject><imageobject>
<imagedata fileref="systems_all.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.systems.physical"><title>Systems &gt; Physical Systems</title><para>To reach this page, select <menuchoice><guimenu>Systems</guimenu> <guimenu>Systems</guimenu> <guimenu>Physical Systems</guimenu></menuchoice> from the left bar.
This page lists each physical system of which <phrase><phrase>SUSE</phrase> Manager</phrase> is aware.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems physical systems</phrase></textobject><imageobject>
<imagedata fileref="systems_physical_systems.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.systems.virtual"><title>Systems &gt; Virtual Systems</title><para>To reach this page, select <menuchoice><guimenu>Systems</guimenu> <guimenu>Systems</guimenu> <guimenu>Virtual Systems</guimenu></menuchoice> from the left bar.
This page lists each virtual host of which <phrase><phrase>SUSE</phrase> Manager</phrase> is aware and the guest systems on those hosts.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems virtual systems</phrase></textobject><imageobject>
<imagedata fileref="systems_virtual_systems.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<variablelist>
<varlistentry>
<term><guimenu>System</guimenu></term>
<listitem>
<para>This column displays the name of each guest system.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Updates</guimenu></term>
<listitem>
<para>This column shows whether there are patches (errata updates) available for the guest systems that have not yet been applied.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Status</guimenu></term>
<listitem>
<para>This column indicates whether a guest is running, paused, or stopped.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Base Channel</guimenu></term>
<listitem>
<para>This column displays the base channel to which the guest is currently subscribed.</para>
</listitem>
</varlistentry>
</variablelist>
<para>Only guests registered with <phrase><phrase>SUSE</phrase> Manager</phrase> are displayed with blue text.
Clicking the host name of such a guest system displays its <emphasis role="strong">System Details</emphasis> page.</para>
</sect2>
<sect2 id="ref.webui.systems.systems.baremetal"><title>Systems &gt; Unprovisioned Systems</title><para>Here, all unprovisioned (bare-metal) systems with hardware details are listed.
For more information, see:
<xref linkend="s3-sattools-config-bare-metal"/>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems bare metal</phrase></textobject><imageobject>
<imagedata fileref="systems_bare_metal.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.systems.ood"><title>Systems &gt; Out of Date</title><para>The <menuchoice><guimenu>Systems</guimenu> <guimenu>Systems</guimenu> <guimenu>Out of Date</guimenu></menuchoice> page displays all systems where applicable patch alerts have not been applied.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems outofdate</phrase></textobject><imageobject>
<imagedata fileref="systems_outofdate.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.systems.reboot"><title>Systems &gt; Requiring Reboot</title><para>The <menuchoice><guimenu>Systems</guimenu> <guimenu>Systems</guimenu> <guimenu>Requiring Reboot</guimenu></menuchoice> page displays all systems that need to be rebooted.
Click a system name to go to the systems details page to schedule a reboot.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems requiringreboot</phrase></textobject><imageobject>
<imagedata fileref="systems_requiringreboot.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.systems.non_compliant"><title>Systems &gt; Non-compliant Systems</title><para>Non-compliant systems have packages installed which are not available from <phrase><phrase>SUSE</phrase> Manager</phrase>.
The <emphasis role="strong">Packages</emphasis> column shows how many installed packages are not available in the channels assigned to the system.
A non-compliant system cannot be reinstalled.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems noncompliant</phrase></textobject><imageobject>
<imagedata fileref="systems_noncompliant.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.systems.wst"><title>Systems &gt; Without System Type</title><para>The <menuchoice><guimenu>Systems</guimenu> <guimenu>Systems</guimenu> <guimenu>Without System Type</guimenu></menuchoice> page displays systems without a System Type.
System types are:</para>
<itemizedlist>
<listitem>
<para>Salt</para>
</listitem>
<listitem>
<para>Management</para>
</listitem>
<listitem>
<para>Foreign Host</para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems without system type</phrase></textobject><imageobject>
<imagedata fileref="systems_without_system_type.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.systems.ungrp"><title>Systems &gt; Ungrouped</title><para>The <menuchoice><guimenu>Systems</guimenu> <guimenu>Systems</guimenu> <guimenu>Ungrouped</guimenu></menuchoice> page displays systems that have not yet been assigned to a system group.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ungrouped</phrase></textobject><imageobject>
<imagedata fileref="systems_ungrouped.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.systems.inact"><title>Systems &gt; Inactive</title><para>The <menuchoice><guimenu>Systems</guimenu> <guimenu>Systems</guimenu> <guimenu>Inactive Systems</guimenu></menuchoice> page displays systems that have not checked in with <phrase><phrase>SUSE</phrase> Manager</phrase> for 24 hours or more.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems inactive</phrase></textobject><imageobject>
<imagedata fileref="systems_inactive.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Checking in means that Zypper on <phrase>SUSE Linux Enterprise</phrase> or Red Hat Update Agent on <phrase>Red Hat Enterprise Linux</phrase> client systems connects to <phrase><phrase>SUSE</phrase> Manager</phrase> to see if there are any updates available or if any actions have been scheduled.
If you see a message telling you that check-ins are not taking place, the client system is not successfully connecting to <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<para>The reason may be one of the following:</para>
<itemizedlist>
<listitem>
<para>The system is not entitled to any <phrase><phrase>SUSE</phrase> Manager</phrase> service.
System profiles that remain unentitled for 180 days (6 months) are removed.</para>
</listitem>
<listitem>
<para>The system is entitled, but the <phrase><phrase>SUSE</phrase> Manager</phrase> daemon (<literal role="systemitem">rhnsd</literal> ) has been disabled on the system.
Refer to <xref linkend="bp.contact.methods.rhnsd"/> for instructions on restarting and troubleshooting.</para>
</listitem>
<listitem>
<para>The system is behind a firewall that does not allow connections over <literal role="systemitem">https</literal> (port 443).</para>
</listitem>
<listitem>
<para>The system is behind an HTTP proxy server that has not been properly configured.</para>
</listitem>
<listitem>
<para>The system is connected to a <phrase><phrase>SUSE</phrase> Manager</phrase> Proxy Server or <phrase><phrase>SUSE</phrase> Manager</phrase> that has not been properly configured.</para>
</listitem>
<listitem>
<para>The system itself has not been properly configured, perhaps pointing at the wrong <phrase><phrase>SUSE</phrase> Manager</phrase> Server.</para>
</listitem>
<listitem>
<para>The system is not in the network.</para>
</listitem>
<listitem>
<para>Some other barrier exists between the system and the <phrase><phrase>SUSE</phrase> Manager</phrase> Server.</para>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="ref.webui.systems.systems.rregistered"><title>Systems &gt; Recently Registered</title><para>The <menuchoice><guimenu>Systems</guimenu> <guimenu>Systems</guimenu> <guimenu>Recently Registered</guimenu></menuchoice> page displays any systems that have been registered in a given period.
Use the drop-down box to specify the period in days, weeks, 30- and 180-day increments, and years.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems recently registered</phrase></textobject><imageobject>
<imagedata fileref="systems_recently_registered.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.systems.proxy"><title>Systems &gt; Proxy</title><para>The <menuchoice><guimenu>Systems</guimenu> <guimenu>Systems</guimenu> <guimenu>Proxy</guimenu></menuchoice> page displays the <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> Server systems registered with your <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems proxy</phrase></textobject><imageobject>
<imagedata fileref="systems_proxy.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.systems.dup"><title>Systems &gt; Duplicate Systems</title><para>The <menuchoice><guimenu>Systems</guimenu> <guimenu>Systems</guimenu> <guimenu>Duplicate Systems</guimenu></menuchoice> page lists current systems and any active and inactive entitlements associated with them.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems duplicate systems</phrase></textobject><imageobject>
<imagedata fileref="systems_duplicate_systems.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Active entitlements are in gray, while inactive entitlements are highlighted in yellow and their check boxes checked by default for you to delete them as needed by clicking the <guimenu>Delete Selected</guimenu> button.
Entitlements are inactive if the system has not checked in with <phrase><phrase>SUSE</phrase> Manager</phrase> in a time specified via the drop-down box <guimenu>A system profile is inactive if its system has not checked in for:</guimenu>.</para>
<para>You can <emphasis role="strong">filter</emphasis> duplicate entitlements by clicking the respective tab.:</para>
<itemizedlist>
<listitem>
<para><menuchoice><guimenu>Duplicate Systems</guimenu> <guimenu>IP Address</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Duplicate Systems</guimenu> <guimenu>IPv6 Address</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Duplicate Systems</guimenu> <guimenu>Hostname</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Duplicate Systems</guimenu> <guimenu>MAC address</guimenu></menuchoice></para>
</listitem>
</itemizedlist>
<para>You may filter further by inactive time or typing the system’s host name, IP address, IPv6 address, or MAC address in the corresponding <menuchoice><guimenu>Top menu</guimenu> <guimenu>Filter by</guimenu></menuchoice> text box.</para>
<para>To compare up to three duplicate entitlements at one time, click the  <guimenu>Compare Systems</guimenu> link in the <menuchoice><guimenu>Duplicate Systems</guimenu> <guimenu>Last Checked In</guimenu></menuchoice> column.
Inactive components of the systems are highlighted in yellow.</para>
<para>You can determine which systems are inactive or duplicate and delete them by clicking the <guimenu>Delete System Profile</guimenu> button.</para>
<para>Click the <guimenu>Confirm Deletion</guimenu> button to confirm your choice.</para>
</sect2>
<sect2 id="ref.webui.systems.systems.currency"><title>Systems &gt; System Currency</title><para>The System Currency Report displays an overview of severity scores of patches relevant to the system.
The weighting is defined any systems, <emphasis role="strong">System Details</emphasis> page.
The default weight awards critical security patches with the heaviest weight and enhancements with the lowest.
The report can be used to prioritize maintenance actions on the systems registered to <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems currency report</phrase></textobject><imageobject>
<imagedata fileref="systems_currency_report.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.systems.types"><title>Systems &gt; System Types</title><para>System Types define the set of functionalities available for each system in <phrase><phrase>SUSE</phrase> Manager</phrase>
such as the ability of installing software or creating guest virtual machines.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems system types</phrase></textobject><imageobject>
<imagedata fileref="systems_system_types.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>A list of profiled systems follows, with their base and add-on system types shown in the appropriate columns.
To change system types, select the systems you want to modify, and click either the <guimenu>Add System Type</guimenu> or <guimenu>Remove System Type</guimenu> button.</para>
</sect2>
</sect1>
<sect1 id="s3-sm-system-details"><title>System Details</title><para>When systems are registered to <phrase><phrase>SUSE</phrase> Manager</phrase>, they are displayed on the <menuchoice><guimenu>Systems</guimenu> <guimenu>Overview</guimenu></menuchoice> page.
Here and on any other page, clicking the name of a system takes you to the <emphasis role="strong">System Details</emphasis> page of the client, where various types of administrative tasks can be performed.</para>
<note>
<para>The <guimenu>Delete System</guimenu> link in the upper right of this screen refers to the system profile only.
Deleting a host system profile will not destroy or remove the registration of guest systems.
Deleting a guest system profile does not remove it from the list of guests for its host, nor does it stop or pause the guest.
It does, however, remove your ability to manage it via <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<para>If you mistakenly deleted a system profile from <phrase><phrase>SUSE</phrase> Manager</phrase>, you may re-register the system using the bootstrap script or <command>rhnreg_ks</command> manually.</para>
</note>
<para>The Details page has numerous subtabs that provide specific system information and other identifiers unique to the system.
The following sections discuss these tabs and their subtabs in detail.</para>
<sect2 id="s4-sm-system-details-details"><title>System Details  &gt;  Details</title><para>This page is not accessible from the left bar.
However, clicking the name of a system anywhere in the Web interface displays such a System Details page.
By default, the <menuchoice><guimenu>Systems Details</guimenu> <guimenu>Details</guimenu> <guimenu>Overview</guimenu></menuchoice> subtab is displayed.
Other tabs are available, depending on the system type and add-on system type.</para>
<para>For example Traditional systems and Salt systems details  display different tabs.</para>
<figure>
<title>System Details (Traditional)</title>
<mediaobject><textobject role="description"><phrase>system details traditional overview</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_overview.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<figure>
<title>System Details (Salt)</title>
<mediaobject><textobject role="description"><phrase>system details salt overview</phrase></textobject><imageobject>
<imagedata fileref="system_details_salt_overview.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<sect3 id="s5-sm-system-details-overview"><title>System Details &gt;  Details  &gt;  Overview</title><para>This system summary page displays the system status message and the following key information about the system:</para>
<variablelist>
<varlistentry>
<term><guimenu>System Status</guimenu></term>
<listitem>
<para>This message indicates the current state of your system in relation to <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<note>
<para>If updates are available for any entitled system, the message <menuchoice><guimenu>System Details</guimenu> <guimenu>Software Updates Available</guimenu></menuchoice> appears, displaying the number of critical and non-critical updates and the sum of affected packages.
To apply these updates, click <menuchoice><guimenu>System Details</guimenu> <guimenu>Packages</guimenu></menuchoice> then select some or all packages to update, then click <guimenu>Upgrade Packages</guimenu>.</para>
</note>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>System Info</guimenu></term>
<listitem>
<variablelist>
<varlistentry>
<term>Hostname</term>
<listitem>
<para>The host name as defined by the client system.
A machine can have one and only one hostname.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>FQDN</term>
<listitem>
<para>The FQDN(Names) listed here represents the host.domain that the machine answers to.
A machine can have any number of FQDNs.
Keep in mind that FQDN is not equal to hostname.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>IP Address</term>
<listitem>
<para>The IP address of the client.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>IPv6 Address</term>
<listitem>
<para>The IPv6 address of the client.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Virtualization</term>
<listitem>
<para>If the client is a virtual machine, the type of virtualization is listed.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>UUID</term>
<listitem>
<para>Displays the universally unique identifier.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Kernel</term>
<listitem>
<para>The kernel installed and operating on the client system.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><phrase><phrase>SUSE</phrase> Manager</phrase> System ID</term>
<listitem>
<para>A unique identifier generated each time a system registers with <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<note>
<para>The system ID can be used to eliminate duplicate profiles from <phrase><phrase>SUSE</phrase> Manager</phrase>.
Compare the system ID listed on this page with the information stored on the client system in the <filename>/etc/sysconfig/rhn/systemid</filename> file.
In that file, the system’s current ID is listed under <literal>system_id</literal>.
The value starts after the characters <literal>ID-</literal>.
If the value stored in the file does not match the value listed in the profile, the profile is not the most recent one and may be removed.</para>
</note>
</listitem>
</varlistentry>
<varlistentry>
<term>Activation Key</term>
<listitem>
<para>Displays the activation key used to register the system.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Installed Products</term>
<listitem>
<para>Lists the products installed on the system.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Lock Status</term>
<listitem>
<para>Indicates whether a system has been locked.</para>
<para>Actions cannot be scheduled for locked systems on the Web interface until the lock is removed manually.
This does not include preventing automated patch updates scheduled via the Web interface.
To prevent the application of automated patch updates, deselect <menuchoice><guimenu>System Details</guimenu> <guimenu>Properties</guimenu> <guimenu>Auto Patch Update</guimenu></menuchoice>.
For more information, refer to <xref linkend="s5-sm-system-details-properties"/>.</para>
<para>Locking a system can prevent you from accidentally changing a system.
For example, the system may be a production system that should not receive updates or new packages until you decide to unlock it.</para>
<important>
<para>Locking a system in the Web interface <emphasis>will not</emphasis> prevent any actions that originate from the client system.
For example, if a user logs in to the client directly and runs YaST Online Update (on SLE) or <command>pup</command> (on RHEL), the update tool will install available patches even if the system is locked in the Web interface.</para>
<para>Locking a system <emphasis>does not</emphasis> restrict the number of users who can access the system via the Web interface.
If you want to restrict access to the system, associate that system with a System Group and assign a System Group Administrator to it.
Refer to <xref linkend="ref.webui.systems.systemgroups"/> for more information about System Groups.</para>
</important>
<important>
<para>It is also possible to lock multiple systems via the System Set Manager.
Refer to <xref linkend="s4-sm-ssm-misc-lock"/> for instructions.</para>
</important>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Subscribed Channels</guimenu></term>
<listitem>
<para>List of subscribed channels.
Clicking a channel name takes you to the <guimenu>Basic Channel Details</guimenu> page.
To change subscriptions, click the menu:(Alter Channel Subscriptions)[] link right beside the title to assign available base and child channels to this system.
When finished making selections, click the <guimenu>Change Subscriptions</guimenu> button to change subscriptions and the base software channel.
For more information, see:
<xref linkend="s5-sm-system-details-channels-software"/>.</para>
<variablelist>
<varlistentry>
<term>Base Channel</term>
<listitem>
<para>The first line indicates the base channel to which this system is subscribed.
The base channel should match the operating system of the client.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Child Channels</term>
<listitem>
<para>The subsequent lines of text, which depend on the base channel, list child channels.
An example is the <guimenu>SUSE Manager Tools</guimenu> channel.</para>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>System Events</guimenu></term>
<listitem>
<variablelist>
<varlistentry>
<term>Checked In</term>
<listitem>
<para>The date and time at which the system last checked in with <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Registered</term>
<listitem>
<para>The date and time at which the system registered with <phrase><phrase>SUSE</phrase> Manager</phrase> and created this profile.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Last Booted</term>
<listitem>
<para>The date and time at which the system was last started or restarted.</para>
<note>
<para>Systems with Salt or Management system type can be rebooted from this screen.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Select <guimenu>Schedule system reboot</guimenu> .</para>
</listitem>
<listitem>
<para>Provide the earliest date and time at which the reboot may take place.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Schedule Reboot</guimenu> button in the lower right.</para>
</listitem>
</orderedlist>
<para>When the client checks in after the scheduled start time, <phrase><phrase>SUSE</phrase> Manager</phrase> will instruct the system to restart itself.</para>
</note>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>System Properties</guimenu></term>
<listitem>
<variablelist>
<varlistentry>
<term>System Types</term>
<listitem>
<para>Lists system types and add-on types currently applied to the system.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Notifications</term>
<listitem>
<para>Indicates the notification options for this system.
You can activate whether you want to receive e-mail notifying you of available updates for this system.
In addition, you may activate to include systems in the daily summary e-mail.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Contact Method</term>
<listitem>
<para>Available methods: Default (Pull), Push via SSH, and Push via SSH tunnel.</para>
<para>The so-called OSA status is also displayed for client systems registered with <phrase><phrase>SUSE</phrase> Manager</phrase> that have the OSA dispatcher (osad) configured.</para>
<para>Push enables <phrase><phrase>SUSE</phrase> Manager</phrase> customers to immediately initiate tasks rather than wait for those systems to check in with <phrase><phrase>SUSE</phrase> Manager</phrase>.
Scheduling actions through push is identical to the process of scheduling any other action, except that the task can immediately be carried out instead of waiting the set interval for the system to check in.</para>
<para>In addition to the configuration of <phrase><phrase>SUSE</phrase> Manager</phrase>, to receive pushed actions each client system must have the <literal role="systemitem">osad</literal> package installed and its service started.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Auto Patch Update</term>
<listitem>
<para>Indicates whether this system is configured to accept updates automatically.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>System Name</term>
<listitem>
<para>By default, the host name of the client is displayed, but a different system name can be assigned.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Description</term>
<listitem>
<para>This information is automatically generated at registration.
You can edit the description to include any information you want.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Location</term>
<listitem>
<para>This field displays the physical address of the system if specified.</para>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
<para>Clicking the <guimenu>Edit These Properties</guimenu> link beside the <menuchoice><guimenu>System Details</guimenu> <guimenu>Overview</guimenu> <guimenu>System Properties</guimenu></menuchoice> title opens the <menuchoice><guimenu>System Details</guimenu> <guimenu>Properties</guimenu></menuchoice> subtab.
From this page you can edit any text fields you choose, then click the <guimenu>Update Properties</guimenu> button to confirm.</para>
</sect3>
<sect3 id="s5-sm-system-details-properties"><title>System Details &gt;  Details  &gt;  Properties</title><para>This subtab allows you to alter basic properties of the selected system.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional edit</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_edit.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<variablelist>
<varlistentry>
<term>System Details</term>
<listitem>
<variablelist>
<varlistentry>
<term>System Name</term>
<listitem>
<para>By default, this is the host name of the system.
You can however alter the profile name to anything that allows you to distinguish this system from others.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Base System Type</term>
<listitem>
<para>For information only.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Add-on System Types</term>
<listitem>
<para>Select one of the available system types such as <menuchoice><guimenu>Edit System Details</guimenu> <guimenu>Virtualization</guimenu></menuchoice>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Notifications</term>
<listitem>
<para>Select whether notifications about this system should be sent and whether to include this system in the daily summary.
This setting keeps you aware of all advisories pertaining to the system.
Anytime an update is released for the system, you receive an e-mail notification.</para>
<para>The daily summary reports system events that affect packages, such as scheduled patch updates, system reboots, or failures to check in.
In addition to including the system here, you must activate to receive e-mail notification in the <guimenu>Your Preferences</guimenu> page of the <guimenu>Overview</guimenu> category.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Contact Method</term>
<listitem>
<para>Select one of the following contact methods:</para>
<itemizedlist>
<listitem>
<para><menuchoice><guimenu>Edit System Details</guimenu> <guimenu>Pull</guimenu></menuchoice>(Default, may be Osad, )</para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Edit System Details</guimenu> <guimenu>Push via SSH</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Edit System Details</guimenu> <guimenu>Push via SSH tunnel</guimenu></menuchoice></para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
<variablelist id="varentry-system-details-properties-auto">
<varlistentry>
<term>Auto Patch Update</term>
<listitem>
<para>If this box is checked, available patches are automatically applied to the system when it checks in (Pull) or immediately if you select either Push option.
This action takes place without user intervention.
The <phrase><phrase>SUSE</phrase> Manager</phrase> Daemon (<literal role="systemitem">rhnsd</literal>) must be enabled on the system for this feature to work.</para>
<note>
<title>Conflicts With Third Party Packages</title>
<para>Enabling auto-update might lead to failures because of conflicts between system updates and third party packages.
To avoid failures caused by those issues, it is better to leave this box unchecked.</para>
</note>
</listitem>
</varlistentry>
<varlistentry>
<term>Description</term>
<listitem>
<para>By default, this text box records the operating system, release, and architecture of the system when it first registers.
Edit this information to include anything you like.</para>
</listitem>
</varlistentry>
</variablelist>
<para>The remaining fields record the physical address at which the system is stored.
To confirm any changes to these fields, click the <guimenu>Update Properties</guimenu> button.</para>
<note>
<title>Setting Properties for Multiple Systems</title>
<para>Many of these properties can be set for multiple systems in one go via the System Set Manager interface.
For details, see <xref linkend="ref.webui.systems.ssm"/>.</para>
</note>
</sect3>
<sect3 id="s5-sm-system-details-remote"><title>System Details &gt;  Details  &gt;  Remote Command</title><para>This subtab allows you to run remote commands on the selected system. Before doing so, you must first configure the system to accept such commands.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional edit</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_edit.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>On SLE clients, subscribe the system to the <phrase><phrase>SUSE</phrase> Manager</phrase> Tools child channel.
Then use Zypper to install the <command>rhncfg</command>, <command>rhncfg-client</command>, and <command>rhncfg-actions</command> packages, if not already installed:</para>
<screen>zypper in rhncfg rhncfg-client rhncfg-actions</screen>
<para>On RHEL clients, subscribe the system to the Tools child channel.
Then use <command>up2date</command> or <command>yum</command> to install the <command>rhncfg</command>, <command>rhncfg-client</command>, and <command>rhncfg-actions</command> packages, if not already installed:</para>
<screen>yum install rhncfg rhncfg-client rhncfg-actions</screen>
</listitem>
<listitem>
<para>Log in to the system as root and add the following file to the local <phrase><phrase>SUSE</phrase> Manager</phrase> configuration directory: <filename>allowed-actions/scripts/run</filename> .</para>
<itemizedlist>
<listitem>
<para>Create the necessary directory on the target system:</para>
<screen>mkdir -p /etc/sysconfig/rhn/allowed-actions/script</screen>
</listitem>
<listitem>
<para>Create an empty <filename>run</filename> file in that directory to act as a flag to <phrase><phrase>SUSE</phrase> Manager</phrase> , signaling permission to allow remote commands:</para>
<screen>touch /etc/sysconfig/rhn/allowed-actions/script/run</screen>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<para>When the setup is complete, refresh the page to view the text boxes for remote commands.
Identify a specific user, group, and timeout period, and the script to run.
Select a date and time to execute the command, then click <guimenu>Schedule</guimenu> or add the remote command to an action chain.
For further information on action chains, see:
<xref linkend="ref.webui.schedule.chains"/>.</para>
</sect3>
<sect3 id="s5-sm-system-details-react"><title>System Details &gt;  Details  &gt;  Reactivation  [Management]</title><para>Reactivation keys include this system’s ID, history, groups, and channels.
This key can then be used only once with the <command>rhnreg_ks</command> command line utility to re-register this system and regain all <phrase><phrase>SUSE</phrase> Manager</phrase> settings.
Unlike typical activation keys, which are not associated with a specific system ID, keys created here do not show up within the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>Activation Keys</guimenu></menuchoice> page.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details reactivation</phrase></textobject><imageobject>
<imagedata fileref="system_details_reactivation.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Reactivation keys can be combined with activation keys to aggregate the settings of multiple keys for a single system profile.
For example:</para>
<screen>rhnreg_ks --server=`server-url`\
  --activationkey=`reactivation-key`,`activationkey`--force</screen>
<warning>
<para>When autoinstalling a system with its existing <phrase><phrase>SUSE</phrase> Manager</phrase> profile, the profile uses the system-specific activation key created here to re-register the system and return its other <phrase><phrase>SUSE</phrase> Manager</phrase> settings.
For this reason, you should not regenerate, delete, or use this key (with <command>rhnreg_ks</command>) while a profile-based autoinstallation is in progress.
If you do, the autoinstallation will fail.</para>
</warning>
</sect3>
<sect3 id="s5-sm-system-details-hardware"><title>System Details &gt;  Details  &gt;  Hardware</title><para>This subtab provides information about the system, such as networking, BIOS, memory, and other devices.
This only works if you included the hardware profile during registration.
If the hardware profile looks incomplete or outdated, click the <guimenu>Schedule Hardware Refresh</guimenu> button.
The next time the <phrase><phrase>SUSE</phrase> Manager</phrase> Daemon (<literal role="systemitem">rhnsd</literal>) connects to <phrase><phrase>SUSE</phrase> Manager</phrase>, it will update your system profile with the latest hardware information.</para>
</sect3>
<sect3 id="s5-sm-system-details-migrate"><title>System Details &gt;  Details  &gt;  Migrate</title><para>This subtab provides the option to migrate systems between organizations.
Select an organization form the dropdown <menuchoice><guimenu>Migrate System Between Organizations</guimenu> <guimenu>Organization Name</guimenu></menuchoice> and click <guimenu>Migrate System</guimenu> to initiate the migration.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional migrate</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_migrate.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<note>
<para>Defined system details such as channel assignments, system group membership, custom data value, configuration channels, reactivation keys, and snapshots will be dropped from the system configuration after the migration.</para>
</note>
</sect3>
<sect3 id="s5-sm-system-details-notes"><title>System Details &gt;  Details  &gt;  Notes</title><para>This subtab provides a place to create notes about the system.</para>
<variablelist>
<varlistentry>
<term>Create Note</term>
<listitem>
<para>To add a new note, click the <guimenu>Create Note</guimenu> link, type a subject and write your note, then click the <guimenu>Create</guimenu> button.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Modify Note</term>
<listitem>
<para>To modify a note, click its subject in the list of notes, make your changes, and click the <guimenu>Update</guimenu> button.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Remove Note</term>
<listitem>
<para>To remove a note, click its subject in the list of notes then click the <guimenu>Delete Note</guimenu> link.</para>
</listitem>
</varlistentry>
</variablelist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional notes</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_notes.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
<sect3 id="s5-sm-system-details-info"><title>System Details &gt;  Details  &gt;  Custom Info</title><para>This subtab provides completely customizable information about the system.
Unlike <menuchoice><guimenu>System Details</guimenu> <guimenu>Notes</guimenu></menuchoice>, <menuchoice><guimenu>System Details</guimenu> <guimenu>Custom Info</guimenu></menuchoice> is structured, formalized, and can be searched.
Before adding custom information about a system, you must have <menuchoice><guimenu>Custom System Information</guimenu> <guimenu>Custom Information Keys</guimenu></menuchoice>.
To create such keys, click <guimenu>Custom System Info</guimenu> in the left bar.
For more information, see:
<xref linkend="ref.webui.systems.cust-info"/>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional custom info</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_custom_info.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Once you have created one or more keys, you may assign values for this system by selecting the <guimenu>Create Value</guimenu> link.
Click the name of the key in the resulting list and enter a value for it in the <menuchoice><guimenu>Edit Custom Value</guimenu> <guimenu>Value</guimenu></menuchoice> field, then click the <guimenu>Update Key</guimenu> button.</para>
</sect3>
<sect3 id="s5-sm-system-details-proxy"><title>System Details &gt;  Details  &gt;  Proxy  [Proxy]</title><para>This tab is only available for <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> systems.
The tab lists all clients registered with the selected <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> server.</para>
</sect3>
</sect2>
<sect2 id="s4-sm-system-details-channels"><title>System Details &gt;  Software</title><para>This tab and its subtabs allow you to manage the software on the system: patches (errata), packages and package profiles, software channel memberships, and migrations.</para>
<sect3 id="s4-sm-system-details-errata"><title>System Details  &gt;  Software  &gt;  Patches</title><para>This subtab contains a list of patch (errata) alerts applicable to the system.
Refer to <xref linkend="ref.webui.intro.patch_alerts"/> for meanings of the icons on this tab.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional software patches</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_software_patches.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>To apply updates, select them and click the <guimenu>Apply Patches</guimenu> button.
Double-check the updates to be applied on the confirmation page, then click the <guimenu>Confirm</guimenu> button.</para>
<para>The action is added to the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Schedule</guimenu> <guimenu>Pending Actions</guimenu></menuchoice> list.
Patches that have been scheduled cannot be selected for update.
Instead of a check box there is a clock icon.
Click the clock to see the <menuchoice><guimenu>Pending Actions</guimenu> <guimenu>Action Details</guimenu></menuchoice> page.</para>
<para>A <menuchoice><guimenu>System Details</guimenu> <guimenu>Software</guimenu> <guimenu>Patches</guimenu> <guimenu>Status</guimenu></menuchoice> column in the patches table shows whether an update has been scheduled.
Possible values are:</para>
<itemizedlist>
<listitem>
<para>None</para>
</listitem>
<listitem>
<para>Pending</para>
</listitem>
<listitem>
<para>Picked Up</para>
</listitem>
<listitem>
<para>Completed</para>
</listitem>
<listitem>
<para>Failed</para>
</listitem>
</itemizedlist>
<para>This column displays only the latest action related to a patch.
For example, if an action fails and you reschedule it, this column shows the status of the patch as <literal>Pending</literal> with no mention of the previous failure.
Clicking a status other than <literal>None</literal> takes you to the <menuchoice><guimenu>Pending</guimenu> <guimenu>Action Details</guimenu></menuchoice> page.</para>
</sect3>
<sect3 id="s4-sm-system-details-packages"><title>System Details &gt;  Software  &gt;  Packages</title><para>Manage the software packages on the system.
Most of the following actions can also be performed via action chains.
For further information on action chains, see:
<xref linkend="ref.webui.schedule.chains"/>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional software packages</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_software_packages.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<warning>
<para>When new packages or updates are installed on the client via <phrase><phrase>SUSE</phrase> Manager</phrase>, any licenses (EULAs) requiring agreement before installation are automatically accepted.</para>
</warning>
<variablelist>
<varlistentry>
<term>Packages</term>
<listitem>
<para>The default display of the <menuchoice><guimenu>System Details</guimenu> <guimenu>Packages</guimenu></menuchoice> tab describes the options available and provides the means to update your package list.
To update or complete a potentially outdated list, possibly because of the manual installation of packages, click the <guimenu>Update Package List</guimenu> button in the bottom right-hand corner of this page.
The next time the <phrase><phrase>SUSE</phrase> Manager</phrase> daemon (<literal role="systemitem">rhnsd</literal>) connects to <phrase><phrase>SUSE</phrase> Manager</phrase>, it updates your system profile with the latest list of installed packages.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>List / Remove</term>
<listitem>
<para>Lists installed packages and enables you to remove them.
View and sort packages by name or the date they were installed on the system.
Search for the desired packages by typing a name in the <menuchoice><guimenu>Removeable Packages</guimenu> <guimenu>Filter by Package Name</guimenu></menuchoice> search field.
You may also select the letter or number corresponding to the first character of the package name from the drop down selection menu.
Click a package name to view its <menuchoice><guimenu>Package name</guimenu> <guimenu>Package Details</guimenu></menuchoice> page.
To delete packages from the system, select their check boxes and click the <guimenu>Remove Packages</guimenu> button on the bottom right-hand corner of the page.
A confirmation page appears with the packages listed.
Click the <guimenu>Confirm</guimenu> button to remove the packages.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Upgrade</term>
<listitem>
<para>Displays a list of packages with newer versions available in the subscribed channels.
click the latest package name to view its <menuchoice><guimenu>Package Name</guimenu> <guimenu>Package Details</guimenu></menuchoice> page.
To upgrade packages immediately, select them and click the <guimenu>Upgrade Packages</guimenu> button.
Any EULAs will be accepted automatically.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Install</term>
<listitem>
<para>Install new packages on the system from the available channels.
Click the package name to view its <menuchoice><guimenu>Package Name</guimenu> <guimenu>Package Details</guimenu></menuchoice> page.
To install packages, select them and click the <guimenu>Install Selected Packages</guimenu> button.
EULAs are automatically accepted.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Verify</term>
<listitem>
<para>Validates the packages installed on the system against its RPM database.
This is the equivalent of running <command>rpm -V</command>.
The metadata of the system’s packages are compared with information from the database, such as file checksum, file size, permissions, owner, group and type.
To verify a package or packages, select them, click the <guimenu>Verify Selected Packages</guimenu> button, and confirm.
When the check is finished, select this action in the <guimenu>History</guimenu> subtab under <guimenu>Events</guimenu> to see the results.</para>
</listitem>
</varlistentry>
</variablelist>
<variablelist id="s1-package-lock">
<varlistentry>
<term>Lock</term>
<listitem>
<para>Locking a package prevents modifications like removal or update of the package.
Since locking and unlocking happens via scheduling requests, locking might take effect with some delay.
If an update happens before then, the lock will have no effect.
Select the packages you want to lock.
If locking should happen later, select the date and time above the <guimenu>Request Lock</guimenu> button, then click it.
A small lock icon marks locked packages.
To unlock, select the package and click <guimenu>Request Unlock</guimenu>, optionally specifying the date and time for unlocking to take effect.</para>
<note>
<para>This feature only works if Zypper is used as the package manager.
On the target machine the <command>zypp-plugin-spacewalk</command> package must be installed (version 0.9.x or higher).</para>
</note>
</listitem>
</varlistentry>
<varlistentry>
<term>Profiles</term>
<listitem>
<para>Compare installed packages with the package lists in stored profiles and other systems.</para>
<itemizedlist>
<listitem>
<para>Select a stored profile from the drop-down box and click the <guimenu>Compare</guimenu> button.
To compare with packages installed on a different system, select the system from the associated drop-down box and click the <guimenu>Compare</guimenu> button.</para>
</listitem>
<listitem>
<para>To create a stored profile based on the existing system, click the <guimenu>Create System Profile</guimenu> button, enter any additional information, and click the <guimenu>Create Profile</guimenu> button.
These profiles are kept within the <menuchoice><guimenu>Main menu</guimenu> <guimenu>Systems</guimenu> <guimenu>Stored Profiles</guimenu></menuchoice> page.</para>
<para>When installed packages have been compared with a profile, customers have the option to synchronize the selected system with the profile.
All changes apply to the system not the profile.
Packages might get deleted and additional packages installed on the system.
To install only specific packages, click the respective check boxes in the profile.
To remove specific packages installed on the system, select the check boxes of these packages showing a difference of <emphasis role="strong">This System Only</emphasis>.</para>
<para>To completely synchronize the system’s packages with the compared profile, select the master check box at the top of the column.
Then click the <guimenu>Sync Packages to</guimenu> button.
On the confirmation screen, review the changes, select a time frame for the action, and click the <guimenu>Schedule Sync</guimenu> button.</para>
<para>You can use a stored profile as a template for the files to be installed on an autoinstalled system.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Non Compliant</term>
<listitem>
<para>Lists packages that are installed on this system and are not present in any of its channels.</para>
</listitem>
</varlistentry>
</variablelist>
</sect3>
<sect3 id="s5-sm-system-details-channels-software"><title>System Details &gt;  Software  &gt;  Software Channels</title><para>Software channels provide a well-defined method to determine which packages should be available to a system for installation or upgrade based on its operating systems, installed packages, and functionality.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional software system channels</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_software_system_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Click the chain icon right to a channel name to view its <menuchoice><guimenu>Channels</guimenu> <guimenu>Channel Details</guimenu></menuchoice> page.
To change the base software channel the system is subscribed to select a different base channel in the left selection box.</para>
<para>To modify the child channels associated with this system, in the right selection box use the check boxes left to the channel names.
If you enable <guimenu>include recommended</guimenu>, recommended child channels are automatically selected for subscription.
Starting with <phrase>SUSE Linux Enterprise</phrase> 15, child channels can depend on other channels—they are required.
In the channel subscription you can see the dependencies by hovering with a mouse on a child channel name.
Selecting a channel that depends on another channel will select this channel, too. Unselecting a channel on which some other channels depend will also unselect those channels.</para>
<para>When done click <guimenu>Next</guimenu> to schedule the Software Channel Change action.
Then click <guimenu>Confirm</guimenu>.</para>
<note>
<title>Changing the Channels Is Now an Action</title>
<para>Since the 3.1 maintenance update (2018) changing the channels is an action that can be scheduled like any other action.
Earlier channel changes were applied immediately.</para>
</note>
<para>For more information about channel management, see:
<xref linkend="ref.webui.channels.software"/>.</para>
</sect3>
<sect3 id="s5-sm-system-details-sp-migration"><title>System Details &gt;  Software  &gt;  SP Migration</title><para>Service Pack Migration (SP Migration) allows you to upgrade a system from one service pack to another.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional software sp migration</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_software_sp_migration.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<warning>
<para>During migration <phrase><phrase>SUSE</phrase> Manager</phrase> automatically accepts any required licenses (EULAs) before installation.</para>
</warning>
<para>Beginning with SLE 12 <phrase>SUSE</phrase> supports service pack skipping, it is now possible to migrate from for example, SLE 12 to SLE 12 SP2.
Note that SLE 11 may only be migrated step by step and individual service packs should not be skipped.
Supported migrations include any of the following:</para>
<itemizedlist>
<listitem>
<para>SLE 11 &gt; SLE 11 SP1 &gt; SLE 11 SP2 &gt; SLE 11 SP3 &gt; SLE 11 SP4</para>
</listitem>
<listitem>
<para>SLE 12 &gt; SLE 12 SP1 &gt; SLE 12 SP2</para>
</listitem>
<listitem>
<para>SLE 12 &gt; SLE 12 SP2 (skipping SLE 12 SP1)</para>
</listitem>
</itemizedlist>
<warning>
<title>Migrating from an Earlier Version of SLES</title>
<para>It is not possible to migrate, for example, from SLE 11 to SLE 12 using this tool.
You must use autoYaST to perform a migration on this level.</para>
</warning>
<warning>
<title>Rollback Not Possible</title>
<para>The migration feature does not cover any rollback functionality.
When the migration procedure is started, rolling back is not possible.
Therefore it is recommended to have a working system backup available for an emergency.</para>
</warning>
<orderedlist numeration="arabic">
<title>Procedure: Performing a Migration</title>
<listitem>
<para>From the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>Overview</guimenu></menuchoice> page, select a client.</para>
</listitem>
<listitem>
<para>Select the <menuchoice><guimenu>System Details</guimenu> <guimenu>Software</guimenu> <guimenu>SP Migration</guimenu></menuchoice> tabs.</para>
</listitem>
<listitem>
<para>Select the target migration path and click <guimenu>Select Channels</guimenu> .</para>
</listitem>
<listitem>
<para>From the <menuchoice><guimenu>System Details</guimenu> <guimenu>Software</guimenu> <guimenu>SP Migration</guimenu> <guimenu>Service Pack Migration - Channels</guimenu></menuchoice> view select the correct base channel, including <literal>Mandatory Child Channels</literal> and any additional <literal>Optional Child Channels</literal>. Select <guimenu>Schedule Migration</guimenu> when your channels have been configured properly.</para>
</listitem>
</orderedlist>
</sect3>
</sect2>
<sect2 id="s5-sm-system-details-channels-config"><title>System Details &gt;  Configuration  [Management]</title><para>This tab and its subtabs assist in managing the configuration files associated with the system.
These configuration files may be managed solely for the current system or distributed widely via a Configuration Channel.
The following sections describe these and other available options on the <menuchoice><guimenu>System Details</guimenu> <guimenu>Configuration</guimenu></menuchoice> subtabs.</para>
<note>
<para>To manage the configuration of a system, it must have the latest <systemitem class="resource">rhncfg*</systemitem> packages installed.
Refer to <xref linkend="ref.webui.config.preparing"/> for instructions on enabling and disabling scheduled actions for a system.</para>
</note>
<para>This section is available to normal users with access to systems that have configuration management enabled.
Like software channels, configuration channels store files to be installed on systems.
While software updates are provided by SCC, configuration files are managed solely by you.
Also unlike with software packages, various versions of configuration files may prove useful to a system at any time.
Only the latest version can be deployed.</para>
<sect3 id="s5-sdc-configuration-overview"><title>System Details  &gt;  Configuration  &gt;  Overview</title><para>This subtab provides access to the configuration files of your system and to the most common tasks used to manage configuration files.</para>
<variablelist>
<varlistentry>
<term>Configuration Overview</term>
<listitem>
<para>From the <menuchoice><guimenu>System Details</guimenu> <guimenu>Configuration</guimenu> <guimenu>Overview</guimenu></menuchoice>, click the <guimenu>Add</guimenu> links to add files, directories, or symbolic links.
Here you also find shortcuts to perform any of the common configuration management tasks listed on the right of the screen by clicking one of the links under <menuchoice><guimenu>System Details</guimenu> <guimenu>Configuration</guimenu> <guimenu>Overview</guimenu> <guimenu>Configuration Actions</guimenu></menuchoice>.</para>
</listitem>
</varlistentry>
</variablelist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional configuration overview</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_configuration_overview.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
<sect3 id="s5-sdc-configuration-mngfiles"><title>System Details &gt;  Configuration  &gt;  View/Modify Files</title><para>This subtab lists all configuration files currently associated with the system.
These are sorted via subtabs in centrally and locally managed files and a local sandbox for files under development.</para>
<para>Using the appropriate buttons on a subtab, you can copy from one to the other subtabs.</para>
<variablelist>
<varlistentry>
<term>Centrally-Managed Files</term>
<listitem>
<para>Centrally-managed configuration files are provided by global configuration channels.
Determine which channel provides which file by examining the <menuchoice><guimenu>Configuration</guimenu> <guimenu>View/Modify Files</guimenu> <guimenu>Centrally-Managed Files</guimenu> <guimenu>Provided By</guimenu></menuchoice> column below.
Some of these centrally-managed files may be overridden by locally-managed files.
Check the <menuchoice><guimenu>Configuration</guimenu> <guimenu>View/Modify Files</guimenu> <guimenu>Centrally-Managed Files</guimenu> <guimenu>Overridden By</guimenu></menuchoice> column to find out if any files are overridden, or click <guimenu>Override this file</guimenu> to provide such an overriding file.</para>
</listitem>
</varlistentry>
</variablelist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional configuration view mod central paths</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_configuration_view_mod_central_paths.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<variablelist>
<varlistentry>
<term>Locally-Managed Files</term>
<listitem>
<para>Locally-managed configuration files are useful for overriding centrally-managed configuration profiles that cause problems on particular systems.
Also, locally-managed configuration files are a method by which system group administrators who do not have configuration administration privileges can manage configuration files on the machines they can manage.</para>
</listitem>
</varlistentry>
</variablelist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional configuration view mod local paths</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_configuration_view_mod_local_paths.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<variablelist>
<varlistentry>
<term>Local Sandbox</term>
<listitem>
<para>In the sandbox you can store configuration files under development.
You can promote files from the sandbox to a centrally-managed configuration channel using <menuchoice><guimenu>Configuration Overview</guimenu> <guimenu>Local Sandbox</guimenu> <guimenu>Copy Latest to Central Channel</guimenu></menuchoice>.
After files in this sandbox have been promoted to a centrally-managed configuration channel, you can deploy them to other systems.</para>
</listitem>
</varlistentry>
</variablelist>
<para>Use <menuchoice><guimenu>Configuration Overview</guimenu> <guimenu>Copy Latest to System Channel</guimenu></menuchoice> to install a configuration on the local system only.
When done, the file will end up on the <menuchoice><guimenu>Configuration Overview</guimenu> <guimenu>Locally-Managed Files</guimenu></menuchoice> subtab.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional configuration view mod sandbox paths</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_configuration_view_mod_sandbox_paths.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
<sect3 id="s5-sdc-configuration-add-files"><title>System Details &gt;  Configuration  &gt;  Add Files</title><para>To upload, import, or create new configuration files, click <guimenu>Add Files</guimenu>.</para>
<variablelist>
<varlistentry>
<term>Upload File</term>
<listitem>
<para>To upload a configuration file from your local machine, browse for the upload file, specify whether it is a text or binary file, enter <guimenu>Filename/Path</guimenu> and user and group ownership.
Specific file permissions can be set.
When done, click <guimenu>Upload Configuration File</guimenu>.</para>
</listitem>
</varlistentry>
</variablelist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional configuration add files upload</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_configuration_add_files_upload.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<variablelist>
<varlistentry>
<term>Import Files</term>
<listitem>
<para>Via the <guimenu>Import Files</guimenu> tab, you can add files from the system you have selected before and add it to the sandbox of this system.
Files will be imported the next time <command>rhn_check</command> runs on the system.
To deploy these files or override configuration files in global channels, copy this file into your local override channel after the import has occurred.</para>
</listitem>
</varlistentry>
</variablelist>
<para>In the text box under <guimenu>Import New Files</guimenu> enter the full path of any files you want import into <phrase><phrase>SUSE</phrase> Manager</phrase> or select deployable configuration files from the <guimenu>Import Existing Files</guimenu> list.
When done, click <guimenu>Import Configuration Files</guimenu>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional configuration add files import</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_configuration_add_files_import.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<variablelist>
<varlistentry>
<term>Create File</term>
<listitem>
<para>Under <guimenu>Create File</guimenu>, you can directly create the configuration file from scratch.
Select the file type, specify the path and file name, where to store the file, plus the symbolic link target file name and path.
Ownership and permissions and macro delimiters need to be set.
For more information on using macros, see <xref linkend="s3-sm-file-macros"/>.
In the <guimenu>File Contents</guimenu> text box, type the configuration file.
Select the type of file you are creating from the drop-down box.
Possible choices are Shell, Perl, Python, Ruby and XML.
When done, click <guimenu>Create Configuration File</guimenu>.</para>
</listitem>
</varlistentry>
</variablelist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional configuration add files create</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_configuration_add_files_create.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
<sect3 id="s5-sdc-configuration-deploy-files"><title>System Details &gt;  Configuration  &gt;  Deploy Files</title><para>Under <guimenu>Deploy Files</guimenu> you find all files that can be deployed on the selected system.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional configuration deploy file</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_configuration_deploy_file.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Files from configuration channels with a higher priority take precedence over files from configuration channels with a lower priority.</para>
</sect3>
<sect3 id="s5-sdc-configuration-diff"><title>System Details &gt;  Configuration  &gt;  Compare Files</title><para>This subtab compares a configuration file stored on the <phrase><phrase>SUSE</phrase> Manager</phrase> with the file stored on the client.
It does not compare versions of the same file stored in different channels.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional configuration diff file</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_configuration_diff_file.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Select the files to be compared, click the <guimenu>Compare Files</guimenu> button, select a time to perform the diff, and click the <guimenu>Schedule Compare</guimenu> button to confirm.</para>
<para>To watch progress, see <xref linkend="s4-sm-system-details-events"/>.
After the diff has been performed, go to <guimenu>Recent Events</guimenu> in <xref linkend="s5-sdc-configuration-overview"/> to see the results.</para>
</sect3>
<sect3 id="s5-sdc-configuration-channels"><title>System Details  &gt;  Configuration  &gt;  Manage Configuration Channels</title><para>This subtab allows you to subscribe to and rank configuration channels associated with the system, lowest first.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional configuration config channel list</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_configuration_config_channel_list.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>The <guimenu>List/Unsubscribe from Channels</guimenu> subtab contains a list of the system’s configuration channel subscriptions.
Click the check box next to the Channel and click <guimenu>Unsubscribe</guimenu> to remove the subscription to the channel.</para>
<para>The <guimenu>Subscribe to Channels</guimenu> subtab lists all available configuration channels.
To subscribe to a channel, select the check box next to it and click <guimenu>Continue</guimenu>.
To subscribe to all configuration channels, click <guimenu>Select All</guimenu> and click <guimenu>Continue</guimenu>.
The <guimenu>View/Modify Rankings</guimenu> page automatically loads.</para>
<para>The <guimenu>View/Modify Rankings</guimenu> subtab allows users to set the priority with which files from a particular configuration channel are ranked.
The higher the channel is on the list, the more its files take precedence over files on lower-ranked channels.
For example, the higher-ranked channel may have an <filename>httpd.conf</filename> file that will take precedence over the same file in a lower-ranked channel.</para>
</sect3>
</sect2>
<sect2 id="s4-sm-system-details-kick"><title>System Details &gt;  Provisioning  [Management]</title><para>The <guimenu>Provisioning</guimenu> tab and its subtabs allow you to schedule and monitor AutoYaST or Kickstart installations and to restore a system to its previous state.</para>
<note>
<title>Available for Clients Using the "`Traditional`"Method</title>
<para>The note <guimenu>Provisioning</guimenu> tab will be available when adding a client using the <quote>traditional</quote> method (system type <literal>management</literal>). Using Salt the <guimenu>Provisioning</guimenu> tab will not be available (system type <literal>salt</literal>).</para>
</note>
<para>AutoYaST is a <phrase>SUSE Linux Enterprise</phrase> and Kickstart is a Red Hat utility - both allow you to automate the reinstallation of a system.
Snapshot rollbacks provide the ability to revert certain changes on the system.
You can roll back a set of RPM packages, but rolling back across multiple update levels is not supported.
Both features are described in the sections that follow.</para>
<sect3 id="s5-sdc-provisioning-kickstart"><title>System Details  &gt;  Provisioning  &gt;  Autoinstallation</title><para>The <guimenu>Schedule</guimenu> subtab allows you to configure and schedule an autoinstallation for this system.
For background information about autoinstallation, see <xref linkend="ref.webui.systems.autoinst"/>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional provisioning schedule wizard</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_provisioning_schedule_wizard.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>In the <guimenu>Schedule</guimenu> subtab, schedule the selected system for autoinstallation.
Choose from the list of available profiles.</para>
<note>
<para>You must first create a profile before it appears on this subtab.
If you have not created any profiles, refer to <xref linkend="ref.webui.systems.autoinst.profiles.create"/> before scheduling an autoinstallation for a system.</para>
</note>
<para>To alter autoinstallation settings, click the <guimenu>Advanced Configuration</guimenu> button.
Configure the network connection and post-installation networking information.
You can aggregate multiple network interfaces into a single logical "bonded" interface.
In <guimenu>Kernel Options</guimenu> specify kernel options to be used during autoinstallation. <guimenu>Post Kernel Options</guimenu> are used after the installation is complete and the system is booting for the first time.
Configure package profile synchronization.</para>
<para>Select a time for the autoinstallation to begin and click <guimenu>Schedule Autoinstall and Finish</guimenu> for all changes to take effect and to schedule the autoinstallation.</para>
<para>Alternatively, click <guimenu>Create PXE Installation Configuration</guimenu> to create a Cobbler system record.
The selected autoinstallation profile will be used to automatically install the configured distribution next time that particular system boots from PXE.
In this case <phrase><phrase>SUSE</phrase> Manager</phrase> and its network must be properly configured to allow boot using PXE.</para>
<note>
<para>Any settings changed on the <guimenu>Advanced Configuration</guimenu> page will be ignored when creating a PXE installation configuration for Cobbler.</para>
</note>
<para>The <guimenu>Variables</guimenu> subtab can be used to create Kickstart variables, which substitute values in Kickstart files.
To define a variable, create a name-value pair (<replaceable>name/value</replaceable>) in the text box.</para>
<para>For example, to Kickstart a system that joins the network of a specific organization (for example the Engineering department) you can create a profile variable to set the IP address and the gateway server address to a variable that any system using that profile will use.
Add the following line to the <guimenu>Variables</guimenu> text box:</para>
<screen>IPADDR=192.168.0.28
GATEWAY=192.168.0.1</screen>
<para>To use the system variable, use the name of the variable in the profile instead of the value.
For example, the <option>network</option> portion of a Kickstart file could look like the following:</para>
<screen>network --bootproto=static --device=eth0 --onboot=on --ip=$IPADDR \
  --gateway=$GATEWAY</screen>
<para>The <option>$IPADDR</option> will be <literal>192.168.0.28</literal>, and the <option>$GATEWAY</option> will be <literal>192.168.0.1</literal>.</para>
<note>
<para>There is a hierarchy when creating and using variables in Kickstart files.
System Kickstart variables take precedence over profile variables, which in turn take precedence over distribution variables.
Understanding this hierarchy can alleviate confusion when using variables in Kickstart.</para>
</note>
<para>Using variables are one part of the larger Cobbler infrastructure for creating templates that can be shared between multiple profiles and systems.
For more information about Cobbler and Kickstart templates, refer to <xref linkend="advanced.topics.cobbler"/>.</para>
</sect3>
<sect3 id="s5-sdc-provisioning-powermgnt"><title>System Details  &gt;  Provisioning  &gt;  Power Management</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> allows you to power on, off, and reboot systems via the IPMI protocol if the systems are IPMI-enabled.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional provisioning power management</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_provisioning_power_management.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>You need a fully patched <phrase><phrase>SUSE</phrase> Manager</phrase> installation.
To use any power management functionality, IPMI configuration details must be added to <phrase><phrase>SUSE</phrase> Manager</phrase>.
First select the target system on the systems list, then select <menuchoice><guimenu>Provisioning</guimenu> <guimenu>Power Management</guimenu></menuchoice>.
On the displayed configuration page, edit all required fields (marked with a red asterisk) and click <guimenu>Save</guimenu>.</para>
<para>Systems can be powered on, off, or rebooted from the configuration page via corresponding buttons.
Note that any configuration change is also saved in the process.
The <guimenu>Save and Get Status</guimenu> button can also be used to query for the system’s power state.
If configuration details are correct, a row is displayed with the current power status ("on" or "off").
If a power management operation succeeds on a system, it will also be noted in its <menuchoice><guimenu>Events</guimenu> <guimenu>History</guimenu></menuchoice> subtab.</para>
<para>Power management functionalities can also be used from the system set manager to operate on multiple systems at the same time.
Specifically, you can change power management configuration parameters or apply operations (power on, off, reboot) to multiple systems at once:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Add the respective systems to the system set manager as described in <xref linkend="ref.webui.systems.ssm"/>.</para>
</listitem>
<listitem>
<para>Click <guimenu>Manage</guimenu> (in the upper right corner), then menu: Provisioning[Power Management Configuration] to change one or more configuration parameters for all systems in the set. Note that any field left blank will not alter the configuration parameter in selected systems.</para>
</listitem>
<listitem>
<para>When all configuration parameters are set correctly, click <guimenu>Manage</guimenu> , then <menuchoice><guimenu>Provisioning</guimenu> <guimenu>Power Management Operations</guimenu></menuchoice> to power on, off or reboot systems from the set.</para>
</listitem>
</orderedlist>
<para>To check that a power operation was executed correctly, click <menuchoice><guimenu>System Set Manager</guimenu> <guimenu>Status</guimenu></menuchoice>
 on the left-hand menu, then click the proper line in the list.
This will display a new list with systems to which the operation was applied.
If errors prevent correct execution, a brief message with an explanation will be displayed in the <guimenu>Note</guimenu>
 column.</para>
<para>This feature uses Cobbler power management, thus a Cobbler system record is automatically created at first use if it does not exist already.
In that case, the automatically created system record will not be bootable from the network and will reference a dummy image.
This is needed because Cobbler does not currently support system records without profiles or images.
The current implementation of Cobbler power management uses the fence-agent tools to support multiple protocols besides IPMI.
Those are not supported by <phrase><phrase>SUSE</phrase> Manager</phrase>
but can be used by adding the fence agent names as a comma-separated list to the <command>java.power_management.types</command> configuration parameter.</para>
</sect3>
<sect3 id="s4-sm-system-details-shots"><title>System Details  &gt;  Provisioning  &gt;  Snapshots</title><para>Snapshots enable you to roll back the system’s package profile, configuration files, and <phrase><phrase>SUSE</phrase> Manager</phrase>
settings.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional provisioning snapshot index</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_provisioning_snapshot_index.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Snapshots are always captured automatically after an action takes place.
The <guimenu>Snapshots</guimenu>
 subtab lists all snapshots for the system, including the reason the snapshot was taken, the time it was taken, and the number of tags applied to each snapshot.</para>
<note>
<title>Technical Details</title>
<itemizedlist>
<listitem>
<para>A snapshot is always taken <emphasis>after</emphasis> a successful operation and not before, as you might expect. One consequence of taking snapshots after the action is that, to undo action number X, then you must roll back to the snapshot number X-1.</para>
</listitem>
<listitem>
<para>It is possible to disable snapshotting globally (in <filename>rhn.conf</filename> set <literal>enable_snapshots = 0</literal>), but it is enabled by default. No further fine tuning is possible.</para>
</listitem>
</itemizedlist>
</note>
<para>To revert to a previous configuration, click the <guimenu>Reason</guimenu>
 for the snapshot and review the potential changes on the provided subtabs, starting with <guimenu>Rollback</guimenu>
.</para>
<important>
<title>Unsupported Rollback Scenarios</title>
<para>Snapshot roll backs support the ability to revert <emphasis>certain</emphasis> changes to the system, but not in every scenario.
For example, you can roll back a set of RPM packages, but rolling back across multiple update levels is not supported.</para>
<para>Rolling back an SP migration is also not supported.</para>
</important>
<para>Each subtab provides the specific changes that will be made to the system during the rollback:</para>
<itemizedlist>
<listitem>
<para>group memberships,</para>
</listitem>
<listitem>
<para>channel subscriptions,</para>
</listitem>
<listitem>
<para>installed packages,</para>
</listitem>
<listitem>
<para>configuration channel subscriptions,</para>
</listitem>
<listitem>
<para>configuration files,</para>
</listitem>
<listitem>
<para>snapshot tags.</para>
</listitem>
</itemizedlist>
<para>When satisfied with the reversion, return to the <guimenu>Rollback</guimenu>
 subtab and click the <guimenu>Rollback to Snapshot</guimenu>
 button.
To see the list again, click <guimenu>Return to snapshot list</guimenu>
.</para>
<note>
<title>Background Information About Snapshots</title>
<para>There is no maximum number of snapshots that <phrase><phrase>SUSE</phrase> Manager</phrase> will keep, thus related database tables will grow with system count, package count, channel count, and the number of configuration changes over time.
Installations with more than a thousand systems should consider setting up a recurring cleanup script via the API or disabling this feature altogether.</para>
<para>There is currently no integrated support for <quote>rotated snapshots</quote>.</para>
<para>Snapshot rollback gets scheduled like any other action, this means the rollback usually does not happen immediately.</para>
</note>
</sect3>
<sect3 id="s5-sm-system-details-shots-tags"><title>System Details &gt;  Provisioning  &gt;  Snapshot Tags</title><para>Snapshot tags provide a means to add meaningful descriptions to your most recent system snapshot.
This can be used to indicate milestones, such as a known working configuration or a successful upgrade.</para>
<para>To tag the most recent snapshot, click <guimenu>Create System Tag</guimenu>
, enter a descriptive term in the <guimenu>Tag name</guimenu>
 field, and click the <guimenu>Tag Current Snapshot</guimenu>
 button.
You may then revert using this tag directly by clicking its name in the Snapshot Tags list.
To delete tags, select their check boxes, click <guimenu>Remove Tags</guimenu>
, and confirm the action.</para>
</sect3>
</sect2>
<sect2 id="s4-sm-system-details-groups"><title>System Details &gt;  Groups</title><para>The <guimenu>Groups</guimenu> tab and its subtabs allow you to manage the system’s group memberships.</para>
<sect3 id="s5-sm-system-details-groups-list"><title>System Details  &gt;  Groups  &gt;  List/Leave</title><para>This subtab lists groups to which the system belongs and enables you to cancel membership.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional list groups</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_list_groups.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Only System Group Administrators and <phrase><phrase>SUSE</phrase> Manager</phrase>
Administrators can remove systems from groups.
Non-admins see a <guimenu>Review this system’s group membership</guimenu> page.
To remove the system from one or more groups, select the respective check boxes of these groups and click the <guimenu>Leave Selected Groups</guimenu> button.
To see the <guimenu>System Group Details</guimenu> page, click the group’s name.
Refer to <xref linkend="ref.webui.systems.systemgroups.details"/> for more information.</para>
</sect3>
<sect3 id="s5-sm-system-details-groups-join"><title>System Details &gt;  Groups  &gt;  Join</title><para>Lists groups that the system can be subscribed to.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional add group</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_add_group.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Only System Group Administrators and <phrase><phrase>SUSE</phrase> Manager</phrase>
Administrators can add a system to groups.
Non-admins see a <guimenu>Review this system’s group membership</guimenu>
 page.
To add the system to groups, select the groups' check boxes and click the <guimenu>Join Selected Groups</guimenu>
 button.</para>
</sect3>
</sect2>
<sect2 id="s4-sm-system-details-virtualization"><title>System Details &gt;  Virtualization  [Management]</title><para>This tab allows you to create new virtual guests, apply images on a
traditionally managed host system, or change the status of virtual guests.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional virtualization details</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_virtualization_details.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>The <guimenu>Virtualization</guimenu>
 tab has three subtabs, <guimenu>Details</guimenu>,
 <guimenu>Provisioning</guimenu>, and <guimenu>Deployment</guimenu>
.
These tabs appear the same for both virtual hosts and guests, but the functionality only makes sense for virtual hosts.
It is not possible to create a guest system that runs on another guest system.</para>
<bridgehead id="sdc-virt-host-place" renderas="sect4">System Details &gt; Virtualization&gt; Details</bridgehead>
<para><guimenu>Details</guimenu>
 is the default tab.
For host systems, it presents a table of the host system’s virtual guests.
For each guest system, the following information is provided:</para>
<variablelist>
<varlistentry>
<term><guimenu>Status</guimenu></term>
<listitem>
<para>This field indicates whether the virtual system is running, paused, stopped, or has crashed.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Updates</guimenu></term>
<listitem>
<para>This field indicates whether patches (errata) applicable to the guest have yet to be applied.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Base Software Channel</guimenu></term>
<listitem>
<para>This field indicates the Base Channel to which the guest is subscribed.</para>
</listitem>
</varlistentry>
</variablelist>
<note>
<para>If a guest system has not registered with <phrase><phrase>SUSE</phrase> Manager</phrase>
, this information appears as plain text in the table.</para>
</note>
<para>If you have System Group Administrator responsibilities assigned for your guest systems, a user might see the message <guimenu>You do not have permission to access this system</guimenu>
 in the table.
This is because it is possible to assign virtual guests on a single host to multiple System Group Administrators.
Only users that have System Group Administrator privileges on the host system may create new virtual guests.</para>
<sect3 id="s5-sm-system-details-virtualization-deployment"><title>System Details &gt; Virtualization &gt; Deployment</title><para>In the <menuchoice><guimenu>System Details</guimenu> <guimenu>Virtualization</guimenu></menuchoice> tab of a traditionally registered bare-metal machine, there is a  <menuchoice><guimenu>System Details</guimenu> <guimenu>Virtualization</guimenu> <guimenu>Deployment</guimenu></menuchoice> subtab. This form expects a URL to a <literal>qcow2</literal> type of image and some other parameters allowing the user to schedule the deployment of that image.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional virtualization deployment</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_virtualization_deployment.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>When the deploment scheduled it is listed as an action on the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Schedulte</guimenu> <guimenu>Pending Actions</guimenu></menuchoice>.</para>
</sect3>
</sect2>
<sect2 id="s4-sm-system-details-audit"><title>System Details &gt;  Audit  [Management]</title><para>Via the <guimenu>Audit</guimenu>
 tab, view OpenSCAP scan results or schedule scans.
For more information on auditing and OpenSCAP, refer to <xref linkend="ref.webui.audit"/>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional list audit</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_list_audit.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional schedule audit</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_schedule_audit.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="s4-sm-system-details-states"><title>System Details &gt;  States  [Salt]</title><para><indexterm>
<primary>system states</primary>
</indexterm></para>
<para><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>System states</secondary>
</indexterm>
<indexterm>
<primary>System states</primary>
</indexterm></para>
<para><indexterm>
<primary>Web Interface</primary><secondary>System States Custom</secondary>
</indexterm>
<indexterm>
<primary>System States Custom</primary>
</indexterm></para>
<para>Overview of <guimenu>States</guimenu>
 subtabs.</para>
<note>
<para>The following subtabs are only available for Salt minions.</para>
</note>
<sect3 id="_system_details_states_packages"><title>System Details &gt;  States  &gt;  Packages</title><para><guimenu>Search and install</guimenu>
 packages then assign them with a pre-defined state for a selected machine.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details salt states packages</phrase></textobject><imageobject>
<imagedata fileref="system_details_salt_states_packages.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Here you can search for a specific package, for example <systemitem class="resource">vim</systemitem>
.
Then with the drop-down box activate <guimenu>Unmanaged</guimenu>
, <guimenu>Installed</guimenu>
, or <guimenu>Removed</guimenu>
.
Select <guimenu>Latest</guimenu>
 or <guimenu>Any</guimenu>
 from the drop-down box. <guimenu>Latest</guimenu>
 applies the latest package version available while <guimenu>Any</guimenu>
 applies the package version required to fulfil dependencies.
Click the <guimenu>Save</guimenu>
 button to save changes to the database, then click <guimenu>Apply</guimenu>
 to apply the new package state.</para>
</sect3>
<sect3 id="s5-sm-system-details-states-custom"><title>System Details &gt;  States  &gt;  Custom</title><para>States which have been created on the <guimenu>States Catalog</guimenu>
 page located under <guimenu>Salt</guimenu>
 on the left bar may be assigned to a system on the <menuchoice><guimenu>States</guimenu> <guimenu>Custom</guimenu></menuchoice>
 page.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details salt states custom</phrase></textobject><imageobject>
<imagedata fileref="system_details_salt_states_custom.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Search for the custom state you want to apply to the system then select the <guimenu>Assign</guimenu>
 check box.
Click <guimenu>Save</guimenu>
 to save the change to the database finally select <guimenu>Apply</guimenu>
 to apply the changes.
States applied at the system level will only be applied to the selected system.</para>
</sect3>
<sect3 id="s5-sm-system-details-states-highstate"><title>System Details &gt;  States  &gt;  Highstate</title><para>From the <guimenu>Highstate</guimenu>
 page you can view and apply the high state for a selected system.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details salt states highstate</phrase></textobject><imageobject>
<imagedata fileref="system_details_salt_states_highstate.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Select a date and time to apply the high state.
Then click <guimenu>Apply Highstate</guimenu>
.</para>
</sect3>
</sect2>
<sect2 id="s4-sm-system-details-formualas"><title>System Details &gt;  Formulas  [Salt]</title><para>This is a feature preview.
On the <guimenu>Formualas</guimenu>
 page you can select Salt formulas for this system.
This allows you to automatically install and configure software.</para>
<para>Installed formulas are listed.
Select from the listing by clicking the check box to the left.
Then confirm with the <guimenu>Save</guimenu>
 button on the right.
When done, additional subtabs appear where you can configure the formulas.</para>
<para>For usage information, see <xref linkend="best.practice.salt.formulas.using"/>.</para>
</sect2>
<sect2 id="s4-sm-system-details-events"><title>System Details &gt;  Events</title><para>The <guimenu>Events</guimenu>
 page displays past, current, and scheduled actions on the system.
You may cancel pending events here.
The following sections describe the <guimenu>Events</guimenu>
 subtabs and the features they offer.</para>
<sect3 id="s5-sm-system-details-events-pend"><title>System Details  &gt;  Events  &gt;  Pending</title><para>Lists events that are scheduled but have not started.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional events pending</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_events_pending.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>A prerequisite action must complete successfully before the given action is attempted.
If an action has a prerequisite, no check box is available to cancel that action.
Instead, a check box appears next to the prerequisite action; canceling the prerequisite action causes the action in question to fail.</para>
<para>Actions can be chained so that action 'a' requires action 'b' which requires action 'c'. Action 'c' is performed first and has a check box next to it until it is completed successfully.
If any action in the chain fails, the remaining actions also fail.
To unschedule a pending event, select the event and click the <guimenu>Cancel Selected Events</guimenu> button.
The following icons indicate the type of events:</para>
<itemizedlist>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="spacewalk-icon-packages.png"/>
</imageobject>
<textobject role="description"><phrase>spacewalk icon packages</phrase></textobject>
</inlinemediaobject> — Package Event,</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="spacewalk-icon-patches.png"/>
</imageobject>
<textobject role="description"><phrase>spacewalk icon patches</phrase></textobject>
</inlinemediaobject> — Patch Event,</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-cog.png"/>
</imageobject>
<textobject role="description"><phrase>fa cog</phrase></textobject>
</inlinemediaobject> — Preferences Event,</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-desktop.png"/>
</imageobject>
<textobject role="description"><phrase>fa desktop</phrase></textobject>
</inlinemediaobject> — System Event.</para>
</listitem>
</itemizedlist>
</sect3>
<sect3 id="s5-sm-system-details-events-hist"><title>System Details &gt;  Events  &gt;  History</title><para>The default display of the <guimenu>Events</guimenu>
 tab lists the type and status of events that have failed, occurred or are occurring.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>system details traditional events history</phrase></textobject><imageobject>
<imagedata fileref="system_details_traditional_events_history.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>To view details of an event, click its summary in the <guimenu>System History</guimenu>
 list.
To go back to the table again, click <guimenu>Return to history list</guimenu>
 at the bottom of the page.</para>
</sect3>
</sect2>
</sect1>
<sect1 id="ref.webui.systems.systemgroups"><title>System Groups</title><para><indexterm>
<primary>system group</primary>
</indexterm></para>
<para><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>list of</secondary>
</indexterm>
<indexterm>
<primary>list of</primary>
</indexterm></para>
<para><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>System Group List</secondary>
</indexterm>
<indexterm>
<primary>System Group List</primary>
</indexterm></para>
<para><indexterm>
<primary>Web Interface</primary><secondary>System Groups</secondary>
</indexterm>
<indexterm>
<primary>System Groups</primary>
</indexterm></para>
<para>The <guimenu>System Groups</guimenu>
 page allows <phrase><phrase>SUSE</phrase> Manager</phrase>
 users to view the <guimenu>System Groups</guimenu>
 list.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems systemgroups</phrase></textobject><imageobject>
<imagedata fileref="systems_systemgroups.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Only System Group Administrators and <phrase><phrase>SUSE</phrase> Manager</phrase>
Administrators may perform the following additional tasks:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Create system groups. (Refer to <xref linkend="ref.webui.systems.systemgroups.create"/>.)</para>
</listitem>
<listitem>
<para>Add systems to system groups. (Refer to <xref linkend="ref.webui.systems.systemgroups.add"/>.)</para>
</listitem>
<listitem>
<para>Remove systems from system groups. (Refer to <xref linkend="s3-sm-system-details"/>.)</para>
</listitem>
<listitem>
<para>Assign system group permissions to users. (Refer to <xref linkend="ref.webui.users"/>.)</para>
</listitem>
</orderedlist>
<para>The <guimenu>System Groups</guimenu>
 list displays all system groups.
The list contains several columns for each group:</para>
<itemizedlist>
<listitem>
<para><guimenu>Select</guimenu> — Via the check boxes add all systems in the selected groups to the <guimenu>System Set Manager</guimenu> by clicking the <guimenu>Update</guimenu> button. All systems in the selected groups are added to the <guimenu>System Set Manager</guimenu> . You can then use the <guimenu>System Set Manager</guimenu> to perform actions on them simultaneously. It is possible to select only those systems that are members of all of the selected groups, excluding those systems that belong only to one or some of the selected groups. To do so, select the relevant groups and click the <guimenu>Work with Intersection</guimenu> button. To add all systems of all selected groups, click the <guimenu>Work with Union</guimenu> button. Each system will show up once, regardless of the number of groups to which it belongs. Refer to <xref linkend="ref.webui.systems.ssm"/> for details.</para>
</listitem>
<listitem>
<para><guimenu>Updates</guimenu> — Shows which type of patch alerts are applicable to the group or confirms that all systems are up-to-date. Clicking a group’s status icon takes you to the <guimenu>Patch</guimenu> tab of its <guimenu>System Group Details</guimenu> page. Refer to <xref linkend="ref.webui.systems.systemgroups.details"/> for more information.</para>
<para>The status icons call for differing degrees of attention:
<emphasis role="strong"> <inlinemediaobject>
<imageobject>
<imagedata fileref="fa-check-circle.svg"/>
</imageobject>
<textobject role="description"><phrase>Check Circle</phrase></textobject>
</inlinemediaobject> — All systems in the group are up-to-date.
</emphasis> <inlinemediaobject>
<imageobject>
<imagedata fileref="fa-exclamation-circle.svg"/>
</imageobject>
<textobject role="description"><phrase>Exclamation Circle</phrase></textobject>
</inlinemediaobject> — Critical patches available, update <emphasis>strongly</emphasis> recommended.
** <inlinemediaobject>
<imageobject>
<imagedata fileref="fa-warning.svg"/>
</imageobject>
<textobject role="description"><phrase>Warning</phrase></textobject>
</inlinemediaobject> — Updates available and recommended.</para>
</listitem>
<listitem>
<para><guimenu>Health</guimenu> Status of the systems in the group, reported by probes.</para>
</listitem>
<listitem>
<para><guimenu>Group Name</guimenu> — The name of the group as configured during its creation. The name should be explicit enough to distinguish from other groups. Clicking the name of a group takes you to the <guimenu>Details</guimenu> tab of its <guimenu>System Group Details</guimenu> page. Refer to <xref linkend="ref.webui.systems.systemgroups.details"/> for more information.</para>
</listitem>
<listitem>
<para><guimenu>Systems</guimenu> — Total number of systems in the group. Clicking the number takes you to the <guimenu>Systems</guimenu> tab of the <guimenu>System Group Details</guimenu> page for the group. Refer to <xref linkend="ref.webui.systems.systemgroups.details"/> for more information.</para>
</listitem>
<listitem>
<para><guimenu>Use in SSM</guimenu> — Clicking the <guimenu>Use in SSM</guimenu> link in this column loads all and only the systems in the selected group and launches the <guimenu>System Set Manager</guimenu> immediately. Refer to <xref linkend="ref.webui.systems.ssm"/> for more information.</para>
</listitem>
</itemizedlist>
<sect2 id="ref.webui.systems.systemgroups.create"><title>Creating Groups</title><para>To add a new system group, click the <guimenu>Create Group</guimenu>
 link at the top-right corner of the page.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems edit group</phrase></textobject><imageobject>
<imagedata fileref="systems_edit_group.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Type a name and description and click the <guimenu>Create Group</guimenu>
 button.
Make sure you use a name that clearly sets this group apart from others.
The new group will appear in the <guimenu>System Groups</guimenu>
 list.</para>
</sect2>
<sect2 id="ref.webui.systems.systemgroups.add"><title>Adding and Removing Systems in Groups</title><para><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>adding and removing</secondary>
</indexterm>
<indexterm>
<primary>adding and removing</primary>
</indexterm></para>
<para>Systems can be added and removed from system groups.
Clicking the group name takes you to the <guimenu>Details</guimenu>
 page.
The <guimenu>Systems</guimenu>
 tab shows all systems in the group and allows you to select some or all systems for deletion.
Click <guimenu>Remove Systems</guimenu>
 to remove the selected systems from the group.
The <guimenu>Target Systems</guimenu>
 page shows you all systems that can be added to the group.
Select the systems and click the <guimenu>Add Systems</guimenu>
 button.</para>
</sect2>
<sect2 id="ref.webui.systems.systemgroups.details"><title>System Group Details</title><para>At the top of each <guimenu>System Group Details</guimenu>
 page are two links: <guimenu>Delete Group</guimenu>
 and <guimenu>Work With Group</guimenu>
.
Clicking <guimenu>Delete Group</guimenu>
 deletes the System Group and should be used with caution.
Clicking <guimenu>Work With Group</guimenu>
 loads the group’s systems and launches the <guimenu>System Set Manager</guimenu>
 immediately like the <guimenu>Use Group</guimenu>
 button from the <guimenu>System Groups</guimenu>
 list.
Refer to <xref linkend="ref.webui.systems.ssm"/> for more information.</para>
<para>The <guimenu>System Group Details</guimenu>
 page is split into the following tabs:</para>
<sect3 id="s4-sm-system-group-details-details"><title>System Group Details  &gt;  Details</title><para><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>deleting</secondary>
</indexterm>
<indexterm>
<primary>deleting</primary>
</indexterm></para>
<para>Provides the group name and group description.
To change this information, click <guimenu>Edit These Properties</guimenu>
, make your changes in the appropriate fields, and click the <guimenu>Update Group</guimenu>
 button.</para>
</sect3>
<sect3 id="s4-sm-system-group-details-systems"><title>System Group Details &gt;  Systems</title><para>Lists all members of the system group.
Clicking links within the table takes you to corresponding tabs within the <guimenu>System Details</guimenu>
 page for the associated system.
To remove systems from the group, select the appropriate check boxes and click the <guimenu>Remove Systems</guimenu>
 button on the bottom of the page.
Clicking it does not delete systems from <phrase><phrase>SUSE</phrase> Manager</phrase>
 entirely.
This is done through the <guimenu>System Set Manager</guimenu>
 or <guimenu>System Details</guimenu>
 pages.
Refer to <xref linkend="ref.webui.systems.ssm"/> or <xref linkend="s3-sm-system-details"/>, respectively.</para>
</sect3>
<sect3 id="s4-sm-system-group-details-target"><title>System Group Details &gt;  Target Systems</title><para><guimenu>Target Systems</guimenu>
 — Lists all systems in your organization.
To add systems to the specified system group, click the check boxes to their left and click the <guimenu>Add Systems</guimenu>
 button on the bottom right-hand corner of the page.</para>
</sect3>
<sect3 id="s4-sm-system-group-details-errata"><title>System Group Details &gt;  Patches</title><para>List of relevant patches for systems in the system group.
Clicking the advisory takes you to the <guimenu>Details</guimenu>
 tab of the <guimenu>Patch Details</guimenu>
 page.
(Refer to <xref linkend="s3-sm-errata-details"/> for more information.) Clicking the Affected Systems number lists all of the systems affected by the patch.
To apply the patch updates in this list, select the systems and click the <guimenu>Apply Patches</guimenu>
 button.</para>
</sect3>
<sect3 id="s4-sm-system-group-details-admins"><title>System Group Details &gt;  Admins</title><para>List of all organization users that have permission to manage the system group. <phrase><phrase>SUSE</phrase> Manager</phrase>
Administrators are clearly identified.
System Group Administrators are marked with an asterisk (*). To change the system group’s users, select and deselect the appropriate check boxes and click the <guimenu>Update</guimenu>
 button.</para>
</sect3>
<sect3 id="s4-sm-system-group-details-states"><title>System Group Details &gt;  States  [Salt]</title><para>The <guimenu>States</guimenu>
 tab displays states which have been created and added using the <guimenu>Salt</guimenu>
 &gt; <guimenu>State Catalog</guimenu>
.
From this page you can select which states should be applied across a group of systems.
A state applied from this page will be applied to all minions within a group.</para>
<note>
<para>States are applied according to the following order of hierarchy within <phrase><phrase>SUSE</phrase> Manager</phrase>
:</para>
<screen>Organization &gt; Group &gt; Single System</screen>
</note>
<orderedlist numeration="arabic">
<title>Procedure: Applying States at the Group Level</title>
<listitem>
<para>Create a state using the <menuchoice><guimenu>Salt</guimenu> <guimenu>State Catalog</guimenu></menuchoice> or via the command line.</para>
</listitem>
<listitem>
<para>Browse to <menuchoice><guimenu>Systems</guimenu> <guimenu>System Groups</guimenu></menuchoice> . Select the group that a new state should be applied to. From a specific group page select the <guimenu>States</guimenu> tab.</para>
</listitem>
<listitem>
<para>Use the search feature to located a state by name or click the <guimenu>Search</guimenu> button to list all available states.</para>
</listitem>
<listitem>
<para>Select the check box for the state to be applied and click the <guimenu>Save</guimenu> button. The <guimenu>Save</guimenu> button will save the change to the database but will not apply the state.</para>
</listitem>
<listitem>
<para>Apply the state by clicking the <guimenu>Apply</guimenu> button. The state will be scheduled and applied to any systems included within a group.</para>
</listitem>
</orderedlist>
</sect3>
</sect2>
</sect1>
<sect1 id="ref.webui.systems.ssm"><title>System Set Manager</title><para>The following actions executed on individual systems from the System Details page may be performed for multiple systems via the System Set Manager.
The System Set Manager can be used to schedule actions on both Salt and Traditional systems.
The following table provides information on what actions may be performed across both Salt and Traditional systems.
These two methods have different actions which may be accessed with the System Set Manager:</para>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="3">
<colspec colname="col_1" colwidth="33.3333*"/>
<colspec colname="col_2" colwidth="33.3333*"/>
<colspec colname="col_3" colwidth="33.3334*"/>
<thead>
<row>
<entry><para>System Set Manager: Overview</para></entry>
<entry><para>Traditional SSM</para></entry>
<entry><para>Salt SSM</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>Systems:</para><para>* List Systems</para></entry>
<entry><para>Supported</para><para>* Supported</para></entry>
<entry><para>Supported</para><para>* Supported</para></entry>
</row>
<row>
<entry><para>Install Patches:</para><para>* Schedule Patch Updates</para></entry>
<entry><para>Supported</para><para>* Supported</para></entry>
<entry><para>Supported</para><para>* Supported</para></entry>
</row>
<row>
<entry><para>Install Packages:</para><para>* Upgrade
* Install
* Remove
* Verify</para></entry>
<entry><para>Supported</para><para>* Supported
* Supported
* Supported
* Supported</para></entry>
<entry><para>Limited</para><para>* Supported
* Supported
* Supported
* Not Available</para></entry>
</row>
<row>
<entry><para>Groups:</para><para>* Create
* Manage</para></entry>
<entry><para>Supported</para><para>* Supported
* Supported</para></entry>
<entry><para>Supported</para><para>* Supported
* Supported</para></entry>
</row>
<row>
<entry><para>Channels:</para><para>* Channel Memberships
* Channel Subscriptions
* Deploy / Diff Channels</para></entry>
<entry><para>Supported</para><para>* Supported
* Supported
* Supported</para></entry>
<entry><para>Limited</para><para>* Supported
* Not Available
* Not Available</para></entry>
</row>
<row>
<entry><para>Provisioning:</para><para>* Autoinstall Systems
* Tag for Snapshot
* Remote Commands
* Power Management
* Power Management Operations</para></entry>
<entry><para>Supported</para><para>* Supported
* Supported
* Supported
* Supported
* Supported</para></entry>
<entry><para>Not Available</para></entry>
</row>
<row>
<entry><para>Misc:</para><para>* Update Hardware Profiles
* Update Package Profiles
* Update System Preferences
* Set/Remove Custom Values
* Add/Remove Add-on Types
* Delete Systems
* Reboot Systems
* Migrate Systems to another Organization
* Lock/Unlock Systems
* Audit Systems (OpenSCAP)</para></entry>
<entry><para>Supported</para><para>* Supported
* Supported
* Supported
* Supported
* Supported
* Supported
* Supported
* Supported
* Supported
* Supported</para></entry>
<entry><para>Limited</para><para>* Supported
* Supported
* Not Available
* Supported
* Not Available
* Supported
* Supported
* Supported
* Not Available
* Not Available</para></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<para>Before performing actions on multiple systems, select the systems to work with.
To select systems, click <guimenu>Systems</guimenu>
 in the left bar, check the boxes to the left of the systems you want to work with, and click the <guimenu>Manage</guimenu>
 button in the top bar.</para>
<para>Additionally, you can access the System Set Manager in three different ways:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Click the <guimenu>System Set Manager</guimenu> link in the left bar.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Use in SSM</guimenu> link in the <guimenu>System Groups</guimenu> list.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Work with Group</guimenu> link on the <guimenu>System Group Details</guimenu> page.</para>
</listitem>
</orderedlist>
<sect2 id="ref.webui.systems.ssm.overview"><title>System Set Manager &gt;  Overview</title><para>This page contains links to most SSM option tabs with short explanations.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm overview</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_overview.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.ssm.systems"><title>System Set Manager &gt;  Systems</title><para>List of selected systems.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm list systems</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_list_systems.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.ssm.patches"><title>System Set Manager &gt;  Patches</title><para>List of patch updates applicable to the current system set.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm patches</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_patches.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Click the number in the Systems column to see to which systems in the System Set Manager a patch applies.
To apply updates, select the patches and click the <guimenu>Apply Patches</guimenu>
 button.</para>
</sect2>
<sect2 id="ref.webui.systems.ssm.packages"><title>System Set Manager &gt;  Packages</title><para>Click the number in the Systems column to see the systems in the System Set Manager to which a package applies.
Modify packages on the system via the following subtabs.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm packages overview</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_packages_overview.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<sect3 id="s4-sm-ssm-packages-install"><title>System Set Manager &gt;  Packages  &gt;  Install</title><para>This list includes all channels to which systems in the set are subscribed.
A package is only installed on a system if the system is subscribed to the channel providing the package.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm install</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_install.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Click the channel name and select the packages from the list.
Then click the <guimenu>Install Packages</guimenu>
 button.</para>
</sect3>
<sect3 id="s4-sm-ssm-packages-remove"><title>System Set Manager &gt;  Packages  &gt;  Remove</title><para>A list of all the packages installed on the selected systems that might be removed.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm remove</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_remove.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Multiple versions appear if systems in the System Set Manager have more than one version installed.
Select the packages to be deleted, then click the <guimenu>Remove Packages</guimenu>
 button.</para>
</sect3>
<sect3 id="s4-sm-ssm-packages-upgrade"><title>System Set Manager &gt;  Packages  &gt;  Upgrade</title><para>A list of all the packages installed on the selected systems that might be upgraded.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm upgrade</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_upgrade.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Systems must be subscribed to a channel providing the packages to be upgraded.
If multiple versions of a package are available, note that your system will be upgraded to the latest version.
Select the packages to be upgraded, then click the <guimenu>Upgrade Packages</guimenu>
 button.</para>
</sect3>
<sect3 id="s3-sm-ssm-verify"><title>System Set Manager &gt;  Packages  &gt;  Verify</title><para>A list of all installed packages whose contents, file checksum, and other details may be verified.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm verify</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_verify.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>At the next check in, the verify event issues the command <command>rpm
     --verify</command> for the specified package.
If there are any discrepancies, they are displayed in the System Details page for each system.</para>
<para>Select the check box next to all packages to be verified, then click the <guimenu>Verify Packages</guimenu> button.
On the next page, select a date and time for the verification, then click the <guimenu>Schedule Verifications</guimenu> button.</para>
</sect3>
</sect2>
<sect2 id="ref.webui.systems.ssm.groups"><title>System Set Manager &gt;  Groups</title><para>Tools to create groups and manage system memberships.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm groups</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_groups.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>These functions are limited to <phrase><phrase>SUSE</phrase> Manager</phrase>
Administrators and System Group Administrators.
To add a new group, click <guimenu>Create Group</guimenu>
 on the top-right corner.
In the next page, type the group name and description in the respective fields and click the <guimenu>Create Group</guimenu>
 button.
To add or remove selected systems in any of the system groups, toggle the appropriate radio buttons and click the <guimenu>Alter Membership</guimenu>
 button.</para>
</sect2>
<sect2 id="ref.webui.systems.ssm.channels"><title>System Set Manager &gt;  Channels</title><para>As a Channel Administrator, you may change the base channels your systems are subscribed to.</para>
<note>
<title>Changing the Channels Is Now an Action</title>
<para>Since the 3.1 maintenance update (2018) changing the channels is an action that can be scheduled like any other action.
Earlier channel changes were applied immediately.</para>
</note>
<para>Manage channel associations through the following wizard procedure:</para>
<variablelist>
<varlistentry>
<term><literal role="guimenu">Base Channel Alteration</literal> (Page 1)</term>
<listitem>
<para>Valid channels are either channels created by your organization, or the vendor’s default base channel for your operating system version and processor type.
Systems will be unsubscribed from all channels, and subscribed to their new base channels.</para>
<warning>
<title>Changing Base Channel</title>
<para>This operation can have a dramatic effect on the packages and patches available to the systems.
Use with caution.</para>
</warning>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm base channels</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_base_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>To change the base channel, select the new one from the <literal role="guimenu">Desired base Channel</literal>
and confirm the action.</para>
<para>On the this wizard page you see the <literal role="guimenu">Current base Channel</literal> and how many <literal role="guimenu">Systems</literal>
are subscribed to it.
Click the number link in the <literal role="guimenu">Systems</literal> column to see which systems are actually selected.</para>
<para>To change the base channel subscription select the <literal role="guimenu">Desired base Channel</literal> from the selection box.
Then click <guimenu>Next</guimenu> in the lower left corner.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><literal role="guimenu">Child Channels</literal> (Page 2)</term>
<listitem>
<para>The <literal role="guimenu">Child Channels</literal> page allows you to subscribe and unsubscribe individual child channels related to its parent or base channel.
Systems must subscribe to a base channel before subscribing to a child channel.
If you enable <guimenu>with recommended</guimenu>, recommended child channels are automatically selected for subscription.
The handling of required channels is currently not implemented for system set manager.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm child subscriptions</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_child_subscriptions.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Change the child channel subscription on this page.
Then click <guimenu>Next</guimenu> in the lower left corner.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><literal role="guimenu">Channel Changes Overview</literal> (Page 3)</term>
<listitem>
<para>Schedule when the channel changes should take place the earliest.
Then click <guimenu>Confirm</guimenu> in the lower left corner.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><literal role="guimenu">Channel Changes Actions</literal> (Page 4)</term>
<listitem>
<para>See the scheduled change actions.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="ref.webui.systems.ssm.config"><title>System Set Manager &gt;  Configuration</title><para>Like in the <menuchoice><guimenu>System Details</guimenu> <guimenu>Channels</guimenu> <guimenu>Configuration</guimenu></menuchoice>
 tab, the subtabs here can be used to subscribe the selected systems to configuration channels and deploy and compare the configuration files on the systems.
The channels are created in the <guimenu>Manage Config Channels</guimenu>
 interface within the <guimenu>Channels</guimenu>
 category.
Refer to <xref linkend="ref.webui.config.overview"/> for channel creation instructions.</para>
<para>To manage the configuration of a system, install the latest <filename>rhncfg*</filename>
 packages.
Refer to <xref linkend="ref.webui.config.preparing"/> for instructions on enabling and disabling scheduled actions for a system.</para>
<sect3 id="ref.webui.systems.ssm.config.deploy"><title>System Set Manager  &gt;  Configuration  &gt;  Deploy Files</title><para>Use this subtab to distribute configuration files from your central repository on <phrase><phrase>SUSE</phrase> Manager</phrase>
to each of the selected systems.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm config deploy files</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_config_deploy_files.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>The table lists the configuration files associated with any of the selected systems.
Clicking its system count displays the systems already subscribed to the file.</para>
<para>To subscribe the selected systems to the available configuration files, select the check box for each wanted file.
When done, click <guimenu>Deploy Configuration</guimenu>
 and schedule the action.
Note that the latest versions of the files, at the time of scheduling, are deployed.
Newer versions created after scheduling are disregarded.</para>
</sect3>
<sect3 id="ref.webui.systems.ssm.config.verify"><title>System Set Manager &gt;  Configuration  &gt;  Compare Files</title><para>Use this subtab to validate configuration files on the selected systems against copies in your central repository on <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm config compare files</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_config_compare_files.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>The table lists the configuration files associated with any of the selected systems.
Clicking a file’s system count displays the systems already subscribed to the file.</para>
<para>To compare the configuration files deployed on the systems with those in <phrase><phrase>SUSE</phrase> Manager</phrase>
, select the check box for each file to be validated.
Then click <menuchoice><guimenu>Analyze Differences</guimenu> <guimenu>Schedule File
     Comparison</guimenu></menuchoice>
.
The comparisons for each system will not complete until each system checks in to <phrase><phrase>SUSE</phrase> Manager</phrase>
.
When each comparison is complete, any differences between the files will be accessible from each system’s events page.</para>
<para>Note that the latest versions of the files, at the time of scheduling, are compared.
Newer versions created after scheduling are disregarded.
Find the results in the main <guimenu>Schedule</guimenu>
 category or within the <menuchoice><guimenu>System Details</guimenu> <guimenu>Events</guimenu></menuchoice>
 tab.</para>
</sect3>
<sect3 id="ref.webui.systems.ssm.config.subs"><title>System Set Manager &gt;  Configuration  &gt;  Subscribe to Channels</title><para>Subscribe systems to configuration channels, and in a second step rank these channels according to the order of preference.
This tab is available only to <phrase><phrase>SUSE</phrase> Manager</phrase>
Administrators and Configuration Administrators.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm config subscribe to channels</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_config_subscribe_to_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Select channels for subscription by activating the check box. When done, confirm with <guimenu>Continue</guimenu> .</para>
</listitem>
<listitem>
<para>In the second step, rank the channels with the arrow-up or arrow-down symbols.</para>
<para>Then decide how the channels are applied to the selected systems.
The three buttons below the channels reflect your options.
Clicking <guimenu>Subscribe with Highest Priority</guimenu>
places all the ranked channels before any other channels to which the selected systems are currently subscribed.
Clicking <guimenu>Subscribe With Lowest Priority</guimenu>
places the ranked channels after those channels to which the selected systems are currently subscribed.
Clicking <guimenu>Replace Existing Subscriptions</guimenu>
removes any existing association and creates new ones with the ranked channels, leaving every system with the same configuration channels in the same order.</para>
<note>
<title>Confliction Ranks</title>
<para>In the first two cases, if any of the newly ranked configuration channels are already in a system’s existing configuration channel list, the duplicate channel is removed and replaced according to the new rank, effectively reordering the system’s existing channels.
When such conflicts exist, you are presented with a confirmation page to ensure the intended action is correct.
When the change has taken place, a message appears at the top of the page indicating the update was successful.</para>
</note>
<para>Then, click <guimenu>Apply Subscriptions</guimenu>
.</para>
</listitem>
</orderedlist>
<para>Channels are accessed in the order of their rank.
Your local configuration channel always overrides all other channels.</para>
</sect3>
<sect3 id="ref.webui.systems.ssm.config.unsubs"><title>System Set Manager &gt;  Configuration  &gt;  Unsubscribe from Channels</title><para>Administrators may unsubscribe systems from configuration channels by clicking the check box next to the channel name and clicking the <guimenu>Unsubscribe Systems</guimenu>
 button.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm config unsubscribe from channels</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_config_unsubscribe_from_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
<sect3 id="ref.webui.systems.ssm.config.enable"><title>System Set Manager &gt;  Configuration  &gt;  Enable Configuration</title><para>Registered systems without configuration management preparation will appear here in a list.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm config enable config</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_config_enable_config.png"/>
</imageobject></mediaobject>
</informalfigure>
<para>Administrators may enable configuration management by clicking the <guimenu>Enable SUSE Manager Configuration Management</guimenu>
 button.
You can also schedule the action by adjusting the <guimenu>Schedule no sooner than</guimenu>
 date and time setting using the drop-down box, then clicking <guimenu>Enable SUSE Manager Configuration Management</guimenu>
.</para>
<para>Then the systems will get subscribed to the required <phrase><phrase>SUSE</phrase> Manager</phrase>
tools channel and required <systemitem class="resource">rhncfg*</systemitem>
 packages will get installed.</para>
</sect3>
</sect2>
<sect2 id="ref.webui.systems.ssm.provision"><title>System Set Manager &gt;  Provisioning</title><para>Set the options for provisioning systems via the following subtabs.</para>
<sect3 id="ref.webui.systems.ssm.provision_autoinst"><title>System Set Manager  &gt;  Provisioning  &gt;  Autoinstallation</title><para>Use this subtab to reinstall clients.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm autoinstallation</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_autoinstallation.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>To schedule autoinstallations for these systems, select a distribution.
The autoinstallation profile used for each system in the set is determined via the <guimenu>Autoinstallable Type</guimenu>
 radio buttons.</para>
<para>Choose <guimenu>Select autoinstallation profile</guimenu>
 to apply the same profile to all systems in the set.
This is the default option.
You will see a list of available profiles to select from when you click <guimenu>Continue</guimenu>
.</para>
<para>Choose <guimenu>Autoinstall by IP Address</guimenu>
 to apply different autoinstallation profiles to different systems in the set, by IP address.
To do so, at least two autoinstallation profiles must be configured with associated IP ranges.</para>
<para>If you use <guimenu>Autoinstall by IP Address</guimenu>
, <phrase><phrase>SUSE</phrase> Manager</phrase>
 will automatically pick a profile for each system so that the system’s IP address will be in one of the IP ranges specified in the profile itself.
If such a profile cannot be found, <phrase><phrase>SUSE</phrase> Manager</phrase>
 will look for an organization default profile and apply that instead. If no matching IP ranges nor organization default profiles can be found, no autoinstallation will be performed on the system.
You will be notified on the next page if that happens.</para>
<para>To use Cobbler system records for autoinstallation, select <guimenu>Create PXE Installation Configuration</guimenu>
.
With PXE boot, you cannot only reinstall clients, but automatically install machines that do not have an operating system installed yet. <phrase><phrase>SUSE</phrase> Manager</phrase>
 and its network must be properly configured to enable boot using PXE.
For more information on Cobbler and Kickstart
 templates, refer to <xref linkend="advanced.topics.cobbler"/>.</para>
<note>
<para>If a system set contains bare-metal systems and installed clients, only features working for systems without an operating system installed will be available.
Full features will be enabled again when all bare-metal systems are removed from the set.</para>
</note>
<para>If any of the systems connect to <phrase><phrase>SUSE</phrase> Manager</phrase>
via a proxy server, choose either the <guimenu>Preserve Existing Configuration</guimenu>
 radio button or the <guimenu>Use Proxy</guimenu>
 radio button.
If you choose to autoinstall through a proxy server, select from the available proxies listed in the drop-down box beside the <guimenu>Use Proxy</guimenu>
 radio button.
All of the selected systems will autoinstall via the selected proxy.
Click the <guimenu>Schedule Autoinstall</guimenu>
 button to confirm your selections.
When the autoinstallations for the selected systems are successfully scheduled, you will return to the <guimenu>System Set Manager</guimenu>
 page.</para>
</sect3>
<sect3 id="ref.webui.systems.ssm.provision.tag"><title>System Set Manager &gt;  Provisioning  &gt;  Tag Systems</title><para>Use this subtab to add meaningful descriptions to the most recent snapshots of your selected systems.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm tag systems</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_tag_systems.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>To tag the most recent system snapshots, enter a descriptive term in the <guimenu>Tag name</guimenu>
 field and click the <guimenu>Tag Current Snapshots</guimenu>
 button.</para>
</sect3>
<sect3 id="ref.webui.systems.ssm.provision.roll"><title>System Set Manager &gt;  Provisioning  &gt;  Rollback</title><para>Use this subtab to rollback selected systems to previous snapshots marked with a tag.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm rollback</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_rollback.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Click the tag name, verify the systems to be reverted, and click the <guimenu>Rollback Systems</guimenu>
 button.</para>
</sect3>
<sect3 id="ref.webui.systems.ssm.provision.remote"><title>System Set Manager &gt;  Provisioning  &gt;  Remote Command</title><para>Use this subtab to issue remote commands.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm remote command</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_remote_command.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>First create a <filename>run</filename>
 file on the client systems to allow this function to operate.
Refer to <xref linkend="s5-sm-system-details-remote"/> for instructions.
Then identify a specific user, group, timeout period, and the script to run.
Select a date and time to execute the command and click <guimenu>Schedule</guimenu>
.</para>
</sect3>
<sect3 id="ref.webui.systems.ssm.provision.pm_config"><title>System Set Manager &gt;  Provisioning  &gt;  Power Management Configuration</title><informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm power management config</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_power_management_config.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
<sect3 id="ref.webui.systems.ssm.provision.pm_op"><title>System Set Manager &gt;  Provisioning  &gt;  Power Management Operation</title><informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm power management operations</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_power_management_operations.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
</sect2>
<sect2 id="ref.webui.systems.ssm.audit"><title>System Set Manager &gt;  Audit</title><para>System sets can be scheduled for XCCDF scans; XCCDF stands for <quote>The
    Extensible Configuration Checklist Description Format</quote>
.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm audit</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_audit.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Enter the command and command line arguments, and the path to the XCCDF document.
Then schedule the scan.
All target systems are listed below with a flag whether they support OpenSCAP scans.
For more details on OpenSCAP and audits, refer to <xref linkend="ref.webui.audit"/>.</para>
</sect2>
<sect2 id="ref.webui.systems.ssm.misc"><title>System Set Manager &gt;  Misc</title><para>On the <guimenu>Misc</guimenu>
 page, you can modify <guimenu>Custom System Information</guimenu>
.
Click <guimenu>Set a custom value for selected systems</guimenu>
, then the name of a key.
Enter values for all selected systems, then click the <guimenu>Set Values</guimenu>
 button.
To remove values for all selected systems, click <guimenu>Remove a custom value from selected systems</guimenu>
, then the name of the key.
Click the <guimenu>Remove Values</guimenu>
 button to delete.</para>
<para>Set <guimenu>System Preferences</guimenu>
 via the respective radio buttons.</para>
<sect3 id="s4-sm-ssm-misc-updates-hw"><title>System Set Manager  &gt;  Misc  &gt;  Hardware</title><para>Click the <guimenu>Hardware</guimenu>
 subtab to schedule a hardware profile refresh.
Click <guimenu>Confirm Refresh</guimenu>
.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm misc hardware refresh</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_misc_hardware_refresh.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
<sect3 id="s4-sm-ssm-misc-updates-sw"><title>System Set Manager &gt;  Misc  &gt;  Software</title><para>Click the <guimenu>Software</guimenu>
 subtab, then the <guimenu>Confirm Refresh</guimenu>
 button to schedule a package profile update of the selected systems.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm misc software refresh</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_misc_software_refresh.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
<sect3 id="s4-sm-ssm-misc-migrate"><title>System Set Manager &gt;  Misc  &gt;  Migrate</title><para>Click the <guimenu>Migrate</guimenu>
 subtab to move selected systems to a selected organization.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm misc migrate systems</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_misc_migrate_systems.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
<sect3 id="s4-sm-ssm-misc-lock"><title>System Set Manager &gt;  Misc  &gt;  Lock/Unlock</title><para>Select the <guimenu>Lock/Unlock</guimenu>
 subtab to select systems to be excluded from package updates.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm misc lock unlock</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_misc_lock_unlock.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Enter a <guimenu>Lock reason</guimenu>
 in the text box and click the <guimenu>Lock</guimenu>
 button.
Already locked systems can be unlocked on this page.
Select them and click <guimenu>Unlock</guimenu>
.</para>
</sect3>
<sect3 id="s4-sm-ssm-misc-delete"><title>System Set Manager &gt;  Misc  &gt;  Delete</title><para>Click the <guimenu>Delete</guimenu>
 subtab, to remove systems by deleting their system profiles.
Click the <guimenu>Confirm Deletion</guimenu>
 button to remove the selected profiles permanently.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems ssm misc delete confirm</phrase></textobject><imageobject>
<imagedata fileref="systems_ssm_misc_delete_confirm.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
<sect3 id="s4-sm-ssm-misc-reboot"><title>System Set Manager &gt;  Misc  &gt;  Reboot</title><para>Select the appropriate systems, then click the <guimenu>Reboot Systems</guimenu>
 link to select these systems for reboot.</para>
<para>To cancel a reboot action, see <xref linkend="ref.webui.schedule.pending"/>.</para>
</sect3>
</sect2>
</sect1>
<sect1 id="ref.webui.systems.bootstrapping"><title>Bootstrapping [Salt]</title><para>The <guimenu>Bootstrapp Minions</guimenu>
 page allows you to bootstrap Salt minions from the Web UI
.</para>
<figure>
<title>Bootstrapping</title>
<mediaobject><textobject role="description"><phrase>bootstrapping</phrase></textobject><imageobject>
<imagedata fileref="bootstrapping.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<variablelist>
<title>Bootstrapping Parameters</title>
<varlistentry>
<term>Host</term>
<listitem>
<para>Place the FQDN of the minion to be bootstrapped within this field.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>SSH Port</term>
<listitem>
<para>Place the SSH port that will be used to connect and bootstrap a machine.
The default is <literal>22</literal>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>User</term>
<listitem>
<para>Input the minions user login.
The default is <systemitem class="username">root</systemitem>
.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Password</term>
<listitem>
<para>Input the minions login password.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Activation Key</term>
<listitem>
<para>Select the activation key (associated with a software source channel) that the minion should use to bootstrap with.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Disable SSH Strict Key Host Checking</term>
<listitem>
<para>This check box is selected by default.
This allows the script to auto-accept host keys without requiring a user to manually authenticate.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Manage System Completely via SSH (Will not Install an Agent)</term>
<listitem>
<note>
<title>Technology Preview</title>
<para>This feature is a Technology preview.</para>
</note>
<para>If selected a system will automatically be configured to use SSH.
No other connection method will be configured.</para>
</listitem>
</varlistentry>
</variablelist>
<para>Once your minion’s connection details have been filled in click the <guimenu>Bootstrap</guimenu>
 button.
When the minion has completed the bootstrap process, find your new minion listed on the <menuchoice><guimenu>Systems</guimenu> <guimenu>Overview</guimenu></menuchoice>
 page.</para>
</sect1>
<sect1 id="ref.webui.systems.visualization"><title>Visualization</title><para>You can visualize your virtualized, proxy, and systems group topologies.
Listed under <menuchoice><guimenu>Systems</guimenu> <guimenu>Visualization</guimenu></menuchoice>
 you will find the <guimenu>Virtualization Hierarchy</guimenu>
, <guimenu>Proxy Hierarchy</guimenu>
, and <guimenu>Systems Grouping</guimenu>
 subpages.
This features allows you to search, filter, and partition systems by name, base channel, check-in date, group, etc.</para>
<para>To visualize your systems select <menuchoice><guimenu>Systems</guimenu> <guimenu>Visualization</guimenu></menuchoice>
 from the left navigation menu.</para>
<para>Click the <guimenu>Show Filters</guimenu>
 button in the upper right corner to open the filters panel.
On the <guimenu>Filtering</guimenu>
 tab, systems are filterable by name, base channel, installed products, or with special properties such as security, bug fix, and product enhancement advisories.
etc.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems visualization filter example</phrase></textobject><imageobject>
<imagedata fileref="systems_visualization_filter_example.png" width="244%"/>
</imageobject></mediaobject>
</informalfigure>
<para>On the <guimenu>Partitioning</guimenu>
 tab, systems may also be partitioned by check-in time.
Select the check-in date and time and click the <guimenu>Apply</guimenu>
 button.
The <guimenu>Clear</guimenu>
 button will revert current partition configuration.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems visualization partition example</phrase></textobject><imageobject>
<imagedata fileref="systems_visualization_partition_example.png" width="244%"/>
</imageobject></mediaobject>
</informalfigure>
<para>All elements of the network tree are selectable.
Clicking any element in the tree opens a box containing information about the selected systems and will be displayed in the top-right of the visualization area.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems visualization selections example</phrase></textobject><imageobject>
<imagedata fileref="systems_visualization_selections_example.png" width="344%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Systems shown in the visualization view may be added to System Set Manager (SSM) for futher management.
This can be performed in two ways:</para>
<itemizedlist>
<listitem>
<para>Select single systems and click the <guimenu>Add system to SSM</guimenu> button in the top-right detail box.</para>
</listitem>
<listitem>
<para>Add all visible child elements of any parent node in the view (visible means when filters have been applied) by clicking the <guimenu>Add Children to SSM</guimenu> button at the bottom of the selection details panel.</para>
</listitem>
</itemizedlist>
<sect2 id="ref.webui.systems.virtual.visualzation"><title>Virtualization Hierarchy</title><para>The following is an example graphical representation tree of the virtual network hierarchy of virtual systems registered with <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems visualization virtualization hierarchy</phrase></textobject><imageobject>
<imagedata fileref="systems_visualization_virtualization_hierarchy.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.proxy.visualzation"><title>Proxy Hierarchy</title><para>The following is an example graphical representation tree of the proxy network hierarchy of proxy systems and their clients registered with <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems proxy heirarchy</phrase></textobject><imageobject>
<imagedata fileref="systems_proxy_heirarchy.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.grouping.visualzation"><title>Systems Grouping</title><para>The following is a graphical representation tree of the all systems registered with <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>visualization system grouping all</phrase></textobject><imageobject>
<imagedata fileref="visualization_system_grouping_all.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Systems are grouped according to preconfigured systems groups, and they may also be grouped into various group compositions by using the multi-select box.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>visualization system grouping</phrase></textobject><imageobject>
<imagedata fileref="visualization_system_grouping.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
</sect1>
<sect1 id="ref.webui.systems.search"><title>Advanced Search</title><para><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>searching</secondary>
</indexterm>
<indexterm>
<primary>searching</primary>
</indexterm></para>
<para><indexterm>
<primary>Web Interface</primary><secondary>System Search</secondary>
</indexterm>
<indexterm>
<primary>System Search</primary>
</indexterm></para>
<para>Carry out an <guimenu>Advanced Search</guimenu>
 on your systems according to the following criteria: network info, hardware devices, location, activity, packages, details, DMI info, and hardware.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems advanced search</phrase></textobject><imageobject>
<imagedata fileref="systems_advanced_search.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Refine searches using the <guimenu>Field to Search</guimenu>
 drop-down box, which is set to <guimenu>Name/Description</guimenu>
 by default.</para>
<para>The Activity selections (<guimenu>Days Since Last Check-in</guimenu>
, for example) are useful in finding and removing outdated system profiles.</para>
<para>Type the keyword, select the criterion to search by, use the radio buttons to specify whether you want to query all systems or only those in the <guimenu>System Set Manager</guimenu>
, and click the <guimenu>Search</guimenu>
 button.
To list all systems that do <emphasis>not</emphasis> match the criteria, select the <guimenu>Invert Result</guimenu>
 check box.</para>
<para>The results appear at the bottom of the page.
For details on how to use the resulting system list, refer to <xref linkend="ref.webui.systems.systems"/>.</para>
</sect1>
<sect1 id="ref.webui.systems.activ-keys"><title>Activation Keys</title><para>Users with the Activation Key Administrator role (including <phrase><phrase>SUSE</phrase> Manager</phrase> Administrators) can generate activation keys in the <phrase><phrase>SUSE</phrase> Manager</phrase> Web UI.
With such an activation key, register a <phrase>SUSE Linux Enterprise</phrase> or Red Hat Enterprise Linux system, entitle the system to a <phrase><phrase>SUSE</phrase> Manager</phrase> service level and subscribe the system to specific channels and system groups through the <command>rhnreg_ks</command> command line utility.</para>
<note>
<para>System-specific activation keys created through the <guimenu>Reactivation</guimenu> subtab of the <guimenu>System Details</guimenu> page are not part of this list because they are not reusable across systems.</para>
</note>
<para>For more information about Activation Keys, see <xref linkend="bp.key.managment"/>.</para>
<sect2 id="s3-sm-system-keys-manage"><title>Managing Activation Keys</title><para>From the <guimenu>Activation Key</guimenu> page organize activation keys for channel management.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems activation keys</phrase></textobject><imageobject>
<imagedata fileref="systems_activation_keys.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>To create an activation key:</para>
<orderedlist id="pro.ref.manager.activationkey" numeration="arabic">
<title>Procedure: Creating Activation Keys</title>
<listitem>
<para>Select <menuchoice><guimenu>Systems</guimenu> <guimenu>Activation Keys</guimenu></menuchoice> from the left bar.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Create Key</guimenu> link at the upper right corner.</para>
</listitem>
<listitem>
<para><guimenu>Description</guimenu> — Enter a <guimenu>Description</guimenu> to identify the generated activation key.</para>
</listitem>
<listitem>
<para><guimenu>Key</guimenu> — Either choose automatic generation by leaving this field blank or enter the key you want to generate in the <guimenu>Key</guimenu> field. This string of characters can then be used with <command>rhnreg_ks</command> to register client systems with <phrase><phrase>SUSE</phrase> Manager</phrase> . Refer to <xref linkend="s3-sm-system-keys-multiple"/> for details.</para>
<formalpara>
<title>Allowed Characters</title>
<para>WARNING:</para>
</formalpara>
</listitem>
</orderedlist>
<para>Do not insert commas or double quotes in the key.
All other characters are allowed, but <literal>&lt;&gt; (){}</literal> (this includes the space) will get removed automatically.
If the string is empty, a random one is generated.</para>
<para>Commas are problematic because they are used as separator when two or more activation keys are used at once.</para>
<para>+</para>
<orderedlist numeration="arabic">
<listitem>
<para><guimenu>Usage</guimenu> — The maximum number systems that can be registered with the activation key concurrently. Leave blank for unlimited use. Deleting a system profile reduces the usage count by one and registering a system profile with the key increases the usage count by one.</para>
</listitem>
<listitem>
<para><guimenu>Base Channels</guimenu> — The primary channel for the key. This can be either the <literal><phrase><phrase>SUSE</phrase> Manager</phrase> Default</literal> channel, a <phrase>SUSE</phrase> provided channel, or a custom base channel.</para>
<para>Selecting <literal><phrase><phrase>SUSE</phrase> Manager</phrase>
Default</literal> allows client systems to register with the <phrase>SUSE</phrase>
-provided default channel that corresponds with their installed version of <phrase>SUSE Linux Enterprise</phrase>
.
You can also associate the key with a custom base channel.
If a system using this key is not compatible with the selected channel, it will fall back to the <phrase><phrase>SUSE</phrase> Manager</phrase>
default channel.</para>
</listitem>
<listitem>
<para><guimenu>Add-on System Types</guimenu> — The supplemental system types for the key, e.  g. Virtualization Host. All systems will receive these system types with the key.</para>
</listitem>
<listitem>
<para><guimenu>Contact Method</guimenu> - Select how clients communicate with <phrase><phrase>SUSE</phrase> Manager</phrase> . <guimenu>Default</guimenu> (Pull) waits for the client to check in. With <guimenu>Push via SSH</guimenu> and <guimenu>Push via SSH tunnel</guimenu> the server contacts the client via SSH (with or without tunnel) and pushes updates and actions, etc.</para>
<para>For more information about contact methods, see <xref linkend="bp.systems.management"/>.</para>
</listitem>
<listitem>
<para><guimenu>Universal Default</guimenu> — Select whether this key should be considered the primary activation key for your organization.</para>
<warning>
<title>Changing the Default Activation Key</title>
<para>Only one universal default activation key can be defined per organization.
If a universal key already exists for this organization, you will unset the currently used universal key by activating the check box.</para>
</warning>
</listitem>
<listitem>
<para>Click <guimenu>Create Activation Key</guimenu> .</para>
</listitem>
</orderedlist>
<para>To create more activation keys, repeat the steps above.</para>
<para>After creating the unique key, it appears in the list of activation keys along with the number of times it has been used.
Only Activation Key Administrators can see this list.
At this point, you can configure the key further, for example, associate the key with child channels (for example, the Tools child channel), packages (for example, the <systemitem class="resource">rhncfg-actions</systemitem>
 package) and groups.
Systems registered with the key get automatically subscribed to them.</para>
<para>To change the settings of a key, click the key’s description in the list to display its <guimenu>Details</guimenu>
 page. Via additional tabs you can select child channels, packages, configuration channels, group membership and view activated systems.
Modify the appropriate tab then click the <guimenu>Update Activation Key</guimenu>
 button.
To disassociate channels and groups from a key, deselect them in the respective menus by <keycap>Ctrl</keycap>
-clicking their highlighted names.
To remove a key entirely, click the <guimenu>Delete Key</guimenu>
 link in the upper right corner of the <guimenu>Details</guimenu>
 page.
In the upper right corner find also the <guimenu>Clone Key</guimenu>
 link.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems activation key details</phrase></textobject><imageobject>
<imagedata fileref="systems_activation_key_details.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Any (client tools) package installation requires that the Client Tools channel is available and the <guimenu>Provisioning</guimenu>
 check box is selected.
The Client Tools channel should be selected in the <guimenu>Child Channels</guimenu>
 tab.</para>
<para>After creating the activation key, you can see in the <guimenu>Details</guimenu>
 tab a check box named <guimenu>Configuration File Deployment</guimenu>
.
If you select it, all needed packages are automatically added to the <guimenu>Packages</guimenu>
 list.
By default, the following packages are added: <systemitem class="resource">rhncfg</systemitem>
, <systemitem class="resource">rhncfg-client</systemitem>
, and <systemitem class="resource">rhncfg-actions</systemitem>
.</para>
<para>If you select <guimenu>Virtualization Host</guimenu>
 you automatically get the following package: <systemitem class="resource">rhn-virtualization-host</systemitem>
.</para>
<para>Adding the <systemitem class="resource">osad</systemitem>
 package makes sense to execute scheduled actions immediately after the schedule time.
When the activation key is created, you can add packages with selecting the key (<menuchoice><guimenu>Software</guimenu> <guimenu>Activation Keys</guimenu></menuchoice>
), then on the activation key details tab, go for the <guimenu>Packages</guimenu>
 subtab and add <systemitem class="resource">osad</systemitem>
.</para>
<para>To disable system activations with a key, uncheck the corresponding box in the <guimenu>Enabled</guimenu>
 column in the key list.
The key can be re-enabled by selecting the check box.
Click the <guimenu>Update Activation Keys</guimenu>
 button on the bottom right-hand corner of the page to apply your changes.</para>
</sect2>
<sect2 id="s3-sm-system-keys-multiple"><title>Using Multiple Activation Keys at Once</title><para>Multiple activation keys can be specified at the command line or in a single autoinstallation profile.
This allows you to aggregate the aspects of various keys without re-creating a specific key for every system that you want to register, simplifying the registration and autoinstallation processes while slowing the growth of your key list.
Separate keys with a comma at the command line with <command>rhnreg_ks</command> or in a Kickstart
 profile in the <guimenu>Activation Keys</guimenu>
 tab of the <guimenu>Autoinstallation Details</guimenu>
 page.</para>
<para>Registering with multiple activation keys requires some caution.
Conflicts between some values cause registration to fail.
Conflicts in the following values do not cause registration to fail, a combination of values is applied: software packages, software child channels, and configuration channels.
Conflicts in the remaining properties are resolved in the following manner:</para>
<itemizedlist>
<listitem>
<para>Base software channels: registration fails.</para>
</listitem>
<listitem>
<para>System types: registration fails.</para>
</listitem>
<listitem>
<para>Enable configuration flag: configuration management is set.</para>
</listitem>
</itemizedlist>
<para>Do not use system-specific activation keys along with other activation keys; registration fails in this event.</para>
<para>You are now ready to use multiple activation keys at once.</para>
</sect2>
</sect1>
<sect1 id="ref.webui.systems.profiles"><title>Stored Profiles</title><para><indexterm>
<primary>Web Interface</primary><secondary>stored profiles</secondary>
</indexterm>
<indexterm>
<primary>stored profiles</primary>
</indexterm></para>
<para><phrase><phrase>SUSE</phrase> Manager</phrase>
Provisioning customers can create package profiles via the <guimenu>System Details</guimenu>
 page.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems stored profiles</phrase></textobject><imageobject>
<imagedata fileref="systems_stored_profiles.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Under <menuchoice><guimenu>Software</guimenu> <guimenu>Packages</guimenu> <guimenu>Profiles</guimenu></menuchoice>
, click <guimenu>Create System Profile</guimenu>
.
Enter a <guimenu>Profile Name</guimenu>
 and <guimenu>Profile Description</guimenu>
, then click <guimenu>Create Profile</guimenu>
.
These profiles are displayed on the <guimenu>Stored Profiles</guimenu>
 page (left navigation bar), where they can be edited or deleted.</para>
<para>To edit a profile, click its name in the list, alter its name or description, and click the <guimenu>Update</guimenu>
 button.
To view software associated with the profile, click the <guimenu>Packages</guimenu>
 subtab.
To remove the profile entirely, click <guimenu>Delete Profile</guimenu>
 at the upper-right corner of the page.</para>
</sect1>
<sect1 id="ref.webui.systems.cust-info"><title>Custom System Info</title><para><phrase><phrase>SUSE</phrase> Manager</phrase>
customers may include completely customizable information about their systems.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems custom system info</phrase></textobject><imageobject>
<imagedata fileref="systems_custom_system_info.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Unlike with notes, the information here is more formal and can be searched.
for example, you may decide to specify an asset tag for each system.
To do so, select <guimenu>Custom System Info</guimenu>
 from the left navigation bar and create an <literal>asset</literal> key.</para>
<para>Click <guimenu>Create Key</guimenu>
 in the upper-right corner of the page.
Enter a suitable label and description, such as <literal>Asset</literal> and <literal>Precise location of each system</literal>, then click <guimenu>Create Key</guimenu>
.
The key will show up in the custom info keys list.</para>
<para>When the key exists, you may assign a value to it through the <guimenu>Custom Info</guimenu>
 tab of the <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="s5-sm-system-details-info"/> for instructions.</para>
</sect1>
</chapter>
<chapter id="ref.webui.systems.autoinst"><title>Autoinstallation</title><note>
<title>Autoinstallation Types: AutoYaST and Kickstart</title>
<para>In the following section, AutoYaST and AutoYaST features apply for <phrase>SUSE Linux Enterprise</phrase> client systems only.
For RHEL systems, use Kickstart and Kickstart features.</para>
</note>
<para>AutoYaST and Kickstart configuration files allow administrators to create an environment for automating otherwise time-consuming system installations, such as multiple servers or workstations. AutoYaST files have to be uploaded to be managed with <phrase><phrase>SUSE</phrase> Manager</phrase>.
Kickstart files can be created, modified, and managed within the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface.</para>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> also features the Cobbler installation server.
For more information on Cobbler, see <xref linkend="advanced.topics.cobbler"/>.</para>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> provides an interface for developing Kickstart and AutoYaST profiles that can be used to install <phrase>Red Hat Enterprise Linux</phrase> or <phrase>SUSE Linux Enterprise</phrase> on either new or already-registered systems automatically according to certain specifications.</para>
<figure>
<title>Autoinstallation Overview</title>
<mediaobject><textobject role="description"><phrase>systems kickstart overview</phrase></textobject><imageobject>
<imagedata fileref="systems_kickstart_overview.png" width="444%"/>
</imageobject></mediaobject>
</figure>
<para>This overview page displays the status of automated installations (Kickstart and AutoYaST) on your client systems: the types and number of profiles you have created and the progress of systems that are scheduled to be installed using Kickstart or AutoYaST.
In the upper right area is the <guimenu>Autoinstallation Actions</guimenu> section, which contains a series of links to management actions for your Kickstart or AutoYaST  profiles.
Before explaining the various automated installation options on this page, the next two sections provide an introduction to AutoYaST  (<xref linkend="ref.webui.systems.autoinst.ay_intro"/>) and Kickstart (<xref linkend="ref.webui.systems.autoinst.kick_intro"/>).</para>
<sect1 id="ref.webui.systems.autoinst.ay_intro"><title>Introduction to AutoYaST</title><para>Using AutoYaST, a system administrator can create a single file containing the answers to all the questions that would normally be asked during a typical installation of a <phrase>SUSE Linux Enterprise</phrase> system.</para>
<para>AutoYaST files can be kept on a single server system and read by individual computers during the installation.
This way the same AutoYaST file is used to install <phrase>SUSE Linux Enterprise</phrase> on multiple machines.</para>
<para>The <emphasis><phrase role="ref">SUSE Linux Enterprise Server AutoYaST Guide</phrase></emphasis> at (<ulink url="https://www.suse.com/documentation/sles-15/">https://www.suse.com/documentation/sles-15/</ulink>) will contain an in-depth discussion of <quote>Automated Installation</quote> using AutoYaST.</para>
<sect2 id="s4-system-ay-intro-explain"><title>AutoYaST Explained</title><para>When a machine is to receive a network-based AutoYaST installation, the following events must occur in this order:</para>
<orderedlist numeration="arabic">
<listitem>
<para>After being connected to the network and turned on, the machine’s PXE logic broadcasts its MAC address and requests to be discovered.</para>
</listitem>
<listitem>
<para>If no static IP address is used, the DHCP server recognizes the discovery request and offers network information needed for the new machine to boot. This includes an IP address, the default gateway to be used, the netmask of the network, the IP address of the TFTP or HTTP server holding the bootloader program, and the full path and file name to that program (relative to the server’s root).</para>
</listitem>
<listitem>
<para>The machine applies the networking information and initiates a session with the server to request the bootloader program.</para>
</listitem>
<listitem>
<para>The bootloader searches for its configuration file on the server from which it was loaded. This file dictates which Kernel and Kernel options, such as the initial RAM disk (initrd) image, should be executed on the booting machine. Assuming the bootloader program is SYSLINUX, this file is located in the <filename>pxelinux.cfg</filename> directory on the server and named the hexadecimal equivalent of the new machine’s IP address. For example, a bootloader configuration file for <phrase>SUSE Linux Enterprise Server</phrase> should contain:</para>
<screen>port 0
prompt 0
timeout 1
default autoyast
label autoyast
  kernel vmlinuz
  append autoyast=http://`my_susemanager_server`/`path`\
    install=http://`my_susemanager_server`/`repo_tree`</screen>
</listitem>
<listitem>
<para>The machine accepts and uncompresses the initrd and kernel, boots the kernel, fetches the instsys from the install server and initiates the AutoYaST installation with the options supplied in the bootloader configuration file, including the server containing the AutoYaST configuration file.</para>
</listitem>
<listitem>
<para>The new machine is installed based on the parameters established within the AutoYaST configuration file.</para>
</listitem>
</orderedlist>
</sect2>
<sect2 id="s4-system-ay-intro-prereq"><title>AutoYaST Prerequisites</title><para>Some preparation is required for your infrastructure to handle AutoYaST installations.
For instance, before creating AutoYaST profiles, you may consider:</para>
<itemizedlist>
<listitem>
<para>A DHCP server is not required for AutoYaST, but it can make things easier. If you are using static IP addresses, you should select static IP while developing your AutoYaST profile.</para>
</listitem>
<listitem>
<para>Host the AutoYaST distribution trees via HTTP, properly provided by <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
</listitem>
<listitem>
<para>If conducting a so-called bare-metal AutoYaST installation, provide the following settings:</para>
<itemizedlist>
<listitem>
<para>Configure DHCP to assign the required networking parameters and the bootloader program location.</para>
</listitem>
<listitem>
<para>In the bootloader configuration file, specify the kernel and appropriate kernel options to be used.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="s4-system-ay-iso"><title>Building Bootable AutoYaST ISOs</title><para>While you can schedule a registered system to be installed by AutoYaST with a new operating system and package profile, you can also automatically install a system that is not registered with <phrase><phrase>SUSE</phrase> Manager</phrase>, or does not yet have an operating system installed.
One common method of doing this is to create a bootable CD-ROM that is inserted into the target system.
When the system is rebooted or switched on, it boots from the CD-ROM, loads the AutoYaST configuration from your <phrase><phrase>SUSE</phrase> Manager</phrase>, and proceeds to install <phrase>SUSE Linux Enterprise Server</phrase> according to the AutoYaST profile you have created.</para>
<para>To use the CD-ROM, boot the system and type <literal>autoyast</literal> at the prompt (assuming you left the label for the AutoYaST  boot as <literal>autoyast</literal>). When you press <keycap>Enter</keycap>, the AutoYaST  installation begins.</para>
<para>For more information about image creation, refer to KIWI at <ulink url="http://doc.opensuse.org/projects/kiwi/doc/">http://doc.opensuse.org/projects/kiwi/doc/</ulink>.</para>
</sect2>
<sect2 id="s4-system-ay-pxe"><title>Integrating AutoYaST with PXE</title><para>In addition to CD-ROM-based installations, AutoYaST installation through a Pre-Boot Execution Environment (PXE) is supported.
This is less error-prone than CDs, enables AutoYaST installation from bare metal, and integrates with existing PXE/DHCP environments.</para>
<para>To use this method, make sure your systems have network interface cards (NIC) that support PXE, install and configure a PXE server, ensure DHCP is running, and place the installation repository on an HTTP server for deployment.
Finally upload the AutoYaST profile via the Web interface to the <phrase><phrase>SUSE</phrase> Manager</phrase> server.
Once the AutoYaST profile has been created, use the URL from the <guimenu>Autoinstallation Overview</guimenu> page, as for CD-ROM-based installations.</para>
<para>To obtain specific instructions for conducting PXE AutoYaST installation, refer to the <emphasis>Using PXE Boot</emphasis> section of the <emphasis><phrase role="ref">SUSE Linux Enterprise Deployment Guide</phrase></emphasis>.</para>
<para>Starting with <xref linkend="ref.webui.systems.autoinst.profiles"/>, AutoYaST options available from <menuchoice><guimenu>Systems</guimenu> <guimenu>Kickstart</guimenu></menuchoice> are described.</para>
</sect2>
</sect1>
<sect1 id="ref.webui.systems.autoinst.kick_intro"><title>Introduction to Kickstart</title><para>Using Kickstart, a system administrator can create a single file containing the answers to all the questions that would normally be asked during a typical installation of <phrase>Red Hat Enterprise Linux</phrase>.</para>
<para>Kickstart files can be kept on a single server and read by individual computers during the installation.
This method allows you to use one Kickstart file to install <phrase>Red Hat Enterprise Linux</phrase> on multiple machines.</para>
<para>The <emphasis><phrase role="ref">Red Hat Enterprise Linux System Administration Guide</phrase></emphasis> contains an in-depth description of Kickstart (<ulink url="https://access.redhat.com/documentation/en/red-hat-enterprise-linux/">https://access.redhat.com/documentation/en/red-hat-enterprise-linux/</ulink>).</para>
<sect2 id="s4-system-ks-intro-explain"><title>Kickstart Explained</title><para>When a machine is to receive a network-based Kickstart, the following events must occur in this order:</para>
<orderedlist numeration="arabic">
<listitem>
<para>After being connected to the network and turned on, the machine’s PXE logic broadcasts its MAC address and requests to be discovered.</para>
</listitem>
<listitem>
<para>If no static IP address is used, the DHCP server recognizes the discovery request and offers network information needed for the new machine to boot. This information includes an IP address, the default gateway to be used, the netmask of the network, the IP address of the TFTP or HTTP server holding the bootloader program, and the full path and file name of that program (relative to the server’s root).</para>
</listitem>
<listitem>
<para>The machine applies the networking information and initiates a session with the server to request the bootloader program.</para>
</listitem>
<listitem>
<para>The bootloader searches for its configuration file on the server from which it was loaded. This file dictates which kernel and kernel options, such as the initial RAM disk (initrd) image, should be executed on the booting machine. Assuming the bootloader program is SYSLINUX, this file is located in the <filename>pxelinux.cfg</filename> directory on the server and named the hexadecimal equivalent of the new machine’s IP address. For example, a bootloader configuration file for Red Hat Enterprise Linux AS 2.1 should contain:</para>
<screen>port 0
prompt 0
timeout 1
default My_Label
label My_Label
      kernel vmlinuz
      append ks=http://`my_susemanager_server`/`path`\
          initrd=initrd.img network apic</screen>
</listitem>
<listitem>
<para>The machine accepts and uncompresses the init image and kernel, boots the kernel, and initiates a Kickstart installation with the options supplied in the bootloader configuration file, including the server containing the Kickstart configuration file.</para>
</listitem>
<listitem>
<para>This Kickstart configuration file in turn directs the machine to the location of the installation files.</para>
</listitem>
<listitem>
<para>The new machine is built based on the parameters established within the Kickstart configuration file.</para>
</listitem>
</orderedlist>
</sect2>
<sect2 id="s4-system-ks-intro-prereq"><title>Kickstart Prerequisites</title><para>Some preparation is required for your infrastructure to handle Kickstarts.
For instance, before creating Kickstart profiles, you may consider:</para>
<itemizedlist>
<listitem>
<para>A DHCP server is not required for kickstarting, but it can make things easier. If you are using static IP addresses, select static IP while developing your Kickstart profile.</para>
</listitem>
<listitem>
<para>An FTP server can be used instead of hosting the Kickstart distribution trees via HTTP.</para>
</listitem>
<listitem>
<para>If conducting a bare metal Kickstart, you should configure DHCP to assign required networking parameters and the bootloader program location. Also, specify within the bootloader configuration file the kernel to be used and appropriate kernel options.</para>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="s4-system-ks-iso"><title>Building Bootable Kickstart ISOs</title><para>While you can schedule a registered system to be kickstarted to a new operating system and package profile, you can also Kickstart a system that is not registered with <phrase><phrase>SUSE</phrase> Manager</phrase> or does not yet have an operating system installed.
One common method of doing this is to create a bootable CD-ROM that is inserted into the target system.
When the system is rebooted, it boots from the CD-ROM, loads the Kickstart configuration from your <phrase><phrase>SUSE</phrase> Manager</phrase>, and proceeds to install <phrase>Red Hat Enterprise Linux</phrase> according to the Kickstart profile you have created.</para>
<para>To do this, copy the contents of <filename>/isolinux</filename> from the first CD-ROM of the target distribution.
Then edit the <filename>isolinux.cfg</filename> file to default to 'ks'. Change the 'ks' section to the following template:</para>
<screen>label ks
kernel vmlinuz
  append text ks=`url`initrd=initrd.img lang= devfs=nomount \
    ramdisk_size=16438`ksdevice`</screen>
<para>IP address-based Kickstart URLs will look like this:</para>
<screen>http://`my.manager.server`/kickstart/ks/mode/ip_range</screen>
<para>The Kickstart distribution defined via the IP range should match the distribution from which you are building, or errors will occur. <replaceable>ksdevice</replaceable> is optional, but looks like:</para>
<screen>ksdevice=eth0</screen>
<para>It is possible to change the distribution for a Kickstart profile within a family, such as Red Hat Enterprise Linux AS 4 to Red Hat Enterprise Linux ES 4, by specifying the new distribution label.
Note that you cannot move between versions (4 to 5) or between updates (U1 to U2).</para>
<para>Next, customize <filename>isolinux.cfg</filename> further for your needs by adding multiple Kickstart options, different boot messages, shorter timeout periods, etc.</para>
<para>Next, create the ISO as described in the <emphasis>Making an
    Installation Boot CD-ROM</emphasis> section of the <emphasis><phrase role="ref">Red Hat
    Enterprise Linux Installation Guide</phrase></emphasis>.
Alternatively, issue the command:</para>
<screen>mkisofs -o file.iso -b isolinux.bin -c boot.cat -no-emul-boot \
  -boot-load-size 4 -boot-info-table -R -J -v -T isolinux/</screen>
<para>Note that <filename>isolinux/</filename> is the relative path to the directory containing the modified isolinux files copied from the distribution CD, while <filename>file.iso</filename> is the output ISO file, which is placed into the current directory.</para>
<para>Burn the ISO to CD-ROM and insert the disc.
Boot the system and type "ks" at the prompt (assuming you left the label for the Kickstart boot as 'ks'). When you press <keycap>Enter</keycap>, Kickstart starts running.</para>
</sect2>
<sect2 id="s4-system-ks-pxe"><title>Integrating Kickstart with PXE</title><para>In addition to CD-ROM-based installs, Kickstart supports a Pre-Boot Execution Environment (PXE). This is less error-prone than CDs, enables kickstarting from bare metal, and integrates with existing PXE/DHCP environments.</para>
<para>To use this method, make sure your systems have network interface cards (NIC) that support PXE.
Install and configure a PXE server and ensure DHCP is running.
Then place the appropriate files on an HTTP server for deployment.
Once the Kickstart profile has been created, use the URL from the <guimenu>Kickstart Details</guimenu> page, as for CD-ROM-based installs.</para>
<para>To obtain specific instructions for conducting PXE Kickstarts, refer to the <emphasis>PXE Network Installations</emphasis> chapter of the <emphasis><phrase role="ref">Red Hat Enterprise Linux 4 System Administration    Guide</phrase></emphasis>.</para>
<note>
<para>Running the Network Booting Tool, as described in the Red Hat Enterprise Linux 4: System Administration Guide, select "HTTP" as the protocol and include the domain name of the <phrase><phrase>SUSE</phrase> Manager</phrase> in the Server field if you intend to use it to distribute the installation files.</para>
</note>
<para>The following sections describe the autoinstallation options available from the <menuchoice><guimenu>Systems</guimenu> <guimenu>Autoinstallation</guimenu></menuchoice> page.</para>
</sect2>
</sect1>
<sect1 id="ref.webui.systems.autoinst.profiles"><title>Autoinstallation &gt; Profiles (Kickstart and AutoYaST)</title><para>This page lists all profiles for your organization, shows whether these profiles are active, and specifies the distribution tree with which each profile is associated.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems kickstart overview</phrase></textobject><imageobject>
<imagedata fileref="systems_kickstart_overview.png" width="444%"/>
</imageobject></mediaobject>
</informalfigure>
<para>You can either create a Kickstart profile by clicking the <guimenu>Create Kickstart Profile</guimenu> link, upload or paste the contents of a new profile using the <guimenu>Upload Kickstart/Autoyast File</guimenu>, or edit an existing Kickstart profile by clicking the name of the profile.
Note, you can only update AutoYaST profiles using the upload button.
You can also view AutoYaST profiles in the edit box or change the virtualization type using the selection list.</para>
<sect2 id="ref.webui.systems.autoinst.profiles.create"><title>Create a Kickstart Profile</title><para>Click on the <guimenu>Create Kickstart Profile</guimenu> link from the <menuchoice><guimenu>Systems</guimenu> <guimenu>Autoinstallation</guimenu></menuchoice> page to start the wizard that populates the base values needed for a Kickstart profile.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>create profile wizard</phrase></textobject><imageobject>
<imagedata fileref="create_profile_wizard.png" width="444%"/>
</imageobject></mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<title>Procedure: Creating a Kickstart Profile</title>
<listitem>
<para>On the first line, enter a Kickstart profile label. This label cannot contain spaces, so use dashes (<literal>-</literal>) or underscores (<literal>\_</literal>) as separators.</para>
</listitem>
<listitem>
<para>Select a <guimenu>Base Channel</guimenu> for this profile, which consists of packages based on a specific architecture and Red Hat Enterprise Linux release.</para>
<note>
<title>Creating Base Channel</title>
<para>Base channels are only available if a suitable distribution is created first.
For creating distributions, see <xref linkend="ref.webui.systems.autoinst.distribution"/>.</para>
</note>
</listitem>
<listitem>
<para>Select an <guimenu>Kickstartable Tree</guimenu> for this profile. The <guimenu>Kickstartable Tree</guimenu> drop-down menu is only populated if one or more distributions have been created for the selected base channel (see <xref linkend="ref.webui.systems.autoinst.distribution"/>).</para>
</listitem>
<listitem>
<para>Instead of selecting a specific tree, you can also check the box <guimenu>Always use the newest Tree for this base channel.</guimenu> This setting lets <phrase><phrase>SUSE</phrase> Manager</phrase> automatically pick the latest tree that is associated with the specified base channels. If you add new trees later, <phrase><phrase>SUSE</phrase> Manager</phrase> will always keep the most recently created or modified.</para>
</listitem>
<listitem>
<para>Select the <guimenu>Virtualization Type</guimenu> from the drop-down menu.</para>
<note>
<para>If you do not intend to use the Kickstart profile to create virtual guest systems, you can leave the drop-down at the default <guimenu>None</guimenu> choice.</para>
</note>
</listitem>
<listitem>
<para>On the second page, select (or enter) the location of the Kickstart tree.</para>
</listitem>
<listitem>
<para>On the third page, select a root password for the system.</para>
</listitem>
</orderedlist>
<para>Depending on your base channel, your newly created Kickstart profile might be subscribed to a channel that is missing required packages.
For Kickstart to work properly, the following packages should be present in its base channel: <filename>pyOpenSSL</filename>, <filename>rhnlib</filename>, <filename>libxml2-python</filename>, and <filename>spacewalk-koan</filename> and associated packages.</para>
<para>To resolve this issue:</para>
<itemizedlist>
<listitem>
<para>Make sure that the Tools software channel for the Kickstart profile’s base channel is available to your organization. If it is not, you must request entitlements for the Tools software channel from the <phrase><phrase>SUSE</phrase> Manager</phrase> administrator.</para>
</listitem>
<listitem>
<para>Make sure that the Tools software channel for this Kickstart profile’s base channel is available to your <phrase><phrase>SUSE</phrase> Manager</phrase> as a child channel.</para>
</listitem>
<listitem>
<para>Make sure that <filename>rhn-kickstart</filename> and associated packages corresponding to this Kickstart are available in the Tools child channel.</para>
</listitem>
</itemizedlist>
<para>The final stage of the wizard presents the <menuchoice><guimenu>Autoinstallation   Details</guimenu> <guimenu>Details</guimenu></menuchoice> tab.
On this tab and the other subtabs, nearly every option for the new Kickstart profile can be customized.</para>
<para>Once created, you can access the Kickstart profile by downloading it from the <guimenu>Autoinstallation Details</guimenu> page by clicking the <guimenu>Autoinstallation File</guimenu> subtab and clicking the <guimenu>Download Autoinstallation File</guimenu> link.</para>
<para>If the Kickstart file is <emphasis>not</emphasis> managed by <phrase><phrase>SUSE</phrase> Manager</phrase>, you can access it via the following URL:</para>
<screen>http://`my.manager.server`/ks/dist/ks-rhel-`ARCH`-`VARIANT`-`VERSION`</screen>
<para>In the above example, <replaceable>ARCH</replaceable> is the architecture of the Kickstart file, <replaceable>VARIANT</replaceable> is either <literal>client</literal> or <literal>server</literal>, and <replaceable>VERSION</replaceable> is the release of <phrase>Red Hat Enterprise Linux</phrase> associated with the Kickstart file.</para>
<para>The following sections describe the options available on each subtab.</para>
<sect3 id="s4-system-ks-details-details"><title>Autoinstallation Details  &gt;  Details</title><informalfigure>
<mediaobject><textobject role="description"><phrase>details ks 3</phrase></textobject><imageobject>
<imagedata fileref="details-ks-3.png" width="444%"/>
</imageobject></mediaobject>
</informalfigure>
<para>On the <menuchoice><guimenu>Autoinstallation Details</guimenu> <guimenu>Details</guimenu></menuchoice> page, you have the following options:</para>
<itemizedlist>
<listitem>
<para>Change the profile <guimenu>Label</guimenu>.</para>
</listitem>
<listitem>
<para>Change the operating system by clicking menu:(Change)[].</para>
</listitem>
<listitem>
<para>Change the <guimenu>Virtualization Type</guimenu>.</para>
<note>
<para>Changing the <guimenu>Virtualization Type</guimenu> may require changes to the Kickstart profile bootloader and partition options, potentially overwriting user customizations.
Consult the <guimenu>Partitioning</guimenu> tab to verify any new or changed settings.</para>
</note>
</listitem>
<listitem>
<para>Change the amount of <guimenu>Virtual Memory</guimenu> (in Megabytes of RAM) allocated to virtual guests autoinstalled with this profile.</para>
</listitem>
<listitem>
<para>Change the number of <guimenu>Virtual CPUs</guimenu> for each virtual guest.</para>
</listitem>
<listitem>
<para>Change the <guimenu>Virtual Storage Path</guimenu> from the default in <filename>/var/lib/xen/</filename> .</para>
</listitem>
<listitem>
<para>Change the amount of <guimenu>Virtual Disk Space</guimenu> (in GB) allotted to each virtual guest.</para>
</listitem>
<listitem>
<para>Change the <guimenu>Virtual Bridge</guimenu> for networking of the virtual guest.</para>
</listitem>
<listitem>
<para>Deactivate the profile so that it cannot be used to schedule a Kickstart by removing the <guimenu>Active</guimenu> check mark.</para>
</listitem>
<listitem>
<para>Check whether to enable logging for custom <option>%post</option> scripts to the <filename>/root/ks-post.log</filename> file.</para>
</listitem>
<listitem>
<para>Decide whether to enable logging for custom <option>%pre</option> scripts to the <filename>/root/ks-pre.log</filename> file.</para>
</listitem>
<listitem>
<para>Choose whether to preserve the <filename>ks.cfg</filename> file and all <literal>%include</literal> fragments to the <filename>/root/</filename> directory of all systems autoinstalled with this profile.</para>
</listitem>
<listitem>
<para>Select whether this profile is the default for all of your organization’s Kickstarts by checking or unchecking the box.</para>
</listitem>
<listitem>
<para>Add any <guimenu>Kernel Options</guimenu> in the corresponding text box.</para>
</listitem>
<listitem>
<para>Add any <guimenu>Post Kernel Options</guimenu> in the corresponding text box.</para>
</listitem>
<listitem>
<para>Enter comments that are useful to you in distinguishing this profile from others.</para>
</listitem>
</itemizedlist>
</sect3>
<sect3 id="s4-system-ks-details-options"><title>Autoinstallation Details &gt;  Operating System</title><para>On this page, you can make the following changes to the operating system that the Kickstart profile installs:</para>
<variablelist>
<varlistentry>
<term>Change the base channel</term>
<listitem>
<para>Select from the available base channels. <phrase><phrase>SUSE</phrase> Manager</phrase> administrators see a list of all base channels that are currently synced to the <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Child Channels</term>
<listitem>
<para>Subscribe to available child channels of the base channel, such as the Tools channel.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Available Trees</term>
<listitem>
<para>Use the drop-down menu to choose from available trees associated with the base channel.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Always use the newest Tree for this base channel.</term>
<listitem>
<para>Instead of selecting a specific tree, you can also check the box <guimenu>Always use the newest Tree for this base channel.</guimenu>
This setting lets <phrase><phrase>SUSE</phrase> Manager</phrase> automatically pick the latest tree that is associated with the specified base channels.
If you add new trees later, <phrase><phrase>SUSE</phrase> Manager</phrase> will always keep the most recently created or modified.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Software URL (File Location)</term>
<listitem>
<para>The exact location from which the Kickstart tree is mounted.
This value is determined when the profile is created.
You can view it on this page but you cannot change it.</para>
</listitem>
</varlistentry>
</variablelist>
</sect3>
<sect3 id="s4-sm-system-kick-details-variables"><title>Autoinstallation Details &gt;  Variables</title><para>Autoinstallation variables can substitute values in Kickstart and AutoYaST profiles.
To define a variable, create a name-value pair (<replaceable>name/value</replaceable>) in the text box.</para>
<para>For example, if you want to autoinstall a system that joins the network of a specified organization (for example the Engineering department), you can create a profile variable to set the IP address and the gateway server address to a variable that any system using that profile will use.
Add the following line to the <guimenu>Variables</guimenu> text box.</para>
<screen>IPADDR=192.168.0.28
GATEWAY=192.168.0.1</screen>
<para>Now you can use the name of the variable in the profile instead of a specific value.
For example, the <option>network</option> part of a Kickstart file looks like the following:</para>
<screen>network --bootproto=static --device=eth0 --onboot=on --ip=$IPADDR \
  --gateway=$GATEWAY</screen>
<para>The <option>$IPADDR</option> will be resolved to <literal>192.168.0.28</literal>, and the <option>$GATEWAY</option> to <literal>192.168.0.1</literal></para>
<note>
<para>There is a hierarchy when creating and using variables in Kickstart files.
System Kickstart variables take precedence over <guimenu>Profile</guimenu> variables, which in turn take precedence over <guimenu>Distribution</guimenu> variables.
Understanding this hierarchy can alleviate confusion when using variables in Kickstarts.</para>
</note>
<para>Using variables are just one part of the larger Cobbler infrastructure for creating templates that can be shared between multiple profiles and systems.
For more information about Cobbler and templates, refer to <xref linkend="advanced.topics.cobbler"/>.</para>
</sect3>
<sect3 id="s4-sm-system-kick-details-advanced"><title>Autoinstallation Details &gt;  Advanced Options</title><para>From this page, you can toggle several installation options on and off by checking and unchecking the boxes to the left of the option.
For most installations, the default options are correct.
Refer to Red Hat Enterprise Linux documentation for details.</para>
</sect3>
<sect3 id="s4-sm-system-kick-details-defprofile"><title>Assigning Default Profiles to an Organization</title><para>You can specify an Organization Default Profile by clicking <menuchoice><guimenu>Autoinstallation</guimenu> <guimenu>Profiles</guimenu> <guimenu>profile    name</guimenu> <guimenu>Details</guimenu></menuchoice>, then checking the <guimenu>Organization Default Profile</guimenu> box and finally clicking <guimenu>Update</guimenu>.</para>
</sect3>
<sect3 id="s4-sm-system-kick-details-iprange"><title>Assigning IP Ranges to Profiles</title><para>You can associate an IP range to an autoinstallation profile by clicking on <menuchoice><guimenu>Autoinstallation</guimenu> <guimenu>Profiles</guimenu> <guimenu>profile name</guimenu> <guimenu>Bare Metal Autoinstallation</guimenu></menuchoice>, adding an IPv4 range and finally clicking <guimenu>Add IP Range</guimenu>.</para>
</sect3>
<sect3 id="s4-sm-system-kick-details-packages"><title>Autoinstallation Details &gt;  Bare Metal Autoinstallation</title><para>This subtab provides the information necessary to Kickstart systems that are not currently registered with <phrase><phrase>SUSE</phrase> Manager</phrase>.
Using the on-screen instructions, you may either autoinstall systems using boot media (CD-ROM) or by IP address.</para>
</sect3>
<sect3 id="s4-sm-system-kick-details-pre"><title>System Details+Details</title><para>Displays subtabs that are available from the <guimenu>System Details</guimenu> tab.</para>
<para>On the <menuchoice><guimenu>System Details</guimenu> <guimenu>Details</guimenu></menuchoice> page, you have the following options:</para>
<itemizedlist>
<listitem>
<para>Select between DHCP and static IP, depending on your network.</para>
</listitem>
<listitem>
<para>Choose the level of SELinux that is configured on kickstarted systems.</para>
</listitem>
<listitem>
<para>Enable configuration management or remote command execution on kickstarted systems.</para>
</listitem>
<listitem>
<para>Change the root password associated with this profile.</para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>details ks 4</phrase></textobject><imageobject>
<imagedata fileref="details-ks-4.png" width="444%"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
<sect3 id="s4-sm-system-kick-details-post"><title>System Details &gt;  Locale</title><para>Change the timezone for kickstarted systems.</para>
</sect3>
<sect3 id="s4-system-ks-sysd-partition"><title>System Details &gt;  Partitioning</title><para>From this subtab, indicate the partitions that you wish to create during installation.
For example:</para>
<screen>partition /boot --fstype=ext3 --size=200
partition swap --size=2000
partition pv.01 --size=1000 --grow
volgroup myvg pv.01 logvol / --vgname=myvg --name=rootvol --size=1000 --grow</screen>
</sect3>
<sect3 id="s4-system-ks-sysd-file-pres"><title>System Details &gt;  File Preservation</title><para>If you have previously created a file preservation list, include this list as part of the Kickstart.
This will protect the listed files from being over-written during the installation process.
Refer to <xref linkend="ref.webui.systems.autoinst.preserve"/> for information on how to create a file preservation list.</para>
</sect3>
<sect3 id="s4-system-ks-sysd-gpg-ssl"><title>System Details &gt;  GPG &amp; SSL</title><para>From this subtab, select the GPG keys and/or SSL certificates to be exported to the kickstarted system during the %post section of the Kickstart.
For <phrase><phrase>SUSE</phrase> Manager</phrase> customers, this list includes the SSL Certificate used during the installation of <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<note>
<para>Any GPG key you wish to export to the kickstarted system must be in ASCII rather than binary format.</para>
</note>
</sect3>
<sect3 id="s4-system-ks-sysd-trouble"><title>System Details &gt;  Troubleshooting</title><para>From this subtab, change information that may help with troubleshooting hardware problems:</para>
<variablelist>
<varlistentry>
<term>Bootloader</term>
<listitem>
<para>For some headless systems, it is better to select the non-graphic LILO bootloader.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Kernel Parameters</term>
<listitem>
<para>Enter kernel parameters here that may help to narrow down the source of hardware issues.</para>
</listitem>
</varlistentry>
</variablelist>
</sect3>
<sect3 id="s4-system-ks-soft-pkg-group"><title>Software &gt;  Package Groups</title><informalfigure>
<mediaobject><textobject role="description"><phrase>details ks 5</phrase></textobject><imageobject>
<imagedata fileref="details-ks-5.png" width="444%"/>
</imageobject></mediaobject>
</informalfigure>
<para>The image above shows subtabs that are available from the <guimenu>Software</guimenu> tab.</para>
<para>Enter the package groups, such as <literal role="systemitem">@office</literal> or <literal role="systemitem">@admin-tools</literal> you would like to install on the kickstarted system in the large text box.
If you would like to know what package groups are available, and what packages they contain, refer to the <filename>RedHat/base/</filename> file of your Kickstart tree.</para>
</sect3>
<sect3 id="s4-system-ks-soft-pkg-profile"><title>Software &gt;  Package Profiles</title><para>If you have previously created a Package Profile from one of your registered systems, you can use that profile as a template for the files to be installed on a kickstarted system.
Refer to <xref linkend="s4-sm-system-details-packages"/> for more information about package profiles.</para>
</sect3>
<sect3 id="s4-system-ks-act-keys"><title>Activation Keys</title><figure>
<title>Activation Keys</title>
<mediaobject><textobject role="description"><phrase>details ks 6</phrase></textobject><imageobject>
<imagedata fileref="details-ks-6.png" width="444%"/>
</imageobject></mediaobject>
</figure>
<para>The <guimenu>Activation Keys</guimenu> tab allows you to select Activation Keys to include as part of the Kickstart profile.
These keys, which must be created before the Kickstart profile, will be used when re-registering kickstarted systems.</para>
</sect3>
<sect3 id="s4-system-ks-scripts"><title>Scripts</title><figure>
<title>Scripts</title>
<mediaobject><textobject role="description"><phrase>details ks 7</phrase></textobject><imageobject>
<imagedata fileref="details-ks-7.png" width="444%"/>
</imageobject></mediaobject>
</figure>
<para>The <guimenu>Scripts</guimenu> tab is where %pre and %post scripts are created.
This page lists any scripts that have already been created for this Kickstart profile.
To create a Kickstart script, perform the following procedure:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Click the <guimenu>add new kickstart script</guimenu> link in the upper right corner.</para>
</listitem>
<listitem>
<para>Enter the path to the scripting language used to create the script, such as <literal>/usr/bin/perl</literal>.</para>
</listitem>
<listitem>
<para>Enter the full script in the large text box.</para>
</listitem>
<listitem>
<para>Indicate whether this script is to be executed in the %pre or %post section of the Kickstart process.</para>
</listitem>
<listitem>
<para>Indicate whether this script is to run outside of the chroot environment. Refer to the <emphasis><phrase role="ref">Post-installation Script</phrase></emphasis> section of the <emphasis><phrase role="ref">Red Hat Enterprise Linux System Administration Guide</phrase></emphasis> for further explanation of the <option>nochroot</option> option.</para>
</listitem>
</orderedlist>
<note>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> supports the inclusion of separate files within the Partition Details section of the Kickstart profile.
For instance, you may dynamically generate a partition file based on the machine type and number of disks at Kickstart time.
This file can be created via %pre script and placed on the system, such as <filename>/tmp/part-include</filename>.
Then you can call for that file by entering the following line in the Partition Details field of the <menuchoice><guimenu>System     Details</guimenu> <guimenu>Partitioning</guimenu></menuchoice> tab:</para>
<screen>%include /tmp/part-include</screen>
</note>
</sect3>
<sect3 id="s4-system-ks-ks-file"><title>Autoinstallation File</title><figure>
<title>Autoinstallation File</title>
<mediaobject><textobject role="description"><phrase>details ks 8</phrase></textobject><imageobject>
<imagedata fileref="details-ks-8.png" width="444%"/>
</imageobject></mediaobject>
</figure>
<para>The <guimenu>Autoinstallation File</guimenu> tab allows you to view or download the profile that has been generated from the options chosen in the previous tabs.</para>
</sect3>
</sect2>
<sect2 id="ref.webui.systems.autoinst.profiles.upload"><title>Upload Kickstart/AutoYaST File</title><para>Click the <guimenu>Upload Kickstart/Autoyast File</guimenu> link from the <menuchoice><guimenu>Systems</guimenu> <guimenu>Autoinstallation</guimenu></menuchoice> page to upload an externally prepared AutoYaST or Kickstart profile.</para>
<orderedlist numeration="arabic">
<listitem>
<para>In the first line, enter a profile <guimenu>Label</guimenu> for the automated installation. This label cannot contain spaces, so use dashes (-) or underscores (_) as separators.</para>
</listitem>
<listitem>
<para>Select an <guimenu>Autoinstallable Tree</guimenu> for this profile. The <guimenu>Autoinstallable Tree</guimenu> drop-down menu is only populated if one or more distributions have been created for the selected base channel (see <xref linkend="ref.webui.systems.autoinst.distribution"/>).</para>
</listitem>
<listitem>
<para>Instead of selecting a specific tree, you can also check the box menu:Always use the newest Tree for this base channel. This setting lets <phrase><phrase>SUSE</phrase> Manager</phrase> automatically pick the latest tree that is associated with the specified base channels. If you add new trees later, <phrase><phrase>SUSE</phrase> Manager</phrase> will always keep the most recently created or modified.</para>
</listitem>
<listitem>
<para>Select the <guimenu>Virtualization Type</guimenu> from the drop-down menu. For more information about virtualization, refer to <xref linkend="advanced.topics.virtualization"/>.</para>
<note>
<para>If you do not intend to use the autoinstall profile to create virtual guest systems, you can leave the drop-down set to the default choice <guimenu>KVM Virtualized Guest</guimenu>.</para>
</note>
</listitem>
<listitem>
<para>Finally, either provide the file contents with cut-and-paste or update the file from the local storage medium:</para>
<itemizedlist>
<listitem>
<para>Paste it into the <guimenu>File Contents</guimenu> box and click <guimenu>Create</guimenu> , or</para>
</listitem>
<listitem>
<para>enter the file name in the <guimenu>File to Upload</guimenu> field and click <guimenu>Upload File</guimenu>.</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<para>Once done, four subtabs are available:</para>
<itemizedlist>
<listitem>
<para><guimenu>Details</guimenu></para>
</listitem>
<listitem>
<para><guimenu>Bare Metal</guimenu></para>
</listitem>
<listitem>
<para><guimenu>Variables</guimenu></para>
</listitem>
<listitem>
<para><guimenu>Autoinstallable File</guimenu></para>
</listitem>
</itemizedlist>
</sect2>
</sect1>
<sect1 id="ref.webui.systems.autoinst.bare_metal"><title>Autoinstallation &gt;  Bare Metal</title><para>Lists the IP addresses that have been associated with the profiles created by your organization.
Click either the range or the profile name to access different tabs of the <guimenu>Autoinstallation Details</guimenu> page.</para>
</sect1>
<sect1 id="ref.webui.systems.autoinst.keys"><title>Autoinstallation &gt;  GPG and SSL Keys</title><para>Lists keys and certificates available for inclusion in Kickstart profiles and provides a means to create new ones.
This is especially important for customers of <phrase><phrase>SUSE</phrase> Manager</phrase> or the Proxy Server because systems kickstarted by them must have the server key imported into <phrase><phrase>SUSE</phrase> Manager</phrase> and associated with the relevant Kickstart profiles.
Import it by creating a new key here and then make the profile association in the <guimenu>GPG and SSL keys</guimenu> subtab of the <guimenu>Autoinstallation Details</guimenu> page.</para>
<para>To create a key or certificate, click the <guimenu>Create Stored Key/Cert</guimenu> link in the upper-right corner of the page.
Enter a description, select the type, upload the file, and click the <guimenu>Update Key</guimenu> button.
A unique description is required.</para>
<important>
<para>The GPG key you upload to <phrase><phrase>SUSE</phrase> Manager</phrase> must be in ASCII format.
Using a GPG key in binary format causes anaconda, and therefore the Kickstart process, to fail.</para>
</important>
</sect1>
<sect1 id="ref.webui.systems.autoinst.distribution"><title>Autoinstallation &gt;  Distributions</title><para>The <guimenu>Distributions</guimenu> page enables you to find and create custom installation trees that may be used for automated installations.</para>
<note>
<para>The <guimenu>Distributions</guimenu> page does not display distributions already provided.
They can be found within the <guimenu>Distribution</guimenu> drop-down menu of the <guimenu>Autoinstallation Details</guimenu> page.</para>
<para>Before creating a distribution, you must make an installation data available, as described in the <emphasis><phrase role="ref">SUSE Linux Enterprise Deployment Guide</phrase></emphasis> (<ulink url="https://www.suse.com/documentation/sles-12/singlehtml/book_sle_deployment/book_sle_deployment.html">https://www.suse.com/documentation/sles-12/singlehtml/book_sle_deployment/book_sle_deployment.html</ulink>) or, respectively, the <emphasis>Kickstart Installations</emphasis> chapter of the <emphasis><phrase role="ref">Red Hat Enterprise Linux System    Administration Guide</phrase></emphasis>.
This tree must be located in a local directory on the <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
</note>
<orderedlist numeration="arabic">
<title>Procedure: Creating a Distribution for Autoinstallation</title>
<listitem>
<para>To create a distribution, on the <guimenu>Autoinstallable Distributions</guimenu> page click <guimenu>Create Distribution</guimenu> in the upper right corner.</para>
</listitem>
<listitem>
<para>On the <guimenu>Create Autoinstallable Distribution</guimenu> page, provide the following data:</para>
<itemizedlist>
<listitem>
<para>Enter a label (without spaces) in the <guimenu>Distribution Label</guimenu> field, such as <literal>my-orgs-sles-12-sp2</literal> or <literal>my-orgs-rhel-as-7</literal>.</para>
</listitem>
<listitem>
<para>In the <guimenu>Tree Path</guimenu> field, paste the path to the base of the installation tree.</para>
</listitem>
<listitem>
<para>Select the matching distribution from the <guimenu>Base Channel</guimenu> and <guimenu>Installer Generation</guimenu> drop-down menus, such as <literal>SUSE Linux</literal> for <phrase>SUSE Linux Enterprise</phrase>, or <literal>Red Hat Enterprise Linux 7</literal> for <phrase>Red Hat Enterprise Linux</phrase> 7 client systems.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>When finished, click the <guimenu>Create Autoinstallable Distribution</guimenu> button.</para>
</listitem>
</orderedlist>
<sect2 id="s4-sm-system-kick-dist-variables"><title>Autoinstallation &gt;  Distributions  &gt;  Variables</title><para>Autoinstallation variables can be used to substitute values into Kickstart and AutoYaST profiles.
To define a variable, create a name-value pair (<replaceable>name/value</replaceable>) in the text box.</para>
<para>For example, if you want to autoinstall a system that joins the network of a specified organization (for example the Engineering department) you can create a profile variable to set the IP address and the gateway server address to a variable that any system using that profile will use.
Add the following line to the <guimenu>Variables</guimenu> text box.</para>
<screen>IPADDR=192.168.0.28
GATEWAY=192.168.0.1</screen>
<para>To use the distribution variable, use the name of the variable in the profile to substitute the value.
For example, the <option>network</option> part of a Kickstart file looks like the following:</para>
<screen>network --bootproto=static --device=eth0 --onboot=on --ip=$IPADDR \
  --gateway=$GATEWAY</screen>
<para>The <option>$IPADDR</option> will be resolved to <literal>192.168.0.28</literal>, and the <option>$GATEWAY</option> to <literal>192.168.0.1</literal>.</para>
<note>
<para>There is a hierarchy when creating and using variables in Kickstart files.
System Kickstart variables take precedence over Profile variables, which in turn take precedence over Distribution variables.
Understanding this hierarchy can alleviate confusion when using variables in Kickstarts.</para>
</note>
<para>In AutoYaST profiles you can use such variables as well.</para>
<para>Using variables are just one part of the larger Cobbler infrastructure for creating templates that can be shared between multiple profiles and systems.
For more information about Cobbler and templates, refer to <xref linkend="advanced.topics.cobbler"/>.</para>
</sect2>
</sect1>
<sect1 id="ref.webui.systems.autoinst.preserve"><title>Autoinstallation &gt;  File Preservation</title><para>Collects lists of files to be protected and re-deployed on systems during Kickstart.
For instance, if you have many custom configuration files located on a system to be kickstarted, enter them here as a list and associate that list with the Kickstart profile to be used.</para>
<para>To use this feature, click the <guimenu>Create File Preservation List</guimenu> link at the top.
Enter a suitable label and all files and directories to be preserved.
Enter absolute paths to all files and directories.
Then click <guimenu>Create List</guimenu>.</para>
<important>
<para>Although file preservation is useful, it does have limitations.
Each list is limited to a total size of 1 MB.
Special devices like <filename>/dev/hda1</filename> and <filename>/dev/sda1</filename> are not supported.
Only file and directory names may be entered.
No regular expression wildcards can be used.</para>
</important>
<para>When finished, you may include the file preservation list in the Kickstart profile to be used on systems containing those files.
Refer to <xref linkend="ref.webui.systems.autoinst.profiles.create"/> for precise steps.</para>
</sect1>
<sect1 id="ref.webui.systems.autoinst.snippet"><title>Autoinstallation &gt;  Autoinstallation Snippets</title><para>Use snippets to store common blocks of code that can be shared across multiple Kickstart or AutoYaST profiles in <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<sect2 id="s4-sm-system-kick-snippet-default"><title>Autoinstallation  &gt;  Autoinstallation Snippets  &gt;  Default Snippets</title><para>Default snippets coming with <phrase><phrase>SUSE</phrase> Manager</phrase> are not editable.
You can use a snippet, if you add the <guimenu>Snippet Macro</guimenu> statement such as <literal>$SNIPPET('spacewalk/sles_register_script')</literal> to your autoinstallation profile.
This is an AutoYaST profile example:</para>
<screen>&lt;init-scripts config:type="list"&gt;
  $SNIPPET('spacewalk/sles_register_script')
&lt;/init-scripts&gt;</screen>
<para>When you create a snippet with the <guimenu>Create Snippet</guimenu> link, all profiles including that snippet will be updated accordingly.</para>
</sect2>
<sect2 id="s4-sm-system-kick-snippet-custom"><title>Autoinstallation &gt;  Autoinstallation Snippets  &gt;  Custom Snippets</title><para>This is the tab with custom snippets.
Click a name of a snippet to view, edit, or delete it.</para>
</sect2>
<sect2 id="s4-sm-system-kick-snippet-all"><title>Autoinstallation &gt;  Autoinstallation Snippets  &gt;  All Snippets</title><para>The <literal role="guimenu">All Snippets</literal> tab lists default and custom snippets together.</para>
</sect2>
</sect1>
<sect1 id="ref.webui.systems.virt-host-managers"><title>Virtual Host Managers</title><para>Third party hypervisors and hypervisor managers such as VMWare vCenter are called <quote>Virtual Host Managers</quote>
 (VHM) within <phrase><phrase>SUSE</phrase> Manager</phrase>
.
These managers can manage one or multiple virtual hosts, which in turn may contain virtual guests. <phrase><phrase>SUSE</phrase> Manager</phrase>
 ships with a tool called <command>virtual-host-gatherer</command> that can connect to VHMs using their API, and request information about virtual hosts.
This tool is automatically invoked via Taskomatic nightly, therefore you need to configure your VHMs via XMLRPC APIs. <command>virtual-host-gatherer</command> maintains the concept of optional modules, where each module enables a specific Virtual Host Manager.</para>
<para>Proceed to <menuchoice><guimenu>Systems</guimenu> <guimenu>Virtual Host
   Managers</guimenu></menuchoice>
 page in the Web UI
 to begin working with a Virtual Host Manager.
In the upper right you can click <guimenu>Create</guimenu>
 and select either <guimenu>VMware-based</guimenu>
 or <guimenu>File-based</guimenu>
.</para>
<sect2 id="ref.webui.systems.virt-host-managers.vmware"><title>VMware-Based</title><para>After selecting <menuchoice><guimenu>Create</guimenu> <guimenu>VMware-based</guimenu></menuchoice>
 enter the location of your VMware-based virtual host.
Enter a <guimenu>Label</guimenu>
, <guimenu>Hostname</guimenu>
, <guimenu>Port</guimenu>
, <guimenu>Username</guimenu>
 and <guimenu>Password</guimenu>
.
Finally click the <guimenu>Add Virtual Host Manager</guimenu>
 button.
For detailed information on working with a VMware-based Virtual Host Manager, see <xref linkend="advanced.topics.adding.vmware.esxi.host"/>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems virtual host managers vmware</phrase></textobject><imageobject>
<imagedata fileref="systems_virtual_host_managers_vmware.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.systems.virt-host-managers.file"><title>File-Based</title><para>In a VMWare environment where direct connection to the SUSE Manager Server is not possible, a JSON file can be exported from the ESXi or vSphere host and later imported into SUSE Manager via this option.</para>
<para>After selecting <menuchoice><guimenu>Create</guimenu> <guimenu>File-Based</guimenu></menuchoice>
 enter a label and URL leading to the location of this file.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems virtual host managers file</phrase></textobject><imageobject>
<imagedata fileref="systems_virtual_host_managers_file.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<note>
<title>VMWare vCenter Installations without Direct Access</title>
<para>The file-based is not meant to be used with manually crafted files.
It only meant to be used with the output of <command>virtual-host-gatherer</command> against some other module.
File-based is suitable for VMWare vCenter installations for which no direct API access is possible from the SUSE Manager Server.</para>
<para>The solution is to run <command>virtual-host-gatherer</command> from somewhere else in the network and save the produced JSON data for further processing.</para>
</note>
<para>The following JSON data is an example of the exported information in the file:</para>
<screen>{
    "examplevhost": {
        "10.11.12.13": {
            "cpuArch": "x86_64",
            "cpuDescription": "AMD Opteron(tm) Processor 4386",
            "cpuMhz": 3092.212727,
            "cpuVendor": "amd",
            "hostIdentifier": "'vim.HostSystem:host-182'",
            "name": "11.11.12.13",
            "os": "VMware ESXi",
            "osVersion": "5.5.0",
            "ramMb": 65512,
            "totalCpuCores": 16,
            "totalCpuSockets": 2,
            "totalCpuThreads": 16,
            "type": "vmware",
            "vms": {
                "vCenter": "564d6d90-459c-2256-8f39-3cb2bd24b7b0"
            }
        },
        "10.11.12.14": {
            "cpuArch": "x86_64",
            "cpuDescription": "AMD Opteron(tm) Processor 4386",
            "cpuMhz": 3092.212639,
            "cpuVendor": "amd",
            "hostIdentifier": "'vim.HostSystem:host-183'",
            "name": "10.11.12.14",
            "os": "VMware ESXi",
            "osVersion": "5.5.0",
            "ramMb": 65512,
            "totalCpuCores": 16,
            "totalCpuSockets": 2,
            "totalCpuThreads": 16,
            "type": "vmware",
            "vms": {
                "49737e0a-c9e6-4ceb-aef8-6a9452f67cb5": "4230c60f-3f98-2a65-f7c3-600b26b79c22",
                "5a2e4e63-a957-426b-bfa8-4169302e4fdb": "42307b15-1618-0595-01f2-427ffcddd88e",
                "NSX-gateway": "4230d43e-aafe-38ba-5a9e-3cb67c03a16a",
                "NSX-l3gateway": "4230b00f-0b21-0e9d-dfde-6c7b06909d5f",
                "NSX-service": "4230e924-b714-198b-348b-25de01482fd9"
            }
        }
    }
}</screen>
<para>For more information, see the man page on your <phrase><phrase>SUSE</phrase> Manager</phrase>
server for <command>virtual-host-gatherer</command>:</para>
<screen>{prompt.user}man virtual-host-gatherer</screen>
<para>The <literal>README</literal> file coming with the package provides background information about the <literal>type</literal> of a hypervisor, etc.:</para>
<screen>/usr/share/doc/packages/virtual-host-gatherer/README.md</screen>
</sect2>
<sect2 id="_configuring_virtual_host_managers_via_xmlrpc_api"><title>Configuring Virtual Host Managers via XMLRPC API</title><para>The following APIs allow you to get a list of available <command>virtual-host-manager</command> modules and the parameters they require:</para>
<itemizedlist>
<listitem>
<para/>
<screen>virtualhostmanager.listAvailableVirtualHostGathererModules(session)</screen>
</listitem>
<listitem>
<para/>
<screen>virtualhostmanager.getModuleParameters(session, moduleName)</screen>
</listitem>
</itemizedlist>
<para>The following APIs allow you to create and delete VHMs.
The module parameter map must match the map returned by <literal>virtualhostmanager.getModuleParameters</literal> to work correctly:</para>
<itemizedlist>
<listitem>
<para/>
<screen>virtualhostmanager.create(session, label, moduleName, parameters)</screen>
</listitem>
<listitem>
<para/>
<screen>virtualhostmanager.delete(session, label)</screen>
</listitem>
</itemizedlist>
<para>The following APIs return information about configured VHMs:</para>
<itemizedlist>
<listitem>
<para/>
<screen>virtualhostmanager.listVirtualHostManagers(session)</screen>
</listitem>
<listitem>
<para/>
<screen>virtualhostmanager.getDetail(session, label)</screen>
</listitem>
</itemizedlist>
</sect2>
</sect1>
</chapter>
<chapter id="ref.webui.salt"><title>Salt</title><para>Open <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Salt</guimenu></menuchoice> from the left navigation sidebar.
<menuchoice><guimenu>Main Menu</guimenu> <guimenu>Salt</guimenu> <guimenu>Keys</guimenu></menuchoice> provides an overview of your Salt minions (clients).
Use <guimenu>Remote Commands</guimenu> to execute remote commands on your Salt minions.
You can also define a <guimenu>State Catalog</guimenu> for creating a collection of salt system states.</para>
<sect1 id="ref.webui.salt.onboarding"><title>Keys</title><para>The <guimenu>Keys</guimenu>
 page provides a summary of your minions, including their names, fingerprints, state, and actions you may perform on them.</para>
<para>Once you have pointed a minion to the <phrase><phrase>SUSE</phrase> Manager</phrase>
server as its master within <replaceable>/etc/salt/minion</replaceable>, you can choose to accept or reject a minion from this page.
Either click the check mark or cross in the actions column.</para>
<figure>
<title>Keys Overview</title>
<mediaobject><textobject role="description"><phrase>onboarding</phrase></textobject><imageobject>
<imagedata fileref="onboarding.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<para>For more information about key handling and onboarding, see <xref linkend="preparing.and.registering.clients.salt"/>.</para>
</sect1>
<sect1 id="ref.webui.salt.remote.commands"><title>Remote Commands</title><para>The remote commands page allows you to execute and run commands from the <phrase><phrase>SUSE</phrase> Manager</phrase>
server on several minions.</para>
<figure>
<title>Remote Commands</title>
<mediaobject><textobject role="description"><phrase>remote commands</phrase></textobject><imageobject>
<imagedata fileref="remote_commands.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<warning>
<title>Remote Commands Security</title>
<para>All commands run from the <guimenu>Remote Commands</guimenu>
 page are executed as <systemitem class="username">root</systemitem>
 on minions.
As you may use wildcards to run commands across any number of systems you must always take extra precaution as this may have drastic consequences for your systems.</para>
</warning>
<para>On the <guimenu>Remote Commands</guimenu>
 page located under <menuchoice><guimenu>Salt</guimenu> <guimenu>Remote Commands</guimenu></menuchoice>
 you will see two text boxes.
The first box is for entering commands.
The second box is for targeting minions by name, group or by using wildcards.</para>
<para>Input a command you want to execute, add a target minion, group or wildcard you want to execute the command on.
Select the <guimenu>Find Targets</guimenu>
 button to verify which machines will be targeted.
Select the <guimenu>Run Command</guimenu>
 button to execute a command on selected systems.</para>
</sect1>
<sect1 id="ref.webui.salt.formula_catalog"><title>Formula Catalog</title><para>The <guimenu>Formula Catalog</guimenu>
 feature is a technology preview.</para>
</sect1>
</chapter>
<chapter id="ref.webui.images"><title>Images</title><sect1 id="ref.webui.images.images"><title>Images</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> enables system administrators to build system images, virtual images, containers and similar with the help of profiles and create image stores.</para>
<para>For background information, see <xref linkend="at.images"/>.</para>
<para>If you click menu::Main Menu[Images &gt; Images] on the left navigation menu, an overview listing of your images appears.
Several columns provide information about each image:</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>images list images</phrase></textobject><imageobject>
<imagedata fileref="images_list_images.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para>Select box: To select images, mark the appropriate check boxes. Selected images can be deleted simultaneously via the <guimenu>Delete</guimenu> button that appears in the upper right corner while selecting images.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Name</literal>:</para>
</listitem>
<listitem>
<para><literal role="guimenu">Version</literal> and <literal role="guimenu">Revision</literal>:</para>
</listitem>
<listitem>
<para><literal role="guimenu">Updates</literal>: Shows which type of update action is applicable to the image or confirms that the image is up-to-date. For more information about these icons, see <xref linkend="ref.webui.systems.systems"/>.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Patches</literal> and <literal role="guimenu">Packages</literal>:</para>
</listitem>
<listitem>
<para><literal role="guimenu">Build</literal>:</para>
</listitem>
<listitem>
<para><literal role="guimenu">Last Modified</literal>: Time when the images was modified last.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Actions</literal>: <guimenu>Details</guimenu> and <guimenu>Delete</guimenu> button. <guimenu>Details</guimenu> opens a the Image Details page.</para>
</listitem>
</itemizedlist>
<para>In the upper right corner offers several action buttons: The <guimenu>Delete</guimenu>
 button appears when one or more images are selected. <guimenu>Import</guimenu>
 and <guimenu>Refresh</guimenu>
 are default buttons. <guimenu>Import</guimenu>
 allows to import pre-built images; for more information, see <xref linkend="at.images.docker.importing"/>.</para>
<sect2 id="_image_details"><title>Image Details</title><para>The Image Details page contains the <guimenu>Overview</guimenu>
, <guimenu>Patches</guimenu>
, and <guimenu>Packages</guimenu>
 tabs.</para>
</sect2>
</sect1>
<sect1 id="ref.webui.images.build"><title>Build</title><para>If you click menu::Main Menu[Images &gt; Build] on the left navigation menu, the dialog for building images appears:</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>images image build</phrase></textobject><imageobject>
<imagedata fileref="images_image_build.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para><guimenu>Version</guimenu> : The version string that you would like to see in the Images listing, applicable only to containers.</para>
</listitem>
<listitem>
<para><guimenu>Build Profile</guimenu> : Select an Image Profile created with the <menuchoice><guimenu>Images</guimenu> <guimenu>Profiles</guimenu></menuchoice> page.</para>
</listitem>
<listitem>
<para><guimenu>Build Host</guimenu> : Select a Build Host.</para>
</listitem>
<listitem>
<para><guimenu>Earliest</guimenu> : Schedule build time.</para>
</listitem>
</itemizedlist>
<para>Confirm with <guimenu>Build</guimenu>
 to start image building.
When the image is done, find it listed in the <guimenu>Images</guimenu>
 overview described in <xref linkend="ref.webui.images.images"/>.</para>
</sect1>
<sect1 id="ref.webui.images.profiles"><title>Profiles</title><para>If you click <menuchoice><guimenu>Images</guimenu> <guimenu>Profiles</guimenu></menuchoice>
 on the left navigation menu, a listing of your <guimenu>Image Profiles</guimenu>
 appears.
Several columns provide information about each image:</para>
<itemizedlist>
<listitem>
<para>Select box: To select image profiles, mark the appropriate check boxes. Selected profiles can be deleted simultaneously via the <guimenu>Delete</guimenu> button that appears in the upper right corner while selecting profiles.</para>
</listitem>
<listitem>
<para><guimenu>Label</guimenu> : The name of the profile.</para>
</listitem>
<listitem>
<para><guimenu>Build Type</guimenu> : Dockerfile is available. Use Dockerfile to build containers.</para>
</listitem>
<listitem>
<para><guimenu>Actions</guimenu> : <guimenu>Build</guimenu> , <guimenu>Edit</guimenu> and <guimenu>Delete</guimenu> button. <guimenu>Build</guimenu> creates the image according to this profile. <guimenu>Edit</guimenu> opens a the Profile Details page for editing.</para>
</listitem>
</itemizedlist>
<para><guimenu>Refresh</guimenu>
 and <guimenu>Create</guimenu>
 are default buttons in the upper right corner. <guimenu>Create</guimenu>
 opens the <guimenu>Create Image Profile</guimenu>
 dialog:</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>images image create profile</phrase></textobject><imageobject>
<imagedata fileref="images_image_create_profile.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect1>
<sect1 id="ref.webui.images.stores"><title>Stores</title><para>If you click <menuchoice><guimenu>Images</guimenu> <guimenu>Stores</guimenu></menuchoice>
 on the left navigation menu, a listing of your <guimenu>Image Stores</guimenu>
 appears.
Several columns provide information about each store:</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>images image stores</phrase></textobject><imageobject>
<imagedata fileref="images_image_stores.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para>Select box: To select image stores, mark the appropriate check boxes. Selected stores can be deleted simultaneously via the <guimenu>Delete</guimenu> button that appears in the upper right corner while selecting stores.</para>
</listitem>
<listitem>
<para><guimenu>Label</guimenu> : Name of the store.</para>
</listitem>
<listitem>
<para><guimenu>Type</guimenu> : Currently, only Registry is available.</para>
</listitem>
<listitem>
<para><guimenu>Actions</guimenu> : <guimenu>Edit</guimenu> and <guimenu>Delete</guimenu> button. <guimenu>Edit</guimenu> opens a the Store Details page for editing.</para>
</listitem>
</itemizedlist>
<para>In the upper right corner offers several action buttons: The <guimenu>Delete</guimenu>
 button appears when one or more stores are selected. <guimenu>Refresh</guimenu>
 and <guimenu>Create</guimenu>
 are default buttons. <guimenu>Create</guimenu>
 opens the <guimenu>Create Image Store</guimenu>
 dialog:</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>imeages image stores create</phrase></textobject><imageobject>
<imagedata fileref="imeages_image_stores_create.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect1>
</chapter>
<chapter id="ref.webui.patches"><title>Patches</title><para>The <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Patches</guimenu></menuchoice> menu from the left bar helps tracking the availability and application of patches to your managed systems.</para>
<para>The <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Patches</guimenu> <guimenu>Patches</guimenu></menuchoice> page displays all or relevant patches for at least one of your managed systems that have not been applied yet.</para>
<note>
<title>Receiving Patches for Your System</title>
<para>To receive an e-mail when patches are issued for your system, go to <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Home</guimenu> <guimenu>Your Preferences</guimenu></menuchoice> and select <literal role="guimenu">Receive email notifications</literal>.</para>
</note>
<para><phrase>SUSE</phrase> distinguishes three types of patches: security updates, bug fix updates, and enhancement updates.
Each patch consists of a summary of the problem and solution, including the RPM packages fixing the problem.</para>
<para>Icons are used to identify the three types:</para>
<itemizedlist>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-shield.svg"/>
</imageobject>
<textobject role="description"><phrase>Security Alert</phrase></textobject>
</inlinemediaobject> — Security Updates available, <emphasis>strongly</emphasis> recommended</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="fa-bug.svg"/>
</imageobject>
<textobject role="description"><phrase>Bug Fix Alert</phrase></textobject>
</inlinemediaobject> — Bug Fix Updates available, recommended</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="spacewalk-icon-enhancement.svg"/>
</imageobject>
<textobject role="description"><phrase>Enhancement Alert</phrase></textobject>
</inlinemediaobject> — Enhancement Updates available, optional</para>
</listitem>
</itemizedlist>
<para>A summary of each patch is provided in list form displaying its type, advisory ID, synopsis (with the severity as a textual prefix in case of security updates, such as <quote>critical</quote>, <quote>important</quote>, <quote>moderate</quote>, or <quote>low</quote>), number of affected systems in your network, and date updated.</para>
<para>In addition, you may view patches by product line at the following location: <ulink url="http://download.suse.com/patch/psdb/">http://download.suse.com/patch/psdb/</ulink>.
For more information on security updates, see <ulink url="https://www.suse.com/support/security/">https://www.suse.com/support/security/</ulink>.</para>
<sect1 id="ref.webui.patches.relevant"><title>Relevant</title><para>The <literal role="guimenu">Relevant</literal> patches page displays a customized list of patches applying to your registered systems.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>patches relevant patches</phrase></textobject><imageobject>
<imagedata fileref="patches_relevant_patches.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Clicking an <literal role="guimenu">Advisory</literal> ID of a patch takes you to the <literal role="guimenu">Details</literal> page of the <literal role="guimenu">Patch Details</literal> page.
Clicking the number of associated systems takes you to the <literal role="guimenu">Affected Systems</literal> page of the <literal role="guimenu">Patch Details</literal> page.
Refer to <xref linkend="s3-sm-errata-details"/> for more information.</para>
</sect1>
<sect1 id="ref.webui.patches.all"><title>All</title><para>The <literal role="guimenu">All</literal> patches page displays a list of all patches released by <phrase>SUSE</phrase>, irrelevant of whether they apply to your registered systems or not.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>patches all patches</phrase></textobject><imageobject>
<imagedata fileref="patches_all_patches.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Like in the <literal role="guimenu">Relevant Patches</literal> page, clicking either <literal role="guimenu">Advisory</literal> or the number of systems affected takes you to related tabs of the <literal role="guimenu">Patch Details</literal> page.
Refer to <xref linkend="s3-sm-errata-details"/> for more information.</para>
<sect2 id="s3-sm-apply-errata"><title>Applying Patches</title><para>Patches include a list of updated packages.
To apply patches to a system, the system must be entitled.</para>
<para>Apply all applicable patches to a system by clicking <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>Systems</guimenu></menuchoice>.
Click the name of an entitled system.
Then open the <menuchoice><guimenu>System Details</guimenu> <guimenu>Software</guimenu> <guimenu>Patches</guimenu></menuchoice> subtab.
When the relevant patch list appears, click <guimenu>Select All</guimenu> then <guimenu>Apply Patches</guimenu>.
Only patches not scheduled, scheduled but failed, or canceled patches are listed.
Pending updates are excluded.</para>
<para>In addition, users with appropriate roles can apply patches using two other methods:</para>
<itemizedlist>
<listitem>
<para>To apply a specific patch to one or more systems, locate it in the patch list and click the number of systems affected, which takes you to the <literal role="guimenu">Affected Systems</literal> page of the <literal role="guimenu">Patch Details</literal> page. Select the individual systems to be updated and click the <guimenu>Apply Patches</guimenu> button. Double-check the systems to be updated on the confirmation page, then click the <guimenu>Confirm</guimenu> button.</para>
</listitem>
<listitem>
<para>To apply more than one patch to one or more systems, select the systems from the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>Systems</guimenu></menuchoice> list. Click the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>System Set Manager</guimenu> <guimenu>Overview</guimenu></menuchoice>, then click the <literal role="guimenu">Systems</literal> tab. After ensuring the appropriate systems are selected, click the <literal role="guimenu">Patches</literal> tab, select the patches to apply, and click the <guimenu>Apply Patches</guimenu> button. Schedule a date and time for the patch to be applied. Default is the current date. Click the <guimenu>Confirm</guimenu> button. You can follow the progress of the patch application via the <literal role="guimenu">Pending Actions</literal> list. Refer to <xref linkend="ref.webui.schedule"/> for more details.</para>
</listitem>
</itemizedlist>
<important>
<para>If you use scheduled package installation, the packages or patches are installed via the <phrase><phrase>SUSE</phrase> Manager</phrase> daemon (<command>rhnsd</command>). You must enable the <phrase><phrase>SUSE</phrase> Manager</phrase> daemon on your systems.
For more information about the <phrase><phrase>SUSE</phrase> Manager</phrase> daemon, see <xref linkend="bp.contact.methods.rhnsd"/>.</para>
</important>
<para>The following rules apply to patches:</para>
<itemizedlist>
<listitem>
<para>Each package is a member of one or more channels. If a selected system is not subscribed to a channel containing the package, the update will not be installed on that system.</para>
</listitem>
<listitem>
<para>If a newer version of the package is already installed on the system, the update will not be installed.</para>
</listitem>
<listitem>
<para>If an older version of the package is installed, the package will be upgraded.</para>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="s3-sm-errata-details"><title>Patch Details</title><para><indexterm>
<primary>Web UI</primary><secondary>viewing details</secondary>
</indexterm>
<indexterm>
<primary>viewing details</primary>
</indexterm></para>
<para>If you click the advisory of a patch in the <literal role="guimenu">Relevant</literal> or <literal role="guimenu">All</literal> pages, its <literal role="guimenu">Patch Details</literal> page appears.
This page is further divided into the following tabs:</para>
<sect3 id="s4-sm-errata-details-details"><title>Patch Details &gt; Details</title><para>This subtab displays the patch report issued by <phrase>SUSE</phrase>.
It provides a synopsis of the patch first (with the severity as a textual prefix in case of security updates, such as <quote>critical</quote>, <quote>important</quote>, <quote>moderate</quote>, or <quote>low</quote>), issue date, and any update dates.
This is followed by a description of the patch and the steps required to resolve the issue.</para>
<para>Below the <literal role="guimenu">Affected Channels</literal> label, all channels that contain the affected package are listed.
Clicking a channel name displays the <literal role="guimenu">Packages</literal> subtab of the <literal role="guimenu">Channel Details</literal> page for that channel.
Refer to <xref linkend="s3-sm-channel-details"/> for more information.</para>
<para>Security updates list the specific vulnerability as tracked by <ulink url="http://cve.mitre.org">http://cve.mitre.org</ulink>.
This information is listed below the <literal role="guimenu">CVEs</literal> label.</para>
<para>OVAL is an open vulnerability and assessment language promoted by Mitre, <ulink url="http://oval.mitre.org">http://oval.mitre.org</ulink>.
Clicking the link below the <literal role="guimenu">Oval</literal> label downloads this information to your system.
More useful are the <phrase>SUSE</phrase> Update Advisories at <ulink url="https://www.suse.com/support/update/">https://www.suse.com/support/update/</ulink>.</para>
</sect3>
<sect3 id="s4-sm-errata-details-packages"><title>Patch Details &gt; Packages</title><para>This page provides links to each of the updated RPMs by channel.
Clicking the name of a package displays its <literal role="guimenu">Package Details</literal> page.</para>
</sect3>
<sect3 id="s4-sm-errata-details-systems"><title>Patch Details &gt; Affected Systems</title><para>This page lists systems affected by the patches.
You can apply updates here.
(See <xref linkend="s3-sm-apply-errata"/>.) Clicking the name of a system takes you to its <literal role="guimenu">System Details</literal> page.
Refer to <xref linkend="s3-sm-system-details"/> for more information.</para>
<para>To determine whether an update has been scheduled, refer to the <literal role="guimenu">Status</literal> column in the affected systems table.
Possible values are: N/A, Pending, Picked Up, Completed, and Failed.
This column identifies only the last action related to a patch.
For example, if an action fails and you reschedule it, this column shows the status of the patch as pending with no mention of the previous failure.
Clicking a status other than <literal role="guimenu">N/A</literal> takes you to the <literal role="guimenu">Action Details</literal> page.
This column corresponds to one on the <literal role="guimenu">Patch</literal> tab of the <literal role="guimenu">System Details</literal> page.</para>
</sect3>
</sect2>
</sect1>
<sect1 id="ref.webui.patches.search"><title>Advanced Search</title><para>The <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Patches</guimenu> <guimenu>Advanced Search</guimenu></menuchoice> page allows you to search through patches by specific criteria.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>patches advanced search patches</phrase></textobject><imageobject>
<imagedata fileref="patches_advanced_search_patches.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para><literal role="guimenu">All Fields</literal> — Search patches by synopsis, description, topic, or solution.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Patch Advisory</literal> — The name or the label of the patch.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Package Name</literal> — Search particular packages by name:</para>
<screen>kernel</screen>
<para>Results will be grouped by advisory.
For example, searching for 'kernel' returns all package names containing the string <literal>kernel</literal>, grouped by advisory.</para>
</listitem>
<listitem>
<para><literal role="guimenu">CVE</literal> — The name assigned to the security advisory by the Common Vulnerabilities and Exposures (CVE) project at <ulink url="http://cve.mitre.org">http://cve.mitre.org</ulink>. For example:</para>
<screen>CVE-2006-4535</screen>
</listitem>
</itemizedlist>
<para>To filter patch search results, check or uncheck the boxes next to the type of advisory:</para>
<itemizedlist>
<listitem>
<para>Bug Fix Advisory — Patches that fix issues reported by users or discovered during development or testing.</para>
</listitem>
<listitem>
<para>Security Advisory — Patches fixing a security issue found during development, testing, or reported by users or a software security clearing house. A security advisory usually has one or more CVE names associated with each vulnerability found in each package.</para>
</listitem>
<listitem>
<para>Product Enhancement Advisory — Patches providing new features, improving functionality, or enhancing performance of a package.</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="ref.webui.patches.manage"><title>Manage Patches</title><para><indexterm>
<primary>Web UI</primary><secondary>Managing Patches</secondary>
</indexterm>
<indexterm>
<primary>Managing Patches</primary>
</indexterm></para>
<para>Custom patches enable organizations to issue patch alerts for the packages in their custom channels, schedule deployment and manage patches across organizations.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>patches published patches</phrase></textobject><imageobject>
<imagedata fileref="patches_published_patches.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<warning>
<para>If the organization is using both <phrase><phrase>SUSE</phrase> Manager</phrase> and <phrase><phrase>SUSE</phrase> Manager</phrase> Proxy server, then manage patches only on the <phrase><phrase>SUSE</phrase> Manager</phrase> server since the proxy servers receive updates directly from it.
Managing patches on a proxy in this combined configuration risks putting your servers out of synchronization.</para>
</warning>
<sect2 id="s3-sm-errata-create"><title>Creating and Editing Patches</title><para><indexterm>
<primary>Web UI</primary><secondary>Editing Patches</secondary>
</indexterm>
<indexterm>
<primary>Editing Patches</primary>
</indexterm></para>
<para>To create a custom patch alert, proceed as follows:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Click <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Patches</guimenu> <guimenu>Manage Patches</guimenu> <guimenu>Published</guimenu></menuchoice>. Then on the <literal role="guimenu">Patches Management</literal> page, click <literal role="guimenu">Create Patch</literal> .</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>patches create patch</phrase></textobject><imageobject>
<imagedata fileref="patches_create_patch.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Enter a label for the patch in the <literal role="guimenu">Advisory</literal> field, ideally following a naming convention adopted by your organization.</para>
</listitem>
<listitem>
<para>Complete all remaining required fields, then click the <guimenu>Create Patch</guimenu> button. View standard SUSE Alerts for examples of properly completed fields.</para>
</listitem>
</orderedlist>
<para>Patch management distinguishes between published and unpublished patches.</para>
<itemizedlist>
<listitem>
<para><literal role="guimenu">Published</literal> : this page displays the patch alerts the organization has created and disseminated. To edit an existing published patch, follow the steps described in <xref linkend="s3-sm-errata-create"/>. To distribute the patch, click <guimenu>Send Notification</guimenu> in the <literal role="guimenu">Send Patch Mail</literal> section on the top of the <literal role="guimenu">Patch Details</literal> page. The patch alert is sent to the administrators of all affected systems.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Unublished</literal> : this page displays the patch alerts your organization has created but not yet distributed. To edit an existing unpublished patch, follow the steps described in <xref linkend="s3-sm-errata-create"/>. To publish the patch, click <guimenu>Publish Patch</guimenu> on the top-right corner of the <literal role="guimenu">Patch Details</literal> page. Confirm the channels associated with the patch and click the <guimenu>Publish Patch</guimenu> button, now in the lower-right corner. The patch alert is moved to the <literal role="guimenu">Published</literal> page awaiting distribution.</para>
</listitem>
</itemizedlist>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> administrators can also create patches by cloning an existing one.
Cloning preserves package associations and simplifies issuing patches.
See <xref linkend="ref.webui.patches.clone"/> for instructions.</para>
<para>To edit an existing patch alert’s details, click its advisory on the <literal role="guimenu">Patches Management</literal> page, make the changes in the appropriate fields of the <literal role="guimenu">Details</literal> tab, and click the <guimenu>Update Patch</guimenu> button.
Click the <literal role="guimenu">Channels</literal> tab to alter the patch’s channel association.
Click the <literal role="guimenu">Packages</literal> tab to view and modify its packages.</para>
<para>To delete patches, select their check boxes on the <literal role="guimenu">Patches Management</literal> page, click the <guimenu>Delete Patches</guimenu> button, and confirm the action.
Deleting published patches might take a few minutes.</para>
</sect2>
<sect2 id="s3-sm-errata-assign-packs"><title>Assigning Packages to Patches</title><para>To assign packages to patches, proceed as follows:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Select a patch, click the <literal role="guimenu">Packages</literal> tab, then the <literal role="guimenu">Add</literal> subtab.</para>
</listitem>
<listitem>
<para>To associate packages with the patch being edited, select the channel from the <literal role="guimenu">View</literal> drop-down box that contains the packages and click <guimenu>View</guimenu>. Packages already associated with the patch being edited are not displayed. Selecting <literal role="guimenu">All managed packages</literal> presents all available packages.</para>
</listitem>
<listitem>
<para>After clicking <guimenu>View</guimenu>, the package list for the selected option appears. Note that the page header still lists the patch being edited.</para>
</listitem>
<listitem>
<para>In the list, select the check boxes of the packages to be assigned to the edited patch and click <guimenu>Add Packages</guimenu>.</para>
</listitem>
<listitem>
<para>A confirmation page appears with the packages listed. Click <guimenu>Confirm</guimenu> to associate the packages with the patch. The <literal role="guimenu">List/Remove</literal> subtab of the <literal role="guimenu">Managed Patch Details</literal> page appears with the new packages listed.</para>
</listitem>
</orderedlist>
<para>When packages are assigned to a patch, the patch cache is updated to reflect the changes.
This update is delayed briefly so that users may finish editing a patch before all the changes are made available.
To initiate the changes to the cache manually, follow the directions to <guimenu>commit the changes immediately</guimenu> at the top of the page.</para>
</sect2>
<sect2 id="s3-sm-errata-publish"><title>Publishing Patches</title><para>After adding packages to the patch, the patch needs to be published to be disseminated to affected systems.
Follow this procedure to publish patches:</para>
<orderedlist numeration="arabic">
<listitem>
<para>On the top navigation bar, click <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Patches</guimenu> <guimenu>Manage Patches</guimenu> <guimenu>Unpublished</guimenu></menuchoice> to see all the unpublished patches listed.</para>
</listitem>
<listitem>
<para>Click the patch <literal role="guimenu">Advisory</literal> name to open the patch details pages.</para>
</listitem>
<listitem>
<para>On the patch details page, click <guimenu>Publish Patch</guimenu>. A confirmation page appears that will ask you to select which channels you want to make the patch available in. Choose the relevant channels.</para>
</listitem>
<listitem>
<para>At the bottom of the page, click <guimenu>Publish Patch</guimenu>. The patch published will now appear on the <literal role="guimenu">Published</literal> page of <literal role="guimenu">Manage Patches</literal>.</para>
</listitem>
</orderedlist>
</sect2>
<sect2 id="s3-sm-errata-published"><title>Published</title><para>Here all published patches are listed.
It is possible to perform the following actions:</para>
<itemizedlist>
<listitem>
<para>To create a patch, click <guimenu>Create Patch</guimenu>.</para>
</listitem>
<listitem>
<para>To delete patches, select them first and then click <guimenu>Delete Patches</guimenu>.</para>
</listitem>
<listitem>
<para>Click an Advisory name to open the patch details page.</para>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="s3-sm-errata-unpublished"><title>Unpublished</title><para>Here all published patches are listed.
It is possible to perform the same actions as with published patches.
For more information, see <xref linkend="s3-sm-errata-published"/>.
Additionally, on a patch details page, you can click <guimenu>Publish Patch</guimenu> for publishing.</para>
</sect2>
</sect1>
<sect1 id="ref.webui.patches.clone"><title>Cloning Patches</title><para>Patches can be cloned for easy replication and distribution as part of <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>patches clone patches</phrase></textobject><imageobject>
<imagedata fileref="patches_clone_patches.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Only patches potentially applicable to one of your channels can be cloned.
Patches can be applicable to a channel if that channel was cloned from a channel to which the patch applies.
To access this functionality, click <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Patches</guimenu> <guimenu>Clone Patches</guimenu></menuchoice>.</para>
<para>On the <literal role="guimenu">Clone Patches</literal> page, select the channel containing the patch from the <literal role="guimenu">View</literal> drop-down box and click <guimenu>View</guimenu>.
When the patch list appears, select the check box of the patch to be cloned and click <guimenu>Clone Patch</guimenu>.
A confirmation page appears with the patch listed.
Click <guimenu>Confirm</guimenu> to finish cloning.</para>
<para>The cloned patch appears in the <literal role="guimenu">Unpublished</literal> patch list.
Verify the patch text and the packages associated with that patch, then publish the patch so it is available to users in your organization.</para>
</sect1>
</chapter>
<chapter id="ref.webui.channels"><title>Software</title><para>The pages in the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Software</guimenu></menuchoice> category enable you to view and manage software channels and packages associated with your systems.</para>
<sect1 id="ref.webui.channels.software"><title>Channels</title><para>The <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Software</guimenu> <guimenu>Channels</guimenu></menuchoice> page is the first to appear.
A software channel provides packages grouped by products or applications to simplify the selection of packages to be installed on a system.</para>
<para>There are two types of software channels: base channels and child channels.</para>
<variablelist id="s3-sm-channel-list-base">
<varlistentry>
<term>Base Channels</term>
<listitem>
<para>A base channel consists of packages built for a specific architecture and release.
For example, all of the packages in <phrase>SUSE Linux Enterprise Server</phrase>  12 for the <literal>x86_64</literal> architecture make up a base channel.
The list of packages in <phrase>SUSE Linux Enterprise Server</phrase>  12 for the <literal>s390x</literal> architecture make up a different base channel.</para>
<para>A system must be subscribed to only one base channel assigned automatically during registration based on the <phrase>SUSE Linux Enterprise</phrase> release and system architecture.
For paid base channels, an associated subscription must exist.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Child Channels</term>
<listitem>
<para>A child channel is associated with a base channel and provides extra packages.
For example, an organization can create a child channel associated with <phrase>SUSE Linux Enterprise Server</phrase> on <literal>x86_64</literal> architecture that contains extra packages for a custom application.</para>
<para>Especially important are the <phrase><phrase>SUSE</phrase> Manager</phrase> Tools channels that are available for every base channel.
These tools channels provide the tools needed to connect the clients with the <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
<para>A system can be subscribed to multiple child channels of its base channel.
Only packages provided by a subscribed channel can be installed or updated.
{susemgr} Administrators and Channel Administrators have channel management authority.
This authority gives them the ability to create and manage their own custom channels.</para>
<note>
<para>Do not create child channels containing packages that are not compatible with the client system.</para>
</note>
<note>
<para>Channels can be further distinguished by relevance: <literal role="guimenu">All</literal>, <literal role="guimenu">SUSE</literal>, <literal role="guimenu">Channels</literal>, <literal role="guimenu">My Channels</literal>, <literal role="guimenu">Shared</literal>, and <literal role="guimenu">Retired</literal>.</para>
</note>
</listitem>
</varlistentry>
</variablelist>
<sect2 id="s3-sm-channel-list-all"><title>All</title><para>Under <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Software</guimenu> <guimenu>Channels</guimenu></menuchoice> select <literal role="guimenu">All</literal>.
All channels available to your organization are listed.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>channels all channels</phrase></textobject><imageobject>
<imagedata fileref="channels_all_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Links within this list go to different tabs of the <literal role="guimenu">Software Channel Details</literal> page.
Clicking a channel name takes you to the <literal role="guimenu">Details</literal> tab.
Clicking the number of packages takes you to the <literal role="guimenu">Packages</literal> tab.
Clicking the number of systems takes you to the <literal role="guimenu">Subscribed Systems</literal> tab.
Refer to <xref linkend="s3-sm-channel-details"/> for details.</para>
<important>
<title>Package Count Update Change</title>
<para>During a channel synchronization all package are now downloaded before they are incremented and displayed within the Web UI.
When packages have completed the initial download, packages will begin to increment in your channel as they are imported to the database.</para>
</important>
</sect2>
<sect2 id="s3-sm-channel-list-redhat"><title>SUSE</title><para>The <literal role="guimenu">SUSE</literal> page displays all <phrase>SUSE</phrase> channels and any available child channels.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>channels vendor channels</phrase></textobject><imageobject>
<imagedata fileref="channels_vendor_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<warning>
<title>SUSEChannels Cannot be Deleted</title>
<para>When imported, <phrase>SUSE</phrase> channels cannot be deleted.
Only custom software channels can be deleted.</para>
</warning>
</sect2>
<sect2 id="s3-sm-channel-list-popular"><title>Popular</title><para>The <literal role="guimenu">Popular</literal> page displays the software channels most subscribed by systems registered to your organization.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>channels popular channels</phrase></textobject><imageobject>
<imagedata fileref="channels_popular_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>You can refine the search by using the drop-down box to list only the channels with at least a certain number of systems subscribed.</para>
</sect2>
<sect2 id="s3-sm-channel-list-my"><title>My Channels</title><para>The <literal role="guimenu">My Channels</literal> page displays all software channels that belong to your organization, including both <phrase>SUSE</phrase> and custom channels.
Use the text box to filter by channel name.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>channels custom channels</phrase></textobject><imageobject>
<imagedata fileref="channels_custom_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="s3-sm-channel-list-shared"><title>Shared</title><para>The <literal role="guimenu">Shared</literal> page displays the channels shared with others in the organizational trust.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>channels shared channels</phrase></textobject><imageobject>
<imagedata fileref="channels_shared_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="s3-sm-channel-list-retired"><title>Retired</title><para>The <literal role="guimenu">Retired</literal> page displays available channels that have reached their end-of-life dates and do not receive updates.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>channels retired channels</phrase></textobject><imageobject>
<imagedata fileref="channels_retired_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="s3-sm-channel-details"><title>Channel Details</title><para>If you click the name of a channel, the <literal role="guimenu">Channel Details</literal> page appears.</para>
<sect3 id="s4-sm-channel-details-details"><title>Channel Details+Details</title><para>General information about the channel and its parent if applicable.
This summary, description, and architecture is also displayed when clicking a channel.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>channels details channels</phrase></textobject><imageobject>
<imagedata fileref="channels_details_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>In addition, <literal role="guimenu">Per-User Subscription Restrictions</literal> can be set globally by <phrase><phrase>SUSE</phrase> Manager</phrase> administrators and channel administrators.
By default, any user can subscribe channels to a system.
To manage user permissions, select <literal role="guimenu">Only selected users within your organization may subscribe to this channel</literal> and click <guimenu>Update</guimenu>.
The <literal role="guimenu">Subscribers</literal> tab appears.
Click it to grant specific users subscription permissions to a channel.
{susemgr} administrators and channel administrators can always subscribe any channels to a system.</para>
<para>Only customers with custom base channels can change their systems' base channel assignments via the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface in two ways:</para>
<itemizedlist>
<listitem>
<para>Assign the system to a custom base channel.</para>
</listitem>
<listitem>
<para>Revert subscriptions from a custom base channel to the appropriate distribution-based base channel.</para>
</listitem>
</itemizedlist>
<note>
<para>The assigned base channel must match the installed system.
For example, a system running <phrase>SUSE Linux Enterprise</phrase> 11 for <literal>x86_64</literal> cannot be registered to a <phrase>SUSE Linux Enterprise</phrase> 12 for <literal>s390x</literal> base channel.
Use the files <filename>/etc/os-release</filename> or <filename>/etc/SuSE-release</filename> to check your product, architecture (try <command>uname -a</command>), version, and patch level.</para>
</note>
</sect3>
<sect3 id="s4-sm-channel-details-managers"><title>Channel Details+Managers</title><para>On the <literal role="guimenu">Managers</literal> page, you can check which users are authorized to manage the selected channel.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>channels details managers channels</phrase></textobject><imageobject>
<imagedata fileref="channels_details_managers_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Real name and e-mail address are listed with the user names.
Organization and Channel administrators can manage any channel.
As a <phrase><phrase>SUSE</phrase> Manager</phrase> administrator you can change roles for specific users by clicking the name.
For more information on user management and the <literal role="guimenu">User Details</literal> page, see:</para>
<para><xref linkend="ref.webui.users"/></para>
</sect3>
<sect3 id="s4-sm-channel-details-errata"><title>Channel Details+Patches</title><para>The <literal role="guimenu">Patches</literal> page lists patches to be applied to packages provided in the channel.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>channels details patches channels</phrase></textobject><imageobject>
<imagedata fileref="channels_details_patches_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>The list displays advisory types, names, summaries, and issue dates.
Clicking an advisory name takes you to its <literal role="guimenu">Patch Details</literal> page.
for more information, see:</para>
<para><xref linkend="s3-sm-errata-details"/></para>
</sect3>
<sect3 id="s4-sm-channel-details-packages"><title>Channel Details+Packages</title><para>This page lists packages in the channel.
Clicking a package name takes you to the <literal role="guimenu">Package Details</literal> page.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>channels details packages channels</phrase></textobject><imageobject>
<imagedata fileref="channels_details_packages_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>This page displays a set of tabs with information about the package, including architectures on which it runs, the package size, build date, package dependencies, change log, list of files in the package, newer versions, and which systems have the package installed.
Download the packages as RPMs.</para>
<para>To search for a specific package or a subset of packages, use the package filter at the top of the list.
Enter a substring to search for package names containing the string.
For example, typing <literal>dd</literal> in the filter might return: <literal role="systemitem">dd_rescue</literal>, <literal role="systemitem">ddclient</literal>, and <literal role="systemitem">uuidd</literal>.
The filter is case-insensitive.</para>
</sect3>
<sect3 id="s4-sm-channel-details-subsys"><title>Channel Details+Subscribed Systems</title><para>The list displays system names and their system type.
Clicking a system name takes you to its <literal role="guimenu">System Details</literal> page.
For more information, see:</para>
<para><xref linkend="s3-sm-system-details"/></para>
</sect3>
<sect3 id="s4-sm-channel-details-tarsys"><title>Software Channel Details+Target Systems</title><para>List of systems eligible for subscription to the channel.
This tab appears only for child channels.
Use the check boxes to select the systems, then click the <literal role="guimenu">Confirm</literal> and <guimenu>Subscribe</guimenu> button on the bottom right-hand corner.
You will receive a success message or be notified of any errors.
This can also be accomplished through the <literal role="guimenu">Channels</literal> tab of the <literal role="guimenu">System Details</literal> page.
For more information, see:</para>
<para><xref linkend="s3-sm-system-details"/></para>
</sect3>
</sect2>
</sect1>
<sect1 id="ref.webui.channels.search"><title>Package Search</title><informalfigure>
<mediaobject><textobject role="description"><phrase>channels search channels</phrase></textobject><imageobject>
<imagedata fileref="channels_search_channels.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>The <literal role="guimenu">Package Search</literal> page allows you to search through packages using various criteria provided by the <literal role="guimenu">What to search for</literal> selection list:</para>
<itemizedlist>
<listitem>
<para><literal role="guimenu">Free Form</literal> — a general keyword search useful when the details of a particular package and its contents are unknown.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Name Only</literal> — Targeted search to find a specific package known by name.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Name and Summary</literal> — Search for a package or program which might not show up in the respective package name but in its one-line summary.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Name and Description</literal> — Search package names and their descriptions.</para>
</listitem>
</itemizedlist>
<para>The <literal role="guimenu">Free Form</literal> field additionally allows you to search using field names that you prepend to search queries and filter results by that field keyword.</para>
<para>For example, if you wanted to search all of the <phrase>SUSE Linux Enterprise</phrase> packages for the word <literal>java</literal> in the description and summary, type the following in the <literal role="guimenu">Free Form</literal> field:</para>
<screen>summary:java and description:java</screen>
<para>Other supported field names include:</para>
<itemizedlist>
<listitem>
<para><literal>name</literal>: search package names for a particular keyword,</para>
</listitem>
<listitem>
<para><literal>version</literal>: search for a particular package version,</para>
</listitem>
<listitem>
<para><literal>filename</literal>: search the package file names for a particular keyword,</para>
</listitem>
<listitem>
<para><literal>description</literal>: search the packages' detailed descriptions for a particular keyword,</para>
</listitem>
<listitem>
<para><literal>summary</literal>: search the packages' brief summary for a particular keyword,</para>
</listitem>
<listitem>
<para><literal>arch</literal>: search the packages by their architecture (such as <literal>x86_64</literal>, <literal>ppc64le</literal>, or <literal>s390</literal>).</para>
</listitem>
</itemizedlist>
<para>You can also limit searches to <literal role="guimenu">Channels relevant to your systems</literal> by clicking the check box.
Additionally, you can restrict your search by platform (<literal role="guimenu">Specific channel you have access to</literal>) or architecture (<literal role="guimenu">Packages of a specific architecture</literal>).</para>
</sect1>
<sect1 id="ref.webui.channels.manage"><title>Manage Software Channels</title><para>This menu allows administrators to create, clone, and delete custom channels.
These channels may contain altered versions of distribution-based channels or custom packages.</para>
<sect2 id="ref.webui.channels.manage.overview"><title>Manage Software Channels &gt; Overview</title><para>The <literal role="guimenu">Overview</literal> page of the <literal role="guimenu">Manage Software Channels</literal> menu lists all available channels including custom, distribution-based, and child channels.</para>
<para>To clone an existing channel, click the <literal role="guimenu">Clone Channel</literal> link.
Select the channel to be cloned from the drop-down box, select whether to clone the current state (including patches) or the original state (without patches).
You can also select specific patches to use for cloning.
Then click the <guimenu>Create Channel</guimenu> button.
In the next screen select options for the new channel, including base architecture and GPG, then click <literal role="guimenu">Create Channel</literal>.</para>
<note>
<title>GPG Key URL</title>
<para>The GPG key URL may be either an internal file location such as <ulink url="file:///"><literal>file:///</literal></ulink> or you may use an external URL.</para>
</note>
<para>To create a new channel, click the <literal role="guimenu">Create Channel</literal> link.
Select the appropriate options for the new channel, including base architecture and GPG options, then click <guimenu>Create Channel</guimenu>.
Note that a channel created in this manner is blank, containing no packages.
You must either upload software packages or add packages from other repositories.
You may also choose to include patches in your custom channel.</para>
<important>
<title>Enable GPG Check</title>
<para><literal>Enable GPG Check</literal> is automatically selected when creating a new channel.
If you would like to add custom packages and applications to your channel, make sure you deselect this box or you cannot install/add unsigned packages.
Keep in mind this is a security risk for packages from an untrusted source.</para>
</important>
</sect2>
<sect2 id="s3-chnl-mgmt-channel-details"><title>`Channel Details</title><para><remark role="fixme">Add a short description</remark></para><sect3 id="s4-chnlmgmt-cdetails-cdetails"><title>Channel Details+Details</title><para>This page lists the settings made during channel creation.</para>
</sect3>
<sect3 id="s4-chnlmgmt-cdetails-manage"><title>Channel Details+Managers</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> administrators and channel administrators may alter or delete any channel.
To grant other users rights to alter or delete this channel, check the box next to the user’s name and click <guimenu>Update</guimenu>.</para>
<para>To allow all users to manage the channel, click the <guimenu>Select All</guimenu> button at the bottom of the list then click <guimenu>Update</guimenu>.
To remove a user’s right to manage the channel, uncheck the box next to their name and click <guimenu>Update</guimenu>.</para>
</sect3>
<sect3 id="s4-chnlmgmt-cdetails-errata"><title>Channel Details+Patches</title><para>Channel managers can list, remove, clone, and add patches to their custom channel.
Custom channels not cloned from a distribution may not contain patches until packages are available.
Only patches that match the base architecture and apply to a package in that channel may be added.
Finally, only cloned or custom patches may be added to custom channels.
Patches may be included in a cloned channel if they are selected during channel creation.</para>
<para>The <literal role="guimenu">Sync</literal> tab lists patches that were updated since they were originally cloned in the selected cloned channel.
More specifically, a patch is listed here if and only if:</para>
<itemizedlist>
<listitem>
<para>it is a cloned patch,</para>
</listitem>
<listitem>
<para>it belongs to the selected cloned channel,</para>
</listitem>
<listitem>
<para>it has already been published in the selected cloned channel,</para>
</listitem>
<listitem>
<para>it does not contain a package that the original patch has, or it has at least one package with a different version with regard to the corresponding one in the original patch, or both.</para>
</listitem>
<listitem>
<para>Clicking the <guimenu>Sync Patches</guimenu> button opens a confirmation page in which a subset of those patches can be selected for synchronization.</para>
</listitem>
<listitem>
<para>Clicking the <guimenu>Confirm</guimenu> button in the confirmation page results in such patches being copied over from the original channel to the cloned channel, thus updating corresponding packages.</para>
</listitem>
</itemizedlist>
</sect3>
<sect3 id="s4-cnlmgmt-cdetails-pkgs"><title>Channel Details+Packages</title><para>As with patches, administrators can list, remove, compare, and add packages to a custom channel.</para>
<para>To list all packages in the channel, click the <literal role="guimenu">List / Remove Packages</literal> link.
Check the box to the left of any package you want to remove, then click <guimenu>Remove Packages</guimenu>.</para>
<para>To add packages, click the <literal role="guimenu">Add Packages</literal> link.
From the drop-down box activate a channel from which to add packages and click <guimenu>View</guimenu> to continue.
Check the box to the left of any package you want to add to the custom channel, then click <guimenu>Add Packages</guimenu>.</para>
<para>To compare packages in the current channel with those in another, select a channel from the drop-down box and click <guimenu>Compare</guimenu>.
Packages in both channels are compared, including architecture and the latest version of packages.
The results are displayed on the next screen.</para>
<para>To make the two channels identical, click the <guimenu>Merge Differences</guimenu> button.
In the next dialog, resolve any conflicts. <guimenu>Preview Merge</guimenu> allows you to review the changes before applying them to the channels.
Select those packages that you want to merge.
Click <guimenu>Merge Packages</guimenu> then <guimenu>Confirm</guimenu> to perform the merge.</para>
</sect3>
<sect3 id="s4-chnlmgmt-cdetails-repos"><title>Channel Details+Repositories</title><para>On the <literal role="guimenu">Repositories</literal> page, assign software repositories to the channel and synchronize repository content:</para>
<itemizedlist>
<listitem>
<para><literal role="guimenu">Add/Remove</literal> lists configured repositories, which can be added and removed by selecting the check box next to the repository name and clicking <guimenu>Update Repositories</guimenu>.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Sync</literal> lists configured repositories. The synchronization schedule can be set using the drop-down boxes, or an immediate synchronization can be performed by clicking <guimenu>Sync Now</guimenu>.</para>
</listitem>
</itemizedlist>
<para>The <literal role="guimenu">Manage Repositories</literal> tab to the left shows all assigned repositories.
Click a name to see details and possibly delete a repository.</para>
</sect3>
</sect2>
<sect2 id="s3-chnl-mgmt-mng-pkgs"><title>Manage Software Channels &gt; Manage Software Packages</title><para>This page allows managing custom software packages, listing all software or viewing only packages in a custom channel.
Select the respective channel from the drop-down box and click <guimenu>View Packages</guimenu>.</para>
</sect2>
<sect2 id="s3-chnl-mgmt-mng-repos"><title>Manage Software Channels &gt; Manage Repositories</title><para>Add or manage custom or third-party package repositories and link the repositories to an existing channel.
The repositories feature currently supports repomd repositories.</para>
<para>To create a new repository click the <literal role="guimenu">Create Repository</literal> link at the top right of the <literal role="guimenu">Manage Repositories</literal> page.
The <literal role="guimenu">Create Repository</literal> screen prompts you to enter a <literal role="guimenu">Repository Label</literal> such as <literal>sles-12-x86_64</literal> and a <literal role="guimenu">Repository URL</literal>.
You may enter URLs pointing to mirror lists or direct download repositories, then click <guimenu>Create Repository</guimenu>.
Select the desired SSL certificate of authority, client certificate and key from the drop down list.
SSL keys should be placed in <ulink url="http://EXAMPLE-MANAGER-FQDN.com/pub"><literal>http://EXAMPLE-MANAGER-FQDN.com/pub</literal></ulink>.</para>
<para>To link the new repository to an existing software channel, select <literal role="guimenu">Manage Software Channels</literal> from the left menu, then click the channel you want to link.
In the channel’s detail page, click the <literal role="guimenu">Repositories</literal> subtab, then check the box next to the repository you want to link to the channel.
Click <guimenu>Update Repositories</guimenu>.</para>
<para>To synchronize packages from a custom repository to your channel, click the <literal role="guimenu">Sync</literal> link from the channel’s <literal role="guimenu">Repositories</literal> subtab, and confirm by clicking the <guimenu>Sync</guimenu> button.</para>
<para>You can also perform a synchronization via command line by using the <command>spacewalk-repo-sync</command> command, which additionally allows you to accept keys.</para>
<para><command>spacewalk-repo-sync</command> creates log files in the <filename>/var/log/rhn/reposync</filename> directory. <phrase><phrase>SUSE</phrase> Manager</phrase> uses one log file per channel and reuses it with the next synchronization run.</para>
</sect2>
</sect1>
<sect1 id="ref.webui.channels.mapping"><title>Distribution Channel Mapping</title><para>The <literal role="guimenu">Distribution Channel Mapping</literal> page displays a list of all your defined default base channels that clients will pick up according to their operating system and architecture at registration time.
These mappings can be overriden, but cannot be deleted.
To create such a mapping click <literal role="guimenu">Create Distribution Channel Mapping</literal> in the upper-right corner.
Several columns provide information for each mapping.</para>
<note>
<title>Using Distribution Channel Mapping</title>
<para>For <phrase>SUSE Linux Enterprise</phrase> or <phrase>Red Hat Enterprise Linux</phrase> <phrase>SUSE</phrase> does not use the <literal role="guimenu">Distribution Channel Mapping</literal> feature.
It can be used for other products (for example, for free products such as openSUSE, Fedora, Oracle Linux, etc.).
It can help when letting clients pick up base channels automatically.</para>
</note>
</sect1>
</chapter>
<chapter id="ref.webui.audit"><title>Audit</title><para>Select <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Audit</guimenu></menuchoice> to audit your managed systems.</para>
<sect1 id="ref.webui.audit.cve"><title>CVE Audit</title><para>The <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Audit</guimenu> <guimenu>CVE Audit</guimenu></menuchoice> page will display a list of client systems with their patch status regarding a given CVE (Common Vulnerabilities and Exposures) number.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>audit cve audit</phrase></textobject><imageobject>
<imagedata fileref="audit_cve_audit.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<sect2 id="s1-cve-usage"><title>Normal Usage</title><para>Proceed as follows if you want to verify that a client system has received a given CVE patch:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Make sure that the CVE data is up-to-date. For more information, see <xref linkend="sec-cve-maint"/>.</para>
</listitem>
<listitem>
<para>Click <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Audit</guimenu> <guimenu>CVE Audit</guimenu></menuchoice> to open the <literal role="guimenu">CVE Audit</literal> page.</para>
</listitem>
<listitem>
<para>Input a 13-char CVE identifier in the <literal role="guimenu">CVE Number</literal> field. The year setting will be automatically adjusted. Alternatively, set the year manually and add the last four digits.</para>
</listitem>
<listitem>
<para>Optionally, uncheck the patch statuses you are not interested in.</para>
</listitem>
<listitem>
<para>Click <literal role="guimenu">Audit systems</literal>.</para>
</listitem>
</orderedlist>
<para>Performing this procedure will result in a list of client systems, where each system comes with a <literal role="guimenu">Patch Status</literal> belonging to the given CVE identifier.
Possible statuses are:</para>
<variablelist>
<varlistentry>
<term><inlinemediaobject>
<imageobject>
<imagedata fileref="patch-status-affected-patch-inapplicable.png"/>
</imageobject>
<textobject role="description"><phrase>patch status affected patch inapplicable</phrase></textobject>
</inlinemediaobject> Red - Affected, patches are available in channels that are not assigned</term>
<listitem>
<para>The system is affected by the vulnerability and <phrase><phrase>SUSE</phrase> Manager</phrase> has one or more patches for it, but at this moment, the channels offering the patches are not assigned to the system.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><inlinemediaobject>
<imageobject>
<imagedata fileref="patch-status-affected-patch-applicable.png"/>
</imageobject>
<textobject role="description"><phrase>patch status affected patch applicable</phrase></textobject>
</inlinemediaobject> Orange - Affected, at least one patch available in an assigned channel</term>
<listitem>
<para>The system is affected by the vulnerability, <phrase><phrase>SUSE</phrase> Manager</phrase> has at least one patch for it in a channel that is directly assigned to the system.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><inlinemediaobject>
<imageobject>
<imagedata fileref="patch-status-not-affected.png"/>
</imageobject>
<textobject role="description"><phrase>patch status not affected</phrase></textobject>
</inlinemediaobject> Grey - Not affected</term>
<listitem>
<para>The system does not have any packages installed that are patchable.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><inlinemediaobject>
<imageobject>
<imagedata fileref="patch-status-patched.png"/>
</imageobject>
<textobject role="description"><phrase>patch status patched</phrase></textobject>
</inlinemediaobject> Green - Patched</term>
<listitem>
<para>A patch has already been installed.</para>
</listitem>
</varlistentry>
</variablelist>
<para>In other words, it can mean the following:</para>
<itemizedlist>
<listitem>
<para>More than one patch might be needed to fix a certain vulnerability.</para>
</listitem>
<listitem>
<para>The <inlinemediaobject>
<imageobject>
<imagedata fileref="patch-status-affected-patch-applicable.png"/>
</imageobject>
<textobject role="description"><phrase>patch status affected patch applicable</phrase></textobject>
</inlinemediaobject> Orange - state is displayed when <phrase><phrase>SUSE</phrase> Manager</phrase> has at least one patch in an assigned channel.
This might mean that, after installing such a patch, others might be needed—users should double check the CVE Audit page after applying a patch to be sure that their systems are not affected anymore.</para>
</listitem>
</itemizedlist>
<para>For a more precise definitions of these states, see <xref linkend="sec-cve-tips"/>.</para>
<note>
<title>Unknown CVE Number</title>
<para>If the CVE number is not known to <phrase><phrase>SUSE</phrase> Manager</phrase>, an error message is displayed because <phrase><phrase>SUSE</phrase> Manager</phrase> cannot collect and display any audit data.</para>
</note>
<para>For each system, the <literal role="guimenu">Next Action</literal> column contains suggestions on the steps to take to address the vulnerabilities.
Under these circumstances it is either sensible to install a certain patch or assign a new channel.
If applicable, a list of <quote>candidate</quote> channels or patches is displayed for your convenience.</para>
<para>You can also assign systems to a <literal role="guimenu">System Set</literal> for further batch processing.</para>
</sect2>
<sect2 id="ref-api-usage"><title>API Usage</title><para>An API method called <literal>audit.listSystemsByPatchStatus</literal> is available to run CVE audits from custom scripts.
Details on how to use it are available in the API guide.</para>
</sect2>
<sect2 id="sec-cve-maint"><title>Maintaining CVE Data</title><para>To produce correct results, CVE Audit must periodically refresh the data needed for the search in the background.
By default, the refresh is scheduled at 11:00 PM every night.
It is recommended to run such a refresh right after the <phrase><phrase>SUSE</phrase> Manager</phrase> installation to get proper results immediately instead of waiting until the next day.</para>
<orderedlist numeration="arabic">
<listitem>
<para>In the Web interface, click <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu> <guimenu>Task Schedules</guimenu></menuchoice>.</para>
</listitem>
<listitem>
<para>Click the <literal>cve-server-channels-default</literal> schedule link.</para>
</listitem>
<listitem>
<para>Click the <literal>cve-server-channels-bunch</literal> link.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Single Run Schedule</guimenu> button.</para>
</listitem>
<listitem>
<para>After some minutes, refresh the page and check that the scheduled run status is <literal>FINISHED</literal>.</para>
</listitem>
</orderedlist>
<para>A direct link is also available on the <menuchoice><guimenu>Main Main</guimenu> <guimenu>Audit</guimenu> <guimenu>CVE Audit</guimenu></menuchoice> page (<literal role="guimenu">extra CVE data update</literal>).</para>
</sect2>
<sect2 id="sec-cve-tips"><title>Tips and Background Information</title><para>Audit results are only correct if the assignment of channels to systems did not change since the last scheduled refresh (normally at 11:00 PM every night).
If a CVE audit is needed and channels were assigned or unassigned to any system during the day, a manual run is recommended.
For more information, see <xref linkend="sec-cve-maint"/>.</para>
<para>Systems are called <quote>affected</quote>, <quote>not affected</quote> or <quote>patched</quote> not in an absolute sense, but based on information available to <phrase><phrase>SUSE</phrase> Manager</phrase>.
This implies that concepts such as <quote>being affected by a vulnerability</quote> have particular meanings in this context.
The following definitions apply:</para>
<variablelist>
<varlistentry>
<term>System affected by a certain vulnerability</term>
<listitem>
<para>A system which has an installed package with version lower than the version of the same package in a relevant patch marked for the vulnerability.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>System not affected by a certain vulnerability</term>
<listitem>
<para>A system which has no installed package that is also in a relevant patch marked for the vulnerability.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>System patched for a certain vulnerability</term>
<listitem>
<para>A system which has an installed package with version equal to or greater than the version of the same package in a relevant patch marked for the vulnerability.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Relevant patch</term>
<listitem>
<para>A patch known by <phrase><phrase>SUSE</phrase> Manager</phrase> in a relevant channel.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Relevant channel</term>
<listitem>
<para>A channel managed by <phrase><phrase>SUSE</phrase> Manager</phrase>, which is either assigned to the system, the original of a cloned channel which is assigned to the system, a channel linked to a product which is installed on the system or a past or future service pack channel for the system.</para>
</listitem>
</varlistentry>
</variablelist>
<para>A notable consequence of the above definitions is that results can be incorrect in cases of unmanaged channels, unmanaged packages, or non-compliant systems.</para>
</sect2>
</sect1>
<sect1 id="ref.webui.audit.subscription"><title>Subscription Matching</title><para>To match subscriptions with your systems use the Subscription Matcher tool.</para>
<para>The <literal role="guimenu">Edit Virtual Host Managers</literal> link in the upper right corner will take you to the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>Virtual Host Managers</guimenu></menuchoice> overview.
For more information about Virtual Host Managers, see <xref linkend="ref.webui.systems.virt-host-managers"/>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>audit subscription matching</phrase></textobject><imageobject>
<imagedata fileref="audit_subscription_matching.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>It gathers information about systems, subscriptions and pinned matches (fixed customer defined subscriptions to systems mapping) as input and returns the best possible match according to the SUSE Terms and Conditions.
The Subscription Matcher (<command>subscription-matcher</command>) is also able to write CSV Reports.</para>
<itemizedlist>
<listitem>
<para>The <literal role="guimenu">Subscriptions Report</literal> provides subscriptions report data when used</para>
</listitem>
<listitem>
<para>The <literal role="guimenu">Unmatched Products Report</literal> provides information on products and their systems when a match to a subscription cannot be found</para>
</listitem>
<listitem>
<para>The <literal role="guimenu">Error Report</literal> provides a list of errors raised during the matching process</para>
</listitem>
</itemizedlist>
<para>Selecting <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Audit</guimenu> <guimenu>Subscription Matching</guimenu></menuchoice> from the left navigation menu will provide you with an overview of all results generated by the Subscription Matcher.</para>
<important>
<title>Subscription Matcher Accuracy</title>
<para>This tool’s goal is to help provide visual coverage on current subscription use and support reporting.
The Subscription Matcher is excellent at matching systems and products registered with <phrase><phrase>SUSE</phrase> Manager</phrase>, however any systems, products or environments which are not found in the database will remain unmatched.
This tool is not intended to act as a replacement for auditing.
Auditing should always take precedence over subscription matching.</para>
</important>
<sect2 id="_menuchoice_guimenu_main_menu_guimenu_guisubmenu_audit_guisubmenu_guisubmenu_subscription_matching_guisubmenu_guimenuitem_subscriptions_guimenuitem_menuchoice"><title>Main Menu+Audit+Subscription Matching+Subscriptions</title><para>The Subscription Matching overview provides subscription part numbers, product descriptions, policies, matched total subscriptions used and remaining, and the start and end dates of subscriptions.</para>
<figure>
<title>Subscription Matching Overview</title>
<mediaobject><textobject role="description"><phrase>smatching overview</phrase></textobject><imageobject>
<imagedata fileref="smatching-overview.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<variablelist>
<varlistentry>
<term>Part Number</term>
<listitem>
<para>Identifier of a particular product</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Description</term>
<listitem>
<para>Name of a particular product</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Policy</term>
<listitem>
<para>Kind of the subscription of this product</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Matched/Total</term>
<listitem>
<itemizedlist>
<listitem>
<para/>
<formalpara>
<title>Fully Matched</title>
<para>If the total amounts of a subscription are fully matched, the quantity column value is highlighted with a yellow warning triangle: <inlinemediaobject>
<imageobject>
<imagedata fileref="fa-warning.svg"/>
</imageobject>
<textobject role="description"><phrase>Warning</phrase></textobject>
</inlinemediaobject></para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Susbscritions about to Expire</title>
<para>When a subscription will expire within less than 3 months, the record is highlighted.</para>
</formalpara>
</listitem>
<listitem>
<para/>
<formalpara>
<title>Expired Subscriptions</title>
<para>If a subscription is expired, the record for it is faded.</para>
</formalpara>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Start Date</term>
<listitem>
<para>Start date of the subscription</para>
</listitem>
</varlistentry>
<varlistentry>
<term>End Date</term>
<listitem>
<para>End date of the subscription</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="_subscription_matcher_reports"><title>Subscription Matcher Reports</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> automatically generates up-to-date nightly status reports by matching your <phrase>SUSE</phrase> subscriptions with all your registered systems.
These reports are stored in <filename>/var/lib/spacewalk/subscription-matcher</filename> and provided in CSV format.
These CSV files may be opened with a spreadsheet application such as LibreOffice Calc.</para>
<para>If you want to schedule these reports to be produced at different times, or at a certain frequency or schedule a one time completion you can perform this task by editing the Taskomatic settings for the gatherer-matcher located in the Web UI at <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu> <guimenu>Task Schedules</guimenu> <guimenu>gatherer-matcher-default</guimenu></menuchoice>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>audit subscription matching gatherer matcher default</phrase></textobject><imageobject>
<imagedata fileref="audit_subscription_matching_gatherer_matcher_default.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.audit.submatch.unmatched.systems"><title>Main Menu+Audit+Subscription Matching+Unmatched Products</title><para>Selecting the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Subscription Matching</guimenu> <guimenu>Unmatched Products</guimenu></menuchoice> tab provides an overview of all systems the matcher could not find in the database or which were not registered with <phrase><phrase>SUSE</phrase> Manager</phrase>.
The <literal role="guimenu">Unmatched Products</literal> overview contains product names and the number of systems which remain unmatched with known installed products.</para>
<figure>
<title>Unmatched Products</title>
<mediaobject><textobject role="description"><phrase>audit subscription matching unmatched products</phrase></textobject><imageobject>
<imagedata fileref="audit_subscription_matching_unmatched_products.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<variablelist>
<varlistentry>
<term>Show System List</term>
<listitem>
<para>Select to open and display a list of all systems which were detected with an installed product but remain unmatched with a subscription.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="ref.webui.audit.submatch.sub.pinning"><title>Main Menu+Audit+Subscription Matching+Pins</title><para>The subscription pinning feature allows a user to instruct the subscription matcher to favor matching a specific subscription with a given system or group of systems.
This is achieved by creating pins.
Each pin contains information about the preferred subscription-system match.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>audit subscription matching pins</phrase></textobject><imageobject>
<imagedata fileref="audit_subscription_matching_pins.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<note>
<title>Respecting Pins</title>
<para>In some cases the algorithm may determine that a specific pin cannot be respected, depending on the subscription’s availability and applicability rules, in this case it will be shown as not satisfied.</para>
</note>
<para>The pins table displays a list of all pins.
Items in the list contain the status of pins, which can be <literal>satisfied</literal>, <literal>not    satisfied</literal> and <literal>pending next run</literal>.</para>
<itemizedlist>
<listitem>
<para>A pin is <literal>satisfied</literal> if its system and subscription was matched in the last matcher run.</para>
</listitem>
<listitem>
<para>A pin is <literal>not satisfied</literal> if its system and subscription was <emphasis>not</emphasis> matched in the last matcher run.
This can happen, for example, if the pin violates terms and conditions for subscriptions.</para>
</listitem>
<listitem>
<para>A pin is in the <literal>pending next run</literal> state when it needs a new matcher run to be taken into account.
After the new run, the pin will become either <literal>satisfied</literal> or <literal>not satisfied</literal>.</para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>sm pins</phrase></textobject><imageobject>
<imagedata fileref="sm-pins.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Click the <guimenu>Add a Pin</guimenu> button to open the <literal role="guimenu">Available Systems</literal> window.
You may filter systems by name and select a system for the matcher to pin manually.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>add pin</phrase></textobject><imageobject>
<imagedata fileref="add-pin.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Within the <guimenu>Subscriptions Available for Selected System</guimenu> window click the <guimenu>Save Pin</guimenu> button to raise priority for subscription use on the selected system.</para>
</sect2>
<sect2 id="ref.webui.audit.submatch.submatch.messages"><title>Main Menu+Audit+Subscription Matching+Messages</title><para>You can review all messages related to <literal role="guimenu">Subscription Matching</literal> from the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Audit</guimenu> <guimenu>Subscription Matching</guimenu> <guimenu>Messages</guimenu></menuchoice> overview.</para>
<para>The following status messages can be displayed.</para>
<variablelist>
<varlistentry>
<term>Unknown Part Number</term>
<listitem>
<para>Unsupported part number detected</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Physical Guest</term>
<listitem>
<para>Physical system is reported as virtual guest, check hardware data</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Guest with Unknown Host</term>
<listitem>
<para>Virtual guest has unknown host, assuming it is a physical system</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Unknown CPU Count</term>
<listitem>
<para>System has an unknown number of sockets, assuming 16.
You can try fixing this by scheduling hardware refresh for affected system.</para>
</listitem>
</varlistentry>
</variablelist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>audit subscription matching messages</phrase></textobject><imageobject>
<imagedata fileref="audit_subscription_matching_messages.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
</sect1>
<sect1 id="ref.webui.audit.openscap"><title>OpenSCAP</title><para>If you click <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Audit</guimenu> <guimenu>OpenSCAP</guimenu> <guimenu>All Scans</guimenu></menuchoice>, an overview of the OpenSCAP Scans appears.
SCAP (Security Content Automation Protocol) is a framework to maintain the security of enterprise systems.
It mainly performs the following tasks:</para>
<itemizedlist>
<listitem>
<para>Automatically verifying the availability of patches</para>
</listitem>
<listitem>
<para>Checking system security configuration settings</para>
</listitem>
<listitem>
<para>Examining systems for signs of compromise</para>
</listitem>
</itemizedlist>
<para>For a description of the Web UI dialogs, see <xref linkend="s2-openscap-suma-pages"/>.</para>
<para>For instructions and tips on how to best use OpenSCAP with <phrase><phrase>SUSE</phrase> Manager</phrase>, refer to <xref linkend="ch-openscap"/>.
To learn more about OpenSCAP, see the project home page at <ulink url="http://open-scap.org">http://open-scap.org</ulink>.</para>
</sect1>
</chapter>
<chapter id="ch-openscap"><title>System Security via OpenSCAP</title><para>The Security Certification and Authorization Package (SCAP) is a standardized compliance checking solution for enterprise-level Linux infrastructures.
It is a line of specifications maintained by the National Institute of Standards and Technology (NIST) for maintaining system security for enterprise systems.</para>
<para><phrase><phrase>SUSE</phrase> Manager</phrase>
uses OpenSCAP to implement the SCAP specifications.
OpenSCAP is an auditing tool that utilizes the Extensible Configuration Checklist Description Format (XCCDF). XCCDF is a standard way of expressing checklist content and defines security checklists.
It also combines with other specifications such as Common Platform Enumeration (CPE), Common Configuration Enumeration (CCE), and Open Vulnerability and Assessment Language (OVAL), to create a SCAP-expressed checklist that can be processed by SCAP-validated products.</para>
<sect1 id="s1-openscap-features"><title>OpenSCAP Features</title><para>OpenSCAP verifies the presence of patches by using content produced by the SUSE Security Team (<ulink url="https://www.suse.com/support/security/">https://www.suse.com/support/security/</ulink>), checks system security configuration settings and examines systems for signs of compromise by using rules based on standards and specifications.</para>
<para>To effectively use OpenSCAP, the following must be available:</para>
<variablelist>
<varlistentry>
<term>A tool to verify a system confirms to a standard</term>
<listitem>
<para><phrase><phrase>SUSE</phrase> Manager</phrase>
uses OpenSCAP as an auditing feature.
It allows you to schedule and view compliance scans for any system.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>SCAP content</term>
<listitem>
<para>SCAP content files defining the test rules can be created from scratch if you understand at least XCCDF or OVAL.
XCCDF content is also frequently published online under open source licenses and this content can be customized to suit your needs.</para>
<para>The <literal role="systemitem">openscap-content</literal>
package provides default content guidance for systems via a template.</para>
</listitem>
</varlistentry>
</variablelist>
<note>
<para><phrase>SUSE</phrase>
supports the use of templates to evaluate your systems.
However, you are creating custom content at your own risk.</para>
</note>
<para>SCAP was created to provide a standardized approach to maintaining system security, and the standards that are used will therefore continually change to meet the needs of the community and enterprise businesses.
New specifications are governed by NIST’s SCAP Release cycle in order to provide a consistent and repeatable revision work flow.
For more information, see <ulink url="http://scap.nist.gov/timeline.html">http://scap.nist.gov/timeline.html</ulink>.</para>
</sect1>
<sect1 id="s1-openscap-suma-prerq"><title>Prerequisites for Using OpenSCAP in SUSE Manager</title><para>The following sections describe the server and client prerequisites for using OpenSCAP.</para>
<variablelist>
<varlistentry>
<term>Package Requirements</term>
<listitem>
<para>As Server: <phrase><phrase>SUSE</phrase> Manager</phrase>
1.7 or later.</para>
<para>For the Client: <literal role="systemitem">spacewalk-oscap</literal>
package (available from the <phrase><phrase>SUSE</phrase> Manager</phrase>
Tools Child Channel).</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Other Requirements</term>
<listitem>
<para>Client: Distribution of the XCCDF content to all client machines.</para>
</listitem>
</varlistentry>
</variablelist>
<note>
<title>OpenSCAP Auditing Availability</title>
<para>OpenSCAP auditing is not available on Salt SSH minions.</para>
</note>
<para>You can distribute XCCDF content to client machines using any of the following methods:</para>
<itemizedlist>
<listitem>
<para>Traditional Methods (CD, USB, NFS, scp, ftp)</para>
</listitem>
<listitem>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> Scripts</para>
</listitem>
<listitem>
<para>RPMs</para>
</listitem>
</itemizedlist>
<para>Custom RPMs are the recommended way to distribute SCAP content to other machines.
RPM packages can be signed and verified to ensure their integrity.
Installation, removal, and verification of RPM packages can be managed from the user interface.</para>
</sect1>
<sect1 id="s2-openscap-suma-audit-scans"><title>Performing Audit Scans</title><para>OpenSCAP integration in <phrase><phrase>SUSE</phrase> Manager</phrase>
provides the ability to perform audit scans on client systems.
This section describes the available scanning methods.</para>
<important>
<title>OpenSCAP Scans via Salt ssh-push Minions</title>
<para>Currently performing an OpenSCAP scan is disabled in the WebUI for Salt ssh-push minions.
This functionality will be adapted and enabled in a future release.</para>
</important>
<orderedlist id="pro-os-suma-audit-scans-webui" numeration="arabic">
<title>Procedure: Scans via the Web Interface</title>
<listitem>
<para>To perform a scan via the Web interface, log in to <phrase><phrase>SUSE</phrase> Manager</phrase> .</para>
</listitem>
<listitem>
<para>Click on <guimenu>Systems</guimenu> and select the target system.</para>
</listitem>
<listitem>
<para>Click on <menuchoice><guimenu>Audit</guimenu> <guimenu>Schedule</guimenu></menuchoice> .</para>
</listitem>
<listitem>
<para>Fill in the Schedule New XCCDF Scan form. See <xref linkend="sm-audit-schedule"/> for more information about the fields on this page.</para>
<warning>
<para>The XCCDF content is validated before it is run on the remote system.
Specifying invalid arguments can make spacewalk-oscap fail to validate or run.
Due to security concerns the <command>oscap xccdf eval</command> command only accepts a limited set of parameters.</para>
</warning>
<para>Run the <command>mgr_check</command> command to ensure the action is being picked up by the client system.</para>
<screen>mgr_check -vv</screen>
<note>
<para>If the <phrase><phrase>SUSE</phrase> Manager</phrase>
daemon (<command>rhnsd</command>) or <command>osad</command> are running on the client system, the action will be picked up by these services.
To check if they are running, use:</para>
</note>
</listitem>
</orderedlist>
<screen>service rhnsd start</screen>
<para>or</para>
<screen>service osad start</screen>
<para>+</para>
<para>To view the results of the scan, refer to <xref linkend="s2-openscap-suma-audit-scans_view"/>.</para>
<figure>
<title>Scheduling a Scan via the Web Interface</title>
<mediaobject><textobject role="description"><phrase>audit openscap schedule scan</phrase></textobject><imageobject>
<imagedata fileref="audit_openscap_schedule_scan.png" width="333%"/>
</imageobject></mediaobject>
</figure>
<orderedlist numeration="arabic">
<title>Procedure: Scans via API</title>
<listitem>
<para>To perform an audit scan via API, choose an existing script or create a script for scheduling a system scan through <literal>system.scap.scheduleXccdfScan</literal>, the front end API, for example:</para>
<screen>#!/usr/bin/python
client = xmlrpclib.Server('https://spacewalk.example.com/rpc/api')
key = client.auth.login('username', 'password')
client.system.scap.scheduleXccdfScan(key, 1000010001,
    '/usr/local/share/scap/usgcb-sled11desktop-xccdf.xml',
    '--profile united_states_government_configuration_baseline')</screen>
<para>Where:
<emphasis role="strong"> <literal>1000010001</literal> is the system ID (sid).
</emphasis> <filename>/usr/local/share/scap/usgcb-sled11desktop-xccdf.xml</filename> is the path to the content location on the client system. In this case, it assumes USGCB content in the <filename>/usr/local/share/scap</filename> directory.
** <option>--profile united_states_government_configuration_baseline</option> is an additional argument for the <command>oscap</command> command. In this case, it is using the USGCB.</para>
</listitem>
<listitem>
<para>Run the script on the command-line interface of any system. The system needs the appropriate Python and XML-RPC libraries installed.</para>
</listitem>
<listitem>
<para>Run the <command>mgr_check</command> command to ensure that the action is being picked up by the client system.</para>
<screen>mgr_check -vv</screen>
<para>If the <phrase><phrase>SUSE</phrase> Manager</phrase>
daemon (<command>rhnsd</command>) or <command>osad</command> are running on the client system, the action will be picked up by these services.
To check if they are running, use:</para>
<screen>service rhnsd start</screen>
<para>or</para>
<screen>service osad start</screen>
</listitem>
</orderedlist>
<note>
<title>Enabling Upload of Detailed SCAP Files</title>
<para>To make sure detailed information about the scan will be available, activate the upload of detailed SCAP files on the clients to be evaluated.
On the <guimenu>Admin</guimenu>
 page, click on <guimenu>Organization</guimenu>
 and select one.
Click on the <guimenu>Configuration</guimenu>
 tab and check <guimenu>Enable Upload Of Detailed SCAP Files</guimenu>
.
This feature generates an additional HTML version when you run a scan.
The results will show an extra line like: <literal>Detailed Results: xccdf-report.html xccdf-results.xml
     scap-yast2sec-oval.xml.result.xml</literal>.</para>
</note>
</sect1>
<sect1 id="s2-openscap-suma-audit-scans_view"><title>Viewing SCAP Results</title><para>There are three methods of viewing the results of finished scans:</para>
<itemizedlist>
<listitem>
<para>Via the Web interface. Once the scan has finished, the results should show up on the <guimenu>Audit</guimenu> tab of a specific system. This page is discussed in <xref linkend="s2-openscap-suma-pages"/>.</para>
</listitem>
<listitem>
<para>Via the API functions in handler <literal>system.scap</literal>.</para>
</listitem>
<listitem>
<para>Via the <command>spacewalk-report</command> command as follows:</para>
<screen>spacewalk-report system-history-scap
spacewalk-report scap-scan
spacewalk-report scap-scan-results</screen>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="s2-openscap-suma-pages"><title>OpenSCAP SUSE Manager Web Interface</title><para>The following sections describe the tabs in the <phrase><phrase>SUSE</phrase> Manager</phrase>
Web interface that provide access to OpenSCAP and its features.</para>
<sect2 id="_openscap_scans_page"><title>OpenSCAP Scans Page</title><para>Click the <guimenu>Audit</guimenu>
 tab on the top navigation bar, then OpenSCAP on the left.
Here you can view, search for, and compare completed OpenSCAP scans.</para>
<sect3 id="_guimenu_openscap_guimenu_guimenu_all_scans_guimenu"><title>OpenSCAP &gt; All Scans</title><para><guimenu>All Scans</guimenu>
 is the default page that appears on the <menuchoice><guimenu>Audit</guimenu> <guimenu>OpenSCAP</guimenu></menuchoice>
 page.
Here you see all the completed OpenSCAP scans you have permission to view.
Permissions for scans are derived from system permissions.</para>
<para>For each scan, the following information is displayed:</para>
<variablelist>
<varlistentry>
<term>System</term>
<listitem>
<para>the scanned system.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>XCCDF Profile</term>
<listitem>
<para>the evaluated profile.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Completed</term>
<listitem>
<para>time of completion.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Satisfied</term>
<listitem>
<para>number of rules satisfied.
A rule is considered to be satisfied if the result of the evaluation is either Pass or Fixed.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Dissatisfied</term>
<listitem>
<para>number of rules that were not satisfied.
A rule is considered Dissatisfied if the result of the evaluation is a Fail.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Unknown</term>
<listitem>
<para>number of rules which failed to evaluate.
A rule is considered to be Unknown if the result of the evaluation is an Error, Unknown or Not Checked.</para>
</listitem>
</varlistentry>
</variablelist>
<para>The evaluation of XCCDF rules may also return status results like <literal>Informational</literal>, <literal>Not Applicable</literal>, or not <literal>Selected</literal>.
In such cases, the given rule is not included in the statistics on this page.
See <menuchoice><guimenu>System Details</guimenu> <guimenu>Audit</guimenu></menuchoice>
 for information on these types of results.</para>
</sect3>
<sect3 id="_guimenu_openscap_guimenu_guimenu_xccdf_diff_guimenu"><title>OpenSCAP &gt; XCCDF Diff</title><para>XCCDF Diff is an application that visualizes the comparison of two XCCDF scans.
It shows metadata for two scans as well as the lists of results.</para>
<para>Click the appropriate icon on the Scans page to access the diff output of similar scans.
Alternatively, specify the ID of scans you want to compare.</para>
<para>Items that show up in only one of the compared scans are considered to be "varying". Varying items are always highlighted in beige.
There are three possible comparison modes:</para>
<variablelist>
<varlistentry>
<term>Full Comparison</term>
<listitem>
<para>all the scanned items.</para>
<variablelist>
<varlistentry>
<term>Only Changed Items</term>
<listitem>
<para>items that have changed.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Only Invariant</term>
<listitem>
<para>unchanged or similar items.</para>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
</sect3>
<sect3 id="_guimenu_openscap_guimenu_guimenu_advanced_search_guimenu"><title>OpenSCAP &gt; Advanced Search</title><para>Use the Advanced Search page to search through your scans according to specified criteria including:</para>
<itemizedlist>
<listitem>
<para>rule results,</para>
</listitem>
<listitem>
<para>targeted machine,</para>
</listitem>
<listitem>
<para>time frame of the scan.</para>
</listitem>
</itemizedlist>
<figure>
<title>OpenSCAP Advanced Search</title>
<mediaobject><textobject role="description"><phrase>audit openscap advanced search</phrase></textobject><imageobject>
<imagedata fileref="audit_openscap_advanced_search.png" width="333%"/>
</imageobject></mediaobject>
</figure>
<para>The search either returns a list of results or a list of scans, which are included in the results.</para>
</sect3>
</sect2>
<sect2 id="sm-audit-page"><title>Systems Audit Page</title><para>To display a system’s audit page, click <menuchoice><guimenu>Systems</guimenu> <guimenu>system_name</guimenu> <guimenu>Audit</guimenu></menuchoice>
.
Use this page to schedule and view compliance scans for a particular system.
Scans are performed by the OpenSCAP tool, which implements NIST’s standard Security Content Automation Protocol (SCAP). Before you scan a system, make sure that the SCAP content is prepared and all prerequisites in <xref linkend="s1-openscap-suma-prerq"/> are met.</para>
<sect3 id="_list_scans"><title>List Scans</title><para>This subtab lists a summary of all scans completed on the system.
The following columns are displayed:</para>
<variablelist>
<varlistentry>
<term>XCCDF Test Result</term>
<listitem>
<para>The scan test result name, which provides a link to the detailed results of the scan.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Completed</term>
<listitem>
<para>The exact time the scan finished.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Compliance</term>
<listitem>
<para>The unweighted pass/fail ratio of compliance based on the Standard used.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>P</term>
<listitem>
<para>Number of checks that passed.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>F</term>
<listitem>
<para>Number of checks that failed.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>E</term>
<listitem>
<para>Number of errors that occurred during the scan.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>U</term>
<listitem>
<para>Unknown.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>N</term>
<listitem>
<para>Not applicable to the machine.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>K</term>
<listitem>
<para>Not checked.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>S</term>
<listitem>
<para>Not Selected.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>I</term>
<listitem>
<para>Informational.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>X</term>
<listitem>
<para>Fixed.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Total</term>
<listitem>
<para>Total number of checks.</para>
</listitem>
</varlistentry>
</variablelist>
<para>Each entry starts with an icon indicating the results of a comparison to a previous similar scan.
The icons indicate the following:</para>
<itemizedlist>
<listitem>
<para>"RHN List Checked" Icon — no difference between the compared scans.</para>
</listitem>
<listitem>
<para>"RHN List Alert" Icon — arbitrary differences between the compared scans.</para>
</listitem>
<listitem>
<para>"RHN List Error" Icon — major differences between the compared scans. Either there are more failures than the previous scan or less passes</para>
</listitem>
<listitem>
<para>"RHN List Check In" Icon — no comparable scan was found, therefore, no comparison was made.</para>
</listitem>
</itemizedlist>
<para>To find out what has changed between two scans in more detail, select the ones you are interested in and click <guimenu>Compare Selected Scans</guimenu>
.
To delete scans that are no longer relevant, select those and click on <guimenu>Remove Selected Scans</guimenu>
.
Scan results can also be downloaded in CSV format.</para>
</sect3>
<sect3 id="_scan_details"><title>Scan Details</title><para>The Scan Details page contains the results of a single scan.
The page is divided into two sections:</para>
<variablelist>
<varlistentry>
<term>Details of the XCCDF Scan</term>
<listitem>
<para>This section displays various details about the scan, including:</para>
<itemizedlist>
<listitem>
<para>File System Path: the path to the XCCDF file used for the scan.</para>
</listitem>
<listitem>
<para>Command-line Arguments: any additional command-line arguments that were used.</para>
</listitem>
<listitem>
<para>Profile Identifier: the profile identifier used for the scan.</para>
</listitem>
<listitem>
<para>Profile Title: the title of the profile used for the scan.</para>
</listitem>
<listitem>
<para>Scan’s Error output: any errors encountered during the scan.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>XCCDF Rule Results</term>
<listitem>
<para>The rule results provide the full list of XCCDF rule identifiers, identifying tags, and the result for each of these rule checks.
This list can be filtered by a specific result.</para>
</listitem>
</varlistentry>
</variablelist>
</sect3>
<sect3 id="sm-audit-schedule"><title>Schedule Page</title><para>Use the Schedule New XCCDF Scan page to schedule new scans for specific machines.
Scans occur at the system’s next scheduled check-in that occurs after the date and time specified.
The following fields can be configured:</para>
<variablelist>
<varlistentry>
<term>Command-line Arguments</term>
<listitem>
<para>Optional arguments to the <command>oscap</command> command, either:</para>
<itemizedlist>
<listitem>
<para><literal>--profile PROFILE</literal>: Specifies a particular profile from the XCCDF document.</para>
<para>Profiles are determined by the Profile tag in the XCCDF XML file.
Use the <command>oscap</command> command to see a list of profiles within a given XCCDF file, for example:</para>
<screen># oscap info /usr/local/share/scap/dist_sles12_scap-sles12-oval.xml
Document type: XCCDF Checklist
Checklist version: 1.1
Status: draft
Generated: 2015-12-12
Imported: 2016-02-15T22:09:33
Resolved: false
Profiles: SLES12-Default</screen>
<para>If not specified, the default profile is used.
Some early versions of OpenSCAP in require that you use the <literal>--profile</literal> option or the scan will fail.</para>
</listitem>
<listitem>
<para><literal>--skip-valid</literal>: Do not validate input and output files. You can use this option to bypass the file validation process if you do not have well-formed XCCDF content.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Path to XCCDF Document</term>
<listitem>
<para>This is a required field.
The path parameter points to the XCCDF content location on the client system.
For example: <filename>/usr/local/share/scap/dist_sles12_scap-sles12-oval.xml</filename></para>
<warning>
<para>The XCCDF content is validated before it is run on the remote system.
Specifying invalid arguments can cause <command>spacewalk-oscap</command> to fail to validate or run.
Due to security concerns, the <command>oscap xccdf eval</command> command only accepts a limited set of parameters.</para>
</warning>
</listitem>
</varlistentry>
</variablelist>
<para>For information about how to schedule scans using the Web UI
, refer to <xref linkend="pro-os-suma-audit-scans-webui"/>.</para>
</sect3>
</sect2>
</sect1>
</chapter>
<chapter id="ref.webui.config"><title>Configuration</title><para>Only Configuration Administrators or <phrase><phrase>SUSE</phrase> Manager</phrase> Administrators see the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Configuration</guimenu></menuchoice> pages.</para>
<para>On this configuration pages, manage systems with configuration files, channels offering configuration files, and configartion files themselves.
Centrally-managed files are available to multiple systems; locally-managed files are available to individual systems only.</para>
<note>
<title>Differences of System Types</title>
<para>Configuration Managment is available for both client system types, traditionally managed clients ([Management]) and Salt minions ([Salt]).
Some traditional features are not suitable for Salt minions, and thus not available and excluded from the Web UI.</para>
</note>
<sect1 id="_configuration_management_for_salt"><title>Configuration Management for Salt</title><para>Configuration Management is now enabled for Salt.
The following matrix provides both supported and unsupported configuration management features.</para>
<important>
<title>Missing Web UI Options</title>
<para>Several Web UI tabs will be missing for Salt Configuration Management.
These features are not suitable for Salt minions.</para>
</important>
<table frame="all" rowsep="1" colsep="1">
<title>Salt Configuration Management</title>
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry><para>Configuration Management Features</para></entry>
<entry><para>Salt Support Status</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>Global Configuration Channels</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Deploying Files</para></entry>
<entry><para>Supported</para></entry>
</row>
<row>
<entry><para>Comparing Files</para></entry>
<entry><para>Supported (but the logic is currently inverted)</para></entry>
</row>
<row>
<entry><para>Locally Managed Files</para></entry>
<entry><para>Unsupported</para></entry>
</row>
<row>
<entry><para>Sandbox Files</para></entry>
<entry><para>Unsupported</para></entry>
</row>
<row>
<entry><para>Applying the Highstate</para></entry>
<entry><para>Apply the highstate and configuration channels will be deployed to all subscribed systems.</para></entry>
</row>
<row>
<entry><para>File Import from a Client</para></entry>
<entry><para>Unsupported</para></entry>
</row>
<row>
<entry><para>Configuration Macros</para></entry>
<entry><para>Unsupported</para></entry>
</row>
</tbody>
</tgroup>
</table>
</sect1>
<sect1 id="ref.webui.config.preparing"><title>Preparing Systems for Configuration Management [Management]</title><para>To manage a traditional client’s configuration with <phrase><phrase>SUSE</phrase> Manager</phrase>, it must have the appropriate tools and the <filename>config-enable</filename> file installed.
These tools will be available if you installed the system with the configuration management functionality using AutoYaST or Kickstart.
If not, they can be found in the Tools child channel for your distribution.
Download and install the latest <filename>rhncfg*</filename> packages:</para>
<itemizedlist>
<listitem>
<para><filename>rhncfg</filename> — the base libraries and functions needed by all <filename>rhncfg-*</filename> packages,</para>
</listitem>
<listitem>
<para><filename>rhncfg-actions</filename> — the RPM package required to run configuration actions scheduled via <phrase><phrase>SUSE</phrase> Manager</phrase>,</para>
</listitem>
<listitem>
<para><filename>rhncfg-client</filename> — the RPM package with a command line interface to the client features of the Configuration Management system,</para>
</listitem>
<listitem>
<para><filename>rhncfg-management</filename> — the RPM package with a command line interface used to manage <phrase><phrase>SUSE</phrase> Manager</phrase> configuration.</para>
</listitem>
</itemizedlist>
<para>Installation of these packages can also be accomplished during bootstrapping if you enable <literal role="guimenu">Configuration File Deployment</literal> on the <literal role="guimenu">Details</literal> page of the activation key after creating that activation key.
For more information about activation keys, see
<xref linkend="s3-sm-system-keys-manage"/>.</para>
</sect1>
<sect1 id="ref.webui.config.overview"><title>Overview</title><para>The <literal role="guimenu">Configuration Overview</literal> page shows all of the configuration files that are managed by your organization in <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>configuration overview</phrase></textobject><imageobject>
<imagedata fileref="configuration_overview.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>This list includes files that are managed centrally in configuration channels and files that are managed locally via individual system profiles.</para>
<variablelist>
<varlistentry>
<term>Configuration Summary</term>
<listitem>
<para>The panel provides quick information about your configuration files.
Click the blue text to the right to display relevant systems, channel details, or configuration files.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Configuration Actions</term>
<listitem>
<para><literal role="guimenu">Configuration Actions</literal> offers direct access to the most common configuration management tasks.
Deploy, compare, or create files on your systems.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Recently Modified Configuration Files</term>
<listitem>
<para>The list shows which files have changed when and to which channel they belong.
If no files have been changed, no list appears.
Click the name of a file to see its <literal role="guimenu">Details</literal> page.
Click the channel name to see its <literal role="guimenu">Channel Details</literal> page.</para>
<para>File types that can appear here:
* <inlinemediaobject>
<imageobject>
<imagedata fileref="spacewalk-icon-software-channels.svg"/>
</imageobject>
<textobject role="description"><phrase>Spacewalk Icon Software Channels</phrase></textobject>
</inlinemediaobject> — Centrally-managed configuration file provided by a global configuration channel.
* <inlinemediaobject>
<imageobject>
<imagedata fileref="fa-desktop.svg"/>
</imageobject>
<textobject role="description"><phrase>FA Desktop</phrase></textobject>
</inlinemediaobject> — [Management] Locally-managed configuration file, maybe overriding a centrally-managed file.
* <inlinemediaobject>
<imageobject>
<imagedata fileref="spacewalk-icon-sandbox.svg"/>
</imageobject>
<textobject role="description"><phrase>Spacewalk Icon Sandbox</phrase></textobject>
</inlinemediaobject> — [Management] Sandbox configuration file.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Recently Scheduled Configuration File Deployments</term>
<listitem>
<para>Each scheduled action is listed along with the status of the action.
Any scheduled configuration task, from enabling configuration management on a system to deploying a specific configuration file, is displayed.
Here you can quickly assess if all tasks have been successfully carried out or fix any problems.
Clicking the blue text displays the <menuchoice><guimenu>System Details</guimenu> <guimenu>Schedule</guimenu></menuchoice> page for the specified system.</para>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="ref.webui.config.channels"><title>Configuration Channels</title><para>As mentioned above, <phrase><phrase>SUSE</phrase> Manager</phrase> manages both central and local configuration channels and files.
Central configuration management allows you to deploy configuration files to multiple systems (both traditional clients ([Management]) and Salt minions ([Salt])).
Local configuration management is available for traditional clients ([Management]) only and allows you to specify overrides or configuration files that are not changed by subscribing the system to a central channel.</para>
<para>A <quote>state channel</quote> is a type of a configuration channel but for Salt minion only.
For a state channel, the <filename>init.sls</filename> file is not auto-generated, the user creates and edits it.
Additionally, state channels can contain arbitrary configuration files that could be referenced from within the <filename>init.sls</filename> file.
Therefore, state channels effectively replace custom states.</para>
<note>
<title>Referencing Configuration Files with Organization ID</title>
<para>You must reference configuration files with the <literal>salt://</literal> prefix, the organization ID, and the channel name.
For example, to reference <filename>/etc/motd</filename> use:</para>
<screen>file.managed:  - source: salt://manager_org_1/`channel_name`/etc/motd</screen>
</note>
<para>Central configuration or state channels must be created via the links on this page.</para>
<para>Click the name of the configuration channel to see the details page for that channel.
If you click the number of files in the channel, you are taken to the <literal role="guimenu">List/Remove Files</literal> page of that channel.
If you click the number of systems subscribed to the configuration channel, you are taken to the <menuchoice><guimenu>Configuration Channel Details</guimenu> <guimenu>Systems</guimenu> <guimenu>Subscribed   Systems</guimenu></menuchoice> page for that channel.</para>
<para>To create a new central configuration channel:</para>
<orderedlist id="proc.config.channels.create.cfgch" numeration="arabic">
<title>Procedure: Creating Central Configuration Channel</title>
<listitem>
<para>Click the <literal role="guimenu">Create Config Channel</literal> link in the upper right corner of this screen.</para>
</listitem>
<listitem>
<para>Enter a name for the channel.</para>
</listitem>
<listitem>
<para>Enter a label for the channel. This field must contain only alphanumeric characters, "-", "_", and ".".</para>
</listitem>
<listitem>
<para>Enter a mandatory description for the channel that allows you to distinguish it from other channels. No character restrictions apply.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Create Config Channel</guimenu> button to create the new channel.</para>
</listitem>
<listitem>
<para>The following page is a subset of the <literal role="guimenu">Channel Details</literal> page and has three tabs: <literal role="guimenu">Overview</literal> , <literal role="guimenu">Add Files</literal> , and <literal role="guimenu">Systems</literal> . The <literal role="guimenu">Channel Details</literal> page is discussed in <xref linkend="config-config-channels-channel-details"/>.</para>
</listitem>
</orderedlist>
<para>To create a new state channel with an <filename>init.sls</filename> file:</para>
<orderedlist id="proc.config.channels.create.statech" numeration="arabic">
<title>Procedure: Creating State Channel [Salt]</title>
<listitem>
<para>Click the <literal role="guimenu">Create State Channel</literal> link in the upper right corner of this screen.</para>
</listitem>
<listitem>
<para>Enter a name for the channel.</para>
</listitem>
<listitem>
<para>Enter a label for the channel. This field must contain only alphanumeric characters, "-", "_", and ".".</para>
</listitem>
<listitem>
<para>Enter a mandatory description for the channel that allows you to distinguish it from other channels. No character restrictions apply.</para>
</listitem>
<listitem>
<para>Enter the <literal role="guimenu">SLS Contents</literal> for the <filename>init.sls</filename> file.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Create Config Channel</guimenu> button to create the new channel.</para>
</listitem>
<listitem>
<para>The following page is a subset of the <literal role="guimenu">Channel Details</literal> page and has four tabs: <literal role="guimenu">Overview</literal>, <literal role="guimenu">List/Remove Files</literal>, <literal role="guimenu">Add Files</literal>, and <literal role="guimenu">Systems</literal>. The <literal role="guimenu">Channel Details</literal> page is discussed in <xref linkend="config-config-channels-channel-details"/>.</para>
</listitem>
</orderedlist>
<sect2 id="config-config-channels-channel-details"><title>Main Menu+Configuration+Configuration Channels+Configuration Channel Details</title><variablelist>
<varlistentry>
<term>Overview</term>
<listitem>
<para>The <literal role="guimenu">Overview</literal> page of the <literal role="guimenu">Configuration Channel Details</literal>
page is divided into several panels.</para>
<variablelist>
<varlistentry>
<term>Channel Information</term>
<listitem>
<para>The panel provides status information for the contents of the channel.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Configuration Actions</term>
<listitem>
<para>The panel provides access to the most common configuration tasks.
For Salt minions, there is a link to edit the <filename>init.sls</filename> file.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Channel Properties [Management]</term>
<listitem>
<para>By clicking the <literal role="guimenu">Edit Properties</literal> link, you can edit the name, label, and description of the channel.</para>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
<varlistentry>
<term>List/Remove Files</term>
<listitem>
<para>This page only appears if there are files in the configuration channel.
You can remove files or copy the latest versions into a set of local overrides or into other central configuration channels.
Check the box next to files you want to manipulate and click the respective action button.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Add Files</term>
<listitem>
<para>The <literal role="guimenu">Add Files</literal> page has three subtabs of its own, which allow you to <literal role="guimenu">Upload</literal>, <literal role="guimenu">Import</literal>, or <literal role="guimenu">Create</literal> configuration files to be included in the channel.</para>
<variablelist>
<varlistentry>
<term>Upload File</term>
<listitem>
<para>To upload a file into the configuration channel, browse for the file on your local system, populate all fields, and click the <guimenu>Upload Configuration File</guimenu> button.
The <literal role="guimenu">Filename/Path</literal> field is the absolute path where the file will be deployed.</para>
<para>You can set the <literal role="guimenu">Ownership</literal> via the <literal role="guimenu">user name</literal> and <literal role="guimenu">group name</literal> and the <literal role="guimenu">Permissions</literal> of the file when it is deployed.</para>
<para>If the client has SELinux enabled, you can configure <literal role="guimenu">SELinux contexts</literal> to enable the required file attributes (such as user, role, and file type).</para>
<para>If the configuration file includes a macro (a variable in a configuration file), enter the symbol that marks the beginning and end of the macro.
For more information on using macros, see <xref linkend="s3-sm-file-macros"/>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Import Files</term>
<listitem>
<para>To import files from other configuration channels, including any locally-managed channels, check the box to the left of any file you want to import.
Then click the <guimenu>Import Configuration File(s)</guimenu> button.</para>
<note>
<para>A sandbox icon (<inlinemediaobject>
<imageobject>
<imagedata fileref="spacewalk-icon-sandbox.svg"/>
</imageobject>
<textobject role="description"><phrase>Spacewalk Icon Sandbox</phrase></textobject>
</inlinemediaobject>) indicates that the listed file is currently located in a local sandbox.
Files in a system’s sandbox are considered experimental and could be unstable.
Use caution when selecting them for a central configuration channel.</para>
</note>
</listitem>
</varlistentry>
<varlistentry>
<term>Create File</term>
<listitem>
<para>Create a configuration file, directory, or symbolic link from scratch to be included in the configuration channel.</para>
</listitem>
</varlistentry>
</variablelist>
<orderedlist numeration="lowerroman">
<title>Procedure: Creating a Configuration File, Directory, or Symbolic Link From Scratch</title>
<listitem>
<para>Choose whether you want to create a text file, directory, or symbolic link in the <literal role="guimenu">File Type</literal> section.</para>
</listitem>
<listitem>
<para>In the <filename>Filename/Path</filename> text box, set the absolute path to where the file should be deployed.</para>
</listitem>
<listitem>
<para>If you are creating a symbolic link, indicate the target file and path in the <literal role="guimenu">Symbolic Link Target Filename/Path</literal> text box.</para>
</listitem>
<listitem>
<para>Enter the <literal role="guimenu">User name</literal> and <literal role="guimenu">Group name</literal> for the file in the <literal role="guimenu">Ownership</literal> section, and the <literal role="guimenu">File Permissions Mode</literal>.</para>
</listitem>
<listitem>
<para>If the client has SELinux enabled, you can configure <literal role="guimenu">SELinux contexts</literal> to enable the required file attributes (such as user, role, and file type).</para>
</listitem>
<listitem>
<para>If the configuration file includes a macro, enter the symbol that marks the beginning and end of the macro.</para>
</listitem>
<listitem>
<para>Then enter the configuration file content in the <literal role="guimenu">File Contents</literal> field, using the script drop-down box to choose the appropriate scripting language.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Create Configuration File</guimenu> button to create the new file.</para>
</listitem>
</orderedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Deploy Files</term>
<listitem>
<para>This page only appears when there are files in the channel and a system is subscribed to the channel.
Deploy all files by clicking the <guimenu>Deploy All Files</guimenu> button or check selected files and click the <guimenu>Deploy Selected Files</guimenu> button.
Select to which systems the file(s) should be applied.
All systems subscribed to this channel are listed.
If you want to apply the file to a different system, subscribe it to the channel first.
To deploy the files, click <guimenu>Confirm &amp; Deploy to Selected Systems</guimenu>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Systems</term>
<listitem>
<para>Manage systems subscribed to the configuration channel via two subtabs:</para>
<variablelist>
<varlistentry>
<term>Subscribed Systems</term>
<listitem>
<para>All systems subscribed to the current channel are displayed.
Click the name of a system to see the <literal role="guimenu">System Details</literal> page.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Target Systems</term>
<listitem>
<para>This subtab displays a list of systems enabled for configuration management but not yet subscribed to the channel.
To add a system to the configuration channel, check the box to the left of the system’s name and click the <guimenu>Subscribe System</guimenu> button.</para>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
</sect2>
</sect1>
<sect1 id="ref.webui.config.files"><title>Configuration Files</title><para>This page allows you to manage your configuration files independently.
Both centrally-managed and locally-managed files can be reached from sub-pages.</para>
<note>
<title>Maximum Size for Configuration Files</title>
<para>By default, the maximum file size for configuration files is 128 KB (131072 bytes). <phrase>SUSE</phrase> supports a configuration file size up to 1 MB; larger values are not guaranteed to work.</para>
</note>
<para>To change the file size limit, edit all the following files on the <phrase><phrase>SUSE</phrase> Manager</phrase> server and edit or add the following variables:</para>
<screen># /usr/share/rhn/config-defaults/rhn_web.conf
web.maximum_config_file_size = 262144

# /usr/share/rhn/config-defaults/rhn_server.conf
maximum_config_file_size = 262144

# /etc/rhn/rhn.conf
web.maximum_config_file_size=262144
server.maximum_config_file_size=262144</screen>
<para>Then restart <literal role="systemitem">spacewalk</literal>:</para>
<screen># spacewalk-service restart</screen>
<sect2 id="configuration-files-central"><title>Main Menu+Configuration+Configuration Files+Centrally-Managed Files</title><para>Centrally-managed files are available to multiple systems.
Changing a file within a centrally-managed channel may result in changes to several systems.
Locally-managed files supersede centrally-managed files.
For more information about locally-managed files, see
<xref linkend="configuration-files-local"/>.</para>
<para>This page lists all files currently stored in your central configuration channel.
Click the <literal role="guimenu">Path</literal> of a file to see its <literal role="guimenu">Details</literal> tab.
Click the name of the <literal role="guimenu">Configuration Channel</literal> to see the channel’s <literal role="guimenu">Overview</literal> tab.
Clicking <literal role="guimenu">Systems Subscribed</literal> shows you all systems currently subscribed to the channel containing that file.
Click <literal role="guimenu">Systems Overriding</literal> to see all systems that have a local (or override) version of the configuration file.
The centrally-managed file will not be deployed to those systems.</para>
</sect2>
<sect2 id="configuration-files-local"><title>Main Menu+Configuration+Configuration Files+Locally-Managed Files [Management]</title><para>Locally-managed configuration files apply to only one system.
They may be files in the system’s sandbox or files that can be deployed to the system at any time.
Local files have higher priority than centrally-managed files.
If a system is subscribed to a configuration channel with a given file and additionally has a locally-managed version of that file, the locally-managed version will be deployed.</para>
<para>The list of all local (override) configuration files for your systems includes the local configuration channels and the sandbox channel for each Provisioning-entitled system.</para>
<para>Click the <literal role="guimenu">Path</literal> of the file to see its <literal role="guimenu">Config File Details</literal>.
Click the name of the system to which it belongs to see its <menuchoice><guimenu>System Details</guimenu> <guimenu>Configuration</guimenu> <guimenu>Overview</guimenu></menuchoice> page.</para>
<sect3 id="s3-sm-file-macros"><title>Including Macros in your Configuration Files</title><para>Being able to store one file and share identical configurations is useful, but what if you have many variations of the same configuration file? What do you do if you have configuration files that differ only in system-specific details, such as host name and MAC address?</para>
<para>Traditional file management would require to upload and distribute each file separately, even if the distinction is nominal and the number of variations is in the hundreds or thousands. <phrase><phrase>SUSE</phrase> Manager</phrase> addresses this by allowing the inclusion of macros, or variables, within the configuration files it manages.
In addition to variables for custom system information, the following standard macros are supported:</para>
<screen>rhn.system.sid
rhn.system.profile_name
rhn.system.description
rhn.system.hostname
rhn.system.ip_address
rhn.system.custom_info(key_name)
rhn.system.net_interface.ip_address(eth_device)
rhn.system.net_interface.netmask(eth_device)
rhn.system.net_interface.broadcast(eth_device)
rhn.system.net_interface.hardware_address(eth_device)
rhn.system.net_interface.driver_module(eth_device)</screen>
<para>To use this powerful feature, either upload or create a configuration file via the <literal role="guimenu">Configuration Channel Details</literal> page.
Then open its <literal role="guimenu">Configuration File Details</literal> page and include the supported macros of your choice.
Ensure that the delimiters used to offset your variables match those set in the <literal role="guimenu">Macro Start Delimiter</literal> and <literal role="guimenu">Macro End Delimiter</literal> fields and do not conflict with other characters in the file.
We recommend that the delimiters be two characters in length and must not contain the percent (<literal>%</literal>) symbol.</para>
<para>For example, you may have a file applicable to all of your servers that differs only in IP address and host name.
Rather than manage a separate configuration file for each server, you may create a single file, such as <filename>server.conf</filename>, with the IP address and host name macros included.</para>
<screen>hostname={| rhn.system.hostname |}
ip_address={| rhn.system.net_interface.ip_address(eth0) |}</screen>
<para>Upon delivery of the file to individual systems, whether through a scheduled action in the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface or at the command line with the <phrase><phrase>SUSE</phrase> Manager</phrase> Configuration Client (<command>mgrcfg-client</command>), the variables will be replaced with the host name and IP address of the system as recorded in <phrase><phrase>SUSE</phrase> Manager</phrase>'s system profile.
In the above example configuration file the deployed version resembles the following:</para>
<screen>hostname=test.example.domain.com
ip_address=177.18.54.7</screen>
<para>To capture custom system information, insert the key label into the custom information macro (<literal>rhn.system.custom_info</literal>). For example, if you developed a key labeled <quote><literal>asset</literal></quote> you can add it to the custom information macro in a configuration file to have the value substituted on any system containing it.
The macro would look like this:</para>
<screen>asset={@ rhn.system.custom_info(asset) @}</screen>
<para>When the file is deployed to a system containing a value for that key, the macro gets translated, resulting in a string similar to the following:</para>
<screen>asset=Example#456</screen>
<para>To include a default value, for example, if one is required to prevent errors, you can append it to the custom information macro, like this:</para>
<screen>asset={@ rhn.system.custom_info(asset) = 'Asset #' @}</screen>
<para>This default is overridden by the value on any system containing it.</para>
<para>Using the <phrase><phrase>SUSE</phrase> Manager</phrase> Configuration Manager (<command>mgrcfg-manager</command>) will not translate or alter files, as this tool is system agnostic. <command>mgrcfg-manager</command> does not depend on system settings.
Binary files cannot be interpolated.</para>
</sect3>
</sect2>
</sect1>
<sect1 id="ref.webui.config.systems"><title>Systems</title><para>This page displays status information about your system in relation to configuration.
There are two sub-pages: <literal role="guimenu">Managed Systems</literal> and <literal role="guimenu">Target Systems</literal>.</para>
<sect2 id="config-systems-managed"><title>Main Menu+Configuration+Systems+Managed Systems</title><para>By default the <literal role="guimenu">Managed Systems</literal> page is displayed.
The listed systems have been fully prepared for configuration file deployment.
The number of locally- and centrally-managed files is displayed.
Clicking the name of a system shows its <menuchoice><guimenu>System Details</guimenu> <guimenu>Configuration</guimenu> <guimenu>Overview</guimenu></menuchoice> page.
Clicking the number of local files takes you to the <menuchoice><guimenu>System Details</guimenu> <guimenu>Configuration</guimenu> <guimenu>View/Modify Files</guimenu> <guimenu>Locally-Managed Files</guimenu></menuchoice> page, where you manage which local (override) files apply to the system.
Clicking the number of centrally-managed files takes you to the <menuchoice><guimenu>System Details</guimenu> <guimenu>Configuration</guimenu> <guimenu>Manage Configuration Channels</guimenu> <guimenu>List/Unsubscribe    from Channels</guimenu></menuchoice> page.
Here you unsubscribe from any channels you want.</para>
</sect2>
<sect2 id="config-systems-target"><title>Main Menu+Configuration+Systems+Target Systems</title><para>Here you see the systems either not prepared for configuration file deployment or not yet subscribed to a configuration channel.
The table has three columns.
The first identifies the system name, the second shows whether the system is prepared for configuration file deployment, and the third lists the steps necessary to prepare the system.
To prepare a system, check the box to the left of the profile name then click the <guimenu>Enable SUSE Manager Configuration Management</guimenu> button.
All of the preparatory steps that can be automatically performed are scheduled by <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<note>
<para>You will need to perform some manual tasks to enable configuration file deployment.
Follow the on-screen instructions provided to assist with each step.</para>
</note>
</sect2>
</sect1>
</chapter>
<chapter id="ref.webui.schedule"><title>Schedule</title><para><guimenu>Schedule</guimenu> helps with managing actions and combining actions to action chains.</para>
<para><guimenu>Schedule</guimenu> is located on the left navigation menu and features pages that enable you to manage the actions carried out on your systems.
An action is a scheduled task to be performed on one or more client systems.
For example, an action can be scheduled to apply all patches to a system.
Actions can also be grouped into action chains to schedule them at the same time in a particular order, for example to reboot a system after deploying patches.</para>
<para><phrase><phrase>SUSE</phrase> Manager</phrase>
keeps track of the following action types:</para>
<itemizedlist>
<listitem>
<para>package alteration (installation, upgrade, and removal),</para>
</listitem>
<listitem>
<para>rollback package actions,</para>
</listitem>
<listitem>
<para>system reboots,</para>
</listitem>
<listitem>
<para>patch application,</para>
</listitem>
<listitem>
<para>configuration file alteration (deploy, upload, and diff),</para>
</listitem>
<listitem>
<para>hardware profile updates,</para>
</listitem>
<listitem>
<para>package list profile updates,</para>
</listitem>
<listitem>
<para>automated installation initiation,</para>
</listitem>
<listitem>
<para>service pack migrations,</para>
</listitem>
<listitem>
<para>remote commands.</para>
</listitem>
</itemizedlist>
<para>Each page in the <guimenu>Schedule</guimenu>
 category represents an action status.</para>
<sect1 id="ref.webui.schedule.pending"><title>Pending Actions</title><para>The <guimenu>Pending Actions</guimenu>
 page appears when clicking <menuchoice><guimenu>Schedule</guimenu> <guimenu>Pending Actions</guimenu></menuchoice>
.
It displays actions not yet started or still in progress.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>schedule pending actions</phrase></textobject><imageobject>
<imagedata fileref="schedule_pending_actions.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>To cancel an action, select the action, and click <guimenu>Cancel Actions</guimenu>
, then <guimenu>Confirm</guimenu>
.</para>
</sect1>
<sect1 id="ref.webui.schedule.fail"><title>Failed Actions</title><para><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>Failed Actions</secondary>
</indexterm>
<indexterm>
<primary>Failed Actions</primary>
</indexterm></para>
<para>Sometimes actions cannot be completed.
If the action returns an error, it is displayed here.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>schedule failed actions</phrase></textobject><imageobject>
<imagedata fileref="schedule_failed_actions.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect1>
<sect1 id="ref.webui.schedule.compl"><title>Completed Actions</title><para>List of actions successfully carried out.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>schedule completed actions</phrase></textobject><imageobject>
<imagedata fileref="schedule_completed_actions.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect1>
<sect1 id="s2-sm-action-arch"><title>Archived Actions</title><para><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>Archived Actions</secondary>
</indexterm>
<indexterm>
<primary>Archived Actions</primary>
</indexterm></para>
<para>If you selected actions to store for review, they are displayed here and can be deleted.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>schedule archived actions</phrase></textobject><imageobject>
<imagedata fileref="schedule_archived_actions.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect1>
<sect1 id="ref.webui.schedule.chains"><title>Action Chains</title><para>You can create action chains—
or grouped actions—
for example, in the <menuchoice><guimenu>Software</guimenu> <guimenu>Packages</guimenu></menuchoice>
 or <menuchoice><guimenu>Software</guimenu> <guimenu>Packages</guimenu></menuchoice>
 subtabs on a system details page (see <xref linkend="s4-sm-system-details-errata"/> or <xref linkend="s4-sm-system-details-packages"/>) or in the <menuchoice><guimenu>Configuration</guimenu> <guimenu>Deploy Files</guimenu></menuchoice>
 subtab on a system details page (see <xref linkend="s5-sdc-configuration-deploy-files"/>).</para>
<para>The following list of actions may be added to an action chain.
These actions are supported on both traditional clients and Salt minions.
Schedulable actions are located under a systems, <guimenu>System Details</guimenu>
 page on the following subtabs.</para>
<itemizedlist>
<title>Chainable Actions</title>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guimenu>Remote Command</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guimenu>Schedule System Reboot</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guimenu>States</guimenu> <guimenu>Highstate</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guimenu>Software</guimenu> <guimenu>Packages</guimenu> <guimenu>List/Remove</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guimenu>Software</guimenu> <guimenu>Packages</guimenu> <guimenu>Install</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guimenu>Software</guimenu> <guimenu>Packages</guimenu> <guimenu>Upgrade</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guimenu>Software</guimenu> <guimenu>Patches</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guimenu>Software</guimenu> <guimenu>Software Channels</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guimenu>Configuration</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Images</guimenu> <guimenu>Build</guimenu></menuchoice></para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>schedule action chains</phrase></textobject><imageobject>
<imagedata fileref="schedule_action_chains.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>In the <guimenu>Action Chain List</guimenu>
 you can click the label to view or edit an <guimenu>Action Chain</guimenu>
.
In the top right corner is the <guimenu>delete action chain</guimenu>
 link.
To add actions to an existing chain, pick up a <quote>chainable</quote>
 action (such as running a remote command) from a system details page (see <xref linkend="s3-sm-system-details"/>.
Then check <guimenu>Add to Action Chain</guimenu>
 and select an action chain from the drop-down box.
Confirm with <guimenu>Schedule</guimenu>
.</para>
<para>To create a new action chain, configure the first action, then select <guimenu>Add to Action Chain</guimenu>
 instead of <guimenu>Schedule no sooner than</guimenu>
.
Click the drop-down box, enter a name, and click <guimenu>Schedule</guimenu>
 to save the chain.
Then proceed to the next action and add it to the new chain.</para>
<para>Action chains can be edited via the <menuchoice><guimenu>Schedule</guimenu> <guimenu>Action Chains</guimenu></menuchoice>
 page.
Click a chain name to see the actions in the order they will be performed.
The following tasks can be carried out here:</para>
<itemizedlist>
<listitem>
<para>Change the order of actions by dragging the respective action to the right position and dropping it.</para>
</listitem>
<listitem>
<para>Delete actions from the chain by clicking the <guimenu>delete action</guimenu> link.</para>
</listitem>
<listitem>
<para>Inspect the list of systems on which an action is run by clicking the <guimenu>+</guimenu> sign.</para>
</listitem>
<listitem>
<para>Delete a single system from an action chain by clicking the <guimenu>delete system</guimenu> link.</para>
</listitem>
<listitem>
<para>Delete the complete action chain with the <guimenu>delete action chain</guimenu> link in the top-left corner.</para>
</listitem>
<listitem>
<para>Change an action chain label by clicking it.</para>
</listitem>
<listitem>
<para>Schedule an action chain for execution on a certain date by clicking the <guimenu>Save and Schedule</guimenu> button.</para>
</listitem>
</itemizedlist>
<note>
<title>Unsaved Changes</title>
<para>If you leave the page without clicking either <guimenu>Save</guimenu>
 or <guimenu>Save and Schedule</guimenu>
 all unsaved changes will be discarded.
In this case, a confirmation dialog will pop up.</para>
</note>
<para>Currently you cannot add an action to an action chain from the <guimenu>Edit</guimenu>
 section of the action chain details page.
When a Chain is scheduled, the actions it contains will be displayed under <guimenu>Schedule</guimenu>
 on the appropriate pages: <guimenu>Pending Actions</guimenu>
, <guimenu>Failed Actions</guimenu>
 or <guimenu>Completed Actions</guimenu>
, depending on the status.
If one action fails on a system no other actions from the same chain will be executed on that systems.
Because of technical limitations it is not possible to reuse Action Chains.</para>
</sect1>
<sect1 id="ref.webui.schedule.list"><title>Actions List</title><para><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>Actions List</secondary>
</indexterm>
<indexterm>
<primary>Actions List</primary>
</indexterm></para>
<para>On each action page, each row in the list represents a single scheduled event or action that might affect multiple systems and involve various packages.
The list contains several columns of information:</para>
<itemizedlist>
<listitem>
<para><guimenu>Filter by Action</guimenu> — Enter a term to filter the listed actions or use the check boxes in this column to select actions. Then either add them to your selection list or archive them by clicking <guimenu>Archive Actions</guimenu> . If you archive a pending action, it is not canceled, but the action item moves from the <guimenu>Pending Actions</guimenu> list to the <guimenu>Archived Actions</guimenu> list.</para>
</listitem>
<listitem>
<para><guimenu>Action</guimenu> — Type of action to perform such as Patches or Package Install. Clicking an action name shows its <guimenu>Action Details</guimenu> page. Refer to <xref linkend="s3-sm-action-details"/> for more information.</para>
</listitem>
<listitem>
<para><guimenu>Scheduled Time</guimenu> — The earliest day and time the action will be performed.</para>
</listitem>
<listitem>
<para><guimenu>Succeeded</guimenu> — Number of systems on which this action was successfully carried out.</para>
</listitem>
<listitem>
<para><guimenu>Failed</guimenu> — Number of systems on which this action has been tried and failed.</para>
</listitem>
<listitem>
<para><guimenu>In Progress</guimenu> — Number of systems on which this action is taking place.</para>
</listitem>
<listitem>
<para><guimenu>Total</guimenu> — Total number of systems on which this action has been scheduled.</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="s3-sm-action-details"><title>Action Details</title><para>If you click the name of an action, the <guimenu>Action Details</guimenu>
 page appears.
This page is split into the following tabs.</para>
<sect2 id="s4-sm-action-details-details"><title>Action Details &gt;  Details</title><para>General information about the action.
This is the first tab you see when you click an action.
It displays the action type, scheduling administrator, earliest execution, and notes.</para>
<note>
<title>Patch Advisory</title>
<para>Clicking the Patch Advisory takes you to the <guimenu>Patch Details</guimenu>
 page.
The Patch Advisory appears only if the action is a patch.
Refer to <xref linkend="s3-sm-errata-details"/> for more information.</para>
</note>
</sect2>
<sect2 id="s4-sm-action-details-completed"><title>Action Details &gt;  Completed Systems</title><para>List of systems on which the action has been successfully performed.
Clicking a system name displays its <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="s3-sm-system-details"/> for more information.</para>
</sect2>
<sect2 id="s4-sm-action-details-progress"><title>Action Details &gt;  In Progress Systems</title><para>List of systems on which the action is now being carried out.
To cancel an action, select the system by marking the appropriate check box and click the <guimenu>Unschedule Action</guimenu>
 button.
Clicking a system name shows its <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="s3-sm-system-details"/> for more information.</para>
</sect2>
<sect2 id="s4-sm-action-details-failed"><title>Action Details &gt;  Failed Systems</title><para>List of systems on which the action has failed.
It can be rescheduled here.
Clicking a system name takes you to its <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="s3-sm-system-details"/> for more information.</para>
</sect2>
<sect2 id="s4-sm-action-details-packagelist"><title>Action Details &gt;  Package List</title><para>List of packages are associated with this action.
The tab appears only if the action is package related (installation, removal, etc.).</para>
</sect2>
</sect1>
</chapter>
<chapter id="ref.webui.users"><title>Users</title><para>Only <phrase><phrase>SUSE</phrase> Manager</phrase> administrators can see <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Users</guimenu></menuchoice>.
With <literal role="guimenu">Users</literal> you can grant and edit permissions for those who administer your system groups.
Click a user name in the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Users</guimenu> <guimenu>User List</guimenu> <guimenu>Active</guimenu></menuchoice> to modify the user.</para>
<para>To add new users to your organization, click the <literal role="guimenu">Create User</literal> link on the top right corner of the page.
On the <literal role="guimenu">Create User</literal> page, fill in the required values for the new user.</para>
<para>Once all fields are completed, click the <guimenu>Create Login</guimenu> button.
{susemgr}  now sends an e-mail to the specified address and takes you back to the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Users</guimenu> <guimenu>User List</guimenu> <guimenu>Active</guimenu></menuchoice> page.
If you want to set permissions and options for the new user, click the name in the list.
The <literal role="guimenu">User Details</literal> page for this user provides several tabs of options.</para>
<para>Refer to <xref linkend="s3-sm-user-active-details"/> for detailed descriptions of each tab.</para>
<sect1 id="ref.webui.users.list"><title>User List</title><para>The <literal role="guimenu">User List</literal> provides three views:</para>
<itemizedlist>
<listitem>
<para>Active user list</para>
</listitem>
<listitem>
<para>Deactivated user list</para>
</listitem>
<listitem>
<para>List all users</para>
</listitem>
</itemizedlist>
<sect2 id="ref.webui.users.list.active"><title>Main Menu+Users+User List+Active</title><para>The active user list shows all active users on your <phrase><phrase>SUSE</phrase> Manager</phrase> and displays basic information about each user: user name, real name, roles, and date of their last sign in.</para>
<para>The active user list shows all active users on your <phrase><phrase>SUSE</phrase> Manager</phrase> and displays basic information about each user: user name, real name, roles, and date of their last sign in.</para>
<para>Each row in the <literal role="guimenu">User List</literal> represents a user within your organization.
There are four columns of information for each user:</para>
<itemizedlist>
<listitem>
<para><literal role="guimenu">Username</literal> — The login name of the user.
Clicking a user name displays the <literal role="guimenu">User Details</literal> page for the user.
Refer to <xref linkend="s3-sm-user-active-details"/> for more information.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Real Name</literal> — The full name of the user (last name, first name).</para>
</listitem>
<listitem>
<para><literal role="guimenu">Roles</literal> — List of the user’s privileges, such as organization administrator, channel administrator and normal user.
Users can have multiple roles.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Last Sign In</literal> — Shows when the user last logged in to <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>users user list</phrase></textobject><imageobject>
<imagedata fileref="users_user_list.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.users.list.deact"><title>Main Menu+Users+User List+Deactivated</title><para>The deactivated user list shows all deactivated users.
You may also reactivate any user listed here.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>users deactivated user list</phrase></textobject><imageobject>
<imagedata fileref="users_deactivated_user_list.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Click the check box to the left of their name and click the <guimenu>Reactivate</guimenu> button then the <guimenu>Confirm</guimenu> button.
Reactivated users retain the permissions and system group associations they had when they were deactivated.
Clicking a user name shows the <literal role="guimenu">User Details</literal> page.</para>
</sect2>
<sect2 id="ref.webui.users.list.all"><title>Main Menu+Users+User List+All</title><para>The <literal role="guimenu">All</literal> page lists all users that belong to your organization.</para>
<para>The <guimenu>All</guimenu> page lists all users that belong to your organization.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>users all users</phrase></textobject><imageobject>
<imagedata fileref="users_all_users.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>In addition to the fields listed in the previous two screens, the table of users includes a <literal role="guimenu">Status</literal> field.
This field indicates whether the user is <literal role="guimenu">Active</literal> or <literal role="guimenu">Deactivated</literal>.
Click a user name to see the <literal role="guimenu">User Details</literal> page.</para>
</sect2>
<sect2 id="s3-sm-user-active-details"><title>User Details</title><para>Clicking a user name on a <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Users</guimenu> <guimenu>User List</guimenu></menuchoice> listing displays the <literal role="guimenu">User Details</literal> page.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>users user list</phrase></textobject><imageobject>
<imagedata fileref="users_user_list.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Here <phrase><phrase>SUSE</phrase> Manager</phrase> administrators manage the permissions and activity of all the users.
Here you can also delete or deactivate users.</para>
<para>Users can be deactivated directly in the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface.
{susemgr} administrators can deactivate or delete users of their organization.
Users can deactivate their own accounts.</para>
<note>
<title>Users with SUSE ManagerAdministrator Role</title>
<para>Users with the <phrase><phrase>SUSE</phrase> Manager</phrase> administrator role cannot be deactivated until that role is removed from their account.</para>
</note>
<para>Deactivated users cannot log in to the <phrase><phrase>SUSE</phrase> Manager</phrase> Web UI or schedule any actions.
Actions scheduled by a user prior to their deactivation remain in the action queue.
Deactivated users can be reactivated by <phrase><phrase>SUSE</phrase> Manager</phrase> administrators.</para>
<warning>
<title>Irreversible Deletion</title>
<para>User deletion is irreversible; exercise it with caution.
Consider deactivating the user first to assess the effect deletion will have on your infrastructure.</para>
</warning>
<para>To deactivate a user:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Click a user name to navigate to the <literal role="guimenu">User Details</literal> tab.</para>
</listitem>
<listitem>
<para>Verify that the user is not a <phrase><phrase>SUSE</phrase> Manager</phrase> administrator.
If they are, uncheck the box to the left of that role and click the <guimenu>Submit</guimenu> button.</para>
</listitem>
<listitem>
<para>Click the <literal role="guimenu">Deactivate User</literal> link in the upper right corner of the dialog.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Deactivate User</guimenu> button to confirm.</para>
</listitem>
</orderedlist>
<para>To delete a user:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Click a user name to navigate to the <literal role="guimenu">User Details</literal> tab.</para>
</listitem>
<listitem>
<para>Verify that the user is not a <phrase><phrase>SUSE</phrase> Manager</phrase> administrator. Uncheck the box to remove the role if necessary.</para>
</listitem>
<listitem>
<para>Click the <literal role="guimenu">Delete User</literal> link in the upper right corner of the dialog.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Delete User</guimenu> button to permanently delete the user.</para>
</listitem>
</orderedlist>
<para>For instructions to deactivate your own account, refer to
<xref linkend="ref.webui.overview.account.deactivate"/>.</para>
<sect3 id="s4-usr-active-details-details"><title>User Details+Details</title><para>The <literal role="guimenu">Details</literal> tab, displays the user name, first name, last name, e-mail address, roles of a user, and other details about the user.
The <guimenu>Details</guimenu> tab, displays the user name, first name, last name, e-mail address, roles of a user, and other details about the user.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>users user details</phrase></textobject><imageobject>
<imagedata fileref="users_user_details.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Edit this information as needed and then confirm with <guimenu>Update</guimenu>.
When changing a user’s password, you will only see asterisks as you type.</para>
<para>To delegate responsibilities within your organization, <phrase><phrase>SUSE</phrase> Manager</phrase> provides several roles with varying degrees of access.
This list describes the permissions of each role and the differences between them:</para>
<itemizedlist>
<listitem>
<para>[guimenu]``User (normal user) — Also known as a <emphasis>System Group User</emphasis>, this is the standard role associated with any newly created user.
This person may be granted access to manage system groups and software channels, if the <phrase><phrase>SUSE</phrase> Manager</phrase> administrator sets the roles accordingly.
The systems must be in system groups for which the user has permissions to manage them. However, all globally subscribable channels may be used by anyone.</para>
</listitem>
<listitem>
<para><literal role="guimenu">SUSE Manager Administrator</literal> — This role allows a user to perform any function available in <phrase><phrase>SUSE</phrase> Manager</phrase> .</para>
</listitem>
</itemizedlist>
<para>As the master account for your organization, the person holding this role can alter the privileges of all other accounts of this organization, and conduct any of the tasks available to the other roles. Like with other roles, multiple <phrase><phrase>SUSE</phrase> Manager</phrase> administrators may exist. Go to <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu> <guimenu>Users</guimenu></menuchoice> and click the check box in the <literal role="guimenu">SUSE Manager Admin</literal> row. For more information, see
<xref linkend="ref.webui.admin.users"/>.</para>
<para>+
A <literal role="guimenu">SUSE Manager Administrator</literal> can create foreign organizations; but a <literal role="guimenu">SUSE Manager Administrator</literal> can only create users for an organization if he is entitled with organization administrator privileges for this organization.
* <literal role="guimenu">Organization Administrator</literal> — This role provides a user with all the permissions other administrators have, namely the activation key, configuration, channel, and system group administrator. A <literal role="guimenu">Organization Administrator</literal> is not entitled to perform actions that belong to the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu></menuchoice> features
(see <xref linkend="ref.webui.admin"/>).
* <literal role="guimenu">Activation Key Administrator</literal> — This role is designed to manage your collection of activation keys. A user assigned to this role can modify and delete any key within your organization.
* <literal role="guimenu">Image Administrator</literal> — This role is designed to manage Image building. Modifiable content includes Image Profiles, Image Builds and Image Stores. A user assigned with this role can modify and delete all content located under the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Images</guimenu></menuchoice>. These changes will be applied across the organization.
* <literal role="guimenu">Configuration Administrator</literal> — This role enables a user to manage the configuration of systems within the organization, using either the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface or tool from the <systemitem class="resource">rhncfg-management</systemitem> package.
* <literal role="guimenu">Channel Administrator</literal> — This role provides a user with full access to all software channels within your organization. This requires the <phrase><phrase>SUSE</phrase> Manager</phrase> synchronization tool (<command>mgr-sync</command> from the <systemitem class="resource">susemanager-tools</systemitem> package). The channel administrator may change the base channels of systems, make channels globally subscribable, and create entirely new channels.
* <literal role="guimenu">System Group Administrator</literal> — This role limits authority to systems or system groups to which access is granted. The System Group Administrator can create new system groups, delete any assigned systems from groups, add systems to groups, and manage user access to groups.</para>
<para>Being a <phrase><phrase>SUSE</phrase> Manager</phrase> administrator enables you to remove administrator rights from other users.
It is possible to remove your own privileges as long as you are not the only <phrase><phrase>SUSE</phrase> Manager</phrase> administrator.</para>
<para>To assign a new role to a user, check the respective box.
{susemgr} administrators are automatically granted administration access to all other roles, signified by grayed-out check boxes.
Click <guimenu>Update</guimenu> to submit your changes.</para>
</sect3>
<sect3 id="s4-usr-active-details-sysg"><title>User Details+System Groups</title><para>This tab displays a list of system groups the user may administer; for more information about system groups, see
<xref linkend="ref.webui.systems.systemgroups"/>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>users details system groups</phrase></textobject><imageobject>
<imagedata fileref="users_details_system_groups.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para><phrase><phrase>SUSE</phrase> Manager</phrase>  administrators can set this user’s access permissions to each system group.
Check or uncheck the box to the left of the system group and click the <guimenu>Update Permissions</guimenu> button to save the changes.</para>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> administrators may select one or more default system groups for a user.
When the user registers a system, it gets assigned to the selected group or groups.
This allows the user to access the newly-registered system immediately.
System groups to which this user has access are preceded by an (*).</para>
</sect3>
<sect3 id="s4-usr-active-details-systems"><title>User Details+Systems</title><para>This tab lists all systems a user can access according to the system groups assigned to the user.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>users details systems</phrase></textobject><imageobject>
<imagedata fileref="users_details_systems.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>To carry out tasks on some of these systems, select the set of systems by checking the boxes to the left and click the <guimenu>Update List</guimenu> button.
Use the <literal role="guimenu">System Set Manager</literal> page to execute actions on those systems.
Clicking the name of a system takes you to its <literal role="guimenu">System Details</literal> page.
Refer to
<xref linkend="s3-sm-system-details"/>.</para>
</sect3>
<sect3 id="s4-usr-active-details-chans"><title>User Details+Channel Permissions</title><para>This tab lists all channels available to your organization.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>users details channel permissions</phrase></textobject><imageobject>
<imagedata fileref="users_details_channel_permissions.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Grant explicit channel subscription permission to a user for each of the channels listed by checking the box to the left of the channel, then click the <guimenu>Update Permissions</guimenu> button.
Permissions granted by a <phrase><phrase>SUSE</phrase> Manager</phrase> administrator or channel administrator have no check box but a check icon like globally subscribable channels.</para>
<sect4 id="s5-sm-user-details-chanperms-subs"><title>User Details+Channel Permissions+Subscription</title><para>Identifies channels to which the user may subscribe systems.</para>
<para>To change these, select or deselect the appropriate check boxes and click the <guimenu>Update Permissions</guimenu> button.
Note that channels subscribable because of the user’s administrator status or the channel’s global settings cannot be altered.
They are identified with a check icon.</para>
</sect4>
<sect4 id="s5-sm-user-details-chanperms-mgmt"><title>User Details+Channel Permissions+Management</title><para>Identifies channels the user may manage.
To change these, select or deselect the appropriate check boxes and click the <guimenu>Update Permissions</guimenu> button.
The permission to manage channels does not enable the user to create new channels.
Note that channels automatically manageable through the user’s admin status cannot be altered.
These channels are identified with a check icon.
Remember, <phrase><phrase>SUSE</phrase> Manager</phrase> administrators and channel administrators can subscribe to or manage any channel.</para>
</sect4>
</sect3>
<sect3 id="s4-usr-active-details-prefs"><title>User Details+Preferences</title><para>Configure the following preference settings for a user.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>users details preferences</phrase></textobject><imageobject>
<imagedata fileref="users_details_preferences.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para><literal role="guimenu">Email Notifications</literal> : Determine whether this user should receive e-mail every time a patch alert is applicable to one or more systems in his or her <phrase><phrase>SUSE</phrase> Manager</phrase> account, and daily summaries of system events.</para>
</listitem>
<listitem>
<para><literal role="guimenu">SUSE Manager List Page Size</literal> : Maximum number of items that appear in a list on a single page.
If the list contains more items than can be displayed on one page, click the <guimenu>Next</guimenu> button to see the next page.
This preference applies to the user’s view of system lists, patch lists, package lists, and so on.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Overview Start Page</literal> : Configure which information to be displayed on the <quote>Overview</quote> page at login.</para>
</listitem>
<listitem>
<para><literal role="guimenu">Time Zone</literal> : Select the time zone from the drop-down box.
Dates and times, like system check-in times, will be displayed according to the selected time zone.</para>
</listitem>
<listitem>
<para><literal role="guimenu">CSV Files</literal> : Select whether to use the default comma or a semicolon as separator in downloadable CSV files.</para>
</listitem>
</itemizedlist>
<para>Change these options to fit your needs, then click the <guimenu>Save Preferences</guimenu> button.</para>
</sect3>
<sect3 id="s4-usr-active-details-addresses"><title>User Details+Addresses</title><para>This tab lists mailing addresses associated with the user’s account.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>users details addresses</phrase></textobject><imageobject>
<imagedata fileref="users_details_addresses.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>If there is no address specified yet, click <guimenu>Fill in this address</guimenu> and fill out the form.
When finished, click <guimenu>Update</guimenu>.
To modify this information, click the <guimenu>Edit this address</guimenu> button, change the relevant information, and click the <guimenu>Update</guimenu> button.</para>
</sect3>
</sect2>
</sect1>
<sect1 id="ref.webui.users.sgc"><title>System Group Configuration</title><para>System Groups help when diferrent users shall administer different groups of systems within one organization.</para>
<sect2 id="ref.webui.users.sgc.cfg"><title>Main Menu+Users+System Group Configuration+Configuration</title><para>Enable <literal role="guimenu">Create a user default System Group</literal> and confirm with <guimenu>Update</guimenu>.</para>
<para>Assign such a group to systems via the <menuchoice><guimenu>System Details</guimenu> <guimenu>Groups</guimenu> <guimenu>Join</guimenu></menuchoice> subtab.
For more information, see
<xref linkend="s5-sm-system-details-groups-join"/>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>users system group config</phrase></textobject><imageobject>
<imagedata fileref="users_system_group_config.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="ref.webui.users.sgc.extauth"><title>Main Menu+Users+System Group Configuration+External Authentication</title><para>Allows to create an external group with the <literal role="guimenu">Create External Group</literal> link.</para>
<para>Users can join such groups via the <literal role="guimenu">System Groups</literal> of the user details page, then check the wanted <literal role="guimenu">Group</literal>, and confirm with <guimenu>Update Permissions</guimenu>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>users system group config external auth</phrase></textobject><imageobject>
<imagedata fileref="users_system_group_config_external_auth.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>For more information, see <xref linkend="s4-usr-active-details-sysg"/>.</para>
</sect2>
</sect1>
</chapter>
<chapter id="ref.webui.admin"><title>Admin</title><para>The <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu></menuchoice> pages allows <phrase><phrase>SUSE</phrase> Manager</phrase> customers to manage the basic configuration, including creating and managing multiple organizations.
Only the <phrase><phrase>SUSE</phrase> Manager</phrase> administrator can access the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu></menuchoice> pages.</para>
<sect1 id="ref.webui.admin.wizard"><title>Main Menu+Admin+Setup Wizard</title><para>Setting up <phrase><phrase>SUSE</phrase> Manager</phrase> typically requires some extra steps after installation for common configuration tasks.</para>
<para>The <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu> <guimenu>Setup Wizard</guimenu></menuchoice> link is displayed when the <phrase><phrase>SUSE</phrase> Manager</phrase> Web UI is used for the fist time and can be accessed later at any time by clicking <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu> <guimenu>Setup Wizard</guimenu></menuchoice>.
On the three tabs configure the HTTP proxy server, organization credentials, and <phrase>SUSE</phrase> products.</para>
<variablelist>
<varlistentry>
<term><guimenu>HTTP Proxy:</guimenu></term>
<listitem>
<para>If needed configure a proxy server that <phrase><phrase>SUSE</phrase> Manager</phrase> will use to access SCC (<phrase>SUSE</phrase> Customer Center) and other remote servers here.
Use <literal>hostname:port</literal> syntax in the <menuchoice><guimenu>HTTP Proxy</guimenu> <guimenu>HTTP Proxy Hostname:</guimenu></menuchoice> field if the proxy port is not 8080.
Clearing the fields disables proxy.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin proxy settings</phrase></textobject><imageobject>
<imagedata fileref="admin_proxy_settings.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Organization Credentials:</guimenu></term>
<listitem>
<para>Select <menuchoice><guimenu>Admin</guimenu> <guimenu>Setup Wizard</guimenu> <guimenu>Organization Credentials</guimenu> <guimenu>Add a new credential</guimenu></menuchoice> then enter user name and password to give another organization/user access to <phrase>SUSE Customer Center</phrase>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin organization credentials</phrase></textobject><imageobject>
<imagedata fileref="admin_organization_credentials.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>After saving, a new credential card will be displayed.
Buttons below the credential card allow you to:</para>
<itemizedlist>
<listitem>
<para>Check credential validation status (green tick or red cross icon).
To re-check the credential with SCC, click the icon.</para>
</listitem>
<listitem>
<para>Set the primary credentials for inter-server synchronization (yellow star icon).</para>
</listitem>
<listitem>
<para>List the subscriptions related to a certain credential (list icon).</para>
</listitem>
<listitem>
<para>Edit the credential (pencil icon).</para>
</listitem>
<listitem>
<para>Delete the credential (trash can icon).</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
</variablelist>
<variablelist id="vle.webui.admin.wizard.products">
<varlistentry>
<term><menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu> <guimenu>SUSE Products</guimenu></menuchoice></term>
<listitem>
<para>On the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu> <guimenu>SUSE Products</guimenu></menuchoice> page, select product-specific channels you are entitled to.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin suse products</phrase></textobject><imageobject>
<imagedata fileref="admin_suse_products.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>The products displayed are directly linked to your organization credentials and your <phrase>SUSE</phrase> subscriptions.
Product extension and module lists are shown when you click the <guimenu>arrow</guimenu> to the left of the product description.
This is a cascading mechanism and allows to unfold several levels according to the integration of the extensions and modules in the base product.</para>
<para>Products based on SUSE Linux Enterprise 15 or higher have a toggle button named <guimenu>include recommended</guimenu>.
When the toogle button is enabled on a base product, recommended extensions and modules are automatically selected for synchronization.
Once the <guimenu>include recommended</guimenu> button is enabled, you may uncheck product child channels you are not interested in syncing.
Recommended channels are labeled accordingly.
You cannot disable required channels.</para>
<para>If you click the <guimenu>Channels</guimenu> icon in a row of a product, a popup lists the underlying channels (repositories) that build the product.</para>
<para>In the row above the product listing two filter options are available:</para>
<itemizedlist>
<listitem>
<para>Search by the product description. The filter limits the search to base products.</para>
</listitem>
<listitem>
<para>Filter by architecture.
Click in the search field (or press <keycap>Enter</keycap> ) and then select from drop-down menu.
You can repeat this as often as necessary.
To remove an architecture either click the <quote>x</quote> symbol (or press <keycap>Backspace</keycap> ).</para>
<para>Once you have made your selection(s), click <guimenu>Add products</guimenu> in the upper right area.
This is equivalent to running <command>mgr-sync add products</command> or <command>mgr-sync</command> without any arguments.</para>
<para>View the synchronization progress in the status bar field to the right.</para>
<note>
<title>Synchronization Time</title>
<para>Channel synchronization will start and might take several hours.
When finished the corresponding channels can be used in <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
</note>
<important>
<title>If Synchronization Fails</title>
<para>SUSE does not automatically trust 3rd party GPG keys.
If a reposync fails check if an untrusted GPG key is the cause by viewing the log files located in:</para>
<screen>/var/log/rhn/reposync</screen>
<para>Look for lines similar to the following:</para>
<screen>['/usr/bin/spacewalk-repo-sync', '--channel', 'sle-12-sp1-ga-desktop-
nvidia-driver-x86_64', '--type', 'yum', '--non-interactive']
ChannelException: The GPG key for this repository is not part of the keyring.
Please run spacewalk-repo-sync in interactive mode to import it.</screen>
</important>
<important>
<para>Alternatively, you can add listed channels immediately by clicking the <guimenu>Add this product</guimenu> button in the status column.
A progress bar will be displayed.
The main product will expand, and then you may select add-on products belonging to the product that is currently added.
To overview required channels, select the list icon in the <menuchoice><guimenu>SUSE Products</guimenu> <guimenu>Channels</guimenu></menuchoice> column.
Once a product has finished downloading, the status bar state will change from a filled percentage value to <menuchoice><guimenu>SUSE Products</guimenu> <guimenu>Finished</guimenu></menuchoice>.</para>
</important>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="ref.webui.admin.org"><title>Main Menu+Admin+Organizations</title><para>The organizations feature allows <phrase><phrase>SUSE</phrase> Manager</phrase> administrators to create and manage multiple organizations across <phrase><phrase>SUSE</phrase> Manager</phrase>.
Administrators can control an organization’s access to system management tasks.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin list organizations</phrase></textobject><imageobject>
<imagedata fileref="admin_list_organizations.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>If you click the name of an organization, the Organization Details page appears.</para>
<sect2 id="s2-sattools-org-details-details"><title>Organizations+Organization Details</title><para>The <menuchoice><guimenu>Organization</guimenu> <guimenu>Organization Details</guimenu></menuchoice> page lists the details of the selected organization.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin organization details</phrase></textobject><imageobject>
<imagedata fileref="admin_organization_details.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>The following details are available:</para>
<itemizedlist>
<listitem>
<para><menuchoice><guimenu>Organization Details</guimenu> <guimenu>Organization Name</guimenu></menuchoice> : String (between 3 and 128 characters).
This is the only value that you can change here.
When done, confirm with clicking the <guimenu>Update Organization</guimenu> button.</para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Details</guimenu> <guimenu>Organization ID</guimenu></menuchoice> : Number</para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Details</guimenu> <guimenu>Active Users</guimenu></menuchoice> : Number.
Clicking this number will open the <menuchoice><guimenu>Organization Details</guimenu> <guimenu>Users</guimenu></menuchoice> tab.</para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Details</guimenu> <guimenu>Systems</guimenu></menuchoice> : Number</para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Details</guimenu> <guimenu>System Groups</guimenu></menuchoice> : Number</para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Details</guimenu> <guimenu>Activation Keys</guimenu></menuchoice> : Number</para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Details</guimenu> <guimenu>Autoinstallation Profiles</guimenu></menuchoice> : Number</para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Details</guimenu> <guimenu>Configuration Channels</guimenu></menuchoice> : Number</para>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="s2-sattools-org-details-users"><title>Organization Details+Users</title><para>List of all the users of an organization.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin organization users</phrase></textobject><imageobject>
<imagedata fileref="admin_organization_users.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>You can modify the user details if you belong to that organization and have organization administrator privileges.</para>
</sect2>
<sect2 id="s2-sattools-org-details-trust"><title>Organization Details+Trust</title><para>Here establish trust between organizations.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin organization trusts</phrase></textobject><imageobject>
<imagedata fileref="admin_organization_trusts.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Such a trust allows sharing contents and migrate systems between these two organizations.
You may add a trust by checking the box next to an organization (or remove a trust by unchecking it) and clicking the <guimenu>Modify Trusts</guimenu> button.</para>
</sect2>
<sect2 id="s2-sattools-org-details-conf"><title>Organization Details+Configuration</title><para>Allow the Organization Administrator to manage Organization configuration, configure the organization to use staged contents (<quote>pre-fetching</quote> packages, etc.), set up software crash reporting, and upload of SCAP files.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin organization configuration</phrase></textobject><imageobject>
<imagedata fileref="admin_organization_configuration.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<variablelist>
<varlistentry>
<term>SUSE Manager Configuration</term>
<listitem>
<para>Enable <menuchoice><guimenu>SUSE Manager Configuration</guimenu> <guimenu>Allow Organization Admin to manage Organization Configuration</guimenu></menuchoice> if desired.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Organization Configuration</term>
<listitem>
<itemizedlist>
<listitem>
<para><menuchoice><guimenu>Organization Configuration</guimenu> <guimenu>Enable Staging Contents</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Configuration</guimenu> <guimenu>Enable Errata E-mail Notifications (for users belonging to this organization)</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Configuration</guimenu> <guimenu>Enable Software Crash Reporting</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Configuration</guimenu> <guimenu>Enable Upload Of Crash Files</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Configuration</guimenu> <guimenu>Crash File Upload Size Limit</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Configuration</guimenu> <guimenu>Enable Upload Of Detailed SCAP Files</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Configuration</guimenu> <guimenu>SCAP File Upload Size Limit</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Configuration</guimenu> <guimenu>Allow Deletion of SCAP Results</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Organization Configuration</guimenu> <guimenu>Allow Deletion After (period in days)</guimenu></menuchoice></para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
</variablelist>
<para>When settings are done, confirm with clicking the <guimenu>Update Organization</guimenu> button.</para>
<variablelist>
<varlistentry>
<term>Enable Staging Contents</term>
<listitem>
<para>The clients will download packages in advance and stage them.
This has the advantage that the package installation action will take place immediately, when the schedule is actually executed.
This <quote>pre-fetching</quote> saves maintenance window time, which is good for service uptime.</para>
</listitem>
</varlistentry>
</variablelist>
<para>For staging contents (<quote>pre-fetching</quote>), edit on the client <filename>/etc/sysconfig/rhn/up2date</filename>:</para>
<screen>stagingContent=1
stagingContentWindow=24</screen>
<para><literal>stagingContentWindow</literal> is a time value expressed in hours and determines when downloading will start.
It is the number of hours before the scheduled installation or update time.
In this case, it means <literal>24</literal> hours before the installation time.
The start time for download depends on the selected contact method for a system.
The assigned contact method sets the time for when the next <command>rhn_check</command> will be executed.</para>
<para>Next time an action is scheduled, packages will automatically be downloaded but not installed yet.
When the scheduled time comes, the action will use the staged version.</para>
<variablelist>
<varlistentry>
<term>Minion Content Staging</term>
<listitem>
<para>Every Organization administrator can enable Content Staging from the Organization configuration page <menuchoice><guimenu>Admin</guimenu> <guimenu>Organization</guimenu> <guimenu>OrgName</guimenu> <guimenu>Configuration</guimenu> <guimenu>Enable Staging Contents</guimenu></menuchoice>.</para>
</listitem>
</varlistentry>
</variablelist>
<para>Staging content for minions is affected by two parameters.</para>
<itemizedlist>
<listitem>
<para><filename>salt_content_staging_advance:</filename> expresses the advance time, in hours, for the content staging window to open with regard to the scheduled installation/upgrade time.</para>
</listitem>
<listitem>
<para><filename>salt_content_staging_window:</filename> expresses the duration, in hours, of the time window for Salt minions to stage packages in advance of scheduled installations or upgrades.</para>
</listitem>
</itemizedlist>
<para>A value of <emphasis role="strong">salt_content_staging_advance</emphasis> equal to <emphasis role="strong">salt_content_staging_window</emphasis> results in the content staging window closing exactly when the installation/upgrade is scheduled to be executed.
A larger value allows separating download time from the installation time.</para>
<para>These options are configured in <filename>/usr/share/rhn/config-defaults/rhn_java.conf</filename>
 and by default assume the following values:</para>
<itemizedlist>
<listitem>
<para><filename>salt_content_staging_advance: 8 hours</filename></para>
</listitem>
<listitem>
<para><filename>salt_content_staging_window: 8 hours</filename></para>
</listitem>
</itemizedlist>
<note>
<para>These parameters will only have an effect when Content Staging is enabled for the targeted Organization.</para>
</note>
</sect2>
<sect2 id="s2-sattools-org-details-states"><title>Organization Details+States</title><para>From the <menuchoice><guimenu>Admin</guimenu> <guimenu>Organizations</guimenu> <guimenu>States</guimenu></menuchoice> page you can assign State to all systems in an organization.
For example, this way it is possible to define a few global security policies or add a common admin user to all machines.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin organization states</phrase></textobject><imageobject>
<imagedata fileref="admin_organization_states.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
</sect1>
<sect1 id="ref.webui.admin.users"><title>Main Menu+Admin+Users</title><para>To view and manage all users of the organization you are currently logged in to, click <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu> <guimenu>Users</guimenu></menuchoice> in the left navigation bar.
The table lists user name, real name, organization and whether the user is organization or <phrase><phrase>SUSE</phrase> Manager</phrase> administrator.
To modify administrator privileges, click any user name with administrator privileges to get to the <menuchoice><guimenu>Users</guimenu> <guimenu>Users Details</guimenu></menuchoice> page.
For more information, see:
 <xref linkend="s3-sm-user-active-details"/>.</para>
</sect1>
<sect1 id="ref.webui.admin.config"><title>Main Menu+Admin+Manager Configuration</title><para>The <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu> <guimenu>Manager Configuration</guimenu></menuchoice> page is split into tabs which allow you to configure many aspects of <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<sect2 id="s3-sattools-config-gen"><title>Manager Configuration+General</title><para>This page allows you to adjust basic <phrase><phrase>SUSE</phrase> Manager</phrase> administration settings.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin general configuration</phrase></textobject><imageobject>
<imagedata fileref="admin_general_configuration.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<variablelist>
<varlistentry>
<term><guimenu>Administrator Email Address</guimenu></term>
<listitem>
<para>E-mail address of the <phrase><phrase>SUSE</phrase> Manager</phrase> administrator.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>SUSE Manager Hostname</guimenu></term>
<listitem>
<para>Host name of the <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy Configuration</term>
<listitem>
<para>Configure proxy data via the following fields:</para>
<itemizedlist>
<listitem>
<para><menuchoice><guimenu>Manager Configuration</guimenu> <guimenu>HTTP proxy</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Manager Configuration</guimenu> <guimenu>HTTP proxy username</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Manager Configuration</guimenu> <guimenu>HTTP proxy password</guimenu></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Manager Configuration</guimenu> <guimenu>Confirm HTTP proxy password</guimenu></menuchoice></para>
<para>The HTTP proxy settings are for the communication with a <phrase><phrase>SUSE</phrase> Manager</phrase> parent server, if there is any.
The HTTP proxy should be of the form: <literal>hostname:port</literal>; the default port <literal>8080</literal> will be used if none is explicitly provided.
HTTP proxy settings for client systems to connect to this <phrase><phrase>SUSE</phrase> Manager</phrase> can be different, and will be configured separately, for example via:
<xref linkend="s3-sattools-config-bootstrap"/>.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>RPM repository mount point</guimenu></term>
<listitem>
<para>The directory where RPM packages are mirrored.
By default: <filename>/var/spacewalk</filename>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Default To SSL</guimenu></term>
<listitem>
<para>For secure communication, use SSL.</para>
</listitem>
</varlistentry>
</variablelist>
<para>When done, confirm with <guimenu>Update</guimenu>.</para>
</sect2>
<sect2 id="s3-sattools-config-bootstrap"><title>Manager Configuration+Bootstrap Script</title><para>The <menuchoice><guimenu>Manager Configuration</guimenu> <guimenu>Bootstrap Script</guimenu></menuchoice> page allows you to generate a bootstrap script that registers the client systems with <phrase><phrase>SUSE</phrase> Manager</phrase> and disconnects them from the remote <phrase>SUSE Customer Center</phrase>.</para>
<important>
<title>SLES 15 and Python 3</title>
<para>SLES 15 utilizes Python 3 as its default system version. Due to this change any older
bootstrap scripts(based on python 2) must be re-created for SLES 15 systems. Attempting to
register SLES 15 systems with SUSE Manager using Python 2 versions of the bootstrap script will
fail.</para>
</important>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin configuration bootstrap</phrase></textobject><imageobject>
<imagedata fileref="admin_configuration_bootstrap.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>This generated script will be placed within the <filename>/srv/www/htdocs/pub/bootstrap/</filename> directory on your <phrase><phrase>SUSE</phrase> Manager</phrase> server.
The bootstrap script will significantly reduce the effort involved in reconfiguring all systems, which by default obtain packages from the <phrase>SUSE Customer Center</phrase>.
The required fields are pre-populated with values derived from previous installation steps.
Ensure this information is accurate.</para>
<variablelist>
<varlistentry>
<term>SUSE Manager server hostname</term>
<listitem>
<para>The name of the SUSE Manager server where you want to register the client (pre-populated).</para>
</listitem>
</varlistentry>
<varlistentry>
<term>SSL cert location</term>
<listitem>
<para>Location and name of the SSL certificate (pre-populated).</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Bootstrap using Salt</term>
<listitem>
<para>To bootstrap traditional clients, uncheck <menuchoice><guimenu>Client Bootstrap Script Configuration</guimenu> <guimenu>Bootstrap using Salt</guimenu></menuchoice>.
For more information, see:
<xref linkend="registering.clients.traditional"/>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Enable SSL</term>
<listitem>
<para>It is advised keeping SSL enabled.
If enabled the corporate public CA certificate will be installed on the client.
If disabled the user must manage CA certificates to be able to run the registration (<command>rhnreg_ks</command>).</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Enable Client GPG checking</term>
<listitem>
<para>GNU Privacy Guard (GPG)</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Enable Remote Configuration</term>
<listitem>
<para>Enable remote configuration management and remote command acceptance of the systems to be bootstrapped to the <phrase><phrase>SUSE</phrase> Manager</phrase>.
Both features are useful for completing client configuration.
For more information, see:
<xref linkend="ref.webui.config"/> and <xref linkend="s5-sm-system-details-remote"/>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Client HTTP Proxy</term>
<listitem>
<para>Client HTTP proxy settings if you are using an HTTP proxy server.</para>
</listitem>
</varlistentry>
</variablelist>
<para>When finished, click <guimenu>Update</guimenu>.</para>
</sect2>
<sect2 id="s3-sattools-config-orgs"><title>Manager Configuration+Organizations</title><para>The <menuchoice><guimenu>Manager Configuration</guimenu> <guimenu>Organizations</guimenu></menuchoice> page contains details about the organizations feature of <phrase><phrase>SUSE</phrase> Manager</phrase>, and links for creating and configuring organizations.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin configuration organization</phrase></textobject><imageobject>
<imagedata fileref="admin_configuration_organization.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect2>
<sect2 id="s3-sattools-config-restart"><title>Manager Configuration+Restart</title><para>The <menuchoice><guimenu>Manager Configuration</guimenu> <guimenu>Restart</guimenu></menuchoice> page comprises the final step in configuring <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin configuration restart</phrase></textobject><imageobject>
<imagedata fileref="admin_configuration_restart.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Click the <guimenu>Restart</guimenu> button to restart <phrase><phrase>SUSE</phrase> Manager</phrase> and incorporate all of the configuration options added on the previous screens.
It will take between four and five minutes for a restart to finish.</para>
</sect2>
<sect2 id="s3-sattools-config-cobbler"><title>Manager Configuration+Cobbler</title><para>On the <menuchoice><guimenu>Manager Configuration</guimenu> <guimenu>Cobbler</guimenu></menuchoice> page you can run the Cobbler synchronization by clicking <guimenu>Update</guimenu>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin configuration cobbler</phrase></textobject><imageobject>
<imagedata fileref="admin_configuration_cobbler.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Cobbler synchronization is used to repair or rebuild the contents of <filename>/srv/tftpboot</filename> or <filename>/srv/www/cobbler</filename> when a manual modification of the cobbler setup has occurred.</para>
</sect2>
<sect2 id="s3-sattools-config-bare-metal"><title>Manager Configuration+Bare-metal systems</title><para>Here you can add unprovisioned ("bare-metal") systems capable of booting using PXE to an organization.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin configuration bare metal systems</phrase></textobject><imageobject>
<imagedata fileref="admin_configuration_bare_metal_systems.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>First click <guimenu>Enable adding to this organization</guimenu>.
Those systems then will appear in the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>All Systems</guimenu></menuchoice> list, where regular provisioning via autoinstallation is possible in a completely unattended fashion.</para>
<para>Only AMD64/Intel 64 systems with at least 1 GB of RAM are supported.
{susemgr} server will use its integrated Cobbler instance and will act as TFTP server for this feature to work, so the network segment that connects it to target systems must be properly configured.
In particular, a DHCP server must exist and have a next-server configuration parameter set to the <phrase><phrase>SUSE</phrase> Manager</phrase> server IP address or hostname.</para>
<para>When enabled, any bare-metal system connected to the SUSE Manager server network will be automatically added to the organization when it powers on.
The process typically takes a few minutes; when it finishes, the system will automatically shut down and then appear in the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>All Systems</guimenu></menuchoice> list.</para>
<note>
<para>New systems will be added to the organization of the administrator who enabled this feature.
To change the organization, disable the feature, log in as an administrator of a different organization and enable it again.</para>
</note>
<para>Provisioning can be initiated by clicking the <guimenu>Provisioning</guimenu> tab.
In case of bare-metal systems, though, provisioning cannot be scheduled, it will happen automatically when it is completely configured and the system is powered on.</para>
<para>It is possible to use <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>System Set Manager</guimenu></menuchoice> with bare-metal systems, although in that case some features will not be available as those systems do not have an operating system installed.
This limitation also applies to mixed sets with regular and bare-metal systems: full features will be enabled again when all bare-metal systems are removed from the set.</para>
</sect2>
</sect1>
<sect1 id="ref.webui.admin.iss"><title>Main Menu+Admin+ISS Configuration</title><para>Inter-Server Synchronization (ISS) allows <phrase><phrase>SUSE</phrase> Manager</phrase> synchronizing content and permissions from another <phrase><phrase>SUSE</phrase> Manager</phrase> instance in a peer-to-peer relationship.</para>
<sect2 id="s3-sattools-iss-master"><title>Configuring the Master SUSE Manager Server</title><para>The following will help you set up a master ISS server.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin iss configuration master</phrase></textobject><imageobject>
<imagedata fileref="admin_iss_configuration_master.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Click <menuchoice><guimenu>Admin</guimenu> <guimenu/> <guimenu>ISS Configuration</guimenu> <guimenu>Master Setup</guimenu></menuchoice>.
In the top right-hand corner of this page, click <guimenu>Add New Slave</guimenu>:</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin iss configuration edit slave</phrase></textobject><imageobject>
<imagedata fileref="admin_iss_configuration_edit_slave.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Fill in the following information:</para>
<itemizedlist>
<listitem>
<para>Slave Fully Qualified Domain Name (FQDN)</para>
</listitem>
<listitem>
<para>Allow Slave to Sync? Selecting this checkbox will allow the slave <phrase><phrase>SUSE</phrase> Manager</phrase> to access this master <phrase><phrase>SUSE</phrase> Manager</phrase>.
Otherwise, contact with this slave will be denied.</para>
</listitem>
<listitem>
<para>Sync All Orgs to Slave? Checking this field will synchronize all organizations to the slave <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
</listitem>
</itemizedlist>
<note>
<para>Marking the <menuchoice><guimenu>ISS Configuration</guimenu> <guimenu>Sync All Orgs to Slave?</guimenu></menuchoice> checkbox on the <menuchoice><guimenu>ISS Configuration</guimenu> <guimenu>Master Setup</guimenu></menuchoice> page will override any specifically selected organizations in the local organization table.</para>
</note>
<para>Click <guimenu>Create</guimenu>.
Optionally, click any local organization to be exported to the slave <phrase><phrase>SUSE</phrase> Manager</phrase> then click <guimenu>Allow Orgs</guimenu>.</para>
<note>
<title>Enabling Inter-server Synchronization in SUSE Manager2.1</title>
<para>ISS is enabled by default in <phrase><phrase>SUSE</phrase> Manager</phrase> 3.1 and later.</para>
<para>To enable the inter-server synchronization (ISS) feature in <phrase><phrase>SUSE</phrase> Manager</phrase> 2.1, edit the <filename>/etc/rhn/rhn.conf</filename> file and set: <command>disable_iss=0</command>.
Save the file and restart the httpd service with <command>service httpd restart</command>.</para>
</note>
<para>For synchronization timeout settings, see:
<xref linkend="bp.troubleshooting.timeouts"/>.</para>
</sect2>
<sect2 id="s3-sattools-iss-slave"><title>Configuring Slave Servers</title><para>Slave servers receive content synchronized from the master server.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin iss configuration slave</phrase></textobject><imageobject>
<imagedata fileref="admin_iss_configuration_slave.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>To securely transfer content to the slave servers, the ORG-SSL certificate from the master server is needed.
Click <menuchoice><guimenu>Admin</guimenu> <guimenu>ISS Configuration</guimenu> <guimenu>Slave Setup</guimenu></menuchoice>.
In the top right-hand corner, click <guimenu>Add New Master</guimenu>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin iss configuration edit master</phrase></textobject><imageobject>
<imagedata fileref="admin_iss_configuration_edit_master.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para><menuchoice><guimenu>ISS Configuration</guimenu> <guimenu>Update Master</guimenu> <guimenu>Master Setup</guimenu></menuchoice> and fill in the following information:</para>
<itemizedlist>
<listitem>
<para>Master Fully Qualified Domain Name (FQDN)</para>
</listitem>
<listitem>
<para>Filename of this Master’s CA Certificate: use the full path to the CA Certificate. For example:</para>
<screen>/etc/pki/trust/anchors</screen>
</listitem>
<listitem>
<para>Default Master?</para>
</listitem>
</itemizedlist>
<para>Click <guimenu>Add New Master</guimenu>.
Once the master and slave servers are configured, start the synchronization on the Master server by executing <command>mgr-inter-sync</command>:</para>
<screen>mgr-inter-sync -c`YOUR-CHANNEL`</screen>
</sect2>
<sect2 id="s3-sattools-iss-map-orgs"><title>Mapping SUSE Manager Master Server Organizations to Slave Organizations</title><para>A mapping between organizational names on the master <phrase><phrase>SUSE</phrase> Manager</phrase> allows for channel access permissions being set on the master server and propagated when content is synchronized to a slave <phrase><phrase>SUSE</phrase> Manager</phrase>.
Not all organization and channel details need to be mapped for all slaves.
{susemgr} administrators can select which permissions and organizations can be synchronized by allowing or omitting mappings.</para>
<para>To complete the mapping, log in to the Slave <phrase><phrase>SUSE</phrase> Manager</phrase> as administrator.
Click <menuchoice><guimenu>Admin</guimenu> <guimenu>ISS Configuration</guimenu> <guimenu>Slave Setup</guimenu></menuchoice> and select a master <phrase><phrase>SUSE</phrase> Manager</phrase> by clicking its name.
Use the drop-down box to map the exported master organization name to a matching local organization in the slave <phrase><phrase>SUSE</phrase> Manager</phrase>, then click <guimenu>Update Mapping</guimenu>.</para>
<para>On the command line, issue the synchronization command on each of the custom channels to obtain the correct trust structure and channel permissions:</para>
<screen>mgr-inter-sync -c`YOUR-CHANNEL`</screen>
</sect2>
</sect1>
<sect1 id="ref.webui.admin.schedules"><title>Main Menu+Admin+Task Schedules</title><para>Under <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Admin</guimenu> <guimenu>Task Schedules</guimenu></menuchoice> all predefined task bunches are listed.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin task schedules</phrase></textobject><imageobject>
<imagedata fileref="admin_task_schedules.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Click a <menuchoice><guimenu>SUSE Manager Schedules</guimenu> <guimenu>Schedule name</guimenu></menuchoice> to open its <menuchoice><guimenu>Schedule Name</guimenu> <guimenu>Basic Schedule Details</guimenu></menuchoice> where you can disable it or change the frequency.
Click <guimenu>Edit Schedule</guimenu> to update the schedule with your settings.
To delete a schedule, click <guimenu>delete schedule</guimenu> in the upper right-hand corner.</para>
<warning>
<para>Only disable or delete a schedule if you are absolutely certain this is necessary as they are essential for <phrase><phrase>SUSE</phrase> Manager</phrase> to work properly.</para>
</warning>
<para>If you click a bunch name, a list of runs of that bunch type and their status will be displayed.
Clicking the start time links takes you back to the <menuchoice><guimenu>Schedule Name</guimenu> <guimenu>Basic Schedule Details</guimenu></menuchoice>.</para>
<para>For example, the following predefined task bunches are scheduled by default and can be configured:</para>
<variablelist>
<varlistentry>
<term><guimenu>channel-repodata-default:</guimenu></term>
<listitem>
<para>(Re)generates repository metadata files.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>cleanup-data-default:</guimenu></term>
<listitem>
<para>Cleans up stale package change log and monitoring time series data from the database.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>clear-taskologs-default:</guimenu></term>
<listitem>
<para>Clears task engine (taskomatic) history data older than a specified number of days, depending on the job type, from the database.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>cobbler-sync-default:</guimenu></term>
<listitem>
<para>Synchronizes distribution and profile data from <phrase><phrase>SUSE</phrase> Manager</phrase> to Cobbler.
For more information on Cobbler, see
<xref linkend="advanced.topics.cobbler"/>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>compare-configs-default:</guimenu></term>
<listitem>
<para>Compares configuration files as stored in configuration channels with the files stored on all configuration-enabled servers.
To review comparisons, click the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu></menuchoice> tab and click the system of interest.
Go to <menuchoice><guimenu>Configuration</guimenu> <guimenu>Compare Files</guimenu></menuchoice>.
For more information, refer to:
<xref linkend="s5-sdc-configuration-diff"/>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>cve-server-channels-default:</guimenu></term>
<listitem>
<para>Updates internal pre-computed CVE data that is used to display results on the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Audit</guimenu> <guimenu>CVE Audit</guimenu></menuchoice> page.
Search results in the <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Audit</guimenu> <guimenu>CVE Audit</guimenu></menuchoice> page are updated to the last run of this schedule).
For more information, see:
<xref linkend="ref.webui.audit.cve"/>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>daily-status-default:</guimenu></term>
<listitem>
<para>Sends daily report e-mails to relevant addresses.
To learn more about how to configure notifications for specific users, see:
<xref linkend="s4-usr-active-details-prefs"/></para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>errata-cache-default:</guimenu></term>
<listitem>
<para>Updates internal patch cache database tables, which are used to look up packages that need updates for each server.
Also, this sends notification emails to users that might be interested in certain patches.
For more information on patches, see:
<xref linkend="ref.webui.patches"/>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>errata-queue-default:</guimenu></term>
<listitem>
<para>Queues automatic updates (patches) for servers that are configured to receive them.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>kickstart-cleanup-default:</guimenu></term>
<listitem>
<para>Cleans up stale kickstart session data.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>kickstartfile-sync-default:</guimenu></term>
<listitem>
<para>Generates Cobbler files corresponding to Kickstart profiles created by the configuration wizard.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>mgr-register-default:</guimenu></term>
<listitem>
<para>Calls the <command>mgr-register</command> command, which synchronizes client registration data with NCC (new, changed or deleted clients' data are forwarded).</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>mgr-sync-refresh-default:</guimenu></term>
<listitem>
<para>the default time at which the start of synchronization with SUSE Customer Center (SCC) takes place (<literal>mgr-sync-refresh</literal>).</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>package-cleanup-default:</guimenu></term>
<listitem>
<para>deletes stale package files from the file system.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>reboot-action-cleanup-default:</guimenu></term>
<listitem>
<para>any reboot actions pending for more than six hours are marked as failed and associated data is cleaned up in the database.
For more information on scheduling reboot actions, see:
<xref linkend="s5-sdc-provisioning-powermgnt"/>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>sandbox-cleanup-default:</guimenu></term>
<listitem>
<para>cleans up <guimenu>sandbox</guimenu> configuration files and channels that are older than the <guimenu>sandbox_lifetime</guimenu> configuration parameter (3 days by default).
Sandbox files are those imported from systems or files under development.
For more information, see:
<xref linkend="s5-sdc-configuration-add-files"/></para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>session-cleanup-default:</guimenu></term>
<listitem>
<para>cleans up stale Web interface sessions, typically data that is temporarily stored when a user logs in and then closes the browser before logging out.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>ssh-push-default:</guimenu></term>
<listitem>
<para>prompts clients to check in with <phrase><phrase>SUSE</phrase> Manager</phrase> via SSH if they are configured with a <menuchoice><guimenu>Contact Method</guimenu> <guimenu>SSH Push</guimenu></menuchoice>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>token-cleanup-default:</guimenu></term>
<listitem>
<para>deletes expired repository tokens that are used by Salt minions to download packages and metadata.</para>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="ref.webui.admin.status"><title>Main Menu+Admin+Task Engine Status</title><para>This is a status report of the various tasks running by the <phrase><phrase>SUSE</phrase> Manager</phrase> task engine.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin task status last execution</phrase></textobject><imageobject>
<imagedata fileref="admin_task_status_last_execution.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<para>Next to the task name you find the date and time of the last execution and the status.</para>
</sect1>
<sect1 id="ref.webui.admin.logs"><title>Main Menu+Admin+Show Tomcat Logs</title><para>Here the <phrase><phrase>SUSE</phrase> Manager</phrase> admin user has access to the Tomcat log file located at <filename>/var/log/rhn/rhn_web_ui.log</filename>.
No <systemitem class="username">root</systemitem> privileges are required.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>admin show tomcat logs</phrase></textobject><imageobject>
<imagedata fileref="admin_show_tomcat_logs.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</sect1>
</chapter>
<chapter id="s1-sm-help"><title>Help</title><para>The <guimenu>Help</guimenu>
 pages provide access to the full suite of documentation and support available to <phrase><phrase>SUSE</phrase> Manager</phrase>
 users.</para>
<sect1 id="s2-sm-your-rhn-help-sat"><title>SUSE Manager{mgrgetstart}</title><para>In <xref linkend="book.suma.getting-started"/> find information regarding    <phrase><phrase>SUSE</phrase> Manager</phrase>
 server and its installation and initial configuration.
Implementing a fully functional <phrase><phrase>SUSE</phrase> Manager</phrase>
 requires more than installing software and a database.
Client systems must be configured to use <phrase><phrase>SUSE</phrase> Manager</phrase>
.
Custom packages and channels should be created for optimal use.
Since these tasks extend beyond the basic installation, they are covered in detail in the other guides.</para>
</sect1>
<sect1 id="s2-sm-your-rhn-help-rg"><title>SUSE Manager{mgrrefguide}</title><para><xref linkend="book.suma.reference.manual"/> explains the Web interface and its features in detail.</para>
</sect1>
<sect1 id="s2-sm-your-rhn-help-bp"><title>SUSE Manager{mgrbestpract}</title><para><xref linkend="book.suma.best.practices"/> describes <phrase>SUSE</phrase>
 recommended best practices for <phrase><phrase>SUSE</phrase> Manager</phrase>
.
This information has been collected from many successful <phrase><phrase>SUSE</phrase> Manager</phrase>
 real world implementations and includes feedback provided by product management, sales, and engineering.</para>
</sect1>
<sect1 id="s2-sm-your-rhn-help-at"><title>SUSE Manager{mgradvtop}</title><para><xref linkend="book.suma.advanced.topics"/> contains a collection of advanced topics not covered under the best practices guide.</para>
</sect1>
<sect1 id="s2-sm-your-rhn-help-rn"><title>Release Notes</title><para>The <guimenu>Release Notes</guimenu>
 page lists the notes accompanying every recent release of <phrase><phrase>SUSE</phrase> Manager</phrase>
.
All significant changes in a given release cycle, from major enhancements to the user interface to changes in the related documentation are documented here.</para>
</sect1>
<sect1 id="s2-sm-your-rhn-help-api"><title>API</title><para>Documentation for using the Application Programming Interface (API) for creating tools and programs to automate common tasks via <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
<para>The <guimenu>API</guimenu>
 page contains an overview of the API, with links to detailed descriptions of various API calls available to administrators and developers.
There is also an <guimenu>FAQ</guimenu>
 page for answers to common questions about the <phrase><phrase>SUSE</phrase> Manager</phrase>
 API.
A <guimenu>Sample Scripts</guimenu>
 page shows example code using API calls.</para>
</sect1>
<sect1 id="s2-sm-your-rhn-help-docsearch"><title>Search</title><para>The <guimenu>Documentation Search</guimenu>
 page features a robust search engine that indexes and searches <phrase><phrase>SUSE</phrase> Manager</phrase>
 documentation.</para>
<figure>
<title>Documentation Search</title>
<mediaobject><textobject role="description"><phrase>help search</phrase></textobject><imageobject>
<imagedata fileref="help_search.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<para>Users can search the available online documentation and filter them according to the following choices in the <guimenu>What to Search</guimenu>
 drop-down box:</para>
<itemizedlist>
<listitem>
<para><guimenu>Content &amp; Title</guimenu> — Search both the title heading or body content of all available documents.</para>
</listitem>
<listitem>
<para><guimenu>Free Form</guimenu> — Search documents for any keyword matches, which broadens search results.</para>
</listitem>
<listitem>
<para><guimenu>Content</guimenu> — Search only the body content of documentation for more specific matches.</para>
</listitem>
<listitem>
<para><guimenu>Title</guimenu> — Search only the title headings of the documentation for targeted, specific search results.</para>
</listitem>
</itemizedlist>
<para>The <guimenu>Free Form</guimenu>
 field additionally allows you to search using field names that you prepend to search queries and filter results in that field.</para>
<para>For example, if you wanted to search all of the <phrase><phrase>SUSE</phrase> Manager</phrase>
manuals for the word <literal>Virtualization</literal> in the title and <literal>install</literal> in the content, type the following in the <guimenu>Free Form</guimenu>
 field:</para>
<screen>title:Virtualization and content:install</screen>
<para>Other supported field names for documentation search include:</para>
<itemizedlist>
<listitem>
<para><literal>url</literal> — Search the URL for a particular keyword.</para>
</listitem>
<listitem>
<para><literal>title</literal> — Search titles for a particular keyword.</para>
</listitem>
<listitem>
<para><literal>content</literal> — Search the body of the documentation for a particular keyword.</para>
</listitem>
</itemizedlist>
<para>If there are several pages of search results, you can limit the amount of visible results shown on one page by clicking the <guimenu>Display quantity items per page</guimenu>
 drop-down box, which offers between 10 and 500 results per page.</para>
<para>To move between pages, click the right or left angle brackets (<guimenu>&gt;</guimenu>
 to go forward or <guimenu>&lt;</guimenu>
 to go backward).</para>
</sect1>
</chapter>
</book>
<book id="book.suma.advanced.topics"><bookinfo><title>SUSE Manager 3.2</title><date/><legalnotice><para/></legalnotice></bookinfo>
  <?dbjsp dir="advanced-topics/en-US" ?>
  <?dbjsp filename="index.jsp"?>
<preface id="preface.susemanager.at"><title>About This Guide</title><note>
<title> Version Information</title>
<para>In this manual if not other specified,  version <phrase>3.2</phrase> is assumed and this version is required if a feature is discussed.
 <phrase>3.2</phrase> and  <phrase>3.2</phrase> Proxy were originally released as a SLES 12 SP3 extension.
Whenever features of the <phrase>3.2</phrase> host operating system are documented and not other specified version 12 SP3 is assumed.</para>
</note>
</preface>
<chapter id="art.suma.install.zsystems"><title> on IBM z Systems</title><sect1 id="_introduction_2"><title>Introduction</title><para>This best practice guide is intended for z/VM administrators responsible for operating the IBM z Systems
Mainframe.
The goal of this guide is to lead an z/VM administrator trained on normal z Systems
operating protocols through the installation of 
onto an existing mainframe system.
The intent of this article is not to cover the variety of hardware configuration profiles available on z Systems
but instead to provide a foundational overview of the procedure and requirements necessary for a successful 
server deployment.</para>
</sect1>
<sect1 id="_base_system_requirements"><title>Base System Requirements</title><para>The z/VM administrator should acquire and prepare the following resources for a successful 
installation. <phrase>3.2</phrase>
is delivered as an extension.
These sections will provide you with the minimum and recommended system requirements for 
.
The base system for 
 <phrase>3.2</phrase>
is SLES {sles-version}{sp-version}
.</para>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry><para>Hardware</para></entry>
<entry><para>Recommended Hardware</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>IBM Systems</para></entry>
<entry><para>* IBM zEnterprise System z196 <emphasis>(z196)</emphasis>
* IBM zEnterprise System z114 <emphasis>(z114)</emphasis>
* IBM zEnterprise EC12 <emphasis>(zEC12)</emphasis>
* IBM zEnterprise EC12 <emphasis>(zEC12)</emphasis>
* IBM zEnterprise BC12 <emphasis>(zBC12)</emphasis>
* IBM z13 <emphasis>(z13)</emphasis>
* LinuxOne Rockhopper
* LinuxOne Emperor</para></entry>
</row>
<row>
<entry><para>RAM</para></entry>
<entry><para><emphasis>Split memory requirements across available RAM, VDISK and
        swap to suit your environment. On a production system the ratio of
        physical memory to VDISK will need to be re-evaluated based on the
        number of clients which will be supported.</emphasis></para><para>Minimum 5 
 GB+ for test server <emphasis>(3 GB RAM + 2 GB VDISK
        Swap)</emphasis></para><para>Minimum 16 
GB+ for base installation</para><para>Minimum 32 
GB+ for a production server</para></entry>
</row>
<row>
<entry><para>Free Disk Space</para></entry>
<entry><para>Minimum 100 
GB for root partition</para><para>Minimum 50 
GB for <replaceable>/var/lib/pgsql</replaceable></para><para>Minimum 50 
GB per <phrase>SUSE</phrase>
product + 100 GB per Red Hat product <replaceable>/var/spacewalk</replaceable></para></entry>
</row>
<row>
<entry><para>Network Connection</para></entry>
<entry><para>* OSA Express Ethernet <emphasis>(including Fast and Gigabit Ethernet) _
* HiperSockets or Guest LAN
* 10 GBE, VSWITCH
* RoCE _(RDMA over Converged Ethernet)</emphasis></para><para>The following interfaces are still included but no longer supported:</para><para>* CTC <emphasis>(or virtual CTC)</emphasis>
* IP network interface for IUCV</para></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<itemizedlist>
<title>Media Requirements</title>
<listitem>
<para><phrase>SUSE Linux Enterprise</phrase> {sles-version}{sp-version} Installation Media for IBM z Systems :</para>
<para><ulink url="https://www.suse.com/products/server/download/">https://www.suse.com/products/server/download/</ulink></para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="_additional_requirements"><title>Additional Requirements</title><para>There are a few additional resource requirements you will need to prepare before installing the  extension on your system.
This section overviews these requirements.</para>
<para>The guest z/VM should be provided with a static IP address and hostname as these cannot be easily changed after initial setup.
The hostname should contain less than 8 characters.</para>
<para>For more information on 
additional requirements, see <ulink url="https://www.suse.com/documentation/suse-manager-3/book_suma_best_practices/data/mgr_conceptual_overview.html">https://www.suse.com/documentation/suse-manager-3/book_suma_best_practices/data/mgr_conceptual_overview.html</ulink>.</para>
<para>You are required to calculate sufficient disk storage for 
before running:</para>
<screen>yast2 susemanagersetup</screen>
<para>The following information will help fulfill these requirements.</para>
<warning>
<title>Default Volume Groups and Disk Space</title>
<para>By default the file system of 
including the embedded database and patch directories will reside within the root volume.
While adjustments are possible once installation has completed it becomes the administrators responsibility to specify and monitor these adjustments.</para>
<para>If your  runs out of disk space, this can have a severe impact on its database and file structure.
Preparing storage requirements in accordance with this section will aid in preventing these harmful effects.
{suse} technical services will not be able to provide support for systems suffering from low disk space conditions as this can have an effect on an entire system and therefore becomes unresolvable.
A full recovery is only possible with a previous backup or a new  installation.</para>
</warning>
<itemizedlist>
<title>Required Storage Devices</title>
<listitem>
<para>An additional disk is required for database storage.
This should be an <literal role="systemitem">zFCP</literal> or <literal role="systemitem">DASD</literal> device as these are preferred for use with <literal role="systemitem">HYPERPAV</literal>.
This disk should fulfill the following requirements</para>
<para>At least 50 GB for</para>
<screen>/var/lib/pgsql</screen>
<para>Minimum 50 
GB per SUSE product + 100 GB per Red Hat product</para>
<screen>/var/spacewalk</screen>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="_sles_sles_version_sp_version_installation_and_the_extension"><title>SLES {sles-version}{sp-version} Installation and the  Extension</title><para>This section covers the installation of <phrase>3.2</phrase>
as an extension to SLES {sles-version}{sp-version}
.</para>
<para>For more information on deploying SLES {sles-version}{sp-version}
on your hardware, see <ulink url="https://www.suse.com/documentation/sles-12/book_sle_deployment/data/cha_zseries.html">https://www.suse.com/documentation/sles-12/book_sle_deployment/data/cha_zseries.html</ulink>.</para>
<para>During installation of SLES {sles-version}{sp-version}
select 
as an extension.</para>
<para>After rebooting you will need to set up the additional storage required for <filename>/var/spacewalk</filename> and <filename>/var/lib/pgsql</filename> and swap space using the yast partitioner tool.
This step is <emphasis>required</emphasis> before running <command>yast2 susemanagersetup</command>.</para>
<para>After configuring the storage requirements, having executed a YaST
online update and completed a full system reboot, run 
setup to finalize the 
installation on your z Systems
mainframe:</para>
<screen>{prompt.root}yast2 susemanagersetup</screen>
<para>This completes the installation of 
on your z Systems
.
For more information on beginning management with 
, see <ulink url="suma-setup-with-yast-sumasetup.xml#suma-setup-with-yast-sumasetup">Setup  with YaST</ulink>.</para>
</sect1>
</chapter>
<chapter id="advanced.topics.proxy.quickstart"><title>SUSE Manager 3.2 Proxy</title><abstract>
<para>This chapter explains how to install and set up <phrase><phrase>SUSE</phrase> Manager</phrase> <phrase>3.2</phrase> Proxy.
It also provides notes about migrating a previous proxy such as version 2.1, 3.0, or 3.1 to version 3.2.</para>
</abstract>
<sect1 id="at.manager.proxy.concepts"><title>Overview</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> <phrase>3.2</phrase> Proxy is a <phrase><phrase>SUSE</phrase> Manager</phrase> add-on that caches software packages on an internal, central server.
The proxy caches patch updates from <phrase>SUSE</phrase> or custom RPMs generated by third-party organizations.
A proxy allows you to use bandwidth more effectively because client systems connect to the proxy for updates, and the <phrase><phrase>SUSE</phrase> Manager</phrase> server is no longer required to handle all client requests.
The proxy also supports transparent custom package deployment.</para>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy is an open source (GPLv2) solution that provides the following features:</para>
<itemizedlist>
<listitem>
<para>Cache software packages within a Squid proxy.</para>
</listitem>
<listitem>
<para>Client systems see the <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> as a <phrase><phrase>SUSE</phrase> Manager</phrase> server instance.</para>
</listitem>
<listitem>
<para>The <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> is registered as a client system with the <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
</listitem>
</itemizedlist>
<para>The primary goal of a <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> is to improve <phrase><phrase>SUSE</phrase> Manager</phrase> performance by reducing bandwidth requirements and accelerating response time.</para>
</sect1>
<sect1 id="at.manager.proxy.inst-and-clients"><title>Proxy Installation and Connecting Clients</title><para><remark role="fixme">Add a short description</remark></para><sect2 id="at.manager.proxy.requirements"><title>Requirements</title><para>The following section provides <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> requirements.</para>
<formalpara>
<title>Supported Client Systems</title>
<para>For supported clients and their requirements, see <xref linkend="mgr.supported.client.systems"/>.</para>
</formalpara>
<formalpara>
<title>Hardware Requirements</title>
<para>Hardware requirements highly depend on your usage scenario.
When planning proxy environments, consider the amount of data you want to cache on your proxy.
If your proxy should be a 1:1 mirror of your <phrase><phrase>SUSE</phrase> Manager</phrase>, the same amount of disk space is required.
For specific hardware requirements, see the following table.</para>
</formalpara>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry><para>Hardware</para></entry>
<entry><para>Required</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>CPU</para></entry>
<entry><para>Multi-core 64-bit CPU (x86_64).</para></entry>
</row>
<row>
<entry><para>RAM</para></entry>
<entry><para>Minimum 4  GB for a non-production server</para></entry>
</row>
<row>
<entry><para/></entry>
<entry><para>Minimum 16  GB for a production server</para></entry>
</row>
<row>
<entry><para>Free Disk Space</para></entry>
<entry><para>Minimum 100  GB for base installation and at least 50 GB for caching per SUSE product and +100 GB per Red Hat product; a resizeable partition strongly recommended.</para></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<tip>
<title>Storage for Proxy Data</title>
<para><phrase>SUSE</phrase> recommends storing the squid proxy caching data on a separate disk formatted with the XFS file system.</para>
</tip>
<formalpara>
<title>SSL Certificate Password</title>
<para>For installing the proxy, you need the SSL certificate password entered during the initial installation of <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
</formalpara>
<formalpara>
<title>Network Requirements</title>
<para>For additional network requirements, see <xref linkend="mgr.additional.requirements"/>.</para>
</formalpara>
<formalpara>
<title>SUSE Customer Center</title>
<para>For using <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase>, you need an account at <phrase>SUSE Customer Center</phrase> (SCC) where your purchased products and product subscriptions are registered.
Make sure you have the following subscriptions:</para>
</formalpara>
<itemizedlist>
<listitem>
<para>One or more subscriptions for <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> .</para>
</listitem>
<listitem>
<para>One or more subscriptions for <phrase><phrase>SUSE</phrase> Manager</phrase> .</para>
</listitem>
<listitem>
<para>Subscriptions for the products on the client systems you want to register with <phrase><phrase>SUSE</phrase> Manager</phrase> via <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> .</para>
</listitem>
<listitem>
<para>Subscriptions to client entitlements for the client system you want to register with <phrase><phrase>SUSE</phrase> Manager</phrase> via <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> .</para>
</listitem>
</itemizedlist>
<formalpara>
<title>Network Time Protocol (NTP)</title>
<para>The connection to the Web server via Secure Sockets Layer (SSL) requires correct time settings on the server, proxy and clients.
For this reason, all systems must use NTP.
For more information, see <ulink url="https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_netz_xntp.html">https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_netz_xntp.html</ulink>.</para>
</formalpara>
<formalpara>
<title>Virtual Environments</title>
<para>The following virtual environments are supported:</para>
</formalpara>
<itemizedlist>
<listitem>
<para><ulink url="http://www.linux-kvm.org/page/Main_Page">http://www.linux-kvm.org/page/Main_Page</ulink></para>
</listitem>
<listitem>
<para><ulink url="http://www.vmware.com/">http://www.vmware.com/</ulink></para>
</listitem>
<listitem>
<para><ulink url="http://www.microsoft.com/en-us/server-cloud/solutions/virtualization.aspx">http://www.microsoft.com/en-us/server-cloud/solutions/virtualization.aspx</ulink></para>
</listitem>
</itemizedlist>
<para>For running <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase>
in virtual environments, use the following settings for the virtual machine (VM):</para>
<itemizedlist>
<listitem>
<para>At least 1 GB of RAM</para>
</listitem>
<listitem>
<para>Bridged network</para>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="at.manager.proxy.inst"><title>Installation and Setup</title><para>The following section will guide you through the installation and setup procedure.</para>
<important>
<title>Registering Proxies</title>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy systems are registered as traditional clients using a bootstrap script.
Currently there is no method to register proxy systems using Salt.
A <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> can serve both Traditional and Salt clients.</para>
</important>
<important id="at.manager.proxy.install.prep">
<title>Procedure: Registering the Proxy</title>
<para>First completly download the channels (<phrase>SUSE Linux Enterprise</phrase> 12 SP3) and then create the activation key.
Only then you can select the correct child channels.</para>
</important>
<para>+</para>
<orderedlist numeration="arabic">
<listitem>
<para>Create an activation key based on the <phrase>SUSE Linux Enterprise</phrase> 12 SP3 base channel.
For more information about activation keys, see <xref linkend="create.act.keys"/>.</para>
<figure>
<title>Proxy Activation Key</title>
<mediaobject><textobject role="description"><phrase>proxy key</phrase></textobject><imageobject>
<imagedata fileref="proxy-key.png"/>
</imageobject></mediaobject>
</figure>
</listitem>
<listitem>
<para>Click the <guimenu>Child Channels</guimenu> subtab and select the <phrase><phrase>SUSE</phrase> Manager</phrase> <phrase>3.2</phrase> Proxy child channel with the matching update channel (<literal role="systemitem">SUSE Manager Proxy-3.2-Pool</literal> and <literal role="systemitem">SUSE-Manager-Proxy-3.2-Updates</literal> ).
These child channels are required for providing the proxy packages and updates.
As for normal SLES clients, <literal role="systemitem">SLES12-SP3-Updates</literal> plus <literal role="systemitem">SLE-Manager-Tools12-Pool</literal> and <literal role="systemitem">SLE-Manager-Tools12-Updates</literal> are required.</para>
<figure>
<title>Base and Child Proxy Channel</title>
<mediaobject><textobject role="description"><phrase>sles12 proxy child</phrase></textobject><imageobject>
<imagedata fileref="sles12-proxy-child.png"/>
</imageobject></mediaobject>
</figure>
</listitem>
</orderedlist>
<orderedlist id="at.manager.proxy.install.prep.bss" numeration="arabic">
<listitem>
<para>Modify a bootstrap script for the proxy.
Ensure unchecking <guimenu>Bootstrap using Salt</guimenu> , because in this case the proxy must be bootstrapped as a so-called traditional client.
For more information about bootstrap scripts, see <xref linkend="modify.bootstrap.script"/>.</para>
</listitem>
<listitem>
<para>Bootstrap the client with the bootstrap script.</para>
</listitem>
<listitem>
<para>You will see a list of channels to which your client is already subscribed to.
Select the two unchecked proxy channels which include the <literal role="systemitem">SUSE Manager Proxy-3.2-Pool</literal> and <literal role="systemitem">SUSE-Manager-Proxy-3.2-Updates</literal> , then select <guimenu>Change Subscriptions</guimenu> to continue.
This will provide the required repositories for the proxy packages from the <phrase><phrase>SUSE</phrase> Manager</phrase> server to the client.</para>
</listitem>
</orderedlist>
<para>A few more steps are still needed:</para>
<itemizedlist>
<listitem>
<para>install the <filename>suma_proxy</filename> pattern (see <xref linkend="at.manager.proxy.run.pattern"/>);</para>
</listitem>
<listitem>
<para>copy the SSL certificate and key from the server (see <xref linkend="at.manager.proxy.run.copycert"/>);</para>
</listitem>
<listitem>
<para>run <command>configure-proxy.sh</command> (see <xref linkend="at.manager.proxy.run.confproxy"/>);</para>
</listitem>
</itemizedlist>
<para>You will then be able to register your clients against the proxy using the Web UI or a bootstrap script as if it were a <phrase><phrase>SUSE</phrase> Manager</phrase> server.
For more information, see <xref linkend="at.manager.proxy.register.saltclients"/>.</para>
</sect2>
<sect2 id="at.manager.proxy.run.pattern"><title>Install the suma_proxy pattern</title><para>Make sure the <filename>suma_proxy</filename> pattern version 2.5.1.3 or later is installed using the following command on the proxy as root:</para>
<screen>zypper in -t pattern suma_proxy</screen>
<para>The new salt-broker service will be automatically started at the end of the package installation.
This service forwards the Salt interactions to the <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
<note>
<title>Proxy Chains</title>
<para>It is possible to arrange Salt proxies in a chain.
In such a case, the upstream proxy is named <quote>parent</quote>.</para>
</note>
<para>Make sure the proxie’s TCP ports <literal>4505</literal> and <literal>4506</literal> are open and that the proxy can reach the <phrase><phrase>SUSE</phrase> Manager</phrase> server (or another upstream proxy) on these ports.</para>
</sect2>
<sect2 id="at.manager.proxy.run.copycert"><title>Copy Server Certificate and Key</title><para>The proxy will share some SSL information with the <phrase><phrase>SUSE</phrase> Manager</phrase> server, so the next step is to copy the certificate and its key from the <phrase><phrase>SUSE</phrase> Manager</phrase> server or the upstream proxy.</para>
<para>As root, enter the following commands on the proxy using your <phrase><phrase>SUSE</phrase> Manager</phrase> server or chained proxy named as <replaceable>PARENT</replaceable>:</para>
<screen>cd /root/ssl-build scp root@`PARENT`:/root/ssl-build/RHN-ORG-PRIVATE-SSL-KEY scp root@`PARENT`:/root/ssl-build/RHN-ORG-TRUSTED-SSL-CERT scp root@`PARENT`:/root/ssl-build/rhn-ca-openssl.cnf .</screen>
<note>
<title>Known Limitation</title>
<para>The <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> functionality is only supported if the SSL certificate was signed by the same CA as the <phrase><phrase>SUSE</phrase> Manager</phrase> Server certificate.
Using certificates signed by different CAs for Proxies and Server is not supported.</para>
</note>
</sect2>
<sect2 id="at.manager.proxy.run.confproxy"><title>Running configure-proxy.sh</title><para>The <command>configure-proxy.sh</command> script will finalize the setup of your <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase>.</para>
<para>Now execute the interactive <command>configure-proxy.sh</command> script.
Pressing <keycap>Enter</keycap> without further input will make the script use the default values provided between brackets <literal>[]</literal>.
Here is some information about the requested settings:</para>
<variablelist>
<varlistentry>
<term><phrase><phrase>SUSE</phrase> Manager</phrase> Parent</term>
<listitem>
<para>A <phrase><phrase>SUSE</phrase> Manager</phrase> parent can be either another proxy server or a <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>HTTP Proxy</term>
<listitem>
<para>A HTTP proxy enables your <phrase><phrase>SUSE</phrase> Manager</phrase> proxy to access the Web.
This is needed if where direct access to the Web is prohibited by a firewall.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Proxy Version to Activate</term>
<listitem>
<para>Normally, the correct value (3.0, 3.1, or 3.2) should be offered as a default.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Traceback Email</term>
<listitem>
<para>An email address where to report problems.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Use SSL</term>
<listitem>
<para>For safety reasons, press <literal>Y</literal>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Do You Want to Import Existing Certificates?</term>
<listitem>
<para>Answer <literal>N</literal>.
This ensures using the new certificates that were copied previously from the <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Organization</term>
<listitem>
<para>The next questions are about the characteristics to use for the SSL certificate of the proxy.
The organization might be the same organization that was used on the server, unless of course your proxy is not in the same organization as your main server.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Organization Unit</term>
<listitem>
<para>The default value here is the proxy’s hostname.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>City</term>
<listitem>
<para>Further information attached to the proxy’s certificate.
Beware the country code must be made of two upper case letters.
For further information on country codes, refer to the online <ulink url="https://www.iso.org/obp/ui/#search">list of alpha-2 codes</ulink>.</para>
<tip>
<title>Country Code</title>
<para>As the country code enter the country code set during the SUSE Manager installation.
For example, if your proxy is in US and your <phrase><phrase>SUSE</phrase> Manager</phrase> in DE, you must enter <literal>DE</literal> for the proxy.</para>
</tip>
</listitem>
</varlistentry>
<varlistentry>
<term>Cname Aliases (Separated by Space)</term>
<listitem>
<para>Use this if your proxy server can be accessed through various DNS CNAME aliases.
Otherwise it can be left empty.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>CA Password</term>
<listitem>
<para>Enter the password that was used for the certificate of your <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Do You Want to Use an Existing SSH Key for Proxying SSH-Push Salt Minions?</term>
<listitem>
<para>Use this option if you want to reuse a SSH key that was used for SSH-Push Salt minions on the server.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Create and Populate Configuration Channel rhn_proxy_config_1000010001?</term>
<listitem>
<para>Accept default <literal>Y</literal>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>SUSE Manager Username</term>
<listitem>
<para>Use same user name and password as on the <phrase><phrase>SUSE</phrase> Manager</phrase> server.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Activate advertising proxy via SLP?</term>
<listitem>
<para>SLP stands for Service Location Protocol.</para>
</listitem>
</varlistentry>
</variablelist>
<para>If parts are missing, such as CA key and public certificate, the script prints commands that you must execute to integrate the needed files.
When the mandatory files are copied, re-run <command>configure-proxy.sh</command>.
Also restart the script if a HTTP error was met during script execution.</para>
<para><command>configure-proxy.sh</command> activates services required by <phrase><phrase>SUSE</phrase> Manager</phrase> Proxy, such as <literal role="systemitem">squid</literal>, <literal role="systemitem">apache2</literal>, <literal role="systemitem">salt-broker</literal>, and <literal role="systemitem">jabberd</literal>.</para>
<para>To check the status of the proxy system and its clients, click the proxy system’s details page on the Web UI (<menuchoice><guimenu>Systems</guimenu> <guimenu>Proxy</guimenu></menuchoice>, then the system name). <guimenu>Connection</guimenu> and <guimenu>Proxy</guimenu> subtabs display the respective status information.</para>
</sect2>
<sect2 id="at.manager.proxy.register.saltclients"><title>Registering Salt Clients via SUSE Manager Proxy</title><para>Proxy servers may now act as a broker and package cache for Salt minions.
These minions can be registered with a bootstrap script like the traditional clients, or directly from the Web UI or the command line.</para>
<para>Registering Salt clients via <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> from the Web UI
is done almost the same way as registering clients directly with the <phrase><phrase>SUSE</phrase> Manager</phrase> server.
The difference is that you specify the name of the proxy in the <guimenu>Proxy</guimenu> drop-box on <menuchoice><guimenu>Salt</guimenu> <guimenu>Bootstrapping</guimenu></menuchoice> page.</para>
<figure>
<title>Bootstrapping a Salt Client With a Proxy</title>
<mediaobject><textobject role="description"><phrase>proxy saltbootstrap</phrase></textobject><imageobject>
<imagedata fileref="proxy-saltbootstrap.png" width="80%"/>
</imageobject></mediaobject>
</figure>
<orderedlist numeration="arabic">
<title>Procedure: Register a Salt client through a proxy from command line</title>
<listitem>
<para>Instead of the Web UI , you may use the command line to register a minion through a proxy.
To do so, add the proxy FQDN as the master in the minions configuration file located at:</para>
<screen>/etc/salt/minion</screen>
<para>or alternatively:</para>
<screen>/etc/salt/minion.d/`name`.conf</screen>
</listitem>
<listitem>
<para>Add the FQDN to the minion file:</para>
<screen>master: proxy123.example.com</screen>
<para>Save and restart the salt-minion service with:</para>
<screen>systemctl restart salt-minion</screen>
</listitem>
<listitem>
<para>On the proxy, accept the new minion key with:</para>
<screen>salt-key -a 'minion'</screen>
<para>The minion will now connect to the proxy exclusively for Salt operations and normal HTTP package downloads.</para>
</listitem>
</orderedlist>
</sect2>
<sect2 id="at.manager.proxy.register.clients"><title>Registering Clients via SUSE Manager Proxy with a Script</title><para>Registering clients (either traditional or Salt) via <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> with a script is done almost the same way as registering clients directly with the <phrase><phrase>SUSE</phrase> Manager</phrase> server.
The difference is that you create the bootstrap script on the <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> with a command-line tool.
The bootstrap script then deploys all necessary information to the clients.
The bootstrap script refers some parameters (such as activation keys or GPG keys) that depend on your specific setup.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Create a client activation key on the <phrase><phrase>SUSE</phrase> Manager</phrase> server using the Web UI.
See <xref linkend="create.act.keys"/>.</para>
</listitem>
<listitem>
<para>On the proxy, execute the <command>mgr-bootstrap</command> command-line tool as <systemitem class="username">root</systemitem>.
If needed, use the additional command-line switches to tune your bootstrap script. An important option is <command>--traditional</command> that enables to opt for a traditional client instead of a salt minion.</para>
<para>To view available options type <command>mgr-bootstrap --help</command> from the command line:</para>
<screen># ``mgr-bootstrap --activation-keys=key-string``</screen>
</listitem>
<listitem>
<para>Optionally edit the resulting bootstrap script.
Execute the bootstrap script on the clients as described in <xref linkend="connect.first.client"/>.</para>
</listitem>
</orderedlist>
<para>The clients are registered with the <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> specified in the bootstrap script.</para>
</sect2>
<sect2 id="at.additional.info.about.client.registration.on.proxies"><title>Additional Information about Client Registration on Proxies</title><para>Within the Web UI, standard proxy pages will show information about client, no matter whether minions or traditional clients.</para>
<para>A list of clients connected to a proxy can be located under <guimenu>Systems</guimenu> &lt;proxy name&gt; <guimenu>Details</guimenu><guimenu>Proxy</guimenu>.</para>
<para>A list of chained proxies for a minion can be located under <guimenu>Systems</guimenu> &lt;minion name&gt; <guimenu>Details</guimenu><guimenu>Connection</guimenu></para>
<para>If you decide to move any of your clients between proxies or the server you will need to repeat the registration process from scratch.</para>
</sect2>
</sect1>
<sect1 id="advanced.topics.proxy.pxe"><title>Enabling PXE Boot via SUSE Manager Proxy</title><para><remark role="fixme">Add a short description</remark></para><sect2 id="advanced.topics.proxy.pxe.sync"><title>Synchronizing Profiles and System Information</title><para>To enable PXE boot via a proxy server, additional software must be installed and configured on both the <phrase><phrase>SUSE</phrase> Manager</phrase> server and the <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> server.</para>
<orderedlist numeration="arabic">
<listitem>
<para>On the <phrase><phrase>SUSE</phrase> Manager</phrase> server install <systemitem class="resource">susemanager-tftpsync</systemitem> :</para>
<screen>zypper in susemanager-tftpsync</screen>
</listitem>
<listitem>
<para>On the <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> server install <systemitem class="resource">susemanager-tftpsync-recv</systemitem> :</para>
<screen>zypper in susemanager-tftpsync-recv</screen>
</listitem>
<listitem>
<para>Run the <command>configure-tftpsync.sh</command> setup script and enter the requested information:</para>
<screen>configure-tftpsync.sh</screen>
<para>It asks for hostname and IP address of the <phrase><phrase>SUSE</phrase> Manager</phrase> server and of the proxy itself.
Additionally, it asks for the tftpboot directory on the proxy.</para>
</listitem>
<listitem>
<para>On the <phrase><phrase>SUSE</phrase> Manager</phrase> server, run <command>configure-tftpsync.sh</command> to configure the upload to the <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> server:</para>
<screen>configure-tftpsync.sh FQDN_of_Proxy_Server</screen>
</listitem>
<listitem>
<para>To initiate an initial synchronization on the SUSE Manager Server run:</para>
<screen>cobbler sync</screen>
<para>Also can also be done after each a change within Cobbler that needs to be synchronized immediately.
Otherwise Cobbler synchronization will also run automatically when needed.
For more information about Cobbler, see <xref linkend="advanced.topics.cobbler"/>.</para>
</listitem>
</orderedlist>
</sect2>
<sect2 id="advanced.topics.proxy.pxe.dhcp"><title>Configuring DHCP for PXE via SUSE Manager Proxy</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> is using Cobbler to provide provisioning.
PXE (tftp) is installed and activated by default.
To enable systems to find the PXE boot on the <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> server add the following to the DHCP configuration for the zone containing the systems to be provisioned:</para>
<screen>next-server:`IP_Address_of_SUSE_Manager_Proxy_Server`filename: "pxelinux.0"</screen>
</sect2>
</sect1>
<sect1 id="advanced.topics.proxy.migration3"><title>Migrating SUSE Manager  3 Proxy to Version 3.1</title><para>The recommended order for migrations is to first migrate the server and then the proxies.
Note that a <phrase><phrase>SUSE</phrase> Manager</phrase> 3 Proxy cooperates just fine with <phrase><phrase>SUSE</phrase> Manager</phrase> 3.1.</para>
<para>For the migration of the proxies there are two possible approaches:</para>
<itemizedlist>
<listitem>
<para>Existing <phrase><phrase>SUSE</phrase> Manager</phrase> proxies may be upgraded to version 3.1 with YaST or <command>zypper</command> migration.</para>
</listitem>
<listitem>
<para>Alternatively, the proxies may be replaced by new ones.</para>
</listitem>
</itemizedlist>
<para>This section documents both approaches.</para>
<sect2 id="at.replacing.a.susemgrproxy"><title>Replacing a SUSE Manager Proxy</title><para>A <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> is <literal>dumb</literal> in the sense that it does not contain any information about the clients which are connected to it.
A <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> can therefore be replaced by a new one.
Naturally, the replacement proxy must have the same name and IP address as its predecessor.</para>
<para>In order to replace a <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> and keeping the clients registered to the proxy leave the old proxy in <phrase><phrase>SUSE</phrase> Manager</phrase>.
Create a reactivation key for this system and then register the new proxy using the reactivation key.
If you do not use the reactivation key, you will need to re-registered all the clients against the new proxy.</para>
<orderedlist id="proc.advanced.topics.proxy.migration3.replace" numeration="arabic">
<title>Procedure: Replacing a SUSE Manager Proxyand Keeping the ClientsRegistered</title>
<listitem>
<para>Before starting the actual migration procedure, save the data from the old proxy, if needed.
Consider copying important data to a central place that can also be accessed by the new server:</para>
<itemizedlist>
<listitem>
<para>Copy the scripts that are still needed.</para>
</listitem>
<listitem>
<para>Copy the activation keys from the previous server.
Of course, it is always better to re-create the keys.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Shutdown the server.</para>
</listitem>
<listitem>
<para>Install a new <phrase><phrase>SUSE</phrase> Manager</phrase> 3.1 Proxy, see <xref linkend="at.manager.proxy.inst-and-clients"/>.</para>
</listitem>
<listitem>
<para>In the SUSE Manager Web UI select the newly installed <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> and delete it from the systems list.</para>
</listitem>
<listitem id="step.at.proxy.migration3.replace.react">
<para>In the Web UI , create a reactivation key for the old proxy system: On the System Details of the old proxy click <guimenu>Reactivation</guimenu>.
Then click <guimenu>Generate New Key</guimenu> , and remember it (write it on a piece of paper or copy it to the clipboard).
For more information about reactivation keys, see <xref linkend="s5-sm-system-details-react"/>.</para>
</listitem>
<listitem>
<para>After the installation of the new proxy, perform the following actions (if needed):</para>
<itemizedlist>
<listitem>
<para>Copy the centrally saved data to the new proxy system.</para>
</listitem>
<listitem>
<para>Install any other needed software.</para>
</listitem>
<listitem>
<para>If the proxy is also used for autoinstallation, do not forget to setup TFTP synchronization.</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<important>
<title>Proxy Installation and Client Connections</title>
<para>During the installation of the proxy, clients will not be able to reach the <phrase><phrase>SUSE</phrase> Manager</phrase> server.
After a <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> system has been deleted from the systems list, all clients connected to this proxy will be (incorrectly) listed as <literal>directly connected</literal> to the <phrase><phrase>SUSE</phrase> Manager</phrase> server.
After the first successful operation on a client <emphasis>such as execution of a remote command or installation of a package or patch</emphasis> this information will automatically be corrected.
This may take a few hours.</para>
</important>
</sect2>
<sect2 id="at.upgrade.a.susemgrproxy"><title>Upgrading a SUSE Manager Proxy from 3 to 3.1</title><para>In most situations upgrading the proxy will be your preferred solution as this retains all cached packages.
Selecting this route saves time especially regarding proxies connected to <phrase><phrase>SUSE</phrase> Manager</phrase> server via low-bandwith links.
This upgrade is similar to a standard client migration.</para>
<warning>
<title>Synchronizing Target Channels</title>
<para>Before successfully initializing the product migration, you first must make sure that the migration target channels are completely mirrored.
For the upgrade to <phrase><phrase>SUSE</phrase> Manager</phrase> 3.1 Proxy, at least the <literal role="systemitem">SUSE Linux Enterprise Server 12 SP3</literal> base channel with the <literal role="systemitem">SUSE Manager Proxy 3.1</literal> child channel for your architecture is required.</para>
</warning>
<orderedlist numeration="arabic">
<title>Procedure: Migrating Proxy to 3.1</title>
<listitem>
<para>Direct your browser to the <phrase><phrase>SUSE</phrase> Manager</phrase>{webui} where your proxy is registered, and login.</para>
</listitem>
<listitem>
<para>On the <menuchoice><guimenu>Systems</guimenu> <guimenu>Systems</guimenu> <guimenu>Proxy</guimenu></menuchoice> page select your proxy client system from the table.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>suma proxy old details page</phrase></textobject><imageobject>
<imagedata fileref="suma_proxy_old_details_page.png"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>On the system’s detail page select the <guimenu>Software</guimenu> tab, then the <guimenu>SP Migration</guimenu> tab.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>suma proxy old details spmigration</phrase></textobject><imageobject>
<imagedata fileref="suma_proxy_old_details_spmigration.png"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>From this page you will see installed products listed on your proxy client, and the available target products.
Select the wanted <guimenu>Target Products</guimenu> , which include <literal role="systemitem">SUSE Linux Enterprise Server 12 SP3</literal> and <literal role="systemitem">SUSE Manager Proxy 3.1</literal> .</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>suma proxy migration target</phrase></textobject><imageobject>
<imagedata fileref="suma_proxy_migration_target.png"/>
</imageobject></mediaobject>
</informalfigure>
<para>Then confirm with <guimenu>Select Channels</guimenu>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>suma proxy migration target</phrase></textobject><imageobject>
<imagedata fileref="suma_proxy_migration_channels.png"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>From the <guimenu>Schedule Migration</guimenu> menu, and then <guimenu>Confirm</guimenu> .</para>
</listitem>
</orderedlist>
<para>Check the <guimenu>System Status</guimenu> on the system’s details when the migration is done.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>suma proxy migrated</phrase></textobject><imageobject>
<imagedata fileref="suma_proxy_migrated.png"/>
</imageobject></mediaobject>
</informalfigure>
<note>
<title>Checking refresh_pattern in /etc/squid/squid.conf</title>
<para>If you migrate from an early <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> 3.0 add the following <literal>refresh_pattern</literal> to <filename>/etc/squid/squid.conf</filename>:</para>
<screen># salt minions get the repodata via a different URL
refresh_pattern /rhn/manager/download/.*/repodata/.*$ 0 1% 1440 ignore-no-cache reload-into-ims refresh-ims</screen>
</note>
<para>Finally consider scheduling a reboot.</para>
</sect2>
</sect1>
<sect1 id="advanced.topics.proxy.migration"><title>Migrating SUSE Manager  2.1 Proxy to Version 3.1</title><para>For the migration of <phrase><phrase>SUSE</phrase> Manager</phrase> 2.1 Proxies there are two possible approaches—​this section documents both approaches:</para>
<itemizedlist>
<listitem>
<para>Existing <phrase><phrase>SUSE</phrase> Manager</phrase> proxies may be replaced by newly installed and reconfigured proxies, see <xref linkend="advanced.topics.proxy.migration.replace"/>.
This is the recommended method.</para>
</listitem>
<listitem>
<para>Proxies may be auto-upgraded to version 3.1 by means of YaST auto-installation, see <xref linkend="advanced.topics.proxy.migration.upgrade"/>.</para>
</listitem>
</itemizedlist>
<tip>
<title>Order of Server and Proxy Migration</title>
<para>The recommended order for migrations is to first migrate the server and then the proxies.
A <phrase><phrase>SUSE</phrase> Manager</phrase> 2.1 Proxy cooperates just fine with <phrase><phrase>SUSE</phrase> Manager</phrase> 3.1.</para>
</tip>
<sect2 id="advanced.topics.proxy.migration.replace"><title>Replacing a SUSE Manager Proxy</title><para>A <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> is <literal>dumb</literal> in the sense that it does not contain any information about the clients which are connected to it.
A <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> can therefore be replaced by a new one.
The replacement proxy must have the same name and IP address as its predecessor.</para>
<para>In order to replace a <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> and keeping the clients registered to the proxy leave the old proxy in <phrase><phrase>SUSE</phrase> Manager</phrase>.
Create a reactivation key for this system and then register the new proxy using the reactivation key.
If you do not use the reactivation key, you will need to re-registered all the clients against the new proxy.</para>
<orderedlist id="proc.advanced.topics.proxy.migration21.replace" numeration="arabic">
<title>Procedure: Replacing a SUSE Manager Proxyand Keeping the ClientsRegistered</title>
<listitem>
<para>Before starting the actual migration procedure, save the important data from the old proxy.
Copy the data to a central place that also the new server can access:</para>
<itemizedlist>
<listitem>
<para>Copy the scripts that are still needed.</para>
</listitem>
<listitem>
<para>Copy the activation keys from the existing server.
Of course, it is always better to re-create the keys.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Shutdown the server.</para>
</listitem>
<listitem>
<para>Install a new <phrase><phrase>SUSE</phrase> Manager</phrase> 3.1 Proxy, see <xref linkend="at.manager.proxy.inst-and-clients"/>.</para>
</listitem>
</orderedlist>
<important>
<title>Proxy Installation and Client Connections</title>
<para>During the installation of the proxy, clients will not be able to reach the <phrase><phrase>SUSE</phrase> Manager</phrase> server.
After a <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> system has been deleted from the systems list, all clients connected to this proxy will be (incorrectly) listed as <literal>directly connected</literal> to the <phrase><phrase>SUSE</phrase> Manager</phrase> server.
After the first successful operation on a client <emphasis>such as execution of a remote command or installation of a package or patch</emphasis> this information will automatically be corrected.
This may take a few hours.</para>
</important>
<para>+</para>
<orderedlist numeration="arabic">
<listitem>
<para>In the SUSE Manager Web UI select the newly installed <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> and delete it from the systems list.</para>
</listitem>
<listitem id="step.at.proxy.migration.replace.react">
<para>In the Web UI , create a reactivation key for the old proxy system: On the System Details of the old proxy click <guimenu>Reactivation</guimenu>.
Then click <guimenu>Generate New Key</guimenu> , and remember it (write it on a piece of paper or copy it to the clipboard).
For more information about reactivation keys, see <xref linkend="s5-sm-system-details-react"/>.</para>
</listitem>
<listitem>
<para>After the installation of the new proxy, perform the following actions (if needed):</para>
<itemizedlist>
<listitem>
<para>Copy the centrally saved data back to the new proxy system.</para>
</listitem>
<listitem>
<para>Install any other needed software.</para>
</listitem>
<listitem>
<para>If the proxy is also used for autoinstallation, do not forget to setup TFTP synchronization.</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</sect2>
<sect2 id="advanced.topics.proxy.migration.upgrade"><title>Upgrading a SUSE Manager Proxy from 2.1 to 3.1</title><para>In other situations upgrading the proxy will be the preferred solution as it retains all cached packages.
This route saves time especially regarding proxies connected to a <phrase><phrase>SUSE</phrase> Manager</phrase> server via low-bandwith links.
This upgrade can be automated by using the YaST auto-installation feature.</para>
<orderedlist numeration="arabic">
<title>Procedure: Upgrading SUSE Manager Proxyfrom 2.1 to 3.1</title>
<listitem>
<para>Create an auto-installable distribution based on SLES 12 SP3.
{susemgr} 3.1 Proxy is an Add-On for SLES 12 SP3.
Refer to the <xref linkend="ref.webui.systems.autoinst"/> on creating an auto-installable distribution.</para>
</listitem>
<listitem>
<para>To start the auto-installation of a proxy, some additional packages must be installed that are only available in the <phrase><phrase>SUSE</phrase> Manager</phrase> Tools channel.
These tools were not available for proxies when in the past the system was shipped as an appliance.
To gain access to the required packages for use with proxies, the underlying SLES 11 SP3 channel (<literal role="systemitem">SLES11-SP3-SUSE-Manager-Tools</literal> ) needs to be cloned and assigned to the to-be-upgraded proxies.
After these steps have been completed, create an auto-installation profile.</para>
</listitem>
</orderedlist>
<para>In the following example you will see an auto-install profile.
The label <literal>Proxy31</literal> is used both for the auto-installable distribution as well as for the auto-install profile.
Use the following auto-installation as template and create the auto-installation profile by uploading the edited file:</para>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns"
         xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;general&gt;
  $SNIPPET('spacewalk/sles_no_signature_checks')
    &lt;mode&gt;
      &lt;confirm config:type="boolean"&gt;false&lt;/confirm&gt;
    &lt;/mode&gt;
  &lt;/general&gt;
  &lt;add-on&gt;
    &lt;add_on_products config:type="list"&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sles12-sp3-updates-x86_64/Proxy31&lt;/media_url&gt;
        &lt;name&gt;SLES12 SP3 Updates&lt;/name&gt;
        &lt;product&gt;SLES12-SP3&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sle-manager-tools12-pool-x86_64-sp3/Proxy31&lt;/media_url&gt;
        &lt;name&gt;SLE12 Manager Tools Pool&lt;/name&gt;
        &lt;product&gt;SLES12&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sle-manager-tools12-updates-x86_64-sp3/Proxy31&lt;/media_url&gt;
        &lt;name&gt;SLE12 Manager Tools Updates&lt;/name&gt;
        &lt;product&gt;SLES12&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/suse-manager-proxy-3.1-pool-x86_64/Proxy31&lt;/media_url&gt;
        &lt;name&gt;SLE12 Proxy 3.1 Pool&lt;/name&gt;
        &lt;product&gt;SLES12&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/suse-manager-proxy-3.1-updates-x86_64/Proxy31&lt;/media_url&gt;
        &lt;name&gt;SLE12 Proxy 3.1 Update&lt;/name&gt;
        &lt;product&gt;SLES12&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
    &lt;/add_on_products&gt;
  &lt;/add-on&gt;
  &lt;upgrade&gt;
    &lt;only_installed_packages config:type="boolean"&gt;false&lt;/only_installed_packages&gt;
    &lt;stop_on_solver_conflict config:type="boolean"&gt;true&lt;/stop_on_solver_conflict&gt;
  &lt;/upgrade&gt;
  &lt;backup&gt;
    &lt;sysconfig config:type="boolean"&gt;true&lt;/sysconfig&gt;
    &lt;modified config:type="boolean"&gt;true&lt;/modified&gt;
    &lt;remove_old config:type="boolean"&gt;false&lt;/remove_old&gt;
  &lt;/backup&gt;
  &lt;networking&gt;
    &lt;keep_install_network config:type="boolean"&gt;true&lt;/keep_install_network&gt;
    &lt;start_immediately config:type="boolean"&gt;true&lt;/start_immediately&gt;
  &lt;/networking&gt;
  &lt;scripts&gt;
    &lt;pre-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;filename&gt;remove_initrd_koan.sh&lt;/filename&gt;
        &lt;source&gt;

        mount /dev/sda1 /mnt
        rm -f /mnt/initrd_koan
        umount /mnt

        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/pre-scripts&gt;
    &lt;chroot-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;filename&gt;migration_fix_script.sh&lt;/filename&gt;
        &lt;chrooted config:type="boolean"&gt;true&lt;/chrooted&gt;
        &lt;source&gt;&lt;![CDATA[ ln -sf /usr/share/rhn/RHN-ORG-TRUSTED-SSL-CERT /etc/pki/trust/anchors/
/usr/sbin/update-ca-certificates ]]&gt;
&lt;/source&gt;
      &lt;/script&gt;
    &lt;/chroot-scripts&gt;
    &lt;init-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;filename&gt;sles_register.sh&lt;/filename&gt;
        &lt;source&gt;

         $SNIPPET('spacewalk/sles_register')
         chmod 640 /etc/sysconfig/rhn/systemid
         chown root:www /etc/sysconfig/rhn/systemid
         systemctl enable squid
         systemctl start squid

        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/init-scripts&gt;
  &lt;/scripts&gt;
&lt;/profile&gt;</screen>
<para>Ensure all channels referenced in this file are available and fully synced.
Replace the label <literal>Proxy31</literal> with the correct reference chosen for your auto-installation profile.
It is recommended to create a new activation key, for example: <literal>1-sles12sp3</literal> which has the relevant channels assigned; later this key will be used to subscribe the upgraded proxy with the correct channels.
The following base channel should be assigned:</para>
<screen>SLES12-SP3-Pool</screen>
<para>Also include the following child channels:</para>
<screen>SLE-Manager-Tools12-Pool
SLE-Manager-Tools12-Updates
SLES12-SP3-Updates
SUSE-Manager-Proxy-3.1-Pool
SUSE-Manager-Proxy-3.1-Updates</screen>
<para>In <literal>Kernel Options</literal> enter the following value:</para>
<screen>autoupgrade=1 Y2DEBUG=1</screen>
<para>The debug setting is not required but can help investigate problems in case something goes wrong; the <literal role="parameter">autoupgrade</literal> parameter is vital! Do not remove it.</para>
<para>Save your changes then click on "Variables" and enter the following value:</para>
<screen>registration_key=1-sles12sp3</screen>
<para>Specify the name of the key which has all respective channels assigned to it.
The auto-install file contains a script named <command>remove_initrd_koan.sh</command>.
In this script you should specify the device name of your <filename>/boot</filename> partition.</para>
<note>
<title>remove_initrd_koan.sh</title>
<para>The purpose of this script is to act as a workaround for the following problem: During installation the initrd of the installation media (SLES12SP3) is in use.
This initrd is rather large (around 50 MB), so there is not enough space left when the new kernel is being installed.
Therefore this script deletes the initial ramdisk file once it has been booted.
The partition of your boot partition might differ, so it should be explicitly specified in the autoinstall file.</para>
</note>
<para>During auto-installation this script attempts to delete the initial ramdisk file once it has booted.
Your boot partition may differ, so ensure it is explicitly specified within the auto-install file.</para>
<para>If this step is bypassed or mixed up (for example: specifying a wrong value) it’s fine.
During installation of the new kernel, YaST will detect that there is not enough space available and will stop.
You may switch to another console (there is a shell running on virtual console 2) and reclaim some disk space by issuing the command:</para>
<screen>rm /mnt/boot/initrd_koan</screen>
<para>When you have completed this step, switch back to the console where YaST is running (console 7) and click <guimenu>Retry</guimenu>.
Installation of the kernel will continue and succeed.
The system will reboot, a few automated init scripts will run and the proxy will be upgraded to the <phrase><phrase>SUSE</phrase> Manager</phrase> 3.1 based on SLES12SP3 and will be fully functional.</para>
</sect2>
</sect1>
</chapter>
<chapter id="advanced.topics.security"><title>Security</title><sect1 id="at.security"><title>Setup a Minion to Master Validation Fingerprint</title><para>In highly secure network configurations you may wish to ensure your minions are connecting a specific master.
To setup validation from minion to master enter the masters fingerprint within the <filename>/etc/salt/minion</filename> configuration file.
See the following procedure:</para>
<orderedlist numeration="arabic">
<listitem>
<para>On the master enter the following command as root and note the fingerprint:</para>
<screen>salt-key -F master</screen>
<para>On your minion, open the minion configuration file located in <filename>/etc/salt/minion</filename>.
Uncomment the following line and enter the masters fingerprint replacing the example fingerprint:</para>
<screen>master_finger: 'ba:30:65:2a:d6:9e:20:4f:d8:b2:f3:a7:d4:65:11:13'</screen>
</listitem>
<listitem>
<para>Restart the salt-minion service:</para>
<screen># systemctl restart salt-minion</screen>
</listitem>
</orderedlist>
<para>For more information on configuring security from a minion see: <ulink url="https://docs.saltstack.com/en/latest/ref/configuration/minion.html">https://docs.saltstack.com/en/latest/ref/configuration/minion.html</ulink></para>
</sect1>
</chapter>
<chapter id="_susemgr_in_the_public_cloud_susemgr_server_and_susemgr_proxy_in_the_public_cloud"><title>SUSE Manager in the Public Cloud</title><subtitle>SUSE Manager Server and SUSE Manager Proxy in the Public Cloud</subtitle><abstract>
<para><phrase><phrase>SUSE</phrase> Manager</phrase>
delivers best-in-class Linux server management capabilities.
For detailed information about the product please refer to the <ulink url="https://www.suse.com/documentation/suse_manager">SUSE
     Manager</ulink> documentation.</para>
<para>The <phrase><phrase>SUSE</phrase> Manager</phrase>
Server and <phrase><phrase>SUSE</phrase> Manager</phrase>
Proxy images published by SUSE in selected Public Cloud environments are provided as Bring Your Own Subscription (BYOS) images. <phrase><phrase>SUSE</phrase> Manager</phrase>
Server instances need to be registered with the SUSE Customer Center (SCC). Subscriptions of <phrase><phrase>SUSE</phrase> Manager</phrase>
Proxy instances are handled through their parent <phrase><phrase>SUSE</phrase> Manager</phrase>
Server.
After an instance is launched, <phrase><phrase>SUSE</phrase> Manager</phrase>
needs to be set up and configured following the procedure in the <phrase><phrase>SUSE</phrase> Manager</phrase>
documentation.</para>
</abstract>
<sect1 id="instance-requirements"><title>Instance Requirements</title><para>Select an instance size that meets the system requirements as documented in the <phrase><phrase>SUSE</phrase> Manager</phrase>
documentation.</para>
<itemizedlist>
<listitem>
<para>Minimal main memory: &gt;12G</para>
</listitem>
<listitem>
<para>The <phrase><phrase>SUSE</phrase> Manager</phrase> setup procedure performs a Forward-confirmed reverse DNS lookup. This must succeed in order for the setup procedure to complete successfully and for <phrase><phrase>SUSE</phrase> Manager</phrase> to operate as expected. Therefore it is important that the hostname and IP configuration be performed prior to running the <phrase><phrase>SUSE</phrase> Manager</phrase> setup procedure.</para>
</listitem>
<listitem>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> Server and <phrase><phrase>SUSE</phrase> Manager</phrase> Proxy instances are expected to run in a network configuration that provides you control over DNS entries and that is shielded from the Internet at large. Within this network configuration DNS (Domain Name Service) resolution must be provided, such that <literal>hostname -f</literal> returns the FQDN (Full Qualified Domain Name). The DNS resolution is not only important for the <phrase><phrase>SUSE</phrase> Manager</phrase> Server procedure but is also important when clients are configured to be managed via <phrase><phrase>SUSE</phrase> Manager</phrase> . Configuring DNS is Cloud Framework dependent, please refer to the cloud service provider documentation for detailed instructions.</para>
</listitem>
<listitem>
<para>Minimal free disk space for <phrase><phrase>SUSE</phrase> Manager</phrase> 15G.</para>
<para>For Public Cloud instances we recommend that the repositories and the <phrase><phrase>SUSE</phrase> Manager</phrase>
Server database, and respectively the <phrase><phrase>SUSE</phrase> Manager</phrase>
Proxy squid cache, be located on an external virtual disk.
The details for this setup are provided in <xref linkend="using-separate-storage-volume"/>.</para>
<para>Storing the database and the repositories on an external virtual disk ensures that the data is not lost should the instance need to be terminated for some reason.</para>
</listitem>
</itemizedlist>
<para>Please ensure that the selected instance type matches the requirements listed above.
Although we recommend that the database and the repositories are stored on a separate device it is still recommended to set the root volume size of the instance to 20G.</para>
</sect1>
<sect1 id="setup"><title>Setup</title><orderedlist numeration="arabic">
<listitem>
<para>Run an instance of the <phrase><phrase>SUSE</phrase> Manager</phrase> Server or <phrase><phrase>SUSE</phrase> Manager</phrase> Proxy image as published by SUSE.</para>
<para>The images are identifiable by the suse, manager, server or proxy, and byos keywords in each public cloud environment.</para>
<para>The <phrase><phrase>SUSE</phrase> Manager</phrase>
instance must run in a network access restricted environment such as the private subnet of a VPC or with an appropriate firewall setting such that it can only be accessed by machines in the IP ranges you use.
A generally accessible <phrase><phrase>SUSE</phrase> Manager</phrase>
instance violates the terms of the <phrase><phrase>SUSE</phrase> Manager</phrase>
EULA.
Access to the web interface of SUSE Manager requires https.</para>
</listitem>
<listitem>
<para>Setup the hostname as follows:</para>
<para><phrase><phrase>SUSE</phrase> Manager</phrase>
requires a stable and reliable hostname and does not take kindly to hostname changes.
All commands provided need to be executed as the <emphasis role="strong">root</emphasis> user.
.. Disable hostname setup in the dhcp configuration file: <filename>/etc/sysconfig/network/dhcp</filename></para>
<para>+</para>
<screen>DHCLIENT_SET_HOSTNAME="no"</screen>
<orderedlist numeration="loweralpha">
<listitem>
<para>Set the hostname to a name of your choice. Please note it is important to provide the <replaceable>system name</replaceable> and not the <replaceable>fully qualified hostname</replaceable> to the <filename>hostnamectl</filename> command.</para>
<para>It is expected that the Fully Qualified Domain Name (FQDN) is set by the cloud framework; for example if  <emphasis role="strong">cloud_instance.cloud.net</emphasis> is the fully qualified name than <emphasis role="strong">cloud_instance</emphasis> is the system name and <emphasis role="strong">cloud.net</emphasis> is the domain name.</para>
<para>In the following example we will change the system name to <emphasis role="strong">suma</emphasis></para>
<screen>$ hostnamectl set-hostname suma</screen>
<para>The fully qualified hostname is now locally set to <emphasis role="strong">suma.cloud.net</emphasis>.
Once the hostname is set locally a DNS entry needs to be created in your network environment such that domain name resolution works properly.</para>
<para>Alternatively to force proper resolution of the name on the <phrase><phrase>SUSE</phrase> Manager</phrase>
system you may alter the <filename>/etc/hosts</filename>
file as follows:</para>
<screen>$ echo "${local_address} suma.cloud.net suma" &gt;&gt; /etc/hosts</screen>
<para>The current value for the <replaceable>local_address</replaceable>, can be obtained from the public cloud Web console or from within a terminal session as follows:
<emphasis role="strong">*</emphasis> Obtain local ip address from within Amazon EC2 instance</para>
<para>+</para>
<screen>$ ec2metadata --local-ipv4</screen>
<itemizedlist>
<listitem>
<para>Obtain local ip address from within Google Compute Engine instance</para>
<screen>$ gcemetadata --query instance --network-interfaces --ip</screen>
</listitem>
<listitem>
<para>Obtain local ip address from within Microsoft Azure instance</para>
<screen>$ azuremetadata --internal-ip</screen>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<para>Note that forcing the DNS resolution to work via modification of the <filename>/etc/hosts</filename>
file will allow the <filename>yast2 susemanagersetup</filename>
procedure to work.
However, if DNS resolution is not properly configured this also implies that any client that is to be managed via this <phrase><phrase>SUSE</phrase> Manager</phrase>
instance must also receive the same modification to <filename>/etc/hosts</filename>
.</para>
<para>+
One more aspect of hostname resolution is the <filename>/etc/resolv.conf</filename>
file.
Depending on the order of your setup, i.e.
if you started the <phrase><phrase>SUSE</phrase> Manager</phrase>
instance prior to setting up DNS services the file may not contain the appropriate <emphasis role="strong">search</emphasis> directive.
Double check that the proper search directive exists in <filename>/etc/resolv.conf</filename>
.
In our example the directive would be <emphasis role="strong">search cloud.net</emphasis>.
If the directive is missing add it to the file.</para>
<para>+
Reference information for the DNS record update is provided below.</para>
<orderedlist numeration="loweralpha">
<listitem>
<para>For an update of the DNS records for the instance within the DNS service of your network environment, refer to the cloud service provider documentation for detailed instructions:</para>
<itemizedlist>
<listitem>
<para><ulink url="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-dns.html"> DNS setup on Amazon EC2</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://cloud.google.com/compute/docs/networking"> DNS setup on Google Compute Engine</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://azure.microsoft.com/en-us/documentation/articles/dns-operations-recordsets"> DNS setup on Microsoft Azure</ulink></para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</listitem>
<listitem>
<para>Configure <phrase><phrase>SUSE</phrase> Manager</phrase></para>
<itemizedlist>
<listitem>
<para>If you run a <phrase><phrase>SUSE</phrase> Manager</phrase> Server instance run YaST as shown below after the instance is launched, the external storage is attached and prepared according to <xref linkend="using-separate-storage-volume"/>, and the DNS resolution is set up as described earlier.</para>
<screen>$ /sbin/yast2 susemanagersetup</screen>
<para>Note that the setup of <phrase><phrase>SUSE</phrase> Manager</phrase>
from this point forward does not differ from the documentation in the <ulink url="https://www.suse.com/documentation/suse_manager">SUSE
Manager Guide</ulink>.</para>
<para>The <phrase><phrase>SUSE</phrase> Manager</phrase>
setup procedure in YaST is designed as a one pass process with no rollback or cleanup capability.
Therefore, if the setup procedure is interrupted or ends with an error, it is not recommended to attempt a recovery as a reapate of the setup process or attempts to manually "fix" the configuration are most likely to fail and result in a broken <phrase><phrase>SUSE</phrase> Manager</phrase>
installation.
In case of any errors we recommend to start a new instance in order to run a fresh setup procedure on a clean system.</para>
<para>If you are prompted with a message that there is not enough space available for the setup of <phrase><phrase>SUSE</phrase> Manager</phrase>
verify that your root volume is at least 20GB and double check that the instructions in <xref linkend="using-separate-storage-volume"/> had the desired effects.</para>
<para><phrase><phrase>SUSE</phrase> Manager</phrase>
Server for the Public Cloud comes with a bootstrap data module pre-installed that contains optimized package lists for bootstrapping instances started from SUSE Linux Enterprise images published by SUSE.
If you intend to register such an instance, make sure when creating the bootstrap repository you run the mgr-create-bootstrap-repo script as follows:</para>
<screen>$ mgr-create-bootstrap-repo --datamodule=mgr_pubcloud_bootstrap_data -c SLE-12-SP1-x86_64</screen>
<para>The above example creates a bootstrap repository suitable for SUSE Linux Enterprise Server 12 SP1 instances.
See <ulink url="https://www.suse.com/documentation/suse-manager-3/book.suma.getting-started/data/create_tools_repository.html">
Creating the SUSE Manger Tools Repository</ulink> for more information on bootstrapping.</para>
<para>Prior to registering instances started from on demand images remove the following packages from the instance to be registered:
…​ cloud-regionsrv-client
…​ <emphasis role="strong">For Amazon EC2</emphasis></para>
<para>+
regionServiceClientConfigEC2</para>
<para>+
regionServiceCertsEC2</para>
<orderedlist numeration="lowerroman">
<listitem>
<para><emphasis role="strong">For Google Compute Engine</emphasis></para>
<para>cloud-regionsrv-client-plugin-gce</para>
<para>regionServiceClientConfigGCE</para>
<para>regionServiceCertsGCE</para>
</listitem>
<listitem>
<para><emphasis role="strong">For Microsoft Azure</emphasis></para>
<para>regionServiceClientConfigAzure</para>
<para>regionServiceCertsAzure</para>
</listitem>
</orderedlist>
</listitem>
</itemizedlist>
<para>If these packages are not removed it is possible to create interference between the repositories provided by <phrase><phrase>SUSE</phrase> Manager</phrase>
and the repositories provided by the SUSE operated update infrastructure.</para>
<para>+
Additionally remove the line from the <filename>/etc/hosts</filename>
file that contains the <emphasis role="strong">susecloud.net</emphasis> reference.</para>
<itemizedlist>
<listitem>
<para>If you run a <phrase><phrase>SUSE</phrase> Manager</phrase> Proxy instance</para>
<para>Launch the instance, optionally with external storage configured.
If you use external storage (recommended), prepare it according to <xref linkend="using-separate-storage-volume"/>.
It is recommended but not required to prepare the storage before configuring <phrase><phrase>SUSE</phrase> Manager</phrase>
proxy, as the suma-storage script will migrate any existing cached data to the external storage.
After preparing the instance, register the system with the parent SUSE Manager, which could be a <phrase><phrase>SUSE</phrase> Manager</phrase>
Server or another <phrase><phrase>SUSE</phrase> Manager</phrase>
Proxy.
See the <ulink url="https://www.suse.com/documentation/suse-manager-3/singlehtml/suse_manager21/book_susemanager_proxyquick/book_susemanager_proxyquick.html"> SUSE Manager Proxy Setup guide</ulink> for details.
Once registered, run</para>
<screen>$ /usr/sbin/configure-proxy.sh</screen>
<para>to configure your <phrase><phrase>SUSE</phrase> Manager</phrase>
Proxy instance.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>After the completion of the configuration step, <phrase><phrase>SUSE</phrase> Manager</phrase> should be functional and running. For <phrase><phrase>SUSE</phrase> Manager</phrase> Server, the setup process created an administrator user with following user name:</para>
<itemizedlist>
<listitem>
<para>User name: <literal>admin</literal></para>
<table frame="all" rowsep="1" colsep="1">
<title>Account credentials for admin user</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33.3333*"/>
<colspec colname="col_2" colwidth="33.3333*"/>
<colspec colname="col_3" colwidth="33.3334*"/>
<thead>
<row>
<entry><para>Amazon EC2</para></entry>
<entry><para>Google Compute Engine</para></entry>
<entry><para>Microsoft Azure</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para><replaceable>Instance-ID</replaceable></para></entry>
<entry><para><replaceable>Instance-ID</replaceable></para></entry>
<entry><para><replaceable>Instance-Name</replaceable><emphasis role="strong">-suma</emphasis></para></entry>
</row>
</tbody>
</tgroup>
</table>
<para>The current value for the <replaceable>Instance-ID</replaceable> or <replaceable>Instance-Name</replaceable> in case of the Azure Cloud, can be obtained from the public cloud Web console or from within a terminal session as follows:
** Obtain instance id from within Amazon EC2 instance</para>
<para>+</para>
<screen>$ ec2metadata --instance-id</screen>
<itemizedlist>
<listitem>
<para>Obtain instance id from within Google Compute Engine instance</para>
<screen>$ gcemetadata --query instance --id</screen>
</listitem>
<listitem>
<para>Obtain instance name from within Microsoft Azure instance</para>
<screen>$ azuremetadata --instance-name</screen>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
<para>After logging in through the <phrase><phrase>SUSE</phrase> Manager</phrase>
Server Web UI, <emphasis role="strong">change</emphasis> the default password.</para>
<para>+
{susemgr}
Proxy does not have administration Web interface itself.
It can be managed through its parent <phrase><phrase>SUSE</phrase> Manager</phrase>
Server.</para>
</listitem>
</orderedlist>
<sect2 id="using-separate-storage-volume"><title>Using Separate Storage Volume</title><para>We recommend that the repositories and the database for <phrase><phrase>SUSE</phrase> Manager</phrase>
be stored on a virtual storage device.
This best practice will avoid data loss in cases where the <phrase><phrase>SUSE</phrase> Manager</phrase>
instance may need to be terminated.
These steps <emphasis role="strong">must</emphasis> be performed <emphasis role="strong">prior</emphasis> to running the YaST <phrase><phrase>SUSE</phrase> Manager</phrase>
 setup procedure.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Provision a disk device in the public cloud environment, refer to the cloud service provider documentation for detailed instructions. The size of the disk is dependent on the number of distributions and channels you intend to manage with <phrase><phrase>SUSE</phrase> Manager</phrase> . For sizing information refer to <ulink url="https://www.suse.com/support/kb/doc.php?id=7015050">SUSE Manager sizing examples</ulink>. A rule of thumb is 25 GB per distribution per channel.</para>
</listitem>
<listitem>
<para>Once attached the device appears as Unix device node in your instance. For the following command to work this device node name is required. In many cases the attached storage appears as <emphasis role="strong">/dev/sdb</emphasis>. In order to check which disk devices exists on your system, call the following command:</para>
<screen>$ hwinfo --disk | grep -E "Device File:"</screen>
</listitem>
<listitem>
<para>With the device name at hand the process of re-linking the directories in the filesystem <phrase><phrase>SUSE</phrase> Manager</phrase> uses to store data is handled by the suma-storage script. In the following example we use <filename>/dev/sdb</filename> as the device name.</para>
<screen>$ /usr/bin/suma-storage /dev/sdb</screen>
<para>After the call all database and repository files used by SUSE Manager Server are moved to the newly created xfs based storage.
In case your instance is a <phrase><phrase>SUSE</phrase> Manager</phrase>
Proxy, the script will move the Squid cache, which caches the software packages, to the newly created storage.
The xfs partition is mounted below the path <filename>/manager_storage</filename>
.</para>
</listitem>
<listitem>
<para>Create an entry in /etc/fstab (optional)</para>
<para>Different cloud frameworks treat the attachment of external storage devices differently at instance boot time.
Please refer to the cloud environment documentation for guidance about the fstab entry.</para>
<para>If your cloud framework recommends to add an fstab entry, add the following line to the <emphasis role="strong">/etc/fstab</emphasis> file.</para>
<screen>/dev/sdb1 /manager_storage xfs defaults 1 1</screen>
</listitem>
</orderedlist>
</sect2>
</sect1>
<sect1 id="registration-of-cloned-systems"><title>Registration of Cloned Systems</title><para><phrase><phrase>SUSE</phrase> Manager</phrase>
treats systems (instances) with the same system ID as one.
This implies that one instance will mask another if the instances have the same system ID.
This situation occurs by launching multiple instances from the same image or when an image has been created from a running instance.
Thus prior to registering a new instance complete step 5.1 or 5.2,  depending on the distribution on the following wiki.</para>
<para><ulink url="http://wiki.novell.com/index.php/SUSE_Manager/Register_Clones">http://wiki.novell.com/index.php/SUSE_Manager/Register_Clones</ulink></para>
</sect1>
</chapter>
<chapter id="advanced.topics.optimizing.scalability"><title>Optimization and Scalability</title><sect1 id="optimizing.apache-tomcat"><title>Optimizing Apache and Tomcat</title><warning>
<title>Altering Apache and Tomcat Parameters</title>
<para>Apache and Tomcat Parameters should only be modified with support or consulting as these parameters can have severe and catastrophic performance impacts on your server when improperly adjusted.
SUSE will not be able to provide support for catastrophic failure when these advanced parameters are modified without consultation.
Tuning values for Apache httpd and Tomcat requires that you align these parameters with your server hardware.
Furthermore testing of these altered values should be performed within a test environment.</para>
</warning>
<sect2 id="at.apache.httpd.maxclient.parameter"><title>Apache’s httpd MaxClients Parameter</title><para>The <literal role="parameter">MaxClients</literal> setting determines the number of Apache httpd processes, and thus limits the number of client connections that can be made at the same time (SUSE Manager uses the pre-fork MultiProcessing Modules).
The default value for <literal role="parameter">MaxClients</literal> in SUSE Manager is 150.
If you need to set the <literal role="parameter">MaxClients</literal> value greater than 150, Apache httpd’s ServerLimit setting and Tomcat’s <literal role="parameter">maxThreads</literal> must also be increased accordingly (see below).</para>
<warning>
<para>The Apache httpd <literal role="parameter">MaxClients</literal> parameter must always be less or equal than Tomcat’s <literal role="parameter">maxThreads</literal> parameter!</para>
</warning>
<para>If the <literal role="parameter">MaxClients</literal> value is reached while the software is running, new client connections will be queued and forced to wait, this may result in timeouts.
You can check the Apache httpd’s <filename>error.log</filename> for details:</para>
<screen>[error] Server reached MaxClients setting, consider increasing the MaxClients setting</screen>
<para>The default <literal role="parameter">MaxClients</literal> parameter can be overridden on SUSE Manager by editing the <filename>server-tuning.conf</filename> file located at <literal role="systemitem">/etc/apache2/</literal>.
For example <filename>server-tuning.conf</filename> file:</para>
<screen># prefork MPM
   &lt;IfModule prefork.c&gt;
           # number of server processes to start
           # http://httpd.apache.org/docs/2.2/mod/mpm_common.html#startservers
           StartServers         5
           # minimum number of server processes which are kept spare
           # http://httpd.apache.org/docs/2.2/mod/prefork.html#minspareservers
           MinSpareServers      5
           # maximum number of server processes which are kept spare
           # http://httpd.apache.org/docs/2.2/mod/prefork.html#maxspareservers
           MaxSpareServers     10
           # highest possible MaxClients setting for the lifetime of the Apache process.
           # http://httpd.apache.org/docs/2.2/mod/mpm_common.html#serverlimit
           ServerLimit        150
           # maximum number of server processes allowed to start
           # http://httpd.apache.org/docs/2.2/mod/mpm_common.html#maxclients
           MaxClients         150
           # maximum number of requests a server process serves
           # http://httpd.apache.org/docs/2.2/mod/mpm_common.html#maxrequestsperchild
           MaxRequestsPerChild  10000
   &lt;/IfModule&gt;</screen>
</sect2>
<sect2 id="at.tomcat.maxthreads.parameter"><title>Tomcat’s maxThreads Parameter</title><para>Tomcat’s <literal role="parameter">maxThreads</literal> represents the maximum number of request processing threads that it will create.
This value determines the maximum number of simultaneous requests that it is able to handle.
All HTTP requests to the SUSE Manager server (from clients, browsers, XMLRPC API scripts, etc.) are handled by Apache httpd, and some of them are routed to Tomcat for further processing.
It is thus important that Tomcat is able to serve the same amount of simultaneous requests that Apache httpd is able to serve in the worst case.
The default value for SUSE Manager is 200 and should always be equal or greater than Apache httpd’s <literal role="parameter">MaxClients</literal>.
The <literal role="parameter">maxThreads</literal> value is located within the <filename>server.xml</filename> file located at <literal role="systemitem">/etc/tomcat/</literal>.</para>
<para>Example relevant lines in <filename>server.xml</filename>:</para>
<screen>&lt;Connector port="8009" protocol="AJP/1.3" redirectPort="8443" URIEncoding="UTF-8" address="127.0.0.1" maxThreads="200" connectionTimeout="20000"/&gt;
&lt;Connector port="8009" protocol="AJP/1.3" redirectPort="8443" URIEncoding="UTF-8" address="::1" maxThreads="200" connectionTimeout="20000"/&gt;</screen>
<note>
<title>Tuning Notes</title>
<para>When configuring Apache httpd’s <literal role="parameter">MaxClients</literal> and Tomcat’s <literal role="parameter">maxThreads</literal> parameters you should also take into consideration that each HTTP connection will need one or more database connections.
If the RDBMS is not able to serve an adequate amount of connections, issues will arise.
See the following equation for a rough calculation of the needed amount of database connections:</para>
<screen>((3 * java_max) +  apache_max + 60)</screen>
<para>Where:</para>
<itemizedlist>
<listitem>
<para>3 is the number of Java processes the server runs with pooled connections (Tomcat, Taskomatic and Search)</para>
</listitem>
<listitem>
<para>java_max is the maximum number of connections per Java pool (20 by default, changeable in <filename>/etc/rhn/rhn.conf</filename> via the hibernate.c3p0.max_size parameter)</para>
</listitem>
<listitem>
<para>apache_max is Apache httpd’s <literal role="parameter">MaxClients</literal></para>
</listitem>
<listitem>
<para>60 is the maximum expected number of extra connections for local processes and other uses</para>
</listitem>
</itemizedlist>
</note>
</sect2>
</sect1>
<sect1 id="optimizing.big"><title>Big Scale Deployment (1000 Minions or More)</title><para>In the following sections find considerations about a big scale deployment.
In this context, a big scale compromises 1000 minions or more.</para>
<sect2 id="optimizing.big.general"><title>General Recommendations</title><para><phrase>SUSE</phrase> recommends the following in a big scale <phrase><phrase>SUSE</phrase> Manager</phrase> deployment:</para>
<itemizedlist>
<listitem>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> servers should have at least 8 recent x86 cores, 32 GiB of RAM, and, most important, fast I/O devices such as at least an SSD (2 SSDs in RAID-0 are strongly recommended).</para>
</listitem>
<listitem>
<para>Proxies with many minions (hundreds) should have at least 2 recent x86 cores and 16 GiB of RAM.</para>
</listitem>
<listitem>
<para>Use one <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> per 500-1000 clients.
Keep into account that download time depends on network capacity.
Here is a rough example calculation with physical link speed of 1 GB/s:</para>
<screen>400 Megabytes  *        3000       /      119 Megabyte/s        / 60
= 169 Minutes</screen>
<para>This is:</para>
<screen>Size of updates * Number of minions / Theoretical download speed / 60</screen>
</listitem>
<listitem>
<para>Depending on hardware you can accept hundreds of minion keys.</para>
</listitem>
<listitem>
<para>Plan time for onboarding minions— at least one hour per 1000 minions.</para>
</listitem>
<listitem>
<para>It is not recommended onboarding more than approx.
1000 minions directly to the <phrase><phrase>SUSE</phrase> Manager</phrase> server— proxies should be used instead.
This is because every minion can use up to 3 TCP connections simultaneously, and too many TCP connections can cause performance issues.</para>
</listitem>
<listitem>
<para>If the following error appears in output of <command>dmesg</command>, you probably have an excessive number of minions attached to a single <phrase><phrase>SUSE</phrase> Manager</phrase> server or proxy for the ARP cache to contain all of their addresses:</para>
<screen>kernel: neighbour table overflow</screen>
<para>In that case, increase the ARP cache values via <literal role="systemitem">sysctl</literal>, for example, by adding the following lines to <filename>/etc/sysctl.conf</filename>:</para>
<screen>net.ipv4.neigh.default.gc_thresh1 = 4096
net.ipv4.neigh.default.gc_thresh2 = 8192
net.ipv4.neigh.default.gc_thresh3 = 16384
net.ipv4.neigh.default.gc_interval = 60
net.ipv4.neigh.default.gc_stale_time = 120</screen>
</listitem>
</itemizedlist>
<tip>
<title>Start Small and Scale Up</title>
<para>Always start small and scale up gradually.
Keep the server monitored in order to identify possible issues early.</para>
</tip>
</sect2>
<sect2 id="optimizing.big.tuning"><title>Tuning Proposals</title><para><phrase>SUSE</phrase> proposes the following tuning settings in a big scale <phrase><phrase>SUSE</phrase> Manager</phrase> deployment:</para>
<itemizedlist>
<listitem>
<para>Increase the maximum Tomcat heap memory to face a potentially long queue of Salt return results. Set 8 GiB instead of the current default 1 GiB: parameter <literal role="parameter">Xmx1G</literal> in <filename>/etc/sysconfig/tomcat</filename> (affects onboarding and Action execution).</para>
</listitem>
<listitem>
<para>Increase the number of Taskomatic workers, allowing to parallelize work on a high number of separate jobs. Set parameter <literal role="parameter">org.quartz.threadPool.threadCount = 100</literal> in <filename>/etc/rhn/rhn.conf</filename> (affects onboarding and staging).</para>
</listitem>
<listitem>
<para>Allow Taskomatic to check for runnable jobs more frequently to reduce latency. Set parameter <literal role="parameter">org.quartz.scheduler.idleWaitTime = 1000</literal> in <filename>/etc/rhn/rhn.conf</filename> (affects onboarding, staging and Action execution).</para>
</listitem>
<listitem>
<para>Increase Tomcat’s Salt return result workers to allow parallelizing work on a high number of Salt return results. Set parameter <literal role="parameter">java.message_queue_thread_pool_size = 100</literal> in <filename>/etc/rhn/rhn.conf</filename> (affects patching).</para>
</listitem>
<listitem>
<para>Increase the number of PostgreSQL connections available to Java applications (Tomcat, Taskomatic) according to the previous parameters, otherwise extra workers will starve waiting for a connection. Set parameter <literal role="parameter">hibernate.c3p0.max_size = 150</literal> in <filename>/etc/rhn/rhn.conf</filename> (affects all minion operations). Make sure enough PostgreSQL connections are configured before changing this parameter — refer to <literal>smdba system-check autotuning --help</literal> to get automatic tuning of the PostgreSQL configuration file while changing the number of available connections. Additional manual tuning is usually not necessary but might be required depending on scale and exact use cases.</para>
</listitem>
<listitem>
<para>Increase Salt’s presence ping timeouts if responses might come back later than the defaults. Set parameters <literal role="parameter">salt_presence_ping_timeout = 20</literal> and <literal role="parameter">salt_presence_ping_timeout = 20</literal> in <filename>/etc/rhn/rhn.conf</filename> (affects all minion operations).</para>
</listitem>
<listitem>
<para>Increase the Salt master worker threads allowing to parallelize more requests (otherwise Tomcat and Taskomatic workers will starve waiting for the Salt API). Set parameter <literal role="parameter">worker_threads: 100</literal> in <filename>/etc/salt/master.d/susemanager.conf</filename> (affects onboarding and patching).</para>
</listitem>
</itemizedlist>
<para>Note that increasing the number of Postgres connections and Salt workers will require more RAM, make sure the <phrase><phrase>SUSE</phrase> Manager</phrase> server is monitored and swap is never used.</para>
<para>Also note the above settings should be regarded as guidelines—they have been tested to be safe but care should be exercised when changing them, and consulting support is highly recommended.</para>
</sect2>
</sect1>
</chapter>
<chapter id="_salt_ssh_integration"><title>Salt SSH Integration</title><para>Version 1, 2018-03-20</para>
<para>The following topic provides an overview of the <ulink url="https://docs.saltstack.com/en/latest/topics/ssh/">Salt SSH</ulink> integration with SUSE Manager. This integration adds support for both ssh-push and ssh-push-tunnel connections for Salt minions.</para>

<sect1 id="ssh-push-overview"><title>SSH Push Overview</title><para>Like the traditional stack, Salt minions may use an ssh connection to manage minions in place of <ulink url="https://docs.saltstack.com/en/latest/topics/transports/zeromq.html">Zeromq</ulink>. This additional functionality is based on Salt SSH. Salt SSH enables you to execute salt commands and states via ssh without ever needing to install a salt-minion.</para>
<para>When the server executes an action on a minion an ssh connection is made on demand. This connection differs from the always-connected mode used by minions managed via Zeromq.</para>
<para>In SUSE Manager there are two ssh-push methods. In both use cases the server initiates an ssh connection to the minion in order to execute a Salt call using <literal>salt-ssh</literal>. The difference in the two methods is how <literal>zypper/<replaceable>yum</replaceable></literal>  initially connects to the server repositories:</para>
<variablelist id="zypper-connection-methods">
<title>zypper Connection Methods:</title>
<varlistentry>
<term>ssh-push</term>
<listitem>
<para>zypper works as usual. The http(s) connection to the server is created directly.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>ssh-push-tunnel</term>
<listitem>
<para>The server creates an http(s) connection through an ssh tunnel. The http(s) connection initiated by <literal>zypper</literal> is redirected through the tunnel by means of <literal>/etc/hosts</literal> aliasing (see below). This method should be used for in place firewall setups that block http(s) connections from a minion to the server.</para>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="salt-ssh-integration"><title>Salt SSH Integration</title><para>As with all Salt calls, SUSE Manager invokes <literal>salt-ssh</literal> via the <literal>salt-api</literal>.</para>
<para>Salt SSH relies on a Roster to obtain details such as hostname, ports, and ssh parameters of an ssh minion. SUSE Manager keeps these details in the database and makes them available to Salt by generating a temporary Roster file for each salt-ssh call. The location of the temporary Roster file is supplied to salt-ssh using the <literal>--roster-file= option</literal>.</para>
<sect2 id="authentication-types"><title>Authentication</title><para>salt-ssh supports both password and key authentication. SUSE Manager uses both methods:</para>
<variablelist id="password-and-key-authentication">
<title>Password and Key Authentication:</title>
<varlistentry>
<term>Bootstrapping Authentication</term>
<listitem>
<para>Password authentication is used only when bootstrapping. During the bootstrap step the key of the server is not authorized on the minion and therefore a password must be utilized for a connection to be made. The password is used transiently in a temporary roster file used for bootstrapping. This password is not stored.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Common Salt Call Authentication</term>
<listitem>
<para>All other common salt calls use key authentication. During the bootstrap step the ssh key of the server is authorized on the minion (added to a minion’s <literal>~/.ssh/authorized_keys</literal> file). Therefore subsequent calls no longer require a password.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="_user_account_for_salt_ssh_calls"><title>User Account for salt-ssh Calls</title><para>The user for <literal>salt-ssh</literal> calls made by SUSE Manager is taken from the <literal>ssh_push_sudo_user</literal> setting. The default value of this is <literal>root</literal>.</para>
<para>If the value of <literal>ssh_push_sudo_user</literal> is not <literal>root</literal> then the <literal>--sudo</literal> options of <literal>salt-ssh</literal> are used.</para>
</sect2>
</sect1>
<sect1 id="_ssh_push_tunnel_http_s_redirection"><title>SSH Push Tunnel HTTP(s) Redirection</title><para>For the <literal>ssh-push-tunnel</literal> method the traffic originating from zypper/yum has to be redirected through an ssh tunnel in order to bypass any firewall blocking a direct connection from the minion to the server.</para>
<para>This is achieved by using port <literal>1233</literal> in the repo url:</para>
<screen>https://suma-server:1233/repourl...</screen>
<para>Next alias the suma-server hostname to localhost in /etc/hosts:</para>
<screen>127.0.0.1       localhost    suma-server</screen>
<para>The server creates a reverse ssh tunnel that connects <literal>localhost:1233</literal> on the minion to <literal>suma-server:443</literal> (<literal>ssh …​ -R 1233:suma-server:443</literal>)</para>
<para>The result is that zypper/yum will actually connect to <literal>localhost:1233</literal> which is then forwarded to <literal>suma-server:443</literal> via the ssh tunnel.</para>
<para>This implies that zypper can contact the server only if the tunnel is open. This happens only when the servers executes an action on the minion. Manual zypper operations that require server connectivity are not possible in this case.</para>
</sect1>
<sect1 id="_suse_manager_salt_ssh_call_sequence"><title>SUSE Manager Salt SSH Call Sequence</title><orderedlist numeration="arabic">
<listitem>
<para>Prepare the Salt Roster for the call</para>
<orderedlist numeration="loweralpha">
<listitem>
<para>Create remote port forwarding option IF the contact method is ssh-push-tunnel</para>
</listitem>
<listitem>
<para>Compute the ProxyCommand IF the minion is connected through a proxy</para>
</listitem>
<listitem>
<para>create Roster content:</para>
<itemizedlist>
<listitem>
<para><literal>hostname</literal></para>
</listitem>
<listitem>
<para><literal>user</literal></para>
</listitem>
<listitem>
<para><literal>port</literal></para>
</listitem>
<listitem>
<para><literal>remote_port_forwards</literal>: The remote port forwarding ssh option</para>
</listitem>
<listitem>
<para><literal>ssh_options</literal>: other ssh options:</para>
<itemizedlist>
<listitem>
<para><literal>ProxyCommand</literal>: If the minion connects through a SUMA proxy</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para><literal>timeout</literal>: default 180s</para>
</listitem>
<listitem>
<para><literal>minion_opts</literal>:</para>
<itemizedlist>
<listitem>
<para><literal>master</literal>: set to the minion id if contact method is ssh-push-tunnel</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</listitem>
<listitem>
<para>create a temporary Roster file</para>
</listitem>
<listitem>
<para>execute a synchronous salt-ssh call via the API</para>
</listitem>
<listitem>
<para>remove the temporary Roster file</para>
</listitem>
</orderedlist>
<para><emphasis role="strong">Additional Information:</emphasis></para>
<para><ulink url="https://github.com/SUSE/spacewalk/blob/Manager/java/code/src/com/suse/manager/webui/services/impl/SaltSSHService.java">SaltSSHService.callSyncSSH</ulink></para>
</sect1>
<sect1 id="_bootstrap_process_sequence"><title>Bootstrap Process Sequence</title><para>Bootstrapping minions uses salt-ssh under the hood. This happens for both regular and ssh minion.</para>
<para>The bootstrap sequence is a bit different than the regular salt-ssh call:</para>
<orderedlist numeration="arabic">
<listitem>
<para>For a regular minion generate and pre-authorize the Salt key of the minion</para>
</listitem>
<listitem>
<para>If this is an ssh minion and a proxy was selected retrieve the ssh public key of the proxy using the mgrutil.chain_ssh_cmd runner. The runner copies the public key of the proxy to the server using ssh. If needed it can chain multiple ssh commands to reach the proxy across multiple hops.</para>
</listitem>
<listitem>
<para>Generate pillar data for bootstrap. Pillar data contains:</para>
<variablelist>
<varlistentry>
<term>mgr_server</term>
<listitem>
<para>The hostname of the SUSE Manager server</para>
</listitem>
</varlistentry>
<varlistentry>
<term>minion_id</term>
<listitem>
<para>The hostname of the minion to bootstrap</para>
</listitem>
</varlistentry>
<varlistentry>
<term>contact_method</term>
<listitem>
<para>The connection type</para>
</listitem>
</varlistentry>
<varlistentry>
<term>mgr_sudo_user</term>
<listitem>
<para>The user for salt-ssh</para>
</listitem>
</varlistentry>
<varlistentry>
<term>activation_key</term>
<listitem>
<para>If selected</para>
</listitem>
</varlistentry>
<varlistentry>
<term>minion_pub</term>
<listitem>
<para>The public minion key that was pre-authorized</para>
</listitem>
</varlistentry>
<varlistentry>
<term>minion_pem</term>
<listitem>
<para>The private minion key that was pre-authorized</para>
</listitem>
</varlistentry>
<varlistentry>
<term>proxy_pub_key</term>
<listitem>
<para>The public ssh key that was retrieved from the proxy if the target is an ssh minion and a proxy was selected</para>
</listitem>
</varlistentry>
</variablelist>
</listitem>
<listitem>
<para>If contact method is <literal>ssh-push-tunnel</literal> fill the remote port forwarding option</para>
</listitem>
<listitem>
<para>if the minion connects through a SUMA proxy compute the <literal>ProxyCommand</literal> option. This depends on the path used to connect to the proxy, e.g. server → proxy1 → proxy2 → minion</para>
</listitem>
<listitem>
<para>generate the roster for bootstrap into a temporary file. This contains:</para>
<itemizedlist>
<listitem>
<para><literal>hostname</literal></para>
</listitem>
<listitem>
<para><literal>user</literal></para>
</listitem>
<listitem>
<para><literal>password</literal></para>
</listitem>
<listitem>
<para><literal>port</literal></para>
</listitem>
<listitem>
<para><literal>remote_port_forwards</literal>: the remote port forwarding ssh option</para>
</listitem>
<listitem>
<para><literal>ssh_options</literal>: other ssh options:</para>
<itemizedlist>
<listitem>
<para><literal>ProxyCommand</literal> if the minion connects through a SUMA proxy</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para><literal>timeout</literal>: default 180s</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Via the Salt API execute:</para>
<screen>salt-ssh --roster-file=&lt;temporary_bootstrap_roster&gt; minion state.apply certs,&lt;bootstrap_state&gt;`</screen>
<note>
<para> &lt;bootstrap_state&gt; replaceable by <emphasis role="strong">bootstrap</emphasis> for regular minions or <emphasis role="strong">ssh_bootstrap</emphasis> for ssh minions.</para>
</note>
</listitem>
</orderedlist>
<para>The following image provides an overview of the Salt SSH bootstrap process.</para>
<figure>
<title>Salt SSH Bootstrap Process</title>
<mediaobject><textobject role="description"><phrase>salt ssh bootstrap process</phrase></textobject><imageobject>
<imagedata fileref="salt-ssh-bootstrap-process.png"/>
</imageobject></mediaobject>
</figure>
<para><emphasis role="strong">Additional Information:</emphasis></para>
<itemizedlist>
<listitem>
<para><ulink url="https://github.com/SUSE/spacewalk/blob/Manager/java/code/src/com/suse/manager/webui/controllers/utils/RegularMinionBootstrapper.java">SSHMinionBootstrapper.java</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://github.com/SUSE/spacewalk/blob/Manager/java/code/src/com/suse/manager/webui/controllers/utils/SSHMinionBootstrapper.java">RegularMinionBootstrapper.java</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://github.com/SUSE/spacewalk/blob/Manager/susemanager-utils/susemanager-sls/salt/bootstrap/init.sls">bootstrap/init.sls</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://github.com/SUSE/spacewalk/blob/Manager/susemanager-utils/susemanager-sls/salt/ssh_bootstrap/init.sls">ssh_bootstrap/init.sls</ulink></para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="_proxy_support"><title>Proxy Support</title><para>In order to make salt-ssh work with SUSE Managers proxies the ssh connection is chained from one server/proxy to the next. This is also know as multi-hop or multi gateway ssh connection.</para>
<figure>
<title>Salt SSH Proxy Multiple Hops</title>
<mediaobject><textobject role="description"><phrase>salt ssh proxy multi hop</phrase></textobject><imageobject>
<imagedata fileref="salt-ssh-proxy-multi-hop.png"/>
</imageobject></mediaobject>
</figure>
<sect2 id="_the_proxycommand"><title>The ProxyCommand</title><para>In order to redirect the ssh connection through the proxies the ssh <literal>ProxyCommand</literal> option is used. This options invokes an arbitrary command that is expected to connect to the ssh port on the target host. The standard input and output of the command is used by the invoking ssh process to talk to the remote ssh daemon.</para>
<para>The ProxyCommand basically replaces the TCP/IP connection. It doesn’t do any authorization, encryption, etc. Its role is simply to create a byte stream to the remote ssh daemon’s port.</para>
<para>E.g. connecting to a server behind a gateway:</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>salt ssh proxycommand</phrase></textobject><imageobject>
<imagedata fileref="salt-ssh-proxycommand.png"/>
</imageobject></mediaobject>
</informalfigure>
<note>
<para>In this example netcat (nc) is used to pipe port 22 of the target host into the ssh std i/o.</para>
</note>
</sect2>
<sect2 id="_salt_ssh_call_sequence_via_proxy"><title>Salt SSH Call Sequence via Proxy</title><orderedlist numeration="arabic">
<listitem>
<para>SUSE Manager initates the ssh connections as described above.</para>
</listitem>
<listitem>
<para>Additionally the ProxyCommand uses ssh to create a connection from the server to the minion through the proxies.</para>
</listitem>
</orderedlist>
<sect3 id="at-twin-proxies-and-ssh-push"><title>Twin Proxies and SSH Push</title><para>The following example uses the ProxyCommand option with two proxies and the usual ssh-push method:</para>
<screen># 1
/usr/bin/ssh -i /srv/susemanager/salt/salt_ssh/mgr_ssh_id -o StrictHostKeyChecking=no -o User=mgrsshtunnel  proxy1
# 2
/usr/bin/ssh -i /var/lib/spacewalk/mgrsshtunnel/.ssh/id_susemanager_ssh_push -o StrictHostKeyChecking=no -o User=mgrsshtunnel -W minion:22  proxy2</screen>
<orderedlist numeration="arabic">
<title>Steps</title>
<listitem>
<para>connect from the server to the first proxy</para>
</listitem>
<listitem>
<para>connect from the first proxy to the second and forward standard input/output on the client to minion:22 using the -W option.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>salt ssh push push plain sequence</phrase></textobject><imageobject>
<imagedata fileref="salt-ssh-push-push-plain-sequence.png"/>
</imageobject></mediaobject>
</informalfigure>
</sect3>
<sect3 id="at-twin-proxies-and-ssh-push-tunnel"><title>Twin Proxies and SSH Push Tunnel</title><para>The following example uses the ProxyCommand option with two proxies over an ssh-push-tunnel connection:</para>
<screen># 1
/usr/bin/ssh -i /srv/susemanager/salt/salt_ssh/mgr_ssh_id -o User=mgrsshtunnel  proxy1
# 2
/usr/bin/ssh -i /home/mgrsshtunnel/.ssh/id_susemanager_ssh_push -o User=mgrsshtunnel  proxy2
# 3
/usr/bin/ssh -i /home/mgrsshtunnel/.ssh/id_susemanager_ssh_push -o User=root -R 1233:proxy2:443 minion
# 4
/usr/bin/ssh -i /root/.ssh/mgr_own_id -W minion:22 -o User=root minion</screen>
<orderedlist numeration="arabic">
<title>Steps</title>
<listitem>
<para>Connect from the server to the first proxy.</para>
</listitem>
<listitem>
<para>Connect from the first proxy to the second.</para>
</listitem>
<listitem>
<para>connect from the second proxy to the minion and open an reverse tunnel (-R 1233:proxy2:443) from the minion to the https port on the second proxy.</para>
</listitem>
<listitem>
<para>Connect from the minion to itself and forward the std i/o of the server to the ssh port of the minion (-W minion:22). This is equivalent to ssh …​ proxy2 netcat minion 22 and is needed because ssh doesn’t allow to have both the reverse tunnel (-R 1233:proxy2:443) and the standard i/o forwarding (-W minion:22) in the same command.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>salt ssh push push tunnel sequence</phrase></textobject><imageobject>
<imagedata fileref="salt-ssh-push-push-tunnel-sequence.png"/>
</imageobject></mediaobject>
</informalfigure>
<para><emphasis role="strong">Additional Information:</emphasis></para>
<itemizedlist>
<listitem>
<para><ulink url="https://github.com/SUSE/spacewalk/blob/Manager/java/code/src/com/suse/manager/webui/services/impl/SaltSSHService.java">SaltSSHService.sshProxyCommandOption</ulink></para>
</listitem>
</itemizedlist>
</sect3>
</sect2>
</sect1>
<sect1 id="_users_and_ssh_key_management"><title>Users and SSH Key Management</title><para>In order to connect to a proxy the parent server/proxy uses a specific user called <literal>mgrsshtunnel</literal>.</para>
<para>The ssh config <literal>/etc/ssh/sshd_config</literal> of the proxy will force the execution of <literal>`/usr/sbin/mgr-proxy-ssh-force-cmd</literal> when <literal>mgrsshtunnel</literal> connects.</para>
<para><literal>`/usr/sbin/mgr-proxy-ssh-force-cmd</literal> is a simple shell script that allows only the execution of <literal>scp</literal>, <literal>ssh</literal> or <literal>cat</literal> commands.</para>
<para>The connection to the proxy or minion is authorized using ssh keys in the following way:</para>
<orderedlist numeration="arabic">
<listitem>
<para>The server connects to the minion and to the first proxy using the key in <literal>`/srv/susemanager/salt/salt_ssh/mgr_ssh_id</literal>.</para>
</listitem>
<listitem>
<para>Each proxy has its own key pair in <literal>`/home/mgrsshtunnel/.ssh/id_susemanager_ssh_push</literal>.</para>
</listitem>
<listitem>
<para>Each proxy authorizes the key of the parent proxy or server.</para>
</listitem>
<listitem>
<para>The minion authorized its own key.</para>
</listitem>
</orderedlist>
<figure>
<title>Salt SSH Key Authorization Process</title>
<mediaobject><textobject role="description"><phrase>salt ssh push ssh keys</phrase></textobject><imageobject>
<imagedata fileref="salt-ssh-push-ssh-keys.png"/>
</imageobject></mediaobject>
</figure>
<para><emphasis role="strong">Additional Information:</emphasis></para>
<itemizedlist>
<listitem>
<para><ulink url="https://github.com/SUSE/spacewalk/blob/Manager/proxy/proxy/mgr-proxy-ssh-force-cmd">mgr-proxy-ssh-force-cmd</ulink></para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="_repository_access_via_proxy"><title>Repository access via proxy</title><para>For both ssh-push and ssh-push-tunnel the minion connects to the proxy to retrieve packages and repo data.</para>
<para>The difference is how the connection works:</para>
<itemizedlist>
<listitem>
<para>In case of ssh-push, zypper or yum connect directly to the proxy using http(s). This assumes there’s not firewall between the minion and the proxy that would block http connections initiated by the minion.</para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>salt ssh push repo access</phrase></textobject><imageobject>
<imagedata fileref="salt-ssh-push-repo-access.png"/>
</imageobject></mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para>In case of ssh-push-tunnel, the http connection to the proxy is redirected through a reverse ssh tunnel.</para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject><textobject role="description"><phrase>salt ssh push tunnel repo access</phrase></textobject><imageobject>
<imagedata fileref="salt-ssh-push-tunnel-repo-access.png"/>
</imageobject></mediaobject>
</informalfigure>
</sect1>
<sect1 id="_proxy_setup"><title>Proxy setup</title><para>When the <literal>spacewalk-proxy</literal> package is installed on the proxy the user <literal>mgrsshtunnel</literal> is created if it doesn’t already exist.</para>
<para>During the initial configuration with <literal>configure-proxy.sh</literal> the following happens:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Generate a ssh key pair or import an existing one</para>
</listitem>
<listitem>
<para>Retrieve the ssh key of the parent server/proxy in order to authorize it on the proxy</para>
</listitem>
<listitem>
<para>Configure the <literal>sshd</literal> of the proxy to restrict the user <literal>mgrsshtunnel</literal></para>
</listitem>
</orderedlist>
<para>This configuration is done by the <literal>mgr-proxy-ssh-push-init</literal> script. This is called from <literal>configure-proxy.sh</literal> and the user doesn’t have to invoke it manually.</para>
<para>Retrieving the parent key is done by calling an HTTP endpoint on the parent server or proxy.</para>
<orderedlist numeration="arabic">
<listitem>
<para>First <literal>https//$PARENT/pub/id_susemanager_ssh_push.pub</literal> is tried. If the parent is proxy this will return the public ssh key of that proxy.</para>
</listitem>
<listitem>
<para>If a <literal>404</literal> is received then it’s assumed the parent is a server not a proxy and <ulink url="https://$PARENT/rhn/manager/download/saltssh/pubkey"><literal>https://$PARENT/rhn/manager/download/saltssh/pubkey</literal></ulink> is tried.</para>
<orderedlist numeration="loweralpha">
<listitem>
<para>If <literal>/srv/suseemanager/salt/salt_ssh/mgr_ssh_id.pub</literal> already exists on the server it’s returned</para>
</listitem>
<listitem>
<para>If the public key doesn’t exist (because <literal>salt-ssh</literal> has not been invoked yet) generate the key by calling the <literal>mgrutil.ssh_keygen</literal> runner</para>
</listitem>
</orderedlist>
</listitem>
</orderedlist>
<note>
<para>salt-ssh generates a key pair the first time it is invoked in
<literal>/srv/suseemanager/salt/salt_ssh/mgr_ssh_id</literal>. The previous sequence is needed in case a proxy is configured before salt-ssh was invoked for the first time.</para>
</note>
<para><emphasis role="strong">Additional Information:</emphasis></para>
<itemizedlist>
<listitem>
<para><ulink url="https://github.com/SUSE/spacewalk/blob/Manager/java/code/src/com/suse/manager/webui/controllers/SaltSSHController.java">com.suse.manager.webui.controllers.SaltSSHController</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://github.com/SUSE/spacewalk/blob/Manager/susemanager-utils/susemanager-sls/modules/runners/mgrutil.py">mgrutil.ssh_keygen</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://github.com/SUSE/spacewalk/blob/Manager/proxy/proxy/mgr-proxy-ssh-push-init">mgr-proxy-ssh-push-init</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://github.com/SUSE/spacewalk/blob/Manager/proxy/proxy/spacewalk-proxy.spec">spacewalk-proxy.spec</ulink></para>
</listitem>
</itemizedlist>
</sect1>
</chapter>
<chapter id="advanced.topics.monitoring.with.icinga"><title>Monitoring with Icinga</title><sect1 id="at.introduction.to.icinga"><title>Introduction</title><para>This chapter provides guidance on the setup of an Icinga server using SLES {sles-version} {sp-version}.
For more information, see the Official Icinga documentation: <ulink url="http://docs.icinga.org/latest/en/">http://docs.icinga.org/latest/en/</ulink>.</para>
</sect1>
<sect1 id="at.installation.and.basic.configuration.icinga"><title>Installation and Basic Configuration</title><para>Icinga packages are found in the <literal>SLE-Manager-Tools{sles-version}-Updates x86_64</literal>.</para>
<tip>
<title>Icinga Installation Location</title>
<para>Do not install Icinga on the <phrase><phrase>SUSE</phrase> Manager</phrase> server.
Install Icinga on a stand-alone <phrase>SUSE Linux Enterprise</phrase> client.</para>
</tip>
<orderedlist numeration="arabic">
<title>Procedure: Installation and Basic Configuration</title>
<listitem>
<para>Register the new client with <phrase><phrase>SUSE</phrase> Manager</phrase> and subscribe it to the <phrase><phrase>SUSE</phrase> Manager</phrase> client and update channels.
SLES {sles-version} and later include these channels by default.</para>
</listitem>
<listitem>
<para>Install the required Icinga packages on the new client:</para>
<screen>zypper in icinga icinga-idoutils-pgsql postgresql postgresql94-server \
monitoring-plugins-all apache2</screen>
</listitem>
<listitem>
<para>Edit the <literal>/etc/icinga/objects/contacts.cfg</literal> file and add the email address which you will use for reciving alerts.</para>
<screen>define contact {
  contact_name      icingaadmin          ; Short name of user
  use               generic-contact      ; Inherit default values
  alias             Icinga Admin         ; Full name of user
  email             icinga@localhost     ; &lt;&lt;*** CHANGE THIS TO YOUR EMAIL ADDRESS ***
}</screen>
</listitem>
<listitem>
<para>Enable postgres on boot and start the database:</para>
<screen>systemctl enable postgresql.service
systemctl start postgresql.service</screen>
</listitem>
<listitem>
<para>Create the database and user for Icinga:</para>
<screen>&gt;psql
 postgres=# ALTER USER postgres WITH PASSWORD '&lt;newpassword&gt;';
 postgres=# CREATE USER icinga;
 postgres=# ALTER USER icinga WITH PASSWORD 'icinga';
 postgres=# CREATE DATABASE icinga;
 postgres=# GRANT ALL ON DATABASE icinga TO icinga;
 postgres=# \q
 exit</screen>
</listitem>
<listitem>
<para>Adjust client authentication rights located in <literal>/var/lib/pgsql/data/pg_hba.conf</literal> to match the following:</para>
<screen># TYPE  DATABASE        USER            ADDRESS                 METHOD
local   icinga         icinga                                  trust
local   all            postgres                                ident

# "local" is for Unix domain socket connections only
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust
# Allow replication connections from localhost, by a user with the
# replication privilege.
#local   replication     postgres                                peer
#host    replication     postgres        127.0.0.1/32            ident
#host    replication     postgres        ::1/128                 ident</screen>
<important>
<title>Placement of Authentication Settings</title>
<para>Ensure the local entries for icinga authentication settings are placed above all other local entries or you will get an error when configuring the database schema.
The entries in <filename>pg_hba.conf</filename> are read from top to bottom.</para>
</important>
</listitem>
<listitem>
<para>Reload the Postgres service:</para>
<screen>systemctl reload postgresql.service</screen>
</listitem>
<listitem>
<para>Configure the database schema by running the following command in <filename>/usr/share/doc/packages/icinga-idoutils-pgsql/pgsql/</filename>:</para>
<screen>psql -U icinga -d icinga &lt; pgsql.sql</screen>
</listitem>
<listitem>
<para>Edit the following lines in <literal>/etc/icinga/ido2db.cfg</literal> to switch from the default setting of mysql to postgres:</para>
<screen>vi /etc/icinga/ido2db.cfg

 db_servertype=pgsql
 db_port=5432</screen>
<important>
<title>Open Firewall Port</title>
<para>Allow port <literal>5432</literal> through your firewall or you will not be able to access the WebGUI.</para>
</important>
</listitem>
<listitem>
<para>Create an icinga admin account for logging into the web interface:</para>
<screen>htpasswd -c /etc/icinga/htpasswd.users icingaadmin</screen>
</listitem>
<listitem>
<para>Enable and start all required services:</para>
<screen>systemctl enable icinga.service
systemctl start icinga.service
systemctl enable ido2db.service
systemctl start ido2db.service
systemctl enable apache2.service
systemctl start apache2.service</screen>
</listitem>
<listitem>
<para>Login to the WebGUI at: <ulink url="http://localhost/icinga">http://localhost/icinga</ulink>.</para>
</listitem>
</orderedlist>
<para>This concludes setup and initial configuration of Icinga.</para>
</sect1>
<sect1 id="at.icinga.nrpe.quickstart"><title>Icinga and NRPE Quickstart</title><para>The following sections provides an overview on monitoring your <phrase><phrase>SUSE</phrase> Manager</phrase> server using Icinga.
You will add <phrase><phrase>SUSE</phrase> Manager</phrase> as a host to Icinga and use a Nagios script/plugin to monitor running services via <literal>NRPE</literal> (Nagios Remote Plugin Executor).
This section does not attempt to cover all monitoring solutions Icinga has to offer but should help you get started.</para>
<orderedlist numeration="arabic">
<title>Procedure: Adding SUSE Managerto Icinga for Monitoring</title>
<listitem>
<para>On your <phrase><phrase>SUSE</phrase> Manager</phrase> server install the required packages:</para>
<screen>zypper install nagios-nrpe susemanager-nagios-plugin insserv nrpe monitoring-plugins-nrpe</screen>
</listitem>
<listitem>
<para>Modify the NRPE configuration file located at:</para>
<screen>/etc/nrpe.cfg</screen>
<para>Edit or add the following lines:</para>
<screen>server_port=5666
nrpe_user=nagios
nrpe_group=nagios
allowed_hosts=Icinga.example.com
dont_blame_nrpe=1
command[check_systemd.sh]=/usr/lib/nagios/plugins/check_systemd.sh $ARG1$</screen>
<para>Variable definitions:</para>
<variablelist>
<varlistentry>
<term>server_port</term>
<listitem>
<para>The variable <literal>server_port</literal> defines the port nrpe will listen on.
The default port is 5666.
This port must be opened in your firewall.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>nrpe_user</term>
<listitem>
<para>The variables <literal>nrpe_user</literal> and <literal>nrpe_group</literal> control the user and group IDs that nrpe will run under. <phrase><phrase>SUSE</phrase> Manager</phrase>
probes need access to the database, therefore nrpe requires access to database credentials stored in <filename>/etc/rhn/rhn.conf</filename>.
There are multiple ways to achieve this.
You may add the user <literal>nagios</literal> to the group <literal>www</literal> (this is already done for other IDs such as tomcat); alternatively you can simply have nrpe run with the effective group ID <literal>www</literal> in <filename>/etc/rhn/rhn.conf</filename>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>allowed_hosts</term>
<listitem>
<para>The variable <literal>allowed_hosts</literal> defines which hosts nrpe will accept connections from.
Enter the FQDN or IP address of your Icinga server here.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>dont_blame_nrpe</term>
<listitem>
<para>The use of variable <literal>dont_blame_nrpe</literal> is unavoidable in this example.
<literal>nrpe</literal> commands by default will not allow arguments being passed due to security reasons.
However, in this example you should pass the name of the host you want information on to nrpe as an argument.
This action is only possible when setting the variable to 1.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>command[check_systemd.sh]</term>
<listitem>
<para>You need to define the command(s) that nrpe can run on <phrase><phrase>SUSE</phrase> Manager</phrase>.
To add a new nrpe command specify a command call by adding <literal>command</literal> followed by square brackets containing the actual nagios/icinga plugin name.
Next define the location of the script to be called on your <phrase><phrase>SUSE</phrase> Manager</phrase> server.
Finally the variable <literal>$ARG1$</literal> will be replaced by the actual host the Icinga server would like information about.
In the example above, the command is named <literal>check_systemd.sh</literal>.
You can specify any name you like but keep in mind the command name is the actual script stored in <filename>/usr/lib/nagios/plugins/</filename> on your <phrase><phrase>SUSE</phrase> Manager</phrase> server.
This name must also match your probe definition on the Icinga server.
<emphasis>This will be described in greater detail later in the chapter. The check_systemd.sh script/plugin will also be provided in a later section.</emphasis></para>
</listitem>
</varlistentry>
</variablelist>
</listitem>
<listitem>
<para>One your configuration is complete load the new nrpe configuration as root with:</para>
<screen>systemctl start nrpe</screen>
</listitem>
</orderedlist>
<para>This concludes setup of nrpe.</para>
<sect2 id="at.add.a.host.to.icinga"><title>Add a Host to Icinga</title><para>To add a new host to Icinga create a host.cfg file for each host in <filename>/etc/icinga/conf.d/</filename>.
For example <filename>susemanager.cfg</filename>:</para>
<screen>define host {
  host_name           susemanager
  alias               SUSE Manager
  address             192.168.1.1
  check_period        24x7
  check_interval      1
  retry_interval      1
  max_check_attempts  10
  check_command       check-host-alive
}</screen>
<note>
<para>Place the host IP address you want to add to Icinga on the <literal>Address</literal> line.</para>
</note>
<para>After adding a new host restart Icinga as root to load the new configuation:</para>
<screen>systemctl restart icinga</screen>
</sect2>
<sect2 id="at.adding.services.to.icinga"><title>Adding Services to Icinga</title><para>To add services for monitoring on a specific host define them by adding a service definition to your host.cfg file located in <filename>/etc/icinga/conf.d</filename>.
For example you can monitor if a systems SSH service is running with the following service definition.</para>
<screen>define service {
  host_name           susemanager
  use                 generic-service
  service_description SSH
  check_command       check_ssh
  check_interval      60
}</screen>
<para>After adding any new services restart Icinga as root to load the new configuration:</para>
<screen>systemctl restart icinga</screen>
</sect2>
<sect2 id="at.creating.icinga.hostgroups"><title>Creating Icinga Hostgroups</title><para>You can create hostgroups to simplify and visualize hosts logically.
Create a <filename>hostgroups.cfg</filename> file located in <filename>/etc/icinga/conf.d/</filename> and add the following lines:</para>
<screen>define hostgroup {
  hostgroup_name  ssh_group
  alias           ssh group
  members         susemanager,mars,jupiter,pluto,examplehost4
}</screen>
<para>The <literal>members</literal> variable should contain the <literal>host_name</literal> from within each host.cfg file you created to represent your hosts.
Every time you add an additional host by creating a host.cfg ensure you add the host_name to the members list of included hosts if you want it to be included within a logical hostgroup.</para>
<para>After adding several hosts to a hostgroup restart Icinga as root to load the new configuration:</para>
<screen>systemctl restart icinga</screen>
</sect2>
<sect2 id="at.creating.icinga.servicegroups"><title>Creating Icinga Servicegroups</title><para>You can create logical groupings of services as well.
For example if you would like to create a group of essential <phrase><phrase>SUSE</phrase> Manager</phrase> services which are running define them within a <filename>servicegroups.cfg</filename> file placed in <filename>/etc/icinga/conf.d/</filename>:</para>
<screen>#Servicegroup 1
define servicegroup {
  servicegroup_name     SUSE Manager Essential Services
  alias                 Essential Services
}

#Servicegroup 2
define servicegroup {
  servicegroup_name     Client Patch Status
  alias                 SUSE Manager 3 Client Patch Status
}</screen>
<para>Within each host’s <filename>host.cfg</filename> file add a service to a servicegroup with the following variable:</para>
<screen>define service {
  use                 generic-service
  service_description SSH
  check_command       check_ssh
  check_interval      60
  servicegroups       SUSE Manager Essential Services
}</screen>
<para>All services that include the <literal>servicegroups</literal> variable and the name of the servicegroup will be added to the specified servicegroup.
After adding services to a servicegroup restart Icinga as root to load the new configuation:</para>
<screen>systemctl restart icinga</screen>
</sect2>
</sect1>
<sect1 id="at.monitoring.systemd.services"><title>Monitoring Systemd Services</title><para>The following section provides information on monitoring uptime of critical <phrase><phrase>SUSE</phrase> Manager</phrase> services.</para>
<orderedlist numeration="arabic">
<title>Procedure: Monitoring Running Systemd Services</title>
<listitem>
<para>As root create a new plugin file called <filename>check_systemd.sh</filename> in <filename>/usr/lib/nagios/plugins/</filename> on your <phrase><phrase>SUSE</phrase> Manager</phrase> server:</para>
<screen>vi /usr/lib/nagios/plugins/ check_systemd.sh</screen>
</listitem>
<listitem>
<para>For this example you will use an opensource community script to monitor Systemd services.
You may also wish to write your own.</para>
<screen>#!/bin/bash
# Copyright (C) 2016 Mohamed El Morabity &lt;melmorabity@fedoraproject.com&gt;
#
# This module is free software: you can redistribute it and/or modify it under
# the terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later
# version.
#
# This software is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
# FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License along with
# this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.

PLUGINDIR=$(dirname $0)
. $PLUGINDIR/utils.sh


if [ $# -ne 1 ]; then
    echo "Usage: ${0##*/} &lt;service name&gt;" &gt;&amp;2
    exit $STATE_UNKNOWN
fi

service=$1

status=$(systemctl is-enabled $service 2&gt;/dev/null)
r=$?
if [ -z "$status" ]; then
    echo "ERROR: service $service doesn't exist"
    exit $STATE_CRITICAL
fi

if [ $r -ne 0 ]; then
    echo "ERROR: service $service is $status"
    exit $STATE_CRITICAL
fi

systemctl --quiet is-active $service
if [ $? -ne 0 ]; then
    echo "ERROR: service $service is not running"
    exit $STATE_CRITICAL
fi

echo "OK: service $service is running"
exit $STATE_OK</screen>
<para>A current version of this script can be found at: <ulink url="https://github.com/melmorabity/nagios-plugin-systemd-service/blob/master/check_systemd_service.sh">https://github.com/melmorabity/nagios-plugin-systemd-service/blob/master/check_systemd_service.sh</ulink></para>
<warning>
<title>Non-supported 3rd Party Plugin</title>
<para>The script used in this example is an external script and is not supported by <phrase>SUSE</phrase>.</para>
</warning>
<warning>
<para>Always check to ensure scripts are not modified or contain malicous code before using them on production machines.</para>
</warning>
</listitem>
<listitem>
<para>Make the script executable:</para>
<screen>chmod 755 check_systemd.sh</screen>
</listitem>
<listitem>
<para>On your SUSE manager server add the following line to the <filename>nrpe.cfg</filename> located at <filename>/etc/nrpe.cfg</filename> :</para>
<screen># SUSE Manager Service Checks
command[check_systemd.sh]=/usr/lib/nagios/plugins/check_systemd.sh $ARG1$</screen>
<para>This will allow the Icinga server to call the plugin via nrpe on <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
</listitem>
<listitem>
<para>Provide proper permissions by adding the script to the sudoers file:</para>
<screen>visudo</screen>
<screen>nagios  ALL=(ALL)       NOPASSWD:/usr/lib/nagios/plugins/check_systemd.sh
Defaults:nagios !requiretty</screen>
<para>You can also add permissions to the entire plugin directory instead of allowing permissions for individual scripts:</para>
<screen>nagios  ALL=(ALL)       NOPASSWD:/usr/lib/nagios/plugins/</screen>
</listitem>
<listitem>
<para>On your Icinga server define the following command within <filename>/etc/icinga/objects/commands.cfg</filename> :</para>
<screen>define command {
        command_name   check-systemd-service
        command_line   /usr/lib/nagios/plugins/check_nrpe -H $HOSTADDRESS$ -c check_systemd.sh -a $ARG1$
}</screen>
</listitem>
<listitem>
<para>Now you will add the following critical services to be montitored to your <phrase><phrase>SUSE</phrase> Manager</phrase> host file:</para>
<itemizedlist>
<listitem>
<para>auditlog-keeper.service</para>
</listitem>
<listitem>
<para>jabberd.service</para>
</listitem>
<listitem>
<para>spacewalk-wait-for-jabberd.service</para>
</listitem>
<listitem>
<para>tomcat.service</para>
</listitem>
<listitem>
<para>spacewalk-wait-for-tomcat.service</para>
</listitem>
<listitem>
<para>salt-master.service</para>
</listitem>
<listitem>
<para>salt-api.service</para>
</listitem>
<listitem>
<para>spacewalk-wait-for-salt.service</para>
</listitem>
<listitem>
<para>apache2.service</para>
</listitem>
<listitem>
<para>osa-dispatcher.service</para>
</listitem>
<listitem>
<para>rhn-search.service</para>
</listitem>
<listitem>
<para>cobblerd.service</para>
</listitem>
<listitem>
<para>taskomatic.service</para>
</listitem>
<listitem>
<para>spacewalk-wait-for-taskomatic.service</para>
<para>On your Icinga server add the following service blocks to your <phrase><phrase>SUSE</phrase> Manager</phrase> host file <filename>susemanager.cfg</filename> file located in <filename>/etc/icinga/conf.d/</filename>.
(This configuration file was created in the previous section <emphasis>Adding a Host to Icinga</emphasis>.)</para>
<screen># Monitor Audit Log Keeper
define service {
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Audit Log Keeper Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!auditlog-keeper.service

}

# Monitor Jabberd
define service {
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Jabberd Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!jabberd.service

}

# Monitor Spacewalk Wait for Jabberd
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Spacewalk Wait For Jabberd Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!spacewalk-wait-for-jabberd.service
}

# Monitor Tomcat
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Tomcat Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!tomcat.service
}

# Monitor Spacewalk Wait for Tomcat
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Spacewalk Wait For Tomcat Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!spacewalk-wait-for-tomcat.service
}

# Monitor Salt Master
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Salt Master Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!salt-master.service
}

# Monitor Salt API
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Salt API Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!salt-api.service
}

# Monitor Spacewalk Wait for Salt
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Spacewalk Wait For Salt Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!spacewalk-wait-for-salt.service
}

# Monitor apache2
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Apache2 Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!apache2.service
}

# Monitor osa dispatcher
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Osa Dispatcher Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!osa-dispatcher.service
}

# Monitor rhn search
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    RHN Search Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!rhn-search.service
}

# Monitor Cobblerd
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Cobblerd Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!cobblerd.service
}

# Monitor taskomatic
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Taskomatic Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!taskomatic.service
}

# Monitor wait for taskomatic
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Spacewalk Wait For Taskomatic Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!spacewalk-wait-for-taskomatic.service
}</screen>
<para>Each of these service blocks will be passed as the check-systemd-service!$ARG1$ variable to SUSE manager server via nrpe.
You probably noticed the servicegroups parameter was also included.
This adds each service to a servicegroup and has been defined in a <filename>servicesgroups.cfg</filename> file located in <filename>/etc/icinga/conf.d/</filename>:</para>
<screen>define servicegroup {
       servicegroup_name     SUSE Manager Essential Services
       alias                 Essential Services
}</screen>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Restart Icinga:</para>
<screen>systemctl restart icinga</screen>
</listitem>
</orderedlist>
</sect1>
<sect1 id="at.using.the.check.suma.patches.plugin"><title>Using the check_suma_patches Plugin</title><para>You can use the <filename>check_suma_patches</filename> plugin to check if any machines connected to <phrase><phrase>SUSE</phrase> Manager</phrase> as clients require a patch or an update.
The following procedure will guide you through the setup of the check_suma_patches plugin.</para>
<orderedlist numeration="arabic">
<title>Procedure: Setup check_suma_patches</title>
<listitem>
<para>On your <phrase><phrase>SUSE</phrase> Manager</phrase> server open <filename>/etc/nrpe.cfg</filename> and add the following lines:</para>
<screen># SUSE Manager check_patches
command[check_suma_patches]=sudo /usr/lib/nagios/plugins/check_suma_patches $ARG1$</screen>
</listitem>
<listitem>
<para>On your Icinga server open <filename>/etc/icinga/objects/commands.cfg</filename> and define the following command:</para>
<screen>define command{
        command_name    check_suma
        command_line    /usr/lib/nagios/plugins/check_nrpe -H 192.168.1.1 -c $ARG1$ -a $HOSTNAME$
}</screen>
</listitem>
<listitem>
<para>On your Icinga server open any of your <phrase><phrase>SUSE</phrase> Manager</phrase> client host configration files located at <filename>/etc/icinga/conf.d/clients.cfg</filename> and add the following service definition:</para>
<screen>define service {
        use                             generic-service
        host_name                       client-hostname
        service_description             Available Patches for client-host_name
        servicegroups                   Client Patch Status
        check_command                   check_suma!check_suma_patches
}</screen>
</listitem>
<listitem>
<para>In the above service definition notice that this host is included in the servicegroup labeled <emphasis>Client Patch Status</emphasis>.
Add the following servicegroup definition to <filename>/etc/icinga/conf.d/servicegroups.cfg</filename> to create a servicegroup:</para>
<screen>define servicegroup {
       servicegroup_name     Client Patch Status
       alias                 SUSE Manager 3 Client Patch Status
}</screen>
</listitem>
<listitem>
<para/>
<itemizedlist>
<listitem>
<para><literal>OK:System is up to date</literal></para>
</listitem>
<listitem>
<para><literal>Warning: At least one patch or package update is available</literal></para>
</listitem>
<listitem>
<para><literal>Critical:At least one security/critical update is available</literal></para>
</listitem>
<listitem>
<para><literal>Unspecified:The host cannot be found in the SUSE Manager database or the host name is not unique</literal></para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<para>This concludes setup of the <literal>check_suma_patches</literal> plugin.</para>
</sect1>
<sect1 id="at.using.the.check.suma.lastevent.plugin"><title>Using the check_suma_lastevent Plugin</title><para>You can use the <filename>check_suma_lastevent</filename> plugin to display the last action executed on any host.</para>
<para>The following procedure will guide you through the setup of the check_suma_patches plugin.</para>
<orderedlist numeration="arabic">
<title>Procedure: Setup check_suma_lastevent</title>
<listitem>
<para>On your <phrase><phrase>SUSE</phrase> Manager</phrase> server open <filename>/etc/nrpe.cfg</filename> and add the following lines:</para>
<screen># Check SUSE Manager Hosts last events
command[check_events]=sudo /usr/lib/nagios/plugins/check_suma_lastevent $ARG1$</screen>
</listitem>
<listitem>
<para>On the Icinga server open <filename>/etc/icinga/objects/commands.cfg</filename> and add the following lines:</para>
<screen>define command {
        command_name    check_events
        command_line    /usr/lib/nagios/plugins/check_nrpe -H manager.suse.de -c $ARG1$ -a $HOSTNAME$
}</screen>
</listitem>
<listitem>
<para>On your Icinga server add the following line to a host.cfg service definition:</para>
<screen>define service{
        use                             generic-service
        host_name                       hostname
        service_description             Last Events
        check_command                   check_events!check_suma_lastevent
}</screen>
</listitem>
<listitem>
<para>Status will be reported as follows:</para>
<itemizedlist>
<listitem>
<para><literal>OK:Last action completed successfully</literal></para>
</listitem>
<listitem>
<para><literal>Warning: Action is currently in progress</literal></para>
</listitem>
<listitem>
<para><literal>Critical:Last action failed</literal></para>
</listitem>
<listitem>
<para><literal>Unspecified:The host cannot be found in the <phrase><phrase>SUSE</phrase> Manager</phrase> database or the host name is not unique</literal></para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<para>This concludes setup of the <literal>check_suma_lastevent</literal> plugin.</para>
</sect1>
<sect1 id="at.icinga.additional.resources."><title>Additional Resources</title><para>For more information, see Icinga’s official documentation located at <ulink url="http://docs.icinga.org/latest/en">http://docs.icinga.org/latest/en</ulink>.</para>
<para>For some excellent time saving configuration tips and tricks not covered in this guide, see the following section located within the official documentation: <ulink url="http://docs.icinga.org/latest/en/objecttricks.html">http://docs.icinga.org/latest/en/objecttricks.html</ulink></para>
</sect1>
</chapter>
<chapter id="at.images"><title>Image Building and Management</title><sect1 id="at.images.overview"><title>Image Building Overview</title><para> enables system administrators to build containers, system, and virtual images.
 helps with creating Image Stores and managing Image Profiles.</para>
</sect1>
<sect1 id="at.images.docker"><title>Container Images</title><informalfigure>
<mediaobject><textobject role="description"><phrase>image building</phrase></textobject><imageobject>
<imagedata fileref="image-building.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<sect2 id="at.images.docker.requirements"><title>Requirements</title><para>The containers feature is available for Salt minions running <phrase>SUSE Linux Enterprise Server</phrase> 12 or later.
The following requirements should be met before following this guide:</para>
<itemizedlist>
<listitem>
<para>You will need an existing external Github or internal Gitlab Repository containing a Dockerfile and configuration scripts (Example scripts are provided in the following sections)</para>
</listitem>
<listitem>
<para>Portus or another image registry properly configured.</para>
<note>
<title>Registry Provider Solutions</title>
<para>If you require a private image registry you can use an open source solution such as <literal>Portus</literal>.
For additional information on setting up Portus as a registry provider, see the:
** <ulink url="http://port.us.org/">Portus Documentation</ulink></para>
</note>
<note>
<para>For more information on Containers or CaaS Platform review the following links:</para>
</note>
</listitem>
<listitem>
<para><ulink url="https://www.suse.com/documentation/sles-12/book_sles_docker/data/book_sles_docker.html">SUSE Linux Enterprise Server 12 SP3 Docker Guide</ulink></para>
</listitem>
<listitem>
<para><ulink url="https://www.suse.com/documentation/suse-caasp-2/">SUSE CaaS Platform 2 Documentation</ulink></para>
</listitem>
</itemizedlist>
</sect2>
<sect2 id="at.images.docker.buildhost"><title>Creating a Build Host</title><para>To build all kind of images with , you will need to create and configure a build host.
Build hosts are Salt minions running SLES 12 or later.
The following steps will guide you though the initial configuration for a build host.</para>
<para>From the Web UI
perform the following steps to configure a build host.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Select a minion that will be designated as a build host from the <menuchoice><guimenu>Systems</guimenu> <guimenu>Overview</guimenu></menuchoice> page.</para>
</listitem>
<listitem>
<para>From the <guimenu>System Details</guimenu> page for the selected minion assign the containers modules by going to <menuchoice><guimenu>Software</guimenu> <guimenu>Software Channels</guimenu></menuchoice> and enable <literal>SLE-Module-Containers12-Pool</literal> and <literal>SLE-Module-Containers12-Updates</literal>. Confirm by clicking <guimenu>Change Subscriptions</guimenu>.</para>
</listitem>
<listitem>
<para>From the <menuchoice><guimenu>System Details</guimenu> <guimenu>Properties</guimenu></menuchoice> page, enable the <guimenu>Add-on System Type</guimenu> <literal>Container Build Host</literal> and confirm by selecting <guimenu>Update Properties</guimenu>.</para>
</listitem>
<listitem>
<para>Install all required packages by applying the Highstate. From the system’s details page select <menuchoice><guimenu>States</guimenu> <guimenu>Highstate</guimenu></menuchoice> and select <guimenu>Apply Highstate</guimenu>.
Alternatively apply a Highstate from the command line by executing <literal>state.highstate</literal> from command line of the  server.</para>
</listitem>
</orderedlist>
<sect3 id="at.images.docker.buildchannels"><title>Define Container Build Channels with an Activation Key</title><para>Create an activation key associated with the channel that your images will use.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems create activation key</phrase></textobject><imageobject>
<imagedata fileref="systems_create_activation_key.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>From the left navigation menu select <menuchoice><guimenu>Systems</guimenu> <guimenu>Activation Keys</guimenu></menuchoice>.</para>
</listitem>
<listitem>
<para>Click <guimenu>Create Key</guimenu>.</para>
</listitem>
<listitem>
<para>Enter a <literal role="guimenu">Description] , a [guimenu]</literal>Key<literal> name. Use the drop-down menu to select the [guimenu]</literal>Base Channel`` that should be associated with this key.</para>
</listitem>
<listitem>
<para>Confirm with <guimenu>Create Activation Key</guimenu>.</para>
</listitem>
</orderedlist>
<para>For more information, see <xref linkend="bp.key.managment"/>.</para>
</sect3>
</sect2>
<sect2 id="at.images.docker.imagestore"><title>Creating an Image Store</title><para>Define a location to store all of your images by creating an Image Store.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>images image stores</phrase></textobject><imageobject>
<imagedata fileref="images_image_stores.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>From the left navigation menu select <menuchoice><guimenu>Images</guimenu> <guimenu>Stores</guimenu></menuchoice>.</para>
</listitem>
<listitem>
<para>Click <guimenu>Create</guimenu> to create a new store.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>images image stores create</phrase></textobject><imageobject>
<imagedata fileref="images_image_stores_create.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para> currently provides support only for the `Registry`<guimenu>Store Type</guimenu>. Define a name for the image store in the <guimenu>Label</guimenu> field.</para>
</listitem>
<listitem>
<para>Provide the path to your image registry by filling in the <guimenu>URI</guimenu> field.
The FQDN of the container registry host (whether internal or external) is sufficient.</para>
<screen>registry.example.com</screen>
<para>Registry URI is also used to specify image store on used registry.</para>
<screen>registry.example.com:5000/myregistry/myproject</screen>
</listitem>
<listitem>
<para>Click <guimenu>Create</guimenu> to add the new <literal>Image Store</literal>.</para>
</listitem>
</orderedlist>
</sect2>
<sect2 id="at.images.docker.profile"><title>Creating an Image Profile</title><para>Manage Image Profiles from the Image Profile page.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>images image profiles</phrase></textobject><imageobject>
<imagedata fileref="images_image_profiles.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<title>Procedure: Create an Image Profile</title>
<listitem>
<para>To create an image profile select <menuchoice><guimenu>Image</guimenu> <guimenu>Profiles</guimenu></menuchoice> and click <guimenu>Create</guimenu>.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>images image create profile</phrase></textobject><imageobject>
<imagedata fileref="images_image_create_profile.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>Provide a name for the <literal>Image Profile</literal> by filling in the <guimenu>Label</guimenu> field.</para>
<note>
<para>Only lower case characters are permitted as container label.
In case your container image tag is a format such as <literal>myproject/myimage</literal>, make sure your Image store registry URI contains the <literal>/myproject</literal> suffix.</para>
</note>
</listitem>
<listitem>
<para>Use a <literal>Dockerfile</literal> as the <literal>Image Type</literal></para>
</listitem>
<listitem>
<para>Use the drop-down menu to select your registry from the <literal>Target Image Store</literal> field in case of <literal>Dockerfile</literal> image type.</para>
</listitem>
<listitem>
<para>Enter a Github or Gitlab repository URL (http/https/token authentication) in the <guimenu>Path</guimenu> field using one of the following formats:</para>
</listitem>
</orderedlist>
<itemizedlist>
<title>Github Path Options</title>
<listitem>
<para>Github Single User Project Repository</para>
</listitem>
</itemizedlist>
<screen>https://github.com/USER/project.git#branchname:folder</screen>
<itemizedlist>
<listitem>
<para>Github Organization Project Repository</para>
</listitem>
</itemizedlist>
<screen>https://github.com/ORG/project.git#branchname:folder</screen>
<itemizedlist>
<listitem>
<para>Github Token Authentication:</para>
</listitem>
</itemizedlist>
<para>If your GIT repository is private and not publicly accessible, you need to modify the profile’s GIT URL to include some authentication.
Use the following URL format to authenticate with a Github token.</para>
<screen>https://USER:&lt;AUTHENTICATION_TOKEN&gt;@github.com/USER/project.git#master:/container/</screen>
<itemizedlist>
<title>Gitlab Path Options</title>
<listitem>
<para>Gitlab Single User Project Repository</para>
</listitem>
</itemizedlist>
<screen>https://gitlab.example.com/USER/project.git#master:/container/</screen>
<itemizedlist>
<listitem>
<para>Gitlab Groups Project Repository</para>
</listitem>
</itemizedlist>
<screen>https://gitlab.example.com/GROUP/project.git#master:/container/</screen>
<itemizedlist>
<listitem>
<para>Gitlab Token Authentication
If your GIT repository is private and not publicly accessible, you need to modify the profile’s GIT URL to include some authentication.
Use the following URL format to authenticate with a Gitlab token.</para>
</listitem>
</itemizedlist>
<screen>https://gitlab-ci-token:&lt;AUTHENTICATION_TOKEN&gt;@gitlab.example.com/USER/project.git#master:/container/</screen>
<important>
<title>Specifying a Github or Gitlab Branch</title>
<para>If a branch is not specified the <literal>master</literal> branch will be used by default.
If a <literal>folder</literal> is not specified the image sources (<literal>Dockerfile</literal> sources) are expected to be in the root directory of the Github or Gitlab checkout.</para>
</important>
<orderedlist numeration="arabic">
<listitem>
<para>Select an <literal>Activation Key</literal> (Activation Keys ensure images using a profile are assigned to the correct channel and packages).</para>
<note>
<title>Relationship Between Activation Keys and Image Profiles</title>
<para>When you associate an activation key with an image profile you are ensuring any image using the profile will use the correct software channel and any packages in the channel.</para>
</note>
</listitem>
<listitem>
<para>Click the <guimenu>Create</guimenu> button.</para>
</listitem>
</orderedlist>
</sect2>
<sect2 id="at.images.docker.sourceexample"><title>Example Dockerfile and add_packages Script</title><para>The following is an example Dockerfile.
You specify a Dockerfile that will be used during image building when creating an image profile.
A Dockerfile and any associated scripts should be stored within an internal or external Github/Gitlab repository:</para>
<important>
<title>Required Dockerfile Lines</title>
<para>The following basic Dockerfile lines provide access to a specific repository version served by .
The following example Dockerfile is used by  to trigger a build job on a build host minion.
These ARGS ensure that the image built is associated with the desired repo version served by .
These <literal>ARG</literal>s also allow you to build image versions of SLES which may differ from the version of SLES used by the build host itself.</para>
<para>For example: The <literal>ARG repo</literal> and echo to the repository file creates and then injects the correct path into the repo file for the desired channel version.</para>
<para><emphasis>The repository version is determined by the activation key that you assigned to your Image Profile.</emphasis></para>
</important>
<screen>FROM registry.example.com/sles12sp2
MAINTAINER Tux Administrator "tux@example.com"

### Begin: These lines Required for use with <phrase>SUSE Manager</phrase>

ARG repo
ARG cert

# Add the correct certificate
RUN echo "$cert" &gt; /etc/pki/trust/anchors/RHN-ORG-TRUSTED-SSL-CERT.pem

# Update certificate trust store
RUN update-ca-certificates

# Add the repository path to the image
RUN echo "$repo" &gt; /etc/zypp/repos.d/susemanager:dockerbuild.repo

### End: These lines required for use with <phrase>SUSE Manager</phrase>

# Add the package script
ADD add_packages.sh /root/add_packages.sh

# Run the package script
RUN /root/add_packages.sh

# After building remove the repository path from image
RUN rm -f /etc/zypp/repos.d/susemanager:dockerbuild.repo</screen>
<para>The following is an example add_packages.sh script for use with your Dockerfile:</para>
<screen>#!/bin/bash
set -e

zypper --non-interactive --gpg-auto-import-keys ref

zypper --non-interactive in python python-xml aaa_base aaa_base-extras net-tools timezone vim less sudo tar</screen>
<note>
<title>Packages Required for Inspecting Your Images</title>
<para>To inspect images and provide the package and product list of a container to the  Web UI you are required to install <systemitem class="resource">python</systemitem> and <systemitem class="resource">python-xml</systemitem> within the container.
If these packages remain uninstalled, your images will still build, but the package and product list will be unavailable from the Web UI.</para>
</note>
</sect2>
<sect2 id="at.images.docker.building"><title>Building an Image</title><para>There are two ways to build an image.
You can select <menuchoice><guimenu>Images</guimenu> <guimenu>Build</guimenu></menuchoice> from the left navigation bar, or click the build icon in the <menuchoice><guimenu>Images</guimenu> <guimenu>Profiles</guimenu></menuchoice> list.</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>images image build</phrase></textobject><imageobject>
<imagedata fileref="images_image_build.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<title>Procedure: Build an Image</title>
<listitem>
<para>For this example select <menuchoice><guimenu>Images</guimenu> <guimenu>Build</guimenu></menuchoice>.</para>
</listitem>
<listitem>
<para>Add a different tag name if you want a version other than the default <literal>latest</literal> (Only relevant to Containers).</para>
</listitem>
<listitem>
<para>Select the <guimenu>Build Profile</guimenu> and a <guimenu>Build Host</guimenu></para>
<note>
<title>Profile Summary</title>
<para>Notice the <guimenu>Profile Summary</guimenu> to the right of the build fields.
When you have selected a build profile detailed information about the selected profile will show up in this area.</para>
</note>
</listitem>
<listitem>
<para>To schedule a build click the <guimenu>Build</guimenu> button.</para>
</listitem>
</orderedlist>
</sect2>
<sect2 id="at.images.docker.importing"><title>Importing an Image</title><para>You can import and inspect arbitrary images.
Select <menuchoice><guimenu>Images</guimenu> <guimenu>Images</guimenu></menuchoice> from the left navigation bar.
Fill the text boxes of the Import dialog.
When processed the imported image will get listed on the <guimenu>Images</guimenu> page.</para>
<orderedlist numeration="arabic">
<title>Procedure: Import an Image</title>
<listitem>
<para>From <menuchoice><guimenu>Images</guimenu> <guimenu>Images</guimenu></menuchoice> click the <guimenu>Import</guimenu> to open the <guimenu>Import Image</guimenu> dialog.</para>
</listitem>
<listitem>
<para>In the <guimenu>Import</guimenu> dialog fill the following fields:</para>
<variablelist>
<varlistentry>
<term>Image store</term>
<listitem>
<para>The registry from where the image will be pulled for inspection.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Image name</term>
<listitem>
<para>The name of the image in the registry.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Image version</term>
<listitem>
<para>The version of the image in the registry.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Build host</term>
<listitem>
<para>The build host that will pull and inspect the image.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Activation key</term>
<listitem>
<para>The activation key provides the path to the software channel that the image will be inspected with.</para>
</listitem>
</varlistentry>
</variablelist>
<para>For confirmation, click <guimenu>Import</guimenu>.</para>
</listitem>
</orderedlist>
<para>At this point, the entry for the image is created in the database and an Inspect Image action on  is scheduled right away.</para>
<para>When processed find the imported image in the images list.
You can recognize it because of a different icon in the Build column, which means that the image is imported (see screenshot below).
The status icon for the imported image can also be seen on the overview tab for the image.</para>
</sect2>
<sect2 id="at.images.docker.troubleshooting"><title>Troubleshooting</title><para>The following are some known pitfalls when working with images.</para>
<itemizedlist>
<listitem>
<para>HTTPS certificates to access the registry or the git repositories should be deployed to the minion by a custom state file.</para>
</listitem>
<listitem>
<para>SSH git access with docker is currently unsupported.
You may test it, but SUSE will not provide support.</para>
</listitem>
<listitem>
<para>If the <systemitem class="resource">python</systemitem> and <systemitem class="resource">python-xml</systemitem> packages are not installed within your images during the build process, Salt cannot run within the container and reporting of installed packages or products will fail.
This will result in an unknown update status.</para>
</listitem>
</itemizedlist>
</sect2>
</sect1>
</chapter>
<chapter id="advanced.topics.kubernetes.integration"><title>Kubernetes Integration Guide</title><sect1 id="at.k8s.integration.requires"><title>Prerequisites</title><para>The prerequisites listed below should be met before proceeding.</para>
<itemizedlist>
<listitem>
<para>At least one <emphasis>Kubernetes</emphasis> or _SUSE CaaS Platform _ cluster available on your network</para>
</listitem>
<listitem>
<para><phrase><phrase>SUSE</phrase> Manager</phrase> configured for container management</para>
<note>
<para>Required channels are present, a registered build host available etc.</para>
</note>
</listitem>
<listitem>
<para><systemitem class="resource">virtual-host-gatherer-Kubernetes</systemitem> package installed on your <phrase><phrase>SUSE</phrase> Manager</phrase> server</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="at.requirements"><title>Requirements</title><itemizedlist>
<listitem>
<para>Kubernetes version 1.5.0 or higher.
Alternatively use SUSE CaaS Platform <emphasis>(SUSE CaaS Platform includes Kubernetes 1.5.0 by default)</emphasis></para>
</listitem>
<listitem>
<para>Docker version 1.12 or higher on the container build host</para>
</listitem>
</itemizedlist>
<note>
<para>To enable all Kubernetes related features within the Web UI, the <systemitem class="resource">virtual-host-gatherer-Kubernetes</systemitem> package must be installed.</para>
</note>
</sect1>
<sect1 id="at.registering.kubernetes.as.a.virtual.host.manager"><title>Register Kubernetes as a Virtual Host Manager</title><para><emphasis>Kubernetes</emphasis> clusters are registered with SUSE Manager as <literal>virtual host managers</literal>.
Registration and authorization begins with importing a <literal>kubeconfig</literal> file using Kubernetes official command line tool <literal>kubectl</literal>.</para>
<orderedlist numeration="arabic">
<title>Procedure: Registering a Kubernetes Cluster with SUSE Manager</title>
<listitem>
<para>Select <menuchoice><guimenu>Systems</guimenu> <guimenu>Virtual Host Managers</guimenu></menuchoice> from the navigation menu.</para>
</listitem>
<listitem>
<para>Expand the <literal>Create</literal> dropdown in the upper right corner of the page and select <guimenu>Kubernetes Cluster</guimenu> .</para>
</listitem>
<listitem>
<para>Input a label for the new Virtual Host Manager.</para>
</listitem>
<listitem>
<para>Select the <literal>kubeconfig</literal> file which contains the required data for the Kubernetes cluster.</para>
</listitem>
<listitem>
<para>Select the correct <emphasis>context</emphasis> for the cluster, as specified in the kubeconfig file.</para>
</listitem>
<listitem>
<para>Click <literal>Create</literal>.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="at.view.the.list.of.nodes.in.a.cluster"><title>View the List of Nodes in a Cluster</title><orderedlist numeration="arabic">
<listitem>
<para>Select <menuchoice><guimenu>Systems</guimenu> <guimenu>Virtual Host Managers</guimenu></menuchoice> from the navigation menu.</para>
</listitem>
<listitem>
<para>Select the desired Kubernetes cluster to view it.</para>
</listitem>
<listitem>
<para>Node data is not refreshed during registration.
To refresh node data, click on <literal>Schedule refresh data</literal>.</para>
</listitem>
<listitem>
<para>Refresh the browser.
If the node data is not available wait a few moments and try again.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="at.obtain.runtime.data.about.images"><title>Obtain Runtime Data about Images</title><para>See the following steps to find runtime data for images.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Select <menuchoice><guimenu>Images</guimenu> <guimenu>Images</guimenu></menuchoice> from the navigation menu.</para>
</listitem>
<listitem>
<para>In the image list table, take notice of the new runtime columns.
These are labeled: <literal>Revision</literal>, <literal>Runtime</literal> and <literal>Instances</literal>.
Initially these columns will not provide useful data.</para>
<itemizedlist>
<listitem>
<para><literal>Revision</literal>: An artificial sequence number which increments on every rebuild for manager-built images, or on every reimport for externally built images.</para>
</listitem>
<listitem>
<para><literal>Runtime</literal>: Overall status of the running instances of the image throughout the registered clusters.
The status can be one of the following:</para>
<itemizedlist>
<listitem>
<para>All instances are consistent with SUSE Manager: All the running instances are running the same build of the image as tracked by SUSE Manager.</para>
</listitem>
<listitem>
<para>Outdated instances found: Some of the instances are running an older build of the image.
A redeploy of the image into the pod may be required.</para>
</listitem>
<listitem>
<para>No information: The checksum of the instance image does not match the image data contained in SUSE Manager.
A redeploy of the image into the pod may be required.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para><literal>Instances</literal>: Number of instances running this image across all the clusters registered in SUSE Manager.
A breakdown of numbers can be seen by clicking on the pop-up icon next to the number.</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</sect1>
<sect1 id="at.build.an.image.for.deployment.in.kubernetes"><title>Build an image for deployment in Kubernetes</title><para>The following steps will help you build an image for deployment in Kubernetes.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Under <menuchoice><guimenu>Images</guimenu> <guimenu>Stores</guimenu></menuchoice>, create an image store.</para>
</listitem>
<listitem>
<para>Under <menuchoice><guimenu>Images</guimenu> <guimenu>Profiles</guimenu></menuchoice>, create an image profile (with a Dockerfile which is suitable to deploy to Kubernetes).</para>
</listitem>
<listitem>
<para>Under <menuchoice><guimenu>Images</guimenu> <guimenu>Build</guimenu></menuchoice>, build an image with the new profile and wait for the build to finish.</para>
</listitem>
<listitem>
<para>Deploy the image into one of the registered Kubernetes clusters (via <literal>kubectl</literal>).</para>
</listitem>
<listitem>
<para>Notice the updated data in <literal>Runtime</literal> and <literal>Instances</literal> columns in the respective image row.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="at.import.a.previously.deployed.image.in.kubernetes"><title>Import a Previously Deployed Image in Kubernetes</title><para>The following steps will guide you through importing a previously deployed image in Kubernetes.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Select an image that has already been deployed to any of your registered Kubernetes clusters.</para>
</listitem>
<listitem>
<para>Add the registry owning the image to SUSE Manager as an image store.</para>
</listitem>
<listitem>
<para>Select <menuchoice><guimenu>Images</guimenu> <guimenu>Images</guimenu></menuchoice> , click <literal>Import</literal> from the top-right corner, fill in the form fields and click <literal>Import</literal>.</para>
</listitem>
<listitem>
<para>Notice the updated data in <literal>Runtime</literal> and <literal>Instances</literal> columns in the respective image row.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="at.obtain.additional.runtime.data"><title>Obtain Additional Runtime Data</title><para>The following steps will help you find additional runtime data.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Select to <menuchoice><guimenu>Images</guimenu> <guimenu>Images</guimenu></menuchoice> , click the <literal>Details</literal> button on the right end of a row which has running instances.</para>
</listitem>
<listitem>
<para>Under the <literal>Overview</literal> tab, notice the data in <literal>Runtime</literal> and <literal>Instances</literal> fields under <literal>Image Info</literal> section.</para>
</listitem>
<listitem>
<para>Select the <literal>Runtime</literal> tab.</para>
</listitem>
<listitem>
<para>Here is a breakdown of the Kubernetes pods running this image in all the registered clusters including the following data:</para>
<itemizedlist>
<listitem>
<para>Pod name</para>
</listitem>
<listitem>
<para>Namespace which the pod resides in</para>
</listitem>
<listitem>
<para>The runtime status of the container in the specific pod.
Status icons are explained in the preceeding example.</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</sect1>
<sect1 id="at.rebuild.a.previously.deployed.image.in.kubernetes"><title>Rebuild a Previously Deployed Image in Kubernetes</title><para>The following steps will guide you through rebuilding an image which has been deployed to a Kubernetes cluster.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Go to <menuchoice><guimenu>Images</guimenu> <guimenu>Images</guimenu></menuchoice> , click the Details button on the right end of a row which has running instances.
The image must be manager-built.</para>
</listitem>
<listitem>
<para>Click the <literal>Rebuild</literal> button located under the <literal>Build Status</literal> section and wait for the build to finish.</para>
</listitem>
<listitem>
<para>Notice the change in the <literal>Runtime</literal> icon and title, reflecting the fact that now the instances are running a previous build of the image.</para>
</listitem>
</orderedlist>
</sect1>
<sect1 id="at.role.based.access.control.permissions.and.certificate.data"><title>Role Based Access Control Permissions and Certificate Data</title><important>
<para>Currently, only kubeconfig files containing all embedded certificate data may be used with SUSE Manager</para>
</important>
<para>The API calls from <phrase><phrase>SUSE</phrase> Manager</phrase> are:</para>
<itemizedlist>
<listitem>
<para>GET /api/v1/pods</para>
</listitem>
<listitem>
<para>GET /api/v1/nodes</para>
</listitem>
</itemizedlist>
<para>According to this list, the minimum recommended permissions for <phrase><phrase>SUSE</phrase> Manager</phrase> should be as follows:</para>
<itemizedlist>
<listitem>
<para>A ClusterRole to list all the nodes:</para>
<screen>resources: ["nodes"]
verbs: ["list"]</screen>
</listitem>
<listitem>
<para>A ClusterRole to list pods in all namespaces (role binding must not restrict the namespace):</para>
<screen>resources: ["pods"]
verbs: ["list"]</screen>
</listitem>
</itemizedlist>
<para>Due to a a 403 response from /pods, the entire cluster will be ignored by SUSE Manager.</para>
<para>For more information on working with RBAC Authorization see: <ulink url="https://kubernetes.io/docs/admin/authorization/rbac/">https://kubernetes.io/docs/admin/authorization/rbac/</ulink></para>
</sect1>
</chapter>
<chapter id="advanced.topics.cobbler"><title>Cobbler</title><sect1 id="at.introduction.cobbler"><title>Introduction</title><para> features the Cobbler server that allows administrators to centralize their system installation and provisioning infrastructure.
Cobbler is an installation server that provides various methods of performing unattended system installations, whether it be server, workstation, or guest systems in a full or para-virtualized setup.</para>
<para>Cobbler offers several tools to assist in pre-installation guidance, automated installation file management, installation environment management, and more.
This section explains supported features of Cobbler, which include:</para>
<itemizedlist>
<listitem>
<para>Installation environment analysis using the <command>cobbler check</command> command,</para>
</listitem>
<listitem>
<para>Multi-site installation server configuration with <command>cobbler replicate</command>,</para>
</listitem>
<listitem>
<para>Virtual machine guest installation automation with the <command>koan</command> client-side tool,</para>
</listitem>
<listitem>
<para>Building installation ISOs with PXE-like menus using the <command>cobbler buildiso</command> command for  systems with x86_64 architecture.</para>
<para>For more detailed upstream documentation on Cobbler, see <ulink url="http://cobbler.github.io/manuals/">http://cobbler.github.io/manuals/</ulink>.</para>
</listitem>
</itemizedlist>
<important>
<title>Supported Cobbler Functions</title>
<para><phrase>SUSE</phrase> only support those Cobbler functions that are either listed within our formal documentation or available via the Web Interface and API.</para>
</important>
</sect1>
<sect1 id="advanced.topics.cobbler.reqs"><title>Cobbler Requirements</title><para>To use Cobbler as a PXE boot server, follow these guidelines:</para>
<itemizedlist>
<listitem>
<para>For system installation with PXE, you must have a TFTP server installed and configured. By default,  installs such a TFTP server.</para>
</listitem>
<listitem>
<para>To PXE boot systems for installation, you must either set up a DHCP server for Cobbler PXE booting or have access to your network’s DHCP server. Edit <filename>/etc/dhcp.conf</filename> to change <option>next-server</option> to the hostname or IP address of your Cobbler server.</para>
</listitem>
</itemizedlist>
<important>
<title>Correct Hostname Configuration</title>
<para>When onboarding bare metal systems using the pxe-default-image, it’s important to ensure all systems to be on-board have unique hostnames.
Otherwise, if you later assign a provisioning profile to it, the new configuration file will overwrite the configuration settings for any system with the duplicate hostname.
Cobbler uses hostnames as a unique key for each system.</para>
</important>
<sect2 id="advanced.topics.cobbler.reqs.settings"><title>Configuring Cobbler with /etc/cobbler/settings</title><para>Cobbler configuration is mainly done in the <filename>/etc/cobbler/settings</filename> file.
With the default settings unchanged, Cobbler runs as intended.
All configurable settings are explained in detail in the <filename>/etc/cobbler/settings</filename> file with regard to how they affect functionality of Cobbler and whether it is recommended for users to adjust values to their environment.</para>
<note>
<title>Supported Languages</title>
<para>If  complains about language <quote><literal>en</literal></quote> was not found within the list of supported languages available at <filename>/usr/share/YaST2/data/languages</filename>, remove the lang in <filename>/etc/cobbler/settings</filename> or add a proper value such as <literal>en_US</literal>.</para>
<para>For background info, see <ulink url="https://www.suse.com/support/kb/doc?id=7018334">https://www.suse.com/support/kb/doc?id=7018334</ulink>.</para>
</note>
</sect2>
<sect2 id="advanced.topics.cobbler.req.dhcp"><title>Cobbler and DHCP</title><para>Cobbler supports bare-metal automated installation of systems configured to perform network boots using a PXE boot server.
To properly implement a Cobbler installation server, administrators need to either have administrative access to the network’s DHCP server or set up DHCP on the Cobbler server itself.</para>
<sect3 id="advanced.topics.cobbler.reqs.dhcp.notmanaged"><title>Configuring an Existing DHCP Server</title><para>If you have a DHCP server deployed on another system in the network, you will need administrative access to the DHCP server to edit the DHCP configuration file so that it points to the Cobbler server and PXE boot image.</para>
<para>As root on the DHCP server, edit the <filename>/etc/dhcpd.conf</filename> file and append a new class with options for performing PXE boot installation.
For example:</para>
<informalexample>
<screen>allow booting;
allow bootp; <co id="CO1-1"/>
class "PXE" <co id="CO1-2"/>
{match if substring(option vendor-class-identifier, 0, 9) = "PXEClient"; <co id="CO1-3"/>
next-server 192.168.2.1; <co id="CO1-4"/>
filename "pxelinux.0";} <co id="CO1-5"/></screen>
<calloutlist>
<callout arearefs="CO1-1">
<para>Enable network booting with the <literal role="systemitem">bootp</literal> protocol.</para>
</callout>
<callout arearefs="CO1-2">
<para>Create a class called <literal>PXE</literal>.</para>
</callout>
<callout arearefs="CO1-3">
<para>A system configured to have PXE first in its boot priority identifies itself as <literal>PXEClient</literal>.</para>
</callout>
<callout arearefs="CO1-4">
<para>As a result, the DHCP server directs the system to the Cobbler server at <literal>192.168.2.1</literal>.</para>
</callout>
<callout arearefs="CO1-5">
<para>The DHCP server retrieves the <filename>pxelinux.0</filename>bootloader file.</para>
</callout>
</calloutlist>
</informalexample>
</sect3>
<sect3 id="advanced.topics.cobbler.reqs.dhcp.kvm"><title>Setting up PXE Boot in KVM</title><para>Not necessarily for production, but for lab or demo environments you can alternativly set up PXE boot in KVM.
Such a configuration can replace the <literal>next-server</literal> setting on a DHCP server explained in <xref linkend="advanced.topics.cobbler.reqs.dhcp.notmanaged"/>.
To edit the network XML description with <command>virsh</command>, proceed as follow:</para>
<orderedlist numeration="arabic">
<listitem>
<para>Produce an XML dump of the current description:</para>
<screen>virsh net-dumpxml --inactive network &gt; network.xml</screen>
</listitem>
<listitem>
<para>Open the XML dump file (here <filename>network.xml</filename> ) with a text editor and add a <literal>bootp</literal> statement within the <literal>&lt;dhcp&gt;</literal> element:</para>
<screen>&lt;bootp file='/pxelinux.0' server='192.168.100.153'/&gt;</screen>
</listitem>
<listitem>
<para>Install the edited description:</para>
<screen>virsh net-define network.xml</screen>
</listitem>
</orderedlist>
<para>Or try the <literal>net-edit</literal> subcommand that does some error checking.</para>
<example id="at.cobbler.bootp.kvm">
<title>Minimal Network XML Description for KVM</title>
<screen>&lt;network&gt;
  &lt;name&gt;default&lt;/name&gt;
  &lt;uuid&gt;1da84185-31b5-4c8b-9ee2-a7f5ba39a7ee&lt;/uuid&gt;
  &lt;forward mode='nat'&gt;
    &lt;nat&gt;
      &lt;port start='1024' end='65535'/&gt;
    &lt;/nat&gt;
  &lt;/forward&gt;
  &lt;bridge name='virbr0' stp='on' delay='0'/&gt;
  &lt;mac address='52:54:00:29:59:18'/&gt;
  &lt;domain name='default'/&gt;
  &lt;ip address='192.168.100.1' netmask='255.255.255.0'&gt;
    &lt;dhcp&gt;
      &lt;range start='192.168.100.128' end='192.168.100.254'/&gt;
      &lt;bootp file='/pxelinux.0' server='192.168.100.153'/&gt; <co id="CO2-1"/>
&lt;/dhcp&gt;
  &lt;/ip&gt;
&lt;/network&gt;</screen>
<calloutlist>
<callout arearefs="CO2-1">
<para><literal>bootp</literal> statement that directs to the PXE server.</para>
</callout>
</calloutlist>
</example>
</sect3>
</sect2>
<sect2 id="advanced.topics.cobbler.reqs.tftp"><title>Xinetd and TFTP</title><para> uses the <literal role="daemon">atftpd</literal> daemon, but it can also operate with Xinetd/TFTP.
The <literal role="daemon">atftpd</literal> is installed by default as the recommended method for providing PXE services.
Usually, you do not have to change its configuration, but if you have to, use the YaST Sysconfig Editor.</para>
<para>Xinetd is a daemon that manages a suite of services, including TFTP, the FTP server used for transferring the boot image to a PXE client.</para>
<para>To configure TFTP, you must first enable the service via Xinetd.
To do this, edit the <filename>/etc/xinetd.d/tftp</filename> file as <systemitem class="username">root</systemitem> and change the <option>disable = yes</option> line to <literal>disable = no</literal>.</para>
<para>Before TFTP can serve the <filename>pxelinux.0</filename> boot image, you must start the Xinetd service.
Start YaST and use <menuchoice><guimenu>System</guimenu> <guimenu>Services Manager</guimenu></menuchoice> to configure the <literal role="daemon">Xinetd</literal> daemon.</para>
</sect2>
<sect2 id="advanced.topics.cobbler.reqs.sync.tftp"><title>Syncing TFTP Contents to  Proxies</title><para>It is possible to sync cobbler generated TFTP contents to  Proxies to perform PXE booting via these proxies.</para>
<sect3 id="_installation"><title>Installation</title><para>On the  Server as root, install the package <literal role="systemitem">susemanager-tftpsync</literal>:</para>
<screen>zypper install susemanager-tftpsync</screen>
<para>On the <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> systems as root, install the package <literal role="systemitem">susemanager-tftpsync-recv</literal>:</para>
<screen>zypper install susemanager-tftpsync-recv</screen>
</sect3>
<sect3 id="_configuring_susemgrproxy"><title>Configuring SUSE Manager Proxy</title><para>Execute <filename>configure-tftpsync.sh</filename> on the <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> systems.</para>
<para>This setup script asks for hostnames and IP addresses of the  server and the proxy.
Additionally, it asks for the <literal>tftpboot</literal> directory on the proxy.
For more information, see the output of <command>configure-tftpsync.sh --help</command>.</para>
</sect3>
<sect3 id="_configuring_server"><title>Configuring  Server</title><para>As root execute <filename>configure-tftpsync.sh</filename> on  Server:</para>
<screen>configure-tftpsync.sh proxy1.example.com proxy2.example.com</screen>
<para>Execute <command>cobbler sync</command> to initially push the files to the proxy systems.
This will succeed if all listed proxies are properly configured.</para>
<note>
<title>Changing the List of Proxy Systems</title>
<para>You can call <command>configure-tftpsync.sh</command> to change the list of proxy systems.
You must always provide the full list of proxy systems.</para>
</note>
<note>
<title>Reinstalling a Configured Proxy</title>
<para>In case you reinstall an already configured proxy and want to push all files again you must remove the cache file <filename>/var/lib/cobbler/pxe_cache.json</filename> before you can call <command>cobbler sync</command> again.</para>
</note>
</sect3>
<sect3 id="_requirements_2"><title>Requirements</title><para>The  Server must be able to access the <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> systems directly.
Push via proxies is not possible.</para>
</sect3>
</sect2>
<sect2 id="advanced.topics.cobbler.reqs.service"><title>Syncing and Starting the Cobbler Service</title><para>Before starting the cobbler service, run a check on the cobbler service to make sure that all the prerequisites are configured according to the organization’s needs with the <command>cobbler check</command> command.</para>
<para>If content, start the  server with the following command:</para>
<screen>/usr/sbin/spacewalk-service start</screen>
<warning>
<para>Do not start or stop the <command>cobblerd</command> service independent of the  service.
Doing so may cause errors and other issues.</para>
<para>Always use <command>/usr/sbin/spacewalk-service</command> to start or stop .</para>
</warning>
</sect2>
</sect1>
<sect1 id="advanced.topics.cobbler.adddistro"><title>Adding a Distribution to Cobbler</title><para>If all Cobbler prerequisites have been met and Cobbler is running, you can use the Cobbler server as an installation source for a distribution:</para>
<para>Make installation files such as the kernel image and the initrd image available on the Cobbler server.
Then add a distribution to Cobbler, using either the Web interface or the command line tools.</para>
<para>For information about creating and configuring AutoYaST or Kickstart distributions from the  interface, refer to <xref linkend="ref.webui.systems.autoinst.distribution"/>.</para>
<para>To create a distribution from the command line, use the <command>cobbler</command> command as root:</para>
<screen>cobbler distro add --name=`string`--kernel=`path`--initrd=`path`</screen>
<variablelist>
<varlistentry>
<term><option>--name=</option><replaceable>string</replaceable> option</term>
<listitem>
<para>A label used to differentiate one distribution choice from another (for example, <literal>sles12server</literal>).</para>
</listitem>
</varlistentry>
<varlistentry>
<term><option>--kernel=</option><replaceable>path</replaceable> option</term>
<listitem>
<para>Specifies the path to the kernel image file.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><option>--initrd=</option><replaceable>path</replaceable> option</term>
<listitem>
<para>specifies the path to the initial ram disk (initrd) image file.</para>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="advanced.topics.cobbler.addprofile"><title>Adding a Profile to Cobbler</title><para>Once you have added a distribution to Cobbler, you can add profiles.</para>
<para>Cobbler profiles associate a distribution with additional options like AutoYaST or Kickstart files.
Profiles are the core unit of provisioning and there must be at least one Cobbler profile for every distribution added.
For example, two profiles might be created for a Web server and a desktop configuration.
While both profiles use the same distribution, the profiles are for different installation types.</para>
<para>For information about creating and configuring Kickstart and AutoYaST profiles in the  interface, refer to <xref linkend="ref.webui.systems.autoinst.profiles"/>.</para>
<para>Use the <command>cobbler</command> command as root to create profiles from the command line:</para>
<screen>cobbler profile add --name=string --distro=string [--kickstart=url] \
  [--virt-file-size=gigabytes] [--virt-ram=megabytes]</screen>
<variablelist>
<varlistentry>
<term><option>--name=</option><replaceable>string</replaceable></term>
<listitem>
<para>The unique label for the profile, such as <literal>sles12webserver</literal> or <literal>sles12workstation</literal>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><option>--distro=</option><replaceable>string</replaceable></term>
<listitem>
<para>Specifies the distribution that will be used for this particular profile.
For adding distributions, see <xref linkend="advanced.topics.cobbler.adddistro"/>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><option>--kickstart=</option><replaceable>url</replaceable></term>
<listitem>
<para>Specifies the location of the Kickstart file (if available).</para>
</listitem>
</varlistentry>
<varlistentry>
<term><option>--virt-file-size=</option><replaceable>gigabytes</replaceable></term>
<listitem>
<para>Allows you to set the size of the virtual guest file image.
The default is 5 GB.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><option>--virt-ram=</option><replaceable>megabytes</replaceable></term>
<listitem>
<para>Specifies how many MB of physical RAM a virtual guest can consume.
The default is 512 MB.</para>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="advanced.topics.cobbler.addsystem"><title>Adding a System to Cobbler</title><para>Once the distributions and profiles for Cobbler have been created, add systems to Cobbler.
System records map a piece of hardware on a client with the cobbler profile assigned to run on it.</para>
<note>
<para>If you are provisioning via <command>koan</command> and PXE menus alone, it is not required to create system records.
They are useful when system-specific Kickstart templating is required or to establish that a specific system should always get specific content installed.
If a client is intended for a certain role, system records should be created for it.</para>
</note>
<para>For information about creating and configuring automated installation from the  interface, refer to <xref linkend="s4-sm-system-details-kick"/>.</para>
<para>Run the following command as root to add a system to the Cobbler configuration:</para>
<screen>cobbler system add --name=string --profile=string \
  --mac-address=AA:BB:CC:DD:EE:FF</screen>
<variablelist>
<varlistentry>
<term><option>--name=</option><replaceable>string</replaceable></term>
<listitem>
<para>A unique label for the system, such as <literal>engineering_server</literal> or <literal>frontoffice_workstation</literal>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><option>--profile=</option><replaceable>string</replaceable></term>
<listitem>
<para>Specifies the name of one of the profiles added in <xref linkend="advanced.topics.cobbler.addprofile"/>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><option>--mac-address=</option><replaceable>AA:BB:CC:DD:EE:FF</replaceable></term>
<listitem>
<para>Allows systems with the specified MAC address automatically being provisioned to the profile associated with the system record when they are being installed.</para>
</listitem>
</varlistentry>
</variablelist>
<para>For more options, such as setting hostname or IP addresses, refer to the Cobbler manpage (<command>man cobbler</command>).</para>
</sect1>
<sect1 id="advanced.topics.cobbler.templates"><title>Using Cobbler Templates</title><para>The  Web interface facilitates creating variables for use with Kickstart distributions and profiles.
To create a Kickstart profile variable, refer to <xref linkend="s4-sm-system-kick-details-variables"/>.</para>
<para>Kickstart variables are part of an infrastructural change in  to support templating in Kickstart files.
Kickstart templates are files describing how to build actual Kickstart files rather than creating specific Kickstarts.</para>
<para>These templates are shared by various profiles and systems that have their own variables and corresponding values.
These variables modify the templates and a template engine parses the template and variable data into a usable Kickstart file.
Cobbler uses an advanced template engine called Cheetah that provides support for templates, variables, and snippets.</para>
<para>Advantages of using templates include:</para>
<itemizedlist>
<listitem>
<para>Robust features that allow administrators to create and manage large amounts of profiles or systems without duplication of effort or manually creating Kickstarts for every unique situation.</para>
</listitem>
<listitem>
<para>While templates can become complex and involve loops, conditionals and other enhanced features and syntax, you can keep them simple by creating Kickstart files without such complexity.</para>
</listitem>
</itemizedlist>
<sect2 id="advanced.topics.cobbler.templates.usage"><title>Using Templates</title><para>Kickstart templates can have static values for certain common items such as PXE image file names, subnet addresses, and common paths such as <filename>/etc/sysconfig/network-scripts/</filename>.
However, templates differ from standard Kickstart files in their use of variables.</para>
<para>For example, a standard Kickstart file may have a networking section similar to the following:</para>
<screen>network --device=eth0 --bootproto=static --ip=192.168.100.24 \
  --netmask=255.255.255.0 --gateway=192.168.100.1 --nameserver=192.168.100.2</screen>
<para>In a Kickstart template file, the networking section would rather look like this:</para>
<screen>network --device=$net_dev --bootproto=static --ip=$ip_addr \
  --netmask=255.255.255.0 --gateway=$my_gateway --nameserver=$my_nameserver</screen>
<para>These variables will be substituted with the values set in your Kickstart profile variables or in your system detail variables.
If the same variables are defined in both the profile and the system detail, then the system detail variable takes precedence.</para>
<note>
<para>The template for the autoinstallation has syntax rules, using punctuation symbols.
To avoid clashes, they need to be properly treated.</para>
</note>
<para>In case the autoinstallation scenario contains any shell script using variables like <literal>$(example)</literal>, its content should be escaped by using the backslash symbol: <literal>\$(example)</literal>.</para>
<para>If the variable named <literal>example</literal> is defined in the autoinstallation snippet, the templating engine will evaluate <literal>$example</literal> with its content.
If there is no such variable, the content will be left unchanged.
Escaping the <keycap>$</keycap> symbol will prevent the templating engine to perform its evaluation as an internal variable.
Long scripts or strings can be escaped by wrapping them with the <literal>\#raw</literal> and <literal>\#end raw</literal> directives.
For example:</para>
<screen>#raw
#!/bin/bash
for i in {0..2}; do
 echo "$i - Hello World!"
done
#end raw</screen>
<para>Also, pay attention to similar scenarios like the following:</para>
<screen>#start some section (this is a comment)
echo "Hello, world"
#end some section (this is a comment)</screen>
<para>Any line with a <keycap>#</keycap> symbol followed by a whitespace is treated as a comment and is therefore not evaluated.</para>
<para>For more information about Kickstart templates, refer to the Cobbler project page at:</para>
<para><ulink url="https://fedorahosted.org/cobbler/wiki/KickstartTemplating">https://fedorahosted.org/cobbler/wiki/KickstartTemplating</ulink></para>
</sect2>
<sect2 id="advanced.topics.cobbler.templates.snippets"><title>Kickstart Snippets</title><para>If you have common configurations across all Kickstart templates and profiles, you can use the Snippets feature of Cobbler to take advantage of code reuse.</para>
<para>Kickstart snippets are sections of Kickstart code that can be called by a <option>$SNIPPET()</option> function that will be parsed by Cobbler and substituted with the contents of the snippet.</para>
<para>For example, you might have a common hard drive partition configuration for all servers, such as:</para>
<screen>clearpart --all
part /boot --fstype ext3 --size=150 --asprimary
part / --fstype ext3 --size=40000 --asprimary
part swap --recommended

part pv.00 --size=1 --grow

volgroup vg00 pv.00
logvol /var --name=var vgname=vg00 --fstype ext3 --size=5000</screen>
<para>Save this snippet of the configuration to a file like <filename>my_partition</filename> and place the file in <filename>/var/lib/cobbler/snippets/</filename>, where Cobbler can access it.</para>
<para>Use the snippet by calling the <option>$SNIPPET()</option> function in your Kickstart templates.
For example:</para>
<screen>$SNIPPET('my_partition')</screen>
<para>Wherever you invoke that function, the Cheetah parser will substitute the function with the snippet of code contained in the <filename>my_partition</filename> file.</para>
</sect2>
</sect1>
<sect1 id="advanced.topics.cobbler.koan"><title>Using Koan</title><para>Whether you are provisioning guests on a virtual machine or reinstalling a new distribution on a running system, koan works in conjunction with Cobbler to provision systems.</para>
<sect2 id="advanced.topics.cobbler.koan.virt"><title>Using Koan to Provision Virtual Systems</title><para>If you have created a virtual machine profile as documented in <xref linkend="advanced.topics.cobbler.addprofile"/>, you can use <command>koan</command> to initiate the installation of a virtual guest on a system.
For example, create a Cobbler profile with the following command:</para>
<screen>cobbler add profile --name=virtualfileserver \
  --distro=sles12-x86_64-server --virt-file-size=20 --virt-ram=1000</screen>
<para>This profile is for a fileserver running <phrase>SUSE Linux Enterprise Server</phrase>  12 with a 20 GB guest image size and allocated 1 GB of system RAM.
To find the name of the virtual guest system profile, run the following <command>koan</command> command:</para>
<screen>koan --server=hostname --list-profiles</screen>
<para>This command lists all the available profiles created with <command>cobbler profile add</command>.</para>
<para>Start creating the image file and the installation of the virtual guest system:</para>
<screen>koan --virt --server=cobbler-server.example.com \
  --profile=virtualfileserver --virtname=marketingfileserver</screen>
<para>The command specifies that a virtual guest system be created from the Cobbler server (hostname <literal role="server">cobbler-server.example.com</literal>) using the <literal>virtualfileserver</literal> profile.
The <option>virtname</option> option specifies a label for the virtual guest, which by default is the system’s MAC address.</para>
<para>Once the installation of the virtual guest is complete, it can be used as any other virtual guest system.</para>
</sect2>
<sect2 id="advanced.topics.cobbler.koan.reinstall"><title>Using Koan to Reinstall Running Systems</title><para><command>koan</command> can replace a still running system with a new installation from the available Cobbler profiles by executing the following command <emphasis>on the system to be reinstalled</emphasis>:</para>
<screen>koan --replace-self --server=hostname --profile=name</screen>
<para>This command, running on the system to be replaced, will start the provisioning process and replace its own system using the profile in <option>--profile=name</option> on the Cobbler server specified in <option>--server=hostname</option>.</para>
</sect2>
</sect1>
<sect1 id="advanced.topics.cobbler.buildiso"><title>Building ISOs with Cobbler</title><para>Some environments might lack PXE support.
The cobbler buildiso command provides functionality to create a boot ISO image containing a set of distributions and kernels, and a menu similar to PXE network installations.
Define the name and output location of the boot ISO using the <option>--iso</option> option.</para>
<note>
<title>ISO Build Directory</title>
<para>Depending on Cobbler related systemd settings (see <filename>/usr/lib/systemd/system/cobblerd.service</filename>) writing ISO images to public <filename>tmp</filename> directories will not work.</para>
</note>
<screen>cobbler buildiso --iso=/path/to/boot.iso</screen>
<para>The boot ISO includes all profiles and systems by default.
Limit these profiles and systems using the <option>--profiles</option> and <option>--systems</option> options.</para>
<screen>cobbler buildiso --systems="system1,system2,system3" \
  --profiles="profile1,profile2,profile3"</screen>
<note>
<para>Building ISOs with the <command>cobbler buildiso</command> command is supported for all architectures except the z Systems architecture.</para>
</note>
</sect1>
</chapter>
<chapter id="advanced.topics.virtualization"><title>Virtualization</title><para><phrase><phrase>SUSE</phrase> Manager</phrase> allows you to autoinstall and manage Xen and KVM{vmguest}s on a registered VM Host Server.
To autoinstall a VM Guest, an autoinstallable distribution and an autoinstallation profile (AutoYaST or Kickstart) need to exist on <phrase><phrase>SUSE</phrase> Manager</phrase>.
{vmguest}s registered with <phrase><phrase>SUSE</phrase> Manager</phrase> can be managed like <quote>regular</quote> machines.
In addition, basic VM Guestmanagement tasks such as (re)starting and stopping or changing processor and memory allocation can be carried out using <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<para>The following documentation is valid in the context of traditional clients.
Salt minions must be treated differently:</para>
<itemizedlist>
<listitem>
<para>Autoinstallation is still not supported and libvirt hosts are supported as read-only.</para>
</listitem>
</itemizedlist>
<warning>
<title>Limitation to Xen and KVM Guests</title>
<para>Autoinstalling and managing VM Guests via <phrase><phrase>SUSE</phrase> Manager</phrase> is limited to Xen and KVM guests.
{susemgr} uses <literal role="library">libvirt</literal> for virtual machine management.
Currently, virtual machines from other virtualization solutions such as VMware* or VirtualBox*, are recognized as VM Guests, but cannot be managed from within <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
</warning>
<sect1 id="sec.virtualization.autoinstall"><title>Autoinstalling VM Guest s</title><para>With <phrase><phrase>SUSE</phrase> Manager</phrase> you can automatically deploy Xen and KVM VM Guests using AutoYaST or Kickstart profiles.
It is also possible to automatically register the VM Guests, so they can immediately be managed by <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<sect2 id="sec.virtualization.autoinstall.req_mgr"><title>Requirements on SUSE Manager</title><para>Setting up and managing VM Guest
s with <phrase><phrase>SUSE</phrase> Manager</phrase>
does not require special configuration options.
However, you need to provide activation keys for the VM Host Server
and the VM Guest
s, an autoinstallable distribution and an autoinstallation profile.
To automatically register VM Guest
s with <phrase><phrase>SUSE</phrase> Manager</phrase>
, a bootstrap script is needed.</para>
<sect3 id="sec.virtualzation.autoinstall.req-mgr.keys"><title>Activation Keys</title><para>Just like any other client, VM Host Server
and VM Guest
s need to be registered with <phrase><phrase>SUSE</phrase> Manager</phrase>
using activation keys.
Find details on how to set up activation keys at <xref linkend="create.act.keys"/>.
While there are no special requirements for a VM Guest
 key, at least the following requirements must be met for the VM Host Server
 activation key.</para>
<itemizedlist>
<title>VM Host ServerActivation Key: Minimum Requirements</title>
<listitem>
<para>Entitlements: Provisioning, Virtualization Platform.</para>
</listitem>
<listitem>
<para>Packages: <literal role="resource">rhn-virtualization-host</literal> , <literal role="resource">osad</literal> .</para>
<para>If you want to manage the VM Host Server
system from <phrase><phrase>SUSE</phrase> Manager</phrase>
(e.g.
by executing remote scripts), the package <literal role="resource">rhncfg-actions</literal>
needs to be installed as well.</para>
</listitem>
</itemizedlist>
</sect3>
<sect3 id="sec.virtualzation.autoinstall.req-mgr.inst-source"><title>Setting up an Autoinstallable Distribution</title><para>To autoinstall clients from <phrase><phrase>SUSE</phrase> Manager</phrase>
, you need to provide an <quote>autoinstallable distribution</quote>
, also referred to as autoinstallable tree or installation source.
This installation source needs to be made available through the file system of the <phrase><phrase>SUSE</phrase> Manager</phrase>
 host.
It can for example be a mounted local or remote directory or a <quote>loop-mounted</quote>
 ISO image.
It must match the following requirements:</para>
<itemizedlist>
<listitem>
<para>Kernel and initrd location:</para>
</listitem>
</itemizedlist>
<itemizedlist>
<title>RedHat / Generic RPM</title>
<listitem>
<para>images/pxeboot/vmlinuz</para>
</listitem>
<listitem>
<para>images/pxeboot/initrd.img</para>
</listitem>
</itemizedlist>
<itemizedlist>
<title>SUSE</title>
<listitem>
<para>boot/<replaceable>arch</replaceable>/loader/initrd</para>
</listitem>
<listitem>
<para>boot/<replaceable>arch</replaceable>/loader/linux</para>
<itemizedlist>
<listitem>
<para>The <guimenu>Base Channel</guimenu> needs to match the autoinstallable distribution.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
<important>
<title>Autoinstallation package sources</title>
<para>There is a fundamental difference between RedHat and <phrase>SUSE</phrase>
systems regarding the package sources for autoinstallation.
The packages for a RedHat installation are being fetched from the <guimenu>Base Channel</guimenu>
.
Packages for installing <phrase>SUSE</phrase>
 systems are being fetched from the autoinstallable distribution.</para>
<para>As a consequence, the autoinstallable distribution for a <phrase>SUSE</phrase>
system has to be a complete installation source (same as for a regular installation).</para>
</important>
<orderedlist numeration="arabic">
<title>Procedure: Creating Autoinstallable Distribution</title>
<listitem>
<para>Make sure an installation source is available from a local directory. The data source can be any kind of network resource, a local directory or an ISO image (which has to be <quote>loop-mounted</quote> ). Files and directories must be world readable.</para>
</listitem>
<listitem>
<para>Log in to the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface and navigate to <menuchoice><guimenu>Systems</guimenu> <guimenu>Autoinstallation</guimenu> <guimenu>Distributions</guimenu> <guimenu>Create Distribution</guimenu></menuchoice> .</para>
</listitem>
<listitem>
<para>Fill out the form <guimenu>Create Autoinstallable Distribution</guimenu> as follows:</para>
<variablelist>
<varlistentry>
<term><guimenu>Distribution Label</guimenu></term>
<listitem>
<para>Choose a unique name for the distribution.
Only letters, numbers, hyphens, periods, and underscores are allowed; the minimum length is 4 characters.
This field is mandatory.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Tree Path</guimenu></term>
<listitem>
<para>Absolute local disk path to installation source.
This field is mandatory.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Base Channel</guimenu></term>
<listitem>
<para>Channel matching the installation source.
This channel is the package source for non-<phrase>SUSE</phrase>
installations.
This field is mandatory.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Installer Generation</guimenu></term>
<listitem>
<para>Operating system version matching the installation source.
This field is mandatory.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Kernel Options</guimenu></term>
<listitem>
<para>Options passed to the kernel when booting for the installation.
There is no need to specify the <option>install=</option> parameter since it will automatically be added.
Moreover, the parameters <option>self_update=0 pt.options=self_update</option> are added automatically to prevent AutoYaST from updating itself during the system installation.
This field is optional.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Post Kernel Options</guimenu></term>
<listitem>
<para>Options passed to the kernel when booting the installed system for the first time.
This field is optional.</para>
</listitem>
</varlistentry>
</variablelist>
</listitem>
<listitem>
<para>Save your settings by clicking <guimenu>Create Autoinstallable Distribution</guimenu> .</para>
</listitem>
</orderedlist>
<para>To edit an existing <guimenu>Autoinstallable Distribution</guimenu>
, go to <menuchoice><guimenu>Systems</guimenu> <guimenu>Autoinstallation</guimenu> <guimenu>Distributions</guimenu></menuchoice>
 and click on a <guimenu>Label</guimenu>
.
Make the desired changes and save your settings by clicking <guimenu>Update Autoinstallable Distribution</guimenu>
.</para>
</sect3>
<sect3 id="sec.virtualzation.autoinstall.req-mgr.profile"><title>Providing an Autoinstallation Profile</title><para>Autoinstallation profiles (AutoYaST
or Kickstart
files) contain all the installation and configuration data needed to install a system without user intervention.
They may also contain scripts that will be executed after the installation has completed.</para>
<para>All profiles can be uploaded to <phrase><phrase>SUSE</phrase> Manager</phrase>
and be edited afterwards.
Kickstart profiles can also be created from scratch with <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
<para>A minimalist AutoYaST
profile including a script for registering the client with <phrase><phrase>SUSE</phrase> Manager</phrase>
is listed in
<xref linkend="advanced.topics.app.ay.example-simple"/>.
For more information, examples and HOWTOs on AutoYaST
 profiles, refer to <emphasis><phrase role="ref">SUSE Linux Enterprise AutoYaST</phrase></emphasis>
 (<ulink url="https://www.suse.com/documentation/sles-12/book_autoyast/data/book_autoyast.html">https://www.suse.com/documentation/sles-12/book_autoyast/data/book_autoyast.html</ulink>). For more information on Kickstart
 profiles, refer to your RedHat documentation.</para>
</sect3>
<sect3 id="_sle_15_systems"><title>SUSE Linux Enterprise 15 Systems</title><para>You need the installation media to setup the distribution.  Starting with version 15, there is only one installation media.  You will use the same one for SLES, SLED, and all the other <phrase>SUSE Linux Enterprise</phrase> 15 based products.</para>
<para>In the AutoYaST profile specify which product is to be installed.
For installing <phrase>SUSE Linux Enterprise Server</phrase> use the following snippet in <filename>autoyast.xml</filename>:</para>
<screen>&lt;products config:type="list"&gt;
  &lt;listentry&gt;SLES&lt;/listentry&gt;
&lt;/products&gt;</screen>
<para>Then then specify all the required modules as <literal>add-on</literal> in <filename>autoyast.xml</filename>. This is a minimal <literal>SLE-Product-SLES15-Pool</literal> selection that will result in a working
installation and can be managed by <phrase><phrase>SUSE</phrase> Manager</phrase>:</para>
<itemizedlist>
<listitem>
<para>SLE-Manager-Tools15-Pool</para>
</listitem>
<listitem>
<para>SLE-Manager-Tools15-Updates</para>
</listitem>
<listitem>
<para>SLE-Module-Basesystem15-Pool</para>
</listitem>
<listitem>
<para>SLE-Module-Basesystem15-Updates</para>
</listitem>
<listitem>
<para>SLE-Product-SLES15-Updates</para>
</listitem>
</itemizedlist>
<para>It is also recommended to add the following modules:</para>
<itemizedlist>
<listitem>
<para>SLE-Module-Server-Applications15-Pool</para>
</listitem>
<listitem>
<para>SLE-Module-Server-Applications15-Updates</para>
</listitem>
</itemizedlist>
<sect4 id="sec.virtualzation.autoinstall.req-mgr.profile.upload"><title>Uploading an Autoinstallation Profile</title><orderedlist numeration="arabic">
<listitem>
<para>Log in to the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface and open <menuchoice><guimenu>Systems</guimenu> <guimenu>Autoinstallation</guimenu> <guimenu>Profiles</guimenu> <guimenu>Upload New Kickstart/AutoYaST File</guimenu></menuchoice> .</para>
</listitem>
<listitem>
<para>Choose a unique name for the profile. Only letters, numbers, hyphens, periods, and underscores are allowed; the minimum length is 6 characters. This field is mandatory.</para>
</listitem>
<listitem>
<para>Choose an <guimenu>Autoinstallable Tree</guimenu> from the drop-down menu. If no <guimenu>Autoinstallable Tree</guimenu> is available, you need to add an Autoinstallable Distribution. Refer to <xref linkend="sec.virtualzation.autoinstall.req-mgr.inst-source"/> for instructions.</para>
</listitem>
<listitem>
<para>Choose a <guimenu>Virtualization Type</guimenu> from the drop-down menu. KVM and Xen (para-virtualized and fully-virtualized) are available. Do not choose <guimenu>Xen Virtualized Host</guimenu> here.</para>
</listitem>
<listitem>
<para>Scroll down to the <guimenu>File to Upload</guimenu> dialog, click <guimenu>Browse</guimenu> to select it, then click <guimenu>Upload File</guimenu> .</para>
</listitem>
<listitem>
<para>The uploaded file will be displayed in the <guimenu>File Contents</guimenu> section, where you can edit it.</para>
</listitem>
<listitem>
<para>Click <guimenu>Create</guimenu> to store the profile.</para>
</listitem>
</orderedlist>
<para>To edit an existing profile, go to <menuchoice><guimenu>Systems</guimenu> <guimenu>Autoinstallation</guimenu> <guimenu>Profiles</guimenu></menuchoice>
 and click on a <guimenu>Label</guimenu>
.
Make the desired changes and save your settings by clicking <guimenu>Create</guimenu>
.</para>
<note>
<title>Editing existing Kickstartprofiles</title>
<para>If you are changing the <guimenu>Virtualization Type</guimenu>
 of an existing Kickstart
 profile, it may also modify the bootloader and partition options, potentially overwriting any user customizations.
Be sure to review the <guimenu>Partitioning</guimenu>
 tab to verify these settings when changing the <guimenu>Virtualization Type</guimenu>
.</para>
</note>
</sect4>
<sect4 id="sec.virtualzation.autoinstall.req-mgr.profile.generate"><title>Creating a Kickstart Profile</title><note>
<para>Currently it is only possible to create autoinstallation profiles for RHEL systems.
If installing a <phrase>SUSE Linux Enterprise Server</phrase>
system, you need to upload an existing AutoYaST
profile as described in <xref linkend="sec.virtualzation.autoinstall.req-mgr.profile.upload"/>.</para>
</note>
<orderedlist id="pro.at.virtualzation.autoinstall.ks.profile.generate" numeration="arabic">
<listitem>
<para>Log in to the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface and go to <menuchoice><guimenu>Systems</guimenu> <guimenu>Autoinstallation</guimenu> <guimenu>Profiles</guimenu> <guimenu>Create New Kickstart File</guimenu></menuchoice> .</para>
</listitem>
<listitem>
<para>Choose a unique name for the profile. The minimum length is 6 characters. This field is mandatory.</para>
</listitem>
<listitem>
<para>Choose a <guimenu>Base Channel</guimenu> . This channel is the package source for non-<phrase>SUSE</phrase> installations and must match the <guimenu>Autoinstallable Tree</guimenu> . This field is mandatory.</para>
</listitem>
<listitem>
<para>Choose an <guimenu>Autoinstallable Tree</guimenu> from the drop-down menu. If no <guimenu>Autoinstallable Tree</guimenu> is available, you need to add an Autoinstallable Distribution. Refer to <xref linkend="sec.virtualzation.autoinstall.req-mgr.inst-source"/> for instructions.</para>
</listitem>
<listitem>
<para>Choose a <guimenu>Virtualization Type</guimenu> from the drop-down menu. KVM and Xen (para-virtualized and fully-virtualized) are available. Do not choose <guimenu>Xen Virtualized Host</guimenu> here.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Next</guimenu> button.</para>
</listitem>
<listitem>
<para>Select the location of the distribution files for the installation of your VM Guest s. There should already be a <guimenu>Default Download Location</guimenu> filled out and selected for you on this screen. Click the <guimenu>Next</guimenu> button.</para>
</listitem>
<listitem>
<para>Choose a <systemitem class="username">root</systemitem> password for the VM Guest s. Click the <guimenu>Finish</guimenu> button to generate the profile.</para>
<para>This completes Kickstart profile creation.
After generating a profile, you are taken to the newly-created Kickstart profile.
You may browse through the various tabs of the profile and modify the settings as you see fit, but this is not necessary as the default settings should work well for the majority of cases.</para>
</listitem>
</orderedlist>
</sect4>
<sect4 id="sec.virtualzation.autoinstall.req-mgr.profile.scripts"><title>Adding a Registration Script to the Autoinstallation Profile</title><para>A VM Guest
that is autoinstalled does not get automatically registered.
Adding a section to the autoinstallation profile that invokes a bootstrap script for registration will fix this.
The following procedure describes adding a corresponding section to an AutoYaST
profile.
Refer to your RedHat Enterprise Linux documentation for instructions on adding scripts to a Kickstart
file.</para>
<orderedlist numeration="arabic">
<listitem>
<para>First, provide a bootstrap script on the <phrase><phrase>SUSE</phrase> Manager</phrase> :</para>
<itemizedlist>
<listitem>
<para>Create a bootstrap script for VM Guest s on the <phrase><phrase>SUSE</phrase> Manager</phrase> as described in <xref linkend="generate.bootstrap.script"/>.</para>
</listitem>
<listitem>
<para>Log in as <systemitem class="username">root</systemitem> to the konsole of <phrase><phrase>SUSE</phrase> Manager</phrase> and go to <filename>/srv/www/htdocs/pub/bootstrap</filename> . Copy <filename>bootstrap.sh</filename> (the bootstrap script created in the previous step) to e.g. <filename>bootstrap_vm_guests.sh</filename> in the same directory.</para>
</listitem>
<listitem>
<para>Edit the newly created file according to your needs. The minimal requirement is to include the activation key for the VM Guest s (see <xref linkend="sec.virtualzation.autoinstall.req-mgr.keys"/> for details). We strongly recommend to also include one or more GPG keys (for example, your organization key and package signing keys).</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Log in to the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface and go to <menuchoice><guimenu>Systems</guimenu> <guimenu>Autoinstallation</guimenu> <guimenu>Profiles</guimenu></menuchoice> . Click on the profile that is to be used for autoinstalling the VM Guest s to open it for editing.</para>
<para>Scroll down to the <guimenu>File Contents</guimenu>
section where you can edit the AutoYaST
XML file.
Add the following snippet at the end of the XML file right before the closing <literal>&lt;/profile&gt;</literal> tag and replace the given IP address with the address of the <phrase><phrase>SUSE</phrase> Manager</phrase>
server.
See <xref linkend="advanced.topics.app.ay.example-simple"/>for an example script.</para>
<screen>&lt;scripts&gt;
  &lt;init-scripts config:type="list"&gt;
    &lt;script&gt;
      &lt;interpreter&gt;shell &lt;/interpreter&gt;
      &lt;location&gt;
        http://`192.168.1.1`/pub/bootstrap/bootstrap_vm_guests.sh
      &lt;/location&gt;
    &lt;/script&gt;
  &lt;/init-scripts&gt;
&lt;/scripts&gt;</screen>
<important>
<title>Only one &lt;scripts&gt; section allowed</title>
<para>If your AutoYaST
profile already contains a <literal>&lt;scripts&gt;</literal> section, do not add a second one, but rather place the <literal>&lt;script&gt;</literal> part above within the existing <literal>&lt;scripts&gt;</literal> section!</para>
</important>
</listitem>
<listitem>
<para>Click <guimenu>Update</guimenu> to save the changes.</para>
</listitem>
</orderedlist>
</sect4>
</sect3>
</sect2>
<sect2 id="sec.virtualization.autoinstall.req_vmhost"><title>VM Host Server Setup</title><para>A VM Host Server
system serving as a target for autoinstalling VM Guest
s from <phrase><phrase>SUSE</phrase> Manager</phrase>
must be capable of running guest operating systems.
This requires either KVM
or Xen
being properly set up.
For installation instructions for <phrase>SUSE Linux Enterprise Server</phrase>
systems refer to the <emphasis><phrase role="ref">SLES Virtualization Guide</phrase></emphasis>
 available from <ulink url="https://www.suse.com/documentation/sles-12/book_virt/data/book_virt.html">https://www.suse.com/documentation/sles-12/book_virt/data/book_virt.html</ulink>.
For instructions on setting up a RedHat VM Host Server
 refer to your RedHat Enterprise Linux documentation.</para>
<para>Since <phrase><phrase>SUSE</phrase> Manager</phrase>
uses <literal role="library">libvirt</literal>
 for VM Guest
 installation and management, the <literal role="daemon">libvirtd</literal>
 needs to run on the VM Host Server
.
The default <literal role="library">libvirt</literal>
 configuration is sufficient to install and manage VM Guest
s from <phrase><phrase>SUSE</phrase> Manager</phrase>
.
However, in case you want to access the VNC console of a VM Guest
 as a non-<systemitem class="username">root</systemitem>
 user, you need to configure <literal role="library">libvirt</literal>
 appropriately.
Configuration instructions for <literal role="library">libvirt</literal>
 on <phrase>SUSE Linux Enterprise Server</phrase>
 are available in the <emphasis><phrase role="ref">SLES Virtualization
    Guide</phrase></emphasis>
 available from <ulink url="https://www.suse.com/documentation/sles-12/book_virt/data/book_virt.html">https://www.suse.com/documentation/sles-12/book_virt/data/book_virt.html</ulink> available from <ulink url="http://www.suse.com/documentation/sles11/">http://www.suse.com/documentation/sles11/</ulink>.
For instructions for a RedHat VM Host Server
 refer to your RedHat Enterprise Linux documentation.</para>
<para>Apart from being able to serve as a host for KVM
or Xen
guests, which are managed by <literal role="library">libvirt</literal>
, a VM Host Server
 must be registered with <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
<orderedlist numeration="arabic">
<listitem>
<para>Make sure either KVM or Xen is properly set up.</para>
</listitem>
<listitem>
<para>Make sure the <literal role="daemon">libvirtd</literal> is running.</para>
</listitem>
<listitem>
<para>Register the VM Host Server with <phrase><phrase>SUSE</phrase> Manager</phrase> :</para>
<itemizedlist>
<listitem>
<para>Create a bootstrap script on the <phrase><phrase>SUSE</phrase> Manager</phrase> as described in <xref linkend="generate.bootstrap.script"/>.</para>
</listitem>
<listitem>
<para>Download the bootstrap script from <literal>susemanager.example.com/pub/bootstrap/bootstrap.sh</literal> to the VM Host Server .</para>
</listitem>
<listitem>
<para>Edit the bootstrap script according to your needs. The minimal requirement is to include the activation key for the VM Host Server (see <xref linkend="sec.virtualzation.autoinstall.req-mgr.keys"/> for details). We strongly recommend to also include one or more GPG keys (for example, your organization key and package signing keys).</para>
</listitem>
<listitem>
<para>Execute the bootstrap script to register the VM Host Server .</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<sect3 id="sec.virtualization.autoinstall.req_vmhost.salt"><title>VM Host Server setup on Salt clients</title><para>If the VM Host Server is registered as a Salt minion, a final configuration step is needed in order to gather all the guest VMs defined on the VM Host Server:</para>
<orderedlist numeration="arabic">
<listitem>
<para>From the <menuchoice><guimenu>System Details</guimenu> <guimenu>Properties</guimenu></menuchoice> page, enable the <literal role="guimenu">Add-on System Type</literal> <literal>Virtualization Host</literal> and confirm with <guimenu>Update Properties</guimenu>.</para>
</listitem>
<listitem>
<para>Schedule a Hardware Refresh. On the <menuchoice><guimenu>System Details</guimenu> <guimenu>Hardware</guimenu></menuchoice> page click <guimenu>Schedule Hardware Refresh</guimenu>.</para>
</listitem>
</orderedlist>
</sect3>
<sect3 id="sec.virtualization.autoinstall.req_vmhost.traditional"><title>VM Host Server setup on Traditional clients</title><para>Once the registration process is finished and all packages have been installed, enable the <literal role="daemon">osad</literal>
(Open Source Architecture Daemon). On a <phrase>SUSE Linux Enterprise Server</phrase>
system this can be achieved by running the following commands as user <systemitem class="username">root</systemitem>
:</para>
<screen>systemctl stop rhnsd
systemctl disable rhnsd</screen>
<screen>systemctl enable osad
systemctl start osad</screen>
<important>
<title>osadTogether with rhnsd</title>
<para>The <literal role="daemon">rhnsd</literal>
 daemon checks for scheduled actions every four hours, so it can take up to four hours before a scheduled action is carried out.
If many clients are registered with <phrase><phrase>SUSE</phrase> Manager</phrase>
, this long interval ensures a certain level of load balancing since not all clients act on a scheduled action at the same time.</para>
</important>
<para>However, when managing VM Guest
s, you usually want actions like rebooting a VM Guest
to be carried out immediately. Adding <literal role="daemon">osad</literal>
 ensures that.
The <literal role="daemon">osad</literal>
 daemon receives commands over the jabber protocol from <phrase><phrase>SUSE</phrase> Manager</phrase>
 and commands are instantly executed.
Alternatively you may schedule actions to be carried out at a fixed time in the future (whereas with <literal role="daemon">rhnsd</literal>
 you can only schedule for a time in the future plus up to four hours).</para>
</sect3>
</sect2>
<sect2 id="sec.virtualization.autoinstall.installation"><title>Autoinstalling VM Guest s</title><para>Once all requirements on the <phrase><phrase>SUSE</phrase> Manager</phrase>
and the VM Host Server
are met, you can start to autoinstall VM Guest
s on the host.
Note that VM Guest
s will not be automatically registered with <phrase><phrase>SUSE</phrase> Manager</phrase>
, therefore we strongly recommend to modify the autoinstallation profile as described in <xref linkend="sec.virtualzation.autoinstall.req-mgr.profile.scripts"/>. VM Guest
s need to be registered to manage them with <phrase><phrase>SUSE</phrase> Manager</phrase>
.
Proceed as follows to autoinstall a VM Guest
;.</para>
<important>
<title>No parallel Autoinstallations on VM Host Server</title>
<para>It is not possible to install more than one VM Guest
at a time on a single VM Host Server
.
When scheduling more than one autoinstallation with <phrase><phrase>SUSE</phrase> Manager</phrase>
make sure to choose a timing, that starts the next installation after the previous one has finished.
If a guest installation starts while another one is still running, the running installation will be cancelled.</para>
</important>
<orderedlist numeration="arabic">
<listitem>
<para>Log in to the <phrase><phrase>SUSE</phrase> Manager</phrase> Web interface and click the <guimenu>Systems</guimenu> tab.</para>
</listitem>
<listitem>
<para>Click the VM Host Server 's name to open its <guimenu>System Status</guimenu> page.</para>
</listitem>
<listitem>
<para>Open the form for creating a new VM Guest by clicking <menuchoice><guimenu>Virtualization</guimenu> <guimenu>Provisioning</guimenu></menuchoice> . Fill out the form by choosing an autoinstallation profile and by specifying a name for the VM Guest (must not already exist on VM Host Server ). Choose a proxy if applicable and enter a schedule. To change the VM Guest 's hardware profile and configuration options, click <guimenu>Advanced Options</guimenu> .</para>
</listitem>
<listitem>
<para>Finish the configuration by clicking <guimenu>Schedule Autoinstallation and Finish</guimenu> . The <guimenu>Session Status</guimenu> page opens for you to monitor the autoinstallation process.</para>
</listitem>
</orderedlist>
<note>
<title>Checking the Installation Log</title>
<para>To view the installation log, click <menuchoice><guimenu>Events</guimenu> <guimenu>History</guimenu></menuchoice>
 on the <guimenu>Session Status</guimenu>
 page.
On the <guimenu>System History Event</guimenu>
 page you can click a <guimenu>Summary</guimenu>
 entry to view a detailed log.</para>
<para>In case an installation has failed, you can <guimenu>Reschedule</guimenu>
 it from this page once you have corrected the problem.
You do not have to configure the installation again.</para>
<para>If the event log does not contain enough information to locate a problem, log in to the VM Host Server
console and read the log file <filename>/var/log/up2date</filename>
.
If you are using the <literal role="daemon">rhnsd</literal>
, you may alternatively immediately trigger any scheduled actions by calling <command>rhn_ckeck</command> on the VM Host Server
.
Increase the command’s verbosity by using the options <option>-v</option>, <option>-vv</option>, or <option>-vvv</option>, respectively.</para>
</note>
</sect2>
</sect1>
<sect1 id="sec.virtualization.vmguest-manage"><title>Managing VM Guest s</title><para>Basic VM Guest
management actions such as restarting or shutting down a virtual machine as well as changing the CPU and memory allocation can be carried out in the <phrase><phrase>SUSE</phrase> Manager</phrase>
Web interface if the following requirements are met:</para>
<itemizedlist>
<listitem>
<para>VM Host Server must be a KVM or Xen host.</para>
</listitem>
<listitem>
<para><literal role="daemon">libvirtd</literal> must be running on VM Host Server .</para>
</listitem>
<listitem>
<para>VM Host Server must be registered with <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
</listitem>
</itemizedlist>
<para>In addition, if you want to see the profile of the VM Guest, install packages, etc., you must also register it with <phrase><phrase>SUSE</phrase> Manager</phrase>.</para>
<para>All actions can be triggered in the <phrase><phrase>SUSE</phrase> Manager</phrase>
Web interface from the <guimenu>Virtualization</guimenu>
 page of the VM Host Server
.
Navigate to this page by clicking the <guimenu>Systems</guimenu>
 tab.
On the resulting page, click the VM Host Server
's name and then on <guimenu>Virtualization</guimenu>
.
This page lists all VM Guest
s for this host, known to <phrase><phrase>SUSE</phrase> Manager</phrase>
.</para>
<sect2 id="sec.virtualization.vmguest-manage.details"><title>Displaying a VM Guest 's Profile</title><para>Click the name of a VM Guest
on the VM Host Server
's <guimenu>Virtualization</guimenu>
 page to open its profile page with detailed information about this guest.
For details, refer to <xref linkend="ref.webui.systems.systems"/>.</para>
<para>A profile page for a virtual system does not differ from a regular system’s profile page.
You can perform the same actions (e.g.
installing software or changing its configuration).</para>
</sect2>
<sect2 id="sec.virtualization.vmguest-manage.status"><title>Starting, Stopping, Suspending and Resuming a VM Guest</title><para>To start, stop, restart, suspend, or resume a VM Guest
, navigate to the VM Host Server
's <guimenu>Virtualization</guimenu>
 page.
Check one or more <guimenu>Guests</guimenu>
 listed in the table and scroll down to the bottom of the page.
Choose an action from the drop-down list and click <guimenu>Apply Action</guimenu>
. <guimenu>Confirm</guimenu>
 the action on the next page.</para>
<note>
<title>Automatically restarting a VM Guest</title>
<para>Automatically restarting a VM Guest
when the VM Host Server
reboots is not enabled by default on VM Guest
s and cannot be configured from <phrase><phrase>SUSE</phrase> Manager</phrase>
.
Refer to your KVM
or Xen
documentation.
Alternatively, you may use <literal role="library">libvirt</literal>
 to enable automatic reboots.</para>
</note>
</sect2>
<sect2 id="_changing_the_cpu_or_ram_allocation_of_a_vmguest"><title>Changing the CPU or RAM allocation of a VM Guest</title><para>To change the CPU or RAM allocation of a VM Guest
navigate to the VM Host Server
's <guimenu>Virtualization</guimenu>
 page.
Check one or more <guimenu>Guests</guimenu>
 from the table and scroll down to the bottom of the page.
Choose an action from the <guimenu>Set</guimenu>
 drop-down list and provide a new value.
Confirm with <guimenu>Apply Changes</guimenu>
 followed by <guimenu>Confirm</guimenu>
.</para>
<para>The memory allocation can be changed on the fly, provided the memory ballooning driver is installed on the VM Guest
.
If this is not the case, or if you want to change the CPU allocation, you need to shutdown the guest first.
Refer to <xref linkend="sec.virtualization.vmguest-manage.status"/> for details.</para>
</sect2>
<sect2 id="sec.virtualization.vmguest-manage.delete"><title>Deleting a VM Guest</title><para>To delete a VM Guest
you must first shut it down as described in <xref linkend="sec.virtualization.vmguest-manage.status"/>.
Wait at least two minutes to allow the shutdown to finish and then choose <guimenu>Delete Systems</guimenu>
 followed by <guimenu>Apply Action</guimenu>
 and <guimenu>Confirm</guimenu>
.</para>
</sect2>
</sect1>
</chapter>
<chapter id="advanced.topics.adding.vmware.esxi.host"><title>Inventorying vCenter/vSphere ESXi Hosts with </title><sect1 id="_introduction_3"><title>Introduction</title><para>Foreign virtual hosts (such as vCenter and vSphere ESXi) can be inventoried using the <guimenu>Virtual Host Manager</guimenu>.
From the vSphere Client you can define roles and permissions for vCenter and vSphere ESXi users allowing vSphere objects and resources to be imported and inventoried by .
Objects and resources are then displayed as foreign hosts on the  <menuchoice><guimenu>Systems</guimenu> <guimenu>Virtual Systems</guimenu></menuchoice> page.</para>
<para>The following sections will guide you through:</para>
<itemizedlist>
<listitem>
<para>Requirements</para>
</listitem>
<listitem>
<para>Overview of permissions and roles</para>
</listitem>
<listitem>
<para>Adding vCenter and vSphere ESXi hosts to </para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="_requirements_3"><title>Requirements</title><para>The following table displays the default API communication port and required access rights for inventorying objects and resources.</para>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry><para>Ports / Permissions</para></entry>
<entry><para>Description</para></entry>
</row>
</thead>
<tbody>
<row>
<entry><para>443</para></entry>
<entry><para>Default port that  uses to access the ESXi API for obtaining infrastructure data</para></entry>
</row>
<row>
<entry><para>read-only</para></entry>
<entry><para>All vCenter/ESXi objects and resources that should be inventoried by the Virtual Host Manager should be at least assigned the <emphasis>read-only</emphasis> role.
Mark objects and resources with <emphasis>no-access</emphasis> to exclude them from the inventory.</para></entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect1>
<sect1 id="_permissions_and_roles_overview"><title>Permissions and Roles Overview</title><para>The following section will guide you through assigning user permissions and roles in vCenter/ESXi.</para>
<para>A user is someone who has been authorized access to an ESXi host.
The Virtual Host Manager (located on the  server) will inventory ESXi data defined by assigned roles and permissions on a user account.</para>
<para>For example: The user John has been assigned the <emphasis>read-only</emphasis> access role to all servers and datacenters in his company with one exception.
Johns account has been assigned the <emphasis>no-access</emphasis> role on the company’s <emphasis>Financial Database server</emphasis>.
You decide to use Johns user account and add the ESXi host to .
During the inventory the <emphasis>Financial Database server</emphasis> will be excluded.</para>
<para>Keep user access roles in mind when planning to add ESXi hosts to .
It is important to understand that  will not inventory any objects or resources assigned with the no-access role on any user account.</para>
<tip>
<title>User Roles/Permissions</title>
<para>When planning to add new ESXi hosts to , ask yourself the following question:</para>
<para>Have users assigned to a host been provided with the required roles and permissions for objects and resources that should be inventoried by ?</para>
</tip>
</sect1>
<sect1 id="_adding_new_users_and_assigning_roles"><title>Adding New Users and Assigning Roles</title><para>See the official vSphere documentation on adding new users and assigning roles.</para>
<itemizedlist>
<listitem>
<para><ulink url="https://pubs.vmware.com/vsphere-50/index.jsp#com.vmware.vsphere.security.doc_50/GUID-D7AEC653-EBC8-4573-B990-D8E58742F8ED.html">Authentication and User Management</ulink></para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="_inventorying_vcenter_vsphere_esxi_hosts"><title>Inventorying vCenter/vSphere ESXi Hosts</title><para>The following procedure will guide you through inventorying a VSphere ESXi host with .</para>
<orderedlist numeration="arabic">
<listitem>
<para>From the  Web UI select <menuchoice><guimenu>Main Menu</guimenu> <guimenu>Systems</guimenu> <guimenu>Virtual Host Managers</guimenu></menuchoice> from the left navigation bar.</para>
</listitem>
<listitem>
<para>From the upper right corner of the <emphasis>Virtual Host Managers</emphasis> page select <guimenu>Create</guimenu> VMWare-based.</para>
</listitem>
<listitem>
<para>From the <emphasis>Add a VMware-based Virtual Host Manager</emphasis> page fill the following fields with your ESXi host data:</para>
<variablelist>
<varlistentry>
<term>Label</term>
<listitem>
<para>Custom name for your Virtual Host Manager</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Hostname</term>
<listitem>
<para>FQDN or host IP address</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Port</term>
<listitem>
<para>Default ESXi API port</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Username</term>
<listitem>
<para>Assign a username</para>
<important>
<para>Remember that only objects and resources which match a users defined role will be inventoried.
Set the users role on objects and resources you want inventoried to <emphasis>read-only</emphasis></para>
</important>
</listitem>
</varlistentry>
<varlistentry>
<term>Password</term>
<listitem>
<para>ESXi users password</para>
<informalfigure>
<mediaobject><textobject role="description"><phrase>systems virtual host managers vmware</phrase></textobject><imageobject>
<imagedata fileref="systems_virtual_host_managers_vmware.png" width="80%"/>
</imageobject></mediaobject>
</informalfigure>
</listitem>
</varlistentry>
</variablelist>
</listitem>
<listitem>
<para>Click the <guimenu>Create</guimenu> button.</para>
</listitem>
<listitem>
<para>From the <menuchoice><guimenu>Systems</guimenu> <guimenu>Virtual Host Managers</guimenu></menuchoice> page select the new Virtual Host manager.</para>
</listitem>
<listitem>
<para>From the <menuchoice><guimenu>Virtual Host Managers</guimenu> <guimenu>Properties</guimenu></menuchoice> page select the <guimenu>Refresh</guimenu> button.</para>
<important>
<para>If you do not refresh the data from a new Virtual Host Manager, host data will not be inventoried and therefore will not be displayed under <menuchoice><guimenu>Systems</guimenu> <guimenu>Virtual Systems</guimenu></menuchoice>.</para>
</important>
</listitem>
<listitem>
<para>View inventoried ESXi host objects and resources by selecting <menuchoice><guimenu>Systems</guimenu> <guimenu>Virtual Systems</guimenu></menuchoice> .</para>
</listitem>
</orderedlist>
</sect1>
</chapter>
<chapter id="suse.mgr.command.line.tools"><title>SUSE Manager Command Line Tools</title><sect1 id="_installing_command_line_tool_packages"><title>Installing Command Line Tool Packages</title><para>In addition to the SUSE Manager Web interface, SUSE Manager offers two command line tools for managing (Traditional) system configuration files :</para>
<itemizedlist>
<listitem>
<para>The Configuration Client (<emphasis role="strong">mgrcfg-client</emphasis>)</para>
</listitem>
<listitem>
<para>The Configuration Manager (<emphasis role="strong">mgrcfg-manager</emphasis>)</para>
</listitem>
</itemizedlist>
<para>You can use the <emphasis role="strong">mgrcfg-actions</emphasis> tool to <emphasis>enable</emphasis> and <emphasis>disable</emphasis> configuration management on client systems.</para>
<para>To work with these tools install them from the SUSE Manager Tools child channel as root.</para>
<screen>zypper in rhncfg-manager</screen>
<screen>zypper in rhncfg-actions</screen>
<para>Install the following package on client systems:</para>
<screen>zypper in rhncfg-client</screen>
<tip>
<title>Configuration File Backups</title>
<para>When a configuration file is deployed via SUSE Manager, a backup of the previous file including its full path is stored in the <filename>/var/lib/rhncfg/backups/</filename>.
The backup retains its filename but has a <emphasis>.rhn-cfg-backup</emphasis> extension appended.</para>
</tip>
</sect1>
<sect1 id="mgr.actions.control"><title>Actions Control  (mgr-actions-control)</title><para>The Actions Control (<emphasis role="strong">mgr-actions-control</emphasis>) application is used to enable and disable configuration management on a system.
Client systems cannot be managed in this fashion by default.
This tool allows SUSE Manager administrators to enable or disable specific modes of allowable actions such as:</para>
<itemizedlist>
<listitem>
<para>Deploying a configuration file on the system</para>
</listitem>
<listitem>
<para>Uploading a file from the system</para>
</listitem>
<listitem>
<para>Using the diff command to find out what is currently managed on a system with what is available</para>
</listitem>
<listitem>
<para>Running remote commands</para>
</listitem>
</itemizedlist>
<para>These various modes are enabled/disabled by placing/removing files and directories in the <filename>/etc/sysconfig/rhn/allowed-actions/</filename> directory.
Due to the default permissions of the <filename>/etc/sysconfig/rhn/</filename> directory, Actions Control has to be run by someone with root access.</para>
<sect2 id="_general_command_line_options"><title>General command line options</title><para>There is a manpage available, as for most command line tools.
First, decide which scheduled actions should be enabled for use by system administrators.
The following options enable the various scheduled action modes:</para>
<variablelist>
<varlistentry>
<term>--enable-deploy</term>
<listitem>
<para>Allow mgrcfg-client to deploy files.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--enable-diff</term>
<listitem>
<para>Allow mgrcfg-client to diff files.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--enable-upload</term>
<listitem>
<para>Allow mgrcfg-client to upload files.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--enable-mtime-upload</term>
<listitem>
<para>Allow mgrcfg-client to upload mtime (file modification time).</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--enable-all</term>
<listitem>
<para>Allow mgrcfg-client to do everything.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--enable-run</term>
<listitem>
<para>Enable running scripts.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--disable-deploy</term>
<listitem>
<para>Disable deployment.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--disable-diff</term>
<listitem>
<para>Prohibit diff use.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--disable-upload</term>
<listitem>
<para>No file uploads allowed.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--disable-mtime-upload</term>
<listitem>
<para>Disable mtime upload.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--disable-all</term>
<listitem>
<para>Disable all options.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--disable-run</term>
<listitem>
<para>No scripts allowed to run.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--report</term>
<listitem>
<para>Report whether modes are enabled or disabled.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-f, --force</term>
<listitem>
<para>Force the operation without asking first.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-h, --help</term>
<listitem>
<para>Show help message and exit.</para>
</listitem>
</varlistentry>
</variablelist>
<para>Once a mode is set, your system is ready for configuration management through SUSE Manager.
A common option is <command>mgr-actions-control --enable-all</command>.</para>
</sect2>
</sect1>
<sect1 id="mgrcfg.client.tool"><title>Configuration Client  (mgrcfg-client)</title><para>The Configuration Client (mgrcfg-client) is installed on and run from an individual client system to gain knowledge about how SUSE Manager deploys configuration files to the client.</para>
<para>The Configuration Client offers these primary modes:</para>
<itemizedlist>
<listitem>
<para>list</para>
</listitem>
<listitem>
<para>get</para>
</listitem>
<listitem>
<para>channels</para>
</listitem>
<listitem>
<para>diff</para>
</listitem>
<listitem>
<para>verify</para>
</listitem>
</itemizedlist>
<sect2 id="_listing_configuration_files"><title>Listing Configuration Files</title><para>To list the configuration files for the machine and the labels of the config channels containing them, issue the command:</para>
<screen>mgrcfg-client list</screen>
<para>The output resembles the following list (“DoFoS” is a shortcut for “D or F or S”, which means “Directory”, “File”, or “Something else”(?)):</para>
<screen>DoFoS   Config Channel      File
F      config-channel-17   /etc/example-config.txt
F      config-channel-17   /var/spool/aalib.rpm
F      config-channel-14   /etc/rhn/rhn.conf</screen>
<para>These configuration files apply to your system.
However, there may be duplicate files present in other channels.
For example, issue the following command:</para>
<screen>mgrcfg-manager list config-channel-14</screen>
<para>and observe the following output:</para>
<screen>Files in config channel 'config-channel-14'
/etc/example-config.txt /etc/rhn/rhn.conf</screen>
<para>You may wonder why the second version of <filename>/etc/example-config.txt</filename> in <emphasis role="strong">config-channel-14</emphasis> does not apply to the client system.
The rank of the <filename>/etc/example-config.txt</filename> file in <emphasis role="strong">config-channel-17</emphasis> was higher than that of the same file in <emphasis role="strong">config-channel-14</emphasis>.
As a result, the version of the configuration file in config-channel-14 is not deployed for this system, therefore mgrcfg-client command does not list the file.</para>
</sect2>
<sect2 id="getting.a.config.file"><title>Downloading a Config File</title><para>To download the most relevant configuration file for the machine, issue the command:</para>
<screen>mgrcfg-client get /etc/example-config.txt</screen>
<para>You should see output resembling:</para>
<screen>Deploying /etc/example-config.txt</screen>
<para>View the contents of the file with less or another pager.
Note that the file is selected as the most relevant based on the rank of the config channel containing it.
This is accomplished within the Configuration tab of the System Details page.
Refer to Section “System Details” (Chapter 4, Systems, ↑User Guide) for instructions.</para>
</sect2>
<sect2 id="viewing.config.channels"><title>Viewing Config Channels</title><para>To view the labels and names of the config channels that apply to the system, issue the command:</para>
<screen>mgrcfg-client channels</screen>
<para>You should see output resembling:</para>
<screen>Config channels:
Label                   Name
-----                   ----
config-channel-17       config chan 2
config-channel-14       config chan 1</screen>
<para>The list of options available for <command>mgrcfg-client get</command>:</para>
<variablelist>
<varlistentry>
<term>--topdir=TOPDIR</term>
<listitem>
<para>Make all file operations relative to this string.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--exclude=EXCLUDE</term>
<listitem>
<para>Exclude a file from being deployed with get.
May be used multiple times.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-h, --help</term>
<listitem>
<para>Show help message and exit.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="diff.between.config.files"><title>Differentiating between Config Files</title><para>To view the differences between the config files deployed on the system and those stored by SUSE Manager, issue the command:</para>
<screen>mgrcfg-client diff</screen>
<para>The output resembles the following:</para>
<screen>rhncfg-client diff
--- /etc/test
+++ /etc/test 2013-08-28 00:14:49.405152824 +1000
@@ -1 +1,2 @@
This is the first line
+This is the second line added</screen>
<para>In addition, you can include the <option>--topdir</option> option to compare config files with those located in an arbitrary (and unused) location on the client system, like this:</para>
<screen># mgrcfg-client diff --topdir /home/test/blah/
/usr/bin/diff: /home/test/blah/etc/example-config.txt: No such file or directory
/usr/bin/diff: /home/test/blah/var/spool/aalib.rpm: No such file or directory</screen>
</sect2>
<sect2 id="verify.config.files"><title>Verifying Config Files</title><para>To quickly determine if client configuration files are different from those associated with it via SUSE Manager, issue the command:</para>
<screen>mgrcfg-client verify</screen>
<para>The output resembles the following:</para>
<screen>modified /etc/example-config.txt /var/spool/aalib.rpm</screen>
<para>The file <literal role="filename">example-config.txt</literal> is locally modified, while <literal role="package">aalib.rpm</literal> is not.</para>
<para>The list of the options available for mgrcfg-client verify:</para>
<variablelist>
<varlistentry>
<term>-v, --verbose</term>
<listitem>
<para>Increase the amount of output detail.
Display differences in the mode, owner, and group permissions for the specified config file.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-o, --only</term>
<listitem>
<para>Only show differing files.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-h, --help</term>
<listitem>
<para>Show help message and exit.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
</sect1>
<sect1 id="the.configuration.manager"><title>Configuration Manager (mgrcfg-manager)</title><para>The Configuration Manager (<emphasis role="strong">mgrcfg-manager</emphasis>) is designed to maintain SUSE Manager’s central repository of config files and channels, not those located on client systems.
This tool offers a command line alternative to the configuration management features in the SUSE Manager Web interface.
Additionally, some or all of the related maintenance tasks can be scripted.</para>
<para>To use the command line interface, configuration administrators require a SUSE Manager account (username and password) with the appropriate permission set.
The username may be specified in <filename>/etc/sysconfig/rhn/rhncfg-manager.conf</filename> or in the <option>[rhncfg-manager]</option> section of <filename>~/.rhncfgrc</filename>.</para>
<para>When the Configuration Manager is run as <emphasis role="strong">root</emphasis>, it attempts to pull in needed configuration values from the Red Hat Update Agent.
When run as a user other than root, you may have to change the <filename>~/.rhncfgrc</filename> configuration file.
The session file is cached in <filename>~/.rhncfg-manager-session</filename> to avoid having to log in for every command.</para>
<para>The default timeout for the Configuration Manager is 30 minutes.
To adjust this, add the <option>server.session_lifetime</option> option and a new value to the <filename>/etc/rhn/rhn.conf</filename> file on the server running the manager.
For example set the time out to <emphasis role="strong">120 minutes</emphasis>:</para>
<screen>server.session_lifetime = 120</screen>
<para>The Configuration Manager offers the following primary <emphasis role="strong">modes</emphasis>:</para>
<itemizedlist>
<listitem>
<para>add</para>
</listitem>
<listitem>
<para>create-channel</para>
</listitem>
<listitem>
<para>diff</para>
</listitem>
<listitem>
<para>diff-revisions</para>
</listitem>
<listitem>
<para>download-channel</para>
</listitem>
<listitem>
<para>get</para>
</listitem>
<listitem>
<para>list</para>
</listitem>
<listitem>
<para>list-channels</para>
</listitem>
<listitem>
<para>remove</para>
</listitem>
<listitem>
<para>remove-channel</para>
</listitem>
<listitem>
<para>revisions</para>
</listitem>
<listitem>
<para>update</para>
</listitem>
<listitem>
<para>upload-channel</para>
</listitem>
</itemizedlist>
<para>Each mode offers its own set of options, which can be displayed by issuing the following command:</para>
<screen>mgrcfg-manager mode --help</screen>
<para>Replace mode with the name of the mode whose options you want to see:</para>
<screen>mgrcfg-manager diff-revisions --help</screen>
<sect2 id="creating.a.config.channel"><title>Creating a Config Channel</title><para>To create a config channel for your organization, issue the command:</para>
<screen>mgrcfg-manager create-channel channel-label</screen>
<para>If prompted for your SUSE Manager username and password, provide them.
Once you have created a config channel, use the remaining modes listed above to populate and maintain that channel.</para>
</sect2>
<sect2 id="adding.files.to.a.config.channel"><title>Adding Files to a Config Channel</title><para>To add a file to a config channel, specify the channel label and the local file to be uploaded:</para>
<screen>mgrcfg-manager add --channel=channel-label /path/to/file</screen>
<para>In addition to the required channel label and the path to the file, you can use the available options for modifying the file during its addition.
For instance, you can alter the path and file name by including the <option>--dest-file</option> option in the command:</para>
<screen>mgrcfg-manager add --channel=channel-label \
  --dest-file=/new/path/to/file.txt/path/to/file</screen>
<para>The output resembles the following:</para>
<screen>Pushing to channel example-channel
Local file &gt;/path/to/file -&gt; remote file /new/path/to/file.txt</screen>
<para>The list of options available for mgrcfg-manager add:</para>
<variablelist>
<varlistentry>
<term>-c CHANNEL --channel=CHANNEL</term>
<listitem>
<para>Upload files in this config channel.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-d DEST_FILE --dest-file=DEST_FILE</term>
<listitem>
<para>Upload the file as this path.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--delim-start=DELIM_START</term>
<listitem>
<para>Start delimiter for variable interpolation.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--delim-end=DELIM_END</term>
<listitem>
<para>End delimiter for variable interpolation.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-i, --ignore-missing</term>
<listitem>
<para>Ignore missing local files.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-h, --help</term>
<listitem>
<para>Show help message and exit.</para>
</listitem>
</varlistentry>
</variablelist>
<tip>
<title>Max File size</title>
<para>By default, the maximum file size for configuration files is 128KB.
If you need to change that value, find or create the following line in the <filename>/etc/rhn/rhn.conf</filename> file:</para>
<screen>web.maximum_config_file_size=128</screen>
<para>Change the value from 128 to whatever limit you need in kilobytes.</para>
</tip>
</sect2>
<sect2 id="diff.between.latest.config.files"><title>Differentiating between Latest Config Files</title><para>To view the differences between the config files on disk and the latest revisions in a channel, issue the command:</para>
<screen>mgrcfg-manager diff --channel=channel-label --dest-file=/path/to/file.txt \
/local/path/to/file</screen>
<para>You should see output resembling:</para>
<screen>--- /tmp/dest_path/example-config.txt config_channel: example-channel revision: 1
+++ /home/test/blah/hello_world.txt 2003-12-14 19:08:59.000000000 -0500
@@ -1 +1 @@
-foo
+hello, world</screen>
<para>The list of options available for <command>mgrcfg-manager diff</command>:</para>
<variablelist>
<varlistentry>
<term>-c CHANNEL, --channel=CHANNEL</term>
<listitem>
<para>Get file(s) from this config channel.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-r REVISION, --revision=REVISION</term>
<listitem>
<para>Use this revision.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-d DEST_FILE, --dest-file=DEST_FILE</term>
<listitem>
<para>Upload the file at this path.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-t TOPDIR, --topdir=TOPDIR</term>
<listitem>
<para>Make all files relative to this string.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-h, --help</term>
<listitem>
<para>Show help message and exit.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="diff.between.various.versions"><title>Differentiating between Various Versions</title><para>To compare different versions of a file across channels and revisions, use the <emphasis role="strong">-r</emphasis> flag to indicate which revision of the file should be compared and the <emphasis role="strong">-n</emphasis> flag to identify the two channels to be checked.
Specify only one file name here since you are comparing the file against another version of itself.
For example:</para>
<screen>mgrcfg-manager diff-revisions -n=channel-label1 -r=1 \
  -n=channel-label2 -r=1 \
  /path/to/file.txt</screen>
<para>The output resembles the following:</para>
<screen>--- /tmp/dest_path/example-config.txt 2004-01-13 14:36:41 \
config channel: example-channel2 revision: 1
--- /tmp/dest_path/example-config.txt 2004-01-13 14:42:42 \
config channel: example-channel3 revision: 1
@@ -1 +1,20 @@
-foo
+blah
+-----BEGIN PGP SIGNATURE-----
+Version: GnuPG v1.0.6 (GNU/Linux)
+Comment: For info see http://www.gnupg.org
+
+iD8DBQA9ZY6vse4XmfJPGwgRAsHcAJ9ud9dabUcdscdcqB8AZP7e0Fua0NmKsdhQCeOWHX
+VsDTfen2NWdwwPaTM+S+Cow=
+=Ltp2
+-----END PGP SIGNATURE-----</screen>
<para>The list of options available for <command>mgrcfg-manager diff-revisions</command>:</para>
<variablelist>
<varlistentry>
<term>-c CHANNEL, --channel=CHANNEL</term>
<listitem>
<para>Use this config channel.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-r REVISION, --revision=REVISION</term>
<listitem>
<para>Use this revision.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-h, --help</term>
<listitem>
<para>Show help message and exit.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="downloading.all.files.in.a.channel"><title>Downloading All Files in a Channel</title><para>To download all the files in a channel to disk, create a directory and issue the following command:</para>
<screen>mgrcfg-manager download-channel channel-label --topdir .</screen>
<para>The output resembles the following:</para>
<screen>Copying /tmp/dest_path/example-config.txt -&gt; \
blah2/tmp/dest_path/example-config.txt</screen>
<para>The list of options available for mgrcfg-manager download-channel:</para>
<variablelist>
<varlistentry>
<term>-t TOPDIR, --topdir=TOPDIR</term>
<listitem>
<para>Directory to which all the file paths are relative. This option must be set.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-h, --help</term>
<listitem>
<para>Show help message and exit.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="getting.the.contents.of.a.file"><title>Getting the Contents of a File</title><para>To direct the contents of a particular file to stdout, issue the command:</para>
<screen>mgrcfg-manager get --channel=channel-label \
/tmp/dest_path/example-config.txt</screen>
<para>You should see the contents of the file as the output.</para>
</sect2>
<sect2 id="listing.all.files.in.a.channel"><title>Listing All Files in a Channel</title><para>To list all the files in a channel, issue the command:</para>
<screen>mgrcfg-manager list channel-label</screen>
<para>You should see output resembling:</para>
<screen>Files in config channel `example-channel3':
/tmp/dest_path/example-config.txt</screen>
<para>The list of the options available for mgrcfg-manager get:</para>
<variablelist>
<varlistentry>
<term>-c CHANNEL, --channel=CHANNEL</term>
<listitem>
<para>Get file(s) from this config channel.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-t TOPDIR, --topdir=TOPDIR</term>
<listitem>
<para>Directory to which all files are relative.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-r REVISION, --revision=REVISION</term>
<listitem>
<para>Get this file revision.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-h, --help</term>
<listitem>
<para>Show help message and exit.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="listing.all.config.channels"><title>Listing All Config Channels</title><para>To list all of your organization’s configuration channels, issue the command:</para>
<screen>mgrcfg-manager list-channels</screen>
<para>The output resembles the following:</para>
<screen>Available config channels:
example-channel example-channel2 example-channel3 config-channel-14 config-channel-17</screen>
<note>
<para>This does not list <emphasis role="strong">local_override</emphasis> or <emphasis role="strong">server_import</emphasis> channels.</para>
</note>
</sect2>
<sect2 id="removing.a.file.from.a.channel"><title>Removing a File from a Channel</title><para>To remove a file from a channel, issue the command:</para>
<screen>mgrcfg-manager remove --channel=channel-label /tmp/dest_path/example-config.txt</screen>
<para>If prompted for your SUSE Manager username and password, provide them.</para>
<para>The list of the options available for mgrcfg-manager remove:</para>
<variablelist>
<varlistentry>
<term>-c CHANNEL, --channel=CHANNEL</term>
<listitem>
<para>Remove files from this config channel.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-t TOPDIR, --topdir=TOPDIR</term>
<listitem>
<para>Directory to which all files are relative.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-h, --help</term>
<listitem>
<para>Show help message and exit.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="deleting.a.config.channel"><title>Deleting a Config Channel</title><para>To remove a config channel in your organization, issue the command:</para>
<screen>mgrcfg-manager remove-channel channel-label</screen>
<para>The output resembles the following:</para>
<screen>Removing config channel example-channel
Config channel example-channel removed</screen>
</sect2>
<sect2 id="determine.the.number.of.file.revisions"><title>Determining the Number of File Revisions</title><para>To find out how many revisions (from <emphasis role="strong">1 to N</emphasis> where N is an integer greater than 0) of a file/path are in a channel, issue the following command:</para>
<screen>mgrcfg-manager revisions channel-label /tmp/dest_path/example-config.txt</screen>
<para>The output resembles the following:</para>
<screen>Analyzing files in config channel example-channel \
/tmp/dest_path/example-config.txt: 1</screen>
</sect2>
<sect2 id="update.a.file.in.a.channel"><title>Updating a File in a Channel</title><para>To create a new revision of a file in a channel (or to add the first revision to that channel if none existed before for the given path), issue the following command:</para>
<screen>mgrcfg-manager update --channel=channel-label \
--dest-file=/path/to/file.txt /local/path/to/file</screen>
<para>The output resembles the following:</para>
<screen>Pushing to channel example-channel:
Local file example-channel /tmp/local/example-config.txt -&gt; \
remote file /tmp/dest_path/example-config.txt</screen>
<para>The list of the options available for mgrcfg-manager update:</para>
<variablelist>
<varlistentry>
<term>-c CHANNEL, --channel=CHANNEL</term>
<listitem>
<para>Upload files in this config channel.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-d DEST_FILE, --dest-file=DEST_FILE</term>
<listitem>
<para>Upload the file to this path.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-t TOPDIR, --topdir=TOPDIR</term>
<listitem>
<para>Directory to which all files are relative.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--delim-start=DELIM_START</term>
<listitem>
<para>Start delimiter for variable interpolation.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>--delim-end=DELIM_END</term>
<listitem>
<para>End delimiter for variable interpolation.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-h, --help</term>
<listitem>
<para>Show help message and exit.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="uploading.multiple.files.at.once"><title>Uploading Multiple Files at Once</title><para>To upload multiple files to a config channel from a local disk at once, issue the command:</para>
<screen>mgrcfg-manager upload-channel --topdir=topdir channel-label</screen>
<para>The output resembles the following:</para>
<screen>Using config channel example-channel4
Uploading /tmp/ola_world.txt from blah4/tmp/ola_world.txt</screen>
<para>The list of the options available for mgrcfg-manager upload-channel:</para>
<variablelist>
<varlistentry>
<term>-t TOPDIR, --topdir=TOPDIR</term>
<listitem>
<para>Directory all the file paths are relative to.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-c CHANNEL, --channel=CHANNEL</term>
<listitem>
<para>List of channels the config info will be uploaded into channels delimited by ','. Example: --channel=foo,bar,baz.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>-h, --help</term>
<listitem>
<para>Show help message and exit.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
</sect1>
<sect1 id="syncing.suse.mgr.repositories.scc"><title>Syncing SUSE Manager Repositories from SCC (mgr-sync)</title><para><command>mgr-sync</command> should be used if SUSE Manager is connected to SUSE Customer Center (SCC).
With <command>mgr-sync</command> you may add or synchronize products and channels.
The <command>mgr-sync</command> command also enables and refreshes SCC data.</para>
<para>This tool requires that SCC is enabled by running <command>mgr-sync enable-scc</command> first (Enabled by default in <phrase><phrase>SUSE</phrase> Manager</phrase> 2.1 and greater).</para>
<important>
<title>Admin credentials</title>
<para><command>mgr-sync</command> now requires the username/password of a <emphasis role="strong">SUSE Manager administrator</emphasis>.
Most functions are available as part of the public API.</para>
</important>
<para>mgr-sync provides a command structure with sub-commands similar to git or osc.
For a complete list of command line option, see the mgr-sync manpage (man mgr-sync).
Basic actions are:</para>
<screen>mgr-sync enable-scc

mgr-sync list channel(s)|product(s)|credentials
mgr-sync add  channel(s)|product(s)|credentials
mgr-sync delete  credentials

mgr-sync refresh [--refresh-channels] [--from-mirror MIRROR]</screen>
<para>See the following examples.</para>
<variablelist>
<varlistentry>
<term>List channels</term>
<listitem>
<screen>mgr-sync list channels</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Add a channel</term>
<listitem>
<screen>mgr-sync add channel LABEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>List products</term>
<listitem>
<screen>mgr-sync list products</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Add a product</term>
<listitem>
<screen>mgr-sync add product</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Refresh the data</term>
<listitem>
<screen>mgr-sync refresh</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Refresh data and schedule a reposync for all installed vendor channels</term>
<listitem>
<screen>mgr-sync refresh --refresh-channels</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>List SCC credentials</term>
<listitem>
<screen>mgr-sync list credentials</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Add new SCC credentials</term>
<listitem>
<screen>mgr-sync add credentials</screen>
</listitem>
</varlistentry>
</variablelist>
<tip>
<title>Credentials</title>
<para>There can be one primary credential only.
This is username/password used first when retrieving the list of available channels and packages.</para>
</tip>
<variablelist>
<varlistentry>
<term>Add SCC primary credentials</term>
<listitem>
<screen>mgr-sync add credentials --primary</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Delete SCC credentials</term>
<listitem>
<screen>mgr-sync delete credentials</screen>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="configure.suse.manager.database.smdba"><title>Configuring SUSE Manager’s Database (smdba)</title><para>SUSE Manager provides the smdba command for managing the installed database.
It is the successor of <literal role="package">db-control</literal>, which is now <emphasis role="strong">unsupported</emphasis>.</para>
<para>The smdba command works on local databases only, not remote.
This utility allows you to do several administrative tasks like backing up and restoring the database.
It also allows you to create, verify, restore backups, obtaining database status, and restart the database if necessary.
The smdba command supports <emphasis role="strong">PostgreSQL</emphasis>.</para>
<para>Find basic information about <emphasis role="strong">smdba</emphasis> in the <emphasis role="strong">smdba manpage</emphasis>.</para>
<note>
<title>Restart Spacewalk Services When Connection is Lost</title>
<para>If you have stopped or restarted the database, Spacewalk services can lose their connections. In such a case, run the following command:</para>
<screen>spacewalk-service restart</screen>
</note>
<sect2 id="smdba.control.options"><title>Control Options</title><para>Depending on the database installed, smdba provides several subcommands:</para>
<screen>backup-hot      Enable continuous archiving backup
backup-restore  Restore the SUSE Manager Database from backup.
backup-status   Show backup status.
db-start        Start the SUSE Manager Database.
db-status       Show database status.
db-stop         Stop the SUSE Manager Database.
space-overview  Show database space report.
space-reclaim   Free disk space from unused object in tables and indexes.
space-tables    Show space report for each table.
system-check    Common backend healthcheck.</screen>
<para>For a list of available commands on your particular appliance, call smdba help.
To display the help message for a specific subcommand, call <command>smdba COMMAND help</command>.</para>
</sect2>
<sect2 id="starting.and.stopping.the.database"><title>Starting and Stopping the Database</title><para>There are three commands to start, stop, or get the status of the database.
Use the following commands:</para>
<screen># smdba db-status
Checking database core...       online
# smdba db-stop
Stopping the SUSE Manager database...
Stopping listener:     done
Stopping core:         done
# smdba db-status
Checking database core...       offline
# smdba db-start
Starting listener:     done
Starting core...       done</screen>
</sect2>
</sect1>
</chapter>
<chapter id="at.mgr.spacecmd.command.guide"><title>spacecmd Reference</title><sect1 id="at.spacecmd.introduction"><title>Introduction</title><para>The following section will help you become more familiar with the <command>spacecmd</command> command-line interface.
This interface is available for SUSE Manager, Satellite and Spacewalk servers.
spacecmd is written in Python and uses the XML-RPC API provided by the server.</para>
<itemizedlist>
<title>What can spacecmd do for me?</title>
<listitem>
<para>Manage almost all aspects of SUSE Manager from the command line with spacecmd</para>
</listitem>
<listitem>
<para>Tab completion is available for all commands</para>
</listitem>
<listitem>
<para>Single commands can be passed to spacecmd without entering the interactive shell (excellent for shell scripts)</para>
</listitem>
<listitem>
<para>May also be accessed and used as an interactive shell</para>
</listitem>
<listitem>
<para>Advanced search methods are available for finding specific systems, thus removing the need to create system groups (nevertheless groups are still recommended)</para>
</listitem>
<listitem>
<para>Complete functionality through the Spacewalk API. Almost all commands that can be executed from the WebUI can be performed via the spacecmd command-line</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="at.spacecmd.configuration.overview"><title>Configuring spacecmd</title><para>The following section provides configuration tips for spacecmd.</para>
<sect2 id="_setup_spacecmd_credentials"><title>Setup Spacecmd Credentials</title><para>Normally spacecmd prompts you for a username and password each time you attempt to login to the interactive shell.
Alternatively you can configure spacecmd with a credentials file to avoid this requirement.</para>
<orderedlist numeration="arabic">
<title>Procedure: Creating a spacecmd Credentials File</title>
<listitem>
<para>Create a hidden spacecmd directory in your home directory and set permissions:</para>
<screen>mkdir ~/.spacecmd
chmod 700 ~/.spacecmd</screen>
</listitem>
<listitem>
<para>Create a <literal>config</literal> file in <filename>~/.spacecmd/</filename> and provide proper permissions:</para>
<screen>touch ~/.spacecmd/config
chmod 600 ~/.spacecmd/config</screen>
</listitem>
<listitem>
<para>Edit the <literal>config</literal> file and add the following configuration lines. (You can use either localhost or the FQDN of your SUSE Manager server):</para>
<screen>[spacecmd]

server=FQDN-here

username=username-here
password=password-here</screen>
</listitem>
<listitem>
<para>Check connectivity by entering <command>spacecmd</command> as root:</para>
<screen># spacecmd</screen>
</listitem>
</orderedlist>
</sect2>
<sect2 id="_spacecmd_quiet_mode"><title>spacecmd Quiet Mode</title><para>By default spacecmd prints server status messages during connection attempts.
These messages can cause a lot of clutter when parsing system lists.
The following alias will force spacecmd to use quiet mode thus preventing this behavior.
Add the following line to your <literal>~/.bashrc</literal> file:</para>
<screen>alias spacecmd='spacecmd -q'</screen>
</sect2>
<sect2 id="_spacecmd_help"><title>spacecmd Help</title><para>spacecmd help can be access by typing spacecmd <command>-h --help</command></para>
<screen>Usage: spacecmd [options] [command]

Options:
  -u USERNAME, --username=USERNAME
                        use this username to connect to the server
  -p PASSWORD, --password=PASSWORD
                        use this password to connect to the server
  -s SERVER, --server=SERVER
                        connect to this server [default: local hostname]
  --nossl               use HTTP instead of HTTPS
  --nohistory           do not store command history
  -y, --yes             answer yes for all questions
  -q, --quiet           print only error messages
  -d, --debug           print debug messages (can be passed multiple times)
  -h, --help            show this help message and exit</screen>
<para>As root you can access available functions without entering the spacecmd shell:</para>
<screen># spacecmd -- help

        Documented commands (type help &lt;topic&gt;):
========================================
activationkey_addchildchannels         org_trustdetails
activationkey_addconfigchannels        package_details
activationkey_addentitlements          package_listdependencies
activationkey_addgroups                package_listerrata
activationkey_addpackages              package_listinstalledsystems
activationkey_clone                    package_listorphans
activationkey_create                   package_remove
activationkey_delete                   package_removeorphans
activationkey_details                  package_search
activationkey_diff                     repo_addfilters
activationkey_disable                  repo_clearfilters
activationkey_disableconfigdeployment  repo_create

...</screen>
</sect2>
</sect1>
<sect1 id="_troubleshooting"><title>Troubleshooting</title><para>This section provides troubleshooting solutions when working with spacecmd</para>
<sect2 id="_creating_a_distribution_with_spacecmd_sets_localhost_instead_of_fqdn"><title>Creating a Distribution With spacecmd Sets Localhost Instead of FQDN</title><para>The support article associated with this issue may be located at:https://www.suse.com/support/kb/doc/?id=7018627</para>
<variablelist>
<varlistentry>
<term>Situation</term>
<listitem>
<para>When creating a distribution with spacecmd it will  automatically set localhost as the server name instead of the FQDN of SUSE Manager.
This will result in the following kernel option being written:</para>
<screen>install=http://localhost/ks/dist/&lt;distributionname&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Resolution</term>
<listitem>
<para>Set the FQDN in <filename>$HOME/.spacecmd/config</filename>
like the following:</para>
<screen>test:~/.spacecmd # cat config
[spacecmd]
server=test.mytest.env
username=admin
password=password
nossl=0</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Cause</term>
<listitem>
<para>This problem may be experienced if <filename>$HOME/.spacecmd/config</filename>
has been created and the server name option was set to localhost.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>
</sect1>
<sect1 id="at.spacecmd.command.reference"><title>spacecmd Functions</title><para>The following sections provide descriptions for all documented spacecmd commands.
Each command is grouped by the function prefix.
Keep in mind that all commands may also be called using scripts and passed to spacecmd as stand-alone commands.</para>
<sect2 id="at.spacecmd.activationkey"><title>activationkey_</title><para>The following spacecmd commands are available for use with activation keys.</para>
<variablelist>
<varlistentry>
<term>activationkey_addchildchannels</term>
<listitem>
<para>Add child channels to an activation key.</para>
<screen>usage: activationkey_addchildchannels KEY &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_addconfigchannels</term>
<listitem>
<para>Add configuration channels to an activation key.</para>
<screen>usage: activationkey_addconfigchannels KEY &lt;CHANNEL ...&gt; [options]

options:
  -t add channels to the top of the list
  -b add channels to the bottom of the list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_addentitlements</term>
<listitem>
<para>Add available entitlements to an activation key.</para>
<note>
<title>WebUI Name Change</title>
<para>In the WebUI entitlements are known as System Types.
Nevertheless the spacecmd backend still utilizes the entitlements term.
Therefore any scripts you may be using can remain unchanged.</para>
</note>
<screen>usage: activationkey_addentitlements KEY &lt;ENTITLEMENT ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_addgroups</term>
<listitem>
<para>Add existing groups to an activation key.</para>
<screen>usage: activationkey_addgroups KEY &lt;GROUP ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_addpackages</term>
<listitem>
<para>Add packages to an activation key.</para>
<screen>usage: activationkey_addpackages KEY &lt;PACKAGE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_clone</term>
<listitem>
<para>Clone an existing activation key.</para>
<screen>usage examples:
                 activationkey_clone foo_key -c bar_key
                 activationkey_clone foo_key1 foo_key2 -c prefix
                 activationkey_clone foo_key -x "s/foo/bar"
                 activationkey_clone foo_key1 foo_key2 -x "s/foo/bar"

options:
  -c CLONE_NAME  : Name of the resulting key, treated as a prefix for multiple
                   keys
  -x "s/foo/bar" : Optional regex replacement, replaces foo with bar in the
                   clone description, base-channel label, child-channel
                   labels, config-channel names</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_create</term>
<listitem>
<para>Create a new activation key.</para>
<screen>usage: activationkey_create [options]

options:
  -n NAME
  -d DESCRIPTION
  -b BASE_CHANNEL
  -u set key as universal default
  -e [enterprise_entitled,virtualization_host]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_delete</term>
<listitem>
<para>Delete an existing activation key.</para>
<screen>usage: activationkey_delete KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_details</term>
<listitem>
<para>Show details of an existing activation key.</para>
<screen>usage: activationkey_details KEY ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_diff</term>
<listitem>
<para>Check the difference between two activation keys.</para>
<screen>usage: activationkey_diff SOURCE_ACTIVATIONKEY TARGET_ACTIVATIONKEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_disable</term>
<listitem>
<para>Disable an existing activation key.</para>
<screen>usage: activationkey_disable KEY [KEY ...]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_disableconfigdeployment</term>
<listitem>
<para>Disable configuration channel deployment for an existing activation key.</para>
<screen>usage: activationkey_disableconfigdeployment KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_enable</term>
<listitem>
<para>Enable an existing activation key.</para>
<screen>usage: activationkey_enable KEY [KEY ...]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_enableconfigdeployment</term>
<listitem>
<para>Enable configuration channel deployment for an existing activation key.</para>
<screen>usage: activationkey_enableconfigdeployment KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_export</term>
<listitem>
<para>Export activation key(s) to a JSON formatted file.</para>
<screen>usage: activationkey_export [options] [&lt;KEY&gt; ...]

options:
    -f outfile.json : specify an output filename, defaults to &lt;KEY&gt;.json
                      if exporting a single key, akeys.json for multiple keys,
                      or akey_all.json if no KEY specified (export ALL)

Note : KEY list is optional, default is to export ALL keys</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_import</term>
<listitem>
<para>Import activation key(s) from JSON file(s)</para>
<screen>usage: activationkey_import &lt;JSONFILE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_list</term>
<listitem>
<para>List all existing activation keys.</para>
<screen>usage: activationkey_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listbasechannel</term>
<listitem>
<para>List the base channel associated with an activation key.</para>
<screen>usage: activationkey_listbasechannel KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listchildchannels</term>
<listitem>
<para>List child channels associated with an activation key.</para>
<screen>usage: activationkey_listchildchannels KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listconfigchannels</term>
<listitem>
<para>List configuration channels associated with an activation key.</para>
<screen>usage: activationkey_listconfigchannels KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listentitlements</term>
<listitem>
<para>List entitlements associated with an activation key.</para>
<screen>usage: activationkey_listentitlements KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listgroups</term>
<listitem>
<para>List groups associated with an activation key</para>
<screen>usage: activationkey_listgroups KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listpackages</term>
<listitem>
<para>List packages associated with an activation key.</para>
<screen>usage: activationkey_listpackages KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listsystems</term>
<listitem>
<para>List systems registered with an activation key.</para>
<screen>usage: activationkey_listsystems KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_removechildchannels</term>
<listitem>
<para>Remove child channels from an activation key.</para>
<screen>usage: activationkey_removechildchannels KEY &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_removeconfigchannels</term>
<listitem>
<para>Remove configuration channels from an activation key.</para>
<screen>usage: activationkey_removeconfigchannels KEY &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_removeentitlements</term>
<listitem>
<para>Remove entitlements from an activation key.</para>
<screen>usage: activationkey_removeentitlements KEY &lt;ENTITLEMENT ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_removegroups</term>
<listitem>
<para>Remove groups from an activation key.</para>
<screen>usage: activationkey_removegroups KEY &lt;GROUP ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_removepackages</term>
<listitem>
<para>Remove packages from an activation key.</para>
<screen>usage: activationkey_removepackages KEY &lt;PACKAGE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_setbasechannel</term>
<listitem>
<para>Set the base channel for an activation key.</para>
<screen>usage: activationkey_setbasechannel KEY CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_setconfigchannelorder</term>
<listitem>
<para>Set the ranked order of configuration channels.</para>
<screen>usage: activationkey_setconfigchannelorder KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_setcontactmethod</term>
<listitem>
<para>Set the contact method to use for systems registered with a specific key.
(Use the XML-RPC API to access the latest contact methods.) The following contact methods are available for use with traditional spacecmd: ['default', 'ssh-push', 'ssh-push-tunnel']</para>
<screen>usage: activationkey_setcontactmethod KEY CONTACT_METHOD</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_setdescription</term>
<listitem>
<para>Add a description for an activation key.</para>
<screen>usage: activationkey_setdescription KEY DESCRIPTION</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_setuniversaldefault</term>
<listitem>
<para>Set a specific key as the universal default.</para>
<screen>usage: activationkey_setuniversaldefault KEY</screen>
<warning>
<title>Universal Default Key</title>
<para>Using a universal default key is not a Best Practice recommendation.</para>
</warning>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_setusagelimit</term>
<listitem>
<para>Set the usage limit of an activation key, can be a number or "unlimited".</para>
<screen>usage: activationkey_setbasechannel KEY &lt;usage limit&gt;
usage: activationkey_setbasechannel KEY unlimited</screen>
</listitem>
</varlistentry>
</variablelist>
<tip>
<title>Usage Limits</title>
<para>Usage limits are only applicable to traditionally managed systems.
Currently usage limits do not apply to Salt or foreign managed systems.</para>
</tip>
</sect2>
<sect2 id="at.spacecmd.api"><title>api</title><para>The following API command and its options are available for calling the XML-RPC API directly.
Calling the API directly allows you to use the latest features in SUSE Manager from the command-line using spacecmd as a wrapper for stand-alone commands or used from within scripts.</para>
<note>
<title>Use the api Command for Access to Latest Features</title>
<para>spacecmd is the traditional tool for spacewalk.
It functions out of the box with SUSE Manager but you should know that latest features (for example, Salt) are often excluded from traditional spacecmd command-line tool.
To gain access to the latest feature additions call <command>api api.getApiCallList</command> from within spacecmd to list all currently available API commands formatted in json.
You can then call these commands directly.</para>
</note>
<variablelist>
<varlistentry>
<term>api</term>
<listitem>
<para>Call XML-RPC API with arguments directly.</para>
<screen>usage: api [options] API_STRING

options:
  -A, --args  Arguments for the API other than session id in comma separated
              strings or JSON expression
  -F, --format   Output format
  -o, --output   Output file

examples:
  api api.getApiCallList
  api --args "sysgroup_A" systemgroup.listSystems
  api -A "rhel-i386-server-5,2011-04-01,2011-05-01" -F "%(name)s" \
      channel.software.listAllPackages</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.clear"><title>clear</title><para>Clears the terminal screen</para>
</sect2>
<sect2 id="at.spacecmd.clearcaches"><title>clear_caches</title><para>Clear the internal caches kept for systems and packages</para>
<screen>usage: clear_caches</screen>
</sect2>
<sect2 id="at.spacecmd.configchannel"><title>configchannel_</title><para>The following spacecmd commands are available for use with configuration channels.</para>
<variablelist>
<varlistentry>
<term>configchannel_addfile</term>
<listitem>
<para>Creates a configuration file.</para>
<screen>usage: configchannel_addfile [CHANNEL] [options]

options:
  -c CHANNEL
  -p PATH
  -r REVISION
  -o OWNER [default: root]
  -g GROUP [default: root]
  -m MODE [defualt: 0644]
  -x SELINUX_CONTEXT
  -d path is a directory
  -s path is a symlink
  -b path is a binary (or other file which needs base64 encoding)
  -t SYMLINK_TARGET
  -f local path to file contents

  Note re binary/base64: Some text files, notably those containing trailing
  newlines, those containing ASCII escape characters (or other charaters not
  allowed in XML) need to be sent as binary (-b).  Some effort is made to auto-
  detect files which require this, but you may need to explicitly specify.</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_backup</term>
<listitem>
<para>Backup a configuration channel.</para>
<screen>usage: configchannel_backup CHANNEL [OUTDIR]

OUTDIR defaults to $HOME/spacecmd-backup/configchannel/YYYY-MM-DD/CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_clone</term>
<listitem>
<para>Clone configuration channel(s).</para>
<screen>usage examples:
                 configchannel_clone foo_label -c bar_label
                 configchannel_clone foo_label1 foo_label2 -c prefix
                 configchannel_clone foo_label -x "s/foo/bar"
                 configchannel_clone foo_label1 foo_label2 -x "s/foo/bar"

options:
  -c CLONE_LABEL : name/label of the resulting cc (note does not update
                   description, see -x option), treated as a prefix if
                   multiple keys are passed
  -x "s/foo/bar" : Optional regex replacement, replaces foo with bar in the
                   clone name, label and description
  Note : If no -c or -x option is specified, interactive is assumed</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_create</term>
<listitem>
<para>Create a configuration channel.</para>
<screen>usage: configchannel_create [options]

options:
  -n NAME
  -l LABEL
  -d DESCRIPTION</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_delete</term>
<listitem>
<para>Delete a configuration channel.</para>
<screen>usage: configchannel_delete CHANNEL ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_details</term>
<listitem>
<para>Show the details of a configuration channel.</para>
<screen>usage: configchannel_details CHANNEL ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_diff</term>
<listitem>
<para>Find differences between configuration channels.</para>
<screen>usage: configchannel_diff SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_export</term>
<listitem>
<para>Export configuration channel(s) to a json formatted file.</para>
<screen>usage: configchannel_export &lt;CHANNEL&gt;... [options]
options:
    -f outfile.json : specify an output filename, defaults to &lt;CHANNEL&gt;.json
                      if exporting a single channel, ccs.json for multiple
                      channels, or cc_all.json if no CHANNEL specified
                      e.g (export ALL)

Note : CHANNEL list is optional, default is to export ALL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_filedetails</term>
<listitem>
<para>Show the details of a file in a configuration channel.</para>
<screen>usage: configchannel_filedetails CHANNEL FILE [REVISION]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_forcedeploy</term>
<listitem>
<para>Forces a redeployment of files within a channel on all subscribed systems.</para>
<screen>usage: configchannel_forcedeploy CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_import</term>
<listitem>
<para>Import configuration channel(s) from a json file.</para>
<screen>usage: configchannel_import &lt;JSONFILES...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_list</term>
<listitem>
<para>List all configuration channels.</para>
<screen>usage: configchannel_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_listfiles</term>
<listitem>
<para>List all files in a configuration channel.</para>
<screen>usage: configchannel_listfiles CHANNEL ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_listsystems</term>
<listitem>
<para>List all systems subscribed to a configuration channel.</para>
<screen>usage: configchannel_listsystems CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_removefiles</term>
<listitem>
<para>Remove configuration files.</para>
<screen>usage: configchannel_removefile CHANNEL &lt;FILE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_sync</term>
<listitem>
<para>Sync configuration files between two configuration channels.</para>
<screen>usage: configchannel_sync SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_updatefile</term>
<listitem>
<para>Update a configuration file.</para>
<screen>usage: configchannel_updatefile CHANNEL FILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_verifyfile</term>
<listitem>
<para>Verify a configuration file.</para>
<screen>usage: configchannel_verifyfile CHANNEL FILE &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; may be substituted with any of the following targets:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.cryptokey"><title>cryptokey_</title><para>The following spacecmd commands are available for use with cryptographic keys.</para>
<variablelist>
<varlistentry>
<term>cryptokey_create</term>
<listitem>
<para>Create a cryptographic key.</para>
<screen>usage: cryptokey_create [options]

options:
  -t GPG or SSL
  -d DESCRIPTION
  -f KEY_FILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>cryptokey_delete</term>
<listitem>
<para>Delete a cryptographic key.</para>
<screen>usage: cryptokey_delete NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>cryptokey_details</term>
<listitem>
<para>Show the contents of a cryptographic key.</para>
<screen>usage: cryptokey_details KEY ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>cryptokey_list</term>
<listitem>
<para>List all cryptographic keys (SSL, GPG).</para>
<screen>usage: cryptokey_list</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.custominfo"><title>custominfo_</title><para>The following spacecmd commands are available for working with custom keys.</para>
<variablelist>
<varlistentry>
<term>custominfo_createkey</term>
<listitem>
<para>Create a custom key.</para>
<screen>usage: custominfo_createkey [NAME] [DESCRIPTION]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>custominfo_deletekey</term>
<listitem>
<para>Delete a custom key.</para>
<screen>usage: custominfo_deletekey KEY ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>custominfo_details</term>
<listitem>
<para>Show the details of a custom key.</para>
<screen>usage: custominfo_details KEY ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>custominfo_listkeys</term>
<listitem>
<para>List all custom keys.</para>
<screen>usage: custominfo_listkeys</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>custominfo_updatekey</term>
<listitem>
<para>Update a custom key.</para>
<screen>usage: custominfo_updatekey [NAME] [DESCRIPTION]</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.distribution"><title>distribution_</title><para>The following spacecmd commands are available for working with kickstart distributions.</para>
<variablelist>
<varlistentry>
<term>distribution_create</term>
<listitem>
<para>Create a Kickstart tree.</para>
<screen>usage: distribution_create [options]

options:
  -n NAME
  -p path to tree
  -b base channel to associate with
  -t install type [fedora|rhel_4/5/6|suse|generic_rpm]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>distribution_delete</term>
<listitem>
<para>Delete a Kickstart tree.</para>
<screen>usage: distribution_delete LABEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>distribution_details</term>
<listitem>
<para>Show the details of a Kickstart tree.</para>
<screen>usage: distribution_details LABEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>distribution_list</term>
<listitem>
<para>List the available autoinstall trees.</para>
<screen>usage: distribution_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>distribution_rename</term>
<listitem>
<para>Rename a Kickstart tree.</para>
<screen>usage: distribution_rename OLDNAME NEWNAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>distribution_update</term>
<listitem>
<para>Update the path of a Kickstart tree.</para>
<screen>usage: distribution_update NAME [options]

options:
  -p path to tree
  -b base channel to associate with
  -t install type [fedora|rhel_4/5/6|suse|generic_rpm]</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.errata"><title>errata_</title><para>The following spacecmd commands are available for use with errata data.</para>
<variablelist>
<varlistentry>
<term>errata_apply</term>
<listitem>
<para>Apply an patch to all affected systems.</para>
<screen>usage: errata_apply ERRATA|search:XXX ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_delete</term>
<listitem>
<para>Delete an patch.</para>
<screen>usage: errata_delete ERRATA|search:XXX ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_details</term>
<listitem>
<para>Show the details of an patch.</para>
<screen>usage: errata_details ERRATA|search:XXX ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_findbycve</term>
<listitem>
<para>List errata addressing a CVE.</para>
<screen>usage: errata_findbycve CVE-YYYY-NNNN ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_list</term>
<listitem>
<para>List all patches.</para>
<screen>usage: errata_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_listaffectedsystems</term>
<listitem>
<para>List of systems affected by an patch.</para>
<screen>usage: errata_listaffectedsystems ERRATA|search:XXX ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_listcves</term>
<listitem>
<para>List of CVEs addressed by an patch.</para>
<screen>usage: errata_listcves ERRATA|search:XXX ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_publish</term>
<listitem>
<para>Publish an patch to a channel.</para>
<screen>usage: errata_publish ERRATA|search:XXX &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_search</term>
<listitem>
<para>List patches that meet user provided criteria</para>
<screen>usage: errata_search CVE|RHSA|RHBA|RHEA|CLA ...

Example:
&gt; errata_search CVE-2009:1674
&gt; errata_search RHSA-2009:1674</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_summary</term>
<listitem>
<para>Print a summary of all errata.</para>
<screen>usage: errata_summary</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.kickstart.filepreservation"><title>filepreservation_</title><para>The following spacecmd commands are available for working with kickstart file preservation lists.</para>
<variablelist>
<varlistentry>
<term>filepreservation_create</term>
<listitem>
<para>Create a file preservation list.</para>
<screen>usage: filepreservation_create [NAME] [FILE ...]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>filepreservation_delete</term>
<listitem>
<para>Delete a file preservation list.</para>
<screen>filepreservation_delete NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>filepreservation_details</term>
<listitem>
<para>Show the details of a file preservation list.</para>
<screen>usage: filepreservation_details NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>filepreservation_list</term>
<listitem>
<para>List all file preservations.</para>
<screen>usage: filepreservation_list</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.get"><title>get_</title><variablelist>
<varlistentry>
<term>get_apiversion</term>
<listitem>
<para>Display the API version of the server.</para>
<screen>usage: get_apiversion</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>get_certificateexpiration</term>
<listitem>
<para>Print the expiration date of the server’s entitlement certificate.</para>
<screen>usage: get_certificateexpiration</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>get_serverversion</term>
<listitem>
<para>Display SUSE Manager server version.</para>
<screen>usage: get_serverversion</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>get_session</term>
<listitem>
<para>Show the current session string.</para>
<screen>usage: get_session</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.group"><title>group_</title><variablelist>
<varlistentry>
<term>group_addsystems</term>
<listitem>
<para>Add systems to a group.</para>
<screen>usage: group_addsystems GROUP &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_backup</term>
<listitem>
<para>Backup a system group.</para>
<screen>usage: group_backup NAME [OUTDIR]

OUTDIR defaults to $HOME/spacecmd-backup/group/YYYY-MM-DD/NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_create</term>
<listitem>
<para>Create a system group.</para>
<screen>usage: group_create [NAME] [DESCRIPTION]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_delete</term>
<listitem>
<para>Delete a system group.</para>
<screen>usage: group_delete NAME ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_details</term>
<listitem>
<para>Show the details of a system group.</para>
<screen>usage: group_details GROUP ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_list</term>
<listitem>
<para>List available system groups.</para>
<screen>usage: group_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_listsystems</term>
<listitem>
<para>List the members of a group.</para>
<screen>usage: group_listsystems GROUP</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_removesystems</term>
<listitem>
<para>Remove systems from a group.</para>
<screen>usage: group_removesystems GROUP &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_restore</term>
<listitem>
<para>Restore a system group.</para>
<screen>usage: group_backup INPUTDIR [NAME] ...</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.help"><title>help</title><para>List all available spacecmd commands with the help function.
Check for additional help on a specific function by calling for example:<command>user_create
                    --help</command>.</para>
<screen>Documented commands (type help &lt;topic&gt;):
========================================
activationkey_addchildchannels         org_trustdetails
activationkey_addconfigchannels        package_details
activationkey_addentitlements          package_listdependencies
activationkey_addgroups                package_listerrata
activationkey_addpackages              package_listinstalledsystems
activationkey_clone                    package_listorphans
activationkey_create                   package_remove
activationkey_delete                   package_removeorphans
activationkey_details                  package_search
activationkey_diff                     repo_addfilters
activationkey_disable                  repo_clearfilters
activationkey_disableconfigdeployment  repo_create
activationkey_enable                   repo_delete
activationkey_enableconfigdeployment   repo_details
activationkey_export                   repo_list
activationkey_import                   repo_listfilters
activationkey_list                     repo_removefilters
activationkey_listbasechannel          repo_rename
activationkey_listchildchannels        repo_setfilters
activationkey_listconfigchannels       repo_updatessl
activationkey_listentitlements         repo_updateurl
activationkey_listgroups               report_duplicates
activationkey_listpackages             report_errata
activationkey_listsystems              report_inactivesystems
activationkey_removechildchannels      report_ipaddresses
activationkey_removeconfigchannels     report_kernels
activationkey_removeentitlements       report_outofdatesystems
activationkey_removegroups             report_ungroupedsystems
activationkey_removepackages           scap_getxccdfscandetails
activationkey_setbasechannel           scap_getxccdfscanruleresults
activationkey_setconfigchannelorder    scap_listxccdfscans
activationkey_setcontactmethod         scap_schedulexccdfscan
activationkey_setdescription           schedule_cancel
activationkey_setuniversaldefault      schedule_details
activationkey_setusagelimit            schedule_getoutput
api                                    schedule_list
clear                                  schedule_listarchived
clear_caches                           schedule_listcompleted
configchannel_addfile                  schedule_listfailed
configchannel_backup                   schedule_listpending
configchannel_clone                    schedule_reschedule
configchannel_create                   snippet_create
configchannel_delete                   snippet_delete
configchannel_details                  snippet_details
configchannel_diff                     snippet_list
configchannel_export                   snippet_update
configchannel_filedetails              softwarechannel_adderrata
configchannel_forcedeploy              softwarechannel_adderratabydate
configchannel_import                   softwarechannel_addpackages
configchannel_list                     softwarechannel_addrepo
configchannel_listfiles                softwarechannel_clone
configchannel_listsystems              softwarechannel_clonetree
configchannel_removefiles              softwarechannel_create
configchannel_sync                     softwarechannel_delete
configchannel_updatefile               softwarechannel_details
configchannel_verifyfile               softwarechannel_diff
cryptokey_create                       softwarechannel_errata_diff
cryptokey_delete                       softwarechannel_errata_sync
cryptokey_details                      softwarechannel_getorgaccess
cryptokey_list                         softwarechannel_list
custominfo_createkey                   softwarechannel_listallpackages
custominfo_deletekey                   softwarechannel_listbasechannels
custominfo_details                     softwarechannel_listchildchannels
custominfo_listkeys                    softwarechannel_listerrata
custominfo_updatekey                   softwarechannel_listerratabydate
distribution_create                    softwarechannel_listlatestpackages
distribution_delete                    softwarechannel_listpackages
distribution_details                   softwarechannel_listrepos
distribution_list                      softwarechannel_listsyncschedule
distribution_rename                    softwarechannel_listsystems
distribution_update                    softwarechannel_mirrorpackages
errata_apply                           softwarechannel_regenerateneededcache
errata_delete                          softwarechannel_regenerateyumcache
errata_details                         softwarechannel_removeerrata
errata_findbycve                       softwarechannel_removepackages
errata_list                            softwarechannel_removerepo
errata_listaffectedsystems             softwarechannel_removesyncschedule
errata_listcves                        softwarechannel_setorgaccess
errata_publish                         softwarechannel_setsyncschedule
errata_search                          softwarechannel_sync
errata_summary                         softwarechannel_syncrepos
filepreservation_create                ssm_add
filepreservation_delete                ssm_clear
filepreservation_details               ssm_intersect
filepreservation_list                  ssm_list
get_apiversion                         ssm_remove
get_certificateexpiration              system_addchildchannels
get_serverversion                      system_addconfigchannels
get_session                            system_addconfigfile
group_addsystems                       system_addcustomvalue
group_backup                           system_addentitlements
group_create                           system_addnote
group_delete                           system_applyerrata
group_details                          system_comparepackageprofile
group_list                             system_comparepackages
group_listsystems                      system_comparewithchannel
group_removesystems                    system_createpackageprofile
group_restore                          system_delete
help                                   system_deletecrashes
history                                system_deletenotes
kickstart_addactivationkeys            system_deletepackageprofile
kickstart_addchildchannels             system_deployconfigfiles
kickstart_addcryptokeys                system_details
kickstart_addfilepreservations         system_getcrashfiles
kickstart_addoption                    system_installpackage
kickstart_addpackages                  system_list
kickstart_addscript                    system_listbasechannel
kickstart_addvariable                  system_listchildchannels
kickstart_clone                        system_listconfigchannels
kickstart_create                       system_listconfigfiles
kickstart_delete                       system_listcrashedsystems
kickstart_details                      system_listcrashesbysystem
kickstart_diff                         system_listcustomvalues
kickstart_disableconfigmanagement      system_listentitlements
kickstart_disableremotecommands        system_listerrata
kickstart_enableconfigmanagement       system_listevents
kickstart_enablelogging                system_listhardware
kickstart_enableremotecommands         system_listinstalledpackages
kickstart_export                       system_listnotes
kickstart_getcontents                  system_listpackageprofiles
kickstart_getsoftwaredetails           system_listupgrades
kickstart_getupdatetype                system_lock
kickstart_import                       system_reboot
kickstart_import_raw                   system_removechildchannels
kickstart_importjson                   system_removeconfigchannels
kickstart_list                         system_removecustomvalues
kickstart_listactivationkeys           system_removeentitlement
kickstart_listchildchannels            system_removepackage
kickstart_listcryptokeys               system_rename
kickstart_listcustomoptions            system_runscript
kickstart_listoptions                  system_schedulehardwarerefresh
kickstart_listpackages                 system_schedulepackagerefresh
kickstart_listscripts                  system_search
kickstart_listvariables                system_setbasechannel
kickstart_removeactivationkeys         system_setconfigchannelorder
kickstart_removechildchannels          system_setcontactmethod
kickstart_removecryptokeys             system_show_packageversion
kickstart_removefilepreservations      system_syncpackages
kickstart_removeoptions                system_unlock
kickstart_removepackages               system_updatecustomvalue
kickstart_removescript                 system_upgradepackage
kickstart_removevariables              toggle_confirmations
kickstart_rename                       user_adddefaultgroup
kickstart_setcustomoptions             user_addgroup
kickstart_setdistribution              user_addrole
kickstart_setlocale                    user_create
kickstart_setpartitions                user_delete
kickstart_setselinux                   user_details
kickstartsetupdatetype                user_disable
kickstart_updatevariable               user_enable
list_proxies                           user_list
login                                  user_listavailableroles
logout                                 user_removedefaultgroup
org_addtrust                           user_removegroup
org_create                             user_removerole
org_delete                             user_setemail
org_details                            user_setfirstname
org_list                               user_setlastname
org_listtrusts                         user_setpassword
org_listusers                          user_setprefix
org_removetrust                        whoami
org_rename                             whoamitalkingto


Miscellaneous help topics:
==========================
time  systems  ssm</screen>
</sect2>
<sect2 id="at.spacecmd.history"><title>history</title><para>List recent commands using the <command>history</command> command.</para>
<screen>spacecmd {SSM:0}&gt; history
   1  help
   2  api
   3  exit
   4  help
   5  time --help
   6  quit
   7  clear
spacecmd {SSM:0}&gt;</screen>
</sect2>
<sect2 id="at.spacecmd.kickstart"><title>kickstart_</title><para>The following spacecmd functions are available for use with kickstart.</para>
<variablelist>
<varlistentry>
<term>kickstart_addactivationkeys</term>
<listitem>
<para>Add activation keys to a Kickstart profile.</para>
<screen>usage: kickstart_addactivationkeys PROFILE &lt;KEY ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addchildchannels</term>
<listitem>
<para>Add a child channels to a Kickstart profile.</para>
<screen>usage: kickstart_addchildchannels PROFILE &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addcryptokeys</term>
<listitem>
<para>Add cryptography keys to a Kickstart profile.</para>
<screen>usage: kickstart_addcryptokeys PROFILE &lt;KEY ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addfilepreservations</term>
<listitem>
<para>Add file preservations to a Kickstart profile.</para>
<screen>usage: kickstart_addfilepreservations PROFILE &lt;FILELIST ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addoption</term>
<listitem>
<para>Set an option for a Kickstart profile.</para>
<screen>usage: kickstart_addoption PROFILE KEY [VALUE]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addpackages</term>
<listitem>
<para>Add packages to a Kickstart profile.</para>
<screen>usage: kickstart_addpackages PROFILE &lt;PACKAGE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addscript</term>
<listitem>
<para>Add a script to a Kickstart profile.</para>
<screen>usage: kickstart_addscript PROFILE [options]

options:
  -p PROFILE
  -e EXECUTION_TIME ['pre', 'post']
  -i INTERPRETER
  -f FILE
  -c execute in a chroot environment
  -t ENABLING_TEMPLATING</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addvariable</term>
<listitem>
<para>Add a variable to a Kickstart profile.</para>
<screen>usage: kickstart_addvariable PROFILE KEY VALUE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_clone</term>
<listitem>
<para>Clone a Kickstart profile.</para>
<screen>usage: kickstart_clone [options]

options:
  -n NAME
  -c CLONE_NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_create</term>
<listitem>
<para>Create a Kickstart profile.</para>
<screen>usage: kickstart_create [options]

options:
  -n NAME
  -d DISTRIBUTION
  -p ROOT_PASSWORD
  -v VIRT_TYPE ['none', 'para_host', 'qemu', 'xenfv', 'xenpv']</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_delete</term>
<listitem>
<para>Delete kickstart profile(s).</para>
<screen>usage: kickstart_delete PROFILE
usage: kickstart_delete PROFILE1 PROFILE2
usage: kickstart_delete "PROF*"</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_details</term>
<listitem>
<para>Show the details of a Kickstart profile.</para>
<screen>usage: kickstart_details PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_diff</term>
<listitem>
<para>List differences between two kickstart files.</para>
<screen>usage: kickstart_diff SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_disableconfigmanagement</term>
<listitem>
<para>Disable configuration management on a Kickstart profile.</para>
<screen>usage: kickstart_disableconfigmanagement PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_disableremotecommands</term>
<listitem>
<para>Disable remote commands on a Kickstart profile.</para>
<screen>usage: kickstart_disableremotecommands PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_enableconfigmanagement</term>
<listitem>
<para>Enable configuration management on a Kickstart profile.</para>
<screen>usage: kickstart_enableconfigmanagement PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_enablelogging</term>
<listitem>
<para>Enable logging for a Kickstart profile.</para>
<screen>usage: kickstart_enablelogging PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_enableremotecommands</term>
<listitem>
<para>Enable remote commands on a Kickstart profile.</para>
<screen>usage: kickstart_enableremotecommands PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_export</term>
<listitem>
<para>Export kickstart profile(s) to json formatted file.</para>
<screen>usage: kickstart_export &lt;KSPROFILE&gt;... [options]
options:
    -f outfile.json : specify an output filename, defaults to &lt;KSPROFILE&gt;.json
                      if exporting a single kickstart, profiles.json for multiple
                      kickstarts, or ks_all.json if no KSPROFILE specified
                      e.g (export ALL)

Note : KSPROFILE list is optional, default is to export ALL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_getcontents</term>
<listitem>
<para>Show the contents of a Kickstart profile as they would be presented to a client.</para>
<screen>usage: kickstart_getcontents LABEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_getsoftwaredetails</term>
<listitem>
<para>Gets kickstart profile software details.</para>
<screen>usage: kickstart_getsoftwaredetails KS_LABEL
usage: kickstart_getsoftwaredetails KS_LABEL KS_LABEL2 ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_getupdatetype</term>
<listitem>
<para>Get the update type for a kickstart profile(s).</para>
<screen>usage: kickstart_getupdatetype PROFILE
usage: kickstart_getupdatetype PROFILE1 PROFILE2
usage: kickstart_getupdatetype "PROF*"</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_import</term>
<listitem>
<para>Import a Kickstart profile from a file.</para>
<screen>usage: kickstart_import [options]

options:
  -f FILE
  -n NAME
  -d DISTRIBUTION
  -v VIRT_TYPE ['none', 'para_host', 'qemu', 'xenfv', 'xenpv']</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_import_raw</term>
<listitem>
<para>Import a raw Kickstart or autoyast profile from a file.</para>
<screen>usage: kickstart_import_raw [options]

options:
  -f FILE
  -n NAME
  -d DISTRIBUTION
  -v VIRT_TYPE ['none', 'para_host', 'qemu', 'xenfv', 'xenpv']</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_importjson</term>
<listitem>
<para>Import kickstart profile(s) from json file.</para>
<screen>usage: kickstart_import &lt;JSONFILES...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_list</term>
<listitem>
<para>List the available Kickstart profiles.</para>
<screen>usage: kickstart_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listactivationkeys</term>
<listitem>
<para>List the activation keys associated with a Kickstart profile.</para>
<screen>usage: kickstart_listactivationkeys PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listchildchannels</term>
<listitem>
<para>List the child channels of a Kickstart profile.</para>
<screen>usage: kickstart_listchildchannels PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listcryptokeys</term>
<listitem>
<para>List the crypto keys associated with a Kickstart profile.</para>
<screen>usage: kickstart_listcryptokeys PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listcustomoptions</term>
<listitem>
<para>List the custom options of a Kickstart profile.</para>
<screen>usage: kickstart_listcustomoptions PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listoptions</term>
<listitem>
<para>List the options of a Kickstart profile.</para>
<screen>usage: kickstart_listoptions PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listpackages</term>
<listitem>
<para>List the packages for a Kickstart profile.</para>
<screen>usage: kickstart_listpackages PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listscripts</term>
<listitem>
<para>List the scripts for a Kickstart profile.</para>
<screen>usage: kickstart_listscripts PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listvariables</term>
<listitem>
<para>List the variables of a Kickstart profile.</para>
<screen>usage: kickstart_listvariables PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removeactivationkeys</term>
<listitem>
<para>Remove activation keys from a Kickstart profile.</para>
<screen>usage: kickstart_removeactivationkeys PROFILE &lt;KEY ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removechildchannels</term>
<listitem>
<para>Remove child channels from a Kickstart profile.</para>
<screen>usage: kickstart_removechildchannels PROFILE &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removecryptokeys</term>
<listitem>
<para>Remove crypto keys from a Kickstart profile.</para>
<screen>usage: kickstart_removecryptokeys PROFILE &lt;KEY ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removefilepreservations</term>
<listitem>
<para>Remove file preservations from a Kickstart profile.</para>
<screen>usage: kickstart_removefilepreservations PROFILE &lt;FILE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removeoptions</term>
<listitem>
<para>Remove options from a Kickstart profile.</para>
<screen>usage: kickstart_removeoptions PROFILE &lt;OPTION ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removepackages</term>
<listitem>
<para>Remove packages from a Kickstart profile.</para>
<screen>usage: kickstart_removepackages PROFILE &lt;PACKAGE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removescript</term>
<listitem>
<para>Add a script to a Kickstart profile.</para>
<screen>usage: kickstart_removescript PROFILE [ID]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removevariables</term>
<listitem>
<para>Remove variables from a Kickstart profile.</para>
<screen>usage: kickstart_removevariables PROFILE &lt;KEY ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_rename</term>
<listitem>
<para>Rename a Kickstart profile</para>
<screen>usage: kickstart_rename OLDNAME NEWNAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_setcustomoptions</term>
<listitem>
<para>Set custom options for a Kickstart profile.</para>
<screen>usage: kickstart_setcustomoptions PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_setdistribution</term>
<listitem>
<para>Set the distribution for a Kickstart profile.</para>
<screen>usage: kickstart_setdistribution PROFILE DISTRIBUTION</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_setlocale</term>
<listitem>
<para>Set the locale for a Kickstart profile.</para>
<screen>usage: kickstart_setlocale PROFILE LOCALE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_setpartitions</term>
<listitem>
<para>Set the partitioning scheme for a Kickstart profile.</para>
<screen>usage: kickstart_setpartitions PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_setselinux</term>
<listitem>
<para>Set the SELinux mode for a Kickstart profile.</para>
<screen>usage: kickstart_setselinux PROFILE MODE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstartsetupdatetype</term>
<listitem>
<para>Set the update type for a kickstart profile(s).</para>
<screen>usage: kickstartsetupdatetype [options] KS_LABEL

options:
    -u UPDATE_TYPE ['red_hat', 'all', 'none']</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_updatevariable</term>
<listitem>
<para>Update a variable in a Kickstart profile.</para>
<screen>usage: kickstart_updatevariable PROFILE KEY VALUE</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.list.proxies"><title>list_proxies</title><para>The following spacecmd function is available for listing proxies.</para>
<variablelist>
<varlistentry>
<term>list_proxies</term>
<listitem>
<para>List the proxies within the user’s organization.</para>
<screen>usage: list_proxies</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.login"><title>login</title><para>Connect as a specific user to the SUSE manager server.</para>
<screen># spacecmd -- login &lt;USERNAME&gt;</screen>
</sect2>
<sect2 id="at.spacecmd.logout"><title>logout</title><para>Logout from server as the current user.</para>
<screen># spacecmd -- logout</screen>
</sect2>
<sect2 id="at.spacecmd.org"><title>org_</title><para>The following spacecmd functions are available for use with organizations.</para>
<variablelist>
<varlistentry>
<term>org_addtrust</term>
<listitem>
<para>Add a trust between two organizations</para>
<screen>usage: org_addtrust YOUR_ORG ORG_TO_TRUST</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_create</term>
<listitem>
<para>Create an organization.</para>
<screen>usage: org_create [options]

options:
  -n ORG_NAME
  -u USERNAME
  -P PREFIX (Dr., Mr., Miss, Mrs., Ms.)
  -f FIRST_NAME
  -l LAST_NAME
  -e EMAIL
  -p PASSWORD
  --pam enable PAM authentication</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_delete</term>
<listitem>
<para>Delete an organization.</para>
<screen>usage: org_delete NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_details</term>
<listitem>
<para>Show the details of an organization.</para>
<screen>usage: org_details NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_list</term>
<listitem>
<para>List all organizations.</para>
<screen>usage: org_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_listtrusts</term>
<listitem>
<para>List an organization’s trusts.</para>
<screen>org_listtrusts NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_listusers</term>
<listitem>
<para>List an organization’s users.</para>
<screen>org_listusers NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_removetrust</term>
<listitem>
<para>Remove a trust between two organizations.</para>
<screen>usage: org_removetrust YOUR_ORG TRUSTED_ORG</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_rename</term>
<listitem>
<para>Rename an organization.</para>
<screen>usage: org_rename OLDNAME NEWNAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_trustdetails</term>
<listitem>
<para>Show the details of an organizational trust.</para>
<screen>usage: org_trustdetails TRUSTED_ORG</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.package"><title>package_</title><para>The following spacecmd functions are available for working with packages.</para>
<variablelist>
<varlistentry>
<term>package_details</term>
<listitem>
<para>Show the details of a software package.</para>
<screen>usage: package_details PACKAGE ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_listdependencies</term>
<listitem>
<para>List the dependencies for a package.</para>
<screen>usage: package_listdependencies PACKAGE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_listerrata</term>
<listitem>
<para>List the errata that provide this package.</para>
<screen>usage: package_listerrata PACKAGE ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_listinstalledsystems</term>
<listitem>
<para>List the systems with a package installed.</para>
<screen>usage: package_listinstalledsystems PACKAGE ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_listorphans</term>
<listitem>
<para>List packages that are not in a channel.</para>
<screen>usage: package_listorphans</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_remove</term>
<listitem>
<para>Remove a package from SUSE Manager/Satellite</para>
<screen>usage: package_remove PACKAGE ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_removeorphans</term>
<listitem>
<para>Remove packages that are not in a channel.</para>
<screen>usage: package_removeorphans</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_search</term>
<listitem>
<para>Find packages that meet the given criteria.</para>
<screen>usage: package_search NAME|QUERY

Example: package_search kernel

Advanced Search:
Available Fields: name, epoch, version, release, arch, description, summary
Example: name:kernel AND version:2.6.18 AND -description:devel</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.repo"><title>repo_</title><para>The following spacecmd functions are available for working with repositories.</para>
<variablelist>
<varlistentry>
<term>repo_addfilters</term>
<listitem>
<para>Add filters for a user repository.</para>
<screen>usage: repo_addfilters repo &lt;filter ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_clearfilters</term>
<listitem>
<para>Clears the filters for a user repository.</para>
<screen>usage: repo_clearfilters repo</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_create</term>
<listitem>
<para>Create a user repository.</para>
<screen>usage: repo_create &lt;options&gt;

options:
  -n, --name   name of repository
  -u, --url    url of repository

  --ca         SSL CA certificate (not required)
  --cert       SSL Client certificate (not required)
  --key        SSL Client key (not required)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_delete</term>
<listitem>
<para>Delete a user repository.</para>
<screen>usage: repo_delete &lt;repo ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_details</term>
<listitem>
<para>Show the details of a user repository.</para>
<screen>usage: repo_details &lt;repo ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_list</term>
<listitem>
<para>List all available user repository.</para>
<screen>usage: repo_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_listfilters</term>
<listitem>
<para>Show the filters for a user repository.</para>
<screen>usage: repo_listfilters repo</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_removefilters</term>
<listitem>
<para>Remove filters from a user repository.</para>
<screen>usage: repo_removefilters repo &lt;filter ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_rename</term>
<listitem>
<para>Rename a user repository.</para>
<screen>usage: repo_rename OLDNAME NEWNAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_setfilters</term>
<listitem>
<para>Set the filters for a user repo.</para>
<screen>usage: repo_setfilters repo &lt;filter ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_updatessl</term>
<listitem>
<para>Change the SSL certificates of a user repository.</para>
<screen>usage: repo_updatessl &lt;options&gt;
options:
  --ca         SSL CA certificate (not required)
  --cert       SSL Client certificate (not required)
  --key        SSL Client key (not required)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_updateurl</term>
<listitem>
<para>Change the URL of a user repository.</para>
<screen>usage: repo_updateurl &lt;repo&gt; &lt;url&gt;</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.report"><title>report_</title><para>The following spacecmd functions are available for working with reports.</para>
<variablelist>
<varlistentry>
<term>report_duplicates</term>
<listitem>
<para>List duplicate system profiles.</para>
<screen>usage: report_duplicates</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>report_errata</term>
<listitem>
<para>List all errata and how many systems they affect.</para>
<screen>usage: report_errata [ERRATA|search:XXX ...]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>report_inactivesystems</term>
<listitem>
<para>List all inactive systems.</para>
<screen>usage: report_inactivesystems [DAYS]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>report_ipaddresses</term>
<listitem>
<para>List the hostname and IP of each system.</para>
<screen>usage: report_network [&lt;SYSTEMS&gt;]

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>report_kernels</term>
<listitem>
<para>List the running kernel of each system.</para>
<screen>usage: report_kernels [&lt;SYSTEMS&gt;]

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>report_outofdatesystems</term>
<listitem>
<para>List all out-of-date systems.</para>
<screen>usage: report_outofdatesystems</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>report_ungroupedsystems</term>
<listitem>
<para>List all ungrouped systems.</para>
<screen>usage: report_ungroupedsystems</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.scap"><title>scap_</title><para>The following spacecmd functions are available for working with OpenSCAP.</para>
<variablelist>
<varlistentry>
<term>scap_getxccdfscandetails</term>
<listitem>
<para>Get details of given OpenSCAP XCCDF scan.</para>
<screen>usage: scap_getxccdfscandetails &lt;XID&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>scap_getxccdfscanruleresults</term>
<listitem>
<para>Return a full list of RuleResults for given OpenSCAP XCCDF scan.</para>
<screen>usage: scap_getxccdfscanruleresults &lt;XID&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>scap_listxccdfscans</term>
<listitem>
<para>Return a list of finished OpenSCAP scans for given systems.</para>
<screen>usage: scap_listxccdfscans &lt;SYSTEMS&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>scap_schedulexccdfscan</term>
<listitem>
<para>Schedule Scap XCCDF scan.</para>
<screen>usage: scap_schedulexccdfscan PATH_TO_XCCDF_FILE XCCDF_OPTIONS SYSTEMS

Example:
&gt; scap_schedulexccdfscan '/usr/share/openscap/scap-security-xccdf.xml' 'profile Web-Default' \
system-scap.example.com</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.schedule"><title>schedule_</title><para>The following spacecmd functions are available for working with scheduling.</para>
<variablelist>
<varlistentry>
<term>schedule_cancel</term>
<listitem>
<para>Cancel a scheduled action.</para>
<screen>usage: schedule_cancel ID|* ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_details</term>
<listitem>
<para>Show the details of a scheduled action.</para>
<screen>usage: schedule_details ID</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_getoutput</term>
<listitem>
<para>Show the output from an action.</para>
<screen>usage: schedule_getoutput ID</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_list</term>
<listitem>
<para>List all actions.</para>
<screen>usage: schedule_list [BEGINDATE] [ENDDATE]

Dates can be any of the following:
Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_listarchived</term>
<listitem>
<para>List archived actions.</para>
<screen>usage: schedule_listarchived [BEGINDATE] [ENDDATE]

Dates can be any of the following:
Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_listcompleted</term>
<listitem>
<para>List completed actions.</para>
<screen>Dates can be any of the following:
Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_listfailed</term>
<listitem>
<para>List failed actions.</para>
<screen>usage: schedule_listfailed [BEGINDATE] [ENDDATE]

Dates can be any of the following:
Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_listpending</term>
<listitem>
<para>List pending actions.</para>
<screen>usage: schedule_listpending [BEGINDATE] [ENDDATE]

Dates can be any of the following:
Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_reschedule</term>
<listitem>
<para>Reschedule failed actions.</para>
<screen>usage: schedule_reschedule ID|* ...</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.snippet"><title>snippet_</title><para>The following spacecmd functions are available for working with Kickstart snippets.</para>
<variablelist>
<varlistentry>
<term>snippet_create</term>
<listitem>
<para>Create a Kickstart snippet</para>
<screen>usage: snippet_create [options]

options:
  -n NAME
  -f FILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>snippet_delete</term>
<listitem>
<para>Delete a Kickstart snippet.</para>
<screen>usage: snippet_removefile NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>snippet_details</term>
<listitem>
<para>Show the contents of a snippet.</para>
<screen>usage: snippet_details SNIPPET ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>snippet_list</term>
<listitem>
<para>List the available Kickstart snippets.</para>
<screen>usage: snippet_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>snippet_update</term>
<listitem>
<para>Update a Kickstart snippet.</para>
<screen>usage: snippet_update NAME</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.softwarechannel"><title>softwarechannel_</title><para>The following spacecmd functions are available for working with software channels.</para>
<variablelist>
<varlistentry>
<term>softwarechannel_adderrata</term>
<listitem>
<para>Add patches from one channel into another channel.</para>
<screen>usage: softwarechannel_adderrata SOURCE DEST &lt;ERRATA|search:XXX ...&gt;
Options:
    -q/--quick : Don't display list of packages (slightly faster)
    -s/--skip :  Skip errata which appear to exist already in DEST</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_adderratabydate</term>
<listitem>
<para>Add errata from one channel into another channel based on a date range.</para>
<screen>usage: softwarechannel_adderratabydate [options] SOURCE DEST BEGINDATE ENDDATE
Date format : YYYYMMDD
Options:
        -p/--publish : Publish errata to the channel (don't clone)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_addpackages</term>
<listitem>
<para>Add packages to a software channel.</para>
<screen>usage: softwarechannel_addpackages CHANNEL &lt;PACKAGE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_addrepo</term>
<listitem>
<para>Add a repo to a software channel.</para>
<screen>usage: softwarechannel_addrepo CHANNEL REPO</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_clone</term>
<listitem>
<para>Clone a software channel.</para>
<screen>usage: softwarechannel_clone [options]

options:
  -s SOURCE_CHANNEL
  -n NAME
  -l LABEL
  -p PARENT_CHANNEL
  --gpg-copy/-g (copy SOURCE_CHANNEL GPG details)
  --gpg-url GPG_URL
  --gpg-id GPG_ID
  --gpg-fingerprint GPG_FINGERPRINT
  -o do not clone any patches
  --regex/-x "s/foo/bar" : Optional regex replacement,
        replaces foo with bar in the clone name and label</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_clonetree</term>
<listitem>
<para>Clone a software channel and its child channels.</para>
<screen>usage: softwarechannel_clonetree [options]A
             e.g    softwarechannel_clonetree foobasechannel -p "my_"
                    softwarechannel_clonetree foobasechannel -x "s/foo/bar"
                    softwarechannel_clonetree foobasechannel -x "s/^/my_"

options:
  -s/--source-channel SOURCE_CHANNEL
  -p/--prefix PREFIX (is prepended to the label and name of all channels)
  --gpg-copy/-g (copy GPG details for correspondoing source channel))
  --gpg-url GPG_URL (applied to all channels)
  --gpg-id GPG_ID (applied to all channels)
  --gpg-fingerprint GPG_FINGERPRINT (applied to all channels)
  -o do not clone any errata
  --regex/-x "s/foo/bar" : Optional regex replacement,
        replaces foo with bar in the clone name, label and description</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_create</term>
<listitem>
<para>Create a software channel.</para>
<screen>usage: softwarechannel_create [options]

options:
  -n NAME
  -l LABEL
  -p PARENT_CHANNEL
  -a ARCHITECTURE ['ia32', 'ia64', 'x86_64', 'ppc',
                  'i386-sun-solaris', 'sparc-sun-solaris']
  -c CHECKSUM ['sha1', 'sha256', 'sha384', 'sha512']
  -u GPG_URL
  -i GPG_ID
  -f GPG_FINGERPRINT</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_delete</term>
<listitem>
<para>Delete a software channel.</para>
<screen>usage: softwarechannel_delete &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_details</term>
<listitem>
<para>Show the details of a software channel.</para>
<screen>usage: softwarechannel_details &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_diff</term>
<listitem>
<para>Check the difference between software channels.</para>
<screen>usage: softwarechannel_diff SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_errata_diff</term>
<listitem>
<para>Check the difference between software channel files.</para>
<screen>usage: softwarechannel_errata_diff SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_errata_sync</term>
<listitem>
<para>Sync errata of two software channels.</para>
<screen>usage: softwarechannel_errata_sync SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_getorgaccess</term>
<listitem>
<para>Get the org-access for the software channel.</para>
<screen>usage : softwarechannel_getorgaccess : get org access for all channels
usage : softwarechannel_getorgaccess &lt;channel_label(s)&gt; : get org access for specific channel(s)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_list</term>
<listitem>
<para>List all available software channels.</para>
<screen>usage: softwarechannel_list [options]'
options:
  -v verbose (display label and summary)
  -t tree view (pretty-print child-channels)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listallpackages</term>
<listitem>
<para>List all packages in a channel.</para>
<screen>usage: softwarechannel_listallpackages CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listbasechannels</term>
<listitem>
<para>List all base software channels.</para>
<screen>usage: softwarechannel_listbasechannels [options]
options:
  -v verbose (display label and summary)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listchildchannels</term>
<listitem>
<para>List child software channels.</para>
<screen>usage:
softwarechannel_listchildchannels [options]
softwarechannel_listchildchannels : List all child channels
softwarechannel_listchildchannels CHANNEL : List children for a specific base channel
options:
 -v verbose (display label and summary)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listerrata</term>
<listitem>
<para>List the errata associated with a software channel.</para>
<screen>usage: softwarechannel_listerrata &lt;CHANNEL ...&gt; [from=yyyymmdd [to=yyyymmdd]]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listerratabydate</term>
<listitem>
<para>List errata from channelbased on a date range.</para>
<screen>usage: softwarechannel_listerratabydate CHANNEL BEGINDATE ENDDATE
Date format : YYYYMMDD</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listlatestpackages</term>
<listitem>
<para>List the newest version of all packages in a channel.</para>
<screen>usage: softwarechannel_listlatestpackages CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listpackages</term>
<listitem>
<para>List the most recent packages available from a software channel.</para>
<screen>usage: softwarechannel_listpackages CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listrepos</term>
<listitem>
<para>List the repos for a software channel.</para>
<screen>usage: softwarechannel_listrepos CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listsyncschedule</term>
<listitem>
<para>List sync schedules for all software channels.</para>
<screen>usage: softwarechannel_listsyncschedule : List all channels</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listsystems</term>
<listitem>
<para>List all systems subscribed to a software channel.</para>
<screen>usage: softwarechannel_listsystems CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_mirrorpackages</term>
<listitem>
<para>Download packages of a given channel.</para>
<screen>usage: softwarechannel_mirrorpackages CHANNEL
Options:
    -l/--latest : Only mirror latest package version</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_regenerateneededcache</term>
<listitem>
<para>Regenerate the needed errata and package cache for all systems.</para>
<screen>usage: softwarechannel_regenerateneededcache</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_regenerateyumcache</term>
<listitem>
<para>Regenerate the YUM cache for a software channel.</para>
<screen>usage: softwarechannel_regenerateyumcache &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_removeerrata</term>
<listitem>
<para>Remove patches from a software channel.</para>
<screen>usage: softwarechannel_removeerrata CHANNEL &lt;ERRATA:search:XXX ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_removepackages</term>
<listitem>
<para>Remove packages from a software channel.</para>
<screen>usage: softwarechannel_removepackages CHANNEL &lt;PACKAGE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_removerepo</term>
<listitem>
<para>Remove a repo from a software channel.</para>
<screen>usage: softwarechannel_removerepo CHANNEL REPO</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_removesyncschedule</term>
<listitem>
<para>Removes the repo sync schedule for a software channel.</para>
<screen>usage: softwarechannel_setsyncschedule &lt;CHANNEL&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_setorgaccess</term>
<listitem>
<para>Set the org-access for the software channel.</para>
<screen>usage : softwarechannel_setorgaccess &lt;channel_label&gt; [options]
-d,--disable : disable org access (private, no org sharing)
-e,--enable : enable org access (public access to all trusted orgs)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_setsyncschedule</term>
<listitem>
<para>Sets the repo sync schedule for a software channel.</para>
<screen>usage: softwarechannel_setsyncschedule &lt;CHANNEL&gt; &lt;SCHEDULE&gt;

The schedule is specified in Quartz CronTrigger format without enclosing quotes.
For example, to set a schedule of every day at 1am, &lt;SCHEDULE&gt; would be 0 0 1 * * ?</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_sync</term>
<listitem>
<para>Sync the packages of two software channels.</para>
<screen>usage: softwarechannel_sync SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_syncrepos</term>
<listitem>
<para>Sync users repos for a software channel.</para>
<screen>usage: softwarechannel_syncrepos &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.ssm"><title>ssm_</title><para>The following spacecmd functions are available for use with System Set Manager.</para>
<variablelist>
<varlistentry>
<term>ssm_add</term>
<listitem>
<para>Add systems to the SSM.</para>
<screen>usage: ssm_add &lt;SYSTEMS&gt;

see 'help ssm' for more details

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>ssm_clear</term>
<listitem>
<para>Remove all systems from the SSM.</para>
<screen>usage: ssm_clear</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>ssm_intersect</term>
<listitem>
<para>Replace the current SSM with the intersection of the current list of systems and the list of systems passed as arguments.</para>
<screen>usage: ssm_intersect &lt;SYSTEMS&gt;

see 'help ssm' for more details

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>ssm_list</term>
<listitem>
<para>List the systems currently in the SSM.</para>
<screen>usage: ssm_list

see 'help ssm' for more details</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>ssm_remove</term>
<listitem>
<para>Remove systems from the SSM.</para>
<screen>usage: ssm_remove &lt;SYSTEMS&gt;

see 'help ssm' for more details

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.system"><title>system_</title><para>The following spacecmd functions are available for use with systems.</para>
<variablelist>
<varlistentry>
<term>system_addchildchannels</term>
<listitem>
<para>Add child channels to a system.</para>
<screen>usage: system_addchildchannels &lt;SYSTEMS&gt; &lt;CHANNEL ...&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_addconfigchannels</term>
<listitem>
<para>Add config channels to a system.</para>
<screen>usage: system_addconfigchannels &lt;SYSTEMS&gt; &lt;CHANNEL ...&gt; [options]

options:
  -t add channels to the top of the list
  -b add channels to the bottom of the list

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_addconfigfile</term>
<listitem>
<para>Create a configuration file.</para>
<screen>Note this is only for system sandbox or locally-managed files
Centrally managed files should be created via configchannel_addfile
usage: system_addconfigfile [SYSTEM] [options]

options:
  -S/--sandbox : list only system-sandbox files
  -L/--local   : list only locally managed files
  -p PATH
  -r REVISION
  -o OWNER [default: root]
  -g GROUP [default: root]
  -m MODE [defualt: 0644]
  -x SELINUX_CONTEXT
  -d path is a directory
  -s path is a symlink
  -b path is a binary (or other file which needs base64 encoding)
  -t SYMLINK_TARGET
  -f local path to file contents

  Note re binary/base64: Some text files, notably those containing trailing
  newlines, those containing ASCII escape characters (or other charaters not
  allowed in XML) need to be sent as binary (-b).  Some effort is made to auto-
  detect files which require this, but you may need to explicitly specify.</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_addcustomvalue</term>
<listitem>
<para>Set a custom value for a system.</para>
<screen>usage: system_addcustomvalue KEY VALUE &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_addentitlements</term>
<listitem>
<para>Add entitlements to a system.</para>
<screen>usage: system_addentitlements &lt;SYSTEMS&gt; ENTITLEMENT

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_addnote</term>
<listitem>
<para>Set a note for a system.</para>
<screen>usage: system_addnote &lt;SYSTEM&gt; [options]

options:
  -s SUBJECT
  -b BODY

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_applyerrata</term>
<listitem>
<para>Apply errata to a system.</para>
<screen>usage: system_applyerrata &lt;SYSTEMS&gt; [ERRATA|search:XXX ...]

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_comparepackageprofile</term>
<listitem>
<para>Compare a system against a package profile.</para>
<screen>usage: system_comparepackageprofile &lt;SYSTEMS&gt; PROFILE

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_comparepackages</term>
<listitem>
<para>Compare the packages between two systems.</para>
<screen>usage: system_comparepackages SOME_SYSTEM ANOTHER_SYSTEM</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_comparewithchannel</term>
<listitem>
<para>Compare the installed packages on a system with those in the channels it is registered to, or optionally some other channel.</para>
<screen>usage: system_comparewithchannel &lt;SYSTEMS&gt; [options]
options:
         -c/--channel : Specific channel to compare against,
                        default is those subscribed to, including
                        child channels

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_createpackageprofile</term>
<listitem>
<para>Create a package profile.</para>
<screen>usage: system_createpackageprofile SYSTEM [options]

options:
  -n NAME
  -d DESCRIPTION</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_delete</term>
<listitem>
<para>Delete a system profile.</para>
<screen>usage: system_delete &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_deletecrashes</term>
<listitem>
<para>Delete crashes reported by spacewalk-abrt.</para>
<screen>usage: Delete all crashes for all systems    : system_deletecrashes [--verbose]
usage: Delete all crashes for a single system: system_deletecrashes -i sys_id [--verbose]
usage: Delete a single crash record          : system_deletecrashes -c crash_id [--verbose]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_deletenotes</term>
<listitem>
<para>Delete notes from a system.</para>
<screen>usage: system_deletenotes &lt;SYSTEM&gt; &lt;ID|*&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_deletepackageprofile</term>
<listitem>
<para>Delete a package profile.</para>
<screen>usage: system_deletepackageprofile PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_deployconfigfiles</term>
<listitem>
<para>Deploy all configuration files for a system.</para>
<screen>usage: system_deployconfigfiles &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_details</term>
<listitem>
<para>Show the details of a system profile.</para>
<screen>usage: system_details &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_getcrashfiles</term>
<listitem>
<para>Download all files for a crash record.</para>
<screen>usage: system_getcrashfiles -c crash_id [--verbose]
usage: system_getcrashfiles -c crash_id [--dest_folder=/tmp/crash_files] [--verbose]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_installpackage</term>
<listitem>
<para>Install a package on a system.</para>
<screen>usage: system_installpackage &lt;SYSTEMS&gt; &lt;PACKAGE ...&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_list</term>
<listitem>
<para>List all system profiles.</para>
<screen>usage: system_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listbasechannel</term>
<listitem>
<para>List the base channel for a system.</para>
<screen>usage: system_listbasechannel &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listchildchannels</term>
<listitem>
<para>List the child channels for a system.</para>
<screen>usage: system_listchildchannels &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listconfigchannels</term>
<listitem>
<para>List the config channels of a system.</para>
<screen>usage: system_listconfigchannels &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listconfigfiles</term>
<listitem>
<para>List the managed config files of a system.</para>
<screen>usage: system_listconfigfiles &lt;SYSTEMS&gt;'
options:
  -s/--sandbox : list only system-sandbox files
  -l/--local   : list only locally managed files
  -c/--central : list only centrally managed files
  -q/--quiet   : quiet mode (omits the header)

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listcrashedsystems</term>
<listitem>
<para>List all systems that have experienced a crash and reported by spacewalk-abrt.</para>
<screen>usage: system_listcrashedsystems</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listcrashesbysystem</term>
<listitem>
<para>List all reported crashes for a system.</para>
<screen>usage: system_listcrashesbysystem -i sys_id</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listcustomvalues</term>
<listitem>
<para>List the custom values for a system.</para>
<screen>usage: system_listcustomvalues &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listentitlements</term>
<listitem>
<para>List the entitlements for a system.</para>
<screen>usage: system_listentitlements &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listerrata</term>
<listitem>
<para>List available errata for a system.</para>
<screen>usage: system_listerrata &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listevents</term>
<listitem>
<para>List the event history for a system.</para>
<screen>usage: system_listevents &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listhardware</term>
<listitem>
<para>List the hardware details of a system.</para>
<screen>usage: system_listhardware &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listinstalledpackages</term>
<listitem>
<para>List the installed packages on a system.</para>
<screen>usage: system_listinstalledpackages &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listnotes</term>
<listitem>
<para>List the available notes for a system.</para>
<screen>usage: system_listnotes &lt;SYSTEM&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listpackageprofiles</term>
<listitem>
<para>List all package profiles.</para>
<screen>usage: system_listpackageprofiles</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listupgrades</term>
<listitem>
<para>List the available upgrades for a system.</para>
<screen>usage: system_listupgrades &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_lock</term>
<listitem>
<para>Lock a system.</para>
<screen>usage: system_lock &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_reboot</term>
<listitem>
<para>Reboot a system.</para>
<screen>usage: system_reboot &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_removechildchannels</term>
<listitem>
<para>Remove child channels from a system.</para>
<screen>usage: system_removechildchannels &lt;SYSTEMS&gt; &lt;CHANNEL ...&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_removeconfigchannels</term>
<listitem>
<para>Remove config channels from a system.</para>
<screen>usage: system_removeconfigchannels &lt;SYSTEMS&gt; &lt;CHANNEL ...&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_removecustomvalues</term>
<listitem>
<para>Remove a custom value for a system.</para>
<screen>usage: system_removecustomvalues &lt;SYSTEMS&gt; &lt;KEY ...&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_removeentitlement</term>
<listitem>
<para>Remove an entitlement from a system.</para>
<screen>usage: system_removeentitlement &lt;SYSTEMS&gt; ENTITLEMENT

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_removepackage</term>
<listitem>
<para>Remove a package from a system.</para>
<screen>usage: system_removepackage &lt;SYSTEMS&gt; &lt;PACKAGE ...&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_rename</term>
<listitem>
<para>Rename a system profile.</para>
<screen>usage: system_rename OLDNAME NEWNAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_runscript</term>
<listitem>
<para>Schedule a script to run on the list of systems provided.</para>
<screen>usage: system_runscript &lt;SYSTEMS&gt; [options]

options:
  -u USER
  -g GROUP
  -t TIMEOUT
  -s START_TIME
  -l LABEL
  -f FILE

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL


Dates can be any of the following:
Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_schedulehardwarerefresh</term>
<listitem>
<para>Schedule a hardware refresh for a system.</para>
<screen>usage: system_schedulehardwarerefresh &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_schedulepackagerefresh</term>
<listitem>
<para>Schedule a software package refresh for a system.</para>
<screen>usage: system_schedulepackagerefresh &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_search</term>
<listitem>
<para>List systems that match the given criteria.</para>
<screen>usage: system_search QUERY

Available Fields:
id
name
ip
hostname
device
vendor
driver
uuid

Examples:
&gt; system_search device:vmware
&gt; system_search ip:192.168.82</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_setbasechannel</term>
<listitem>
<para>Set a system’s base software channel.</para>
<screen>usage: system_setbasechannel &lt;SYSTEMS&gt; CHANNEL

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_setconfigchannelorder</term>
<listitem>
<para>Set the ranked order of configuration channels.</para>
<screen>usage: system_setconfigchannelorder &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_setcontactmethod</term>
<listitem>
<para>Set the contact method for given system(s).</para>
<screen>Available contact methods: ['default', 'ssh-push', 'ssh-push-tunnel']
usage: system_setcontactmethod &lt;SYSTEMS&gt; &lt;CONTACT_METHOD&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_show_packageversion</term>
<listitem>
<para>Shows version of installed package on given system(s).</para>
<screen>usage: system_show_packageversion &lt;SYSTEM&gt; &lt;PACKAGE&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_syncpackages</term>
<listitem>
<para>Sync packages between two systems.</para>
<screen>usage: system_syncpackages SOURCE TARGET</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_unlock</term>
<listitem>
<para>Unlock a system.</para>
<screen>usage: system_unlock &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_updatecustomvalue</term>
<listitem>
<para>Update a custom value for a system.</para>
<screen>usage: system_updatecustomvalue KEY VALUE &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_upgradepackage</term>
<listitem>
<para>Upgrade a package on a system.</para>
<screen>usage: system_upgradepackage &lt;SYSTEMS&gt; &lt;PACKAGE ...&gt;|*

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.toggle"><title>toggle_</title><variablelist>
<varlistentry>
<term>toggle_confirmations</term>
<listitem>
<para>Toggle confirmation messages on/off.</para>
<screen>usage: toggle_confirmations</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.user"><title>user_</title><variablelist>
<varlistentry>
<term>user_adddefaultgroup</term>
<listitem>
<para>Add a default group to an user account.</para>
<screen>usage: user_adddefaultgroup USER &lt;GROUP ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_addgroup</term>
<listitem>
<para>Add a group to an user account.</para>
<screen>usage: user_addgroup USER &lt;GROUP ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_addrole</term>
<listitem>
<para>Add a role to an user account.</para>
<screen>usage: user_addrole USER ROLE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_create</term>
<listitem>
<para>Create an user.</para>
<screen>usage: user_create [options]

options:
  -u USERNAME
  -f FIRST_NAME
  -l LAST_NAME
  -e EMAIL
  -p PASSWORD
  --pam enable PAM authentication</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_delete</term>
<listitem>
<para>Delete an user.</para>
<screen>usage: user_delete NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_details</term>
<listitem>
<para>Show the details of an user.</para>
<screen>usage: user_details USER ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_disable</term>
<listitem>
<para>Disable an user account.</para>
<screen>usage: user_disable NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_enable</term>
<listitem>
<para>Enable an user account.</para>
<screen>usage: user_enable NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_list</term>
<listitem>
<para>List all users.</para>
<screen>usage: user_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_listavailableroles</term>
<listitem>
<para>List all available roles for users.</para>
<screen>usage: user_listavailableroles</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_removedefaultgroup</term>
<listitem>
<para>Remove a default group from an user account.</para>
<screen>usage: user_removedefaultgroup USER &lt;GROUP ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_removegroup</term>
<listitem>
<para>Remove a group to an user account.</para>
<screen>usage: user_removegroup USER &lt;GROUP ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_removerole</term>
<listitem>
<para>Remove a role from an user account.</para>
<screen>usage: user_removerole USER ROLE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_setemail</term>
<listitem>
<para>Set an user accounts email field.</para>
<screen>usage: user_setemail USER EMAIL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_setfirstname</term>
<listitem>
<para>Set an user accounts first name field.</para>
<screen>usage: user_setfirstname USER FIRST_NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_setlastname</term>
<listitem>
<para>Set an user accounts last name field.</para>
<screen>usage: user_setlastname USER LAST_NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_setpassword</term>
<listitem>
<para>Set an user accounts name prefix field.</para>
<screen>usage: user_setpassword USER PASSWORD</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_setprefix</term>
<listitem>
<para>Set an user accounts name prefix field.</para>
<screen>usage: user_setprefix USER PREFIX</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.whoami"><title>whoami</title><para>The following command is available for returning the currently logged spacecmd username.</para>
<variablelist>
<varlistentry>
<term>whoami</term>
<listitem>
<para>Print the currently logged spacecmd user.</para>
<screen>spacecmd {SSM:0}&gt; whoami
admin</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.whoamitalkingto"><title>whoamitalkingto</title><para>The following spacecmd function is available for returning the server hostname.</para>
<variablelist>
<varlistentry>
<term>whoamitalkingto</term>
<listitem>
<para>Return the server hostname that spacecmd is connected with.</para>
<screen>spacecmd {SSM:0}&gt; whoamitalkingto
MGR_SERVER_HOSTNAME</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
<sect2 id="at.spacecmd.misc.help.topics"><title>Miscellaneous Help Topics</title><para>The following help topics are printed with all functions requiring the relevant information.</para>
<variablelist>
<varlistentry>
<term>time</term>
<listitem>
<para>Dates can be any of the following:</para>
<screen>Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>systems</term>
<listitem>
<para>&lt;SYSTEMS&gt; can be any of the following:</para>
<screen>name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>ssm</term>
<listitem>
<para>The System Set Manager (SSM) is a group of systems that you</para>
<para>can perform tasks on as a group.</para>
<screen>Adding Systems:
&gt; ssm_add group:rhel5-x86_64
&gt; ssm_add channel:rhel-x86_64-server-5
&gt; ssm_add search:device:vmware
&gt; ssm_add host.example.com

Intersections:
&gt; ssm_add group:rhel5-x86_64
&gt; ssm_intersect group:web-servers

Using the SSM:
&gt; system_installpackage ssm zsh
&gt; system_runscript ssm</screen>
</listitem>
</varlistentry>
</variablelist>
</sect2>
</sect1>
</chapter>
<appendix id="advanced.topics.app.ports"><title>Ports</title><sect1 id="advanced.topics.app.ports.server"><title> Server</title><para>Some ports are only relevant if you actually run the related service on the  server.</para>
<variablelist>
<title>Ports to Open on Server</title>
<varlistentry>
<term>67</term>
<listitem>
<para>Inbound / TCP/UDP / DHCP</para>
<para>Required when  is configured as a DHCP server for systems requesting IP addresses.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>69</term>
<listitem>
<para>Inbound / TCP/UDP / TFTP</para>
<para>Used when  is configured as a PXE server and allows installation and re-installation of PXE-boot enabled systems.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>80</term>
<listitem>
<para>Inbound / TCP / HTTP</para>
<para>All Web UI, client, and proxy server requests travel via HTTP or HTTPS.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>80</term>
<listitem>
<para>Outbound / TCP / HTTP</para>
<para>Used to contact <phrase>SUSE Customer Center</phrase>/<phrase>Novell Customer Center</phrase>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>443</term>
<listitem>
<para>Inbound / TCP / HTTPS</para>
<para>All Web UI, client, and proxy server requests travel via HTTP or HTTPS.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>443</term>
<listitem>
<para>Outbound / TCP / HTTPS</para>
<para> uses this port to reach <phrase>SUSE Customer Center</phrase>(unless running in a disconnected mode with RMT or SMT— as described in <xref linkend="disconnect-setup"/>).</para>
</listitem>
</varlistentry>
<varlistentry>
<term>5222</term>
<listitem>
<para>Inbound / TCP / osad</para>
<para>When you wish to push actions to clients this port is required by the <literal role="systemitem">osad</literal> daemon running on your client systems.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>5269</term>
<listitem>
<para>Inbound/Outbound / TCP / jabberd</para>
<para>Needed if you push actions to or via a <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>4505</term>
<listitem>
<para>Inbound / TCP / salt</para>
<para>Required by the Salt-master to accept communication requests via TCP from minions.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>4506</term>
<listitem>
<para>Inbound / TCP / salt</para>
<para>Required by the Salt-master to accept communication requests via TCP from minions.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>25151</term>
<listitem>
<para>TCP</para>
<para>For cobbler.</para>
</listitem>
</varlistentry>
</variablelist>
<variablelist>
<title>Internally Used Ports on Server</title>
<varlistentry>
<term>2828</term>
<listitem>
<para>Internal /</para>
<para>Satellite-search API, used by the RHN application in Tomcat and Taskomatic.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>2829</term>
<listitem>
<para>Internal /</para>
<para>Taskomatic API, used by the RHN application in Tomcat.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>6868</term>
<listitem>
<para>Internal</para>
<para>Auditlog-keeper to database.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>6888</term>
<listitem>
<para>Internal</para>
<para>Auditlog-keeper API, used by the RHN application in Tomcat.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>8005</term>
<listitem>
<para>Internal</para>
<para>Tomcat shutdown port.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>8009</term>
<listitem>
<para>Internal</para>
<para>Tomcat to Apache HTTPD (AJP).</para>
</listitem>
</varlistentry>
<varlistentry>
<term>8080</term>
<listitem>
<para>Internal</para>
<para>Tomcat to Apache HTTPD (HTTP).</para>
</listitem>
</varlistentry>
<varlistentry>
<term>9080</term>
<listitem>
<para>Internal</para>
<para>Salt-API, used by the RHN application in Tomcat and Taskomatic.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>32000</term>
<listitem>
<para>Internal / TCP</para>
<para>Port for a TCP connection to the Java Virtual Machine (JVM) that runs Taskomatic and the search (satellite-search).</para>
</listitem>
</varlistentry>
</variablelist>
<note>
<title>Ephemeral Ports</title>
<para>Anything from port 32768 on (more exactly, what you can see with <command>cat /proc/sys/net/ipv4/ip_local_port_range</command>) is an ephemeral port, typically used as the receiving end of a TCP connection.
So if process A opens a TCP connection to process B (for example, port 22), then A chooses an arbitrary source TCP port to match with destination port 22.</para>
</note>
</sect1>
<sect1 id="advanced.topics.app.ports.proxy"><title> Proxy Server</title><variablelist>
<title>Ports to Open on Proxy Server</title>
<varlistentry>
<term>22</term>
<listitem>
<para>Inbound /</para>
<para>Required when using ssh-push or ssh-push-tunnel contact methods.
Check-in on clients connected to a  Proxy will be initiated on the  Server and <quote>hop through</quote> through to clients.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>80</term>
<listitem>
<para>Outbound /</para>
<para>Used to reach .</para>
</listitem>
</varlistentry>
<varlistentry>
<term>5222</term>
<listitem>
<para>Inbound / TCP</para>
<para>For push actions and connections issued by <literal role="systemitem">osad</literal> running on the client systems.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>5269</term>
<listitem>
<para>Inbound/Outbound / TCP</para>
<para>For push actions with the server.</para>
</listitem>
</varlistentry>
</variablelist>
</sect1>
<sect1 id="advanced.topics.app.ports.client"><title> Client</title><variablelist>
<title>Ports to Open on Client</title>
<varlistentry>
<term>22</term>
<listitem>
<para>Inbound / SSH</para>
<para>Required when using ssh-push or ssh-push-tunnel contact methods.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>80</term>
<listitem>
<para>Outbound</para>
<para>To reach the  server or <phrase><phrase><phrase>SUSE</phrase> Manager</phrase> Proxy</phrase> server.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>5222</term>
<listitem>
<para>Outbound / TCP</para>
<para>For push actions with the server or proxy server.</para>
</listitem>
</varlistentry>
</variablelist>
</sect1>
</appendix>
<appendix id="advanced.topics.app.ay.example-simple"><title>Minimalist AutoYaST Profile for Automated Installations and Useful Enhancements</title><para>The following AutoYaST profile will install a <phrase>SUSE Linux Enterprise Server</phrase> system with all default installation options including a default network configuration with DHCP.
After the installation is completed, a bootstrap script located on the  server will be executed in order to register the freshly installed system with .
You need to adjust the IP address of the  server, the name of the bootstrap script and the root password according to your needs in the following lines:</para>
<screen>&lt;user&gt;
 ...
 &lt;username&gt;root&lt;/username&gt;
 &lt;user_password&gt;`linux`&lt;/user_password&gt;
&lt;/user&gt;

&lt;location&gt;http://`192.168.1.1`/pub/bootstrap/`my_bootstrap.sh`&lt;/location&gt;</screen>
<para>The complete AutoYaST file:</para>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns"
         xmlns:config="http://www.suse.com/1.0/configns"&gt;
 &lt;general&gt;
  &lt;mode&gt;
   &lt;confirm config:type="boolean"&gt;false&lt;/confirm&gt;
  &lt;/mode&gt;
 &lt;/general&gt;
 &lt;networking&gt;
  &lt;keep_install_network config:type="boolean"&gt;true&lt;/keep_install_network&gt;
 &lt;/networking&gt;
 &lt;software&gt;
  &lt;install_recommended config:type="boolean"&gt;true&lt;/install_recommended&gt;
   &lt;patterns config:type="list"&gt;
    &lt;pattern&gt;base&lt;/pattern&gt;
   &lt;/patterns&gt;
 &lt;/software&gt;
 &lt;users config:type="list"&gt;
  &lt;user&gt;
   &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
   &lt;fullname&gt;root&lt;/fullname&gt;
   &lt;gid&gt;0&lt;/gid&gt;
   &lt;home&gt;/root&lt;/home&gt;
   &lt;password_settings&gt;
    &lt;expire&gt;&lt;/expire&gt;
    &lt;flag&gt;&lt;/flag&gt;
    &lt;inact&gt;&lt;/inact&gt;
    &lt;max&gt;&lt;/max&gt;
    &lt;min&gt;&lt;/min&gt;
    &lt;warn&gt;&lt;/warn&gt;
   &lt;/password_settings&gt;
   &lt;shell&gt;/bin/bash&lt;/shell&gt;
   &lt;uid&gt;0&lt;/uid&gt;
   &lt;username&gt;root&lt;/username&gt;
   &lt;user_password&gt;linux&lt;/user_password&gt;
  &lt;/user&gt;
 &lt;/users&gt;
 &lt;scripts&gt;
  &lt;init-scripts config:type="list"&gt;
   &lt;script&gt;
    &lt;interpreter&gt;shell&lt;/interpreter&gt;
    &lt;location&gt;http://192.168.1.1/pub/bootstrap/my_bootstrap.sh&lt;/location&gt;
   &lt;/script&gt;
  &lt;/init-scripts&gt;
 &lt;/scripts&gt;
&lt;/profile&gt;</screen>
<para>Use the following enhancement fragment to add child channels:</para>
<screen>&lt;add-on&gt;
 &lt;add_on_products config:type="list"&gt;
  &lt;listentry&gt;
   &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
   &lt;media_url&gt;http://$c_server/ks/dist/child/`channel-label`/`distribution-label`&lt;/media_url&gt;
   &lt;name&gt;$c_name&lt;/name&gt;
   &lt;product&gt;$c_product&lt;/product&gt;
   &lt;product_dir&gt;/&lt;/product_dir&gt;
  &lt;/listentry&gt;
...
 &lt;/add_on_products&gt;
&lt;/add-on&gt;</screen>
<para>Replace <replaceable>channel-label</replaceable> and <replaceable>distribution-label</replaceable> with actual labels such as <literal>sles11-sp1-updates-x86_64</literal> and <literal>sles11-sp2-x86_64</literal> (the distribution label must correspond to the Autoinstallable Distribution!), and set the variables (<literal>$c_server</literal>, etc.) according to your environment.
For information about variables, see
<xref linkend="s4-sm-system-kick-dist-variables"/>.</para>
<important>
<title>Add the Updates Channel</title>
<para>It is required to add the updates tools channel to the &lt;add-on&gt; AutoYaST snippet section.
This ensures your systems are provided with an up-to-date version of libzypp.
Without the inclusion of an updates channel you will encounter 400 errors.
See the following example where the (DISTRIBUTION_NAME) is replaced with the name of the autoinstallation distribution created previously in <menuchoice><guimenu>Systems</guimenu> <guimenu>Autoinstallation</guimenu> <guimenu>Distributions</guimenu></menuchoice></para>
<screen>&lt;listentry&gt;
     &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
     &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sles12-sp2-updates-x86_64/(DISTRIBUTION_NAME)&lt;/media_url&gt;
     &lt;name&gt;sles12 sp2 updates&lt;/name&gt;
     &lt;product&gt;SLES12&lt;/product&gt;
     &lt;product_dir&gt;/&lt;/product_dir&gt;
  &lt;/listentry&gt;</screen>
</important>
</appendix>
<appendix id="_gnu_licenses_2"><title>GNU Licenses</title><para>This appendix contains the GNU Free Documentation License version 1.2.</para>
</appendix>
<chapter id="_gnu_free_documentation_license_2"><title>GNU Free Documentation License</title><para>Copyright © 2000, 2001, 2002 Free Software Foundation, Inc.
51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.</para>
<bridgehead id="_0_preamble_2" renderas="sect2">0. PREAMBLE</bridgehead>
<para>The purpose of this License is to make a manual, textbook, or other functional and useful document "free" in the sense of freedom: to assure everyone the effective freedom to copy and redistribute it, with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way to get credit for their work, while not being considered responsible for modifications made by others.</para>
<para>This License is a kind of "copyleft", which means that derivative works of the document must themselves be free in the same sense.
It complements the GNU General Public License, which is a copyleft license designed for free software.</para>
<para>We have designed this License in order to use it for manuals for free software, because free software needs free documentation: a free program should come with manuals providing the same freedoms that the software does.
But this License is not limited to software manuals; it can be used for any textual work, regardless of subject matter or whether it is published as a printed book.
We recommend this License principally for works whose purpose is instruction or reference.</para>
<bridgehead id="_1_applicability_and_definitions_2" renderas="sect2">1. APPLICABILITY AND DEFINITIONS</bridgehead>
<para>This License applies to any manual or other work, in any medium, that contains a notice placed by the copyright holder saying it can be distributed under the terms of this License.
Such a notice grants a world-wide, royalty-free license, unlimited in duration, to use that work under the conditions stated herein.
The "Document", below, refers to any such manual or work.
Any member of the public is a licensee, and is addressed as "you". You accept the license if you copy, modify or distribute the work in a way requiring permission under copyright law.</para>
<para>A "Modified Version" of the Document means any work containing the Document or a portion of it, either copied verbatim, or with modifications and/or translated into another language.</para>
<para>A "Secondary Section" is a named appendix or a front-matter section of the Document that deals exclusively with the relationship of the publishers or authors of the Document to the Document’s overall subject (or to related matters) and contains nothing that could fall directly within that overall subject.
(Thus, if the Document is in part a textbook of mathematics, a Secondary Section may not explain any mathematics.) The relationship could be a matter of historical connection with the subject or with related matters, or of legal, commercial, philosophical, ethical or political position regarding them.</para>
<para>The "Invariant Sections" are certain Secondary Sections whose titles are designated, as being those of Invariant Sections, in the notice that says that the Document is released under this License.
If a section does not fit the above definition of Secondary then it is not allowed to be designated as Invariant.
The Document may contain zero Invariant Sections.
If the Document does not identify any Invariant Sections then there are none.</para>
<para>The "Cover Texts" are certain short passages of text that are listed, as Front-Cover Texts or Back-Cover Texts, in the notice that says that the Document is released under this License.
A Front-Cover Text may be at most 5 words, and a Back-Cover Text may be at most 25 words.</para>
<para>A "Transparent" copy of the Document means a machine-readable copy, represented in a format whose specification is available to the general public, that is suitable for revising the document straightforwardly with generic text editors or (for images composed of pixels) generic paint programs or (for drawings) some widely available drawing editor, and that is suitable for input to text formatters or for automatic translation to a variety of formats suitable for input to text formatters.
A copy made in an otherwise Transparent file format whose markup, or absence of markup, has been arranged to thwart or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount of text.
A copy that is not "Transparent" is called "Opaque".</para>
<para>Examples of suitable formats for Transparent copies include plain ASCII without markup, Texinfo input format, LaTeX input format, SGML or XML using a publicly available DTD, and standard-conforming simple HTML, PostScript or PDF designed for human modification.
Examples of transparent image formats include PNG, XCF and JPG.
Opaque formats include proprietary formats that can be read and edited only by proprietary word processors, SGML or XML for which the DTD and/or processing tools are not generally available, and the machine-generated HTML, PostScript or PDF produced by some word processors for output purposes only.</para>
<para>The "Title Page" means, for a printed book, the title page itself, plus such following pages as are needed to hold, legibly, the material this License requires to appear in the title page.
For works in formats which do not have any title page as such, "Title Page" means the text near the most prominent appearance of the work’s title, preceding the beginning of the body of the text.</para>
<para>A section "Entitled XYZ" means a named subunit of the Document whose title either is precisely XYZ or contains XYZ in parentheses following text that translates XYZ in another language.
(Here XYZ stands for a specific section name mentioned below, such as "Acknowledgements", "Dedications", "Endorsements", or "History".) To "Preserve the Title" of such a section when you modify the Document means that it remains a section "Entitled XYZ" according to this definition.</para>
<para>The Document may include Warranty Disclaimers next to the notice which states that this License applies to the Document.
These Warranty Disclaimers are considered to be included by reference in this License, but only as regards disclaiming warranties: any other implication that these Warranty Disclaimers may have is void and has no effect on the meaning of this License.</para>
<bridgehead id="_2_verbatim_copying_2" renderas="sect2">2. VERBATIM COPYING</bridgehead>
<para>You may copy and distribute the Document in any medium, either commercially or noncommercially, provided that this License, the copyright notices, and the license notice saying this License applies to the Document are reproduced in all copies, and that you add no other conditions whatsoever to those of this License.
You may not use technical measures to obstruct or control the reading or further copying of the copies you make or distribute.
However, you may accept compensation in exchange for copies.
If you distribute a large enough number of copies you must also follow the conditions in section 3.</para>
<para>You may also lend copies, under the same conditions stated above, and you may publicly display copies.</para>
<bridgehead id="_3_copying_in_quantity_2" renderas="sect2">3. COPYING IN QUANTITY</bridgehead>
<para>If you publish printed copies (or copies in media that commonly have printed covers) of the Document, numbering more than 100, and the Document’s license notice requires Cover Texts, you must enclose the copies in covers that carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on the back cover.
Both covers must also clearly and legibly identify you as the publisher of these copies.
The front cover must present the full title with all words of the title equally prominent and visible.
You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve the title of the Document and satisfy these conditions, can be treated as verbatim copying in other respects.</para>
<para>If the required texts for either cover are too voluminous to fit legibly, you should put the first ones listed (as many as fit reasonably) on the actual cover, and continue the rest onto adjacent pages.</para>
<para>If you publish or distribute Opaque copies of the Document numbering more than 100, you must either include a machine-readable Transparent copy along with each Opaque copy, or state in or with each Opaque copy a computer-network location from which the general network-using public has access to download using public-standard network protocols a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps, when you begin distribution of Opaque copies in quantity, to ensure that this Transparent copy will remain thus accessible at the stated location until at least one year after the last time you distribute an Opaque copy (directly or through your agents or retailers) of that edition to the public.</para>
<para>It is requested, but not required, that you contact the authors of the Document well before redistributing any large number of copies, to give them a chance to provide you with an updated version of the Document.</para>
<bridgehead id="_4_modifications_2" renderas="sect2">4. MODIFICATIONS</bridgehead>
<para>You may copy and distribute a Modified Version of the Document under the conditions of sections 2 and 3 above, provided that you release the Modified Version under precisely this License, with the Modified Version filling the role of the Document, thus licensing distribution and modification of the Modified Version to whoever possesses a copy of it.
In addition, you must do these things in the Modified Version:</para>
<orderedlist numeration="upperalpha">
<listitem>
<para>Use in the Title Page (and on the covers, if any) a title distinct from that of the Document, and from those of previous versions (which should, if there were any, be listed in the History section of the Document). You may use the same title as a previous version if the original publisher of that version gives permission.</para>
</listitem>
<listitem>
<para>List on the Title Page, as authors, one or more persons or entities responsible for authorship of the modifications in the Modified Version, together with at least five of the principal authors of the Document (all of its principal authors, if it has fewer than five), unless they release you from this requirement.</para>
</listitem>
<listitem>
<para>State on the Title page the name of the publisher of the Modified Version, as the publisher.</para>
</listitem>
<listitem>
<para>Preserve all the copyright notices of the Document.</para>
</listitem>
<listitem>
<para>Add an appropriate copyright notice for your modifications adjacent to the other copyright notices.</para>
</listitem>
<listitem>
<para>Include, immediately after the copyright notices, a license notice giving the public permission to use the Modified Version under the terms of this License, in the form shown in the Addendum below.</para>
</listitem>
<listitem>
<para>Preserve in that license notice the full lists of Invariant Sections and required Cover Texts given in the Document’s license notice.</para>
</listitem>
<listitem>
<para>Include an unaltered copy of this License.</para>
</listitem>
<listitem>
<para>Preserve the section Entitled "History", Preserve its Title, and add to it an item stating at least the title, year, new authors, and publisher of the Modified Version as given on the Title Page. If there is no section Entitled "History" in the Document, create one stating the title, year, authors, and publisher of the Document as given on its Title Page, then add an item describing the Modified Version as stated in the previous sentence.</para>
</listitem>
<listitem>
<para>Preserve the network location, if any, given in the Document for public access to a Transparent copy of the Document, and likewise the network locations given in the Document for previous versions it was based on. These may be placed in the "History" section. You may omit a network location for a work that was published at least four years before the Document itself, or if the original publisher of the version it refers to gives permission.</para>
</listitem>
<listitem>
<para>For any section Entitled "Acknowledgements" or "Dedications", Preserve the Title of the section, and preserve in the section all the substance and tone of each of the contributor acknowledgements and/or dedications given therein.</para>
</listitem>
<listitem>
<para>Preserve all the Invariant Sections of the Document, unaltered in their text and in their titles. Section numbers or the equivalent are not considered part of the section titles.</para>
</listitem>
<listitem>
<para>Delete any section Entitled "Endorsements". Such a section may not be included in the Modified Version.</para>
</listitem>
<listitem>
<para>Do not retitle any existing section to be Entitled "Endorsements" or to conflict in title with any Invariant Section.</para>
</listitem>
<listitem>
<para>Preserve any Warranty Disclaimers.</para>
</listitem>
</orderedlist>
<para>If the Modified Version includes new front-matter sections or appendices that qualify as Secondary Sections and contain no material copied from the Document, you may at your option designate some or all of these sections as invariant.
To do this, add their titles to the list of Invariant Sections in the Modified Version’s license notice.
These titles must be distinct from any other section titles.</para>
<para>You may add a section Entitled "Endorsements", provided it contains nothing but endorsements of your Modified Version by various parties—​for example, statements of peer review or that the text has been approved by an organization as the authoritative definition of a standard.</para>
<para>You may add a passage of up to five words as a Front-Cover Text, and a passage of up to 25 words as a Back-Cover Text, to the end of the list of Cover Texts in the Modified Version.
Only one passage of Front-Cover Text and one of Back-Cover Text may be added by (or through arrangements made by) any one entity.
If the Document already includes a cover text for the same cover, previously added by you or by arrangement made by the same entity you are acting on behalf of, you may not add another; but you may replace the old one, on explicit permission from the previous publisher that added the old one.</para>
<para>The author(s) and publisher(s) of the Document do not by this License give permission to use their names for publicity for or to assert or imply endorsement of any Modified Version.</para>
<bridgehead id="_5_combining_documents_2" renderas="sect2">5. COMBINING DOCUMENTS</bridgehead>
<para>You may combine the Document with other documents released under this License, under the terms defined in section 4 above for modified versions, provided that you include in the combination all of the Invariant Sections of all of the original documents, unmodified, and list them all as Invariant Sections of your combined work in its license notice, and that you preserve all their Warranty Disclaimers.</para>
<para>The combined work need only contain one copy of this License, and multiple identical Invariant Sections may be replaced with a single copy.
If there are multiple Invariant Sections with the same name but different contents, make the title of each such section unique by adding at the end of it, in parentheses, the name of the original author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of Invariant Sections in the license notice of the combined work.</para>
<para>In the combination, you must combine any sections Entitled "History" in the various original documents, forming one section Entitled "History"; likewise combine any sections Entitled "Acknowledgements", and any sections Entitled "Dedications". You must delete all sections Entitled "Endorsements".</para>
<bridgehead id="_6_collections_of_documents_2" renderas="sect2">6. COLLECTIONS OF DOCUMENTS</bridgehead>
<para>You may make a collection consisting of the Document and other documents released under this License, and replace the individual copies of this License in the various documents with a single copy that is included in the collection, provided that you follow the rules of this License for verbatim copying of each of the documents in all other respects.</para>
<para>You may extract a single document from such a collection, and distribute it individually under this License, provided you insert a copy of this License into the extracted document, and follow this License in all other respects regarding verbatim copying of that document.</para>
<bridgehead id="_7_aggregation_with_independent_works_2" renderas="sect2">7. AGGREGATION WITH INDEPENDENT WORKS</bridgehead>
<para>A compilation of the Document or its derivatives with other separate and independent documents or works, in or on a volume of a storage or distribution medium, is called an "aggregate" if the copyright resulting from the compilation is not used to limit the legal rights of the compilation’s users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not apply to the other works in the aggregate which are not themselves derivative works of the Document.</para>
<para>If the Cover Text requirement of section 3 is applicable to these copies of the Document, then if the Document is less than one half of the entire aggregate, the Document’s Cover Texts may be placed on covers that bracket the Document within the aggregate, or the electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole aggregate.</para>
<bridgehead id="_8_translation_2" renderas="sect2">8. TRANSLATION</bridgehead>
<para>Translation is considered a kind of modification, so you may distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special permission from their copyright holders, but you may include translations of some or all Invariant Sections in addition to the original versions of these Invariant Sections.
You may include a translation of this License, and all the license notices in the Document, and any Warranty Disclaimers, provided that you also include the original English version of this License and the original versions of those notices and disclaimers.
In case of a disagreement between the translation and the original version of this License or a notice or disclaimer, the original version will prevail.</para>
<para>If a section in the Document is Entitled "Acknowledgements", "Dedications", or "History", the requirement (section 4) to Preserve its Title (section 1) will typically require changing the actual title.</para>
<bridgehead id="_9_termination_2" renderas="sect2">9. TERMINATION</bridgehead>
<para>You may not copy, modify, sublicense, or distribute the Document except as expressly provided for under this License.
Any other attempt to copy, modify, sublicense or distribute the Document is void, and will automatically terminate your rights under this License.
However, parties who have received copies, or rights, from you under this License will not have their licenses terminated so long as such parties remain in full compliance.</para>
<bridgehead id="_10_future_revisions_of_this_license_2" renderas="sect2">10. FUTURE REVISIONS OF THIS LICENSE</bridgehead>
<para>The Free Software Foundation may publish new, revised versions of the GNU Free Documentation License from time to time.
Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns.
See <ulink url="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</ulink>.</para>
<para>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this License "or any later version" applies to it, you have the option of following the terms and conditions either of that specified version or of any later version that has been published (not as a draft) by the Free Software Foundation.
If the Document does not specify a version number of this License, you may choose any version ever published (not as a draft) by the Free Software Foundation.</para>
<bridgehead id="_addendum_how_to_use_this_license_for_your_documents_2" renderas="sect2">ADDENDUM: How to use this License for your documents</bridgehead>
<screen>Copyright (c) YEAR YOUR NAME.
   Permission is granted to copy, distribute and/or modify this document
   under the terms of the GNU Free Documentation License, Version 1.2
   or any later version published by the Free Software Foundation;
   with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
   A copy of the license is included in the section entitled“GNU
   Free Documentation License”.</screen>
<para>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts, replace the “
with…​Texts.”
line with this:</para>
<screen>with the Invariant Sections being LIST THEIR TITLES, with the
   Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</screen>
<para>If you have Invariant Sections without Cover Texts, or some other combination of the three, merge those two alternatives to suit the situation.</para>
<para>If your document contains nontrivial examples of program code, we recommend releasing these examples in parallel under your choice of free software license, such as the GNU General Public License, to permit their use in free software.</para>
</chapter>
</book>
</set>
