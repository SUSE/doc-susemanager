[[salt.file.locations]]
= Salt File Locations and Structure


The following screen describes Salt file structures and their locations used by the {productname} Server.
These files are listed in [path]``/etc/salt/master.d/susemanager.conf``:

----
# Configure different file roots

file_roots:
  base:
    - /usr/share/susemanager/salt    #Should not be touched by a user
    - /srv/susemanager/salt          #Should not be touched by a user
    - /srv/salt                      #Your custom states go here

# Configure different pillar roots

pillar_roots:
  base:
    - /usr/share/susemanager/pillar  #Should not be touched by a user
    - /srv/pillar                    #Custom pillars go here

# Extension modules path

extension_modules: /usr/share/susemanager/modules

# Master top configuration

master_tops:
  mgr_master_tops: True
----

The following tips should be kept in mind when working with [path]``/etc/salt/master.d/susemanager.conf``.

* Files listed are searched in the order they appear.
* The first file found is called.

[[salt.gs.guide.salt.file.locations.file.roots]]
== file_roots
// ianew: salt/salt.adoc
// iawho: lana 2019-02-27

{productname} as the Salt master reads its state data from three specific file root directories.

/usr/share/susemanager/salt::
This directory is created by {productname} and its content generated by the [path]``/usr/share/susemanager/modules/tops/mgr_master_tops.py`` python module.
It is shipped and updated together with {productname} and includes certificate setup and common state logic that will be applied to packages and channels.
+

[WARNING]
.Do Not Edit
====
You should not edit or add custom Salt data to this directory.
====
+

/srv/susemanager/salt::
This directory is created by {productname} and contains assigned channels and packages for clients, groups, and organizations.
These files will be overwritten and regenerated.
A good analogy for this directory would be the SUSE Manager database translated into Salt directives.
+

[WARNING]
.Do Not Edit
====
You should not edit or add custom Salt data to this directory.
====
+

/srv/salt::
The directory [path]``/srv/salt`` is for your custom state data, salt modules etc.
SUSE Manager does not perform any actions on this directory.
However the state data placed here affects the Highstate of clients and is merged with the result generated by {productname}.
+

[NOTE]
.Editable
====
Place custom Salt data here.
====

[[salt.gs.guide.salt.file.locations.pillar.roots]]
== pillar_roots

{productname} as the Salt master reads its pillar data from two specific pillar root directories.

/usr/share/susemanager/pillar::
This directory is generated by {productname}.
It is shipped and updated together with {productname}.
+

[WARNING]
.Do Not Edit
====
You should not edit or add custom Salt data to this directory.
====
+

/srv/pillar::
{productname} by default does not touch or do anything with this directory.
However the custom pillar data placed here is merged with the pillar result created by {productname}.
+

[TIP]
.Editable Directory
====
Place your custom Salt pillar data here.
====
