= Configure the Cluster Information Base(CIB)

. Add the following to the CIB on *node1*:
+

----
crm configure edit
----

. Add the following primitives:
+

[.small]
----
primitive pri_fs_c01_cacheapache2 Filesystem \
        params device="/dev/vg_c01_cache/lv_c01_cacheapache2" directory="/var/cache/apache2" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_cachecobbler Filesystem \
        params device="/dev/vg_c01_cache/lv_c01_cachecobbler" directory="/var/cache/cobbler" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_cacherhn Filesystem \
        params device="/dev/vg_c01_cache/lv_c01_cacherhn" directory="/var/cache/rhn" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_cachesalt Filesystem \
        params device="/dev/vg_c01_cache/lv_c01_cachesalt" directory="/var/cache/salt" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_otheretcapache2 Filesystem \
        params device="/dev/vg_c01_other/lv_c01_otheretcapache2" directory="/etc/apache2_1" fstype=ext3 options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_otheretccobbler Filesystem \
        params device="/dev/vg_c01_other/lv_c01_otheretccobbler" directory="/etc/cobbler" fstype=ext3 options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_otheretcrhn Filesystem \
        params device="/dev/vg_c01_other/lv_c01_otheretcrhn" directory="/etc/rhn" fstype=ext3 options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_otheretcsalt Filesystem \
        params device="/dev/vg_c01_other/lv_c01_otheretcsalt" directory="/etc/salt" fstype=ext3 options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_otheretcsysconfigrhn Filesystem \
        params device="/dev/vg_c01_other/lv_c01_otheretcsysconfigrhn" directory="/etc/sysconfig/rhn" fstype=ext3 options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_otheretctomcat Filesystem \
        params device="/dev/vg_c01_other/lv_c01_otheretctomcat" directory="/etc/tomcat" fstype=ext3 options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_othervarlibjabberd Filesystem \
        params device="/dev/vg_c01_other/lv_c01_othervarlibjabberd" directory="/var/lib/jabberd" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_othervarliblibvirtimages Filesystem \
        params device="/dev/vg_c01_other/lv_c01_othervarliblibvirtimages" directory="/var/lib/libvirt/images" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_othervarlibrhn Filesystem \
        params device="/dev/vg_c01_other/lv_c01_othervarlibrhn" directory="/var/lib/rhn" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_othervarlibsalt Filesystem \
        params device="/dev/vg_c01_other/lv_c01_othervarlibsalt" directory="/var/lib/salt" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_othervarlibspacewalk Filesystem \
        params device="/dev/vg_c01_other/lv_c01_othervarlibspacewalk" directory="/var/lib/spacewalk" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_pgsql Filesystem \
        params device="/dev/vg_c01_pgsql/lv_c01_pgsql" directory="/var/lib/pgsql" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_spacewalk Filesystem \
        params device="/dev/vg_c01_spacewalk/lv_c01_spacewalk" directory="/var/spacewalk" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_srv Filesystem \
        params device="/dev/vg_c01_srv/lv_c01_srv" directory="/srv_1" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_varlogapache2 Filesystem \
        params device="/dev/vg_c01_varlog/lv_c01_varlogapache2" directory="/var/log/apache2" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_varlogatftpd Filesystem \
        params device="/dev/vg_c01_varlog/lv_c01_varlogatftpd" directory="/var/log/atftpd" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_varlogcobbler Filesystem \
        params device="/dev/vg_c01_varlog/lv_c01_varlogcobbler" directory="/var/log/cobbler" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_varlogrhn Filesystem \
        params device="/dev/vg_c01_varlog/lv_c01_varlogrhn" directory="/var/log/rhn" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_varlogsalt Filesystem \
        params device="/dev/vg_c01_varlog/lv_c01_varlogsalt" directory="/var/log/salt" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_varlogspacewalk Filesystem \
        params device="/dev/vg_c01_varlog/lv_c01_varlogspacewalk" directory="/var/log/spacewalk" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_fs_c01_varlogtomcat Filesystem \
        params device="/dev/vg_c01_varlog/lv_c01_varlogtomcat" directory="/var/log/tomcat" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
primitive pri_lvm_vg_c01_cache LVM \
        params volgrpname=vg_c01_cache \
        op start timeout=30 interval=0 \
        op stop timeout=10 interval=0 \
        op monitor timeout=130 interval=130 on-fail=fence
primitive pri_lvm_vg_c01_other LVM \
        params volgrpname=vg_c01_other \
        op start timeout=30 interval=0 \
        op stop timeout=10 interval=0 \
        op monitor timeout=130 interval=130 on-fail=fence
primitive pri_lvm_vg_c01_pgsql LVM \
        params volgrpname=vg_c01_pgsql \
        op start timeout=30 interval=0 \
        op stop timeout=10 interval=0 \
        op monitor timeout=130 interval=130 on-fail=fence
primitive pri_lvm_vg_c01_spacewalk LVM \
        params volgrpname=vg_c01_spacewalk \
        op start timeout=30 interval=0 \
        op stop timeout=10 interval=0 \
        op monitor timeout=130 interval=130 on-fail=fence
primitive pri_lvm_vg_c01_srv LVM \
        params volgrpname=vg_c01_srv \
        op start timeout=30 interval=0 \
        op stop timeout=10 interval=0 \
        op monitor timeout=130 interval=130 on-fail=fence
primitive pri_lvm_vg_c01_varlog LVM \
        params volgrpname=vg_c01_varlog \
        op start timeout=30 interval=0 \
        op stop timeout=10 interval=0 \
        op monitor timeout=130 interval=130 on-fail=fence
----

=== Adjust the SRV mount
. There is a mount to */srv_1*.

.. Check on which the */srv_1* is mounted.

.. Run the following: `cp -ar /srv/* /srv_1/`

. change the resource that mounts */srv_1*:
+

----
`crm configure edit`
----
+

Listed under the *primitive pri_fs_c01_srv*, change */srv_1 to /srv*.
+

----
primitive pri_fs_c01_srv Filesystem \
        params device="/dev/vg_c01_srv/lv_c01_srv" directory="/srv" fstype=xfs options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
----

=== Adjust the apache Mount
. There is a mount to /etc/apache_1.
.. Check on which the /etc/apache_1 is mounted.
.. Run the following: `cp -ar /etc/apache2/* /etc/apache2_1/`
. Change the resource that mounts `/etc/apache2_1`:
+

----
crm configure edit
----
+
In the primitive pri_fs_c01_otheretcapache2, change /etc/apache2_1 to /etc/apache2:
+

----

primitive pri_fs_c01_otheretcapache2 Filesystem \
        params device="/dev/vg_c01_other/lv_c01_otheretcapache2" directory="/etc/apache2" fstype=ext3 options="noatime,defaults" \
        op start timeout=60 interval=0 \
        op stop timeout=60 interval=0 \
        op monitor timeout=40 interval=20
----

All file systems should now be mounted on *node1*.