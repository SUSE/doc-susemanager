<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<!-- Converted by suse-upgrade version 1.1 -->

<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="s1-maintenance-auditlog">
    <title>Configuring &alk;</title>
    <para>&alk; buffers incoming messages and delivers them
        to several destinations. A destination can be any type of
        storage, database, or search index as long as they are
        supported by &alk;. </para>
    
    <sect2 xml:id="s2-maintenance-auditlog.install">
        <title>Installing &alk;</title>
        <para>Install the package
            <systemitem>auditlog-keeper</systemitem> to get its core
            functionality. &alk; supports several output plugins,
            which can be installed if you need further logging
            capabilities. See <xref linkend="tab.maintenance-auditlog.auditlog-plugins"/>.
        </para>
        <table xml:id="tab.maintenance-auditlog.auditlog-plugins">
            <title>Available Optional Log Keeper Plug-ins</title>
            <tgroup cols="2">
                <thead>
                    <row>
                        <entry><para>Package</para></entry>
                        <entry>
                            <para>Description</para>
                        </entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>
                            <para><systemitem class="resource">auditlog-keeper-rdbms</systemitem></para>
                        </entry>
                        <entry>
                            <para>Stores log events into a relational database.</para>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <para><systemitem class="resource">auditlog-keeper-syslog</systemitem></para>
                        </entry>
                        <entry>
                            <para>Stores log events on a remote syslog
                                server; supports TCP, UDP, and local connections.</para>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <para><systemitem class="resource">auditlog-keeper-xmlout</systemitem></para>
                        </entry>
                        <entry>
                            <para>Writes its log events into an XML file.</para>
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        
        <para>Apart from the core package and optional plug-ins, you
            need to install at least one schema validator. 
            Schema validators are <quote>sanitation filters</quote> that reject 
            inaccurate data from the client components and assures that
            the logging events are described in a standardized format. 
            For &susemgr; install the package <systemitem class="resource">auditlog-keeper-spacewalk-validator</systemitem>.
        </para>
    </sect2>
    
    <sect2 xml:id="s2-maintenance-auditlog.config">
        <title>Configuring &alk;</title>
        <para>&alk; is a solution which is independent from &susemgr;.
            As such, it first needs to be enabled before it can collect
            log events. To enable &alk; to write its log events to
            <filename>/var/log/messages</filename>, add the following line anywhere in
            <filename>/etc/rhn/rhn.conf</filename>:</para>
        <screen>audit.enabled=1</screen>
        <para>Restart the &susemgr; server by running the following
            command:</para>
        <screen>spacewalk-service restart</screen>
        <para>After the command is successfully executed, &alk; is
            correctly enabled and executed. To also enable &alk; on
            system startup, use the following command as user &rootuser;:</para>
        <screen>chkconfig auditlog-keeper on</screen>
        <para>Apart from the above first steps, it is a good idea to
            change the default credentials. Proceed as follows:</para>
        <procedure xml:id="pro.maintenance-auditlog.defaultcredentials">
            <title>Changing Default Credentials</title>
            <step>
                <para>Log in as &rootuser;. Stop the &alk; and &susemgr; server:</para>
                <screen>rcauditlog-keeper stop
spacewalk-service stop</screen>
            </step>
            <step>
                <para>Remove table files manually:</para>
                <screen>rm /var/opt/auditlog-keeper/auditlog*</screen>
            </step>
            <step>
                <para>Change the password in the config file for the
                    <systemitem>backend.db.auth.user</systemitem> and
                    <systemitem>backend.db.auth.password</systemitem> fields: </para>
                <screen>auditlog-keeper --configure</screen>
                <para>Save the new configuration by pressing <keycombo>
                    <keycap>:</keycap>
                    <keycap>w</keycap>
                    <keycap>q</keycap>
                </keycombo> and hit <keycap function="enter">Return</keycap>.</para>
            </step>
            <step>
                <para>Start the &alk; and &susemgr; server again:</para>
                <screen>rcauditlog-keeper start
spacewalk-service start</screen>
            </step>
        </procedure>
        <para>Find further information about &alk; plugins and how to
            configure at <link xlink:href="http://wiki.novell.com/index.php/AuditLogKeeper"/>.
            An FAQ can be found at <link xlink:href="http://wiki.novell.com/index.php/AuditLogKeeperFAQ"/>.</para>
    </sect2>
</sect1>
