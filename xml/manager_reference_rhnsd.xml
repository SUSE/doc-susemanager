<?xml version="1.0"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:novdoc-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter PUBLIC
  "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<!-- 
 @maintainer:
 Check paths, terminology

-->
<chapter id="ch-rhnsd">
 <title>&susemgr; Daemon</title><indexterm>
 <primary>initialization script</primary>
 <secondary>rcrhnsd</secondary></indexterm><indexterm>
 <primary>&susemgr; Daemon </primary></indexterm><indexterm>
 <primary>rhnsd</primary></indexterm>
 <para>
  The &susemgr; daemon (<command>rhnsd</command>) runs on the client systems
  and periodically connects to &susemgr; to check for updates and
  notifications. The daemon, which runs in the background, is typically
  started by the <command>rcrhnsd</command> initialization script.
 </para>
 <para>
  To check for updates, <command>rhnsd</command> runs the external
  <command>mgr_check</command> program located in
  <filename>/usr/sbin/</filename>. This is a small application that establishes
  the network connection to &susemgr;. The &susemgr; daemon does not listen
  on any network ports or talk to the network directly. All network activity
  is done via the <command>mgr_check</command> utility.
 </para>
 <warning>
  <para>
   When new packages or updates are installed on the client via
   &susemgr;, any licenses (EULAs) requiring agreement before
   installation are automatically accepted.
  </para>
 </warning>
 <sect1 id="s1-rhnsd-config">
  <title>Configuring</title><indexterm>

  <primary>reactivating</primary>

  <secondary>configuring</secondary></indexterm>

  <para>
   The &susemgr; daemon can be configured by editing the
   <filename>/etc/sysconfig/rhn/rhnsd</filename> configuration file. This is
   actually the configuration file the <command>rhnsd</command>
   initialization script uses. The most important setting for the daemon is
   its check-in frequency. The default interval time is four hours (240
   minutes). If you modify the configuration file, you must (as &rootuser;)
   restart the daemon with the command <command>rcrhnsd
   <option>restart</option></command>.
  </para>

  <important>
   <para>
    The minimum time interval allowed is one hour (60 minutes). If you set
    the interval below one hour, it will default to four hours (240
    minutes).
   </para>
  </important>
 </sect1>
 <sect1 id="s1-rhnsd-status">
  <title>Viewing Status</title><indexterm>

  <primary>reactivating</primary>

  <secondary>viewing status</secondary></indexterm>

  <para>
   You can view the status of <systemitem>rhnsd</systemitem> by typing the command
   <command>rcrhnsd <option>status</option></command> at a shell prompt.
  </para>
 </sect1>
 <sect1 id="s1-rhnsd-disable">
  <title>Disabling Service</title><indexterm>

  <primary>rhnsd</primary></indexterm><indexterm>

  <primary>reactivating</primary>

  <secondary>disabling</secondary></indexterm>

  <para>
   To disable the daemon, (as &rootuser;) run the command <command>chkconfig
   rhnsd off</command>. Using this method only disables the service the next
   time the system is started. To stop the service immediately, use the
   command <command>rcrhnsd <option>stop</option></command>.
  </para>
 </sect1>
 <sect1 id="s1-rhnsd-trouble">
  <title>Troubleshooting</title><indexterm>

  <primary>reactivating</primary>

  <secondary>troubleshooting</secondary></indexterm>

  <para>
   If you see messages in the &susemgr; Web interface,
   indicating that check-ins are not taking place, the &susemgr; client is
   not successfully reaching &susemgr;. Make sure that:
  </para>

  <itemizedlist>
   <listitem>
    <para>
     your client is configured correctly,
    </para>
   </listitem>
   <listitem>
    <para>
     your system can communicate with &susemgr; via SSL (port 443). You may
     test this by running the following command from a shell prompt:
    </para>
<screen>telnet xmlrpc.example.com 443</screen>
   </listitem>
   <listitem>
    <para>
     the &susemgr; daemon is activated and running. To find out, run:
    </para>
<screen>chkconfig --level 345 rhnsd on
rcrhnsd start</screen>
   </listitem>
  </itemizedlist>
 </sect1>
</chapter>
