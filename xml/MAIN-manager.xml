<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE set [ <!ENTITY % entities SYSTEM "entity-decl.ent"> %entities; ]>
<?asciidoc-toc?>
<?asciidoc-numbered?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xl="http://www.w3.org/1999/xlink" version="5.0" xml:lang="en">
<info>
<title>SUSE Manager 3.2</title>
<date>2018-04-24</date>
</info>
<part xml:id="_book.suma.getting_started"><title>Getting Started</title><chapter xml:id="_quickstart.chapt.overview.requirements"><title>What is Covered?</title><simpara>Get started with &susemgr;
by setting up a KVM learning environment.
This quick-start guide will provide you with introductory guidance on setting up &susemgr;
server.
You will learn the basics of managing both traditional &susemgr;
clients and Salt clients.
This guide is intended for system administrators.</simpara>
<note>
<title>&susemgr;Version Information</title>
<simpara>In this manual if not other specified, &susemgr;
version &productnumber;
is assumed and this version is required if a feature is discussed. &susemgr;
 &productnumber;
and &susemgr;
 &productnumber;
Proxy were originally released as a SLES 12 SP3 extension.
Whenever features of the &susemgr;{productnumber}
host operating system are documented and not other specified version 12 SP3 is assumed.</simpara>
</note>
<section xml:id="_quickstart.sect.introduction"><title>Introducing &susemgr;</title><simpara>&susemgr;
lets you efficiently manage large sets of Linux systems and keep them up to date.
It provides automated and cost-effective software management, asset management, and system provisioning. &susemgr;
provides a best in class solution for organizations requiring absolute control of maintenance and package deployment on their servers.
It allows customers the highest level of flexibility and power ensuring their servers remain secure while facilitating and advancing an organizations system life-cycle requirements.</simpara>
<formalpara>
<title>Salt</title>
<para>The inclusion of <literal role="systemitem">Salt</literal>
 since &susemgr;
 3 provides powerful event-driven configuration and management capabilities for fine grained control of any modern infrastructure.</para>
</formalpara>
<formalpara>
<title>Salt-master</title>
<para>&susemgr;
takes a commanding role as a Salt-master capable of orchestrating thousands of Salt-minions (&susemgr;
Clients) via remote execution.</para>
</formalpara>
<formalpara>
<title>Distribution Management</title>
<para>&susemgr;
is also fully compatible with Red Hat Satellite Server and offers seamless management of both &sle;
and &rhel;
client systems.</para>
</formalpara>
</section>
<section xml:id="_quickstart.sect.bird.eye.view"><title>Overview</title><simpara>&susemgr;
may be integrated within your network infrastructure in multiple ways.
In this guide you will perform the following steps for an initial test setup.</simpara>
<itemizedlist>
<listitem>
<para>Install &sls; with &susemgr; as an extension</para>
</listitem>
<listitem>
<para>Register &susemgr; with SCC (SUSE Customer Center)</para>
</listitem>
<listitem>
<para>Synchronize a repository channel for use with both traditional clients and Salt minions</para>
</listitem>
<listitem>
<para>Create an authentication key to act as an ID for the synced repository channel</para>
</listitem>
<listitem>
<para>Add the new authentication key to a bootstrap template script and connect a traditional client</para>
</listitem>
<listitem>
<para>Register a Salt minion with &susemgr; (salt-master) and assign it a channel with an authentication key</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_quickstart.sect.prerequisites.install"><title>Prerequisites for Installation</title><simpara>This guide requires that you have created an account with SCC (&scc;
). During installation of both &sls;
(&slsa;
) and &susemgr;
, SCC credentials will be requested and you must enter them to receive the latest packages and updates.
The following procedure will guide you through obtaining your SCC <literal role="systemitem">Organizational Credentials</literal>
.</simpara>
<orderedlist xml:id="_creating.scc.account.mgr" numeration="arabic">
<title>Procedure: Obtaining Your SCC Organization Credentials</title>
<listitem>
<para>Open a browser and direct it to <link xl:href="https://scc.suse.com/login">https://scc.suse.com/login</link>.</para>
</listitem>
<listitem>
<para>If you have not done so, create an account now.</para>
</listitem>
<listitem>
<para>Log in to your new SCC account.</para>
</listitem>
<listitem>
<para>Under the <literal role="systemitem">Management tools</literal> widget select <literal role="systemitem">Manage Users</literal> .</para>
</listitem>
<listitem>
<para>Click the <literal role="systemitem">Organization Credentials</literal> tab.</para>
</listitem>
<listitem>
<para>Keep this information handy during &susemgr; setup.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_obtaining_installation_media"><title>Obtaining Installation Media</title><simpara>After logging into your SCC account, you can find the installation images provided at the following addresses.
Select one and continue reading:</simpara>
<note>
<title>Just Enough Operating System (JeOS) vs. Full Media Image</title>
<simpara>The &slsa;
JeOS image provides the quickest route for setup of a test environment.
The JeOS image total size is about 290 MB.
The alternative would be the 3 GB &slsa;
DVD image.
Both installation media are appropriate, but depend upon available bandwidth or your application needs.
Both methods of installation will be covered in this guide.</simpara>
</note>
<itemizedlist>
<listitem>
<para>Just Enough Operating System (JeOS) 290 MB <link xl:href="https://download.suse.com">https://download.suse.com</link> (and search for <literal>jeos</literal>) or <link xl:href="https://www.suse.com/products/server/jeos/">https://www.suse.com/products/server/jeos/</link></para>
</listitem>
<listitem>
<para>&slsa; DVD image 3 GB <link xl:href="https://www.suse.com/products/server/download/">https://www.suse.com/products/server/download/</link></para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_quickstart.sect.software.requirements"><title>Hardware Requirements</title><simpara>Review the following table for &susemgr;
hardware and software requirements.
For installation on &zsystems;
, see <xref linkend="_art.suma.install.zsystems"/>.</simpara>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Hardware</simpara></entry>
<entry align="left" valign="top"><simpara>Recommended</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>CPU</simpara></entry>
<entry align="left" valign="top"><simpara>Multi-core 64-bit CPU (x86_64, IBM &ppc;
)</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>RAM</simpara></entry>
<entry align="left" valign="top"><simpara>Minimum 4&#160;
GB for test server</simpara><simpara>Minimum 16&#160;
GB for base installation</simpara><simpara>Minimum 32&#160;
GB for a production server</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Disk Space</simpara></entry>
<entry align="left" valign="top"><simpara>Minimum 100&#160;
GB for root partition</simpara><simpara><emphasis>For the purposes of this guide the default JeOS root
        partition size of 24 GB will be sufficient</emphasis></simpara><simpara>Minimum 50&#160;
GB for <filename>/var/lib/pgsql</filename></simpara><simpara>Minimum 50&#160;
GB per SUSE product and 200 GB per Red Hat product for <filename>/var/spacewalk</filename></simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
</section>
<section xml:id="_base_host_operating_system"><title>Base Host Operating System</title><simpara>SUSE Manager &productnumber;
is based on &slsa;
 {sles-version}{sp-version}
as the host operating system.</simpara>
</section>
<section xml:id="_mgr.supported.client.systems"><title>Supported Client Systems</title><simpara>Clients with the following operating systems are supported for registration with &susemgr;
.
If you plan on using the new Salt features, ensure your clients are supported.</simpara>
<note>
<title>Supported Versions and SP Levels</title>
<simpara>Client operating system versions and SP levels must be under general support (normal or LTSS) to be supported with &susemgr;
.
For details on the Expanded Support Lifecycle and minor &rhel;
release versions, see <link xl:href="https://www.suse.com/lifecycle">https://www.suse.com/lifecycle</link><literal>&sle;
 Server with Expanded Support</literal> .</simpara>
</note>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="4">
<colspec colname="col_1" colwidth="25*"/>
<colspec colname="col_2" colwidth="25*"/>
<colspec colname="col_3" colwidth="25*"/>
<colspec colname="col_4" colwidth="25*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Operating Systems</simpara></entry>
<entry align="left" valign="top"><simpara>Architecture</simpara></entry>
<entry align="left" valign="top"><simpara>Traditional Clients</simpara></entry>
<entry align="left" valign="top"><simpara>Salt Clients</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>&sle;
 11 SP4 LTSS</simpara></entry>
<entry align="left" valign="top"><simpara>&x86;
, &x86;
_64, &ipf;
, IBM &ppc;
, &zseries;</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>&sle;
 12 SP1, SP2, SP3</simpara></entry>
<entry align="left" valign="top"><simpara>&x86;
_64, IBM &power;
(&ppc64le;
), &zseries;</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><emphasis>Latest minor release &rhnminrelease6;</emphasis></simpara></entry>
<entry align="left" valign="top"><simpara>&x86;
, &x86;
_64</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><emphasis>Latest minor release &rhnminrelease7;</emphasis></simpara></entry>
<entry align="left" valign="top"><simpara>&x86;
, &x86;
_64</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Novell Open Enterprise Server 11, SP1, SP2, SP3 LTSS</simpara></entry>
<entry align="left" valign="top"><simpara>&x86;
, &x86;
_64</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Open Enterprise Server 2015, 2015 SP1, 2018</simpara></entry>
<entry align="left" valign="top"><simpara>&x86;
, &x86;
_64</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
</section>
<section xml:id="_mgr.additional.requirements"><title>Additional Requirements</title><simpara>To successfully complete this guide some network requirements must be met.
The following section will walk you through these requirements.</simpara>
<formalpara>
<title>Fully Qualified Domain Name (FQDN):</title>
<para>The &susemgr;
server must resolve its FQDN correctly or cookies will not work properly on the &webui;
.
For more information on FQDN, see:</para>
</formalpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://www.suse.com/documentation/sles-12/book_sle_admin/data/sec_basicnet_yast.html#sec_basicnet_yast_change_host">https://www.suse.com/documentation/sles-12/book_sle_admin/data/sec_basicnet_yast.html#sec_basicnet_yast_change_host</link></para>
</listitem>
</itemizedlist>
<formalpara>
<title>Hostname and IP Address:</title>
<para>To ensure that &susemgr;
's domain name can be resolved by its clients, both server and client machines must be connected to a working Domain Name System (DNS) server.
This guide assumes the required infrastructure exists within your environment.
For more information on setting up a (DNS) server, see:</para>
</formalpara>
<formalpara>
<title>Using a Proxy When Installing from &sle;Media</title>
<para>If you are on an internal network and do not have access to &scc;
, you can setup and use a proxy during a &sle;
installation.
For more information on configuring a proxy for access to &scc;
during a &sle;
installation see: <link xl:href="https://www.suse.com/documentation/sled-12/singlehtml/book_sle_deployment/book_sle_deployment.html#sec.i.yast2.start.parameters.proxy">https://www.suse.com/documentation/sled-12/singlehtml/book_sle_deployment/book_sle_deployment.html#sec.i.yast2.start.parameters.proxy</link></para>
</formalpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_dns.html">https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_dns.html</link></para>
</listitem>
</itemizedlist>
<important>
<title>Naming Your Server</title>
<simpara>The hostname of &susemgr;
must not contain uppercase letters as this may cause <literal role="systemitem">jabberd</literal>
 to fail.
Choose the hostname of your &susemgr;
 server carefully.
Although changing the server name is possible, it is a complex process and unsupported.</simpara>
</important>
<simpara>For a more complete overview on &susemgr;
requirements not covered in this guide, see <xref linkend="_mgr.conceptual.overview"/>.</simpara>
</section>
<section xml:id="_firewall_rules"><title>Firewall Rules</title><simpara>In a production environment &susemgr;
server and its clients should always utilize firewall rules.
The following table provides an overview of required ports.</simpara>
<simpara>Traditional client systems connect to &susemgr;
via port 443. In addition, enabling push actions from &susemgr;
to client systems, requires inbound connections on port 5222.
If &susemgr;
will also push to a &susemgr;
proxy, you must allow inbound connections on port 5269.</simpara>
<table xml:id="_tab.install.ports.server1" frame="all" rowsep="1" colsep="1">
<title>Required Ports on &susemgr;Server</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33.3333*"/>
<colspec colname="col_2" colwidth="33.3333*"/>
<colspec colname="col_3" colwidth="33.3334*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Port</simpara></entry>
<entry align="left" valign="top"><simpara>Direction</simpara></entry>
<entry align="left" valign="top"><simpara>Reason</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>67</simpara></entry>
<entry align="left" valign="top"><simpara>Inbound</simpara></entry>
<entry align="left" valign="top"><simpara>Required when configured as a DHCP server for systems requesting IP addresses.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>69</simpara></entry>
<entry align="left" valign="top"><simpara>Inbound</simpara></entry>
<entry align="left" valign="top"><simpara>Used when configured as a PXE server and allows installation and re-installation of PXE-boot enabled systems.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>80</simpara></entry>
<entry align="left" valign="top"><simpara>Outbound</simpara></entry>
<entry align="left" valign="top"><simpara>Used to contact &scc;
.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>443</simpara></entry>
<entry align="left" valign="top"><simpara>Inbound</simpara></entry>
<entry align="left" valign="top"><simpara>All &webui;
, traditional client, and proxy server requests and &susemgr;
uses this port for &scc;
inbound traffic.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>443</simpara></entry>
<entry align="left" valign="top"><simpara>Outbound</simpara></entry>
<entry align="left" valign="top"><simpara>&susemgr;
uses this port to reach &scc;
(unless running in a disconnected mode with RMT or SMT&mdash;
as described in <xref linkend="_disconnect_setup"/>).</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>4505</simpara></entry>
<entry align="left" valign="top"><simpara>Inbound</simpara></entry>
<entry align="left" valign="top"><simpara>Required by the Salt-master to accept communication requests via TCP from minions.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>4506</simpara></entry>
<entry align="left" valign="top"><simpara>Inbound</simpara></entry>
<entry align="left" valign="top"><simpara>Required by the Salt-master to accept communication requests via TCP from minions.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>5222</simpara></entry>
<entry align="left" valign="top"><simpara>Inbound</simpara></entry>
<entry align="left" valign="top"><simpara>When you wish to push actions to clients this port is required by the <literal role="systemitem">osad</literal>
 daemon running on the client systems.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>5269</simpara></entry>
<entry align="left" valign="top"><simpara>Inbound/Outbound</simpara></entry>
<entry align="left" valign="top"><simpara>Needed if you push actions to or via a &susemgrproxy;
.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"></entry>
<entry align="left" valign="top"><simpara>Outbound</simpara></entry>
<entry align="left" valign="top"><simpara>Squid HTTP proxy for outgoing connections.
It could be any port you configure.</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
<simpara>For more information, see <xref linkend="_advanced.topics.app.ports.server"/>.</simpara>
</section>
</chapter>
<chapter xml:id="_sles.installation.within.kvm.jeos"><title>JeOS Installation</title><section xml:id="_quickstart.sect.kvm.settings"><title>Virtual Machine Manager (virt-manager) Settings</title><simpara>This chapter provides the required (KVM) settings for installation of &sle;
Just Enough Operating System (JeOS) 12 as the base for &susemgr;
.
A kernel virtual machine (KVM) combined with Virtual Machine Manager (<command>virt-manager</command>) will be used as a sandbox for your first installation.</simpara>
<tip>
<title>&suse;Virtualization Guide</title>
<simpara>For more information on virtualization, see <link xl:href="https://www.suse.com/documentation/sles-12/singlehtml/book_virt/book_virt.html">https://www.suse.com/documentation/sles-12/singlehtml/book_virt/book_virt.html</link>.</simpara>
</tip>
<simpara>Enter the following settings when creating a new virtual machine using <command>virt-manager</command> (replace <replaceable>version</replaceable> with the actual version string):</simpara>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry align="left" valign="top" namest="col_1" nameend="col_2"><simpara>KVM Settings</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>Installation Method:</simpara></entry>
<entry align="left" valign="top"><simpara>Import Existing Disk Image</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>OS:</simpara></entry>
<entry align="left" valign="top"><simpara>Linux</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Version:</simpara></entry>
<entry align="left" valign="top"><simpara><literal>SLES[replaceable]</literal>version<literal>-JeOS-for-kvm-and-xen.x86_64-GM.qcow2</literal></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Memory:</simpara></entry>
<entry align="left" valign="top"><simpara>4096 MB</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>CPU&#8217;s:</simpara></entry>
<entry align="left" valign="top"><simpara>2</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Storage Format:</simpara></entry>
<entry align="left" valign="top"><simpara><literal>.qcow2</literal> 24 GB (Default) JeOS Root Partition</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Virtual Disks:</simpara><simpara>VirtIO Disk 2</simpara><simpara>VirtIO Disk 3</simpara><simpara>VirtIO Disk 4</simpara></entry>
<entry align="left" valign="top"><simpara> </simpara><simpara>101 GB for <filename>/var/spacewalk</filename></simpara><simpara>50 GB for <filename>/var/lib/pgsql</filename></simpara><simpara>4 GB for swap</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Name:</simpara></entry>
<entry align="left" valign="top"><simpara><literal>example-server</literal></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Network</simpara></entry>
<entry align="left" valign="top"><simpara>Bridge <literal>br0</literal></simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<tip>
<title>&suse;Virtualization Guide</title>
<simpara>For more information on virtualization, see <link xl:href="https://www.suse.com/documentation/sles-12/singlehtml/book_virt/book_virt.html">https://www.suse.com/documentation/sles-12/singlehtml/book_virt/book_virt.html</link>.</simpara>
</tip>
</section>
<section xml:id="_jeos.kvm.settings"><title>JeOS KVM Settings</title><simpara>Create 3 additional virtual disks required for the &susemgr;
storage partitions.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Creating the Required Partitions with KVM</title>
<listitem>
<para>Create a new virtual machine using the downloaded JeOS KVM image and select <guimenu>Import existing disk image</guimenu> .</para>
</listitem>
<listitem>
<para>Configure RAM and number of CPUs: At least 4 GB RAM and 2 CPUs.</para>
</listitem>
<listitem>
<para>Name your KVM machine and select the <guimenu>Customize configuration before install</guimenu> check box.</para>
</listitem>
<listitem>
<para>Select the <guimenu>Add Hardware</guimenu> button and create three new virtual disks with the following specifications. These disks will be partitioned and mounted in <xref linkend="_proc.jeos.susemgr.prep"/>.</para>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="3">
<colspec colname="col_1" colwidth="33.3333*"/>
<colspec colname="col_2" colwidth="33.3333*"/>
<colspec colname="col_3" colwidth="33.3334*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>VirtIO Storage Disks</simpara></entry>
<entry align="left" valign="top"><simpara>Name</simpara></entry>
<entry align="left" valign="top"><simpara>Sizing</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>VirtIO Disk 2</simpara></entry>
<entry align="left" valign="top"><simpara>spacewalk</simpara></entry>
<entry align="left" valign="top"><simpara>101 GB</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>VirtIO Disk 3</simpara></entry>
<entry align="left" valign="top"><simpara>pgsql</simpara></entry>
<entry align="left" valign="top"><simpara>50 GB</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>VirtIO Disk 4</simpara></entry>
<entry align="left" valign="top"><simpara>swap</simpara></entry>
<entry align="left" valign="top"><simpara>4 GB</simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
</listitem>
<listitem>
<para>Click <guimenu>Begin Installation</guimenu> and your new VM will boot from the JeOS image.</para>
</listitem>
</orderedlist>
<simpara>Proceed through the basic JeOS installation prompts until you reach the command line.</simpara>
<tip>
<title>Root Password</title>
<simpara>During the basic installation prompts you are asked to enter the &rootuser;
password.
Select a strong password and then in the next message box <guimenu>Confirm root Password</guimenu>
.</simpara>
</tip>
</section>
<section xml:id="_jeos.susemgr.prep"><title>Preparing JeOS for &susemgr;</title><orderedlist xml:id="_proc.jeos.susemgr.prep" numeration="arabic">
<title>Procedure: Preparing JeOS for &susemgr;Installation</title>
<listitem>
<para>Register with SCC:</para>
<screen>{prompt.root}SUSEConnect -e`EMAIL_ADDRESS`-r`SUSE_MANAGER_CODE`</screen>
</listitem>
<listitem>
<para>Add &susemgr; repositories:</para>
<screen>{prompt.root}SUSEConnect -p SUSE-Manager-Server/&productnumber;/x86_64 -r`SUSE_MANAGER_CODE`</screen>
</listitem>
<listitem>
<para>Install <package>yast2-storage</package> with all required dependencies (approx. 40 packages, 30 MB when installed).  This basic administration package is required for preparing storage partitions:</para>
<screen>{prompt.root}zypper in -t package yast2-storage</screen>
</listitem>
<listitem>
<para>Partition and mount the virtual disks at the following locations using &yast; Partitioner (<command>yast2 disk</command>).</para>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="4">
<colspec colname="col_1" colwidth="25*"/>
<colspec colname="col_2" colwidth="25*"/>
<colspec colname="col_3" colwidth="25*"/>
<colspec colname="col_4" colwidth="25*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>VirtIO Storage Disks</simpara></entry>
<entry align="left" valign="top"><simpara>Name</simpara></entry>
<entry align="left" valign="top"><simpara>Storage Size</simpara></entry>
<entry align="left" valign="top"><simpara>File System Type</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>VirtIO Disk 2</simpara></entry>
<entry align="left" valign="top"><simpara><filename>/var/spacewalk</filename></simpara></entry>
<entry align="left" valign="top"><simpara>101 GB</simpara></entry>
<entry align="left" valign="top"><simpara>XFS</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>VirtIO Disk 3</simpara></entry>
<entry align="left" valign="top"><simpara><filename>/var/lib/pgsql</filename></simpara></entry>
<entry align="left" valign="top"><simpara>50 GB</simpara></entry>
<entry align="left" valign="top"><simpara>XFS</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>VirtIO Disk 4</simpara></entry>
<entry align="left" valign="top"><simpara><filename>swap</filename></simpara></entry>
<entry align="left" valign="top"><simpara>4 GB</simpara></entry>
<entry align="left" valign="top"><simpara>swap</simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
</listitem>
<listitem>
<para>&slsa; by default uses the BTRFS file system. A mount point is created automatically for <filename>/var/lib/pgsql/</filename> (even when not installed). This must be removed or commented out from the <filename>/etc/fstab</filename> entries. As &rootuser; edit <filename>/etc/fstab</filename> and comment out or remove the line:</para>
<screen>/var/lib/pgsql btrfs subvol=@/var/lib/pgsql 0 0</screen>
<warning>
<title>Removing the <literal>pgsql</literal> in the<filename>/etc/fstab</filename>Entry</title>
<simpara>If you do not remove this line from fstab the first time you shutdown the server you will lose your database.
This occurs because you will have duplicate entries in the fstab.</simpara>
</warning>
</listitem>
</orderedlist>
<simpara>Updated tools shipped with recent SPs will no longer require human intervention.</simpara>
<simpara>+</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Exit the partitioner and install the &susemgr; pattern:</para>
<screen>{prompt.root}zypper in -t pattern suma_server</screen>
</listitem>
</orderedlist>
<simpara>For executing &susemgr;
setup: proceed to <xref linkend="_suma.setup.with.yast.sumasetup"/>.</simpara>
</section>
</chapter>
<chapter xml:id="_quickstart3.chap.suma.installation.sles"><title>&sls; Installation</title><simpara>This chapter provides the required (kvm) settings for installation of &sls;
media as the base for &susemgr;
.
A kernel virtual machine (kvm) combined with Virtual Machine Manager (<command>virt-manager</command>) will be used as a sandbox for this installation.</simpara>
<section xml:id="_sles_kvm_requirements"><title>SLES KVM Requirements</title><simpara>Enter the following settings when creating a new virtual machine using <command>virt-manager</command> (replace <replaceable>version</replaceable> with the actual version string):</simpara>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry align="left" valign="top" namest="col_1" nameend="col_2"><simpara>KVM Settings for SLES</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>Installation Method:</simpara></entry>
<entry align="left" valign="top"><simpara>Local install media (ISO image or CDROM)</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>OS:</simpara></entry>
<entry align="left" valign="top"><simpara>Linux</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Version:</simpara></entry>
<entry align="left" valign="top"><simpara><literal>SLE-[replaceable]</literal>version<literal>-Server-x86_64-GM-DVD1.iso</literal></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Memory:</simpara></entry>
<entry align="left" valign="top"><simpara>4096 MB</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>CPUs:</simpara></entry>
<entry align="left" valign="top"><simpara>2</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Storage Format:</simpara></entry>
<entry align="left" valign="top"><simpara>ISO 3 GB</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Disk Space:</simpara></entry>
<entry align="left" valign="top"><simpara>234 GB split between 4 GB swap and 130 GB mounted at <filename>/var/spacewalk/</filename>
 (Virtual Disk 1) and 50 GB mounted at <filename>/var/lib/pgsql</filename>
 (Virtual Disk 2).  The rest for the root partition (100 GB+).</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Name:</simpara></entry>
<entry align="left" valign="top"><simpara><literal>example-server</literal></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Network</simpara></entry>
<entry align="left" valign="top"><simpara>Bridge <literal>br0</literal></simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
</section>
<section xml:id="_sles.installation.within.kvm.media"><title>SLES KVM Settings</title><simpara>This section provides guidance on installation of &susemgr;
utilizing the full installation media with KVM and <command>virt-manager</command>.
This section assumes you have previously setup an account with SCC and downloaded the SLES full installation media.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Preparing for SLES Installation</title>
<listitem>
<para>In <command>virt-manager</command> select <guimenu>File</guimenu> then <guimenu>New Virtual Machine</guimenu> .</para>
</listitem>
<listitem>
<para>Choose <guimenu>Local install media (ISO image or CDROM).</guimenu></para>
</listitem>
<listitem>
<para>Ensure <guimenu>Use ISO Image</guimenu> is selected then click <guimenu>Browse</guimenu> and locate the full SLES image you downloaded from your SCC account.</para>
</listitem>
<listitem>
<para>Configure your machine with at least 4096 MB RAM and a minimum of 2 CPUs.</para>
</listitem>
<listitem>
<para>Create a storage device with a minimum of 234 GB storage space for the installation. During the partitioning setup of the SLES installation this disk should be partitioned into a 4 GB <literal>swap</literal>, a 130 GB partition (or a dedicated virtual disk) for <filename>/var/spacewalk/</filename> (XFS), and an additional 50 GB partition (or a dedicated virtual disk) for <filename>/var/lib/pgsql/</filename> (XFS). The remaining storage space will be used by the operating system for the root partition. Select <guimenu>Finish</guimenu> to begin the installation.</para>
</listitem>
</orderedlist>
<simpara>Installation of &sls;
will begin.
For more information on completing an installation of &sls;
, see <link xl:href="https://www.suse.com/documentation/sles-12/book_quickstarts/data/sec_sle_installquick.html">https://www.suse.com/documentation/sles-12/book_quickstarts/data/sec_sle_installquick.html</link>.</simpara>
</section>
<section xml:id="_quickstart3.sec.suma.installation.sles.sumaext"><title>Selecting the &susemgr; Extension</title><simpara>During the &sls;
installation you will be presented with the <guimenu>Extension and Module Selection</guimenu>
 (see <xref linkend="_fig.suma.installation.sles12.sumaext"/>).  Select the &susemgr;
 Extension and then complete the &sls;
 installation.</simpara>
<figure>
<title>Selecting &susemgr;Extension <anchor xml:id="_fig.suma.installation.sles12.sumaext"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="images/manager-extension.png" width="80%"/>
</imageobject>
<textobject><phrase>manager extension</phrase></textobject>
</mediaobject>
</figure>
</section>
</chapter>
<chapter xml:id="_suma.setup.with.yast"><title>SUSE Manager Setup</title><section xml:id="_suma.setup.with.yast.setup"><title>Included Topics</title><simpara>This section covers setup procedures of &susemgr;
.
You will perform the following procedures:</simpara>
<itemizedlist>
<listitem>
<para>Initiate &susemgr; setup with the GUI tool.</para>
</listitem>
<listitem>
<para>Create the <literal role="systemitem">admin</literal> user with the &susemgr;{webui} .</para>
</listitem>
<listitem>
<para>Synchronize with &scc; (SCC) to obtain a list of product channels available for your clients.</para>
</listitem>
<listitem>
<para>Add the &sle; channel</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_suma.setup.with.yast.sumasetup"><title>&susemgr; Setup via GUI</title><simpara>This section will guide you through &susemgr;
setup procedures.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: &susemgr;Setup</title>
<listitem>
<para>Log in to the &susemgr; server desktop and start the &yast;{susemgr} Setup module: Either click <menuchoice><guimenu>Applications</guimenu> <guisubmenu>System Tools</guisubmenu> <guimenuitem>YaST</guimenuitem></menuchoice> and enter <guimenu>SUSE Manager Setup</guimenu> , or open a terminal and as &rootuser; type <command>yast2 susemanager_setup</command> to initiate the setup.</para>
</listitem>
<listitem>
<para>On the initial screen select <guimenu>Setup SUSE Manager from scratch</guimenu> and select <guimenu>Next</guimenu> to continue.</para>
</listitem>
<listitem>
<para>Enter an email address which will receive notifications about the server&#8217;s status. The number of emails sent from &susemgr; can be extensive, therefore notifications via email may be disabled from the &webui; after setup if desired. If wanted, enable advertising &susemgr; via SLP; this can simplify client setup.</para>
<simpara>Select <guimenu>Next</guimenu>
to continue.</simpara>
</listitem>
<listitem>
<para>Enter your certificate information and a password. The password should be stored in a secure location. <emphasis>Without this password it will not be possible to set up a &susemgr; Proxy Server.</emphasis> Select <guimenu>Next</guimenu> to continue.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/quickstart-mgr-setup4.png" width="80%"/>
</imageobject>
<textobject><phrase>quickstart mgr setup4</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>In <guimenu>Database Settings</guimenu> , enter a database user and password. This password should be stored in a secure location. Select <guimenu>Next</guimenu> to continue.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/quickstart-mgr-setup5.png" width="80%"/>
</imageobject>
<textobject><phrase>quickstart mgr setup5</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>&susemgr; requires that you connect to &scc; for software, updates and patches. You will not be able to synchronize or provide channels to your clients without this information. Enter your &scc;<literal role="systemitem">Organization Credentials</literal> . You may open <link xl:href="https://scc.suse.com/login">https://scc.suse.com/login</link> to register or access to your organization credentials. Select <literal role="systemitem">Next</literal> to continue.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/quickstart-mgr-setup6.png" width="80%"/>
</imageobject>
<textobject><phrase>quickstart mgr setup6</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Select <guimenu>Yes</guimenu> to run setup when prompted. When completed select <literal role="systemitem">Next</literal> to continue.</para>
<simpara>You will be presented with your new &susemgr;{webui}
address.</simpara>
<simpara>Select <guimenu>Finish</guimenu>
to complete &susemgr;
setup.</simpara>
</listitem>
</orderedlist>
<simpara>In <xref linkend="_suma.setup.with.yast.admin"/>, you will create the administrator&#8217;s account and synchronize with &scc;
.</simpara>
</section>
<section xml:id="_suma.setup.with.yast.admin"><title>Creating the Organization with the Administrator&#8217;s Account</title><simpara>This section will walk you through creating the organization with the administrator&#8217;s account for your &susemgr;
Server.
The administrator&#8217;s account is the highest authority account within &susemgr;
and therefore administrator account access information should be stored in a secure location.
It is recommended that an administrator creates low level user accounts designated for administration of each organization or group under the administrator&#8217;s account for security.</simpara>
<orderedlist xml:id="_suma.setup.admin.account" numeration="arabic">
<title>Procedure: Setting up the Administrator&#8217;s Account</title>
<listitem>
<para>To begin open your browser and direct it to your &susemgr; Server URL which was provided to you after completing setup.</para>
<simpara>Enter the <guimenu>Organization Name</guimenu>
, then your <guimenu>Desired Login</guimenu>
name and <guimenu>Desired Password</guimenu>
.
Fill in the Account Information fields including an email for system notifications.
Select <guimenu>Create Organization</guimenu>
to finish creating your administration account.</simpara>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/quickstart-mgr-setup-admin1.png" width="80%"/>
</imageobject>
<textobject><phrase>quickstart mgr setup admin1</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Congratulations! You should now be presented with the &susemgr;
Front Page. <xref linkend="_quickstart.first.channel.sync"/> will help prepare the server for connecting your first client.</simpara>
</section>
<section xml:id="_quickstart.first.channel.sync"><title>Synchronizing with &scc; (SCC)</title><simpara>&scc;
(SCC) maintains a collection of repositories which contain packages, software and updates for all supported client systems.
These repositories are organized into channels each of which provide software specific to a distribution, release and architecture.
You must synchronize your &susemgr;
Server with SCC to add channels for your client systems.
After synchronizing with SCC your clients are able to receive updates or be organized into groups to be assigned to a specific software channel.
This section covers synchronizing with SCC from the &webui;
and adding your first client channels.</simpara>
<orderedlist xml:id="_proc.quickstart.first.channel.sync" numeration="arabic">
<title>Procedure: Synchronizing with &scc;</title>
<listitem>
<para>From the &susemgr;{webui} start page select <menuchoice><guimenu>Admin</guimenu> <guimenuitem>Setup Wizard</guimenuitem></menuchoice> .</para>
</listitem>
<listitem>
<para>From the <guimenu>Setup Wizard</guimenu> page select the <guimenu>SUSE Products</guimenu> tab. Wait a moment for the products list to populate. You will see a list of repositories provided from SCC. Each of these repositories represents a single software source known as a <literal role="systemitem">Base Channel</literal> within &susemgr; . You can also see the architecture, channels, and status information from this page. For more information, see <xref linkend="_vle.webui.admin.wizard.products"/>.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_suse_products.png" width="80%"/>
</imageobject>
<textobject><phrase>admin suse products</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>As you are adding a &sle; client based on the <literal role="systemitem">x86_64</literal> architecture, scroll down the page and select the check box for this channel now.</para>
<itemizedlist>
<listitem>
<para>Add channels to &susemgr; by selecting the check box to the left of each channel. Click the arrow symbol left to the description to unfold the extension and module list of a product.</para>
</listitem>
<listitem>
<para>Then start the synchronization by clicking the <command>Add Products</command> button located at the upper right area of the page.</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<simpara>After adding your first channel &susemgr;
will schedule the channel to be copied and begin mirroring it.
This can take a long time as &susemgr;
must copy all software sources from the &suse;
vendor repositories located at &scc;
to local <replaceable>/var/spacewalk/</replaceable> directory of your server.</simpara>
<tip>
<title>PostgreSQL and Transparant Huge Pages</title>
<simpara>In some environments, Transparent Huge Pages provided by the kernel may slow down PostgreSQL workloads significantly.</simpara>
<simpara>To disable transparant huge pages set the <literal>transparent_hugepage</literal> kernel parameter to <literal>never</literal>.
This has to be changed in <filename>/etc/default/grub</filename>
 and added to the line <literal>GRUB_CMDLINE_LINUX_DEFAULT</literal>, for example:</simpara>
<screen>GRUB_CMDLINE_LINUX_DEFAULT="resume=/dev/sda1 splash=silent quiet showopts elevator=noop transparent_hugepage=never"</screen>
<simpara>To write the new configuration run <command>grub2-mkconfig -o
    /boot/grub2/grub.cfg</command>.
To update the grub2 during boot run <command>grub2-install /dev/sda</command>.</simpara>
</tip>
<simpara>Monitor channel synchronization process in real-time by viewing channel log files located in the directory <filename>/var/log/rhn/reposync</filename>
:</simpara>
<screen>{prompt.root}cd /var/log/rhn/reposync{prompt.root}tail -f`CHANNEL_NAME`.log</screen>
<simpara>After your channel sync has completed proceed to <xref linkend="_preparing.and.registering.clients"/>.</simpara>
</section>
</chapter>
<chapter xml:id="_preparing.and.registering.clients"><title>Registering Clients</title><section xml:id="_introduction"><title>Introduction</title><simpara>All releases previous to and including &susemgr;
 2.1 were implemented and shipped with a client management framework, which today is still fully supported.
Since version 3, &susemgr;
includes a complete Salt solution in addition to the <quote>traditional</quote>
 framework.
Salt is an end-to-end data-center automation tool which may also be used outside the scope of &susemgr;
 to introduce reactive, real-time orchestration, and configuration management.
Managed systems may coexist using both methods, allowing you to become comfortable using Salt while keeping existing deployments intact.</simpara>
</section>
<section xml:id="_create.act.keys"><title>Creating Your Keys</title><simpara>The following procedure will guide you through creating the activation keys for your test channels.
Activation keys can be used with both Salt and traditional clients.</simpara>
<simpara>Activation keys define the number of software entitlements, channels, and groups a client system is allowed to subscribe to.
This information is passed on to all systems registered with a key.
Each activation key is bound to the organization for which it has been created.</simpara>
<orderedlist xml:id="_create.activation.keys" numeration="arabic">
<title>Procedure: Creating Activation Keys</title>
<listitem>
<para>Log in to the &susemgr;{webui} as administrator.</para>
</listitem>
<listitem xml:id="_create.activation.keys.ak">
<para>Switch to <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Activation Keys</guimenuitem></menuchoice> .</para>
</listitem>
<listitem>
<para>Click the <guimenu>Create Key</guimenu> link at the upper right corner.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_create_activation_key.png" width="80%"/>
</imageobject>
<textobject><phrase>systems create activation key</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Enter a <guimenu>Description</guimenu> to identify the generated activation key.</para>
</listitem>
<listitem>
<para>Enter a human readable <guimenu>Key</guimenu> string value such as <literal>SLES{sles-version} -{sp-version}</literal> to represent the distribution and service pack associated with the key.</para>
<warning>
<title>Allowed Characters</title>
<simpara>For all &suse;
Products do not use commas within the key string.
Red Hat Products require commas.
For more information, see <xref linkend="_ref.webui.systems.activ_keys"/>.</simpara>
</warning>
</listitem>
<listitem>
<para>Enter <literal>1</literal> in the <guimenu>Usage</guimenu> field. This allows one client to register using this key and uses one of your subscription entitlements.</para>
</listitem>
<listitem>
<para>Select the &sle; channel you added during <xref linkend="_proc.quickstart.first.channel.sync"/> from the <guimenu>Base Channels</guimenu> drop down.</para>
</listitem>
<listitem>
<para>Leave the <guimenu>Contact Method</guimenu> at default.</para>
</listitem>
<listitem>
<para>Leave <guimenu>Universal Default</guimenu> unchecked. Click <guimenu>Create Activation Key</guimenu> to finish creating the key for the first channel.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_create.tools.repository"><title>Creating the &susemgr; Tools Repository</title><simpara>In this section you will create a tools repository on the &susemgr;
Server for providing client tools.
The client tools repository contains packages for installing Salt on minions as well as the required packages for registering traditional clients during the bootstrapping procedure.
These packages will be installed from the newly generated repository during the registration process.
In the following procedure you will create the &sle;tools repository.</simpara>
<important>
<title>Creating a Tools Repository when an SCC Channel has not been Synced</title>
<simpara>Before following the procedure to create the tools repository make sure the &suse;
vendor channel you will be using with your client has been completely synced.
You can check this by running <command>tail -f
    /var/log/rhn/reposync/[replaceable]</command>CHANNEL_NAME<literal>.log</literal> as &rootuser;
.
For example  (replace <replaceable>version</replaceable> with the actual version string):</simpara>
<screen># tail -f /var/log/rhn/reposync/sles`version`-pool-x86_64.log</screen>
<simpara>When finished you will see:</simpara>
<screen>2017/12/12 15:20:32 +02:00 Importing packages started.
2017/12/12 15:22:02 +02:00 1.07 %
...
2017/12/12 15:34:25 +02:00 86.01 %
2017/12/12 15:35:49 +02:00 Importing packages finished.
2017/12/12 15:35:49 +02:00 Linking packages to channel.
...
2017/12/12 15:35:59 +02:00 Sync completed.</screen>
</important>
<orderedlist numeration="arabic">
<title>Procedure: Generating the Tools Repository for &sle;</title>
<listitem>
<para>Open a terminal on the server as &rootuser; and enter the following command to list available bootstrap repositories:</para>
<screen># ``mgr-create-bootstrap-repo -l`` 1. SLE-`version`-x86_64</screen>
</listitem>
<listitem>
<para>Then invoke the same command using the listed repository as the product label to actually create the bootstrap repository:</para>
<screen># ``mgr-create-bootstrap-repo -c SLE-version-x86_64``</screen>
</listitem>
<listitem>
<para>&susemgr; will create and add the client tools to the newly created <filename>repositories</filename> directory located at <filename>/srv/www/htdocs/pub/repositories/</filename> .</para>
</listitem>
</orderedlist>
<simpara>This repository is suitable for both Server and Desktop of &sle;
.</simpara>
</section>
<section xml:id="_registering.clients.traditional"><title>Registering <quote>Traditional</quote> Clients</title><section xml:id="_generate.bootstrap.script"><title>Generating a Bootstrap Script</title><simpara>This section goes over generating a template bootstrap script which will be copied and modified for use with <quote>traditional</quote>
 clients.</simpara>
<simpara>Traditional clients register with &susemgr;
via a bootstrap script executed on the client which deploys all necessary packages to it.
The bootstrap script contains parameters which assigns a client system to its base channel.
Two of these important parameters are:</simpara>
<itemizedlist>
<listitem>
<para>Activation Keys</para>
</listitem>
<listitem>
<para>GNU Privacy Guard (GPG) Keys</para>
</listitem>
</itemizedlist>
<note>
<title>Using <option>--traditional</option></title>
<simpara>As of &susemgr;
 3.1 the <option>--traditional</option> option must be used if creating a bootstrap script from the command line via the <command>mgr-bootstrap</command> command for traditional clients.
Bootstrap scripts are now by default used for Salt minions.</simpara>
</note>
<note>
<title>Bootstrap Scripting Best Practices</title>
<simpara>It is possible to use various methods to register clients for use with &susemgr;
in mass using bootstrap.
Using batch scripts for mass registration of both VM and Bare Metal machines is a possibility.
Some of these methods will be covered in the <emphasis><phrase role="ref">Best Practices
     Guide</phrase></emphasis>
 and will be added as examples at a later time.</simpara>
</note>
<simpara>The following procedure will guide you through generating a bootstrap template script.</simpara>
<orderedlist xml:id="_create.boot.script" numeration="arabic">
<title>Procedure: Creating a Bootstrap Script</title>
<listitem>
<para>On the &susemgr;{webui} , switch to <menuchoice><guimenu>Admin</guimenu> <guisubmenu>Manager Configuration</guisubmenu> <guimenuitem>Bootstrap Script</guimenuitem></menuchoice> . For more information, see <xref linkend="_s3_sattools_config_bootstrap"/>.</para>
</listitem>
<listitem>
<para>Uncheck <guimenu>Bootstrap using Salt</guimenu> . Otherwise leave the default settings and click the <guimenu>Update</guimenu> button.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/mgr_configuration_bootstrap_trad.png" width="80%"/>
</imageobject>
<textobject><phrase>mgr configuration bootstrap trad</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>+
.Using SSL
WARNING: Unchecking <guimenu>Enable SSL</guimenu>
 in the &webui;
 or setting <literal>USING_SSL</literal> to <literal>0</literal> in the bootstrap script is not recommended.
If you disable SSL nevertheless you must manage CA certificates yourself to be able to run the registration process successfully.</simpara>
<simpara>+</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>A template bootstrap script is generated and stored on the server&#8217;s file system in the <filename>/srv/www/htdocs/pub/bootstrap</filename> directory.</para>
<screen># ``cd /srv/www/htdocs/pub/bootstrap``
# ``ls`` bootstrap.sh                  client_config_update.py
client-config-overrides.txt   sm-client-tools.rpm</screen>
<simpara>The bootstrap script is also available at <filename><link xl:href="https://example.com/pub/bootstrap/bootstrap.sh">https://example.com/pub/bootstrap/bootstrap.sh</link></filename>
.</simpara>
</listitem>
</orderedlist>
<simpara><xref linkend="_modify.bootstrap.script"/> will cover copying and modifying your bootstrap template for use with each client.</simpara>
</section>
<section xml:id="_modify.bootstrap.script"><title>Modifying the Bootstrap Script</title><simpara>In this section you will copy and modify the template bootstrap script you created from <xref linkend="_generate.bootstrap.script"/>.</simpara>
<simpara>The minimal requirement when modifying a bootstrap script for use with &susemgr;
is inclusion of an activation key.
Depending on your organizations security requirements it is strongly recommended to include one or more (GPG) keys (for example, your organization key, and package signing keys). For the purposes of this guide you will be registering with the activation keys created in the previous section.</simpara>
<orderedlist xml:id="_mod.bootstrap.script" numeration="arabic">
<title>Procedure: Modifying the Bootstrap Script</title>
<listitem>
<para>Log in as &rootuser; on the command line on your &susemgr; server.</para>
</listitem>
<listitem>
<para>Navigate to the bootstrap directory with:</para>
<screen># ``cd /srv/www/htdocs/pub/bootstrap/``</screen>
</listitem>
<listitem>
<para>Create and rename two copies of the template bootstrap script for use with each of your clients.</para>
<screen># ``cp bootstrap.sh bootstrap-sles11.sh``
# ``cp bootstrap.sh bootstrap-sles12.sh``</screen>
</listitem>
<listitem>
<para>Open <filename>sles12.sh</filename> for modification. Scroll down and modify both lines marked in green. You must comment out <literal>exit 1</literal> with a hash mark (<literal>\#</literal>) to activate the script and then enter the name of the key for this script in the <literal>ACTIVATION_KEYS=</literal> field as follows:</para>
<screen>echo "Enable this script: comment (with #'s) this block (or, at least just"
echo "the exit below)"
echo
#exit 1

# can be edited, but probably correct (unless created during initial install):
# NOTE: ACTIVATION_KEYS *must* be used to bootstrap a client machine.
ACTIVATION_KEYS=1-sles12
ORG_GPG_KEY=</screen>
</listitem>
<listitem>
<para>When you have finished your modifications save the file and repeat this procedure for the second bootstrap script. Then proceed to <xref linkend="_connect.first.client"/>.</para>
</listitem>
</orderedlist>
<note>
<title>Finding Your Keys</title>
<simpara>To find key names you have created: In the &webui;
, click <menuchoice><guimenu>Home</guimenu> <guisubmenu>Overview</guisubmenu> <guisubmenu>Manage
     Activation keys</guisubmenu> <guimenuitem>Key Field</guimenuitem></menuchoice>
.
All keys created for channels are listed here.
You must enter the full name of the key you wish to use in the bootstrap script exactly as presented in the key field.</simpara>
</note>
</section>
<section xml:id="_connect.first.client"><title>Connecting Your First Client</title><simpara>This section covers connecting your clients to &susemgr;
with the modified bootstrap script.</simpara>
<orderedlist xml:id="_run.bootstrap.script" numeration="arabic">
<title>Procedure: Running the Bootstrap Script</title>
<listitem>
<para>On your &susemgr; Server as &rootuser; navigate to the following directory:</para>
<screen># ``cd /srv/www/htdocs/pub/bootstrap/``</screen>
</listitem>
<listitem>
<para>Run the following command to execute the bootstrap script on the client:</para>
<screen># ``cat MODIFIED-SCRIPT.SH \
  | ssh root@example.com /bin/bash``</screen>
</listitem>
<listitem>
<para>The script will execute and proceed to download the required dependencies located in the repositories directory you created earlier. Once the script has finished running, log in to the &webui; and click <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Overview</guimenuitem></menuchoice> to see your new client listed.</para>
</listitem>
</orderedlist>
<simpara>This concludes the bootstrap section of this guide. <xref linkend="_preparing.and.registering.clients.salt"/> will go over registering Salt minions for use with &susemgr;
.</simpara>
</section>
</section>
<section xml:id="_preparing.and.registering.clients.salt"><title>Registering Salt Clients</title><simpara>There are currently three methods for registering Salt minions.
The following section describes the first method and uses a bootstrap repository.
The second method is to create a bootstrap script using <command>mgr-bootstrap</command>.
Bootstrapping Salt minions with <command>mgr-bootstrap</command> is performed in the same manner as bootstrapping traditional clients; for more information, see <xref linkend="_registering.clients.traditional"/>.
The third method is performed from the &susemgr;{webui}
; find this method located in <xref linkend="_ref.webui.systems.bootstrapping"/>.</simpara>
<important>
<title>Deprecation Warning</title>
<simpara>The <command>mgr-bootstrap --salt</command> option will be deprecated as of SUSE Manager 3.1.
To bootstrap a Salt minion call <command>mgr-bootstrap</command> from the command line as you would for a traditional system.</simpara>
</important>
<simpara>The following section assumes you have created a SUSE Manager tools repository.
You can review creating a tools repository in <xref linkend="_create.tools.repository"/>.</simpara>
<warning>
<title>Ensure the Salt Master is Reachable During Bootstrap</title>
<simpara>The Salt master and its proxy should always be reachable via both IP address and the FQDN.
In the following rare scenario:</simpara>
<itemizedlist>
<listitem>
<para>The Salt master (SUSE Manager) is in some DNS.</para>
</listitem>
<listitem>
<para>Your Minions are in a different subnet bound to an alternate DNS and the Salt master record is absent.</para>
</listitem>
<listitem>
<para>The Salt master cannot know that the minion is not utilizing the same DNS record. The the Salt master nevertheless sends the FQDN of itself to the minion expecting it to join.</para>
</listitem>
<listitem>
<para>The minion looks for a different DNS, one where the master record does not exist therefore bootstrap fails.</para>
</listitem>
</itemizedlist>
</warning>
<simpara>Once you have fully synced a base channel from the &webui;
for clients to obtain software sources from, for example: <literal>SLES12-SP3-Pool_for_x86_64</literal> perform the following procedure to register a Salt minion.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Registering Salt Minions</title>
<listitem>
<para>On your minion as &rootuser; enter the following command:</para>
<screen># zypper ar http://`FQDN.SUSE.Manager.com`/pub/repositories/sle/12/3/bootstrap/ \
   sles12-sp3</screen>
<note>
<simpara>Do not use <literal>HTTPS</literal>.
Use <literal>HTTP</literal> instead to avoid errors.</simpara>
</note>
</listitem>
<listitem>
<para>After adding the repository containing the necessary Salt packages execute:</para>
<screen># zypper in salt-minion</screen>
</listitem>
<listitem>
<para>Modify the minion configuration file to point to the fully qualified domain name (<replaceable>FQDN</replaceable>) of the &susemgr; server (master):</para>
<screen># vi /etc/salt/minion</screen>
<simpara>Find and change the line:</simpara>
<screen>master: salt</screen>
<simpara>to:</simpara>
<screen>master:`FQDN.SUSE.Manager.com`</screen>
</listitem>
<listitem>
<para>Restart the Salt minion with:</para>
<screen># systemctl restart salt-minion</screen>
<simpara>or on non-systemd OS:</simpara>
<screen># rcsalt-minion restart</screen>
</listitem>
</orderedlist>
<simpara>Your newly registered minion should now show up within the &webui;
under <menuchoice><guimenu>Salt</guimenu> <guimenuitem>Onboarding</guimenuitem></menuchoice>
.
Accept its key to begin management.</simpara>
</section>
</chapter>
<chapter xml:id="_salt.gs.guide.introduction"><title>Getting Started with Salt</title><section xml:id="_salt.gs.guide.intro"><title>Introduction</title><simpara>This chapter provides an introduction to using the new Salt features added in &susemgr;
 3.
This chapter assumes you have completed all former sections within the &mgrgetstart;
.
You should have a running &susemgr;
server and at least one on-boarded Salt minion to complete the sections of this chapter.
If you find yourself stuck at any point refer to the <emphasis><phrase role="ref">SaltStack Get
    Started</phrase></emphasis>
 tutorial located at <link xl:href="https://docs.saltstack.com/en/getstarted/fundamentals/index.html">https://docs.saltstack.com/en/getstarted/fundamentals/index.html</link>.</simpara>
<tip>
<title>Use More than One Minion</title>
<simpara>Connecting two or more minions during your testing is considered best practice.
This will allow you to target individual minions using Salt and experiment with the power of its targeting features.</simpara>
</tip>
<simpara>This guide does not attempt to cover all that Salt has to offer.
This guide is a primer for using Salt with &susemgr;
.
For comprehensive Salt documentation, see <link xl:href="https://docs.saltstack.com/en/latest/contents.html">https://docs.saltstack.com/en/latest/contents.html</link>.</simpara>
<simpara>The current version of Salt in &susemgr;
is <literal>2016.3.x</literal>.
For additional covering the major differences between Salt version <literal>2015.11.x</literal> and <literal>2016.3.x</literal> review the following release notes: <link xl:href="https://docs.saltstack.com/en/latest/topics/releases/2015.8.0.htmlhttps://docs.saltstack.com/en/latest/topics/releases/2016.3.0.html">https://docs.saltstack.com/en/latest/topics/releases/2015.8.0.htmlhttps://docs.saltstack.com/en/latest/topics/releases/2016.3.0.html</link></simpara>
</section>
<section xml:id="_salt.gs.guide.testing.first.minion"><title>Understanding Salt Calls</title><variablelist>
<varlistentry>
<term>Salt Calls</term>
<listitem>
<simpara>Salt calls are defined by three main properties:</simpara>
<screen># salt '`target`'`function`[`arguments`]</screen>
<variablelist>
<varlistentry>
<term>Target</term>
<listitem>
<simpara>Use the second property in a Salt call to define a target machine.
Specify the minion or group of minions you would like to run a function on.</simpara>
<variablelist>
<varlistentry>
<term>General Targeting</term>
<listitem>
<simpara>List available grains on all minions:</simpara>
<screen># salt '*' grains.ls</screen>
<simpara>Ping a specific minion:</simpara>
<screen># salt 'web1.example.com' test.ping</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Glob Targeting</term>
<listitem>
<simpara>Ping all minions using a domain:</simpara>
<screen># salt '*example.com' test.ping</screen>
<simpara>Display the OS name of all minions with the label <literal>webserver</literal>:</simpara>
<screen># salt 'webserver*' grains.item oscodename</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>List Targeting</term>
<listitem>
<screen># salt -L 'webserver.example.com,db.example.com' test.ping</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Regular Expression Targeting</term>
<listitem>
<simpara>You may use PCRE-compliant regular expressions:</simpara>
<screen># salt -E '(?!web)' test.ping</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>IP Address Targeting</term>
<listitem>
<simpara>List minion IP addresses:</simpara>
<screen># salt '*' network.ip_addrs</screen>
<simpara>Ping a specific minion IP address:</simpara>
<screen># salt -S '172.31.60.74' test.ping</screen>
<simpara>Ping all minions on a subnet:</simpara>
<screen># salt -S 172.31.0.0/16 test.ping</screen>
<tip>
<title>Lookup a Subnet Using the <command>ip</command> Command</title>
<simpara>You can use the <command>ip</command> command to find the subnet mask in the format of <literal>192.168.1.1/24</literal>:</simpara>
</tip>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
<screen># ip -o -f inet addr show | awk '/scope global/ {print $4}'</screen>
<simpara>+</simpara>
<variablelist>
<varlistentry>
<term>Function</term>
<listitem>
<simpara>Once you have specified a target, provide the function you would like to call.
Functions also accept arguments.
These are space-delimited.
For example:</simpara>
<screen>salt '*' cmd.run 'echo "Hello: $FIRST_NAME"' env='{FIRST_NAME: "John"}'</screen>
<variablelist>
<varlistentry>
<term>Locating Additional Minion Functions</term>
<listitem>
<simpara>Find more functions which can be called on minions by running:</simpara>
<screen>salt '*' sys.doc</screen>
<simpara>A full list of callable functions are located here: <link xl:href="https://docs.saltstack.com/en/2015.8/ref/modules/all/index.html">https://docs.saltstack.com/en/2015.8/ref/modules/all/index.html</link></simpara>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
<varlistentry>
<term>Arguments</term>
<listitem>
<simpara>Provides the extra data needed by a function you are calling.
The command <literal>pkg.install</literal> requires an argument specifying a package to install. &yast;
has been selected for installation.
For example:</simpara>
<screen># salt '*' pkg.install yast2</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_salt.gs.guide.term.overview"><title>Common Salt Terminology</title><variablelist>
<varlistentry>
<term>Grains</term>
<listitem>
<simpara>Grains provide information about the hardware of a minion.
For example, the operating system, IP addresses, network interfaces, memory, etc.
When running a Salt command from keep in mind any modules and functions called are run locally from the system being called.
Salt modules are stored on minions and master within the following directory:</simpara>
<screen>/usr/lib/python2.7/site-packages/salt/</screen>
<simpara>List all available grains with the <literal>grains.ls</literal> function:</simpara>
<screen># salt '*' grains.ls</screen>
<simpara>List collected grain system data by using the <literal>grains.items</literal> function:</simpara>
<screen># salt '*' grains.items</screen>
<simpara>For more information on grains, see <link xl:href="https://docs.saltstack.com/en/latest/topics/grains/">https://docs.saltstack.com/en/latest/topics/grains/</link>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>States</term>
<listitem>
<simpara>States are templates which place systems into a known configuration, for example which applications and services are installed and running on those systems.
States are a way for you to describe what each of your systems should look like.
Once written, states are applied to target systems automating the process of managing and maintaining a large numbers of systems into a known state.
For more information on states, see <link xl:href="https://docs.saltstack.com/en/latest/topics/tutorials/starting_states.html">https://docs.saltstack.com/en/latest/topics/tutorials/starting_states.html</link>.</simpara>
<warning>
<title>Upating Salt</title>
<simpara>Do not update <package>salt</package>
 itself using Salt states.
First update all other system packages using Salt states then update <package>salt</package>
 as a separate stand-alone step from the &susemgr;{webui}
.</simpara>
</warning>
</listitem>
</varlistentry>
<varlistentry>
<term>Pillar</term>
<listitem>
<simpara>Pillars unlike grains are created on the master.
Pillar files contain information about a minion or group of minions.
Pillars allow you to send confidential information to a targeted minion or group of minions.
Pillars are useful for sensitive data, configuration of minions, variables, and any arbitrary data which should be defined.
For more information on pillars, see <link xl:href="https://docs.saltstack.com/en/latest/topics/tutorials/pillar.html">https://docs.saltstack.com/en/latest/topics/tutorials/pillar.html</link>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Beacons</term>
<listitem>
<simpara>Beacons allow an admin to use the event system in Salt to monitor non-Salt processes.
Minions may use beacons to hook into many types of system proceses for constant monitoring.
Once a targeted monitored activity occurs an event is sent on the Salt event bus that may be used to trigger a reactor.</simpara>
<important>
<title>Enabling Beacons</title>
<simpara>To work with beacons on Salt minions the package python-pyinotify must be installed for SUSE systems.
For RES systems install python-inotify.
This package is not installed automatically during the salt minion package installation.</simpara>
</important>
<note>
<title>Peer Communication with salt-broker</title>
<simpara>The salt-broker acts like a switch and not like a hub, therefore Peer communication will only work for minions behind the same broker/Proxy.
For more information on Salt and peer communication see: <link xl:href="https://docs.saltstack.com/en/latest/ref/peer.html">https://docs.saltstack.com/en/latest/ref/peer.html</link></simpara>
</note>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_salt.gs.guide.useful.salt.commands"><title>Useful Salt Commands</title><simpara>The following list provides several useful Salt commands.</simpara>
<variablelist>
<varlistentry>
<term><command>salt-run</command></term>
<listitem>
<simpara>Print a list of all minions that are up:</simpara>
<screen># salt-run manage.up</screen>
<simpara>Print a list of all minions that are down:</simpara>
<screen># salt-run manage.down</screen>
<simpara>Print a list with the current status of all Salt minions:</simpara>
<screen># salt-run manage.status</screen>
<simpara>Check the version of Salt running on the master and active minions:</simpara>
<screen># salt-run manage.versions</screen>
</listitem>
</varlistentry>
<varlistentry>
<term><command>salt-cp</command></term>
<listitem>
<simpara>Copy a file to a minion or set of minions.</simpara>
<screen># salt-cp '*' foo.conf /root</screen>
<simpara>For more information, see <link xl:href="https://docs.saltstack.com/en/latest/ref/cli/salt-cp.html">https://docs.saltstack.com/en/latest/ref/cli/salt-cp.html</link>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>salt-key -l</term>
<listitem>
<simpara>List public keys:</simpara>
<screen># salt-key -l</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>salt-key -A</term>
<listitem>
<simpara>Accept all pending keys:</simpara>
<screen># salt-key -A</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_salt.gs.guide.salt.file.locations"><title>Salt File Locations and Structure</title><simpara>The following screen describes Salt file structures and their locations used by the &susemgr;
server.
These files are listed in <filename>/etc/salt/master.d/susemanager.conf</filename>
:</simpara>
<screen># Configure different file roots

file_roots:
  base:
    - /usr/share/susemanager/salt    #Should not be touched by a user
    - /srv/susemanager/salt          #Should not be touched by a user
    - /srv/salt                      #Your custom states go here

# Configure different pillar roots

pillar_roots:
  base:
    - /usr/share/susemanager/pillar  #Should not be touched by a user
    - /srv/pillar                    #Custom pillars go here

# Extension modules path

extension_modules: /usr/share/susemanager/modules

# Master top configuration

master_tops:
  mgr_master_tops: True</screen>
<simpara>The following tips should be kept in mind when working with <filename>/etc/salt/master.d/susemanager.conf</filename>
.</simpara>
<itemizedlist>
<listitem>
<para>Files listed are searched in the order they appear.</para>
</listitem>
<listitem>
<para>The first file found is called.</para>
</listitem>
</itemizedlist>
<section xml:id="_salt.gs.guide.salt.file.locations.file.roots"><title>file_roots</title><simpara>&susemgr;
as the Salt master reads its state data from three specific file root directories.</simpara>
<variablelist>
<varlistentry>
<term><filename>/usr/share/susemanager/salt</filename></term>
<listitem>
<simpara>This directory is created by &susemgr;
and its content generated by the <literal>/usr/share/susemanager/modules/tops/mgr_master_tops.py</literal> python module:</simpara>
<simpara>It is shipped and updated together with &susemgr;
and includes certificate setup and common state logic that will be applied to packages and channels.</simpara>
<warning>
<title>Non-editable Directory</title>
<simpara>You should not edit or add custom Salt data to this directory.</simpara>
</warning>
</listitem>
</varlistentry>
<varlistentry>
<term><filename>/srv/susemanager/salt</filename></term>
<listitem>
<simpara>This directory is created by &susemgr;
and contains assigned channels and packages for minions, groups, and organizations.
These files will be overwritten and regenerated.
A good analogy for this directory would be the &susemgr;
database translated into Salt directives.</simpara>
<warning>
<title>Non-editable Directory</title>
<simpara>You should not edit or add custom Salt data to this directory.</simpara>
</warning>
</listitem>
</varlistentry>
<varlistentry>
<term><filename>/srv/salt</filename></term>
<listitem>
<simpara>The directory <filename>/srv/salt</filename>
is for your custom state data, salt modules etc. &susemgr;
does not touch or do anything with this directory.
However the state data placed here affects the Highstate of minions and is merged with the result generated by &susemgr;
.</simpara>
<tip>
<title>Editable Directory</title>
<simpara>Place your custom Salt data here.</simpara>
</tip>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_salt.gs.guide.salt.file.locations.pillar.roots"><title>pillar_roots</title><simpara>&susemgr;
as the Salt master reads its pillar data from two specific pillar root directories.</simpara>
<variablelist>
<varlistentry>
<term><filename>/usr/share/susemanager/pillar</filename></term>
<listitem>
<simpara>This directory is generated by &susemgr;
.
It is shipped and updated together with &susemgr;
.</simpara>
<warning>
<title>Non-editable Directory</title>
<simpara>You should not edit or add custom Salt data to this directory.</simpara>
</warning>
</listitem>
</varlistentry>
<varlistentry>
<term><filename>/srv/pillar</filename></term>
<listitem>
<simpara>&susemgr;
by default does not touch or do anything with this directory.
However the custom pillar data placed here is merged with the pillar result created by &susemgr;
.</simpara>
<tip>
<title>Editable Directory</title>
<simpara>Place your custom Salt pillar data here.</simpara>
</tip>
</listitem>
</varlistentry>
</variablelist>
</section>
</section>
<section xml:id="_install_the_suse_manager_locale_formula"><title>Install the SUSE Manager Locale Formula</title><simpara>The following section provides guidance on installing and using SUSE provided Salt formulas.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Installing the Locale Formula</title>
<listitem>
<para>Install the locale formula with:</para>
<screen>zypper install locale-formula</screen>
<note>
<simpara>This installs the package contents to <filename>/usr/share/susemanager/formulas/{metadata,states}</filename></simpara>
</note>
</listitem>
<listitem>
<para>After installing the RPM, log in to the &susemgr;{webui} .</para>
</listitem>
<listitem>
<para>Browse to the <guimenu>System Details</guimenu> page of any minion you would like to apply the formula to.</para>
</listitem>
<listitem>
<para>On the <guimenu>System Details</guimenu> page of the minion you will see a new <guimenu>Formulas</guimenu> tab. Select it to view a list of installed formulas.</para>
</listitem>
<listitem>
<para>In the <guimenu>Formulas</guimenu> listing select <guimenu>Locale</guimenu> and click <guimenu>Save</guimenu> .</para>
</listitem>
<listitem>
<para>A new tab will appear next to the <guimenu>Formula</guimenu> subtab. Select the new <guimenu>Locale</guimenu> tab.</para>
</listitem>
<listitem>
<para>The <guimenu>Locale</guimenu> tab contains options for setting the language, keyboard layout, timezone, and whether hardware clock is set to UTC. Select the desired options and click <guimenu>Save</guimenu> .</para>
</listitem>
<listitem>
<para>Run the following command to verify pillar settings. The output has been truncated.</para>
<screen>salt '$your_minion' pillar.items</screen>
<screen>...
   keyboard_and_language:
       ----------
       keyboard_layout:
           English (US)
       language:
           English (US)
   machine_password:
       foobar
   mgr_server:
       manager_server
   org_id:alt '$your_minion_here'
       1
   timezone:
       ----------
       hardware_clock_set_to_utc:
           True
       name:
           CET
    ...</screen>
</listitem>
<listitem>
<para>Apply this state to your minion by applying the highstate from the command line with:</para>
<screen>salt '$your_minion' state.highstate</screen>
<note>
<simpara>You can also apply the highstate from the previous formula tab from the &susemgr;{webui}
by clicking <guimenu>Apply Highstate</guimenu>
.</simpara>
</note>
<simpara xml:id="_book.suma.best.practices">= Best Practices</simpara>
</listitem>
</orderedlist>
</section>
</chapter>
<chapter xml:id="_mgr.conceptual.overview"><title>Introduction</title><simpara>This document targets system administrators.</simpara>
<section xml:id="_what_s_covered_in_this_guide"><title>What&#8217;s Covered in this Guide?</title><simpara>This document describes &suse;
recommended best practices for &susemgr;
.
This information has been collected from a large number of successful &susemgr;
real world implementations and includes feedback provided by product management, sales and engineering.</simpara>
<note>
<title>&susemgr;Version Information</title>
<simpara>In this manual if not other specified, &susemgr;
version &productnumber;
is assumed and this version is required if a feature is discussed. &susemgr;
 &productnumber;
and &susemgr;
 &productnumber;
Proxy were originally released as a SLES 12 SP3 extension.
Whenever features of the &susemgr;{productnumber}
host operating system are documented and not other specified version 12 SP3 is assumed.</simpara>
</note>
<simpara>This chapter will discuss the following topics:</simpara>
<itemizedlist>
<listitem>
<para>Prerequisites</para>
</listitem>
<listitem>
<para>Network Requirements</para>
</listitem>
<listitem>
<para>Hardware Requirements</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_prerequisites"><title>Prerequisites</title><formalpara>
<title>Purchased Registration Keys</title>
<para>During initial setup &susemgr;
will request a product <literal role="systemitem">Registration Key</literal>
.
This key will be provided to you after purchasing the product.
You can find your key located under your &scc;
 account.
Log-in with your &scc;
 credentials or register for a new account. &mdash;https://scc.suse.com</para>
</formalpara>
<formalpara>
<title>Evaluation Keys</title>
<para>If you wish to run a test system (non-production) a 60 day evaluation key may be obtained.
On the &susemgr;
product page click <emphasis>TRY SUSE
    MANAGER</emphasis>.
The evaluation key limits the number of systems that may be registered with SUSE Manager to 10. &mdash;https://www.suse.com/products/suse-manager/</para>
</formalpara>
<formalpara>
<title>SCC Organization Credentials</title>
<para>During setup you will also be asked to enter your &scc;<literal role="systemitem">Organization Credentials</literal>
.</para>
</formalpara>
<formalpara>
<title>Users and Passwords</title>
<para>During both the &sle;
installation and setup of &susemgr;
several users and passwords will be created:</para>
</formalpara>
<itemizedlist>
<listitem>
<para>&sle; root user account</para>
</listitem>
<listitem>
<para>PostgreSQL database user and password</para>
</listitem>
<listitem>
<para>Certificate of Authority password</para>
</listitem>
<listitem>
<para>&susemgr; administrator user and password</para>
</listitem>
</itemizedlist>
<tip>
<title>Safe Passwords</title>
<simpara>Maintain security by creating safe passwords.
Store passwords within a secure location.
Use the following guidelines when creating your passwords.</simpara>
<itemizedlist>
<listitem>
<para>At least 8 characters long</para>
</listitem>
<listitem>
<para>Should contain uppercase characters <command>A B C</command></para>
</listitem>
<listitem>
<para>Should contain lowercase characters <command>a b c</command></para>
</listitem>
<listitem>
<para>Should contain numbers <command>1 2 3</command></para>
</listitem>
<listitem>
<para>Should contain symbols <command>~ ! @ #</command></para>
</listitem>
</itemizedlist>
</tip>
</section>
<section xml:id="_bp.chapt.intro.network.requires"><title>Network Requirements</title><simpara>&susemgr;
and &susemgrproxy;
both contact several external addresses in order to maintain updates and subscriptions.
The following lists provide the up-to-date hostnames for each service requiring permission when used in combination with corporate firewall and content filters.</simpara>
<itemizedlist>
<title>&scc;Hostnames (Required)</title>
<listitem>
<para><link xl:href="https://scc.suse.com">https://scc.suse.com</link></para>
</listitem>
<listitem>
<para><link xl:href="https://updates.suse.com">https://updates.suse.com</link></para>
</listitem>
</itemizedlist>
<itemizedlist>
<title>&ncc;Hostnames (Legacy)</title>
<listitem>
<para><link xl:href="https://secure-www.novell.com">https://secure-www.novell.com</link></para>
</listitem>
<listitem>
<para><link xl:href="https://nu.novell.com">https://nu.novell.com</link></para>
</listitem>
</itemizedlist>
<simpara>For &susemgr;
to function properly it requires the following pre-configured components within your network.</simpara>
<important>
<title>Websocket Support</title>
<simpara>If SUSE Manager is accessed via an HTTP proxy (Squid, etc) the proxy must support websocket connections.</simpara>
</important>
<formalpara>
<title>Networking Hardware</title>
<para>The following table provides networking hardware info.
As &susemgr;
will likely be managing a large number of systems (quite possibly numbering in hundreds or even thousands), networking hardware which increases bandwidth will become increasingly more important.</para>
</formalpara>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Hardware</simpara></entry>
<entry align="left" valign="top"><simpara>Recommended</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>100Mbits/s Link</simpara></entry>
<entry align="left" valign="top"><simpara>Non-production test server</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>1Gb/s Link<?asciidoc-br?></simpara></entry>
<entry align="left" valign="top"><simpara>Production Server</simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<formalpara>
<title>DHCP Server</title>
<para>The purpose of the Dynamic Host Configuration Protocol (DHCP) is to assign network settings centrally (from a server) rather than configuring them locally on each and every workstation.
A host configured to use DHCP does not have control over its own static address.
It is enabled to configure itself completely and automatically according to directions from the server.
A DHCP server supplies not only the IP address and the netmask, but also the host name, domain name, gateway, and name server addresses for the client to use.
For more information on configuring DHCP see also:</para>
</formalpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_dhcp.html">https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_dhcp.html</link></para>
</listitem>
</itemizedlist>
<formalpara>
<title>FQDN</title>
<para>DNS assists in assigning an IP address to one or more names and assigning a name to an IP address.
In Linux, this conversion is usually carried out by a special type of software known as bind.
The machine that takes care of this conversion is called a <emphasis>name server</emphasis>.
The names make up a hierarchical system in which each name component is separated by a period.
The name hierarchy is, however, independent of the IP address hierarchy described above.
Consider a complete name, such as jupiter.example.com, written in the format hostname.domain.
A full name, referred to as a <emphasis>fully qualified domain name</emphasis> (FQDN), consists of a host name and a domain name (example.com). For more information on configuring a name server see also:</para>
</formalpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://www.suse.com/documentation/sles-12/book_sle_admin/data/sec_basicnet_nameres.html">https://www.suse.com/documentation/sles-12/book_sle_admin/data/sec_basicnet_nameres.html</link></para>
</listitem>
</itemizedlist>
<formalpara>
<title>DNS Server</title>
<para>DNS (domain name system) is required for resolving domain names and host names into IP addresses.
For example, the IP address 192.168.2.100 could be assigned to the host name jupiter.
In the case of &susemgr;
the DNS server must be resolvable both via DNS and reverse lookup.
For more information on configuring DNS see also:</para>
</formalpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_dns.html">https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_dns.html</link></para>
</listitem>
</itemizedlist>
<important>
<title>Microsoft NT Lan Manager Compatibility</title>
<simpara>Microsoft NT Lan Manager can be configured for use with basic authentication and will work with &susemgr;
but authentication using native (NTLM) Microsoft protocols is not supported.</simpara>
</important>
<formalpara>
<title>Open Port List</title>
<para>During the setup process of &susemgr;
all required ports will be opened automatically.
The following tables provide you with an overview of ports which are used by &susemgr;
.</para>
</formalpara>
<table xml:id="_tab.install.ports.server" frame="all" rowsep="1" colsep="1">
<title>Required Server Ports</title>
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Port</simpara></entry>
<entry align="left" valign="top"><simpara>Description</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>67</simpara></entry>
<entry align="left" valign="top"><simpara>Required when &susemgr;
is configured as a DHCP server for systems requesting IP addresses.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>69</simpara></entry>
<entry align="left" valign="top"><simpara>Used when &susemgr;
is configured as a PXE server and allows installation and re-installation of PXE-boot enabled systems.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>80</simpara></entry>
<entry align="left" valign="top"><simpara>Used to contact &scc;
.
All WebGUI, client, and proxy server requests travel via http or https.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>443</simpara></entry>
<entry align="left" valign="top"><simpara>All WebGUI, client, and proxy server requests via http or https and &susemgr;
uses this port for &scc;
inbound traffic.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>5222</simpara></entry>
<entry align="left" valign="top"><simpara>When you wish to push actions to clients this port is required by the <literal role="systemitem">osad</literal>
 daemon running on your client systems</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>5269</simpara></entry>
<entry align="left" valign="top"><simpara>Needed if you push actions to or via a &susemgrproxy;
.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>4505</simpara></entry>
<entry align="left" valign="top"><simpara>Required by the Salt-master to accept communication requests via TCP from minions.
Inbound.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>4506</simpara></entry>
<entry align="left" valign="top"><simpara>Required by the Salt-master to accept communication requests via TCP from minions.
Inbound.</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
<simpara>For more information, see <xref linkend="_advanced.topics.app.ports.server"/>.</simpara>
<tip>
<title>Denying External Network Access</title>
<simpara>When your network requires denying external network access to and from &susemgr;
, an RMT or SMT Server may be registered against &susemgr;
.
The RMT or SMT server can then be used to synchronize the necessary &suse;
repositories.
For more information on utilizing an RMT or SMT Server, see: <xref linkend="_disconnect_setup"/>.</simpara>
</tip>
<note>
<title>Blocking Port 80</title>
<simpara>Port 80 may be blocked as traffic is automatically redirected through port 443.
It should be noted you will lose redirection.
Keep in mind you will need additional ports open when using traditional clients in combination with <literal role="systemitem">osad</literal>
 (XMPP TCP 5222).</simpara>
</note>
</section>
<section xml:id="_hardware_recommendations"><title>Hardware Recommendations</title><simpara>This section provides tested production recommendations for small to mid size networks that will be managed by &susemgr;
.</simpara>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Hardware</simpara></entry>
<entry align="left" valign="top"><simpara>Recommended</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>CPU</simpara></entry>
<entry align="left" valign="top"><simpara>Multi-core 64bit CPU (x86_64, ppc64le).</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>RAM</simpara></entry>
<entry align="left" valign="top"><simpara>Minimum 4&#160;
GB+ for test server</simpara><simpara>Minimum 16&#160;
GB+ for base installation</simpara><simpara>Minimum 32&#160;
GB+ for a production server</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Free Disk Space</simpara></entry>
<entry align="left" valign="top"><simpara>Minimum 100&#160;
GB for root partition</simpara><simpara>Minimum 50&#160;
GB for <filename>/var/lib/pgsql</filename></simpara><simpara>Minimum 50&#160;
GB per SUSE product + 200 GB per Red Hat product <filename>/var/spacewalk</filename></simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<formalpara>
<title>Advised Number of CPUs</title>
<para>Review the following list for CPU recommendations.</para>
</formalpara>
<itemizedlist>
<listitem>
<para>Connecting 200 systems or less to &susemgr; : 4 CPUs</para>
</listitem>
<listitem>
<para>Connecting 500 systems or less to &susemgr; : 4-8 CPUs</para>
</listitem>
<listitem>
<para>When implementing RHEL channels: 8 CPUs</para>
</listitem>
</itemizedlist>
<formalpara>
<title>Disk Space</title>
<para>&susemgr;
stores information in several directories.
For these directories it is strongly recommend that you create separate file-systems or use an NFS share.
During installation one VG will be created that contains all disks selected during installation.
Therefore the first disk should be large enough to contain the OS.
Normally 20GB - 50GB is sufficient.
A 50 GB partition would be the recommended size.
The following directories should be created on a separate file-system.</para>
</formalpara>
<itemizedlist>
<listitem>
<para><literal>/var/spacewalk</literal> This directory will contain all rpm&#8217;s. Each RPM will be stored only once. The needed size will depend on the number of channels and type of channels that will be downloaded. The general rule would be that per SUSE Service Pack (including SUSE RedHat Expanded Support) around 50 GB should be enough. An extra 150 GB for RES/CentOS repositories should be added on top. If other non-enterprise distributions (eg OpenSUSE) are added,  calculated 50 GB per distribution. This directory could also be stored on an NFS share.</para>
</listitem>
<listitem>
<para><literal>/var/lib/pgsql</literal> This directory contains the PostgreSQL database. Recommended is to create a file-system of 50 GB. This volume should be monitored, because a full file-system where the database is running on can cause unexpected errors (and this even months after it happened).</para>
</listitem>
<listitem>
<para><literal>/srv/tftpboot</literal> If PXE/cobbler is used, this directory will contain the images (initrd and linux) for all created auto-installation profiles. Each image is around 50 MB. Depending on the number of profiles a decision has to be made if it would be useful to move this directory to a separate file-system.</para>
</listitem>
<listitem>
<para><literal>/var/log</literal> As SUSE Manager writes a large number of logs, it is recommended to create a separate file-system for /var/log. The size should be around 20 GB.</para>
</listitem>
<listitem>
<para><literal>/var/spacewalk/db_backup</literal>For the backup of the PostgreSQL database, it is recommended the create a separate directory. As the database can be rather large, it is advised to mount it on a separate file-system. A safe estimate would be to provide twice space as for the directory created for <literal>/var/lib/pqsql</literal>.</para>
</listitem>
</itemizedlist>
<formalpara>
<title>Supported Databases</title>
<para>&susemgr;
 3 and later no longer provides support for an external Oracle database.
The default database is an embedded PostgreSQL.
During &susemgr;
setup the database will be created and configured.</para>
</formalpara>
</section>
</chapter>
<chapter xml:id="_suma.choosing.dist.scheme"><title>Managing Your Subscriptions</title><simpara>There are two methods for managing your subscriptions.
Both methods access &scc;
and provide specialized benefits.</simpara>
<itemizedlist>
<listitem>
<para>Directly connecting to &scc; is the recommended default way of managing your &susemgr; server.</para>
</listitem>
<listitem>
<para>If you have special network security requirements which do not allow access from your internal network to the internet then you can use &sls; 12 running the &rmtool; (RMT) or &smtool; (SMT).  These tools will contact &scc; from a system connected to the external network and obtain updates for your clients which you may then mount on your internal &susemgr; server. This is the preferred method for managing client systems within a highly secure network infrastructure.</para>
</listitem>
</itemizedlist>
<section xml:id="_scc"><title>&scc; (SCC)</title><simpara>&scc;
(SCC) is the central place to manage your purchased &suse;
subscriptions, helping you access your update channels and get in contact with &suse;
experts.
The user-friendly interface gives you a centralized view of all your &suse;
subscriptions, allowing you to easily find all subscription information you need.
The improved registration provides faster access to your patches and updates. &scc;
is also designed to provide a common platform for your support requests and feedback.
Discover a new way of managing your &suse;
account and subscriptions via one interface&#8212;&#8203;anytime, anywhere.
For more information on using &scc;
, see <link xl:href="https://scc.suse.com/docs/userguide">https://scc.suse.com/docs/userguide</link>.</simpara>
</section>
<section xml:id="_disconnect_setup"><title>Disconnected Setup with RMT or SMT (DMZ)</title><simpara>If it is not possible to connect &susemgr;
directly or via a proxy to the Internet, a disconnected setup in combination with RMT or SMT is the recommended solution.
In this scenario, RMT or SMT stays in an <quote>external</quote>
 network with a connection to &scc;
 and synchronizes the software channels and repositories on a removable storage medium.
Then you separate the storage medium from RMT or SMT, and mount it locally on your &susemgr;
 server to read the updated data.</simpara>
<formalpara>
<title>RMT</title>
<para>The successor of SMT and currently runs on the following systems:</para>
</formalpara>
<itemizedlist>
<listitem>
<para>&sle; 15 (when available)</para>
</listitem>
<listitem>
<para>Temporarily (for testing only): 12 SP2, and 12 SP3</para>
</listitem>
<listitem>
<para>Not officially supported: openSUSE Leap 42.2, Leap 42.3, and openSUSE Tumbleweed</para>
</listitem>
</itemizedlist>
<simpara>RMT allows you to provision updates for all of your devices running a product based on &sle;
 12 SPx and later as well as openSUSE Leap.</simpara>
<formalpara>
<title>SMT</title>
<para>The predecessor of RMT and is no longer actively developed.
It runs on &sls;
 12 SPx and allows you to provision updates for products based on &sle;
 12 SPx and earlier.
You will still need it, if you want to update &sle;
 11 clients.</para>
</formalpara>
<section xml:id="_rmtool"><title>&rmtool; (RMT) and Disconnected Setup (DMZ)</title><simpara>The following procedure will guide you through using RMT.
It will work best with a dedicated RMT instance per &susemgr;
.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: RMT: Fetching Repository Data from &scc;</title>
<listitem>
<para>Configure RMT in the external network with SCC. For details about configuring RMT, see the official guide (when available).</para>
<orderedlist numeration="loweralpha">
<listitem>
<para>Preparation work:</para>
<simpara>Run <command>rmt-cli sync</command> to download available products and repositories data for your organization from SCC.</simpara>
<simpara>Run <command>rmt-cli products list --all</command> to see the list of products that are available for your organization.</simpara>
<simpara>Run <command>rmt-cli repos list --all</command> to see the list of all repositories available.</simpara>
</listitem>
<listitem>
<para>With <command>rmt-cli repos enable</command> enable repositories you want to mirror.</para>
</listitem>
<listitem>
<para>With <command>rmt-cli products enable</command>enable products. For example, to enable &slsa; _15:</para>
<screen>rmt-cli product enable sles/15/x86_64</screen>
</listitem>
</orderedlist>
</listitem>
<listitem>
<para>Using RMT, mirror all required repositories.</para>
</listitem>
<listitem>
<para>Get the required JSON responses from SCC and save them as files at the specified path (for example, <filename>/mnt/usb</filename> ).</para>
<important>
<title>Write Permissions for RMT User</title>
<simpara>The directory being written to must be writeable for the same user as the rmt service.
The rmt user setting is defined in the <literal>cli</literal> section of <filename>/etc/rmt.conf</filename>
.</simpara>
</important>
<simpara>Enter:</simpara>
<screen>{prompt.root}rmt-cli export data /mnt/usb</screen>
</listitem>
<listitem>
<para>Export settings about repositories to mirror to the specified path (in this case, <filename>/mnt/usb</filename> ); this command will create a <filename>repos.json</filename> file there:</para>
<screen>{prompt.root}rmt-cli export settings /mnt/usb</screen>
</listitem>
<listitem xml:id="_pro.rmtool.export.repos">
<para>Mirror the repositories according to the settings in the <filename>repos.json</filename> file to the specified path (in this case, <filename>/mnt/usb</filename> ).</para>
<screen>{prompt.root}rmt-cli export repos /mnt/usb</screen>
</listitem>
<listitem>
<para>Unmount the storage medium and carry it securely to your &susemgr; server.</para>
</listitem>
</orderedlist>
<simpara>On the &susemgr;
server, continue with <xref linkend="_disconnect.mgr.update_repos"/>.</simpara>
</section>
<section xml:id="_sub.mgr.tool"><title>&smtool; (SMT) and Disconnected Setup (DMZ)</title><simpara>The following procedure will guide you through using SMT.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: SMT: Fetching Repository Data from &scc;</title>
<listitem>
<para>Configure SMT in the external network with SCC. For details about configuring SMT with &sle; 12, see <link xl:href="https://www.suse.com/documentation/sles-12/book_smt/data/book_smt.html">https://www.suse.com/documentation/sles-12/book_smt/data/book_smt.html</link>.</para>
</listitem>
<listitem>
<para>Using SMT, mirror all required repositories.</para>
</listitem>
<listitem>
<para>Create a <quote>database replacement file</quote> (for example, <filename>/tmp/dbrepl.xml</filename> ).</para>
<screen>{prompt.root}smt-sync --createdbreplacementfile /tmp/dbrepl.xml</screen>
</listitem>
</orderedlist>
<orderedlist xml:id="_pro.mgr.tool.mount.storage" numeration="arabic">
<listitem>
<para>Mount a removable storage medium such as an external hard disk or USB flash drive.</para>
</listitem>
<listitem>
<para>Export the data to the mounted medium:</para>
<screen>smt-sync --todir /media/disk/
smt-mirror --dbreplfile /tmp/dbrepl.xml --directory /media/disk \
           --fromlocalsmt -L /var/log/smt/smt-mirror-export.log</screen>
<important>
<title>Write Permissions for SMT User</title>
<simpara>The directory being written to must be writeable for the same user as the smt daemon (user=smt). The smt user setting is defined in <filename>/etc/smt.conf</filename>
.
You can check if the correct user is specified via the following command:</simpara>
</important>
</listitem>
</orderedlist>
<screen>{prompt.root}egrep '^smtUser' /etc/smt.conf</screen>
<simpara>+</simpara>
<simpara>+
.Keeping the Disconnected Server Up-to-date
NOTE: <command>smt-sync</command> also exports your subscription data.
To keep &susemgr;
 up-to-date with your subscriptions, you must frequently import and export this data.</simpara>
<simpara>+</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Unmount the storage medium and carry it securely to your &susemgr; server.</para>
</listitem>
</orderedlist>
<simpara>On the &susemgr;
server, continue with <xref linkend="_disconnect.mgr.update_repos"/>.</simpara>
</section>
<section xml:id="_disconnect.mgr.update_repos"><title>Updating Repositories on &susemgr; From Storage Media</title><simpara>This procedure will show you how to update the repositories on the &susemgr;
server from the storage media.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Updating the &susemgr;Server from the Storage Medium</title>
<listitem>
<para>Mount the storage medium on your &susemgr; server (for example, at <filename>/media/disk</filename> ).</para>
</listitem>
<listitem>
<para>Specify the local path on the &susemgr; server in <literal>/etc/rhn/rhn.conf</literal>:</para>
<screen>server.susemanager.fromdir = /media/disk</screen>
<simpara>This setting is mandatory for &scc;
and <command>mgr-sync</command>.</simpara>
</listitem>
<listitem>
<para>Restart Tomcat:</para>
<screen>systemctl restart tomcat</screen>
</listitem>
</orderedlist>
<orderedlist xml:id="_pro.mgr.tool.sync" numeration="arabic">
<listitem>
<para>Before performing another operation on the server execute a full sync:</para>
<screen>mgr-sync refresh   # SCC (fromdir in rhn.conf required!)</screen>
</listitem>
<listitem>
<para><command>mgr-sync</command> can now be executed normally:</para>
<screen>mgr-sync list channels
mgr-sync add channel channel-label</screen>
<warning>
<title>Data Corruption</title>
<simpara>The disk must always be available at the same mount point.
To avoid data corruption, do not trigger a sync, if the storage medium is not mounted.
If you have already added a channel from a local repository path, you will not be able to change its URL to point to a different path afterwards.</simpara>
</warning>
</listitem>
</orderedlist>
<simpara>Up-to-date data is now available on your &susemgr;
server and is ready for updating client systems.
According to your maintenance windows or update schedule refresh the data on the storage medium with RMT or SMT.</simpara>
</section>
<section xml:id="_refreshing_data_on_the_storage_medium"><title>Refreshing Data on the Storage Medium</title><orderedlist numeration="arabic">
<title>Procedure: Refreshing Data on the Storage Medium from RMT or SMT</title>
<listitem>
<para>On your &susemgr; server, unmount the storage medium and carry it to your RMT or SMT.</para>
</listitem>
<listitem>
<para>On your RMT or SMT system, continue with the synchronization step (either <xref linkend="_pro.rmtool.export.repos"/> or <xref linkend="_pro.mgr.tool.sync"/>).</para>
<warning>
<title>Data Corruption</title>
<simpara>The storage medium must always be available at the same mount point.
To avoid data corruption, do not trigger a sync if the storage medium is not mounted.</simpara>
</warning>
</listitem>
</orderedlist>
<simpara>This concludes using RMT or SMT with &susemgr;
.</simpara>
</section>
</section>
</chapter>
<chapter xml:id="_bp.expanded_support"><title>Expanded Support</title><simpara>In the following sections find information about Red Hat and Centos clients.</simpara>
<section xml:id="_bp.expanded_support.resclients"><title>Managing RES Clients</title><simpara>The following sections provide guidance on managing Red Hat Expanded Support clients, this includes Salt minions and traditional systems.</simpara>
<section xml:id="_bp.expanded_support.resclients.server"><title>Server Configuration for RES Channels</title><simpara>This section provides guidance on server configuration for RES Channels provided by &suse;
.</simpara>
<itemizedlist>
<listitem>
<para>Minimum of 8 GB RAM and at least two physical or virtual CPUs. Taskomatic will use one of these CPUs.</para>
</listitem>
<listitem>
<para>Taskomatic requires of minimum of 3072 MB RAM. This should be set in <filename>/etc/rhn/rhn.conf</filename> :</para>
<screen>taskomatic.java.maxmemory=3072</screen>
</listitem>
<listitem>
<para>Provision enough disk space. <filename>/var/spacewalk</filename> contains all mirrored RPMs. For example, RES 6 x86_64 channels require 90 GB and more.</para>
</listitem>
<listitem>
<para>LVM or an NFS mount is recommended.</para>
</listitem>
<listitem>
<para>Access to RHEL 5/6/7 Subscription Media.</para>
</listitem>
</itemizedlist>
<warning>
<title>Access to RHEL Media or Repositories</title>
<simpara>Access to Red Hat base media repositories and RHEL installation media is the responsibility of the user.
Ensure that all your RHEL systems obtain support from RHEL or all your RHEL systems obtain support from &suse;
.
If you do not follow these practices you may violate terms with Red Hat.</simpara>
</warning>
</section>
<section xml:id="_bp.expanded_support.resclients.tips"><title>RES Channel Management Tips</title><simpara>This section provides tips on RES channel management.</simpara>
<itemizedlist>
<listitem>
<para>The base parent distribution RES channel per architecture contains zero packages. No base media is provided by &suse; . The RHEL media or installation ISOs should be added as child channels of the RES parent channel.</para>
</listitem>
<listitem>
<para>The RES and tools channels are provided by SUSE Customer Center (SCC) using <command>mgr-sync</command>.</para>
</listitem>
<listitem>
<para>It can take up to 24 hours for an initial channel synchronization to complete.</para>
</listitem>
<listitem>
<para>When you have completed the initial synchronization process of any RES channel it is recommended to clone the channel before working with it. This provides you with a backup of the original synchronization.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_mirroring_rhel_media_into_a_channel"><title>Mirroring RHEL Media into a Channel</title><simpara>The following procedure guides you through setup of the RHEL media as a &susemgr;
channel.
All packages on the RHEL media will be mirrored into a child channel located under RES 5/6/7 distribution per architecture.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Mirroring RHEL Media into a Channel</title>
<listitem>
<para>Create a new Channel by log in to the &webui; and selecting <menuchoice><guimenu>Channels</guimenu> <guisubmenu>Manage Software Channels</guisubmenu> <guimenuitem>Create Channel</guimenuitem></menuchoice> .</para>
</listitem>
<listitem>
<para>Fill in basic channel details and add the channel as a child to the corresponding RES 5/6/7 distribution channel per architecture from SCC. The base parent channel should contain zero packages.</para>
</listitem>
<listitem>
<para>Modify the RES 5/6/7 activation key to include this new child channel.</para>
</listitem>
<listitem>
<para>As &rootuser; on the &susemgr; command line copy the ISO to the <filename>/tmp</filename> directory.</para>
</listitem>
<listitem>
<para>Create a directory to contain the media content:</para>
<screen>{prompt.root}mkdir -p /srv/www/htdocs/pub/rhel</screen>
</listitem>
<listitem>
<para>Mount the ISO:</para>
<screen>{prompt.root}mount -o loop /tmp/name_of_iso /srv/www/htdocs/pub/rhel</screen>
</listitem>
<listitem>
<para>Start <command>spacewalk-repo-sync</command> to synchronize packages:</para>
<screen>{prompt.root}spacewalk-repo-sync -c channel_name -u https://127.0.0.1/pub/rhel/Server/
Repo URL: https://127.0.0.1/pub/rhel/Server/
Packages in repo:              3690
Packages already synced:          0
Packages to sync:              3690
1/3690 : texlive-latex-2007-57.el6_2-0.x86_64
2/3690 : boost-filesystem-1.41.0-18.el6-0.i686
3/3690 : policycoreutils-newrole-2.0.83-19.39.el6-0.x86_64
[...]</screen>
</listitem>
<listitem>
<para>When the channel has completed the synchronization process you can use the channel as any normal &susemgr; channel.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_registering_res_salt_minions_with_susemgr"><title>Registering RES Salt Minions with &susemgr;</title><simpara>This section will guide you through registering RHEL minions with &susemgr;
.
This section assumes you have updated your server to the latest patch level.</simpara>
<section xml:id="_synchronizing_appropriate_res_channels"><title>Synchronizing Appropriate RES Channels</title><simpara>Ensure you have the corresponding RES product enabled and required channels have been fully synchronized:</simpara>
<itemizedlist>
<title>RHEL 7.x</title>
<listitem>
<para>Product: RES 7</para>
</listitem>
<listitem>
<para>Mandatory channels: <literal role="systemitem">rhel-x86_64-server-7</literal> , <literal role="systemitem">res7-suse-manager-tools-x86_64</literal> , <literal role="systemitem">res7-x86_64</literal> systemitem&gt;</para>
</listitem>
</itemizedlist>
<itemizedlist>
<title>RHEL 6.x</title>
<listitem>
<para>Product: RES 6</para>
</listitem>
<listitem>
<para>Mandatory channels: <literal role="systemitem">rhel-x86_64-server-6</literal> , <literal role="systemitem">res6-suse-manager-tools-x86_64</literal> , <literal role="systemitem">res6-x86_64</literal></para>
</listitem>
</itemizedlist>
<tip>
<title>Checking Synchronization Progress</title>
<simpara>To check if a channel has finished synchronizing you can do one of the following:</simpara>
<itemizedlist>
<listitem>
<para>From the &susemgr;{webui} browse to <menuchoice><guimenu>Admin</guimenu> <guimenuitem>Setup Wizard</guimenuitem></menuchoice> and select the <guimenu>SUSE Products</guimenu> tab. Here you will find a percent completion bar for each product.</para>
</listitem>
<listitem>
<para>Alternatively, you may check the synchronization log file located under <filename>/var/log/rhn/reposync/channel-label.log</filename> using cat or the tailf command. Keep in mind that base channels can contain multiple child channels. Each of these child channels will generate its own log during the synchronization progress. Do not assume a channel has finished synchronizing until you have checked all relevant log files including base and child channels.</para>
</listitem>
</itemizedlist>
</tip>
<simpara>Create an activation key associated with the RES channel.</simpara>
</section>
<section xml:id="_creating_a_bootstrap_repository"><title>Creating a Bootstrap Repository</title><simpara>The following procedure demonstrate creating a bootstrap repository for RHEL</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>On the server command line as root, create a bootstrap repo for RHEL with the following command:</para>
<screen>mgr-create-bootstrap-repo RHEL_activation_channel_key</screen>
</listitem>
<listitem>
<para>Rename <command>bootstrap.sh</command> to <command>resversion-boostrap.sh</command>:</para>
<screen>{prompt.root}cp bootstrap.sh res7-bootstrap.sh</screen>
</listitem>
</orderedlist>
</section>
</section>
<section xml:id="_register_a_salt_minion_via_bootstrap"><title>Register a Salt Minion via Bootstrap</title><simpara>The following procedure will guide you through registering a Salt minion using the bootstrap script.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Registration Using the Bootstrap Script</title>
<listitem>
<para>For your new minion download the bootstrap script from the &susemgr; server:</para>
<screen>wget --no-check-certificate https://`server`/pub/bootstrap/res7-bootstrap.sh</screen>
</listitem>
<listitem>
<para>Add the appropriate res-gpg-pubkey-<emphasis role="marked"><emphasis role="marked"></emphasis>-<emphasis role="marked"></emphasis></emphasis>.key to the <literal>ORG_GPG_KEY</literal> key parameter, comma delimited in your <command>res7-bootstrap.sh</command> script. These are located on your &susemgr; server at:</para>
<screen>http://`server`/pub/</screen>
</listitem>
<listitem>
<para>Make the <command>res7-bootstrap.sh</command> script executable and run it. This will install necessary Salt packages from the bootstrap repository and start the Salt minion service:</para>
<screen>{prompt.root}chmod +x res7-bootstrap.sh{prompt.root}./res7-boostrap.sh</screen>
</listitem>
<listitem>
<para>From the &susemgr;{webui} select <menuchoice><guimenu>Salt</guimenu> <guimenuitem>Keys</guimenuitem></menuchoice> and accept the new minion&#8217;s key.</para>
</listitem>
</orderedlist>
<important>
<title>Troubleshooting Bootstrap</title>
<simpara>If bootstrapping a minion fails it is usually caused by missing packages.
These missing packages are contained on the RHEL installation media.
The RHEL installation media should be loop mounted and added as a child channel to the RES channel.
See the warning in <xref linkend="_bp.expanded_support.resclients"/> on access to RHEL Media.</simpara>
</important>
</section>
<section xml:id="_manual_salt_minion_registration"><title>Manual Salt Minion Registration</title><simpara>The following procedure will guide you through the registration of a Salt minion manually.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Add the bootstrap repository:</para>
<screen>yum-config-manager --add-repo https://`server`/pub/repositories/res/7/bootstrap</screen>
</listitem>
<listitem>
<para>Install the <package>salt-minion</package> package:</para>
<screen>{prompt.root}yum install salt-minion</screen>
</listitem>
<listitem>
<para>Edit the Salt minion configuration file to point to the &susemgr; server:</para>
<screen>{prompt.root}mkdir /etc/salt/minion.d{prompt.root}echo "master:`server_fqdn`" &gt; /etc/salt/minion.d/susemanager.conf</screen>
</listitem>
<listitem>
<para>Start the minion service:</para>
<screen>{prompt.root}systemctl start salt-minion</screen>
</listitem>
<listitem>
<para>From the &susemgr;{webui} select the <menuchoice><guimenu>Salt</guimenu> <guimenuitem>Keys</guimenuitem></menuchoice> and accept the new minion&#8217;s key.</para>
</listitem>
</orderedlist>
</section>
</section>
<section xml:id="_bp.expanded_support.centos_repos.trad"><title>Preparing Channels and Repositories for CentOS Traditional Clients</title><simpara>This following section provides an example procedure for configuring CentOS channels and repositories and finally registering a CentOS client with &susemgr;
.
These steps will be identical for Scientific Linux and Fedora.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Preparing Channels and Repositories</title>
<listitem>
<para>As &rootuser; install <package>spacewalk-utils</package> on your &susemgr; server:</para>
<screen>zypper in spacewalk-utils</screen>
<important>
<title>Supported Tools</title>
<simpara>The <package>spacewalk-utils</package>
 package contains a collection of upstream command line tools which provide assistance with spacewalk administrative operations.
You will be using the <command>spacewalk-common-channels</command> tool.
Keep in mind &suse;
 only provides support for <command>spacewalk-clone-by-date</command> and <command>spacewalk-manage-channel-lifecycle</command> tools.</simpara>
</important>
</listitem>
<listitem>
<para>Run the <command>spacewalk-common-channels</command> script to add the CentOS7 base, updates, and Spacewalk client channels.</para>
<screen>{prompt.root}spacewalk-common-channels -u admin -p`secret`-a x86_64 'centos7'{prompt.root}spacewalk-common-channels -u admin -p`secret`-a x86_64 'centos7-updates'{prompt.root}spacewalk-common-channels -u admin -p`secret`-a x86_64 'spacewalk26-client-centos7'</screen>
<note>
<title>Required Channel References</title>
<simpara>The <filename>/etc/rhn/spacewalk-common-channels.ini</filename>
 must contain the channel references to be added.
If a channel is not listed, check the latest version here for updates: <link xl:href="https://github.com/spacewalkproject/spacewalk/tree/master/utils">https://github.com/spacewalkproject/spacewalk/tree/master/utils</link></simpara>
</note>
</listitem>
<listitem>
<para>From the &webui; select <menuchoice><guimenu>Software</guimenu> <guisubmenu>Manage Software Channels</guisubmenu> <guimenuitem>Overview</guimenuitem></menuchoice> . Select the base channel you want to synchronize, in this case <literal>CentOS7 (x86_64)</literal>. Select <menuchoice><guimenu>Repositories</guimenu> <guimenuitem>Sync</guimenuitem></menuchoice> . Check the channels you want to synchronize and then click the <guimenu>Sync Now</guimenu> button or, optionally, schedule a regular synchronization time.</para>
</listitem>
<listitem>
<para>Copy all relevant GPG keys to <filename>/srv/www/htdocs/pub</filename> . Depending on what distribution you are interested in managing these could include an EPEL key, SUSE keys, Red Hat keys, and CentOS keys. After copying these you can reference them in a comma-delimited list within your bootstrap script (see <xref linkend="_proc.bp.expanded_support.centos_repos.trad.bsscript"/>).</para>
<itemizedlist>
<listitem>
<para>CentOS7 key files: <link xl:href="http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-7">http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-7</link></para>
</listitem>
<listitem>
<para>EPEL key file: <link xl:href="http://mirrors.kernel.org/fedora-epel/RPM-GPG-KEY-EPEL-7">http://mirrors.kernel.org/fedora-epel/RPM-GPG-KEY-EPEL-7</link></para>
</listitem>
<listitem>
<para>Spacewalk key: <link xl:href="http://spacewalk.redhat.com/yum/RPM-GPG-KEY-spacewalk-2015">http://spacewalk.redhat.com/yum/RPM-GPG-KEY-spacewalk-2015</link></para>
</listitem>
<listitem>
<para>Red Hat keys: <link xl:href="http://www.redhat.com/contact/security-response-team/gpg-keys.html">http://www.redhat.com/contact/security-response-team/gpg-keys.html</link></para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Install and setup a CentOS 7 client with the default installation packages.</para>
</listitem>
<listitem>
<para>Ensure the client machine can resolve itself and your &susemgr; server via DNS. Validate that there is an entry in <filename>/etc/hosts</filename> for the real IP address of the client.</para>
</listitem>
<listitem>
<para>Create an activation key (<literal>centos7</literal>) on the &susemgr; server that points to the correct parent/child channels, including the CentOS base repo, updates, and Spacewalk client.</para>
</listitem>
</orderedlist>
<simpara>Now prepare the bootstrap script.</simpara>
<orderedlist xml:id="_proc.bp.expanded_support.centos_repos.trad.bsscript" numeration="arabic">
<title>Procedure: Preparing the Bootstrap Script</title>
<listitem>
<para>Create/edit your bootstrap script to correctly reflect the following:</para>
<screen># can be edited, but probably correct (unless created during initial install):

# NOTE: ACTIVATION_KEYS *must* be used to bootstrap a client machine.

ACTIVATION_KEYS=1-centos7

ORG_GPG_KEY=res.key,RPM-GPG-KEY-CentOS-7,suse-307E3D54.key,suse-9C800ACA.key,RPM-GPG-KEY-spacewalk-2015

FULLY_UPDATE_THIS_BOX=0

yum clean all
# Install the prerequisites
yum -y install yum-rhn-plugin rhn-setup</screen>
</listitem>
<listitem>
<para>Add the following lines to the bottom of your script, (just before <literal>echo <quote>-bootstrap complete -</quote></literal> ):</para>
<screen># This section is for commands to be executed after registration
mv /etc/yum.repos.d/Cent* /root/
yum clean all
chkconfig rhnsd on
chkconfig osad on
service rhnsd restart
service osad restart</screen>
</listitem>
<listitem>
<para>Continue by following normal bootstrap procedures to bootstrap the new client.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_bp.expanded_support.centos_salt"><title>Registering CentOS Salt Minions with &susemgr;</title><simpara>The following procedure will guide you through registering a CentOS Minion.</simpara>
<warning>
<title>Support for CentOS Patches</title>
<simpara>CentOS uses patches originating from CentOS is not officially supported by &suse;
.
See the matrix of &susemgr;
clients on the main page of the &susemgr;
wiki, linked from the <emphasis><phrase role="ref">Quick
    Links</phrase></emphasis>
 section: <link xl:href="https://wiki.microfocus.com/index.php?title=SUSE_Manager">https://wiki.microfocus.com/index.php?title=SUSE_Manager</link></simpara>
</warning>
<orderedlist numeration="arabic">
<title>Procedure: Register a CentOS 7 Minion</title>
<listitem>
<para>Add the Open Build Service repo for Salt:</para>
<screen>{prompt.root}yum-config-manager --add-repo http://download.opensuse.org/repositories/systemsmanagement:/saltstack:/products/RHEL_7/</screen>
</listitem>
<listitem>
<para>Import the repo key:</para>
<screen>{prompt.root}rpm --import http://download.opensuse.org/repositories/systemsmanagement:/saltstack:/products/RHEL_7/repodata/repomd.xml.key</screen>
</listitem>
<listitem>
<para>Check if there is a different repository that contains Salt. If there is more than one repository listed disable the repository that contains Salt apart from the OBS one.</para>
<screen>{prompt.root}yum list --showduplicates salt</screen>
</listitem>
<listitem>
<para>Install the Salt minion:</para>
<screen>{prompt.root}yum install salt salt-minion</screen>
</listitem>
<listitem>
<para>Change the Salt configuration to point to the &susemgr; server:</para>
<screen>{prompt.root}mkdir -p /etc/salt/minion.d{prompt.root}echo "master:`server_fqdn`" &gt; /etc/salt/minion.d/susemanager.conf</screen>
</listitem>
<listitem>
<para>Restart the minion</para>
<screen>{prompt.root}systemctl restart salt-minion</screen>
</listitem>
<listitem>
<para>Proceed to <menuchoice><guimenu>Salt</guimenu> <guimenuitem>Keys</guimenuitem></menuchoice> from the &webui; and accept the minion&#8217;s key.</para>
</listitem>
</orderedlist>
</section>
</chapter>
<chapter xml:id="_best.practice.salt.formulas.and.forms"><title>Salt Formulas and &susemgr;</title><simpara>This chapter provides an introduction for using Salt Formulas with &susemgr;
.
Creation of custom formulas will also be introduced.</simpara>
<section xml:id="_best.practice.salt.formulas.what"><title>What are Salt Formulas?</title><simpara>Formulas are collections of Salt States that have been pre-written by other Salt users and contain generic parameter fields.
Formulas allow for reliable reproduction of a specific configuration again and again.
Formulas can be installed from RPM packages or an external git repository.</simpara>
<simpara>The following list will help you in making the decision to use a state or a formula.</simpara>
<itemizedlist>
<title>Formula Tips</title>
<listitem>
<para>When writing states for trivial tasks, formulas are probably not worth the time investment.</para>
</listitem>
<listitem>
<para>For large, non-trivial configurations use formulas.</para>
</listitem>
<listitem>
<para>Formulas and States both act as a kind of configuration documentation. Once written and stored you will have a snapshot of what your infrastructure should look like.</para>
</listitem>
<listitem>
<para>You can greatly decrease the amount of time required for writing a formula by grabbing one of the many pre-written formulas on github. There are pre-written formulas for hundreds of configurations. You can find these located at <link xl:href="https://github.com/saltstack-formulas">https://github.com/saltstack-formulas</link>.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_best.practice.salt.formulas.install"><title>Installing Salt Formulas via RPM</title><simpara>&suse;
releases formulas as RPM packages.</simpara>
<note>
<title>Formula Channel Location</title>
<simpara>Available formulas can be located within the <literal role="systemitem">SUSE-Manager-Server-3.2-Pool</literal>
 channel.</simpara>
</note>
<orderedlist numeration="arabic">
<title>Procedure: Installing Salt Formulas from an RPM</title>
<listitem>
<para>To search for available formulas, execute the following command on your &susemgr; server:</para>
<screen>{prompt.root}zypper se formula</screen>
<simpara>You will be presented with a list of available Salt formulas:</simpara>
<screen>S | Name              | Summary                                                    | Type
--+-------------------+------------------------------------------------------------+-----------
  | locale-formula    | Locale Salt Formula for SUSE Manager                       | package
  | locale-formula    | Locale Salt Formula for SUSE Manager                       | srcpackage</screen>
</listitem>
<listitem>
<para>For more information (metadata) about a specific formula run from the command line:</para>
<screen>{prompt.root}zypper info locale-formula</screen>
<screen>Information for package locale-formula:
-----------------------------------------
Repository: SUSE-Manager-Server-&productnumber;-Pool
Name:  locale-formula
Version:  0.2-1.1
Arch: noarch
Vendor:  SUSE LLC &lt;https://www.suse.com/&gt;
Support Level: Level 3
Status: not installed
Installed Size: 47.9 KiB
Installed: No
Source package : locale-formula-0.2-1.1.src
Summary        : Locale Salt Formula for SUSE Manager
Description    : Salt Formula for SUSE Manager. Sets up the locale.</screen>
</listitem>
<listitem>
<para>To install a formula, as &rootuser; or with <command>sudo</command> run:</para>
<screen>{prompt.root}zypper in locale-formula</screen>
</listitem>
</orderedlist>
</section>
<section xml:id="_best.practice.salt.formulas.filedir"><title>File Structure Overview</title><simpara>RPM-based formulas need to be placed within a specific directory structure to ensure proper functionality.
A formula always consists of two separate directories: The <filename>states</filename>
 directory and the <filename>metadata</filename>
 directory.
Folders in these directories need to have an exactly matching name, for example <literal>locale</literal>.</simpara>
<variablelist>
<varlistentry>
<term>The Formula State Directory</term>
<listitem>
<simpara>The formula states directory contains anything necessary for a Salt state to work independently.
This includes <filename>.sls</filename>
files, a <filename>map.jinja</filename>
file and any other required files.
This directory should only be modified by RPMs and should not be edited manually.
For example, the <package>locale-formula</package>
states directory is located in:</simpara>
<screen>/usr/share/susemanager/formulas/states/locale/</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>The Formula Metadata Directory</term>
<listitem>
<simpara>The metadata directory contains a <filename>form.yml</filename>
file which defines the forms for &susemgr;
and an optional <filename>metadata.yml</filename>
file that can contain additional information about a formula.
For example, the <package>locale-formula</package>
metadata directory is located in:</simpara>
<screen>/usr/share/susemanager/formulas/metadata/locale/</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Custom Formulas</term>
<listitem>
<simpara>Custom formula data or (non-RPM) formulas need to be placed into any state directory configured as a Salt file root:</simpara>
<variablelist>
<varlistentry>
<term>State directory</term>
<listitem>
<simpara>Custom state formula data need to be placed in:</simpara>
<screen>/srv/salt/custom/</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Metadata Directory</term>
<listitem>
<simpara>Custom metadata (information) need to be placed in:</simpara>
<screen>/srv/formula_metadata/custom/</screen>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
<simpara>All custom folders located in the following directories needs to contain a <filename>form.yml</filename>
 file.
These files are detected as form recipes and may be applied to groups and systems from the &webui;
:</simpara>
<screen>/srv/salt/formula_metadata/`custom-formula-name`/form.yml</screen>
</section>
<section xml:id="_best.practice.salt.formulas.pillar"><title>Editing Pillar Data in &susemgr;</title><simpara>&susemgr;
requires a file called <filename>form.yml</filename>
, to describe how formula data should look within the &webui;
. <filename>form.yml</filename>
 is used by &susemgr;
 to generate the desired form, with values editable by a user.</simpara>
<simpara>For example, the <filename>form.yml</filename>
 that is included with the <package>locale-formula</package>
 is placed in:</simpara>
<screen>/usr/share/susemanager/formulas/metadata/locale/form.yml</screen>
<simpara>See part of the following <package>locale-formula</package>
 example:</simpara>
<screen># This file is part of locale-formula.
#
# Foobar is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# Foobar is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with Foobar.  If not, see &lt;http://www.gnu.org/licenses/&gt;.

timezone:
  $type: group

  name:
    $type: select
    $values: ["CET",
              "CST6CDT",
              "EET",
              "EST",
              "EST5EDT",
              "GMT",
              "GMT+0",
              "GMT-0",
              "GMT0",
              "Greenwich",
              "HST",
              "MET",
              "MST",
              "MST7MDT",
              "NZ",
              "NZ-CHAT",
              "Navajo",
              "PST8PDT",
              "UCT",
              "UTC",
              "Universal",
              "W-SU",
              "WET",
              "Zulu",
              "Etc/GMT+1",
              "Etc/GMT+2",
              "Etc/GMT+3",
              "Etc/GMT+4",
              "Etc/GMT+5",
              "Etc/GMT+6",
              "Etc/GMT+7",
              "Etc/GMT+8",
              "Etc/GMT+9",
              "Etc/GMT+10",
              "Etc/GMT+11",
              "Etc/GMT+12",
              "Etc/GMT-1",
              "Etc/GMT-2",
              "Etc/GMT-3",
              "Etc/GMT-4",
              "Etc/GMT-5",
              "Etc/GMT-6",
              "Etc/GMT-7",
              "Etc/GMT-8",
              "Etc/GMT-9",
              "Etc/GMT-10",
              "Etc/GMT-11",
              "Etc/GMT-12",
              "Etc/GMT-13",
              "Etc/GMT-14",
              "Etc/GMT",
              "Etc/GMT+0",
              "Etc/GMT-0",
              "Etc/GMT0",
              "Etc/Greenwich",
              "Etc/UCT",
              "Etc/UTC",
              "Etc/Universal",
              "Etc/Zulu"
              ]
    $default: CET

  hardware_clock_set_to_utc:
    $type: boolean
    $default: True
...</screen>
<simpara><filename>form.yml</filename>
 contains additional information that describes how the form for a pillar should look for &susemgr;
.
This information is contained in attributes that always start with a <literal>$</literal> sign.</simpara>
<important>
<title>Ignored Values</title>
<simpara>All values that start with a <literal>$</literal> sign are annotations used to display the UI that users interact with.
These annotations are not part of pillar data itself and are handled as metadata.</simpara>
</important>
<simpara>The following are valid attributes.</simpara>
<variablelist>
<varlistentry>
<term>$type</term>
<listitem>
<simpara>The most important attribute is the <literal>$type</literal> attribute.
It defines the type of the pillar value and the form-field that is generated.
The following represent the supported types:</simpara>
<itemizedlist>
<listitem>
<para><literal>text</literal></para>
</listitem>
<listitem>
<para><literal>password</literal></para>
</listitem>
<listitem>
<para><literal>number</literal></para>
</listitem>
<listitem>
<para><literal>url</literal></para>
</listitem>
<listitem>
<para><literal>email</literal></para>
</listitem>
<listitem>
<para><literal>date</literal></para>
</listitem>
<listitem>
<para><literal>time</literal></para>
</listitem>
<listitem>
<para><literal>datetime</literal></para>
</listitem>
<listitem>
<para><literal>boolean</literal></para>
</listitem>
<listitem>
<para><literal>color</literal></para>
</listitem>
<listitem>
<para><literal>select</literal></para>
</listitem>
<listitem>
<para><literal>group</literal></para>
</listitem>
<listitem>
<para><literal>edit-group</literal></para>
</listitem>
<listitem>
<para><literal>namespace</literal></para>
</listitem>
<listitem>
<para><literal>hidden-group</literal> (obsolete, renamed to <literal>namespace</literal>)</para>
<note>
<title>Text Attribute</title>
<simpara>The text attribute is the default and does not need to be specified explicitly.</simpara>
</note>
<simpara>Many of these values are self-explanatory: <literal>text</literal> will generate a simple text field, <literal>password</literal> a password field and the <literal>color</literal> type will generate a color picker.</simpara>
<simpara>The <literal>group</literal>, <literal>edit-group</literal>, and <literal>namespace</literal> (formerly <literal>hidden-group</literal>) types do not generate an editable field and are used to structure form and pillar data.
The difference between <literal>group</literal> and <literal>namespace</literal> is <literal>group</literal> generates a visible border with a heading, and <literal>namespace</literal> shows nothing visually (and is only used to structure pillar data).  The difference between <literal>group</literal> and <literal>edit-group</literal> is <literal>edit-group</literal> allows to structure and restrict editable fields in a more flexible way.
For example, <literal>edit-group</literal> supports the <literal>$minItems</literal> and <literal>$maxItems</literal> attributes, and thus it simplifies complex and repeatable input structures.
For an <literal>edit-group</literal> example, see <xref linkend="_salt.formulas.ex.edit_group"/>.</simpara>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>$default</term>
<listitem>
<simpara><literal>$default</literal> allows you to specify a default value that is displayed and used, if no other value is entered.
In an <literal>edit-group</literal> it allows to create inital members of the group and populate them with specified data.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>$name</term>
<listitem>
<simpara><literal>$name</literal> allows you to specify the name of a value that is shown in the form.
If this value is not set, the pillar name is used and capitalized without underscores and dashes.
You reference it in the same section with <literal>${name}</literal>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>$help and $placeholder</term>
<listitem>
<simpara>The <literal>$help</literal> and <literal>$placeholder</literal> attributes are used to give a user a better understanding of what the value should be. <literal>$help</literal> defines the message a user sees when hovering over a field and <literal>$placeholder</literal> displays a gray placeholder text in the field. <literal>$placeholder</literal> may only be used with text fields like text, password, email or date.
It does not make sense to add a placeholder if you also use <literal>$default</literal> as this will hide the placeholder.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>$minItems and $maxItems</term>
<listitem>
<simpara>In an <literal>edit-group</literal>, <literal>$minItems</literal> and <literal>$maxItems</literal> allow you to specify the lowest and highest number the group can occur.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>$itemName</term>
<listitem>
<simpara>In an <literal>edit-group</literal>, <literal>$itemName</literal> allows to define a template for the name to be used for the members of the group.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>$prototype</term>
<listitem>
<simpara>In an <literal>edit-group</literal>, <literal>$prototype</literal> allows to define default (or pre-filled) values for newly added members in the group.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>$scope</term>
<listitem>
<simpara><literal>$scope</literal> allows you to specify a hierarchy level at which a value may be edited.
Possible values are <literal>system</literal>, <literal>group</literal> and <literal>readonly</literal>.</simpara>
<simpara>The default <literal>$scope: system</literal> allows values to be edited at group and system levels.
A value can be entered for each system but if no value is entered the system will fall back to the group default.</simpara>
<simpara>If using <literal>$scope: group</literal>, a value may only be edited for a group.
On the system level you will be able to see the value, but not edit it.</simpara>
<simpara>The <literal>$scope: readonly</literal> option makes a field read-only.
It can be used to show a user data which should be known, but should not be editable.
This option only makes sense in combination with the $default attribute.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>$visibleIf</term>
<listitem>
<simpara><literal>$visibleIf</literal> allows you to show a field or group if a simple condition is met.
A condition always looks similar to the following example:</simpara>
<screen>some_group$another_group$my_checkbox == true</screen>
<simpara>The left part of the above statement is the path to another value, and groups are separated by <literal>$</literal> signs.
The middle section of the command should be either <literal>==</literal> for a value to be equal or <literal>!=</literal> for values that should be not equal.
The last field in the statement can be any value which a field should have or not have.</simpara>
<simpara>The field with this attribute associated with it will now be shown only when the condition is met.
In this example the field will be shown only if <literal>my_checkbox</literal> is checked.
The ability to use conditional statements is not limited to check boxes.
It may also be used to check values of select-fields, text-fields etc.</simpara>
<simpara>A check box should be structured like the following example:</simpara>
<screen>some_group:
  $type: group

  another_group:
    $type: group

      my_checkbox:
        $type: boolean</screen>
<simpara>By using multiple groups with the attribute, you can allow a user to select an option and show a completely different form, dependant upon the selected value.</simpara>
<note>
<title>Hidden Values</title>
<simpara>Values from hidden fields may be merged into the pillar data and sent to the minion.
A formula must check the condition again and use the appropriate data.
For example:</simpara>
</note>
</listitem>
</varlistentry>
</variablelist>
<screen>show_option:
  $type: checkbox
some_text:
  $visibleIf: show_option == true</screen>
<screen>{% if pillar.show_option %}
do_something:
  with: {{ pillar.some_text }}
{% endif %}</screen>
<simpara>+</simpara>
<variablelist>
<varlistentry>
<term>$values</term>
<listitem>
<simpara><literal>$values</literal> can only be used together with <literal>$type</literal>: select to specify the different options in the select-field. <literal>$values</literal> must be a list of possible values to select.
For example:</simpara>
<screen>select_something:
  $type: select
  $values: [“option1”, “option2”]</screen>
<simpara>Or alternatively:</simpara>
<screen>select_something:
  $type: select
  $values:
    - option1
    - option2</screen>
</listitem>
</varlistentry>
</variablelist>
<section xml:id="_salt.formulas.ex.edit_group"><title>Simple <literal>edit-group</literal> Example</title><example xml:id="_ex.salt.formula.edit_group">
<title>Defining Hard Disk Partitions with <literal>edit-group</literal></title>
<screen>partitions:
  $name: "Hard Disk Partitions"
  $type: "edit-group"
  $minItems: 1
  $maxItems: 4
  $itemName: "Partition ${name}"
  $prototype:
    name:
      $default: "New partition"
    mountpoint:
      $default: "/var"
    size:
      $type: "number"
      $name: "Size in GB"
  $default:
    - name: "Boot"
      mountpoint: "/boot"
    - name: "Root"
      mountpoint: "/"
      size: 5000</screen>
</example>
<simpara>After clicking <guimenu>Add</guimenu>
 for one time you will see <xref linkend="_fig_formula_custom_harddisk_partitions"/> filled with the default values.
The formula itself is called <filename>hd-partitions</filename>
 and will appear as <guimenu>Hd Partitions</guimenu>
 in the &webui;
.</simpara>
<figure>
<title><literal>edit-group</literal> Example in the &webui; <anchor xml:id="_fig_formula_custom_harddisk_partitions"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/formula-custom-harddisk-partitions.png"/>
</imageobject>
<textobject><phrase>formula custom harddisk partitions</phrase></textobject>
</mediaobject>
</figure>
<simpara>To remove definition of a partition click the minus symbol in the title line of an inner group.
When form fields are properly filled confirm with clicking <guimenu>Save Formula</guimenu>
 in the upper right corner of the formula.</simpara>
</section>
</section>
<section xml:id="_best.practice.salt.formulas.writing"><title>Writing Salt Formulas</title><simpara>Salt formulas are pre-written Salt states, which may be configured with pillar data.
You can parametrize state files using Jinja.
Jinja allows you to access pillar data by using the following syntax.
(This syntax works best when your uncertain a pillar value exists as it will throw an error):</simpara>
<screen>pillar.some.value</screen>
<simpara>When you are sure a pillar exists may also use the following syntax:</simpara>
<screen>salt['pillar.get']('some:value', 'default value')</screen>
<simpara>You may also replace the <literal>pillar</literal> value with <literal>grains</literal> (for example, <literal>grains.some.value</literal>) allowing access to grains.</simpara>
<simpara>Using data this way allows you to make a formula configurable.
The following code snippet will install a package specified in the pillar <literal>package_name</literal>.
For example:</simpara>
<screen>install_a_package:
  pkg.installed:
    - name: {{ pillar.package_name }}</screen>
<simpara>You may also use more complex constructs such as <literal>if/else</literal> and <literal>for-loops</literal> To provide greater functionality.
For Example:</simpara>
<screen>{% if pillar.installSomething %}
something:
  pkg.installed
{% else %}
anotherPackage:
  pkg.installed
{% endif %}</screen>
<simpara>Another example:</simpara>
<screen>{% for service in pillar.services %}
start_{{ service }}:
  service.running:
    - name: {{ service }}
{% endfor %}</screen>
<simpara>Jinja also provides other helpful functions.
For example, you can iterate over a dictionary:</simpara>
<screen>{% for key, value in some_dictionary.items() %}
do_something_with_{{ key }}: {{ value }}
{% endfor %}</screen>
<simpara>You may want to have Salt manage your files (for example, configuration files for a program), and you can change these with pillar data.
For example, the following snippet shows how you can manage a file using Salt:</simpara>
<screen>/etc/my_program/my_program.conf:
  file.managed:
    - source: salt://my_state/files/my_program.conf
    - template: jinja</screen>
<simpara>Salt will copy the file <filename>salt-file_roots/my_state/files/my_program.conf</filename>
 on the salt master to <filename>/etc/my_program/my_program.conf</filename>
 on the minion and template it with Jinja.
This allows you to use Jinja in the file, exactly like shown above for states:</simpara>
<screen>some_config_option = {{ pillar.config_option_a }}</screen>
</section>
<section xml:id="_best.practice.salt.formulas.data"><title>Separating Data</title><simpara>It is often a good idea to separate data from a state to increase its flexibility and add re-usability value.
This is often done by writing values into a separate file named <filename>map.jinja</filename>
.
This file should be placed within the same directory as your state files.</simpara>
<simpara>The following example will set <literal>data</literal> to a dictionary with different values, depending on which system the state runs on.
It will also merge data with the pillar using the <literal>some.pillar.data</literal> value so you can access <literal>some.pillar.data.value</literal> by just using <literal>data.value</literal>.</simpara>
<simpara>You can also choose to override defined values from pillars (for example, by overriding <literal>some.pillar.data.package</literal> in the example).</simpara>
<screen>{% set data = salt['grains.filter_by']({
    'Suse': {
        'package': 'packageA',
        'service': 'serviceA'
    },
    'RedHat': {
        'package': 'package_a',
        'service': 'service_a'
    }
}, merge=salt['pillar.get']('some:pillar:data')) %}</screen>
<simpara>After creating a map file like the above example, you can easily maintain compatibility with multiple system types while accessing "deep" pillar data in a simpler way.
Now you can import and use <literal>data</literal> in any file.
For example:</simpara>
<screen>{% from "some_folder/map.jinja" import data with context %}

install_package_a:
  pkg.installed:
    - name: {{ data.package }}</screen>
<simpara>You can also define multiple variables by copying the <literal>{% set &#8230;&#8203;
   %}</literal> statement with different values and then merge it with other pillars.
For example:</simpara>
<screen>{% set server = salt['grains.filter_by']({
    'Suse': {
        'package': 'my-server-pkg'
    }
}, merge=salt['pillar.get']('myFormula:server')) %}
{% set client = salt['grains.filter_by']({
    'Suse': {
        'package': 'my-client-pkg'
    }
}, merge=salt['pillar.get']('myFormula:client')) %}</screen>
<simpara>To import multiple variables, separate them with a comma.
For Example:</simpara>
<screen>{% from "map.jinja" import server, client with context %}</screen>
<simpara>Formulas utilized with &susemgr;
should follow formula conventions listed in the official documentation: <link xl:href="https://docs.saltstack.com/en/latest/topics/development/conventions/formulas.html">https://docs.saltstack.com/en/latest/topics/development/conventions/formulas.html</link></simpara>
</section>
<section xml:id="_best.practice.salt.formulas.pillardata"><title>&susemgr; Generated Pillar Data</title><simpara>When pillar data is generated (for example, after applying the highstate) the following external pillar script generates pillar data for packages, group ids, etc.
and includes all pillar data for a system:</simpara>
<screen>/usr/share/susemanager/modules/pillar/suma_minion.py</screen>
<simpara>The process is executed as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>The <literal>suma_minion.py</literal> script starts and finds all formulas for a system (by checking the <literal>group_formulas.json</literal> and <literal>server_formulas.json</literal> files).</para>
</listitem>
<listitem>
<para><literal>suma_minion.py</literal> loads the values for each formula (groups and from the system) and merges them with the highstate (default: if no values are found, a group overrides a system if $scope: group etc.).</para>
</listitem>
<listitem>
<para><literal>suma_minion.py</literal> also includes a list of formulas applied to the system in a pillar named formulas. This structure makes it possible to include states. The top file (in this case specifically generated by the <literal>mgr_master_tops.py</literal> script) includes a state called formulas for each system. This includes the <literal>formulas.sls</literal> file located in:</para>
<screen>/usr/share/susemanager/formulas/states/</screen>
<simpara>The content looks similar to the following:</simpara>
<screen>include: {{ pillar["formulas"] }}</screen>
<simpara>This pillar includes all formulas, that are specified in pillar data generated from the external pillar script.</simpara>
</listitem>
</orderedlist>
</section>
<section xml:id="_best.practice.salt.formulas.req"><title>Formula Requirements</title><simpara>Formulas should be designed/created directly after a &susemgr;
installation, but if you encounter any issues check the following:</simpara>
<itemizedlist>
<listitem>
<para>The external pillar script (<literal>suma_minion.py</literal>) must include formula data.</para>
</listitem>
<listitem>
<para>Data is saved to <filename>/srv/susemanager/formula_data</filename> and the <filename>pillar</filename> and <filename>group_pillar</filename> sub-directories. These should be automatically generated by the server.</para>
</listitem>
<listitem>
<para>Formulas must be included for every minion listed in the top file. Currently this process is initiated by the <filename>mgr_master_tops.py</filename> script which includes the formulas.sls file located in:</para>
<screen>/usr/share/susemanager/formulas/states/</screen>
<simpara>This directory must be a salt file root.
File roots are configured on the salt-master (&susemgr;
) located in:</simpara>
<screen>/etc/salt/master.d/susemanager.conf</screen>
</listitem>
</itemizedlist>
</section>
<section xml:id="_best.practice.salt.formulas.using"><title>Using Salt Formulas with &susemgr;</title><simpara>The following procedure provides an overview on using Salt Formulas with &susemgr;
.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Official formulas may be installed as RPMs. If you have written your own formulas, place the states within <filename>/srv/salt/your-formula-name/</filename> and the metadata (<filename>form.yml</filename> and <filename>metadata.yml</filename> ) in <filename>/srv/formula_metadata/your-formula-name/</filename> . After installing your formulas they will appear in <menuchoice><guimenu>Salt</guimenu> <guimenuitem>Formula Catalog</guimenuitem></menuchoice> .</para>
</listitem>
<listitem>
<para>To begin using a formula, apply it to a group or system. Apply a formula to a group or system by selecting the <guimenu>Formulas</guimenu> tab of a system&#8217;s details page or system group. From the <guimenu>Formulas</guimenu> page you can select any formulas you wish to apply to a group or system. Click the <guimenu>Save</guimenu> button to save your changes to the database.</para>
</listitem>
<listitem>
<para>After applying one or more formulas to a group or system, additional tabs will become available from the top menu, one for each formula selected. From these tabs you may configure your formulas.</para>
</listitem>
<listitem>
<para>When you have finished customizing your formula values you will need to apply the highstate for them to take effect. Applying the highstate will execute the state associated with the formula and configure targeted systems. You can use the <guimenu>Apply Highstate</guimenu> button from any formulas page of a group.</para>
</listitem>
<listitem>
<para>When a change to any of your values is required or you need to re-apply the formula state because of a failure or bug, change values located on your formula pages and re-apply the highstate. Salt will ensure that only modified values are adjusted and restart or reinstall services only when necessary.</para>
</listitem>
</orderedlist>
<simpara>This conclude your introduction to Salt Formulas.
For additional information, see <link xl:href="https://docs.saltstack.com/en/latest/topics/development/conventions/formulas.html">https://docs.saltstack.com/en/latest/topics/development/conventions/formulas.html</link>.</simpara>
</section>
</chapter>
<chapter xml:id="_bp.chapt.config.management.with.salt"><title>Configuration Management with Salt</title><section xml:id="_bp.chapt.config.mgr.overview"><title>Configuration Management Overview</title><simpara>Salt is capable of applying states by matching minions with relevant state data.
This data comes from &susemgr;
in the form of package and custom states.</simpara>
</section>
<section xml:id="_bp.chapt.config.mgr.level.hierarchy"><title>State Data</title><subtitle>Levels of Hierarchy</subtitle><simpara>State data comes from &susemgr;
in the form of package and custom states and targets minions at three specific levels of hierarchy.
The state hierarchy is defined by the following order or priority: individual minions have priority on packages and custom states over groups; next a group has priority over the organization.</simpara>
<itemizedlist>
<listitem>
<para>Minion Level</para>
<simpara><menuchoice><guimenu>Systems</guimenu> <guisubmenu>Specific Minion</guisubmenu> <guimenuitem>States</guimenuitem></menuchoice></simpara>
</listitem>
<listitem>
<para>Group Level</para>
<simpara><menuchoice><guimenu>Systems</guimenu> <guimenuitem>System Groups</guimenuitem></menuchoice></simpara>
</listitem>
<listitem>
<para>Organization Level</para>
<simpara><menuchoice><guimenu>Systems</guimenu> <guisubmenu>Manage System Types:</guisubmenu> <guimenuitem>My Organization</guimenuitem></menuchoice></simpara>
</listitem>
</itemizedlist>
<simpara>For example:</simpara>
<itemizedlist>
<listitem>
<para>Org1 requires that vim version 1 is installed</para>
</listitem>
<listitem>
<para>Group1 requires that vim version 2 is installed</para>
</listitem>
<listitem>
<para>Group2 requires any version installed</para>
</listitem>
</itemizedlist>
<simpara>This would lead to the following order of hierarchy:</simpara>
<itemizedlist>
<listitem>
<para>Minion1 part of [Org1, Group1] wants vim removed, vim is removed (Minion Level)</para>
</listitem>
<listitem>
<para>Minion2 part of [Org1, Group1] wants vim version 2 gets version 2 (Group Level)</para>
</listitem>
<listitem>
<para>Minion3 part of [Org1, Group1] wants any version, gets version 2 (Org Level)</para>
</listitem>
<listitem>
<para>Minion4 part of[Org1, Group2] wants any version, gets vim version 1 (Org Level)</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_bp.chapt.config.mgr.salt.states.storage.locations"><title>Salt States Storage Locations</title><simpara>The &susemgr;
salt-master reads its state data from three file root locations.</simpara>
<simpara>The directory <filename>/usr/share/susemanager/salt</filename>
 is used by &susemgr;
 and comes from the susemanager-sls.
It is shipped and updated together with &susemgr;
 and includes certificate setup and common state logic to be applied to packages and channels.</simpara>
<simpara>The directory <filename>/srv/susemanager/salt</filename>
 is generated by &susemgr;
 and based on assigned channels and packages for minions, groups and organizations.
This file will be overwritten and regenerated.
This could be thought of as the &susemgr;
 database translated into salt directives.</simpara>
<simpara>The third directory <filename>/srv/salt</filename>
 is for custom state data, modules etc. &susemgr;
 does not operate within or utilize this directory.
However the state data placed here affects the Highstate of minions and is merged with the total state result generated by &susemgr;
.</simpara>
</section>
<section xml:id="_bp.chapt.config.mgr.susemgr.states"><title>&susemgr; States</title><simpara>All sls files created by users will be saved to disk on the salt-master server.
These files will be placed in <filename>/srv/susemanager/salt/</filename>
 and each organization will be placed within its own directory.
Although these states are custom, these states are created using &susemgr;
.
The following provides an overview of directory structure:</simpara>
<screen>├── manager_org_DEVEL
│   ├── files
│   │    ... files needed by states (uploaded by users)...
│   └── state.sls
         ... other sls files (created by users)...
E.g.:
├── manager_org_TESTING
│   ├── files
│   │   └── motd     # user created
│   │    ... other files needed by states ...
│   └── motd.sls     # user created
            ... other sls files ...</screen>
</section>
<section xml:id="_bp.chapt.config.mgr.pillar.data.exposed.susemgr"><title>Pillar Data Exposed by &susemgr;</title><simpara>SUSE Manager exposes a small amount of internal data like group membership, organization membership and file roots as pillars which can be used with custom sls states.
These are managed by &susemgr;
or by the user.</simpara>
<simpara>To avoid hard-coding organization id&#8217;s within sls files, a pillar entry is added for each organization:</simpara>
<screen>org-files-dir: relative_path_to_files</screen>
<simpara>This file will be available for all minions which belong to this organization.</simpara>
<simpara>The following represents a Pillar example located in <filename>/etc/motd</filename>
:</simpara>
<screen>file.managed:
    - source: salt://{{ pillar['org-files-dir']}}/motd
    - user: root
    - group: root
    - mode: 644</screen>
</section>
</chapter>
<chapter xml:id="_bp.chap.salt.minion.scaleability"><title>Salt Minion Scalability</title><section xml:id="_salt_minion_onboarding_rate"><title>Salt Minion Onboarding Rate</title><simpara>The rate at which SUSE Manager can on-board minions (accept Salt keys) is limited and depends on hardware resources.
On-boarding minions at a faster rate than SUSE Manager is configured for will build up a backlog of unprocessed keys slowing the process and potentially exhausting resources.
It is recommended to limit the acceptance key rate pro-grammatically.
A safe starting point would be to on-board a minion every 15 seconds, which can be implemented via the following command:</simpara>
<screen>for k in $(salt-key -l un|grep -v Unaccepted); do salt-key -y -a $k; sleep 15; done</screen>
</section>
<section xml:id="_bp.chap.salt.minion.scaleability.unaccepted"><title>Minions Running with Unaccepted Salt Keys</title><simpara>Minions which have not been on-boarded, (minions running with unaccepted Salt keys) consume resources, in particular inbound network bandwidth for ~2.5 Kb/s per minion.
1000 idle minions will consume around ~2.5 Mb/s, and this number will drop to almost 0 once on-boarding has been completed.
Limit non-onboarded systems for optimal performance.</simpara>
<simpara>Salt&#8217;s official documentation suggests the maximum number of opened files should be set to at least 2 × the minion count.
Current default is 16384, which is sufficient for ~8000 minions.
For larger installations, this number may be increased by editing the following line in <filename>/usr/lib/systemd/system/salt-master.service</filename>
:</simpara>
<screen>LimitNOFILE=16384</screen>
</section>
<section xml:id="_bp.chap.salt.minion.scaleability.timeouts"><title>Salt Timeouts</title><section xml:id="_background_information"><title>Background Information</title><simpara>Salt features two timeout parameters called <literal>timeout</literal> and <literal>gather_job_timeout</literal> that are relevant during the execution of Salt commands and jobs&#8212;&#8203;it does not matter whether they are triggered using the command line interface or API.
These two parameters are explained in the following article.</simpara>
<simpara>This is a normal workflow when all minions are well reachable:</simpara>
<itemizedlist>
<listitem>
<para>A salt command or job is executed:</para>
<screen>salt '*' test.ping</screen>
</listitem>
<listitem>
<para>Salt master publishes the job with the targeted minions into the Salt PUB channel.</para>
</listitem>
<listitem>
<para>Minions take that job and start working on it.</para>
</listitem>
<listitem>
<para>Salt master is looking at the Salt RET channel to gather responses from the minions.</para>
</listitem>
<listitem>
<para>If Salt master gets all responses from targeted minions, then everything is completed and Salt master will return a response containing all the minion responses.</para>
</listitem>
</itemizedlist>
<simpara>If some of the minions are down during this process, the workflow continues as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>If <literal>timeout</literal> is reached before getting all expected responses from the minions, then Salt master would trigger an aditional job (a Salt <command>find_job</command> job) targeting only pending minions to check whether the job is already running on the minion.</para>
</listitem>
<listitem>
<para>Now <literal>gather_job_timeout</literal> is evaluated. A new counter is now triggered.</para>
</listitem>
<listitem>
<para>If this new <command>find_job</command> job responses that the original job is actually running on the minion, then Salt master will wait for that minion&#8217;s response.</para>
</listitem>
<listitem>
<para>In case of reaching <literal>gather_job_timeout</literal> without having any response from the minion (neither for the initial <command>test.ping</command> nor for the <command>find_job</command> job), Salt master will return with only the gathered responses from the responding minions.</para>
</listitem>
</orderedlist>
<simpara>By default, &susemgr;
globally sets <literal>timeout</literal> and <literal>gather_job_timeout</literal> to 120 seconds.
So, in the worst case, a Salt call targeting unreachable minions will end up <emphasis>with 240 seconds of waiting</emphasis> until getting a response.</simpara>
</section>
<section xml:id="_bp.chap.salt.minion.scaleability.timeouts.presence"><title>A Presence Ping Mechanism for Unreachable Salt Minions</title><simpara>In order to prevent waiting until timeouts are reached when some minions are down, &suse;
introduced a so-called "presence mechanism" for Salt minions.</simpara>
<simpara>This presence mechanism checks for unreachable Salt minions when &susemgr;
is performing synchronous calls to these minions, and it excludes unreachable minions from that call.
Synchronous calls are going to be displaced in favor of asynchronous calls but currently still being used during some workflows.</simpara>
<simpara>The presence mechanism triggers a Salt <command>test.ping</command> with a custom and fixed short Salt timeout values.
Default Salt values for the presence ping are: <literal>timeout
     = 4</literal> and <literal>gather_job_timeout = 1</literal>.
This way, we can quickly detect which targeted minions are unreachable, and then exclude them from the synchronous call.</simpara>
</section>
<section xml:id="_overriding_salt_presence_timeout_values"><title>Overriding Salt Presence Timeout Values</title><simpara>&susemgr;
administrators can increase or decrease default presence ping timeout values by removing the comment markers (<literal>\#</literal>) and setting the desired values for <literal>salt_presence_ping_timeout</literal> and <literal>salt_presence_ping_gather_job_timeout</literal> options in <filename>/etc/rhn/rhn.conf</filename>
:</simpara>
<screen># SUSE Manager presence timeouts for Salt minions
# salt_presence_ping_timeout = 4
# salt_presence_ping_gather_job_timeout = 1</screen>
</section>
<section xml:id="_salt_ssh_minions_ssh_push"><title>Salt SSH Minions (SSH Push)</title><simpara>Salt SSH minions are slightly different that regular minions (zeromq). Salt SSH minions do not use Salt PUB/RET channels but a wrapper Salt command inside of an SSH call.
Salt <literal>timeout</literal> and <literal>gather_job_timeout</literal> are not playing a role here.</simpara>
<simpara>&susemgr;
defines a timeout for SSH connections in <filename>/etc/rhn/rhn.conf</filename>
:</simpara>
<screen># salt_ssh_connect_timeout = 180</screen>
<simpara>The presence ping mechanism is also working with SSH minions.
In this case, &susemgr;
will use <literal>salt_presence_ping_timeout</literal> to override the default timeout value for SSH connections.</simpara>
</section>
</section>
</chapter>
<chapter xml:id="_bp.key.managment"><title>Activation Key Management</title><section xml:id="_what_are_activation_keys"><title>What are Activation Keys?</title><simpara>An <literal>activation key</literal> in &susemgr;
 is a group of configuration settings with a label.
You can apply all configuration settings associated with an activation key by adding its label as a parameter to a bootstrap script.
Under normal operating conditions best practices suggest using an activation key label in combination with a bootstrap script.</simpara>
<simpara>An activation key can specify:</simpara>
<itemizedlist>
<listitem>
<para>Channel Assignment</para>
</listitem>
<listitem>
<para>System Types (Traditionally called Add-on Entitlements)</para>
</listitem>
<listitem>
<para>Contact Method</para>
</listitem>
<listitem>
<para>Configuration Files</para>
</listitem>
<listitem>
<para>Packages to be Installed</para>
</listitem>
<listitem>
<para>System Group Assignment</para>
</listitem>
</itemizedlist>
<simpara>Activation keys are just a collection of configuration settings which have been given a label name and then added to a bootstrap script.
When the bootstrap script is executed all configuration settings associated with the label are applied to the system the script is run on.</simpara>
</section>
<section xml:id="_provisioning_and_configuration"><title>Provisioning and Configuration</title><figure>
<title>Provisioning and Configuration Overview</title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/provision-config-keys.png" width="80%"/>
</imageobject>
<textobject><phrase>provision config keys</phrase></textobject>
</mediaobject>
</figure>
</section>
<section xml:id="_activation_keys_best_practices"><title>Activation Keys Best Practices</title><simpara>There are a few important concepts which should be kept in mind when creating activation keys.
The following sections provide insight when creating and naming your activation keys.</simpara>
<section xml:id="_key_label_naming"><title>Key Label Naming</title><simpara>One of the most important things to consider during activation key creation is label naming.
Creating names which are associated with your organization&#8217;s infrastructure will make it easier for you when performing more complex operations.
When naming key labels keep the following in mind:</simpara>
<itemizedlist>
<listitem>
<para>OS naming (mandatory): Keys should always refer to the OS they provide settings for</para>
</listitem>
<listitem>
<para>Architecture naming (recommended): Unless your company is running on one architecture only, for example x86_64, then providing labels with an architecture type is a good idea.</para>
</listitem>
<listitem>
<para>Server type naming: What is, or what will this server be used for?</para>
</listitem>
<listitem>
<para>Location naming: Where is the server located? Room, building, or department?</para>
</listitem>
<listitem>
<para>Date naming: Maintenance windows, quarter, etc.</para>
</listitem>
<listitem>
<para>Custom naming: What naming scheme suits your organizations needs?</para>
</listitem>
</itemizedlist>
<simpara>Example activation key label names:</simpara>
<screen>sles12-sp2-web_server-room_129-x86_64</screen>
<screen>sles12-sp2-test_packages-blg_502-room_21-ppc64le</screen>
</section>
<section xml:id="_channels_which_will_be_included"><title>Channels which will be Included</title><simpara>When creating activation keys you also need to keep in mind which channels (software sources) will be associated with it.</simpara>
<important>
<title>Default Base Channel</title>
<simpara>Keys should have a specific base channel assigned to it, for example <literal>SLES12-SP2-Pool-x86_64</literal>.
If this is not the case &susemgr;
 cannot utilize specific stages.
Using the default base channel is not recommended and may cause problems.</simpara>
</important>
<itemizedlist>
<listitem>
<para>Channels to be included:</para>
<itemizedlist>
<listitem>
<para>suse-manager-tools</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Typical packages to be included:</para>
<itemizedlist>
<listitem>
<para>osad (pushing tasks)</para>
<itemizedlist>
<listitem>
<para>Installs <package>python-jabberpy</package> and <package>pyxml</package> as dependencies</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para><package>rhncfg-actions</package> (Remote Command, Configuration Managment)</para>
<itemizedlist>
<listitem>
<para>Installs <package>rhncfg</package> and <package>rhncfg-client</package> as dependencies</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</section>
</section>
<section xml:id="_combining_activation_keys"><title>Combining Activation Keys</title><simpara>You can combine activation keys when executing the bootstrap script on your clients.
Combining keys allows for more control on what is installed on your systems and reduces duplication of keys for large complex environments.</simpara>
<figure>
<title>Combining Activation Keys</title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/combine-keys.png" width="80%"/>
</imageobject>
<textobject><phrase>combine keys</phrase></textobject>
</mediaobject>
</figure>
<figure>
<title>Combining Activation Keys 2</title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/combine-keys2.png" width="80%"/>
</imageobject>
<textobject><phrase>combine keys2</phrase></textobject>
</mediaobject>
</figure>
</section>
<section xml:id="_using_activation_keys_and_bootstrap_with_traditional_clients_non_salt"><title>Using Activation Keys and Bootstrap with Traditional Clients (Non-Salt)</title><simpara>Create the initial bootstrap script template from the command line on the &susemgr;
server with:</simpara>
<screen># mgr-bootstrap</screen>
<simpara>This command will generate the bootstrap script and place them in <filename>/srv/www/htdocs/pub/bootstrap</filename>
.</simpara>
<simpara>Alternatively you may use the &webui;
to create your bootstrap script template.
For more information, see <xref linkend="_s3_sattools_config_bootstrap"/>.</simpara>
<simpara>Use the &webui;
to create your keys.
From the &webui;
proceed to <menuchoice><guimenu>Overview</guimenu> <guisubmenu>Tasks</guisubmenu> <guimenuitem>Manage
   Activation Keys</guimenuitem></menuchoice>
.</simpara>
</section>
<section xml:id="_bp.chapt.act.keys.with.salt.minions"><title>Using Activation Keys when Registering Salt Minions</title><simpara>With the addition of Salt to &susemgr;
 3 states should now be considered best practice over the more traditional way of combining activation keys.
Although states allow for more configuration options you need to place the new system within the correct group so the desired states will be applied to the system.
Using an activation key on your minions will place the system within the correct group automatically.</simpara>
<simpara>You should be aware of a few facts when working with Salt over traditional activation keys:</simpara>
<itemizedlist>
<listitem>
<para>Currently we do not support specifying an activation key on the minion on-boarding page.</para>
</listitem>
<listitem>
<para>Activation keys used with Salt minions are the same as those used with traditional systems and may be shared.</para>
</listitem>
<listitem>
<para>The equivalent of specifying a key using the traditional bootstrap method is to place the desired key in the grain of a minion. For more information on grains, see <link xl:href="https://docs.saltstack.com/en/latest/topics/targeting/grains.html">https://docs.saltstack.com/en/latest/topics/targeting/grains.html</link></para>
</listitem>
<listitem>
<para>Once a minion has been accepted either from the <menuchoice><guimenu>Salt</guimenu> <guimenuitem>Keys</guimenuitem></menuchoice> page located in the &webui; or from the command line, all configurations specified by the activation key placed within a salt grain will be applied.</para>
</listitem>
<listitem>
<para>Currently you may only use one activation key when working with salt. You cannot combine them, despite this, salt states allow for even more control.</para>
</listitem>
</itemizedlist>
<section xml:id="_using_an_activation_key_and_custom_grains_file"><title>Using an Activation Key and Custom Grains File</title><simpara>Create a custom grains file and place it on the minion here:</simpara>
<screen># /etc/salt/grains</screen>
<simpara>Then add the following lines to the grains file replacing 1-sles12-sp2 with your activation key label:</simpara>
<screen>susemanager:
  activation_key: 1-sles12-sp2</screen>
<simpara>Now restart the minion with:</simpara>
<screen># systemctl restart salt-minion</screen>
</section>
<section xml:id="_using_an_activation_key_in_the_minion_configuration_file"><title>Using an Activation Key in the Minion Configuration File</title><simpara>You may also place the activation key grain within the minion configuration file located in:</simpara>
<screen># /etc/salt/minion</screen>
<simpara>Now add the following lines to the minion configuration file replacing 1-sles12-sp2 with your activation key label:</simpara>
<screen>grains:
  susemanager:
    activation_key: 1-sles12-sp2</screen>
<simpara>Reboot the minion with:</simpara>
<screen># systemctl restart salt-minion</screen>
</section>
</section>
</chapter>
<chapter xml:id="_bp.systems.management"><title>Contact Methods</title><section xml:id="_selecting_a_contact_method"><title>Selecting a Contact Method</title><simpara>&susemgr;
provides several methods for communication between client and server.
All commands your &susemgr;
server sends its clients to do will be routed through one of them.
Which one you select will depend on your network infrastructure.
The following sections provide a starting point for selecting a method which best suits your network environment.</simpara>
<note>
<title>Contact Methods and Salt</title>
<simpara>This chapter is only relevant for traditional clients as Salt clients (minions) utilize a Salt specific contact method.
For general information about Salt clients, see <xref linkend="_salt.gs.guide.intro"/>.</simpara>
</note>
</section>
<section xml:id="_bp.contact.methods.rhnsd"><title>Default (the &susemgr; Daemon rhnsd)</title><simpara>The &susemgr;
daemon (<command>rhnsd</command>) runs on client systems and periodically connects with &susemgr;
 to check for new updates and notifications.
The daemon, which runs in the background, is started by <literal role="systemitem">rhnsd.service</literal>
.
By default, it will check every 4 hours for new actions, therefore it may take some time for your clients to begin updating after actions have been scheduled for them.</simpara>
<simpara>To check for updates, <literal role="systemitem">rhnsd</literal>
 runs the external <literal role="systemitem">mgr_check</literal>
 program located in <filename>/usr/sbin/</filename>
.
This is a small application that establishes the network connection to &susemgr;
.
The SUSE Manager daemon does not listen on any network ports or talk to the network directly.
All network activity is done via the <literal role="systemitem">mgr_check</literal>
 utility.</simpara>
<warning>
<title>Auto accepting (EULAs)</title>
<simpara>When new packages or updates are installed on the client via &susemgr;
, any licenses (EULAs) requiring agreement before installation are automatically accepted.</simpara>
</warning>
<simpara>This figure provides an overview of the default <literal role="systemitem">rhnsd</literal>
 process path.
All items left of the <literal role="systemitem">Python XMLRPC server</literal>
 block represent processes running on a &susemgr;
 client.</simpara>
<figure>
<title>rhnsd Contact Method</title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/rhnsd-taigon.png" width="80%"/>
</imageobject>
<textobject><phrase>rhnsd taigon</phrase></textobject>
</mediaobject>
</figure>
<section xml:id="_configuring_susemgr_rhnsd_daemon"><title>Configuring &susemgr; rhnsd Daemon</title><simpara>The &susemgr;
daemon can be configured by editing the file on the client:</simpara>
<screen>/etc/sysconfig/rhn/rhnsd</screen>
<simpara>This is the configuration file the rhnsd initialization script uses.
An important parameter for the daemon is its check-in frequency.
The default interval time is four hours (240 minutes). If you modify the configuration file, you must as &rootuser;
restart the daemon with <command>systemctl rhnsd restart</command>.</simpara>
<important>
<title>Minimum Allowed Check-in Parameter</title>
<simpara>The minimum allowed time interval is one hour (60 minutes). If you set the interval below one hour, it will change back to the default of 4 hours (240 minutes).</simpara>
</important>
</section>
<section xml:id="_viewing_rhnsd_daemon_status"><title>Viewing rhnsd Daemon Status</title><simpara>You can view the status of rhnsd by typing the command <command>systemctl status
     rhnsd</command> as &rootuser;
.</simpara>
</section>
</section>
<section xml:id="_bp.contact.methods.ssh.push"><title>Push via SSH</title><simpara>Push via SSH is intended to be used in environments where your clients cannot reach the &susemgr;
server directly to regularly check in and, for example, fetch package updates.</simpara>
<simpara>In detail, this feature enables a &susemgr;
located within an internal network to manage clients located on a <quote>Demilitarized Zone</quote>
 (DMZ) outside of the firewall protected network.
Due to security reasons, no system on a DMZ is authorized to open a connection to the internal network and therefore your &susemgr;
 server.
The solution is to configure Push via SSH which utilizes an encrypted tunnel from your &susemgr;
 server on the internal network to the clients located on the DMZ.
After all actions/events are executed, the tunnel is closed.
The server will contact the clients in regular intervals (using SSH) to check in and perform all actions and events.</simpara>
<important>
<title>Push via SSH Unsupported Actions</title>
<simpara>Certain actions are currently not supported on scheduled clients which are managed via Push via SSH.
This includes re-installation of systems using the provisioning module.</simpara>
</important>
<simpara>The following figure provides an overview of the Push via SSH process path.
All items left of the <literal role="systemitem">Taskomatic</literal>
 block represent processes running on a &susemgr;
 client.</simpara>
<figure>
<title>Push via SSH Contact Method</title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/sshpush-taigon.png" width="80%"/>
</imageobject>
<textobject><phrase>sshpush taigon</phrase></textobject>
</mediaobject>
</figure>
<section xml:id="_bp.contact.methods.ssh.push.requirements"><title>Configuring the Server for Push via SSH</title><simpara>For tunneling connections via SSH, two available port numbers are required, one for tunneling HTTP and the second for tunneling via HTTPS (HTTP is only necessary during the registration process). The port numbers used by default are <literal>1232</literal> and <literal>1233</literal>.
To overwrite these, add two custom port numbers greater than 1024 to <filename>/etc/rhn/rhn.conf</filename>
 like this:</simpara>
<screen>ssh_push_port_http = high port 1
ssh_push_port_https = high port 2</screen>
<simpara>If you would like your clients to be contacted via their hostnames instead of an IP address, set the following option:</simpara>
<screen>ssh_push_use_hostname = true</screen>
<simpara>It is also possible to adjust the number of threads to use for opening client connections in parallel.
By default two parallel threads are used.
Set <literal role="systemitem">taskomatic.ssh_push_workers</literal>
 in <filename>/etc/rhn/rhn.conf</filename>
 like this:</simpara>
<screen>taskomatic.ssh_push_workers = number</screen>
</section>
<section xml:id="_bp.contact.methods.ssh.push.sudo"><title>Using sudo with Push via SSH</title><simpara>For security reasons you may desire to use sudo and SSH into a system as a user other than &rootuser;
.
The following procedure will guide you through configuring sudo for use with Push via SSH.</simpara>
<note>
<title>sudo Requirements</title>
<simpara>The packages <filename>spacewalk-taskomatic &gt;= 2.1.165.19</filename>
 and <filename>spacewalk-certs-tools &#8658; 2.1.6.7</filename>
 are required for using sudo with Push via SSH.</simpara>
</note>
<orderedlist xml:id="_pro.bp.contact.methods.ssh.push.sudo.user" numeration="arabic">
<title>Procedure: Configuring sudo</title>
<listitem>
<para>Set the following parameter on the server located in <filename>/etc/rhn/rhn.conf</filename> .</para>
<screen>ssh_push_sudo_user =`user`</screen>
<simpara>The server will use sudo to ssh as the configured <replaceable>user</replaceable>.</simpara>
</listitem>
<listitem>
<para>You must create the user specified in <xref linkend="_pro.bp.contact.methods.ssh.push.sudo.user"/> on each of your clients and the following parameters should be commented out within each client&#8217;s <filename>/etc/sudoers</filename> file:</para>
<screen>#Defaults targetpw   # ask for the password of the target user i.e. root
#ALL    ALL=(ALL) ALL   # WARNING! Only use this together with 'Defaults targetpw'!</screen>
</listitem>
<listitem>
<para>Add the following lines beneath the <literal>\## User privilege specification</literal> section of each client&#8217;s <filename>/etc/sudoers</filename> file:</para>
<screen>&lt;user&gt; ALL=(ALL) NOPASSWD:/usr/sbin/mgr_check
&lt;user&gt; ALL=(ALL) NOPASSWD:/home/&lt;user&gt;/enable.sh
&lt;user&gt; ALL=(ALL) NOPASSWD:/home/&lt;user&gt;/bootstrap.sh</screen>
</listitem>
<listitem>
<para>On each client add the following two lines to the <filename>/home/user/.bashrc</filename> file:</para>
<screen>PATH=$PATH:/usr/sbin
export PATH</screen>
</listitem>
</orderedlist>
</section>
<section xml:id="_client_registration"><title>Client Registration</title><simpara>As your clients cannot reach the server, you will need to register your clients from the server.
A tool for performing registration of clients from the server is included with &susemgr;
and is called <command>mgr-ssh-push-init</command>.
This tool expects a client&#8217;s hostname or IP address and the path to a valid bootstrap script located in the server&#8217;s filesystem for registration as parameters.</simpara>
<important>
<title>Specifying Ports for Tunneling before Registering Clients</title>
<simpara>The ports for tunneling need to be specified before the first client is registered.
Clients already registered before changing the port numbers must be registered again, otherwise the server will not be able to contact them anymore.</simpara>
</important>
<note>
<title><command>mgr-ssh-push-init</command> Disables rhnsd</title>
<simpara>The <command>mgr-ssh-push-init</command> command disables the <literal role="systemitem">rhnsd</literal>
 daemon which normally checks for updates every 4 hours.
Because your clients cannot reach the server without using the Push via SSH contact method, the <literal role="systemitem">rhnsd</literal>
 daemon is disabled.</simpara>
</note>
<simpara>For registration of systems which should be managed via the Push via SSH tunnel contact method, it is required to use an activation key that is configured to use this method.
Normal <literal role="systemitem">Push via SSH</literal>
 is unable to reach the server.
For managing activation keys, see <xref linkend="_bp.key.managment"/>.</simpara>
<simpara>Run the following command as &rootuser;
on the server to register a client:</simpara>
<screen># mgr-ssh-push-init --client client --register \
/srv/www/htdocs/pub/bootstrap/bootstrap_script --tunnel</screen>
<simpara>To enable a client to be managed using Push via SSH (without tunneling), the same script may be used.
Registration is optional since it can also be done from within the client in this case. <command>mgr-ssh-push-init</command> will also automatically generate the necessary SSH key pair if it does not yet exist on the server:</simpara>
<screen># mgr-ssh-push-init --client`client`--register bootstrap_script</screen>
<simpara>When using the Push via SSH tunnel contact method, the client is configured to connect &susemgr;
via the high ports mentioned above (see <filename>/etc/sysconfig/rhn/up2date</filename>
). Tools like <command>rhn_check</command> and <command>zypper</command> will need an active SSH session with the proper port forwarding options in order to access the &susemgr;
 API.
To verify the Push via SSH tunnel connection manually, run the following command on the &susemgr;
 server:</simpara>
<screen># ssh -i /root/.ssh/id_susemanager -R high port: susemanager :443`client`zypper ref</screen>
</section>
<section xml:id="_bp.contact.methods.ssh.push.api.support"><title>API Support for Push via SSH</title><simpara>The contact method to be used for managing a server can also be modified via the API.
The following example code (python) shows how to set a system&#8217;s contact method to <literal>ssh-push</literal>.
Valid values are:</simpara>
<itemizedlist>
<listitem>
<para><literal>default</literal> (pull)</para>
</listitem>
<listitem>
<para><literal>ssh-push</literal></para>
</listitem>
<listitem>
<para><literal>ssh-push-tunnel</literal></para>
</listitem>
</itemizedlist>
<screen>client = xmlrpclib.Server(SUMA_HOST + "/rpc/api", verbose=0)
key = client.auth.login(SUMA_LOGIN, SUMA_PASSWORD)
client.system.setDetails(key, 1000012345, {'contact_method' : 'ssh-push'})</screen>
<note>
<title>Migration and Management via Push via SSH</title>
<simpara>When a system should be migrated and managed using Push via SSH, it requires setup using the <literal role="systemitem">mgr-ssh-push-init</literal>
 script before the server can connect via SSH.
This separate command requires human interaction to install the server&#8217;s SSH key onto the managed client (&rootuser;
 password). The following procedure illustrates how to migrate an already registered system:</simpara>
</note>
<orderedlist numeration="arabic">
<title>Procedure: Migrating Registered Systems</title>
<listitem>
<para>Setup the client using the <literal role="systemitem">mgr-ssh-push-init</literal> script (without <option>--register</option>).</para>
</listitem>
<listitem>
<para>Change the client&#8217;s contact method to <literal>ssh-push</literal> or <literal>ssh-push-tunnel</literal> respectively (via API or Web UI).</para>
</listitem>
</orderedlist>
<simpara>Existing activation keys can also be edited via API to use the Push via SSH contact method for clients registered with these keys:</simpara>
<screen>client.activationkey.setDetails(key, '1-mykey', {'contact_method' : 'ssh-push'})</screen>
</section>
<section xml:id="_bp.contact.methods.ssh.push.proxy.support"><title>Proxy Support with Push via SSH</title><simpara>It is possible to use Push via SSH to manage systems that are connected to the &susemgr;
server via a proxy.
To register a system, run <literal role="systemitem">mgr-ssh-push-init</literal>
 on the proxy system for each client you wish to register.
Update your proxy with the latest packages to ensure the registration tool is available.
It is necessary to copy the ssh key to your proxy.
This can be achieved by executing the following command from the server:</simpara>
<screen>{prompt.root}mgr-ssh-push-init --client`proxy`</screen>
</section>
</section>
<section xml:id="_bp.contact.methods.saltssh.push"><title>Push via Salt SSH</title><simpara>Push via Salt SSH is intended to be used in environments where your Salt clients cannot reach the &susemgr;
server directly to regularly checking in and, for example, fetch package updates.</simpara>
<note>
<title>Push via SSH</title>
<simpara>This feature is not related to Push via SSH for the traditional clients.
For Push via SSH, see <xref linkend="_bp.contact.methods.ssh.push"/>.</simpara>
</note>
<section xml:id="_overview"><title>Overview</title><figure>
<title>Push via Salt SSH Contact Method</title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/salt-ssh-contact-taigon.png" width="80%"/>
</imageobject>
<textobject><phrase>salt ssh contact taigon</phrase></textobject>
</mediaobject>
</figure>
<simpara>Salt provides <quote>Salt SSH</quote>
 (<command>salt-ssh</command>), a feature to manage clients from a server.
It works without installing Salt related software on clients.
Using Salt SSH there is no need to have minions connected to the Salt master.
Using this as a &susemgr;
 connect method, this feature provides similar functionality for Salt clients as the traditional Push via SSH feature for traditional clients.</simpara>
<simpara>This feature allows:</simpara>
<itemizedlist>
<listitem>
<para>Managing Salt entitled systems with the Push via SSH contact method using Salt SSH.</para>
</listitem>
<listitem>
<para>Bootstrapping such systems.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_requirements"><title>Requirements</title><itemizedlist>
<listitem>
<para>SSH daemon must be running on the remote system and reachable by the <literal role="systemitem">salt-api</literal> daemon (typically running on the &susemgr; server).</para>
</listitem>
<listitem>
<para>Python must be available on the remote system (Python must be supported by the installed Salt). Currently: python 2.6.</para>
</listitem>
</itemizedlist>
<note>
<title>Unsupported Systems</title>
<simpara>&rhel;
and CentOS versions &#8656; 5 are not supported because they do not have Python 2.6 by default.</simpara>
</note>
</section>
<section xml:id="_bootstrapping"><title>Bootstrapping</title><simpara>To bootstrap a Salt SSH system, proceed as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Open the <guimenu>Bootstrap Minions</guimenu> dialog in the Web UI (<menuchoice><guimenu>Systems</guimenu> <guimenuitem>Bootstrapping</guimenuitem></menuchoice> ).</para>
</listitem>
<listitem>
<para>Fill out the required fields. Select an <guimenu>Activation Key</guimenu> with the <guimenu>Push via SSH</guimenu> contact method configured. For more information about activation keys, see <xref linkend="_ref.webui.systems.activ_keys"/>.</para>
</listitem>
<listitem>
<para>Check the <guimenu>Manage system completely via SSH</guimenu> option.</para>
</listitem>
<listitem>
<para>Confirm with clicking the <guimenu>Bootstrap</guimenu> button.</para>
</listitem>
</orderedlist>
<simpara>Now the system will be bootstrapped and registered in &susemgr;
.
If done successfully, it will appear in the <guimenu>Systems</guimenu>
 list.</simpara>
</section>
<section xml:id="_configuration"><title>Configuration</title><simpara>There are two kinds of parameters for Push via Salt SSH:</simpara>
<itemizedlist>
<listitem>
<para>Bootstrap-time parameters &mdash; configured in the <guimenu>Bootstrapping</guimenu> page:</para>
<itemizedlist>
<listitem>
<para>Host</para>
</listitem>
<listitem>
<para>Activation key</para>
</listitem>
<listitem>
<para>Password &mdash; used only for bootstrapping, not saved anywhere; all future SSH sessions are authorized via a key/certificate pair</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Persistent parameters &mdash; configured &susemgr; -wide:</para>
<itemizedlist>
<listitem>
<para>sudo user &mdash; same as in <xref linkend="_bp.contact.methods.ssh.push.sudo"/>.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</section>
<section xml:id="_action_execution"><title>Action Execution</title><simpara>The Push via Salt SSH feature uses a taskomatic job to execute scheduled actions using <command>salt-ssh</command>.
The taskomatic job periodically checks for scheduled actions and executes them.
While on traditional clients with SSH push configured only <command>rhn_check</command> is executed via SSH, the Salt SSH push job executes a complete <command>salt-ssh</command> call based on the scheduled action.</simpara>
</section>
<section xml:id="_known_limitation"><title>Known Limitation</title><itemizedlist>
<listitem>
<para>OpenSCAP auditing is not available on Salt SSH minions.</para>
</listitem>
<listitem>
<para>Beacons do not work with Salt SSH.</para>
<itemizedlist>
<listitem>
<para>Installing a package on a system using <command>zypper</command> will not invoke the package refresh.</para>
</listitem>
<listitem>
<para>Virtual Host functions (for example, a host to guests) will not work if the virtual host system is Salt SSH-based.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</section>
<section xml:id="_for_more_information"><title>For More Information</title><simpara>For more information, see</simpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://wiki.microfocus.com/index.php/SUSE_Manager/SaltSSHServerPush">https://wiki.microfocus.com/index.php/SUSE_Manager/SaltSSHServerPush</link></para>
</listitem>
<listitem>
<para><link xl:href="https://docs.saltstack.com/en/latest/topics/ssh/">https://docs.saltstack.com/en/latest/topics/ssh/</link></para>
</listitem>
</itemizedlist>
</section>
</section>
<section xml:id="_bp.contact.methods.osad"><title>osad</title><simpara>The default contact method between &susemgr;
and its clients is <literal role="systemitem">rhnsd</literal>
.
When using the <literal role="systemitem">rhnsd</literal>
 daemon the client will contact the server every 4 hours and then execute a scheduled action on clients.
Depending on your network environment <literal role="systemitem">rhnsd</literal>
 may not suit your requirements.
Alternatively, you may configure <literal role="systemitem">osad</literal>
 for use with registered client systems enabling immediate execution of scheduled actions. <literal role="systemitem">osad</literal>
 consists of three components:</simpara>
<formalpara>
<title>osad</title>
<para>A client-side service that responds to pings and runs <command>mgr_check</command> when directed by the <literal role="systemitem">osa-dispatcher</literal>
 running on &susemgr;
.</para>
</formalpara>
<formalpara>
<title>osa-dispatcher</title>
<para>A service running on &susemgr;
that checks the database to determine if a client running <literal role="systemitem">osad</literal>
 needs to be pinged or is required to run <command>mgr_check</command>, then sends a message telling the client to do so.</para>
</formalpara>
<formalpara>
<title>jabberd</title>
<para>A daemon that runs on &susemgr;
and uses the <literal role="systemitem">XMPP</literal>
 protocol. <literal role="systemitem">osad</literal>
 and <literal role="systemitem">osa-dispatcher</literal>
 both connect to this daemon. <literal role="systemitem">jabberd</literal>
 also handles authentication when using <literal role="systemitem">osad</literal>
.</para>
</formalpara>
<simpara>The following figure represents the osad contact method.
All items left of the <literal role="systemitem">osa-dispatcher</literal>
 block represent running processes on the client.</simpara>
<figure>
<title>osad Contact Method</title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/osad.png" width="80%"/>
</imageobject>
<textobject><phrase>osad</phrase></textobject>
</mediaobject>
</figure>
<itemizedlist>
<title>How it Works</title>
<listitem>
<para>On &susemgr; the <literal role="systemitem">osa-dispatcher</literal> periodically runs a query which checks to see if there are any clients overdue for a ping.</para>
</listitem>
<listitem>
<para>If an overdue client is found, a message is sent via <literal role="systemitem">jabberd</literal> to the <literal role="systemitem">osad</literal> instances running on all clients registered with your &susemgr; server. The <literal role="systemitem">osad</literal> instances respond to the ping through the <literal role="systemitem">jabberd</literal> deamon running in the background on your &susemgr; Server. <literal role="systemitem">osa-dispatcher</literal> receives the response, and marks the client as 'online'.</para>
</listitem>
<listitem>
<para>If <literal role="systemitem">osa-dispatcher</literal> fails to receive a response from an <literal role="systemitem">osad</literal> instance in a certain amount of time, the client is marked 'offline'.</para>
</listitem>
<listitem>
<para><literal role="systemitem">osa-dispatcher</literal> also periodically executes a select on the database to check all &susemgr; clients which have actions that need to be executed. If an action is found, a message is sent through <literal role="systemitem">jabberd</literal> to <literal role="systemitem">osad</literal> which then executes <command>mgr_check</command> on the client. <command>mgr_check</command> then takes over performing the actual action.</para>
</listitem>
</itemizedlist>
<section xml:id="_configuring_and_enabling_osad"><title>Configuring and Enabling osad</title><simpara>The following procedure enables use of <literal role="systemitem">osad</literal>
 with &susemgr;
.</simpara>
<important>
<title>Enabling SSL</title>
<simpara>For this communication method to work SSL is mandatory.
If SSL certificates are not available, the daemon on your client systems will fail to connect.
Make sure your firewall rules are set to allow for the required ports.
For more information, see <xref linkend="_tab.install.ports.server"/>.</simpara>
</important>
<orderedlist numeration="arabic">
<title>Procedure: Enabling osa-dispatcher on &susemgr;and osad on Clients</title>
<listitem>
<para>On your &susemgr; server use the following command as &rootuser; to start the <literal role="systemitem">osa-dispatcher</literal> service:</para>
<screen>systemctl start osa-dispatcher</screen>
</listitem>
<listitem>
<para>Install the <literal role="systemitem">osad</literal> package on all client systems allowing communication to the osa-dispatcher on &susemgr; . The package can be found in the Tools child channel. For more information about child channels, see <xref linkend="_s3_sm_channel_list_child"/>.</para>
<warning>
<title>osad conflicts with osa-dispatcher</title>
<simpara>Do <emphasis>not</emphasis> install the <literal role="systemitem">osad</literal>
 client package on your &susemgr;
 server.
The <literal role="systemitem">osad</literal>
 client service conflicts with <literal role="systemitem">osa-dispatcher</literal>
 server package.</simpara>
</warning>
</listitem>
<listitem>
<para>When <literal role="systemitem">osad</literal> has been installed, start the service on your client systems. As &rootuser; enter:</para>
<screen>systemctl start osad</screen>
<simpara>Like other services, osa-dispatcher and osad accept <literal>stop</literal>, <literal>restart</literal>, and <literal>status</literal> commands as well.</simpara>
</listitem>
</orderedlist>
<simpara>This feature depends on the client systems recognizing the fully qualified domain name (FQDN) of &susemgr;
.
The client systems use this name and not the IP address of the server when configuring the YaST Online Update.</simpara>
<simpara>Now when you schedule actions from &susemgr;
on any of the osad enabled systems, the task will be carried out immediately rather than after a client checks in using <literal role="systemitem">rhnsd</literal>
.</simpara>
</section>
<section xml:id="_osad_configuration_and_logging_files"><title>osad Configuration and Logging Files</title><simpara>Each component of <literal role="systemitem">osad</literal>
 is configured via local configuration files.
Changing default parameters is not recommended.
For reference the configuration files and logs are found in the following locations.</simpara>
<formalpara>
<title>osa-dispatcher</title>
<para><literal role="systemitem">osa-dispatcher</literal>
 is configured via the <filename>rhn.conf</filename>
 file located on the &susemgr;
 at:</para>
</formalpara>
<screen>/etc/rhn/rhn.conf</screen>
<simpara>All parameters for configuring osa-dispatcher are located under this section heading:</simpara>
<screen># OSA configuration #</screen>
<formalpara>
<title>osad</title>
<para><literal role="systemitem">osad</literal>
 configuration files are located on all &susemgr;
 clients at:</para>
</formalpara>
<screen>/etc/sysconfig/rhn/osad.conf
/etc/syseconfig/rhn/up2date</screen>
<simpara>For troubleshooting <literal role="systemitem">osad</literal>
 the log file is located in:</simpara>
<screen>/var/log/osad</screen>
<simpara>The location of this log file is configurable via the <filename>osad.conf</filename>
 file.</simpara>
<formalpara>
<title>jabberd</title>
<para>Configuration of <literal role="systemitem">jabberd</literal>
 goes beyond the scope of this document.
The <literal role="systemitem">jabberd</literal>
 log file is located at:</para>
</formalpara>
<screen>/var/log/messages</screen>
</section>
</section>
</chapter>
<chapter xml:id="_bp.susecom.lifecycle.management"><title>Advanced Patch Lifecycle Management</title><simpara>Keeping systems patched and secure remains one of the greatest ongoing challenges that you will face as an administrator.
Both proprietary and open-source companies are constantly working to provide updates which fix flaws discovered within their software products.</simpara>
<simpara>For the official <emphasis><phrase role="ref">Best Practice Guide</phrase></emphasis>
 on <quote>Advanced Patch Lifecycle Management</quote>
, see <link xl:href="https://www.suse.com/documentation/suse-best-practices/susemanager/data/susemanager.html">https://www.suse.com/documentation/suse-best-practices/susemanager/data/susemanager.html</link>.</simpara>
</chapter>
<chapter xml:id="_bp.live.patching"><title>Live Patching with SUSE Manager</title><section xml:id="_live.patching.intro"><title>Introduction</title><simpara>Under normal circumstances a system needs to be rebooted after a kernel update.
SLE Live Patching allows you skipping the reboot by applying a subset of Linux kernel releases injected via kGraft live patching technology.</simpara>
<simpara>In the following sections you will learn how to use SLE Live Patching to avoid the typical reboot requirement after updating a system kernel.</simpara>
<simpara>For in depth information covering kGraft use, see <link xl:href="https://www.suse.com/documentation/sles-12/singlehtml/book_sle_admin/book_sle_admin.html#cha.kgraft">https://www.suse.com/documentation/sles-12/singlehtml/book_sle_admin/book_sle_admin.html#cha.kgraft</link>.</simpara>
</section>
<section xml:id="_live.patching.req"><title>Initial Setup Requirements</title><simpara>To work with SLE Live Patching the following expectations are assumed:</simpara>
<itemizedlist>
<listitem>
<para>&susemgr; fully updated.</para>
</listitem>
<listitem>
<para>At least 1 Salt Minion running SLES 12 SP1 or later and registered with &susemgr; .</para>
</listitem>
<listitem>
<para>The matching SLES 12 SPx channels including the SLE Live Patching child channel fully synced.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_live.patching.setup"><title>Live Patching Setup</title><orderedlist numeration="arabic">
<listitem>
<para>Subscribe all systems to be managed via live patching to your fully synced live patching child channels within your systems base channel by browsing to <menuchoice><guimenu>Software</guimenu> <guimenuitem>Software Channels</guimenuitem></menuchoice> . Select both live patching channels and change subscription.</para>
<note>
<simpara>When subscribing to a channel that contains a product, the product package will automatically be installed on traditionaly registered systems and added to the package state on Salt managed systems.
For Salt managed systems please apply the highstate to push these changes to your systems.</simpara>
</note>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/enable_live_patching_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>enable live patching channels</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Use the search field listed under <menuchoice><guimenu>Software</guimenu> <guisubmenu>Packages</guisubmenu> <guimenuitem>Install</guimenuitem></menuchoice> to install the latest <filename>kgraft</filename> package to all systems to be managed via live patching.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/enable_live_patching_kgraft_install.png" width="80%"/>
</imageobject>
<textobject><phrase>enable live patching kgraft install</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Apply the highstate to enable live patching:</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/enable_live_patching_apply_highstate.png" width="80%"/>
</imageobject>
<textobject><phrase>enable live patching apply highstate</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Once the highstate has been applied on Salt systems or the package has been installed on traditional systems browse to the systems details page for confirmation that live patching has been enabled. You can check the live patching state listed under the <menuchoice><guimenu>System Info</guimenu> <guimenuitem>Kernel</guimenuitem></menuchoice> table field:</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/enable_live_patching_successful.png" width="80%"/>
</imageobject>
<textobject><phrase>enable live patching successful</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_live.patching.clones"><title>Cloning Channels</title><simpara>It is considered best practice to clone a vendor channel that will be modified into a new channel with one of the following prefix names: <literal>dev</literal>, <literal>testing</literal>, and <literal>prod</literal>.
In the following procedure you will clone the default vendor channel into a new channel named <literal role="systemitem">dev-sles12-sp3-pool-x86_64</literal>
 using the command line.</simpara>
<orderedlist xml:id="_proc.live.patching.clones" numeration="arabic">
<listitem>
<para>Open a terminal and as root enter:</para>
<screen># spacewalk-manage-channel-lifecycle --list-channels
Spacewalk Username: admin
Spacewalk Password:
Channel tree:

 1. sles{sles-version}-sp{sp-ver}-pool-x86_64
      \__ sle-live-patching{sles-version}-pool-x86_64-sp{sp-ver}\__ sle-live-patching{sles-version}-updates-x86_64-sp{sp-ver}\__ sle-manager-tools{sles-version}-pool-x86_64-sp{sp-ver}\__ sle-manager-tools{sles-version}-updates-x86_64-sp{sp-ver}\__ sles{sles-version}-sp{sp-ver}-updates-x86_64</screen>
</listitem>
<listitem>
<para>Now use the <emphasis>--init</emphasis> argument to automatically create a new development clone of the original vendor channel:</para>
<screen>spacewalk-manage-channel-lifecycle --init -c sles{sles-version}-sp{sp-ver}-pool-x86_64</screen>
</listitem>
</orderedlist>
</section>
<section xml:id="_live.patching.kernel"><title>Removing Non-live Kernel Patches from the Cloned Channels</title><simpara>In the following procedure you will remove all kernel patch updates located in the dev-sles{sles-version}
-sp{sp-ver}
-updates-x86_64 channel that require a reboot.
You created dev-sles{sles-version}
-sp{sp-ver}
-updates-x86_64 during <xref linkend="_proc.live.patching.clones"/>.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Check the current kernel version in use on your client:</para>
<screen># uname -r
3.12.62-60.64.8-default</screen>
</listitem>
<listitem>
<para>From the &susemgr;{webui} select <menuchoice><guimenu>Software</guimenu> <guisubmenu>Manage Software Channels</guisubmenu> <guisubmenu>Overview</guisubmenu> <guisubmenu>dev-sles12-sp3-updates-x86_64</guisubmenu> <guisubmenu>Patches</guisubmenu> <guimenuitem>List/Remove</guimenuitem></menuchoice> . Type <literal>kernel</literal> in the search field. Find the kernel version that matches the kernel in use on your minion.</para>
</listitem>
<listitem>
<para>Remove all kernel update versions that are later than the current kernel.</para>
</listitem>
<listitem>
<para>Your channel is now ready to promote for testing SLE Live Patching.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_live.patching.channel_promo"><title>Promoting Channels</title><simpara>The following procedure will guide you through promoting and cloning a development channel to a testing channel.
You will change the subscription from the dev repositories on your client to the new testing channel repositories.
You will also add the SLE Live Patching child channels to your client.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Promote and clone the <literal>dev-sles{sles-version} -sp{sp-ver} -pool-x86_64</literal> to a new testing channel:</para>
<screen>{prompt.root}spacewalk-manage-channel-lifecycle -promote -c dev-sles{sles-version}-sp{sp-ver}-pool-x86_64</screen>
</listitem>
<listitem>
<para>From the &susemgr;{webui} under the <guimenu>Systems</guimenu> tab select your client system to view the <guimenu>System Details</guimenu> page. Select <menuchoice><guimenu>Software</guimenu> <guimenuitem>Software Channels</guimenuitem></menuchoice> . From the Software Channels page you can edit which channels a system is subscribed to. Select the new base software channel, in this case it should be <literal role="systemitem">test-sles12-sp3-pool-x86_64</literal> . Click the <guimenu>Confirm</guimenu> button to switch the Base Software Channel and finalize it by clicking the <guimenu>Modify Base Software Channel</guimenu> button.</para>
</listitem>
<listitem>
<para>From the <guimenu>Software Channels</guimenu> page select and add both SLE Live Patching child channels by clicking the <guimenu>Change Subscriptions</guimenu> button.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_live.patching.applying"><title>Applying Live Patches to a Kernel</title><simpara>The following procedure will guide you through selecting and viewing available CVE Patches (Common Vulnerabilities and Exposures) then applying these kernel updates using the new SLE Live Patching feature.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Select your SLES {sles-version} SP{sp-ver} minion from the <guimenu>Systems</guimenu> page to view its <guimenu>System Details</guimenu> . Once you have added the SLES {sles-version} SP{sp-ver} Updates child channel to your client, you should see several <literal>Critical</literal> software updates available. Click on <literal>Critical</literal> to see a list of available patches. Select any of these patches listed with the following synopsis: <emphasis>Important: Security update for the Linux kernel</emphasis>. All fixed security bugs will be listed along with their number. For example:(CVE-2016-8666)</para>
<important>
<title>Reboot Icon</title>
<simpara>Normal or non-live kernel patches always require a reboot.
In &susemgr;
these are represented by a <literal>Reboot Required</literal> icon located next to the <literal>Security</literal> shield icon.</simpara>
</important>
</listitem>
<listitem>
<para>You can search for individual CVE&#8217;s by selecting the <guimenu>Audit</guimenu> tab from the navigation menu. Try searching for <literal>CVE-2016-8666</literal>. You will see that the patch is available in the vendor update channel and the systems it applies to will be listed.</para>
</listitem>
</orderedlist>
<important>
<title>CVE Availability</title>
<simpara>Not all security issues can be fixed by applying a live patch.
Some security issues can only be fixed by applying a full kernel update and will required a reboot.
The assigned CVE numbers for these issues are not included in live patches.
A CVE audit will display this requirement.</simpara>
</important>
</section>
</chapter>
<chapter xml:id="_bp.sp.migration"><title>&susemgr; Server Migration</title><info><abstract>
<simpara>You can upgrade the underlying operating system and also migrate &susemgr;
server from one patch level to the other (SP migration) or from one version to the next.
This works for migrating &susemgr;
server 3.0 or version 3.1 to version &productnumber;
.</simpara>
<simpara>For migrating from version 2.1 to 3.0, see <xref linkend="_bp.chap.mgr.migration"/>.</simpara>
</abstract></info>
<section xml:id="_bp.sp.migration.sp"><title>Service Pack Migration</title><simpara>SUSE Manager utilizes &sls;
 12 as its underlying operating system.
Therefore Service Pack migration (for example, from version 12 SP1 to 12 SP3) may be performed in the same way as a typical SLES migration.</simpara>
<warning>
<title>Upgrading PostgreSQL to Version 9.6 before Migrating to SLES12 SP3</title>
<simpara>Before migrating the underlying system to &sle;
12 SP3 you must upgrade PostgreSQL to version 9.6.</simpara>
<simpara>The migration needs PostgreSQL 9.4 and 9.6 installed in parallel and PostgreSQL 9.4 is only available in SLES 12 SP2.
For more information, see <xref linkend="_sp.migration.postgresql"/>.</simpara>
</warning>
<simpara>&suse;
offers a graphical and command line tool for upgrading to a new service pack.
Comprehensive documentation for executing service pack migration scenarios is located in the &sls;
documentation chapter <link xl:href="https://www.suse.com/documentation/sles-12/book_sle_deployment/data/cha_update_sle.html">https://www.suse.com/documentation/sles-12/book_sle_deployment/data/cha_update_sle.html</link>.</simpara>
</section>
<section xml:id="_sp.migration.postgresql"><title>Upgrading PostgreSQL to Version 9.6</title><warning>
<title>Migrating to SLES 12 SP3</title>
<simpara>&susemgr;
Server 3.1 must <emphasis>not</emphasis> be migrated to SLES 12 SP3 before upgrading PostgreSQL to version 9.6.</simpara>
</warning>
<simpara>The upgrade needs PostgreSQL 9.4 and 9.6 installed in parallel.
PostgreSQL 9.4 is only available in SLES 12 SP2.</simpara>
<simpara>Before starting the update, prepare an up-to-date backup of your database.</simpara>
<simpara>On existing installations of &susemgr;
Server 3.1 you must run</simpara>
<screen>{prompt.root}/usr/lib/susemanager/bin/pg-migrate.sh</screen>
<simpara>to migrate from PostgreSQL 9.4 to version 9.6.
During the upgrade your &susemgr;
Server will not be accessible.</simpara>
<simpara>The upgrade will create a copy of the database under <filename>/var/lib/pgsql</filename>
 and thus needs sufficient disk space to hold two copies (9.4 and 9.6) of the database.
Because it does a full copy of the database, it also needs considerable time depending on the size of the database and the IO speed of the storage system.</simpara>
<simpara>If your system is short on disk space you can do an fast, in-place upgrade by running</simpara>
<screen>{prompt.root}/usr/lib/susemanager/bin/pg-migrate.sh fast</screen>
<simpara>The fast upgrade usually only takes minutes and no additional disk space.
However, in case of failure you need to restore the database from a backup.</simpara>
<simpara>For more information, see <link xl:href="https://wiki.microfocus.com/index.php?title=SUSE_Manager/postgresql96">https://wiki.microfocus.com/index.php?title=SUSE_Manager/postgresql96</link>.</simpara>
</section>
<section xml:id="_update.suse.manager"><title>Updating &susemgr;</title><simpara>This section provides information on performing regular updates and running a <command>spacewalk-schema-upgrade</command> on your postgresql database.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Updating &susemgr;</title>
<listitem>
<para>As the &rootuser; user stop Spacewalk services:</para>
<screen>spacewalk-service stop</screen>
</listitem>
<listitem>
<para>Apply latest patches with:</para>
<screen>zypper patch</screen>
</listitem>
<listitem>
<para>You will be informed if a new database schema was included in the latest patch. Ensure the database is started with:</para>
<screen>rcpostgresql start</screen>
</listitem>
<listitem>
<para>Perform the upgrade with:</para>
<screen>spacewalk-schema-upgrade</screen>
</listitem>
<listitem>
<para>Start Spacewalk services again with:</para>
<screen>spacewalk-service start</screen>
<important>
<title>Restart of Services and Applications</title>
<simpara>Services affected by a package update are not automatically restarted after an update.
You need to restart these services manually to avoid potential failures.</simpara>
</important>
</listitem>
</orderedlist>
<simpara>You may use <command>zypper ps</command> to check for any applications which may be using old code.
Restart these applications.</simpara>
<simpara>+</simpara>
</section>
<section xml:id="_bp.sp.migration.version"><title>Migrating &susemgr; version 3.0 to 3.1</title><simpara>The migration can either be done with the Online Migration tool (&yast;
) or with the Zypper command line tool.</simpara>
<note>
<title>Reduce Installation Size</title>
<simpara>When performing the migration, &yast;
will install all recommended packages.
Especially in the case of custom minimal installations, this may increase the installation size of the system significantly.</simpara>
<simpara>To change this default behavior and allow only required packages, adjust <filename>/etc/zypp/zypp.conf</filename>
 and set the following variable:</simpara>
<screen>solver.onlyRequires = true
installRecommends=false # or commented</screen>
<simpara>This changes the behavior of all package operations, such as the installation of patches or new packages.</simpara>
</note>
<section xml:id="_bp.sp.migration.version.yast"><title>Using &yast;</title><warning>
<title>Checking PostgreSQL Version</title>
<simpara>Before migrating to SLES 12 SP3, check whether PostgreSQL is already updated to version 9.6.
For more information, see <xref linkend="_sp.migration.postgresql"/>.</simpara>
</warning>
<simpara>To perform the migration with &yast;
, use the <guimenu>Online Migration</guimenu>
 tool:</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Migrating using &yast;</title>
<listitem>
<para>If you are logged into a GNOME session running on the machine you are going to update, switch to a text console. Running the update from within a GNOME session is not recommended. This does not apply when being logged in from a remote machine (unless you are running a VNC session with GNOME).</para>
</listitem>
<listitem>
<para>Start in &yast;<menuchoice><guimenu>System</guimenu> <guimenuitem>Online Migration</guimenuitem></menuchoice> (<command>yast2 migration</command>). &yast; will show possible migration targets with detailed summaries.</para>
<simpara>In case of trouble, resolve the following issues first:</simpara>
<itemizedlist>
<listitem>
<para>If the <guimenu>Online Migration</guimenu> is not available, install the <package>yast2-migration</package> package and its dependencies. Restart &yast; , otherwise the newly installed module will not be shown in the control center.</para>
</listitem>
<listitem>
<para>If there are <quote>old</quote> online updates available for installation, the migration tool will warn and ask to install them now before starting the actual migration. It is recommended to install all updates before proceeding.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>If more than one migration target is available for your system, select one from the list. In case you are still on &sls; 12 SP1 or SP2, SLES 12 will be upgraded to SP2 or SP3, while selecting <guimenu>SUSE Manager Server 3.1</guimenu> as a migration target.</para>
<figure>
<title>&yast;: Select the Migration Target <anchor xml:id="_fig_migration_summary"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/yast_migration_target31.png" width="90%"/>
</imageobject>
<textobject><phrase>yast migration target31</phrase></textobject>
</mediaobject>
</figure>
</listitem>
<listitem>
<para>Update the &susemgr; database schema (<command>spacewalk-schema-upgrade</command>).</para>
</listitem>
<listitem>
<para>Make sure &susemgr; is up and running (<command>spacewalk-service start</command>).</para>
</listitem>
</orderedlist>
<simpara>After finishing the migration procedure &susemgr;
 3.1 on &sls;
 12 (SP2 or) SP3 is available to be used.</simpara>
</section>
<section xml:id="_bp.sp.migration.version.zypper"><title>Using zypper</title><warning>
<title>Checking PostgreSQL Version</title>
<simpara>Before migrating to SLES 12 SP3, check whether PostgreSQL is already updated to version 9.6.
For more information, see <xref linkend="_sp.migration.postgresql"/>.</simpara>
</warning>
<simpara>To perform the migration with Zypper on the command-line, use the <command>zypper migration</command> subcommand tool:</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Migrating using <command>zypper migration</command></title>
<listitem>
<para>If you are logged into a GNOME session running on the machine you are going to update, switch to a text console. Running the update from within a GNOME session is not recommended. This does not apply when being logged in from a remote machine (unless you are running a VNC session with GNOME).</para>
</listitem>
<listitem>
<para>The <command>zypper migration</command> subcommand show possible migration targets and a summary:</para>
<screen># zypper migration
Executing 'zypper  refresh'

Repository 'SLES12-SP1 12.1-0' is up to date.
Repository 'SLES12-SP1-Pool' is up to date.
Repository 'SLES12-SP1-Updates' is up to date.
Repository 'SUSE-Manager-Server-3.0-Pool' is up to date.
Repository 'SUSE-Manager-Server-3.0-Updates' is up to date.
All repositories have been refreshed.

Executing 'zypper  --no-refresh patch-check --updatestack-only'

Loading repository data...
Reading installed packages...
0 patches needed (0 security patches)

Available migrations:

    1 | SUSE Linux Enterprise Server 12 SP3 x86_64
        SUSE Manager Server 3.1 x86_64

    2 | SUSE Linux Enterprise Server 12 SP3 x86_64
        SUSE Manager Server 3.0 x86_64 (already installed)

    3 | SUSE Linux Enterprise Server 12 SP2 x86_64
        SUSE Manager Server 3.1 x86_64

    4 | SUSE Linux Enterprise Server 12 SP2 x86_64
        SUSE Manager Server 3.0 x86_64 (already installed)</screen>
<simpara>In case of trouble, resolve the following issues first:</simpara>
<itemizedlist mark="listing">
<listitem>
<para>If the <command>migration</command> subcommand is not available install the <package>zypper-migration-plugin</package> package and its dependencies.</para>
</listitem>
<listitem>
<para>If there are <quote>old</quote> online updates available for installation, the migration tool will warn and ask to install them now before starting the actual migration. It is recommended to install all updates before proceeding.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>If more than one migration target is available for your system, select one from the list (specify the number). In case you are still on &sls; 12 SP1 or SP2, SLES 12 will be upgraded to (SP2 or) SP3, while selecting <guimenu>SUSE Manager Server 3.1</guimenu> as a migration target.</para>
</listitem>
<listitem>
<para>Read the notification and update the &susemgr; database schema as described (<command>spacewalk-schema-upgrade</command>).</para>
</listitem>
<listitem>
<para>Make sure &susemgr; is up and running (<command>spacewalk-service start</command>).</para>
</listitem>
</orderedlist>
<simpara>After finishing the migration procedure &susemgr;
 3.1 on &sls;
 12 (SP2 or) SP3 is available to be used.</simpara>
</section>
</section>
</chapter>
<chapter xml:id="_bp.chap.mgr.migration"><title>&susemgr; Migration from Version 2.1 to Version 3</title><simpara>The migration from &susemgr;
 2.1 to &susemgr;
 3 works quite the same as a migration from Red Hat Satellite to &susemgr;
.
The migration happens from the original machine to a new one.
There is no in-place migration.
While this has the drawback that you temporarily need two machines, it also has the advantage that the original machine will remain fully functional in case something goes wrong.</simpara>
<important>
<title>Migration Process</title>
<simpara>The whole process may be tricky, so it is strongly advised that the migration is done by an experienced consultant.</simpara>
</important>
<simpara>Given the complexity of the product, the migration is an <quote>all-or-nothing</quote>
 procedure&mdash;
if something goes wrong you will need to start all over.
Error handling is very limited.
Nevertheless it should work more or less out of the box if all the steps are carefully executed as documented.</simpara>
<note>
<title>Time-Consuming Operation</title>
<simpara>The migration involves dumping the whole database on the source machine and restoring it on the target machine.
Also all of the channels and packages need to be copied to the new machine, so expect the whole migration to take several hours,</simpara>
</note>
<section xml:id="_bp.sec.mgr.migration.prereq"><title>Prerequisites</title><warning>
<title>Latest Updates</title>
<simpara>The source machine needs to run &susemgr;
 2.1 with all the latest updates applied.
Before starting the migration process, make sure that the machine is up to date and all updates have been installed sucessfully.</simpara>
</warning>
<simpara>Only machines running with the embedded PostgreSQL database may be migrated in one go.
For the migration of an Oracle based installation, a two-step migration is required: First the installation needs to get migrated from Oracle to PostgreSQL (by means of a separate tool) and afterwards the migration to &susemgr;
 3 can be performed as documented here.</simpara>
<simpara>&susemgr;
 3 does no longer support &ncc;
but only SCC (&scc;
). Therefore, you can migrate a machine only after it has been switched to SCC.
The migration script will check if the installation has already been switched to SCC and will terminate if this is not the case.
Switch to SCC on the source machine and repeat the migration.
During migration the database from the source machine needs to get dumped and this dump needs to be temporarily stored on the target system.
The dump gets compressed with <command>gzip</command> using the default compression options (maximum compression only yields about 10% of space savings but costs a lot of runtime); so check the disk usage of the database with:</simpara>
<screen>{prompt.root}du -sch /var/lib/pgsql/data</screen>
<simpara>This will ensure that you have at least 30 % of this value available in <filename>/var/spacewalk/tmp</filename>
.</simpara>
<simpara>These values from a test migration should aid in illustrating space requirements:</simpara>
<screen>suma21:/var/lib/pgsql# du -sch data
1,8G    data
1,8G    total
suma21:/var/spacewalk/tmp# ls -lh susemanager.dmp.gz
-rw-r--r-- 1 root root 506M Jan 12 14:58 susemanager.dmp.gz</screen>
<simpara>This is a small test installation; for bigger installations the ratio might be better (space required for the database dump might be less than 30%). The dump will be written to the directory <filename>/var/spacewalk/tmp</filename>
, the directory will be created if it does not exist yet.
If you want the dump to be stored somewhere else, change the definition of the variable <varname>$TMPDIR</varname> on the beginning of the script to suit your needs.</simpara>
</section>
<section xml:id="_bp.sec.mgr.migration.setup.target"><title>Setup the Target Machine</title><simpara>To prepare the target machine (with the example host name <literal>suma30</literal>) proceed as follows:</simpara>
<orderedlist xml:id="_proc.mgr.migration.setup.target" numeration="arabic">
<title>Procedure: Setup Target Machine</title>
<listitem>
<para>On the target machine install &sls; 12 SP2 including the extension product <quote>&susemgr;</quote> .</para>
<important>
<title>Background Information on Required Target Machine</title>
<simpara>It is actually required to install version 12 SP2 on the target machine.
On that version you will upgrade the PostgreSQL database from version_9.4 to 9.6.
For more information about the PostgreSQL upgrade, see <xref linkend="_sp.migration.postgresql"/>.</simpara>
</important>
</listitem>
<listitem>
<para>Initiate <command>yast2 susemanager_setup</command> as you would normally do for an installation of &susemgr; .</para>
<simpara>For more information about installing &susemgr;
, see <xref linkend="_sles.installation.within.kvm.jeos"/>.</simpara>
</listitem>
<listitem>
<para>On the first &susemgr; setup screen, ensure that <guimenu>Migrate a SUSE Manager compatible server</guimenu> is marked instead of <guimenu>Set up SUSE Manager from scratch</guimenu> .</para>
</listitem>
<listitem>
<para>On the second screen, enter the name of the source system as <guimenu>Hostname of source SUSE Manager Server</guimenu> as well as the domain name. Also enter the database credentials of the source system.</para>
</listitem>
<listitem>
<para>On the next screen, you will need to specify the IP address of the &susemgr; 3 target system. Normally this value should be pre-set to the correct value and you only should need to press <keycap>Enter</keycap> . Only in the case of multiple IP addresses you might need to specify the one that should be used during migration.</para>
<important>
<title>Faking the Host Name</title>
<simpara>During the migration process, the target system will fake its host name to be the same as the source system, this is necessary as the host name of a &susemgr;
installation is vital and should not be changed once set.
Therefore do not be confused when logging in to your systems during migration; they both will present you with the same host name.</simpara>
</important>
</listitem>
<listitem>
<para>Continue by following the normal installation steps.</para>
<important>
<title>Database Parameters</title>
<simpara>Specify the database parameters using the same database parameters as the source system is recommended.
At least, using the the same database credentials as when creating the source or original &susemgr;
database is mandatory.</simpara>
</important>
<simpara>Enter your SCC credentials.
After all the data has been gathered, &yast;
will terminate.</simpara>
</listitem>
</orderedlist>
<simpara>The actual migration will not start automatically but needs to be triggered manually as outlined in <xref linkend="_bp.sec.mgr.migration.performing"/>.</simpara>
</section>
<section xml:id="_bp.sec.mgr.migration.performing"><title>Performing the Migration</title><simpara>A migration is performed by excecuting the following command:</simpara>
<screen>/usr/lib/susemanager/bin/mgr-setup -m</screen>
<simpara>This command reads the data gathered during <xref linkend="_proc.mgr.migration.setup.target"/>, sets up &susemgr;
 onto a new target machine and transfers all of the data from the source machine.
As several operations need to be performed on the source machine via SSH, you will be prompted once for the root password of the source machine.
A temporary SSH key named <literal>migration-key</literal> is created and installed on the source machine, so you need to give the &rootuser;
 password only once.
The temporary SSH key will be deleted after successful migration.
Ideally, this is all you will need to do.</simpara>
<simpara>Depending on the size of the installation, the actual migration will take up to several hours.
Once finished, you will be prompted to shutdown the source machine, re-configure the network of the target machine to use the same IP address and host name as the original machine and restart it.
It should now be a fully functional replacement for your previous &susemgr;
 2.1 installation.
The following numbers illustrate the runtime for dumping and importing a small database:</simpara>
<screen>14:53:37   Dumping remote database to /var/spacewalk/tmp/susemanager.dmp.gz on target system. Please wait...
14:58:14   Database successfully dumped. Size is: 506M
14:58:29   Importing database dump. Please wait...
15:05:11   Database dump successfully imported.</screen>
<simpara>For this example dumping the database takes around five minutes to complete.
Importing the dump onto the target system will take an additional seven minutes.
For big installations this can take up to several hours.
You should also account for the time it takes to copy all the package data to the new machine.
Depending on your network infrastructure and hardware, this can also take a significant amount of time.</simpara>
</section>
<section xml:id="_bp.sec.mgr.migration.speedup"><title>Speeding up the Migration</title><simpara>A complete migration can consume a lot of time.
This is caused by the amount of data that must be copied.
Total migration time can be greatly decreased by eliminating the need to copy data prior to performing the migration (for example, channels, packages, auto-install images, and any additional data). You can gather all data via &yast;
by running the command <command>mgr-setup -r</command>.</simpara>
<simpara>Executing <command>mgr-setup -r</command> will copy the data from the old server to the new one.
This command may be run at any time and your current server will remain fully functional.
Once the migration has been initiated only data changed since running <command>mgr-setup -r</command> will need to be transferred which will significantly reduces downtime.</simpara>
<simpara>On large installations transfering the database (which involves dumping the database onto the source machine and then importing the dump onto the target system) will still take some time.
During the database transfer no write operations should occurr therefore the migration script will shutdown running &susemgr;
database services running on the source machine.</simpara>
</section>
<section xml:id="_bp.sec.mgr.migration.pkg.extern"><title>Packages on External Storage</title><simpara>Some installations may store the package data on external storage (for example, NFS mount on <filename>/var/spacewalk/packages</filename>
). You do not need to copy this data to the new machine.
Edit the script located in <filename>/usr/lib/susemanager/bin/mgr-setup</filename>
 and remove the respective <command>rsync</command> command (located around line 345).</simpara>
<important>
<title>Mounting External Storage</title>
<simpara>Make sure your external storage is mounted on the new machine before starting the system for the first time.
Analogue handling for <filename>/srv/www/htdocs/pub</filename>
 if appropriate.</simpara>
<simpara>In general, all needed files and directories, not copied by the migration tool, should be copied to the new server manually.</simpara>
</important>
</section>
<section xml:id="_bp.sec.mgr.migration.trouble"><title>Troubleshooting a Broken &webui; after Migration</title><simpara>It is possible that the &webui;
may break during migration.
This behavior is not a bug, but a browser caching issue.
The new machine has the same host name and IP address as the old machine.
This duplication can confuse some Web browsers.
If you experience this issue reload the page.
For example, in Firefox pressing the key combination <keycombo><keycap>Ctrl</keycap><keycap>F5</keycap></keycombo>
 should resume normal functionality.</simpara>
</section>
<section xml:id="_bp.sec.mgr.migration.example"><title>Example Session</title><simpara>This is the output of a typical migration:</simpara>
<screen>suma30# /usr/lib/susemanager/bin/mgr-setup -m
  Filesystem type for /var/spacewalk is ext4 - ok.
  Open needed firewall ports...
  Migration needs to execute several commands on the remote machine.
  Please enter the root password of the remote machine.
Password:
  Remote machine is SUSE Manager
  Remote system is already migrated to SCC. Good.
  Shutting down remote spacewalk services...
  Shutting down spacewalk services...
  Stopping Taskomatic...
  Stopped Taskomatic.
  Stopping cobbler daemon: ..done

  Stopping rhn-search...
  Stopped rhn-search.
  Stopping MonitoringScout ...
  [ OK ]
  Stopping Monitoring ...
  [ OK ]
  Shutting down osa-dispatcher: ..done
  Shutting down httpd2 (waiting for all children to terminate) ..done
  Shutting down Tomcat (/usr/share/tomcat6)
  ..done
  Terminating jabberd processes...
        Stopping router ..done
        Stopping sm ..done
        Stopping c2s ..done
        Stopping s2s ..done
  Done.
  CREATE ROLE
  * Loading answer file: /root/spacewalk-answers.
  ** Database: Setting up database connection for PostgreSQL backend.
  ** Database: Populating database.
  ** Database: Skipping database population.
  * Configuring tomcat.
  * Setting up users and groups.
  ** GPG: Initializing GPG and importing key.
  * Performing initial configuration.
  * Configuring apache SSL virtual host.
  ** /etc/apache2/vhosts.d/vhost-ssl.conf has been backed up to vhost-ssl.conf-swsave
  * Configuring jabberd.
  * Creating SSL certificates.
  ** Skipping SSL certificate generation.
  * Deploying configuration files.
  * Setting up Cobbler..
  * Setting up Salt Master.
  11:26:47   Dumping remote database. Please wait...
  11:26:50   Database successfully dumped.
  Copy remote database dump to local machine...
  Delete remote database dump...
  11:26:50   Importing database dump. Please wait...
  11:28:55   Database dump successfully imported.
  Schema upgrade: [susemanager-schema-2.1.50.14-3.2.devel21] -&gt; [susemanager-schema-3.0.5-5.1.develHead]
  Searching for upgrade path to: [susemanager-schema-3.0.5-5.1]
  Searching for upgrade path to: [susemanager-schema-3.0.5]
  Searching for upgrade path to: [susemanager-schema-3.0]
  Searching for start path:  [susemanager-schema-2.1.50.14-3.2]
  Searching for start path:  [susemanager-schema-2.1.50.14]
  The path: [susemanager-schema-2.1.50.14] -&gt; [susemanager-schema-2.1.50.15] -&gt; [susemanager-schema-2.1.51] -&gt; [susemanager-schema-3.0]
  Planning to run schema upgrade with dir '/var/log/spacewalk/schema-upgrade/schema-from-20160112-112856'
  Executing spacewalk-sql, the log is in [/var/log/spacewalk/schema-upgrade/schema-from-20160112-112856-to-susemanager-schema-3.0.log].
(248/248) apply upgrade [schema-from-20160112-112856/99_9999-upgrade-end.sql]        e-suse-channels-to-public-channel-family.sql.postgresql]
  The database schema was upgraded to version [susemanager-schema-3.0.5-5.1.develHead].
  Copy files from old SUSE Manager...
  receiving incremental file list
  ./
  packages/

  sent 18 bytes  received 66 bytes  168.00 bytes/sec
  total size is 0  speedup is 0.00
  receiving incremental file list
  ./
  RHN-ORG-TRUSTED-SSL-CERT
  res.key
  rhn-org-trusted-ssl-cert-1.0-1.noarch.rpm
  suse-307E3D54.key
  suse-39DB7C82.key
  suse-9C800ACA.key
  bootstrap/
  bootstrap/bootstrap.sh
  bootstrap/client-config-overrides.txt
  bootstrap/sm-client-tools.rpm

  sent 189 bytes  received 66,701 bytes  44,593.33 bytes/sec
  total size is 72,427  speedup is 1.08
  receiving incremental file list
  ./
  .mtime
  lock
  web.ss
  config/
  config/distros.d/
  config/images.d/
  config/profiles.d/
  config/repos.d/
  config/systems.d/
  kickstarts/
  kickstarts/autoyast_sample.xml
  loaders/
  snippets/
  triggers/
  triggers/add/
  triggers/add/distro/
  triggers/add/distro/post/
  triggers/add/distro/pre/
  triggers/add/profile/
  triggers/add/profile/post/
  triggers/add/profile/pre/
  triggers/add/repo/
  triggers/add/repo/post/
  triggers/add/repo/pre/
  triggers/add/system/
  triggers/add/system/post/
  triggers/add/system/pre/
  triggers/change/
  triggers/delete/
  triggers/delete/distro/
  triggers/delete/distro/post/
  triggers/delete/distro/pre/
  triggers/delete/profile/
  triggers/delete/profile/post/
  triggers/delete/profile/pre/
  triggers/delete/repo/
  triggers/delete/repo/post/
  triggers/delete/repo/pre/
  triggers/delete/system/
  triggers/delete/system/post/
  triggers/delete/system/pre/
  triggers/install/
  triggers/install/post/
  triggers/install/pre/
  triggers/sync/
  triggers/sync/post/
  triggers/sync/pre/

  sent 262 bytes  received 3,446 bytes  7,416.00 bytes/sec
  total size is 70,742  speedup is 19.08
  receiving incremental file list
  kickstarts/
  kickstarts/snippets/
  kickstarts/snippets/default_motd
  kickstarts/snippets/keep_system_id
  kickstarts/snippets/post_delete_system
  kickstarts/snippets/post_reactivation_key
  kickstarts/snippets/redhat_register
  kickstarts/snippets/sles_no_signature_checks
  kickstarts/snippets/sles_register
  kickstarts/snippets/sles_register_script
  kickstarts/snippets/wait_for_networkmanager_script
  kickstarts/upload/
  kickstarts/wizard/

  sent 324 bytes  received 1,063 bytes  2,774.00 bytes/sec
  total size is 12,133  speedup is 8.75
  receiving incremental file list
  ssl-build/
  ssl-build/RHN-ORG-PRIVATE-SSL-KEY
  ssl-build/RHN-ORG-TRUSTED-SSL-CERT
  ssl-build/index.txt
  ssl-build/index.txt.attr
  ssl-build/latest.txt
  ssl-build/rhn-ca-openssl.cnf
  ssl-build/rhn-ca-openssl.cnf.1
  ssl-build/rhn-org-trusted-ssl-cert-1.0-1.noarch.rpm
  ssl-build/rhn-org-trusted-ssl-cert-1.0-1.src.rpm
  ssl-build/serial
  ssl-build/d248/
  ssl-build/d248/latest.txt
  ssl-build/d248/rhn-org-httpd-ssl-archive-d248-1.0-1.tar
  ssl-build/d248/rhn-org-httpd-ssl-key-pair-d248-1.0-1.noarch.rpm
  ssl-build/d248/rhn-org-httpd-ssl-key-pair-d248-1.0-1.src.rpm
  ssl-build/d248/rhn-server-openssl.cnf
  ssl-build/d248/server.crt
  ssl-build/d248/server.csr
  ssl-build/d248/server.key
  ssl-build/d248/server.pem

  sent 380 bytes  received 50,377 bytes  101,514.00 bytes/sec
  total size is 90,001  speedup is 1.77
  SUSE Manager Database Control. Version 1.5.2
  Copyright (c) 2012 by SUSE Linux Products GmbH

  INFO: Database configuration has been changed.
  INFO: Wrote new general configuration. Backup as /var/lib/pgsql/data/postgresql.2016-01-12-11-29-42.conf
  INFO: Wrote new client auth configuration. Backup as /var/lib/pgsql/data/pg_hba.2016-01-12-11-29-42.conf
  INFO: New configuration has been applied.
  Database is online
  System check finished

  ============================================================================
  Migration complete.
  Please shut down the old SUSE Manager server now.
  Reboot the new server and make sure it uses the same IP address and hostname
  as the old SUSE Manager server!

  IMPORTANT: Make sure, if applicable, that your external storage is mounted
  in the new server as well as the ISO images needed for distributions before
  rebooting the new server!
  ============================================================================</screen>
</section>
</chapter>
<chapter xml:id="_bp.client.migration"><title>Client Migration</title><info><abstract>
<simpara>&susemgr;
supports you with upgrading SLE clients to the latest version or SP (service pack).  Upgrading from SLE 12, SLE 12 SP1, or SP2 to SLE 12 SP3 or later (when available) is straight forward.
Upgrading from SLE 11 SPx to SLE 12 SP3 or later (when available) requires some additional steps, but can be automated.</simpara>
</abstract></info>
<section xml:id="_bp.client.migration.sle12"><title>Migrating &sls;  12 or later to version 12 SP3</title><simpara>Existing &sls;
 12 clients (SLE) may be upgraded to SP3 with the <guimenu>SP Migration</guimenu>
 procedure provided by the &webui;
.
The same applies for other supported products based on &sle;
 12.</simpara>
<warning>
<title>Synchronizing Target Channels</title>
<simpara>Before successfully initializing the product migration, you first must make sure that the migration target channels are completely mirrored.
For the upgrade to &sle;
 12 SP3, at least the <literal role="systemitem">SLES12-SP3-Pool</literal>
 base channel with the <literal role="systemitem">SLE-Manager-Tools12-Pool</literal>
 child channel for your architecture is required.
The matching update channels such as <literal role="systemitem">SLE-Manager-Tools12-Updates</literal>
 and <literal role="systemitem">SLES12-SP3-Updates</literal>
 are recommended.</simpara>
</warning>
<orderedlist numeration="arabic">
<title>Procedure: Migrating &sle;12 Client to SP3</title>
<listitem>
<para>Direct your browser to the &susemgr;{webui} where your client is registered, and login.</para>
</listitem>
<listitem>
<para>On the <menuchoice><guimenu>Systems</guimenu> <guimenuitem>All</guimenuitem></menuchoice> page select your client system from the table.</para>
<figure>
<title>Client System Details Page <anchor xml:id="_fig_sles_old_details"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/sles_old_details_page.png" width="80%"/>
</imageobject>
<textobject><phrase>sles old details page</phrase></textobject>
</mediaobject>
</figure>
<simpara>If there are <guimenu>Software Updates Available</guimenu>
in the <guimenu>System Status</guimenu>
notification install these updates first to avoid trouble during the migration process.</simpara>
</listitem>
<listitem>
<para>On the system&#8217;s detail page (<xref linkend="_fig_sles_old_details"/>) select the <guimenu>Software</guimenu> tab, then the <guimenu>SP Migration</guimenu> tab (<xref linkend="_fig_sles_old_spmigr"/>).</para>
<figure>
<title>SP Migration Page <anchor xml:id="_fig_sles_old_spmigr"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/sles_old_details_spmigration.png" width="80%"/>
</imageobject>
<textobject><phrase>sles old details spmigration</phrase></textobject>
</mediaobject>
</figure>
</listitem>
<listitem>
<para>On <xref linkend="_fig_sles_old_spmigr"/> you will see the installed products listed on your client. Select the wanted <guimenu>Target Products</guimenu> (if there is more than one), which is <literal role="systemitem">SUSE Linux Enterprise Server 12 SP3</literal> .</para>
<figure>
<title>SP Migration Target <anchor xml:id="_fig_sles_migration_target"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/sles_migration_target.png" width="80%"/>
</imageobject>
<textobject><phrase>sles migration target</phrase></textobject>
</mediaobject>
</figure>
<simpara>Then confirm with <guimenu>Select Channels</guimenu>
.</simpara>
<figure>
<title>SP Migration Channels <anchor xml:id="_fig_sles_migration_channels"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/sles_migration_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>sles migration target</phrase></textobject>
</mediaobject>
</figure>
</listitem>
<listitem>
<para>On <xref linkend="_fig_sles_migration_channels"/>, <guimenu>Schedule Migration</guimenu> , and on <xref linkend="_fig_sles_migration_schedule"/>, <guimenu>Confirm</guimenu> .</para>
<figure>
<title>Schedule Client System Migration <anchor xml:id="_fig_sles_migration_schedule"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/sles_migration_schedule.png" width="80%"/>
</imageobject>
<textobject><phrase>sles migration schedule</phrase></textobject>
</mediaobject>
</figure>
</listitem>
</orderedlist>
<simpara>Check the <guimenu>System Status</guimenu>
 on the system&#8217;s details when the migration is done.</simpara>
<figure>
<title>Migrated Client System <anchor xml:id="_fig_sles_migrated"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/sles_migrated.png" width="80%"/>
</imageobject>
<textobject><phrase>sles migrated</phrase></textobject>
</mediaobject>
</figure>
<simpara>If the <guimenu>System Status</guimenu>
 notification does not report a successful migration but lists <guimenu>Software Updates Available</guimenu>
, install the update now and then check again.</simpara>
<simpara>Finally, consider to schedule a reboot.</simpara>
</section>
<section xml:id="_bp.client.migration.sle11"><title>Migrating &sle;  11 SPx to version 12 SP3</title><simpara>&sle;
 11 SPx clients may be auto-upgraded to version 12 SP3 by means of &yast;
auto-installation.
The same applies for other supported products based on &sle;
 11.</simpara>
<note>
<title>Supported Upgrade Paths</title>
<simpara>For generally supported &sle;
upgrade paths, see the &slea;{deploy}
, chapter <quote>Supported Upgrade Paths to SLE 12
    SP3</quote>
: <link xl:href="https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_update_sle_paths.html">https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_update_sle_paths.html</link>.</simpara>
<simpara>As you can see, it is especially important that you migrate the client to the latest available SP first (December 2017: Version 11 SP4).</simpara>
</note>
<simpara>This procedure will work for <quote>traditionally</quote>
 managed systems (system type <literal>management</literal>).  Using Salt it will not be available (system type <literal>salt</literal>).</simpara>
<simpara>During the procedure, the machine reboots and performs the system upgrade.
The process is controlled by &yast;
and &ay;
, not by plain <command>zypper</command> commands.</simpara>
<important>
<simpara>Only perform this migration on client systems managed by &susemgr;
servers.
For upgrading the &susemgr;
server itself, see <xref linkend="_bp.sp.migration"/>.
This is a viable method for major version upgrades such as an upgrade from &sle;
 11 to 12.</simpara>
</important>
<simpara>Perform the following steps:</simpara>
<note xml:id="_bp.proc.client.migration.sle11.prep">
<title>Procedure: System Upgrade Preparation</title>
<simpara>Make sure your &susemgr;
and all the clients you want to upgrade have installed all available updates, including the &susemgr;
tools.
This is absolutely necessary, otherwise the system upgrade will fail.</simpara>
</note>
<simpara>+</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>On the &susemgr; server, create a local tree with the SLES 12 SP3 installation sources. This is needed for booting the clients into the installation or upgrade scenario. For example, download the ISO image of the DVD1 with the installation sources and mount the ISO image as <filename>/mnt/sles12-sp3</filename> :</para>
<screen>mkdir /mnt/sles12-sp3
mount -o loop`DVD1`.iso /mnt/sles12-sp3</screen>
</listitem>
<listitem>
<para>Create an auto-installation distribution: For all distributions you want to perform a system upgrade, you need to create a SLE 12 SP3 distribution in &susemgr; . Use the following steps to create one:</para>
<itemizedlist>
<listitem>
<para>In the &susemgr; Web interface, click <menuchoice><guimenu>Systems</guimenu> <guisubmenu>Autoinstallation</guisubmenu> <guimenuitem>Distributions</guimenuitem></menuchoice> .</para>
</listitem>
<listitem>
<para>Enter a <guimenu>Distribution Label</guimenu> for your distribution (for example, use <literal>summer2017</literal>) as a label and specify the <guimenu>Tree Path</guimenu> , which is the root directory of the &sls; 12 SP3 installation sources (for example, in this case <filename>/mnt/sles12-sp3</filename> ). As the <guimenu>Base Channel</guimenu> use the update target distribution <quote>SLES12-SP3-Pool for x86_64</quote> .</para>
</listitem>
<listitem>
<para>Confirm with <guimenu>Create Autoinstallable Distribution</guimenu> .</para>
</listitem>
</itemizedlist>
<simpara>For more information about Autoinstallation, see <xref linkend="_ref.webui.systems.autoinst"/>.</simpara>
</listitem>
<listitem>
<para>Create an activation key for your SLE 12 SP3 systems.</para>
<simpara>In order to switch from the old SLES 11 base channel to the new SLE 12 SP3 base channel, you need an activation key.
Use the following steps to create it:</simpara>
<itemizedlist>
<listitem>
<para>Go to <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Activation Keys</guimenuitem></menuchoice> and click <guimenu>Create Key</guimenu> .</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<itemizedlist xml:id="_st.maintenance_migration.activationkey">
<listitem>
<para>Enter a description for your key.</para>
</listitem>
<listitem>
<para>Enter a key or leave it blank to generate an automatic key.</para>
</listitem>
<listitem>
<para>If you want to limit the usage, enter your value in the <guimenu>Usage</guimenu> text field.</para>
</listitem>
<listitem>
<para>Select the <quote>SLES12-SP3-Pool for x86_64</quote> base channel.</para>
</listitem>
<listitem>
<para>Decide about <guimenu>Add-On System Types</guimenu> .</para>
</listitem>
<listitem>
<para>Click <guimenu>Create Activation Key</guimenu> .</para>
</listitem>
<listitem>
<para>Click the <guimenu>Child Channels</guimenu> tab and select the required channels. Finish with <guimenu>Update Key</guimenu> .</para>
<orderedlist xml:id="_st.maintenance_migration.upload" numeration="arabic">
<listitem>
<para>Upload an &ay; profile.</para>
</listitem>
</orderedlist>
</listitem>
<listitem>
<para>Create an &ay; XML file according to <xref linkend="_ap_sample_autoinst_system_upgrade"/>.</para>
<simpara>For more information about &ay;
, see <xref linkend="_ref.webui.systems.autoinst.ay_intro"/>.</simpara>
</listitem>
<listitem>
<para>Go to <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Autoinstallation</guimenuitem></menuchoice> and click <guimenu>Upload Kickstart/Autoyast File</guimenu> .</para>
</listitem>
<listitem>
<para>Paste the XML content in the text area or select the file to upload. Click <guimenu>Create</guimenu> .</para>
</listitem>
<listitem>
<para>Add <literal>autoupgrade=1</literal> in the <guimenu>Kernel Options</guimenu> of the <guimenu>Details</guimenu> tab and click <guimenu>Update</guimenu> .</para>
</listitem>
<listitem>
<para>Switch to the <guimenu>Variable</guimenu> tab.</para>
</listitem>
<listitem>
<para>Enter in the text field <literal>registration_key=</literal> and the key from <xref linkend="_st.maintenance_migration.activationkey"/>.</para>
</listitem>
<listitem>
<para>Click <guimenu>Update Variables</guimenu> .</para>
</listitem>
</itemizedlist>
<simpara>After you have successfully finished the previous procedure, everything is prepared for an upgrade.
To upgrade a system, continue with <xref linkend="_bp.proc.client.migration.sle11.upgrade"/>.</simpara>
<warning xml:id="_bp.proc.client.migration.sle11.upgrade">
<title>Synchronizing Target Channels</title>
<simpara>Before successfully initializing the product migration, make sure that the migration target channels are completely mirrored.
For the upgrade to &sle;
 12 SP3, at least the <literal role="systemitem">SLES12-SP3-Pool</literal>
 base channel with the <literal role="systemitem">SLE-Manager-Tools12-Pool</literal>
 child channel for your architecture is required.
The matching update channels such as <literal role="systemitem">SLE-Manager-Tools12-Updates</literal>
 and <literal role="systemitem">SLES12-SP3-Updates</literal>
 are recommended.</simpara>
</warning>
<simpara>For example, watch progress in <filename>/var/log/rhn/reposync/sles12-sp3-pool-x86_64.log</filename>
.</simpara>
<simpara>+</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Go to the system via <guimenu>Systems</guimenu> and click the name of the system. Then on the systems details page, click <menuchoice><guimenu>Provisioning</guimenu> <guisubmenu>Autoinstallation</guisubmenu> <guimenuitem>Schedule</guimenuitem></menuchoice> , and choose the &ay; XML profile you have uploaded in <xref linkend="_bp.proc.client.migration.sle11.prep"/>, <xref linkend="_st.maintenance_migration.upload"/>.</para>
</listitem>
<listitem>
<para>Click <guimenu>Schedule Autoinstallation and Finish</guimenu> .</para>
<simpara>Next time the machine asks the &susemgr;
server for jobs, it will receive a reinstallation job which fetches kernel and initrd and writes a new <filename>/boot/grub/menu.lst</filename>
(containing pointers to the new kernel and initrd).</simpara>
<simpara>When the machine boots, it will use the &grub;
configuration and boots the new kernel with its initrd.
No PXE boot is required for this process.
A shutdown of the machine is initiated as well, effectively 3 minutes after the job was fetched.</simpara>
</listitem>
</orderedlist>
</section>
</chapter>
<chapter xml:id="_ap_sample_autoinst_system_upgrade"><title>Sample Autoinstallation Script for System Upgrade (SLES 11 SP4 to SLES 12 SP3)</title><simpara><indexterm>
<primary>autoinstallation system upgrade</primary><secondary>sample file</secondary>
</indexterm>
<indexterm>
<primary>sample file</primary>
</indexterm></simpara>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns"
         xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;general&gt;
  $SNIPPET('spacewalk/sles_no_signature_checks')
    &lt;mode&gt;
      &lt;confirm config:type="boolean"&gt;false&lt;/confirm&gt;
    &lt;/mode&gt;
  &lt;/general&gt;
  &lt;add-on&gt;
    &lt;add_on_products config:type="list"&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sles12-sp3-updates-x86_64/summer2017&lt;/media_url&gt;
        &lt;name&gt;SLES12 SP3 Updates&lt;/name&gt;
        &lt;product&gt;SLES12-SP3&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sle-manager-tools12-pool-x86_64-sp3/summer2017&lt;/media_url&gt;
        &lt;name&gt;SLE12 SP3 Manager Tools Pool&lt;/name&gt;
        &lt;product&gt;SLES12-SP3&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sle-manager-tools12-updates-x86_64-sp3/summer2017&lt;/media_url&gt;
        &lt;name&gt;SLE12 SP3 Manager Tools Updates&lt;/name&gt;
        &lt;product&gt;SLES12-SP3&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
    &lt;/add_on_products&gt;
  &lt;/add-on&gt;
  &lt;upgrade&gt;
    &lt;only_installed_packages config:type="boolean"&gt;false&lt;/only_installed_packages&gt;
    &lt;stop_on_solver_conflict config:type="boolean"&gt;true&lt;/stop_on_solver_conflict&gt;
  &lt;/upgrade&gt;
  &lt;backup&gt;
    &lt;sysconfig config:type="boolean"&gt;true&lt;/sysconfig&gt;
    &lt;modified config:type="boolean"&gt;true&lt;/modified&gt;
    &lt;remove_old config:type="boolean"&gt;false&lt;/remove_old&gt;
  &lt;/backup&gt;
  &lt;networking&gt;
    &lt;keep_install_network config:type="boolean"&gt;true&lt;/keep_install_network&gt;
    &lt;start_immediately config:type="boolean"&gt;true&lt;/start_immediately&gt;
  &lt;/networking&gt;
   &lt;scripts&gt;
    &lt;init-scripts config:type="list"&gt;
      $SNIPPET('spacewalk/sles_register_script')
    &lt;/init-scripts&gt;
  &lt;/scripts&gt;
&lt;/profile&gt;</screen>
</chapter>
<chapter xml:id="_bp.postgresql.database.migration"><title>Postgresql Database Migration</title><info><abstract>
<simpara>&susemgr;
3 uses postgresql database version 9.4.
postgresql version 9.6 has been officially released for SLES 12 SP3.
In the near future postgresql 9.6 will become the base version provided by &susemgr;
.
Currently version 9.4 is hardcoded into SUSE Manager, therefore when installing &susemgr;
it will explicitly use this version.
This chapter provides guidance on migrating an existing 9.4 database to 9.6 on your &susemgr;
Server.</simpara>
</abstract></info>
<section xml:id="_bp.postgresql.database.migration.new.installations"><title>New &susemgr; Installations</title><simpara>Once support for postgresql version 9.6 has been officially released for SUSE Manager, no action will be required for new installations.
The &susemgr;
extension will pick up the latest version during installation on SLES 12 SP3.
This will be fully transparent to the user.
Check the active postgresql version with the following command:</simpara>
<screen>suse-manager-example-srv:~ # psql --version
psql (PostgreSQL) 9.6.3</screen>
</section>
<section xml:id="_bp.postgresql.database.migrating.existing.installations"><title>Migrating an Existing Installation</title><simpara>Before migrating to the new database version, ensure SUSE Manager is fully patched to the latest version.
You can check if the system is ready to use postgresql 9.6 by issuing the following command:</simpara>
<screen>suma-test-srv:~ # rpm -q smdba
smdba-1.5.8-0.2.3.1.x86_64</screen>
<important>
<simpara>Postgresql 9.6 requires smdba version 1.5.8 or higher</simpara>
</important>
<warning>
<simpara>Always create a database backup before performing a migration</simpara>
</warning>
<simpara>.
The database migration begins by executing the following command:</simpara>
<screen>$&gt; /usr/lib/susemanager/bin/pg-migrate.sh</screen>
<simpara>The <filename>pg-migrate.sh</filename>
 script will automatically perform the following operations:</simpara>
<itemizedlist>
<listitem>
<para>Stop spacewalk services</para>
</listitem>
<listitem>
<para>Shut down the running database</para>
</listitem>
<listitem>
<para>Check if postgresql 9.6 is installed and install it if not already present</para>
</listitem>
<listitem>
<para>Switch from postgresql 9.4 to postgresql 9.6 as the new default</para>
</listitem>
<listitem>
<para>Initiates the database migration</para>
</listitem>
<listitem>
<para>Creates a postgresql configuration file tuned for use by SUSE Manager (The reason for the latest version of smdba)</para>
</listitem>
<listitem>
<para>Start both the database and spacewalk services</para>
</listitem>
</itemizedlist>
<note>
<simpara>Please note that during the migration the data directory of the database is copied for use by the postgresql 9.6.
This results in temporarily doubling the amount of required disk space.
In case of a failure, the migration script will attempt a restore to the original state.
After a successful migration, you may safely delete the old database directory (renamed to /var/lib/pgsql/data-pg94) to reclaim lost disk space.</simpara>
</note>
</section>
<section xml:id="_performing_a_fast_migration"><title>Performing a Fast Migration</title><simpara>There are two negative aspects to performing a regular migration:</simpara>
<itemizedlist>
<listitem>
<para>You temporarily need double the disk space under <filename>/var/lib/pgsql</filename></para>
</listitem>
<listitem>
<para>Depending on the size of the database the migration can take up some time because the whole data directory needs to be copied.</para>
</listitem>
</itemizedlist>
<simpara>It is possible however to perform a <literal>fast migration</literal>.
In this case you do not need the additional disk space as the database files will not be copied but hard linked.
This also has the natural effect of greatly increasing the speed of the migration process The entire migration could be completed in less than one minute.</simpara>
<warning>
<simpara>Keep in mind if a fast migration fails, database restoration will only be possible with a database backup.
Only perform a fast migration if you have an availabel database backup.</simpara>
</warning>
<simpara>Perform a fast migration with the following command (Ensure you have a database backup):</simpara>
<screen>$&gt; /usr/lib/susemanager/bin/pg-migrate.sh fast</screen>
</section>
<section xml:id="_typical_migration_sample_session"><title>Typical Migration Sample Session</title><simpara>A slow migration should provide you with the following output:</simpara>
<screen>d235:~ # /usr/lib/susemanager/bin/pg-migrate.sh
15:58:00   Shut down spacewalk services...
Shutting down spacewalk services...
Done.
15:58:03   Checking postgresql version...
15:58:03   Installing postgresql 9.6...
Dienst 'SUSE_Linux_Enterprise_Server_12_SP2_x86_64' wird aktualisiert.
Dienst 'SUSE_Manager_Server_3.1_x86_64' wird aktualisiert.
Repository-Daten werden geladen...
Installierte Pakete werden gelesen...
Paketabhängigkeiten werden aufgelöst...

Die folgenden 3 NEUEN Pakete werden installiert:
  postgresql96 postgresql96-contrib postgresql96-server

3 neue Pakete zu installieren.
Gesamtgröße des Downloads: 5,7 MiB. Bereits im Cache gespeichert: 0 B. Nach der Operation werden zusätzlich 25,3 MiB belegt.
Fortfahren? [j/n/...? zeigt alle Optionen] (j): j
Paket postgresql96-9.6.3-2.4.x86_64 abrufen (1/3),   1,3 MiB (  5,1 MiB entpackt)
Abrufen: postgresql96-9.6.3-2.4.x86_64.rpm [fertig]
Paket postgresql96-server-9.6.3-2.4.x86_64 abrufen (2/3),   3,7 MiB ( 17,9 MiB entpackt)
Abrufen: postgresql96-server-9.6.3-2.4.x86_64.rpm [.fertig]
Paket postgresql96-contrib-9.6.3-2.4.x86_64 abrufen (3/3), 648,9 KiB (  2,2 MiB entpackt)
Abrufen: postgresql96-contrib-9.6.3-2.4.x86_64.rpm [fertig]
Überprüfung auf Dateikonflikte läuft: [......fertig]
(1/3) Installieren: postgresql96-9.6.3-2.4.x86_64 [............fertig]
(2/3) Installieren: postgresql96-server-9.6.3-2.4.x86_64 [............fertig]
(3/3) Installieren: postgresql96-contrib-9.6.3-2.4.x86_64 [............fertig]
15:58:08   Ensure postgresql 9.6 is being used as default...
15:58:09   Successfully switched to new postgresql version 9.6.
15:58:09   Create new database directory...
15:58:09   Initialize new postgresql 9.6 database...
The files belonging to this database system will be owned by user "postgres".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /var/lib/pgsql/data ... ok
creating subdirectories ... ok
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting dynamic shared memory implementation ... posix
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... ok
syncing data to disk ... ok

WARNING: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    pg_ctl -D /var/lib/pgsql/data -l logfile start

15:58:12   Successfully initialized new postgresql 9.6 database.
15:58:12   Upgrade database to new version postgresql 9.6...
Performing Consistency Checks
-----------------------------
Checking cluster versions                                   ok
Checking database user is the install user                  ok
Checking database connection settings                       ok
Checking for prepared transactions                          ok
Checking for reg* system OID user data types                ok
Checking for contrib/isn with bigint-passing mismatch       ok
Checking for roles starting with 'pg_'                      ok
Creating dump of global objects                             ok
Creating dump of database schemas
  postgres
  susemanager
  template1
                                                            ok
Checking for presence of required libraries                 ok
Checking database user is the install user                  ok
Checking for prepared transactions                          ok

If pg_upgrade fails after this point, you must re-initdb the
new cluster before continuing.

Performing Upgrade
------------------
Analyzing all rows in the new cluster                       ok
Freezing all rows on the new cluster                        ok
Deleting files from new pg_clog                             ok
Copying old pg_clog to new server                           ok
Setting next transaction ID and epoch for new cluster       ok
Deleting files from new pg_multixact/offsets                ok
Copying old pg_multixact/offsets to new server              ok
Deleting files from new pg_multixact/members                ok
Copying old pg_multixact/members to new server              ok
Setting next multixact ID and offset for new cluster        ok
Resetting WAL archives                                      ok
Setting frozenxid and minmxid counters in new cluster       ok
Restoring global objects in the new cluster                 ok
Restoring database schemas in the new cluster
  postgres
  susemanager
  template1
                                                            ok
Copying user relation files
  /var/lib/pgsql/data-pg94/base/12753/12710

[...]

  /var/lib/pgsql/data-pg94/base/1/12574
                                                            ok
Setting next OID for new cluster                            ok
Sync data directory to disk                                 ok
Creating script to analyze new cluster                      ok
Creating script to delete old cluster                       ok

Upgrade Complete
----------------
Optimizer statistics are not transferred by pg_upgrade so,
once you start the new server, consider running:
    ./analyze_new_cluster.sh

Running this script will delete the old cluster's data files:
    ./delete_old_cluster.sh
15:58:51   Successfully upgraded database to postgresql 9.6.
15:58:51   Tune new postgresql configuration...
INFO: Database configuration has been changed.
INFO: Wrote new general configuration. Backup as /var/lib/pgsql/data/postgresql.2017-07-26-15-58-51.conf
INFO: Wrote new client auth configuration. Backup as /var/lib/pgsql/data/pg_hba.2017-07-26-15-58-51.conf
INFO: Configuration has been changed, but your database is right now offline.
Database is offline
System check finished
15:58:51   Successfully tuned new postgresql configuration.
15:58:51   Starting spacewalk services...
Starting spacewalk services...
Done.</screen>
</section>
</chapter>
<chapter xml:id="_bp.chap.suma.backup"><title>Database Backup and Restoration</title><simpara>Backing up SUSE Manager can be done in several ways.
Regardless of the method chosen, the associated database also needs to be backed up.</simpara>
<section xml:id="_files_and_directories_requiring_backup"><title>Files and Directories Requiring Backup</title><simpara>The following files and directories should be backed up:</simpara>
<itemizedlist>
<listitem>
<para>The location of your SUSE Manager database, for example: <filename>/var/spacewalk/db-backup</filename></para>
</listitem>
<listitem>
<para><filename>/etc/sysconfig/rhn/</filename></para>
</listitem>
<listitem>
<para><filename>/etc/rhn/</filename></para>
</listitem>
<listitem>
<para><filename>/etc/sudoers</filename></para>
</listitem>
<listitem>
<para><filename>/srv/www/htdocs/pub/</filename></para>
</listitem>
<listitem>
<para><filename>/var/spacewalk/packages/1</filename> (/2, /3, for each additional organization using custom RPMs)</para>
</listitem>
<listitem>
<para><filename>/root/.gnupg/</filename></para>
</listitem>
<listitem>
<para><filename>/root/ssl-build/</filename></para>
</listitem>
<listitem>
<para><filename>/etc/dhcp.conf</filename></para>
</listitem>
<listitem>
<para><filename>/srv/tftpboot/</filename></para>
</listitem>
<listitem>
<para><filename>/etc/cobbler/</filename></para>
</listitem>
<listitem>
<para><filename>/var/lib/cobbler/</filename></para>
</listitem>
<listitem>
<para><filename>/var/lib/rhn/kickstarts/</filename></para>
</listitem>
<listitem>
<para><filename>/srv/www/cobbler</filename></para>
</listitem>
<listitem>
<para><filename>/root/.ssh</filename> (Backup is required when using ssh tunnel or ssh push. Keep in mind if you need to reinstall the server and you do not have a copy of the id-susemanager key saved, you must perform a mgr-ssh-push-init again for all clients.lsls)</para>
</listitem>
<listitem>
<para>Directories containing your custom data (scripts, kickstart profiles, autoyast, custom rpms, etc) should be included in the backup.</para>
</listitem>
<listitem>
<para>If you have mountpoints to ISO&#8217;s needed for distributions, these ISOs and the <filename>/etc/fstab</filename> should be part of your backup.</para>
</listitem>
</itemizedlist>
<simpara>&suse;
recommends backing up the entire <filename>/var/spacewalk/</filename>
 tree.
In case of failure, this will save you lengthy download/resync time.
Since <filename>/var/spacewalk/</filename>
 (more specifically <filename>/var/spacewalk/packages/NULL/</filename>
) is primarily a duplicate of the package repository, it can be regenerated with <command>mgr-sync</command>.</simpara>
<simpara>If you are running SUSE Manager in a disconnected setup <filename>/var/spacewalk/</filename><emphasis>must</emphasis> be backed up.</simpara>
<simpara>Backing up only these files and directories requires reinstalling the &susemgr;
RPMs and re-registering &susemgr;
.
In addition, packages need to be resynchronized using the <command>mgr-sync</command> tool.
Finally, you have to reinstall the <filename>/root/ssl-build/rhn-org-httpd-ssl-key-pair-MACHINE_NAME-VER-REL.noarch.rpm</filename>
.</simpara>
<simpara>Another method is to back up all the files and directories mentioned above but reinstall the &susemgr;
without re-registering it.
During the installation, cancel or skip the registration and SSL certificate generation sections.</simpara>
<simpara>The most comprehensive method is to back up the entire machine.
This saves time in downloading and reinstalling but requires additional disk space and backup time.</simpara>
<note>
<simpara>Regardless of the backup method used, when restoring &susemgr;
from a backup, you must run the following command to schedule the recreation of search indexes the next time the <command>rhn-search</command> service is started:</simpara>
<screen>rcrhn-search cleanindex</screen>
</note>
</section>
<section xml:id="_config.suma.database.smdba"><title>Administering The SUSE Manager Database with (smdba)</title><simpara>&susemgr;
provides the <command>smdba</command> command for managing the installed database.</simpara>
<simpara>The <command>smdba</command> command works on local databases only, not remote.
This utility allows you to do several administrative tasks like backing up and restoring the database, everything from creating, verifying, and restoring backups to obtain the database status and restart the database if necessary.
The <command>smdba</command> command supports postgres databases.</simpara>
<important>
<title>Running <command>smdba</command> Relies on <command>sudo</command>Enablement</title>
<simpara>Running <command>smdba</command> relies on proper <command>sudo</command> configuration. <command>sudo</command> allows you to invoke <command>smdba</command> as a regular user and thus, you are save from executing unwanted system changes.</simpara>
<simpara>For example, to allow the user <literal role="username">admin</literal>
 (the <quote>administrative UID</quote>
) to execute <command>smdba</command> commands, and thus manipulating the underlying database with the <quote>operative
                    UID</quote>
, make sure something as follows is configured in <filename>/etc/sudoers</filename>
:</simpara>
<screen>admin   ALL=(postgres) /usr/bin/smdba</screen>
<simpara>With these settings <literal role="username">admin</literal>
 user will be allowed to access the target database account (<literal>oracle</literal> or <literal>postgres</literal>).</simpara>
<simpara>For configuring <command>sudo</command> and its security implications, see the <literal>sudo</literal> and <literal>sudoers</literal> manpages and the extensive comments in the <filename>/etc/sudoers</filename>
 configuration file.</simpara>
</important>
<simpara>Find basic information about <command>smdba</command> in the <literal>smdba</literal> manpage.</simpara>
<note>
<title>Restart Spacewalk Services When Connection is Lost</title>
<simpara>If you have stopped or restarted the database, Spacewalk services connections may be interrupted.
In such a case, execute the following command:</simpara>
<screen>``spacewalk-service`` restart</screen>
</note>
</section>
<section xml:id="_config_smdb.start_and_stop"><title>Starting and Stopping the Database</title><simpara>There are three commands to start, stop, or retrieve the status of the database.
These commands work with both databases.
Use the following commands:</simpara>
<screen>smdba db-status
Checking database core...       online</screen>
<screen>smdba db-stop
Stopping the SUSE Manager database...
Stopping core:         done</screen>
<screen>smdba db-status
Checking database core...       offline</screen>
<screen>smdba db-start
Starting core...       done</screen>
</section>
<section xml:id="_config_smdb.create_backup"><title>Backing up the Database</title><variablelist>
<varlistentry>
<term>smdba</term>
<listitem>
<simpara>The <command>smdba</command> command performs a <emphasis>continuous
archiving backup</emphasis>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Hot Backup</term>
<listitem>
<simpara>The term hot backup refers to a backup performed when both the database and SUSE Manager are running.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Cold Backup</term>
<listitem>
<simpara>The term cold backup refers to a backup performed when both the database and SUSE Manager services are shutdown.</simpara>
</listitem>
</varlistentry>
</variablelist>
<important>
<title>Database Backup Space Requirements</title>
<simpara>For both a running/hot database backup or an automated backup of the database using cron you must have at least 3 times the amount of space of the current database.
Check current database space usage with <command>df -h</command> on <filename>/var/lib/pgsql/</filename>
.</simpara>
</important>
<simpara>To perform a hot database backup for postgresql, do the following:</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Performing a Hot Backup</title>
<listitem>
<para>Allocate permanent space on your remote storage, which you use for general backups (NAS, iSCSI target, etc.). For example:</para>
<screen>/var/spacewalk/db-backup</screen>
<note>
<title>Backup on NFS Share</title>
<simpara>A backup from the SUSE Manager server is not required when the mount point for <filename>/var/spacewalk</filename>
 is on an NFS share.</simpara>
</note>
<simpara>This directory should always be the same and never change.
It will be a permanent target to store new backups and restore from it during a disaster recovery.</simpara>
</listitem>
<listitem>
<para>Create a directory with the correct permissions in your target directory, e.g., with using <command>sudo</command>:</para>
<screen>sudo -u postgres mkdir /var/spacewalk/db-backup</screen>
<simpara>Alternatively, as &rootuser;
:</simpara>
<screen>install -d -o postgres /var/spacewalk/db-backup</screen>
<simpara>Or:</simpara>
<screen>mkdir /var/spacewalk/db-backup
chown postgres:postgres /var/spacewalk/db-backup</screen>
</listitem>
<listitem>
<para>If you want to create a backup for the first time, run:</para>
<screen>``smdba`` backup-hot --enable=on --backup-dir=/var/spacewalk/db-backup</screen>
<simpara>This command performs a restart of the postgresql database.
If you want to renew the basic backup, use the same command.</simpara>
</listitem>
<listitem>
<para>Perform the hot database backup:</para>
<screen>smdba backup-hot --backup-dir=/var/spacewalk/db-backup
...</screen>
<simpara>If the command exits without any errors, find the backup files in your <filename>/mnt/backup/database</filename>
directory.</simpara>
</listitem>
</orderedlist>
<tip>
<title>Performing a Cold Backup</title>
<simpara>When using smdba, you should never require a cold backup.
You may perform a cold backup once after initial SUSE Manager installation and configuration. &suse;
recommends creating a full-backup once a month or weekly and an additional incremental backup for single days.
Moving <filename>/var/spacewalk</filename>
 to an NFS share that is centrally backed-up, will save you alot of time when a restore is required.
The NFS share may also be used during the migration from SUSE Manager 2.1 to SUSE Manager 3.</simpara>
</tip>
</section>
<section xml:id="_smdba.automatic.backup.with.cron"><title>Automatic Backup with cron</title><simpara>It is important to ensure your SUSE Manager database is backed up within a regularly defined schedule.
You can do this with a cron job.
The following procedure describes this process.</simpara>
<important>
<title>Database Backup Space Requirements</title>
<simpara>For all forms of database backup (hot, cold, or automated via cron) you must have at least 3 times the amount of space of the current database.
Check current database space usage with <command>df -h</command> on <filename>/var/spacewalk/</filename>
.</simpara>
</important>
<orderedlist numeration="arabic">
<title>Procedure: Automatic Backup with cron</title>
<listitem>
<para>If you have not created a backup directory do so now:</para>
<screen># mkdir /var/spacewalk/db-backup</screen>
</listitem>
<listitem>
<para>Set the correct user and rights permissions to the directory:</para>
<screen># chown -R postgres:postgres /var/spacewalk/db-backup</screen>
<screen># chmod 700 /var/spacewalk/db-backup</screen>
</listitem>
<listitem>
<para>Add the following line to the cron job at <filename>/etc/cron.d/db-backup-mgr</filename> :</para>
<screen>0 2 * * * root /usr/bin/smdba backup-hot --enable=on --backup-dir=/var/spacewalk/db-backup</screen>
</listitem>
</orderedlist>
</section>
<section xml:id="_config_smdb.restore_backup"><title>Restoring a Database Backup</title><simpara>Use <command>smdba backup-restore</command> to restore to an earlier point in time.
To restore the backup, proceed as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Shutdown the database:</para>
<screen>smdba db-stop</screen>
</listitem>
<listitem>
<para>Start the restore process:</para>
<screen>smdba backup-restore start</screen>
</listitem>
<listitem>
<para>Restart the database:</para>
<screen>smdba db-start</screen>
</listitem>
<listitem>
<para>Run <command>spacewalk-data-fsck</command> to check if there are differences between the RPMs and the database.</para>
</listitem>
</orderedlist>
<simpara>The above steps can be combined with:</simpara>
<screen>smdba backup-restore force</screen>
<simpara>In this case it will select the most recent backup and purge the rest.
Every time you create a new backup, it also purges the previous backups.</simpara>
<note>
<title>Restoring the Most Recent Backup Only</title>
<simpara>Because <command>smdba</command> makes automatic running database backups, it allows restoration of only the most recent backup, which includes merging of current archive logs.</simpara>
</note>
</section>
<section xml:id="_config_smdb.archivelog"><title>Archive Log Settings</title><simpara>In &susemgr;
with an embedded database, archive logging is enabled by default.
This feature allows the database management tool <command>smdba</command> to perform hot backups.</simpara>
<simpara>With archive log enabled, even more data is stored on the hard disk:</simpara>
<itemizedlist>
<listitem>
<para>Postgresql maintains a limited number of archive logs. Using the default configuration, approx. 64 files with a size of 16 MiB are stored.</para>
</listitem>
</itemizedlist>
<simpara>Creating a user and syncing the channels:</simpara>
<itemizedlist>
<listitem>
<para>SLES12-SP2-Pool-x86_64</para>
</listitem>
<listitem>
<para>SLES12-SP2-Updates-x86_64</para>
</listitem>
<listitem>
<para>SLE-Manager-Tools12-Pool-x86_64-SP2</para>
</listitem>
<listitem>
<para>SLE-Manager-Tools12-Updates-x86_64-SP2</para>
</listitem>
</itemizedlist>
<simpara>Postgresql will generate an additional ~1 GB of data.
So it is important to think about a backup strategy and create a backups in a regular way.</simpara>
<simpara>Archive logs are stored at:</simpara>
<itemizedlist>
<listitem>
<para><filename>/var/lib/pgsql/data/pg_xlog/</filename> (postgresql)</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_config_smdb.spaces"><title>Retrieving an Overview of Occupied Database Space</title><simpara>Database administrators may use the subcommand <command>space-overview</command> to get a report about occupied table spaces, for example:</simpara>
<screen>smdba space-overview
SUSE Manager Database Control. Version 1.5.2
Copyright (c) 2012 by SUSE Linux Products GmbH


Tablespace  | Size (Mb) | Avail (Mb) | Use %
------------+-----------+------------+------
postgres    | 7         | 49168      | 0.013
susemanager | 776       | 48399      | 1.602</screen>
<simpara>The following command is available for Postgresql.
For a more detailed report, use the <command>space-tables</command> subcommand.
It lists the table and its size, for example:</simpara>
<screen>smdba space-tables
SUSE Manager Database Control. Version 1.5.2
Copyright (c) 2012 by SUSE Linux Products GmbH


Table                                 | Size
--------------------------------------+-----------
public.all_primary_keys               | 0 bytes
public.all_tab_columns                | 0 bytes
public.allserverkeywordsincereboot    | 0 bytes
public.dblink_pkey_results            | 0 bytes
public.dual                           | 8192 bytes
public.evr_t                          | 0 bytes
public.log                            | 32 kB
...</screen>
</section>
<section xml:id="_moving_the_database"><title>Moving the Database</title><simpara>It is possible to move the database to another location.
For example if your database storage space is running low.
The following procedure will guide you through moving the database to a new location for use by SUSE Manager.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Moving the Database</title>
<listitem>
<para>The default storage location for &susemgr; is: <filename>/var/lib/pgsql/</filename> . You would like to move it, for example to: <filename>/storage/postgres/</filename> . To begin, stop the running database with:</para>
<screen># rcpostgresql stop</screen>
<simpara>Shutdown running spacewalk services with:</simpara>
<screen># spacewalk-service stop</screen>
</listitem>
<listitem>
<para>Copy the current working directory structure with the following syntax:</para>
<screen>cp [OPTION]... SOURCE... DIRECTORY</screen>
<simpara>using the <option>-a, --archive</option> option.
For example:</simpara>
<screen># cp -ar /var/lib/pgsql/ /storage/postgres/</screen>
<simpara>This command will copy the contents of <filename>/var/lib/pgsql/</filename>
to <filename>/storage/postgres/pgsql/</filename>
.</simpara>
<important>
<simpara>The contents of the /var/lib/pgsql needs to remain the same or the SUSE Manager database may malfunction.
You also should ensure there is enough available disk space.</simpara>
</important>
</listitem>
<listitem>
<para>Mount the new database directory with:</para>
<screen># mount /storage/postgres/pgsql</screen>
</listitem>
<listitem>
<para>Make sure ownership is <literal>postgres:postgres</literal> and not <literal>root:root</literal> by changing to the new directory and running the following command:</para>
<screen>/var/lib/pgsql/ # cd /storage/postgres/pgsql/
/storage/postgres/pgsql/ # l
total 8
drwxr-x---  4 postgres postgres   47 Jun  2 14:35 ./</screen>
</listitem>
<listitem>
<para>Add the new database mount location to your servers fstab by editing  <filename>etc/fstab</filename> .</para>
</listitem>
<listitem>
<para>Start the database with:</para>
<screen># rcpostgresql start</screen>
<simpara>Start spacewalk-services with:</simpara>
<screen># spacewalk-service start</screen>
</listitem>
</orderedlist>
</section>
<section xml:id="_recovering_from_a_crashed_root_partition"><title>Recovering from a Crashed Root Partition</title><simpara>This section provides guidance on restoring your server after its root partition has crashed.
This section assumes you have setup your server similar to the procedure explained in Getting Started guide with separate partitions for the database and for channels mounted at <filename>/var/lib/pgsql</filename>
 and <filename>/var/spacewalk/</filename>
.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Recovering from a Crashed Root Partition</title>
<listitem>
<para>Start by installing SLES12 SP2 and the SUSE Manager Extension. Do not mount the <filename>/var/spacewalk</filename> and <filename>/var/lib/pgsql</filename> partitions.</para>
</listitem>
<listitem>
<para>Once installation of SUSE Manager has completed shutdown services with <command>spacewalk-service shutdown</command> and the database with <command>rcpostgresql stop</command>.</para>
</listitem>
<listitem>
<para>Mount your <filename>/var/spacewalk</filename> and <filename>/var/lib/pgsql</filename> partitions and restore the directories listed in section one.</para>
</listitem>
<listitem>
<para>Start SUSE Manager services and the database with <command>spacewalk-services start</command> and <command>rcpostgresql start</command></para>
</listitem>
<listitem>
<para>SUSE Manager should now operate normally without loss of your database or synced channels.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_database_connection_information"><title>Database Connection Information</title><simpara>The information for connecting to the SUSE Manager database is located in <filename>/etc/rhn/rhn.conf</filename>
:</simpara>
<screen>db_backend = postgresql
db_user = susemanager
db_password = susemanager
db_name = susemanager
db_host = localhost
db_port = 5432
db_ssl_enabled =</screen>
</section>
</chapter>
<chapter xml:id="_bp.authentication.with.pam.and.ad"><title>Authentication Methods</title><section xml:id="_authentication_via_pam"><title>Authentication Via PAM</title><simpara>As security measures become increasingly complex, SUSE Manager supports network-based authentication systems via Pluggable Authentication Modules (PAM). PAM is a suite of libraries that allows to integrate SUSE Manager with a centralized authentication mechanism, thus eliminating the need to remember multiple passwords.
SUSE Manager supports LDAP, Kerberos, and other network-based authentication systems via PAM.
To enable SUSE Manager to use PAM in your organization&#8217;s authentication infrastructure, follow the steps below.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Set up a PAM service file (default location: <filename>/etc/pam.d/susemanager</filename> ) then enforce its use by adding the following line to <filename>/etc/rhn/rhn.conf</filename> :</para>
<screen>pam_auth_service = susemanager</screen>
<note>
<simpara>This assumes the PAM service file is named susemanager.</simpara>
</note>
</listitem>
<listitem>
<para>To enable a new or existing user to authenticate with PAM, proceed to the <guimenu>Create User</guimenu> page and select the checkbox labeled Pluggable Authentication Modules (PAM) positioned below the password and password confirmation fields.</para>
</listitem>
<listitem>
<para>To authenticate a &slsa; system against Kerberos add the following lines to <filename>/etc/pam.d/susemanager</filename> :</para>
<screen>#%PAM-1.0
 auth     include        common-auth
 account  include        common-account
 password include        common-password
 session  include        common-session</screen>
<note>
<simpara>To register a Red Hat Enterprise Linux System against Kerberos add the following lines to <filename>/etc/pam.d/susemanager</filename></simpara>
</note>
</listitem>
</orderedlist>
<screen>#%PAM-1.0
 auth        required      pam_env.so
 auth        sufficient    pam_krb5.so no_user_check
 auth        required      pam_deny.so
 account     required      pam_krb5.so no_user_check</screen>
<simpara>+</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>YaST can now be used to configure PAM, when packages such as yast2-ldap-client and yast2-kerberos-client are installed; for detailed information on configuring PAM, see the SUSE Linux Enterprise Server Security Guide <link xl:href="https://www.suse.com/documentation/sles-12/book_security/data/part_auth.html">https://www.suse.com/documentation/sles-12/book_security/data/part_auth.html</link>. This example is not limited to Kerberos; it is generic and uses the current server configuration. Note that only network based authentication services are supported.</para>
<important>
<title>Changing Passwords</title>
<simpara>Changing the password on the SUSE Manager Web interface changes only the local password on the SUSE Manager server.
But this password may not be used at all if PAM is enabled for that user.
In the above example, for instance, the Kerberos password will not be changed.</simpara>
</important>
</listitem>
</orderedlist>
</section>
<section xml:id="_authentication_via_edirectory_and_pam"><title>Authentication Via eDirectory and PAM</title><orderedlist numeration="arabic">
<listitem>
<para>First check to ensure eDirectory authentication is working with your current OS for example:</para>
<screen>#getent passwd</screen>
</listitem>
<listitem>
<para>If users are returned from eDirectory then create the following file:</para>
<screen># cat /etc/pam.d/susemanager</screen>
</listitem>
<listitem>
<para>And add the following content:</para>
<screen>#%PAM-1.0
 auth     include        common-auth
 account  include        common-account
 password include        common-password
 session  include        common-session
 #</screen>
</listitem>
<listitem>
<para>Finally add the following lines to the &susemgr; conf file:</para>
<screen># grep -i pam /etc/rhn/rhn.conf
 pam_auth_service = susemanager</screen>
</listitem>
<listitem>
<para>You may now create users with the same id that appears on eDirectory and mark the Use PAM check-box from the SUSE Manager WebUI.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_example_quest_vas_active_directory_authentication_template"><title>Example Quest VAS Active Directory Authentication Template</title><simpara>If you are using Quest VAS for active directory authentication, you can use the following <filename>/etc/pam.d/susemanager</filename>
 file.</simpara>
<screen>#%PAM-1.0
auth       required       pam_env.so
auth       sufficient     pam_vas3.so no_user_check
auth       requisite      pam_vas3.so echo_return
auth       required       pam_deny.so
account    required       pam_vas3.so no_user_check</screen>
</section>
</chapter>
<chapter xml:id="_bp.chap.bring.your.own.cert"><title>Using a Custom SSL Certificate</title><simpara>The following section will guide you through using a custom certificate with &susemgr;{productnumber}
and &susemgrproxy;{productnumber}
.</simpara>
<section xml:id="_bp.cert.custom.req"><title>Prerequisites</title><simpara>The following list provides requirements for using a custom certificate.</simpara>
<itemizedlist>
<listitem>
<para>A Certificate Authority (CA) SSL public certificate file</para>
</listitem>
<listitem>
<para>A Web server SSL private key file</para>
</listitem>
<listitem>
<para>A Web server SSL public certificate file</para>
</listitem>
<listitem>
<para>Key and Certificate files must be in PEM format</para>
</listitem>
</itemizedlist>
<important>
<title>Hostname and SSL Keys</title>
<simpara>The hostname of the web server&#8217;s SSL keys and relevant certificate files must match the hostname of the machine which they will be deployed on.</simpara>
</important>
<tip>
<title>Intermediate Certificates</title>
<simpara>In case you want to use CAs with intermediate certificates, merge the intermediate and root CA certificates into one file.
It is important that the intermediate certificate comes first within the combined file.</simpara>
</tip>
</section>
<section xml:id="_bp.cert.custom.setup"><title>Setup</title><simpara>After completing &yast;
firstboot procedures, export your current environment variables and point them to the correct SSL files to be imported.
Running these commands will make the default certificate obsolete after executing the <command>yast2 susemanager_setup</command> command.
For more information on &yast;
 firstboot, see <link xl:href="https://www.suse.com/documentation/suse-manager-3/singlehtml/suse_manager21/book_susemanager_install/book_susemanager_install.html#sec.manager.inst.setup">https://www.suse.com/documentation/suse-manager-3/singlehtml/suse_manager21/book_susemanager_install/book_susemanager_install.html#sec.manager.inst.setup</link>.</simpara>
<orderedlist xml:id="_bp.cert.custom.setup.proc.export" numeration="arabic">
<listitem>
<para>Export the environment variables and point to the SSL files to be imported:</para>
<screen>export CA_CERT=`path_to_CA_certificate_file`export SERVER_KEY=`path_to_web_server_key`export SERVER_CERT=`path_to_web_server_certificate`</screen>
</listitem>
<listitem>
<para>Execute &susemgr; setup with</para>
<screen>yast2 susemanager_setup</screen>
<simpara>Proceed with the default setup.
Upon reaching the Certificate Setup window during &yast;
installation, fill in random values, as these will be overridden with the values specified in <xref linkend="_bp.cert.custom.setup.proc.export"/>.</simpara>
<note>
<title>Shell Requirements</title>
<simpara>Make sure that you execute <command>yast2
      susemanager_setup</command> from within the same shell the environment variables were exported from.</simpara>
</note>
</listitem>
</orderedlist>
</section>
<section xml:id="_bp.cert.custom.proxy"><title>Using a Custom Certificate with &susemgrproxy;</title><simpara>After completing the installation with yast found in <xref linkend="_advanced.topics.proxy.quickstart"/> continue with a modified <xref linkend="_at.manager.proxy.run.confproxy"/> procedure:</simpara>
<orderedlist xml:id="_bp.cert.custom.proxy.proc" numeration="arabic">
<listitem>
<para>Execute <command>configure-proxy.sh</command>.</para>
</listitem>
<listitem>
<para>When prompted with:</para>
<screen>Do you want to import existing certificates?</screen>
<simpara>Answer with <keycap>y</keycap>
.</simpara>
</listitem>
<listitem>
<para>Continue by following the script prompts.</para>
</listitem>
</orderedlist>
</section>
</chapter>
<chapter xml:id="_bp.chapt.suma3.troubleshooting"><title>Troubleshooting</title><simpara>This chapter provides guidance on registering cloned systems with SUSE Manager.
This includes both Salt and Traditional clients.
For more information, see <link xl:href="https://www.novell.com/support/kb/doc.php?id=7012170">https://www.novell.com/support/kb/doc.php?id=7012170</link>.</simpara>
<section xml:id="_bp.chapt.suma3.troubleshooting.registering.cloned.salt.systems"><title>Registering Cloned Salt Minions</title><orderedlist numeration="arabic">
<title>Procedure: Registering a Cloned Salt Minion with SUSE Manager</title>
<listitem>
<para>Clone your system (for example using the existing cloning mechanism of your favorite Hypervisor)</para>
<note>
<title>Quick Tips</title>
<simpara>Each step in this section is performed on the cloned system, this procedure does not manipulate the original system, which will still be registered to SUSE Manager.
The cloned virtual machine should have a different UUID from the original (this UUID is generated by your hypervisor) or SUSE Manager will overwrite the original system data with the new one.</simpara>
</note>
</listitem>
<listitem>
<para>Make sure your machines have different hostnames and IP addresses, also check that /etc/hosts contains the changes you made and the correct host entries.</para>
</listitem>
<listitem>
<para>Stop rhnsd daemon with:</para>
<screen># /etc/init.d/rhnsd stop</screen>
<simpara>or alternatively:</simpara>
<screen># rcrhnsd stop</screen>
</listitem>
<listitem>
<para>Stop osad with:</para>
<screen># /etc/init.d/osad stop</screen>
<simpara>or alternativly:</simpara>
<screen># rcosad stop</screen>
</listitem>
<listitem>
<para>Remove the osad authentication configuration file and the systemid with:</para>
<screen># rm -f /etc/sysconfig/rhn/{osad-auth.conf,systemid}</screen>
</listitem>
</orderedlist>
<simpara>The next step you take will depend on the Operating System of the clone.</simpara>
<simpara>The following scenario can occur after on-boarding cloned Salt minions.
If after accepting all cloned minion keys from the onboarding page and you see only one minion on the System Overview page, this is likely due to these machines being clones of the original and using a duplicate machine-id.
Perform the following steps to resolve this conflict based on OS.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: SLES 12 Registering Salt Clones</title>
<listitem>
<para>SLES 12: If your machines have the same machine ids then delete the file on each minion and recreate it:</para>
<screen># rm /etc/machine-id
# rm /var/lib/dbus/machine-id
# dbus-uuidgen --ensure
# systemd-machine-id-setup</screen>
</listitem>
</orderedlist>
<orderedlist numeration="arabic">
<title>Procedure: SLES 11 Registering Salt Clones</title>
<listitem>
<para>SLES 11: As there is no systemd machine id, generate one from dbus:</para>
<screen># rm /var/lib/dbus/machine-id
# dbus-uuidgen --ensure</screen>
</listitem>
</orderedlist>
<simpara>If your machines still have the same minion id then delete the minion_id file on each minion (FQDN will be used when it is regenerated on minion restart):</simpara>
<screen># rm /etc/salt/minion_id</screen>
<simpara>Finally delete accepted keys from Onboarding page and system profile from SUSE Manager, and restart the minion with:</simpara>
<screen># systemctl restart salt-minion</screen>
<simpara>You should be able to re-register them again, but each minion will use a different '/etc/machine-id' and should now be correctly displayed on the System Overview page.</simpara>
</section>
<section xml:id="_bp.chapt.suma3.troubleshooting.registering.cloned.traditional.systems"><title>Registering Cloned Traditional Systems</title><simpara>This section provides guidance on troubleshooting cloned traditional systems registered via bootstrap.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Registering a Cloned System with SUSE Manager (Traditional Systems)</title>
<listitem>
<para>Clone your system (using your favorite hypervisor.)</para>
<note>
<title>Quick Tips</title>
<simpara>Each step in this section is performed on the cloned system, this procedure does not manipulate the original system, which will still be registered to SUSE Manager.
The cloned virtual machine should have a different UUID from the original (this UUID is generated by your hypervisor) or SUSE Manager will overwrite the original system data with the new one.</simpara>
</note>
</listitem>
<listitem>
<para>Change the Hostname and IP addresses, also make sure /etc/hosts contains the changes you made and the correct host entries.</para>
</listitem>
<listitem>
<para>Stop rhnsd daemon with:</para>
<screen># /etc/init.d/rhnsd stop</screen>
<simpara>or alternativly:</simpara>
<screen># rcrhnsd stop</screen>
</listitem>
<listitem>
<para>Stop osad with:</para>
<screen># /etc/init.d/osad stop</screen>
<simpara>or alternativly:</simpara>
<screen># rcosad stop</screen>
</listitem>
<listitem>
<para>Remove the osad authentifcation configuration file and the systemid with:</para>
<screen># rm -f /etc/sysconfig/rhn/{osad-auth.conf,systemid}</screen>
</listitem>
</orderedlist>
<simpara>The next step you take will depend on the Operating System of the clone.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: SLES 12 Registering A Cloned Traditional System</title>
<listitem>
<para></para>
<simpara>If your machines have the same machine ids then delete the file on each client and recreate it:</simpara>
<screen># rm /etc/machine-id
# rm /var/lib/dbus/machine-id
# dbus-uuidgen --ensure
# systemd-machine-id-setup</screen>
</listitem>
<listitem>
<para>Remove the following credential files:</para>
<screen># rm  -f /etc/zypp/credentials.d/{SCCcredentials,NCCcredentials}</screen>
</listitem>
<listitem>
<para>Re-run the bootstrap script. You should now see the cloned system in SUSE Manager without overwriting the system it was cloned from.</para>
</listitem>
</orderedlist>
<orderedlist numeration="arabic">
<title>Procedure: SLES 11 Registering A Cloned Traditional System</title>
<listitem>
<para>Continued from section 1 step 5:</para>
<screen># suse_register -E</screen>
<simpara>(--erase-local-regdata, Erase all local files created from a previous executed registration.
This option make the system look like never registered)</simpara>
</listitem>
<listitem>
<para>Re-run the bootstrap script. You should now see the cloned system in SUSE Manager without overwriting the system it was cloned from.</para>
</listitem>
</orderedlist>
<orderedlist numeration="arabic">
<title>Procedure: SLES 10 Registering A Cloned Traditional System</title>
<listitem>
<para>Continued from section 1 step 5:</para>
<screen># rm -rf /etc/{zmd,zypp}</screen>
</listitem>
<listitem>
<para></para>
<screen># ¡¡¡¡¡ everthing in /var/lib/zypp/ except /var/lib/zypp/db/products/ !!!!!
# check whether this command works for you
# rm -rf /var/lib/zypp/!(db)</screen>
</listitem>
<listitem>
<para></para>
<screen># rm -rf /var/lib/zmd/</screen>
</listitem>
<listitem>
<para>Re-run the bootstrap script. You should now see the cloned system in SUSE Manager without overwriting the system it was cloned from.</para>
</listitem>
</orderedlist>
<orderedlist numeration="arabic">
<title>Procedure: RHEL 5,6 and 7</title>
<listitem>
<para>Continued from section 1 step 5:</para>
<screen># rm  -f /etc/NCCcredentials</screen>
</listitem>
<listitem>
<para>Re-run the bootstrap script. You should now see the cloned system in SUSE Manager without overwriting the system it was cloned from.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_bp.chapt.suma3.troubleshooting.osad.jabberd"><title>Typical OSAD/jabberd Challenges</title><simpara>This section provides answers for typical issues regarding OSAD and jabberd.</simpara>
<section xml:id="_open_file_count_exceeded"><title>Open File Count Exceeded</title><simpara><literal>SYMPTOMS</literal>: OSAD clients cannot contact the SUSE Manager Server, and jabberd requires long periods of time to respond on port 5222.</simpara>
<simpara><literal>CAUSE</literal>: The number of maximum files that a jabber user can open is lower than the number of connected clients.
Each client requires one permanently open TCP connection and each connection requires one file handler.
The result is jabberd begins to queue and refuse connections.</simpara>
<simpara><literal>CURE</literal>: Edit the <filename>/etc/security/limits.conf</filename>
 to something similar to the following: <literal>jabbersoftnofile&lt;#clients + 100&gt;
    jabberhardnofile&lt;#clients + 1000&gt;</literal></simpara>
<simpara>This will vary according to your setup.
For example in the case of 5000 clients: <literal>jabbersoftnofile5100 jabberhardnofile6000</literal></simpara>
<simpara>Ensure you update the <filename>/etc/jabberd/c2s.xml</filename>
 max_fds parameter as well.
For example: <literal>&lt;max_fds&gt;6000&lt;/max_fds&gt;</literal></simpara>
<simpara><literal>EXPLANATION</literal>: The soft file limit is the limit of the maximum number of open files for a single process.
In SUSE Manager the highest consuming process is c2s, which opens a connection per client.
100 additional files are added, here, to accommodate for any non-connection file that c2s requires to work correctly.
The hard limit applies to all processes belonging to the jabber user, and accounts for open files from the router, s2s and sm processes additionally.</simpara>
</section>
<section xml:id="_jabberd_database_corruption"><title>jabberd Database Corruption</title><simpara><literal>SYMPTOMS</literal>: After a disk is full error or a disk crash event, the jabberd database may have become corrupted.
jabberd may then fail to start during spacewalk-service start:</simpara>
<screen>Starting spacewalk services...
   Initializing jabberd processes...
       Starting router                                                                   done
       Starting sm startproc:  exit status of parent of /usr/bin/sm: 2                   failed
   Terminating jabberd processes...</screen>
<simpara>/var/log/messages shows more details:</simpara>
<screen>jabberd/sm[31445]: starting up
jabberd/sm[31445]: process id is 31445, written to /var/lib/jabberd/pid/sm.pid
jabberd/sm[31445]: loading 'db' storage module
jabberd/sm[31445]: db: corruption detected! close all jabberd processes and run db_recover
jabberd/router[31437]: shutting down</screen>
<simpara><literal>CURE</literal>: Remove the jabberd database and restart.
Jabberd will automatically re-create the database:</simpara>
<screen>spacewalk-service stop
 rm -Rf /var/lib/jabberd/db/*
 spacewalk-service start</screen>
<simpara>An alternative approach would be to test another database, but SUSE Manager does not deliver drivers for this:</simpara>
<screen>rcosa-dispatcher stop
 rcjabberd stop
 cd /var/lib/jabberd/db
 rm *
 cp /usr/share/doc/packages/jabberd/db-setup.sqlite .
 sqlite3 sqlite.db &lt; db-setup.sqlite
 chown jabber:jabber *
 rcjabberd start
 rcosa-dispatcher start</screen>
</section>
<section xml:id="_capturing_xmpp_network_data_for_debugging_purposes"><title>Capturing XMPP Network Data for Debugging Purposes</title><simpara>If you are experiencing bugs regarding OSAD, it can be useful to dump network messages in order to help with debugging.
The following procedures provide information on capturing data from both the client and server side.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Server Side Capture</title>
<listitem>
<para>Install the <package>tcpdump</package> package on the SUSE Manager Server as root: <command>zypper in tcpdump </command></para>
</listitem>
<listitem>
<para>Stop the OSA dispatcher and Jabber processes with <command>rcosa-dispatcher stop</command> and <command>rcjabberd stop.</command></para>
</listitem>
<listitem>
<para>Start data capture on port 5222: <command>tcpdump -s 0 port 5222 -w server_dump.pcap</command></para>
</listitem>
<listitem>
<para>Start the OSA dispatcher and Jabber processes: <command>rcosa-dispatcher start</command> and <command>rcjabberd start</command>.</para>
</listitem>
<listitem>
<para>Open a second terminal and execute the following commands: <command>rcosa-dispatcher start</command> and <command>rcjabberd start</command>.</para>
</listitem>
<listitem>
<para>Operate the SUSE Manager server and clients so the bug you formerly experienced is reproduced.</para>
</listitem>
<listitem>
<para>Once you have finished your capture re-open terminal 1 and stop the capture of data with: <keycombo><keycap>CTRL</keycap><keycap>c</keycap></keycombo></para>
</listitem>
</orderedlist>
<orderedlist numeration="arabic">
<title>Procedure: Client Side Capture</title>
<listitem>
<para>Install the tcpdump package on your client as root: <command>zypper in tcpdump</command></para>
</listitem>
<listitem>
<para>Stop the OSA process: <command>rcosad stop</command>.</para>
</listitem>
<listitem>
<para>Begin data capture on port 5222: <command>tcpdump -s 0 port 5222 -w client_client_dump.pcap</command></para>
</listitem>
<listitem>
<para>Open a second terminal and start the OSA process: <command>rcosad start</command></para>
</listitem>
<listitem>
<para>Operate the SUSE Manager server and clients so the bug you formerly experienced is reproduced.</para>
</listitem>
<listitem>
<para>Once you have finished your capture re-open terminal 1 and stop the capture of data with: <keycombo><keycap>CTRL</keycap><keycap>c</keycap></keycombo></para>
</listitem>
</orderedlist>
</section>
<section xml:id="_engineering_notes_analyzing_captured_data"><title>Engineering Notes</title><subtitle>Analyzing Captured Data</subtitle><simpara>This section provides information on analyzing the previously captured data from client and server.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Obtain the certificate file from your SUSE Manager server: /etc/pki/spacewalk/jabberd/server.pem</para>
</listitem>
<listitem>
<para>Edit the certificate file removing all lines before <literal>----BEGIN RSA PRIVATE KEY-----</literal>, save it as key.pem</para>
</listitem>
<listitem>
<para>Install Wireshark as root with: <command>zypper in wireshark</command></para>
</listitem>
<listitem>
<para>Open the captured file in wireshark.</para>
</listitem>
<listitem>
<para>From <guimenu>Eidt</guimenu><guimenu>Preferences</guimenu> select SSL from the left pane.</para>
</listitem>
<listitem>
<para>Select RSA keys list: <guimenu>Edit</guimenu><guimenu>New</guimenu></para>
<itemizedlist>
<listitem>
<para>IP Address any</para>
</listitem>
<listitem>
<para>Port: 5222</para>
</listitem>
<listitem>
<para>Protocol: xmpp</para>
</listitem>
<listitem>
<para>Key File: open the key.pem file previously edited.</para>
</listitem>
<listitem>
<para>Password: leave blank</para>
</listitem>
</itemizedlist>
<simpara>For more information see also:</simpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://wiki.wireshark.org/SSL">https://wiki.wireshark.org/SSL</link></para>
</listitem>
<listitem>
<para><link xl:href="https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=3444">https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=3444</link></para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</section>
</section>
<section xml:id="_bp.troubleshooting.timeouts"><title>RPC Connection Timeout Settings</title><simpara><indexterm>
<primary>connection timeout</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>timeout settings</primary><secondary>RPC connection</secondary>
</indexterm>
<indexterm>
<primary>RPC connection</primary>
</indexterm></simpara>
<simpara>RPC connection timeouts are configurable on the &susemgr;
server, &susemgrproxy;
server, and the clients.
For example, if package downloads take longer then expected, you can increase timeout values. <command>spacewalk-proxy restart</command> should be run after the setting is added or modified.</simpara>
<simpara>Set the following variables to a value in seconds specifying how long an RPC connection may take at maximum:</simpara>
<variablelist>
<varlistentry>
<term>Server &mdash;<filename>/etc/rhn/rhn.conf</filename> </term>
<listitem>
<screen>server.timeout =`number`</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Proxy Server &mdash;<filename>/etc/rhn/rhn.conf</filename> </term>
<listitem>
<screen>proxy.timeout =`number`</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>&sls; Clients (using <package>zypp-plugin-spacewalk</package> ) &mdash;<filename>/etc/zypp/zypp.conf</filename> </term>
<listitem>
<screen>## Valid values:  [0,3600]
## Default value: 180
download.transfer_timeout = 180</screen>
<simpara>This is the maximum time in seconds that a transfer operation is allowed to take.
This is useful for preventing batch jobs from hanging for hours due to slow networks or links going down.
If limiting operations to less than a few minutes, you risk aborting perfectly normal operations.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>&rhel; Clients (using <package>yum-rhn-plugin</package> ) &mdash;<filename>/etc/yum.conf</filename> </term>
<listitem>
<screen>timeout =`number`</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
</chapter>
<chapter xml:id="_mgr.additional.resources"><title>Additional Resources</title><simpara>This chapter contains links to helpful resources.</simpara>
<section xml:id="_learning_yaml_syntax_for_salt_states"><title>Learning YAML Syntax for Salt States</title><simpara>Learn how to write states and pillars with YAML.</simpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://docs.saltstack.com/en/latest/topics/yaml/index.html">https://docs.saltstack.com/en/latest/topics/yaml/index.html</link></para>
</listitem>
<listitem>
<para><link xl:href="http://yaml-online-parser.appspot.com/">http://yaml-online-parser.appspot.com/</link></para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_getting_started_with_jinja_templates"><title>Getting Started with Jinja Templates</title><simpara>Learn how to begin writing templates in Jinja</simpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://docs.saltstack.com/en/latest/topics/jinja/index.html">https://docs.saltstack.com/en/latest/topics/jinja/index.html</link></para>
</listitem>
<listitem>
<para><link xl:href="http://jinja.pocoo.org/docs/dev/">http://jinja.pocoo.org/docs/dev/</link></para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_salt_best_practices"><title>Salt Best Practices</title><simpara>Best practices from the Salt team.</simpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://docs.saltstack.com/en/latest/topics/best_practices.html">https://docs.saltstack.com/en/latest/topics/best_practices.html</link></para>
</listitem>
</itemizedlist>
</section>
</chapter>
<chapter xml:id="_mgr.product.comparison"><title>A &susemgr; 2.1 and &productnumber; Product Comparison</title><simpara>You may already have experience managing your systems using &susemgr;
2.1.
The good news is all the features you are used to working with, (regarding the traditional stack) have not changed.
The only real exception is that the original built-in monitoring feature has been removed.
Icinga, a third party monitoring solution is included within the SUSE Manager Tools Channel for SLES 12. &susemgr;
 &productnumber;
supports managing systems via the popular IT orchestration engine Salt, in addition to the previously existing traditional management stack.</simpara>
<important>
<title>Selecting a Management Method</title>
<simpara>You cannot and should not mix a single system with both methods although you can have Salt managed systems and traditionally managed systems coexisting and managed by a &susemgr;
server.
You may for example have a development department and assign all machines in this department as Salt minions, likewise you could also have a production department and assign machines as traditional bootstrap clients.
Remember a single machine is either traditionally managed or Salt but never both.</simpara>
</important>
<simpara>Keep in mind that minions are not traditional clients and their feature set is currently limited.
Future maintenance updates will provide feature parity over time and your feedback for prioritization of these features is welcome! The following tables provide a comparison between each feature set.
This includes features in development and features available only to their parent management stack.</simpara>
<table frame="all" rowsep="1" colsep="1">
<title>Comparing Traditional Management and Salt Management</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33.3333*"/>
<colspec colname="col_2" colwidth="33.3333*"/>
<colspec colname="col_3" colwidth="33.3334*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Feature/Function</simpara></entry>
<entry align="left" valign="top"><simpara>Traditional Management</simpara></entry>
<entry align="left" valign="top"><simpara>Salt Management</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>Registration</simpara></entry>
<entry align="left" valign="top"><simpara>bootstrap/rhnreg_ks</simpara></entry>
<entry align="left" valign="top"><simpara>bootstrap scripts and &webui;</simpara><simpara>Accept Minion Keys</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Install Packages</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Install Patches</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Remote Commands</simpara></entry>
<entry align="left" valign="top"><simpara>Supported <emphasis>Scheduled</emphasis></simpara></entry>
<entry align="left" valign="top"><simpara>Supported <emphasis>Real-time</emphasis></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>System Package States</simpara></entry>
<entry align="left" valign="top"><simpara>Unsupported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>System Custom States</simpara></entry>
<entry align="left" valign="top"><simpara>Unsupported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Group Custom States</simpara></entry>
<entry align="left" valign="top"><simpara>Unsupported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Organization Custom States</simpara></entry>
<entry align="left" valign="top"><simpara>Unsupported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>System Set Manager</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Service Pack Migration</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Virtualization Host Management: <emphasis>Auto-installation/bare metal
       installation support</emphasis></simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported (read-only)</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>System Redeployment: <emphasis>With Auto-installation</emphasis></simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Coming Soon</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Contact Methods: <emphasis>How the server communicates with a
       client</emphasis></simpara></entry>
<entry align="left" valign="top"><simpara>osad, rhnsd, ssh push</simpara></entry>
<entry align="left" valign="top"><simpara>zeromq: Salt default</simpara><simpara>salt-ssh</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Red Hat Network Clients <emphasis>RHEL 6, 7</emphasis></simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>SUSE Manager Proxy</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Action Chains</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Software Crash Reporting</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Unsupported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Staging</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Duplicate Package Reporting <emphasis>Example: Multiple Versions of the
       Linux Kernel</emphasis></simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>SCAP Auditing</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Support for Multiple Organizations</simpara></entry>
<entry align="left" valign="top"><simpara>Supported with Isolation Enforcement **</simpara></entry>
<entry align="left" valign="top"><simpara>Supported without Isolation Enforcement **</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Package Verification</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Under Review</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>System Locking</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Under Review</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Configuration File Management</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported (Tech Preview)</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Snapshots and Profiles</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Under Review</simpara><simpara>Profiles are already supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Power Management</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Coming Soon</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
<warning>
<title>Isolation Enforcement **</title>
<simpara>In &susemgr;
 2.1 is multi-tenant and organizations are completely isolated from one another.
This isolation includes both privacy and security.
For example: User A in Org_1 cannot see user B in Org_2.
(This relates to any data specific to an organization including: servers, channels, activation keys, configuration channels, files and so on.)</simpara>
<simpara>In &susemgr;
 &productnumber;
Salt currently does not support any level of multi-tenancy and therefore information specific to an organization is accessible across organizations.
For example:</simpara>
<screen>salt '*' cmd.run "some_dangerous_command"</screen>
<simpara>The above command will target all organization, groups and single systems including their files, channels, activation keys etc.
This should be kept in mind when working with Salt.</simpara>
</warning>
<simpara>The following table provides an overview of differences in functionality between &susemgr;
2.1 and &productnumber;
.</simpara>
<table frame="all" rowsep="1" colsep="1">
<title>Comparing &susemgr;2.1 and &productnumber;Functionality</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33.3333*"/>
<colspec colname="col_2" colwidth="33.3333*"/>
<colspec colname="col_3" colwidth="33.3334*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Functionality</simpara></entry>
<entry align="left" valign="top"><simpara>SUSE Manager 2.1</simpara></entry>
<entry align="left" valign="top"><simpara>SUSE Manager 3.2</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>Configuration Management</simpara></entry>
<entry align="left" valign="top"><simpara>Based on Static Configuration</simpara></entry>
<entry align="left" valign="top"><simpara>Redesigned with Salt Integration</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Configuration Management</simpara></entry>
<entry align="left" valign="top"><simpara>No Concept of States</simpara></entry>
<entry align="left" valign="top"><simpara>States are Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Subscription Management</simpara></entry>
<entry align="left" valign="top"><simpara>Limited Functionality</simpara></entry>
<entry align="left" valign="top"><simpara>New Design, Full Featured</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Monitoring</simpara></entry>
<entry align="left" valign="top"><simpara>Traditional Monitoring Supported until End of Life</simpara></entry>
<entry align="left" valign="top"><simpara>Nagios Compatible, Icinga Monitoring Server is Included</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Installation Approach</simpara></entry>
<entry align="left" valign="top"><simpara>Appliance Based</simpara></entry>
<entry align="left" valign="top"><simpara>Installed as an Add-on</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Compatibility</simpara></entry>
<entry align="left" valign="top"><simpara>Compatibility Carried Forward to &susemgr;
3</simpara></entry>
<entry align="left" valign="top"><simpara>Maintains full &susemgr;
2.1 Functionality _ Traditional
       Monitoring Removed_</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
</chapter>
<appendix xml:id="_gnu_licenses"><title>GNU Licenses</title><simpara>This appendix contains the GNU Free Documentation License version 1.2.</simpara>
</appendix>
<chapter xml:id="_gnu_free_documentation_license"><title>GNU Free Documentation License</title><simpara>Copyright &#169; 2000, 2001, 2002 Free Software Foundation, Inc.
51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.</simpara>
<bridgehead xml:id="_0_preamble" renderas="sect2">0. PREAMBLE</bridgehead>
<simpara>The purpose of this License is to make a manual, textbook, or other functional and useful document "free" in the sense of freedom: to assure everyone the effective freedom to copy and redistribute it, with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way to get credit for their work, while not being considered responsible for modifications made by others.</simpara>
<simpara>This License is a kind of "copyleft", which means that derivative works of the document must themselves be free in the same sense.
It complements the GNU General Public License, which is a copyleft license designed for free software.</simpara>
<simpara>We have designed this License in order to use it for manuals for free software, because free software needs free documentation: a free program should come with manuals providing the same freedoms that the software does.
But this License is not limited to software manuals; it can be used for any textual work, regardless of subject matter or whether it is published as a printed book.
We recommend this License principally for works whose purpose is instruction or reference.</simpara>
<bridgehead xml:id="_1_applicability_and_definitions" renderas="sect2">1. APPLICABILITY AND DEFINITIONS</bridgehead>
<simpara>This License applies to any manual or other work, in any medium, that contains a notice placed by the copyright holder saying it can be distributed under the terms of this License.
Such a notice grants a world-wide, royalty-free license, unlimited in duration, to use that work under the conditions stated herein.
The "Document", below, refers to any such manual or work.
Any member of the public is a licensee, and is addressed as "you". You accept the license if you copy, modify or distribute the work in a way requiring permission under copyright law.</simpara>
<simpara>A "Modified Version" of the Document means any work containing the Document or a portion of it, either copied verbatim, or with modifications and/or translated into another language.</simpara>
<simpara>A "Secondary Section" is a named appendix or a front-matter section of the Document that deals exclusively with the relationship of the publishers or authors of the Document to the Document&#8217;s overall subject (or to related matters) and contains nothing that could fall directly within that overall subject.
(Thus, if the Document is in part a textbook of mathematics, a Secondary Section may not explain any mathematics.) The relationship could be a matter of historical connection with the subject or with related matters, or of legal, commercial, philosophical, ethical or political position regarding them.</simpara>
<simpara>The "Invariant Sections" are certain Secondary Sections whose titles are designated, as being those of Invariant Sections, in the notice that says that the Document is released under this License.
If a section does not fit the above definition of Secondary then it is not allowed to be designated as Invariant.
The Document may contain zero Invariant Sections.
If the Document does not identify any Invariant Sections then there are none.</simpara>
<simpara>The "Cover Texts" are certain short passages of text that are listed, as Front-Cover Texts or Back-Cover Texts, in the notice that says that the Document is released under this License.
A Front-Cover Text may be at most 5 words, and a Back-Cover Text may be at most 25 words.</simpara>
<simpara>A "Transparent" copy of the Document means a machine-readable copy, represented in a format whose specification is available to the general public, that is suitable for revising the document straightforwardly with generic text editors or (for images composed of pixels) generic paint programs or (for drawings) some widely available drawing editor, and that is suitable for input to text formatters or for automatic translation to a variety of formats suitable for input to text formatters.
A copy made in an otherwise Transparent file format whose markup, or absence of markup, has been arranged to thwart or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount of text.
A copy that is not "Transparent" is called "Opaque".</simpara>
<simpara>Examples of suitable formats for Transparent copies include plain ASCII without markup, Texinfo input format, LaTeX input format, SGML or XML using a publicly available DTD, and standard-conforming simple HTML, PostScript or PDF designed for human modification.
Examples of transparent image formats include PNG, XCF and JPG.
Opaque formats include proprietary formats that can be read and edited only by proprietary word processors, SGML or XML for which the DTD and/or processing tools are not generally available, and the machine-generated HTML, PostScript or PDF produced by some word processors for output purposes only.</simpara>
<simpara>The "Title Page" means, for a printed book, the title page itself, plus such following pages as are needed to hold, legibly, the material this License requires to appear in the title page.
For works in formats which do not have any title page as such, "Title Page" means the text near the most prominent appearance of the work&#8217;s title, preceding the beginning of the body of the text.</simpara>
<simpara>A section "Entitled XYZ" means a named subunit of the Document whose title either is precisely XYZ or contains XYZ in parentheses following text that translates XYZ in another language.
(Here XYZ stands for a specific section name mentioned below, such as "Acknowledgements", "Dedications", "Endorsements", or "History".) To "Preserve the Title" of such a section when you modify the Document means that it remains a section "Entitled XYZ" according to this definition.</simpara>
<simpara>The Document may include Warranty Disclaimers next to the notice which states that this License applies to the Document.
These Warranty Disclaimers are considered to be included by reference in this License, but only as regards disclaiming warranties: any other implication that these Warranty Disclaimers may have is void and has no effect on the meaning of this License.</simpara>
<bridgehead xml:id="_2_verbatim_copying" renderas="sect2">2. VERBATIM COPYING</bridgehead>
<simpara>You may copy and distribute the Document in any medium, either commercially or noncommercially, provided that this License, the copyright notices, and the license notice saying this License applies to the Document are reproduced in all copies, and that you add no other conditions whatsoever to those of this License.
You may not use technical measures to obstruct or control the reading or further copying of the copies you make or distribute.
However, you may accept compensation in exchange for copies.
If you distribute a large enough number of copies you must also follow the conditions in section 3.</simpara>
<simpara>You may also lend copies, under the same conditions stated above, and you may publicly display copies.</simpara>
<bridgehead xml:id="_3_copying_in_quantity" renderas="sect2">3. COPYING IN QUANTITY</bridgehead>
<simpara>If you publish printed copies (or copies in media that commonly have printed covers) of the Document, numbering more than 100, and the Document&#8217;s license notice requires Cover Texts, you must enclose the copies in covers that carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on the back cover.
Both covers must also clearly and legibly identify you as the publisher of these copies.
The front cover must present the full title with all words of the title equally prominent and visible.
You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve the title of the Document and satisfy these conditions, can be treated as verbatim copying in other respects.</simpara>
<simpara>If the required texts for either cover are too voluminous to fit legibly, you should put the first ones listed (as many as fit reasonably) on the actual cover, and continue the rest onto adjacent pages.</simpara>
<simpara>If you publish or distribute Opaque copies of the Document numbering more than 100, you must either include a machine-readable Transparent copy along with each Opaque copy, or state in or with each Opaque copy a computer-network location from which the general network-using public has access to download using public-standard network protocols a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps, when you begin distribution of Opaque copies in quantity, to ensure that this Transparent copy will remain thus accessible at the stated location until at least one year after the last time you distribute an Opaque copy (directly or through your agents or retailers) of that edition to the public.</simpara>
<simpara>It is requested, but not required, that you contact the authors of the Document well before redistributing any large number of copies, to give them a chance to provide you with an updated version of the Document.</simpara>
<bridgehead xml:id="_4_modifications" renderas="sect2">4. MODIFICATIONS</bridgehead>
<simpara>You may copy and distribute a Modified Version of the Document under the conditions of sections 2 and 3 above, provided that you release the Modified Version under precisely this License, with the Modified Version filling the role of the Document, thus licensing distribution and modification of the Modified Version to whoever possesses a copy of it.
In addition, you must do these things in the Modified Version:</simpara>
<orderedlist numeration="upperalpha">
<listitem>
<para>Use in the Title Page (and on the covers, if any) a title distinct from that of the Document, and from those of previous versions (which should, if there were any, be listed in the History section of the Document). You may use the same title as a previous version if the original publisher of that version gives permission.</para>
</listitem>
<listitem>
<para>List on the Title Page, as authors, one or more persons or entities responsible for authorship of the modifications in the Modified Version, together with at least five of the principal authors of the Document (all of its principal authors, if it has fewer than five), unless they release you from this requirement.</para>
</listitem>
<listitem>
<para>State on the Title page the name of the publisher of the Modified Version, as the publisher.</para>
</listitem>
<listitem>
<para>Preserve all the copyright notices of the Document.</para>
</listitem>
<listitem>
<para>Add an appropriate copyright notice for your modifications adjacent to the other copyright notices.</para>
</listitem>
<listitem>
<para>Include, immediately after the copyright notices, a license notice giving the public permission to use the Modified Version under the terms of this License, in the form shown in the Addendum below.</para>
</listitem>
<listitem>
<para>Preserve in that license notice the full lists of Invariant Sections and required Cover Texts given in the Document&#8217;s license notice.</para>
</listitem>
<listitem>
<para>Include an unaltered copy of this License.</para>
</listitem>
<listitem>
<para>Preserve the section Entitled "History", Preserve its Title, and add to it an item stating at least the title, year, new authors, and publisher of the Modified Version as given on the Title Page. If there is no section Entitled "History" in the Document, create one stating the title, year, authors, and publisher of the Document as given on its Title Page, then add an item describing the Modified Version as stated in the previous sentence.</para>
</listitem>
<listitem>
<para>Preserve the network location, if any, given in the Document for public access to a Transparent copy of the Document, and likewise the network locations given in the Document for previous versions it was based on. These may be placed in the "History" section. You may omit a network location for a work that was published at least four years before the Document itself, or if the original publisher of the version it refers to gives permission.</para>
</listitem>
<listitem>
<para>For any section Entitled "Acknowledgements" or "Dedications", Preserve the Title of the section, and preserve in the section all the substance and tone of each of the contributor acknowledgements and/or dedications given therein.</para>
</listitem>
<listitem>
<para>Preserve all the Invariant Sections of the Document, unaltered in their text and in their titles. Section numbers or the equivalent are not considered part of the section titles.</para>
</listitem>
<listitem>
<para>Delete any section Entitled "Endorsements". Such a section may not be included in the Modified Version.</para>
</listitem>
<listitem>
<para>Do not retitle any existing section to be Entitled "Endorsements" or to conflict in title with any Invariant Section.</para>
</listitem>
<listitem>
<para>Preserve any Warranty Disclaimers.</para>
</listitem>
</orderedlist>
<simpara>If the Modified Version includes new front-matter sections or appendices that qualify as Secondary Sections and contain no material copied from the Document, you may at your option designate some or all of these sections as invariant.
To do this, add their titles to the list of Invariant Sections in the Modified Version&#8217;s license notice.
These titles must be distinct from any other section titles.</simpara>
<simpara>You may add a section Entitled "Endorsements", provided it contains nothing but endorsements of your Modified Version by various parties&#8212;&#8203;for example, statements of peer review or that the text has been approved by an organization as the authoritative definition of a standard.</simpara>
<simpara>You may add a passage of up to five words as a Front-Cover Text, and a passage of up to 25 words as a Back-Cover Text, to the end of the list of Cover Texts in the Modified Version.
Only one passage of Front-Cover Text and one of Back-Cover Text may be added by (or through arrangements made by) any one entity.
If the Document already includes a cover text for the same cover, previously added by you or by arrangement made by the same entity you are acting on behalf of, you may not add another; but you may replace the old one, on explicit permission from the previous publisher that added the old one.</simpara>
<simpara>The author(s) and publisher(s) of the Document do not by this License give permission to use their names for publicity for or to assert or imply endorsement of any Modified Version.</simpara>
<bridgehead xml:id="_5_combining_documents" renderas="sect2">5. COMBINING DOCUMENTS</bridgehead>
<simpara>You may combine the Document with other documents released under this License, under the terms defined in section 4 above for modified versions, provided that you include in the combination all of the Invariant Sections of all of the original documents, unmodified, and list them all as Invariant Sections of your combined work in its license notice, and that you preserve all their Warranty Disclaimers.</simpara>
<simpara>The combined work need only contain one copy of this License, and multiple identical Invariant Sections may be replaced with a single copy.
If there are multiple Invariant Sections with the same name but different contents, make the title of each such section unique by adding at the end of it, in parentheses, the name of the original author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of Invariant Sections in the license notice of the combined work.</simpara>
<simpara>In the combination, you must combine any sections Entitled "History" in the various original documents, forming one section Entitled "History"; likewise combine any sections Entitled "Acknowledgements", and any sections Entitled "Dedications". You must delete all sections Entitled "Endorsements".</simpara>
<bridgehead xml:id="_6_collections_of_documents" renderas="sect2">6. COLLECTIONS OF DOCUMENTS</bridgehead>
<simpara>You may make a collection consisting of the Document and other documents released under this License, and replace the individual copies of this License in the various documents with a single copy that is included in the collection, provided that you follow the rules of this License for verbatim copying of each of the documents in all other respects.</simpara>
<simpara>You may extract a single document from such a collection, and distribute it individually under this License, provided you insert a copy of this License into the extracted document, and follow this License in all other respects regarding verbatim copying of that document.</simpara>
<bridgehead xml:id="_7_aggregation_with_independent_works" renderas="sect2">7. AGGREGATION WITH INDEPENDENT WORKS</bridgehead>
<simpara>A compilation of the Document or its derivatives with other separate and independent documents or works, in or on a volume of a storage or distribution medium, is called an "aggregate" if the copyright resulting from the compilation is not used to limit the legal rights of the compilation&#8217;s users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not apply to the other works in the aggregate which are not themselves derivative works of the Document.</simpara>
<simpara>If the Cover Text requirement of section 3 is applicable to these copies of the Document, then if the Document is less than one half of the entire aggregate, the Document&#8217;s Cover Texts may be placed on covers that bracket the Document within the aggregate, or the electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole aggregate.</simpara>
<bridgehead xml:id="_8_translation" renderas="sect2">8. TRANSLATION</bridgehead>
<simpara>Translation is considered a kind of modification, so you may distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special permission from their copyright holders, but you may include translations of some or all Invariant Sections in addition to the original versions of these Invariant Sections.
You may include a translation of this License, and all the license notices in the Document, and any Warranty Disclaimers, provided that you also include the original English version of this License and the original versions of those notices and disclaimers.
In case of a disagreement between the translation and the original version of this License or a notice or disclaimer, the original version will prevail.</simpara>
<simpara>If a section in the Document is Entitled "Acknowledgements", "Dedications", or "History", the requirement (section 4) to Preserve its Title (section 1) will typically require changing the actual title.</simpara>
<bridgehead xml:id="_9_termination" renderas="sect2">9. TERMINATION</bridgehead>
<simpara>You may not copy, modify, sublicense, or distribute the Document except as expressly provided for under this License.
Any other attempt to copy, modify, sublicense or distribute the Document is void, and will automatically terminate your rights under this License.
However, parties who have received copies, or rights, from you under this License will not have their licenses terminated so long as such parties remain in full compliance.</simpara>
<bridgehead xml:id="_10_future_revisions_of_this_license" renderas="sect2">10. FUTURE REVISIONS OF THIS LICENSE</bridgehead>
<simpara>The Free Software Foundation may publish new, revised versions of the GNU Free Documentation License from time to time.
Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns.
See <link xl:href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</link>.</simpara>
<simpara>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this License "or any later version" applies to it, you have the option of following the terms and conditions either of that specified version or of any later version that has been published (not as a draft) by the Free Software Foundation.
If the Document does not specify a version number of this License, you may choose any version ever published (not as a draft) by the Free Software Foundation.</simpara>
<bridgehead xml:id="_addendum_how_to_use_this_license_for_your_documents" renderas="sect2">ADDENDUM: How to use this License for your documents</bridgehead>
<screen>Copyright (c) YEAR YOUR NAME.
   Permission is granted to copy, distribute and/or modify this document
   under the terms of the GNU Free Documentation License, Version 1.2
   or any later version published by the Free Software Foundation;
   with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
   A copy of the license is included in the section entitled&ldquo;GNU
   Free Documentation License&rdquo;.</screen>
<simpara>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts, replace the &#8220;
with&#8230;&#8203;Texts.&#8221;
line with this:</simpara>
<screen>with the Invariant Sections being LIST THEIR TITLES, with the
   Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</screen>
<simpara>If you have Invariant Sections without Cover Texts, or some other combination of the three, merge those two alternatives to suit the situation.</simpara>
<simpara>If your document contains nontrivial examples of program code, we recommend releasing these examples in parallel under your choice of free software license, such as the GNU General Public License, to permit their use in free software.</simpara>
</chapter>
</part>
<part xml:id="_book.suma.reference.manual"><title>Reference Manual</title><preface xml:id="_preface.susemanager.user"><title>About This Guide</title><simpara>&susemgrreg;
enables you to efficiently manage a set of Linux systems and keep them up-to-date.
It provides automated and cost-effective software management, asset management, system provisioning, and monitoring capabilities. &susemgr;
is compatible with &rh;
Satellite Server and offers seamless management of both &sle;
and &rhel;
client systems.</simpara>
<note>
<title>&susemgr;Version Information</title>
<simpara>In this manual if not other specified, &susemgr;
version &productnumber;
is assumed and this version is required if a feature is discussed. &susemgr;
 &productnumber;
and &susemgr;
 &productnumber;
Proxy were originally released as a SLES 12 SP3 extension.
Whenever features of the &susemgr;{productnumber}
host operating system are documented and not other specified version 12 SP3 is assumed.</simpara>
</note>
<simpara>This manual explains the features of the Web interface and is intended for &susemgr;
administrators and administrators with restricted roles for specific tasks.
On certain topics we also provide background information, while some chapters contain links to additional documentation resources.
The latter include additional documentation available on the installed system as well as documentation on the Internet.</simpara>
<simpara>For an overview of the documentation available for your product and the latest documentation updates, refer to <link xl:href="http://www.suse.com/documentation/suse-manager-3/">http://www.suse.com/documentation/suse-manager-3/</link> or to the following section.</simpara>
<simpara>HTML versions of the manuals are also available from the <guimenu>Help</guimenu>
 tab of the &susemgr;
 Web interface.</simpara>
<note>
<title>Obtaining the Release Notes</title>
<simpara>Although this manual reflects the most current information possible, read the <emphasis><phrase role="ref">SUSE Manager Release Notes</phrase></emphasis>
 for information that may not have been available prior to the finalization of the documentation.
The release notes can be found at <link xl:href="http://www.suse.com/documentation/suse-manager-3/">http://www.suse.com/documentation/suse-manager-3/</link>.</simpara>
</note>
</preface>
<chapter xml:id="_available_documentation"><title>Available Documentation</title><simpara><indexterm>
<primary>help</primary><secondary>Novell/SUSE manuals</secondary>
</indexterm>
<indexterm>
<primary>Novell/SUSE manuals</primary>
</indexterm></simpara>
<simpara>The following manuals are available on this product:</simpara>
<variablelist>
<varlistentry>
<term><xref linkend="_book.suma.getting_started"/></term>
<listitem>
<simpara>Lists installation scenarios and example topologies for different &susemgr;
setups.
Guides you step by step through the installation, setup and basic configuration of &susemgr;
.
Also contains detailed information about &susemgr;
maintenance and troubleshooting.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><xref linkend="_book.suma.reference.manual"/></term>
<listitem>
<simpara>Reference documentation that covers the Web interface to &susemgr;
(&webui;
).</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><xref linkend="_book.suma.best.practices"/></term>
<listitem>
<simpara>Best practices on selected topics.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><xref linkend="_book.suma.advanced.topics"/></term>
<listitem>
<simpara>A collection of advanced topics not covered under the Best Practices Guide.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>HTML versions of the product manuals can be found in the installed system under <filename>/usr/share/doc/manual</filename>
.
Find the latest documentation updates at <link xl:href="http://www.suse.com/documentation/suse-manager/">http://www.suse.com/documentation/suse-manager/</link> where you can download PDF or HTML versions of the manuals for your product.</simpara>
</chapter>
<chapter xml:id="_feedback"><title>Feedback</title><simpara>Several feedback channels are available:</simpara>
<variablelist>
<varlistentry>
<term>Bugs and Enhancement Requests</term>
<listitem>
<simpara>For services and support options available for your product, refer to <link xl:href="http://www.suse.com/support/">http://www.suse.com/support/</link>.</simpara>
<simpara>To report bugs for a product component, go to <link xl:href="https://scc.suse.com/support/requests">https://scc.suse.com/support/requests</link>, log in, and click <guimenu>Create New</guimenu>
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>User Comments</term>
<listitem>
<simpara>We want to hear your comments about and suggestions for this manual and the other documentation included with this product.
Use the User Comments feature at the bottom of each page in the online documentation or go to <link xl:href="http://www.suse.com/doc/feedback.html">http://www.suse.com/doc/feedback.html</link> and enter your comments there.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Mail</term>
<listitem>
<simpara>For feedback on the documentation of this product, you can also send a mail to</simpara>
<simpara><email>doc-team@suse.de</email>
.
Make sure to include the document title, the product version and the publication date of the documentation.
To report errors or suggest enhancements, provide a concise description of the problem and refer to the respective section number and page (or URL).</simpara>
</listitem>
</varlistentry>
</variablelist>
</chapter>
<chapter xml:id="_documentation_conventions"><title>Documentation Conventions</title><simpara>The following typographical conventions are used in this manual:</simpara>
<itemizedlist>
<listitem>
<para><filename>/etc/passwd</filename> : directory names and file names</para>
</listitem>
<listitem>
<para><replaceable>placeholder</replaceable>: replace <replaceable>placeholder</replaceable> with the actual value</para>
</listitem>
<listitem>
<para><varname>PATH</varname>: the environment variable PATH</para>
</listitem>
<listitem>
<para><command>ls</command>, <option>--help</option>: commands, options, and parameters</para>
</listitem>
<listitem>
<para><literal role="username">user</literal> : users or groups</para>
</listitem>
<listitem>
<para><package>packagename</package> : name of a package</para>
</listitem>
<listitem>
<para><keycap>Alt</keycap> , <keycap>+F1</keycap> : a key to press or a key combination; keys are shown in uppercase as on a keyboard</para>
</listitem>
<listitem>
<para><guimenu>File</guimenu> , <menuchoice><guimenu>File</guimenu> <guimenuitem>Save As</guimenuitem></menuchoice> : menu items, buttons</para>
</listitem>
<listitem>
<para>This paragraph is only relevant for the x86_64 architecture. The arrows mark the beginning and the end of the text block.</para>
<simpara>This paragraph is only relevant for the architectures <literal>&zseries;</literal> and <literal>POWER</literal>.
The arrows mark the beginning and the end of the text block.</simpara>
</listitem>
<listitem>
<para><emphasis>Dancing Penguins</emphasis> (Chapter <emphasis>Penguins</emphasis>, &uarr; Another Manual): This is a reference to a chapter in another manual.</para>
</listitem>
</itemizedlist>
</chapter>
<chapter xml:id="_special_susemgr_documentation_conventions"><title>Special &susemgr; Documentation Conventions</title><simpara>Additionally, the following typographical conventions are used in this manual:</simpara>
<itemizedlist>
<listitem>
<para>[<replaceable>system_type</replaceable>]: This tag is used in chapter or section titles and indicates that this feature is only available for registered client of that system type. For example, these system types could appear in this context: [Management] (= clients registered via the traditional bootstrap method), [Salt] (= Salt minions), [Proxy], etc.</para>
</listitem>
</itemizedlist>
</chapter>
<chapter xml:id="_ref.webui"><title>Web Interface &mdash; Navigation and Home</title><info><abstract>
<simpara>This is a chapter about the layout of the Web Interface to &susemgr;
, basic usage information, and the <guimenu>Home</guimenu>
 menu.</simpara>
</abstract></info>
</chapter>
<chapter xml:id="_ref.webui.intro"><title>Navigation</title><simpara><indexterm>
<primary>navigation</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>Web UI</primary><secondary>navigation bar</secondary>
</indexterm>
<indexterm>
<primary>navigation bar</primary>
</indexterm></simpara>
<simpara>The top bar provides access to commonly used tools and user settings.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/topnav.png" width="80%"/>
</imageobject>
<textobject><phrase>topnav</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>The right part of the top bar contains functionalities such as a bell icon with a counter bubble of unread notification messages, optionally, an eye icon with a context legend to the current page, quick search, links to background information, user preferences, and sign off.
On the left is the so-called breadcrumb.
The breadcrumb tells you how far you are from the root of the menu and it brings you back to any previous step.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home-overview-legend.png" width="80%"/>
</imageobject>
<textobject><phrase>home overview legend</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>The left navigation bar is the menu to the &susemgr;{webui} from where you load the &webui; pages.
If you click a the label of a menu entry you either open that page, or, if it is just a container of sub-entries, it expands this part of the menu tree without actually loading a page.
To collaps all open parts of the menu system, click the <guimenu>Clear Menus</guimenu> button at the top of menu.
If you click the small circle icon on the right of a menu label, the first available page of that menu entry will get loaded and displayed automatically.
Enter a search string in the <guimenu>Search page</guimenu> field to find an entry of the menu tree.
Available menu entries depend on the roles of the user.</simpara>
<simpara>Only &susemgr; Administrators see the following nav items:</simpara>
<itemizedlist>
<listitem>
<para><menuchoice><guimenu>Navbar</guimenu> <guimenuitem>Images</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Navbar</guimenu> <guimenuitem>Users</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Navbar</guimenu> <guimenuitem>Admin</guimenuitem></menuchoice></para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/sidenav.png" width="40%"/>
</imageobject>
<textobject><phrase>sidenav</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Some pages have tabs and subtabs.
These tabs offer an additional layer of granularity in performing tasks for systems or users.
The following example displays the tabs and subtabs available under <menuchoice><guimenu>Systems</guimenu> <guimenuitem>System Details</guimenuitem></menuchoice>
.
Green bars underline active subtabs.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/subtabs.png" width="60%"/>
</imageobject>
<textobject><phrase>subtabs</phrase></textobject>
</mediaobject>
</informalfigure>
<important>
<title>Views Depending on User Roles</title>
<simpara>This guide covers the administrator user role level, some tabs, pages, and even whole categories described here may not be visible to you. Text markers are not used to identify which functions are available to each user role level.</simpara>
</important>
<section xml:id="_ref.webui.intro.categories_pages"><title>Categories and Pages</title><simpara><indexterm>
<primary>overview Web interface</primary>
</indexterm></simpara>
<simpara>This section summarizes all of the categories and primary pages (those linked from the left navigation bar) within the &susemgr;
Web interface (&webui;
). It does not list the many subpages, tabs and subtabs accessible from the individual pages.
Each area of the Web interface is explained in detail later in this guide.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/sidenav.png" width="40%"/>
</imageobject>
<textobject><phrase>sidenav</phrase></textobject>
</mediaobject>
</informalfigure>
<formalpara>
<title><guimenu>Home</guimenu></title>
<para>Check your tasks and systems.
View and manage your primary account information and get help.</para>
</formalpara>
<itemizedlist>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Overview</guimenu></title>
<para>Obtain a quick overview of your account.
This page notifies you if your systems need attention, provides a quick link directly to these systems, displays the most recent patch alerts for your account, and recently registered systems.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Your Account</guimenu></title>
<para>Update your personal profile, addresses, email, and credentials.
Deactivate your account.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Your Preferences</guimenu></title>
<para>Indicate if you wish to receive email notifications about available patches for your systems.
Set how many items are displayed in system and group lists.
Set contents of the overview start page.
Select your preferred CSV separator.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Locale Preferences</guimenu></title>
<para>Configure timezone.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Your Organization</guimenu></title>
<para>Update organization configuration and display organization trusts.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title><guimenu>Systems</guimenu></title>
<para>Manage all your systems (including virtual guests) here.</para>
</formalpara>
<itemizedlist>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Overview</guimenu></title>
<para>View a summary of your systems or system groups showing how many available patches each system has and which systems are entitled.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Systems</guimenu></title>
<para>Select and view subsets of your systems by specific criteria, such as Virtual Systems, Unprovisioned Systems, Recently Registered, Proxy, and Inactive.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>System Groups</guimenu></title>
<para>List your system groups.
Create additional groups.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>System Set Manager</guimenu></title>
<para>Perform various actions on sets of systems, including scheduling patch updates, package management, listing and creating new groups, managing channel entitlements, deploying configuration files, schedule audits, apply system states, and check status.
The availability of these actions depend on the system type.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Bootstrapping</guimenu></title>
<para>Bootstrap minion machines using SSH.
Input SSH credentials and the activation key the selected system will use for its software sources.
SUSE Manager will install required software (salt-minion packages on the client machine) and remotely perform the registration.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Visualization</guimenu></title>
<para>Graphically visualize the client topology.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Advanced Search</guimenu></title>
<para>Quickly search all your systems by specific criteria, such as name, hardware, devices, system info, networking, packages, and location.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Activation Keys</guimenu></title>
<para>Generate an activation key for a &susemgr;
-entitled system.
This activation key can be used to grant a specific level of entitlement or group membership to a newly registered system using the <command>rhnreg_ks</command> command.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Stored Profiles</guimenu></title>
<para>View system profiles used to provision systems.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Custom System Info</guimenu></title>
<para>Create and edit system information keys with completely customizable values assigned while provisioning systems.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Autoinstallation</guimenu></title>
<para>Display and modify various aspects of autoinstallation profiles (Kickstart and &ay;
) used in provisioning systems.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Software Crashes</guimenu></title>
<para>List software crashes grouped by UUID.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Virtual Host Managers</guimenu></title>
<para>Display and modify virtual host managers, file-based or VMware-based.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title><guimenu>Salt</guimenu></title>
<para>View all minions.
Manage on-boarding, remote commands, and states catalogs.</para>
</formalpara>
<itemizedlist>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Keys</guimenu></title>
<para>Manage minion keys.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Remote Commands</guimenu></title>
<para>Execute remote commands on targeted systems.
Select the preview button to ensure selected targets are available and click Run to execute.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>State Catalog</guimenu></title>
<para>Create, store, and manage states for your Salt minions from the State Catalog.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title><guimenu>Images</guimenu></title>
<para>Image building and inspection.</para>
</formalpara>
<itemizedlist>
<listitem>
<para></para>
</listitem>
<listitem>
<para></para>
</listitem>
<listitem>
<para></para>
</listitem>
<listitem>
<para></para>
</listitem>
</itemizedlist>
<formalpara>
<title><guimenu>Patches</guimenu></title>
<para>View and manage patch (errata) alerts here.</para>
</formalpara>
<itemizedlist>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Patches</guimenu></title>
<para>Lists patch alerts and downloads associated RPMs relevant to your systems.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Advanced Search</guimenu></title>
<para>Search patch alerts based on specific criteria, such as synopsis, advisory type, and package name.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Manage Patches</guimenu></title>
<para>Manage the patches for an organization&#8217;s channels.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Clone Patches</guimenu></title>
<para>Clone patches for an organization for ease of replication and distribution across an organization.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title><guimenu>Software</guimenu></title>
<para>View and manage the available &susemgr;
channels and the files they contain.</para>
</formalpara>
<itemizedlist>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Channels</guimenu></title>
<para>View a list of all software channels and those applicable to your systems.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Package Search</guimenu></title>
<para>Search packages using all or some portion of the package name, description, or summary, with support for limiting searches to supported platforms.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Manage Software Channels</guimenu></title>
<para>Create and edit channels used to deploy configuration files.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Distribution Channel Mapping</guimenu></title>
<para>Define default base channels for servers according to their operating system or architecture when registering.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title><guimenu>Audit</guimenu></title>
<para>View and search CVE audits, system subscriptions, and OpenSCAP scans.</para>
</formalpara>
<itemizedlist>
<listitem>
<para></para>
<formalpara>
<title><guimenu>CVE Audit</guimenu></title>
<para>View a list of systems with their patch status regarding a given CVE (Common Vulnerabilities and Exposures) number.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Subscription Matching</guimenu></title>
<para>List subscriptions.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>OpenSCAP</guimenu></title>
<para>View and search OpenSCAP (Security Content Automation Protocol) scans.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title><guimenu>Configuration</guimenu></title>
<para>Keep track of and manage configuration channels, actions, individual configuration files, and systems with &susemgr;
-managed configuration files.</para>
</formalpara>
<itemizedlist>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Overview</guimenu></title>
<para>A general dashboard view that shows a configuration summary.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Configuration Channels</guimenu></title>
<para>List and create configuration channels from which any subscribed system can receive configuration files.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Configuration Files</guimenu></title>
<para>List and create files from which systems receive configuration input.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Systems</guimenu></title>
<para>List the systems that have &susemgr;
-managed configuration files.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title><guimenu>Schedule</guimenu></title>
<para>Keep track of your scheduled actions.</para>
</formalpara>
<itemizedlist>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Pending Actions</guimenu></title>
<para>List scheduled actions that have not been completed.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Failed Actions</guimenu></title>
<para>List scheduled actions that have failed.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Completed Actions</guimenu></title>
<para>List scheduled actions that have been completed.
Completed actions can be archived at any time.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Archived Actions</guimenu></title>
<para>List completed actions that have been selected to archive.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Action Chains</guimenu></title>
<para>View and edit defined action chains.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title><guimenu>Users</guimenu></title>
<para>View and manage users in your organization.</para>
</formalpara>
<itemizedlist>
<listitem>
<para></para>
<formalpara>
<title><guimenu>User List</guimenu></title>
<para>List users in your organization.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>System Group Configuration</guimenu></title>
<para>Configure user group creation.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title><guimenu>Admin</guimenu></title>
<para>&#8201;&#8212;&#8201;Use the Setup Wizard to configure &susemgr;
.
List, create, and manage one or more &susemgr;
organizations.
The &susemgr;
administrator can assign channel entitlements, create and assign administrators for each organization, and other tasks.</para>
</formalpara>
<itemizedlist>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Setup Wizard</guimenu></title>
<para>Streamlined configuration of basic tasks.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Organizations</guimenu></title>
<para>List and create new organizations.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Users</guimenu></title>
<para>List all users known by &susemgr;
, across all organizations.
Click individual user names to change administrative privileges of the user.</para>
</formalpara>
<note>
<simpara>Users created for organization administration can only be configured by the organization administrator, <emphasis>not</emphasis> the &susemgr;
 administrator.</simpara>
</note>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Manager Configuration</guimenu></title>
<para>Make General configuration changes to the &susemgr;
server, including Proxy settings, Certificate configuration, Bootstrap Script configuration, Organization changes, and Restart the &susemgr;
server.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>ISS Configuration</guimenu></title>
<para>Configure master and slave servers for inter-server synchronization.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Task Schedules</guimenu></title>
<para>View and create schedules.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Task Engine Status</guimenu></title>
<para>View the status of the various tasks of the &susemgr;
task engine.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title><guimenu>Show Tomcat Logs</guimenu></title>
<para>Display the log entries of the Tomcat server, on which the &susemgr;
server is running.</para>
</formalpara>
</listitem>
</itemizedlist>
<formalpara>
<title><guimenu>Help</guimenu></title>
<para>List references to available help resources such as the product documentation, release notes, and a general search for all of this.</para>
</formalpara>
<formalpara>
<title><guimenu>External Links</guimenu></title>
<para>List external links to the knowledge base and the online documentation.</para>
</formalpara>
</section>
<section xml:id="_ref.webui.intro.patch_alerts"><title>Patch Alert Icons</title><simpara><indexterm>
<primary>email address</primary><secondary>explanation of</secondary>
</indexterm>
<indexterm>
<primary>explanation of</primary>
</indexterm></simpara>
<simpara>Throughout &susemgr;
you will see three patch (errata) alert icons.</simpara>
<itemizedlist>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-shield.svg"/>
</imageobject>
<textobject><phrase>Security Alert</phrase></textobject>
</inlinemediaobject>&mdash;
represents a security alert.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-bug.svg"/>
</imageobject>
<textobject><phrase>Bug Fix Alert</phrase></textobject>
</inlinemediaobject>&mdash;
represents a bug fix alert.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/spacewalk-icon-enhancement.svg"/>
</imageobject>
<textobject><phrase>Enhancement Alert</phrase></textobject>
</inlinemediaobject>&mdash;
represents an enhancement alert.</para>
</listitem>
</itemizedlist>
<simpara>On the <guimenu>Overview</guimenu>
 page of the <guimenu>Home</guimenu>
 menu, in the <guimenu>Relevant Security Patches</guimenu>
 section click the patch advisory to view details about the patch or click the number of affected systems to see which systems are affected by the patch alert.
Both links take you to tabs of the <guimenu>Patch Details</guimenu>
 page.
If all patches are installed, there is just a <guimenu>View All Patches</guimenu>
 link to open the <guimenu>Patches</guimenu>
 page.
Refer to <xref linkend="_s3_sm_errata_details"/> for more information.</simpara>
</section>
<section xml:id="_ref.webui.intro.quick_search"><title>Search</title><simpara>In the top bar, &susemgr;
offers a search functionality for Packages, Patches (Errata), Documentation, and Systems.
To use the search, click the magnifier, then select the search item (choose from <guimenu>Systems</guimenu>
, <guimenu>Packages</guimenu>
, <guimenu>Documentation</guimenu>
, and <guimenu>Patches</guimenu>
) and type a string to look for a name match.
Click the <guimenu>Search</guimenu>
 button.
Your results appear at the bottom of the page.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/top_search.png" width="40%"/>
</imageobject>
<textobject><phrase>top search</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>If you misspell a word during your search query, the &susemgr;
search engine performs approximate string (or fuzzy string) matching, returning results that may be similar in spelling to your misspelled queries.</simpara>
<simpara>For example, if you want to search for a certain development system called <literal>test-1.example.com</literal> that is registered with &susemgr;
, but you misspell your query <literal>tset</literal>, the <literal>test-1.example.com</literal> system still appears in the search results.</simpara>
<note>
<simpara>If you add a distribution or register a system with a &susemgr;
server, it may take several minutes for it to be indexed and appear in search results.</simpara>
</note>
<itemizedlist>
<listitem>
<para>For advanced System searches, refer to <xref linkend="_ref.webui.systems.search"/>.</para>
</listitem>
<listitem>
<para>For advanced Patch or Errata searches, refer to <xref linkend="_ref.webui.patches.search"/>.</para>
</listitem>
<listitem>
<para>For advanced Package searches, refer to <xref linkend="_ref.webui.channels.search"/>.</para>
</listitem>
<listitem>
<para>For advanced Documentation searches, refer to <xref linkend="_s2_sm_your_rhn_help_docsearch"/>.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_ref.webui.intro.systems_selected"><title>Systems Selected</title><simpara>On the <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Overview</guimenuitem></menuchoice>
 page, if you mark the check box next to a system, the <guimenu>system selected</guimenu>
 number on the right area of the top bar increases.
This number keeps track of the systems you have selected for use in the System Set Manager (SSM); for more information, see to <xref linkend="_ref.webui.systems.ssm"/>.
At any time, it identifies the number of selected systems and provides the means to work (simultaneously) with an entire selection.
Clicking the the rubber symbol (<guimenu>Clear</guimenu>
) deselects all systems, while clicking the <guimenu>system selected</guimenu>
 string (<guimenu>Manage</guimenu>
) launches the System Set Manager with your selected systems in place.</simpara>
<simpara>These systems can be selected in a number of ways.
Only systems with at least a Management system role are eligible for selection.
On all system and system group lists, a check boxes exist for this purpose.
Each time you select a check box next to the systems or groups the <guimenu>systems selected</guimenu>
 counter at the top of the page changes to reflect the new number of systems ready for use in the System Set Manager.</simpara>
</section>
<section xml:id="_ref.webui.intro.list_nav"><title>Lists</title><simpara>The information within most categories is presented in the form of lists.
These lists have some common features for navigation.
For instance, you can set the number of <guimenu>items per page</guimenu>
 and navigate through virtually all lists by clicking the back and next arrows above and below the right side of the table.
Some lists also offer the option to retrieve items alphabetically by clicking numbers or letters from the <guimenu>Alphabetical Index</guimenu>
 above the table.</simpara>
<note>
<title>Performing Large List Operations</title>
<simpara>Performing operations on large lists&mdash;
such as removing RPM packages from the database with the &susemgr;
Web interface&mdash;
may take some time and the system may become unresponsive or signal <quote>Internal Server
    Error 500</quote>
.
Nevertheless, the command will succeed in the background if you wait long enough.</simpara>
</note>
</section>
<section xml:id="_ref.webui.overview"><title>Overview</title><simpara><indexterm>
<primary>Overview</primary><secondary>Web interface</secondary>
</indexterm>
<indexterm>
<primary>Web interface</primary>
</indexterm></simpara>
<simpara>Entering the &susemgr;
URL in a browser takes you to the <guimenu>Sign In</guimenu>
 screen.
If you click the <guimenu>About</guimenu> link before logging in, you will find documentation links, including a search function, and the option to request your login credentials if you forgot either password or login.
Click <guimenu>Lookup Login/Password</guimenu> to retrieve or reset your login information.
For more information, see: <xref linkend="_ref.webui.overview.account"/>.</simpara>
<simpara>After logging into the Web interface of &susemgr;
, the first page to appear is the <guimenu>Overview</guimenu>
 page of the <guimenu>Home</guimenu>
 menu.
The <guimenu>Overview</guimenu>
 page contains important information about your systems, including summaries of system status, actions, and patch alerts.</simpara>
<note>
<simpara>If you are new to the &susemgr;
Web interface, read <xref linkend="_ref.webui.intro"/> to familiarize yourself with the layout and symbols used throughout the interface.</simpara>
</note>
<figure>
<title>Overview</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_overview.png" width="80%"/>
</imageobject>
<textobject><phrase>home overview</phrase></textobject>
</mediaobject>
</figure>
<simpara><guimenu>Overview</guimenu>
 is split into functional sections, with the most critical sections displayed first.
Users can control which of the following sections are displayed by making selections on the <menuchoice><guimenu>Home</guimenu> <guimenuitem>Your Preferences</guimenuitem></menuchoice>
 page.
Refer to <xref linkend="_ref.webui.overview.prefs"/> for more information.</simpara>
<itemizedlist>
<listitem>
<para>The <guimenu>Tasks</guimenu> section lists the most common tasks an administrator performs via the Web interface. Click any link to reach the page within &susemgr; that allows you to accomplish that task.</para>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_overview_tasks_pane.png" width="40%"/>
</imageobject>
<textobject><phrase>home overview tasks pane</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>If any systems have not been checking in to &susemgr; , they are listed under <guimenu>Inactive Systems</guimenu> to the right. Highlighting them in this way allows an administrator to quickly select those systems for troubleshooting.</para>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_overview_inactive_systems_pane.png" width="80%"/>
</imageobject>
<textobject><phrase>home overview inactive systems pane</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>The <guimenu>Most Critical Systems</guimenu> section lists the most critical systems within your organization. It provides a link to quickly view those systems and displays a summary of the patch updates that have yet to be applied to those systems. Click the name of the system to see its <guimenu>System Details</guimenu> page and apply the patch updates. Below the list is a link to <guimenu>View All Critical Systems</guimenu> on one page.</para>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_overview_critical_systems_pane.png" width="80%"/>
</imageobject>
<textobject><phrase>home overview critical systems pane</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>The <guimenu>Recently Scheduled Actions</guimenu> section lists all actions less than thirty days old and their status: failed, completed, or pending. Click the label of any given action to view its details page. Below the list is a link to <guimenu>View All Scheduled Actions</guimenu> on one page, which lists all actions that have not yet been carried out on your client systems.</para>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_overview_pending_actions_pane.png" width="80%"/>
</imageobject>
<textobject><phrase>home overview pending actions pane</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>The <guimenu>Relevant Security Patches</guimenu> section lists all available security patches that have yet to be applied to some or all of your client systems. It is critical that you apply these security patches to keep your systems secure. Below this list find links to all patches (<guimenu>View All Patches</guimenu> ) and to the patches that apply to your systems (<guimenu>View All Relevant Patches</guimenu> ).</para>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_overview_latest_errata_pane.png" width="80%"/>
</imageobject>
<textobject><phrase>home overview latest errata pane</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>The <guimenu>System Group Name</guimenu> section lists groups you may have created and indicates whether the systems in those groups are fully updated. Click the link below this section to get to the <guimenu>System Groups</guimenu> page, where you can choose <guimenu>System Groups</guimenu> to use with the System Set Manager.</para>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_overview_system_groups_pane.png" width="80%"/>
</imageobject>
<textobject><phrase>home overview system groups pane</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<para>The <guimenu>Recently Registered Systems</guimenu> section lists the systems added to the &susemgr; in the past 30 days. Click a system&#8217;s name to see its <guimenu>System Details</guimenu> page. Click the link below this section to <guimenu>View All Recently Registered Systems</guimenu> on one page.</para>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_overview_recently_registered_pane.png" width="80%"/>
</imageobject>
<textobject><phrase>home overview recently registered pane</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
</itemizedlist>
<simpara>To return to this page, select <menuchoice><guimenu>Home</guimenu> <guimenuitem>Overview</guimenuitem></menuchoice>
 on the left bar that is also known as <quote>the menu</quote>
.</simpara>
</section>
<section xml:id="_ref.webui.overview.notifications"><title>Notification Messages</title><simpara>The <menuchoice><guimenu>Home</guimenu> <guimenuitem>Notification
   Messages</guimenuitem></menuchoice>
 page allows you to manage your notification messages of the &susemgr;
 server.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_notification_messages.png" width="80%"/>
</imageobject>
<textobject><phrase>home notification messages</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>The <guimenu>Notification Messages</guimenu>
 page displays two tabs (<guimenu>Unread Messages</guimenu>
 and <guimenu>All Messages</guimenu>
) with a list of all your collected messages.
Several columns provide information for each message:</simpara>
<itemizedlist>
<listitem>
<para><guimenu>Severity</guimenu> : The severity levels <quote>info</quote> , <quote>warning</quote> , and <quote>error</quote> are available. For each failure a customized button (in line with the message) is available to react to that failure.</para>
</listitem>
<listitem>
<para><guimenu>Type</guimenu> : Available types are:</para>
<itemizedlist>
<listitem>
<para>Onboarding failed(<quote>error</quote> )</para>
</listitem>
<listitem>
<para>Channel sync finished (<quote>info</quote> )</para>
</listitem>
<listitem>
<para>Channel sync failed (<quote>error</quote> )</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para><guimenu>Description</guimenu> : The text of the message with a link to the channel.</para>
</listitem>
<listitem>
<para><guimenu>Created</guimenu> : The date when the message was created.</para>
</listitem>
<listitem>
<para><guimenu>Action Read|Delete</guimenu> :</para>
<itemizedlist>
<listitem>
<para>By clicking the letter icon a message can be flagged as <quote>read</quote> or <quote>unread</quote> .</para>
</listitem>
<listitem>
<para>By clicking the waste bin icon the message will be deleted immediately.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
<simpara>You can sort the messages by clicking a column label of the list header line.</simpara>
</section>
<section xml:id="_ref.webui.overview.account"><title>User Account</title><section xml:id="_ref.webui.overview.account.your"><title>Your Account</title><simpara><indexterm>
<primary>WebLogic</primary><secondary>Your Account</secondary>
</indexterm>
<indexterm>
<primary>Your Account</primary>
</indexterm></simpara>
<simpara>Modify your personal information, such as name, password, and title from the <menuchoice><guimenu>Home</guimenu> <guisubmenu>User Account</guisubmenu> <guimenuitem>Your Account</guimenuitem></menuchoice>
 page.
To modify this information, make the changes in the appropriate text fields and click the <guimenu>Update</guimenu>
 button at the bottom.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_user_account_user_details.png" width="80%"/>
</imageobject>
<textobject><phrase>home user account user details</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>If you change your &susemgr;
password, for security reasons you will not see the new password while you enter it.
Replace the asterisks in the <guimenu>Password</guimenu>
 and <guimenu>Confirm Password</guimenu>
 text fields with the new password.</simpara>
<note>
<simpara>If you forget your password or username, go to the sign in screen and click the <guimenu>About</guimenu>
 link, then select the <guimenu>Lookup Login/Password</guimenu>
 page.
Here you can either specify your login and email address or only your email address if you are not sure about the username.
Then click <guimenu>Send Password</guimenu>
 or <guimenu>Send Login</guimenu>
 respectively.</simpara>
</note>
</section>
<section xml:id="_ref.webui.overview.account.addresses"><title>Addresses</title><simpara><indexterm>
<primary>Oracle</primary><secondary>Addresses</secondary>
</indexterm>
<indexterm>
<primary>Addresses</primary>
</indexterm></simpara>
<simpara>On the <guimenu>Addresses</guimenu>
 page you can manage your mailing, billing and shipping addresses, and associated phone numbers.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_user_account_addresses.png" width="80%"/>
</imageobject>
<textobject><phrase>home user account addresses</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Click <guimenu>Fill in this address</guimenu>
 or <guimenu>Edit this address</guimenu>
 below the address to be modified or added, make your changes, and click <guimenu>Update</guimenu>
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_user_account_edit_address.png" width="80%"/>
</imageobject>
<textobject><phrase>home user account edit address</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.overview.account.email"><title>Change Email</title><simpara><indexterm>
<primary>Oracle</primary><secondary>Email</secondary>
</indexterm>
<indexterm>
<primary>Email</primary>
</indexterm></simpara>
<simpara>The email address listed in the <guimenu>Your Account</guimenu>
 page is the address to which &susemgr;
 sends email notifications if you select to receive patch alerts or daily summaries for your systems on the <guimenu>Your Preferences</guimenu>
 page.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_user_account_change_email.png" width="80%"/>
</imageobject>
<textobject><phrase>home user account change email</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>To change your preferred email address, click <guimenu>Change Email</guimenu>
 in the left navigation bar.
Enter your new email address and click the <guimenu>Update</guimenu>
 button. Invalid email addresses like those ending in <literal>@localhost</literal> are filtered and rejected.</simpara>
</section>
<section xml:id="_ref.webui.overview.account.credentials"><title>Credentials</title><simpara>View or enter external system or API credentials associated with your &susemgr;
account.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_user_account_credentials.png" width="80%"/>
</imageobject>
<textobject><phrase>home user account credentials</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.overview.account.deactivate"><title>Account Deactivation</title><simpara><indexterm>
<primary>account</primary><secondary>deactivate</secondary>
</indexterm>
<indexterm>
<primary>deactivate</primary>
</indexterm></simpara>
<simpara>The <guimenu>Account Deactivation</guimenu>
 page provides a means to cancel your &susemgr;
 service.
To do so, click the <guimenu>Deactivate Account</guimenu>
 button.
The Web interface returns you to the login screen.
If you attempt to log back in, an error message advises you to contact the &susemgr;
 administrator for your organization.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_user_account_account_deactivation.png" width="80%"/>
</imageobject>
<textobject><phrase>home user account account deactivation</phrase></textobject>
</mediaobject>
</informalfigure>
<note>
<title>&susemgr;Administrator Account</title>
<simpara>If you are the only &susemgr;
Administrator for your organization, you cannot deactivate your account.</simpara>
</note>
</section>
</section>
<section xml:id="_ref.webui.overview.prefs"><title>Your Preferences</title><simpara><indexterm>
<primary>WebUI</primary><secondary>Your Preferences</secondary>
</indexterm>
<indexterm>
<primary>Your Preferences</primary>
</indexterm></simpara>
<simpara>The <menuchoice><guimenu>Home</guimenu> <guimenuitem>Your
   Preferences</guimenuitem></menuchoice>
 page allows you to configure &susemgr;
 options.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_your_preferences.png" width="80%"/>
</imageobject>
<textobject><phrase>home your preferences</phrase></textobject>
</mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para><guimenu>Email Notifications</guimenu>&#8201;&#8212;&#8201;Determine whether you want to receive email every time a patch alert is applicable to one or more systems in your account.</para>
<important>
<simpara>This setting also enables Management and Provisioning customers to receive a daily summary of system events.
These include actions affecting packages, such as scheduled patches, system reboots, or failures to check in.
In addition to selecting this check box, you must identify each system to be included in this summary email.
By default, all Management and Provisioning systems are included in the summary.
Add more systems either individually on the <guimenu>System Details</guimenu>
 page or for multiple systems at once in the <guimenu>System Set Manager</guimenu>
 interface.
Note that &susemgr;
 sends these summaries only to verified email addresses.
To disable all messages, simply deselect this check box.</simpara>
</important>
</listitem>
<listitem>
<para><guimenu>SUSE Manager List Page Size</guimenu>&#8201;&#8212;&#8201;Maximum number of items that appear in a list on a single page. If more items are in the list, clicking the <guimenu>Next</guimenu> button displays the next group of items. This preference applies to system lists, patch lists, package lists, and so on.</para>
</listitem>
<listitem>
<para><guimenu>"Overview" Start Page</guimenu>&#8201;&#8212;&#8201;Select the information sections that are displayed on the <guimenu>Overview</guimenu> page of the <guimenu>Home</guimenu> menu. Check the box to the left of the information section you would like to include.</para>
</listitem>
<listitem>
<para><guimenu>Locale Preferences</guimenu> - Select and set your &susemgr; interface to your local time by selecting the appropriate <guimenu>Time Zone</guimenu> from the drop-down box, then click the <guimenu>Save Preferences</guimenu> button to apply the selection.</para>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_locale_preferences.png" width="80%"/>
</imageobject>
<textobject><phrase>home locale preferences</phrase></textobject>
</mediaobject>
</informalfigure>
</listitem>
<listitem>
<para><guimenu>CSV Files</guimenu>&#8201;&#8212;&#8201;Select the separator character to be used in downloadable CSV files. <guimenu>Comma</guimenu> is the default; as an alternative use <guimenu>Semicolon</guimenu> , which is more compatible with Microsoft Excel.</para>
</listitem>
</itemizedlist>
<simpara>After making changes to any of these options, click the <guimenu>Save Preferences</guimenu>
 button.</simpara>
</section>
<section xml:id="_ref.webui.overview.org"><title>Your Organization</title><simpara>From the <menuchoice><guimenu>Home</guimenu> <guimenuitem>Your
   Organization</guimenuitem></menuchoice>
 page you can modify your organization&#8217;s <guimenu>Configuration</guimenu>
 and <guimenu>Organization Trusts</guimenu>
 and manage <guimenu>Cofiguration Channels</guimenu>
 distributed across an organization.</simpara>
<section xml:id="_ref.webui.overview.org.config"><title>Configuration</title><simpara>On the <guimenu>Configuration</guimenu>
 page modify your personal information, such as name, password, and title.
To modify any of this information, make the changes in the appropriate text fields and click the <guimenu>Update</guimenu>
 button at the bottom.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_your_organization_configuration.png" width="80%"/>
</imageobject>
<textobject><phrase>home your organization configuration</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.overview.org.trust"><title>Organization Trusts</title><simpara>The <guimenu>Organization Trusts</guimenu>
 page displays the trusts established with your organization (that is, the organization with which you, the logged-in user, are associated). The page also lists <guimenu>Channels Shared</guimenu>
, which refers to channels available to your organization via others in the established trusts.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_your_organization_trusts.png" width="80%"/>
</imageobject>
<textobject><phrase>home your organization trusts</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>You can filter the list of trusts by keyword using the <guimenu>Filter by Organization</guimenu>
 text box and clicking <guimenu>Go</guimenu>
.</simpara>
</section>
<section xml:id="_ref.webui.overview.org.cfgch"><title>Configuration Channels</title><simpara>The <guimenu>Configuration Channels</guimenu>
 page displays the channels which have been created and added using <menuchoice><guimenu>Configuration</guimenu> <guimenuitem>Configuration Channels</guimenuitem></menuchoice>
.</simpara>
<simpara>From <menuchoice><guimenu>Home</guimenu> <guisubmenu>Your
     Organization</guisubmenu> <guimenuitem>Configuration Channels</guimenuitem></menuchoice>
 you can select which configuration channels should be applied across your organization.
If there is more than one configuration channel selected you can specify the order of the channels.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/home_your_organization_custom.png" width="80%"/>
</imageobject>
<textobject><phrase>home your organization custom</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<title>Procedure: Apply a Configuration Channel at the Organization Level</title>
<listitem>
<para>Create a channel using <menuchoice><guimenu>Configuration</guimenu> <guimenuitem>Configuration Channels</guimenuitem></menuchoice> or via the command line.</para>
</listitem>
<listitem>
<para>Browse to <menuchoice><guimenu>Home</guimenu> <guisubmenu>Your Organization</guisubmenu> <guimenuitem>Configuration Channels</guimenuitem></menuchoice> .</para>
</listitem>
<listitem>
<para>Use the search feature to locate a channel by name.</para>
</listitem>
<listitem>
<para>Select the check box for the channel to be applied and click the <guimenu>Save Changes</guimenu> button. The save button will save the change to the database but will not apply the channel.</para>
</listitem>
<listitem>
<para>Apply the channel by clicking the <guimenu>Apply</guimenu> button. The channel will be scheduled and applied to any systems included within the organization.</para>
</listitem>
</orderedlist>
</section>
</section>
</chapter>
<chapter xml:id="_ref.webui.systems"><title>Systems</title><simpara><indexterm>
<primary>Web Interface</primary><secondary>Systems</secondary>
</indexterm>
<indexterm>
<primary>Systems</primary>
</indexterm></simpara>
<simpara>If you click <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Overview</guimenuitem></menuchoice>
 on the left bar, an overview listing of your <guimenu>Systems</guimenu>
 appears.
Here you can select systems to perform actions on them and create system profiles.</simpara>
<section xml:id="_ref.webui.systems.overview"><title>Overview</title><simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>System Overview</secondary>
</indexterm>
<indexterm>
<primary>System Overview</primary>
</indexterm></simpara>
<simpara>The <guimenu>System Overview</guimenu>
 page provides a summary of your systems, including their status, number of associated patches (errata) and packages, and their so-called system type.
Clicking the name of a system takes you to its <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="_s3_sm_system_details"/> for more information.</simpara>
<simpara>Clicking <guimenu>View System Groups</guimenu>
 at the top of the <guimenu>Overview</guimenu>
 page takes you to a similar summary of your system groups.
It identifies group status and displays the number of systems contained.
Then, clicking the number of systems takes you to the <guimenu>Systems</guimenu>
 tab of the <guimenu>System Group Details</guimenu>
 page, while clicking the group name takes you to the <guimenu>Details</guimenu>
 tab for that system group.
Refer to <xref linkend="_ref.webui.systems.systemgroups.details"/> for more information.</simpara>
<simpara>You can also click <guimenu>Use in SSM</guimenu>
 in the <guimenu>System Groups</guimenu>
 section to go directly to the <guimenu>System Set Manager</guimenu>
.
Refer to <xref linkend="_ref.webui.systems.ssm"/> for more information.</simpara>
</section>
<section xml:id="_ref.webui.systems.systems"><title>Systems</title><simpara><indexterm>
<primary>system list</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>viewing a list of</secondary>
</indexterm>
<indexterm>
<primary>viewing a list of</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>status</secondary>
</indexterm>
<indexterm>
<primary>status</primary>
</indexterm></simpara>
<simpara>The <guimenu>Systems</guimenu>
 page displays a list of all your registered systems.
Several columns provide information for each system:</simpara>
<itemizedlist>
<listitem>
<para>Select box: Systems without a system type cannot be selected. To select systems, mark the appropriate check boxes. Selected systems are added to the <guimenu>System Set Manager</guimenu> , where actions can be carried out simultaneously on all systems in the set. Refer to <xref linkend="_ref.webui.systems.ssm"/> for details.</para>
</listitem>
<listitem>
<para><guimenu>System</guimenu> : The name of the system specified during registration. The default name is the host name of the system. Clicking the name of a system displays its <guimenu>System Details</guimenu> page. Refer to <xref linkend="_s3_sm_system_details"/> for more information.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/spacewalk-icon-virtual-host.svg"/>
</imageobject>
<textobject><phrase>Virtual Host</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Virtual Host.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/spacewalk-icon-virtual-guest.svg"/>
</imageobject>
<textobject><phrase>Virtual Guest</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Virtual Guest.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-236-non-virtual-system.svg"/>
</imageobject>
<textobject><phrase>Non-Virtual System</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Non-Virtual System.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/spacewalk-icon-unprov-system.svg"/>
</imageobject>
<textobject><phrase>Unprovisioned System</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Unprovisioned System.</para>
</listitem>
<listitem>
<para><guimenu>Updates</guimenu> : Shows which type of update action is applicable to the system or confirms that the system is up-to-date. Some icons are linked to related tasks. For example, the standard Updates icon is linked to the <guimenu>Upgrade</guimenu> subtab of the packages list, while the Critical Updates icon links directly to the <guimenu>Software Patches</guimenu> page.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-check-circle.svg"/>
</imageobject>
<textobject><phrase>Check Circle</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;System is up-to-date.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-exclamation-circle.svg"/>
</imageobject>
<textobject><phrase>Exclamation Circle</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Critical patch (errata) available, update <emphasis>strongly</emphasis>
     recommended.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-warning.svg"/>
</imageobject>
<textobject><phrase>Warning</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Updates available and recommended.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-question-circle.svg"/>
</imageobject>
<textobject><phrase>Question</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;System not checking in properly (for 24 hours or more).</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-lock.svg"/>
</imageobject>
<textobject><phrase>Lock</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;System is locked; actions prohibited.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-rocket.svg"/>
</imageobject>
<textobject><phrase>Rocket</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;System is being deployed using &ay;
or Kickstart.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-clock-o.svg"/>
</imageobject>
<textobject><phrase>Clock</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Updates have been scheduled.</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-times-circle.svg"/>
</imageobject>
<textobject><phrase>Times</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;System not entitled to any update service.</para>
</listitem>
<listitem>
<para><guimenu>Patches</guimenu> : Total number of patch alerts applicable to the system.</para>
</listitem>
<listitem>
<para><guimenu>Packages</guimenu> : Total number of package updates for the system, including packages related to patch alerts and newer versions of packages not related to patch alerts. For example, if a client system that has an earlier version of a package installed gets subscribed to the appropriate base channel (such as &sle; 12 SP2), that channel may have an updated version of the package. If so, the package appears in the list of available package updates.</para>
<important>
<title>Package Conflict</title>
<simpara>If &susemgr;
identifies package updates for the system, but the package updater (such as Red Hat Update Agent or &yast;
) responds with a message like "Your system is fully updated", a conflict likely exists in the system&#8217;s package profile or in the <filename>up2date</filename>
 configuration file.
To resolve the conflict, either schedule a package list update or remove the packages from the package exceptions list.
Refer to <xref linkend="_s3_sm_system_details"/> for instructions.</simpara>
</important>
</listitem>
<listitem>
<para><guimenu>Configs</guimenu> : Total number of configuration files applicable to the system.</para>
</listitem>
<listitem>
<para><guimenu>Base Channel</guimenu> : The primary channel for the system based on its operating system. Refer to <xref linkend="_ref.webui.channels.software"/> for more information.</para>
</listitem>
<listitem>
<para><guimenu>System Type</guimenu> : Shows whether the system is managed and at what service level.</para>
</listitem>
</itemizedlist>
<simpara>Links in the navigation bar below <guimenu>Systems</guimenu>
 enable you to select and view predefined sets of your systems.
All of the options described above can be applied within these pages.</simpara>
<section xml:id="_ref.webui.systems.systems.all"><title>All</title><simpara>The <guimenu>All</guimenu>
 page contains the default set of your systems.
It displays every system you have permission to manage.
You have permission if you are the only user in your organization, if you are a &susemgr;
 Administrator, or if the system belongs to a group for which you have admin rights.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_all.png" width="80%"/>
</imageobject>
<textobject><phrase>systems all</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.systems.physical"><title>Physical Systems</title><simpara>To reach this page, select <menuchoice><guimenu>Systems</guimenu> <guisubmenu>Systems</guisubmenu> <guimenuitem>Physical Systems</guimenuitem></menuchoice>
 from the left bar.
This page lists each physical system of which &susemgr;
 is aware.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_physical_systems.png" width="80%"/>
</imageobject>
<textobject><phrase>systems physical systems</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.systems.virtual"><title>Virtual Systems</title><simpara>To reach this page, select <menuchoice><guimenu>Systems</guimenu> <guisubmenu>Systems</guisubmenu> <guimenuitem>Virtual Systems</guimenuitem></menuchoice>
 from the left bar.
This page lists each virtual host of which &susemgr;
 is aware and the guest systems on those hosts.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_virtual_systems.png" width="80%"/>
</imageobject>
<textobject><phrase>systems virtual systems</phrase></textobject>
</mediaobject>
</informalfigure>
<variablelist>
<varlistentry>
<term><guimenu>System</guimenu></term>
<listitem>
<simpara>This column displays the name of each guest system.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Updates</guimenu></term>
<listitem>
<simpara>This column shows whether there are patches (errata updates) available for the guest systems that have not yet been applied.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Status</guimenu></term>
<listitem>
<simpara>This column indicates whether a guest is running, paused, or stopped.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Base Channel</guimenu></term>
<listitem>
<simpara>This column displays the base channel to which the guest is currently subscribed.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>Only guests registered with &susemgr;
are displayed with blue text.
Clicking the host name of such a guest system displays its <guimenu>System Details</guimenu>
 page.</simpara>
</section>
<section xml:id="_ref.webui.systems.systems.baremetal"><title>Unprovisioned Systems</title><simpara>Here, all unprovisioned (bare-metal) systems with hardware details are listed.
For more information about Unprovisioned systems, see <xref linkend="_s3_sattools_config_bare_metal"/>.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_bare_metal.png" width="80%"/>
</imageobject>
<textobject><phrase>systems bare metal</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.systems.ood"><title>Out of Date</title><simpara>The <guimenu>Out of Date</guimenu>
 page displays all systems where applicable patch alerts have not been applied.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_outofdate.png" width="80%"/>
</imageobject>
<textobject><phrase>systems outofdate</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.systems.reboot"><title>Requiring Reboot</title><simpara>Systems listed here need rebooting.
Click the name for details, where you can also schedule a reboot.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_requiringreboot.png" width="80%"/>
</imageobject>
<textobject><phrase>systems requiringreboot</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.systems.non_compliant"><title>Non-compliant Systems</title><simpara>Non-compliant systems have packages installed which are not available from &susemgr;
. <guimenu>Packages</guimenu>
 shows how many installed packages are not available in the channels assigned to the system.
A non-compliant system cannot be reinstalled.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_noncompliant.png" width="80%"/>
</imageobject>
<textobject><phrase>systems noncompliant</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.systems.wst"><title>Without System Type</title><simpara>The <guimenu>Without System Type</guimenu>
 page displays systems without System Type.
(System types are: Salt, Management, Foreign Host, etc.)</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_without_system_type.png" width="80%"/>
</imageobject>
<textobject><phrase>systems without system type</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.systems.ungrp"><title>Ungrouped</title><simpara>The <guimenu>Ungrouped</guimenu>
 page displays systems not yet assigned to a specific system group.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ungrouped.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ungrouped</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.systems.inact"><title>Inactive</title><simpara>The <guimenu>Inactive Systems</guimenu>
 page displays systems that have not checked in with &susemgr;
 for 24 hours or more.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_inactive.png" width="80%"/>
</imageobject>
<textobject><phrase>systems inactive</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Checking in means that Zypper on &sle;
or Red Hat Update Agent on &rhel;
client systems connects to &susemgr;
to see if there are any updates available or if any actions have been scheduled.
If you see a message telling you that check-ins are not taking place, the client system is not successfully connecting to &susemgr;
.
The reason may be one of the following:</simpara>
<itemizedlist>
<listitem>
<para>The system is not entitled to any &susemgr; service. System profiles that remain unentitled for 180 days (6 months) are removed.</para>
</listitem>
<listitem>
<para>The system is entitled, but the &susemgr; daemon (<literal role="systemitem">rhnsd</literal> ) has been disabled on the system. Refer to <xref linkend="_bp.contact.methods.rhnsd"/> for instructions on restarting and troubleshooting.</para>
</listitem>
<listitem>
<para>The system is behind a firewall that does not allow connections over <literal role="systemitem">https</literal> (port 443).</para>
</listitem>
<listitem>
<para>The system is behind an HTTP proxy server that has not been properly configured.</para>
</listitem>
<listitem>
<para>The system is connected to a &susemgr; Proxy Server or &susemgr; that has not been properly configured.</para>
</listitem>
<listitem>
<para>The system itself has not been properly configured, perhaps pointing at the wrong &susemgr; Server.</para>
</listitem>
<listitem>
<para>The system is not in the network.</para>
</listitem>
<listitem>
<para>Some other barrier exists between the system and the &susemgr; Server.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_ref.webui.systems.systems.rregistered"><title>Recently Registered</title><simpara>The <guimenu>Recently Registered</guimenu>
 page displays any systems that have been registered in a given period.
Use the drop-down box to specify the period in days, weeks, 30- and 180-day increments, and years.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_recently_registered.png" width="80%"/>
</imageobject>
<textobject><phrase>systems recently registered</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.systems.proxy"><title>Proxy</title><simpara>The <guimenu>Proxy</guimenu>
 page displays the &susemgrproxy;
 Server systems registered with your &susemgr;
 server.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_proxy.png" width="80%"/>
</imageobject>
<textobject><phrase>systems proxy</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.systems.dup"><title>Duplicate Systems</title><simpara>The <guimenu>Duplicate Systems</guimenu>
 page lists current systems and any active and inactive entitlements associated with them.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_duplicate_systems.png" width="80%"/>
</imageobject>
<textobject><phrase>systems duplicate systems</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Active entitlements are in gray, while inactive entitlements are highlighted in yellow and their check boxes checked by default for you to delete them as needed by clicking the <guimenu>Delete Selected</guimenu>
 button.
Entitlements are inactive if the system has not checked in with &susemgr;
 in a time specified via the drop-down box <guimenu>A system profile is inactive if its system has not checked in for</guimenu>
.</simpara>
<simpara>You can filter duplicate entitlements by <guimenu>IP Address</guimenu>
, <guimenu>IPv6 Address</guimenu>
, <guimenu>Hostname</guimenu>
, or <guimenu>MAC address</guimenu>
 by clicking the respective tab.
You may filter further by inactive time or typing the system&#8217;s host name, IP address, IPv6 address, or MAC address in the corresponding <guimenu>Filter by</guimenu>
 text box.</simpara>
<simpara>To compare up to three duplicate entitlements at one time, click the <guimenu>Compare Systems</guimenu>
 link in the <guimenu>Last Checked In</guimenu>
 column.
Inactive components of the systems are highlighted in yellow.
You can then determine which systems are inactive or duplicate and delete them by clicking the <guimenu>Delete System Profile</guimenu>
 button.
Click the <guimenu>Confirm Deletion</guimenu>
 button to confirm your choice.</simpara>
</section>
<section xml:id="_ref.webui.systems.systems.currency"><title>System Currency</title><simpara>The System Currency Report displays an overview of severity scores of patches relevant to the system.
The weighting is defined via the <guimenu>System Details</guimenu>
 page.
The default weight awards critical security patches with the heaviest weight and enhancements with the lowest.
The report can be used to prioritize maintenance actions on the systems registered to &susemgr;
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_currency_report.png" width="80%"/>
</imageobject>
<textobject><phrase>systems currency report</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.systems.types"><title>System Types</title><simpara>System Types define the set of functionalities available for each system in &susemgr;
such as the ability of installing software or creating guest virtual machines.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_system_types.png" width="80%"/>
</imageobject>
<textobject><phrase>systems system types</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>A list of profiled systems follows, with their base and add-on system types shown in the appropriate columns.
To change system types, select the systems you want to modify, and choose either <guimenu>Add System Type</guimenu>
 or <guimenu>Remove System Type</guimenu></simpara>
</section>
</section>
<section xml:id="_s3_sm_system_details"><title>System Details</title><simpara>When systems are registered to &susemgr;
, they are displayed on the <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Overview</guimenuitem></menuchoice>
 page.
Here and on any other page, clicking the name takes you to the <guimenu>System Details</guimenu>
 page of the client, where all kinds of administrative tasks can be performed, including the removal of a system.</simpara>
<note>
<simpara>The <guimenu>Delete System</guimenu>
 link in the upper right of this screen refers to the system profile only.
Deleting a host system profile will not destroy or remove the registration of guest systems.
Deleting a guest system profile does not remove it from the list of guests for its host, nor does it stop or pause the guest.
It does, however, remove your ability to manage it via &susemgr;
.</simpara>
<simpara>If you mistakenly deleted a system profile from &susemgr;
, you may re-register the system using the bootstrap script or <command>rhnreg_ks</command> manually.</simpara>
</note>
<simpara>The Details page has numerous subtabs that provide specific system information and other identifiers unique to the system.
The following sections discuss these tabs and their subtabs in detail.</simpara>
<section xml:id="_s4_sm_system_details_details"><title>System Details  &gt;  Details</title><simpara><indexterm>
<primary>deleting a system</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>Details</secondary>
</indexterm>
<indexterm>
<primary>Details</primary>
</indexterm></simpara>
<simpara>This page is not accessible from any of the left bar.
However, clicking the name of a system anywhere in the Web interface displays such a System Details page.
By default, the <menuchoice><guimenu>Details</guimenu> <guimenuitem>Overview</guimenuitem></menuchoice>
 subtab is displayed.
Other tabs are available, depending on the system type and add-on system type.
For example Traditional systems (Management, <xref linkend="_fig.system_details.details.overview.trad"/>) and Salt systems (Salt, <xref linkend="_fig.system_details.details.overview.salt"/>) display differerent tabs.</simpara>
<figure>
<title>System Details Overview (Traditional Client) <anchor xml:id="_fig.system_details.details.overview.trad"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_overview.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional overview</phrase></textobject>
</mediaobject>
</figure>
<figure>
<title>System Details Overview (Salt Minion) <anchor xml:id="_fig.system_details.details.overview.salt"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_salt_overview.png" width="80%"/>
</imageobject>
<textobject><phrase>system details salt overview</phrase></textobject>
</mediaobject>
</figure>
<section xml:id="_s5_sm_system_details_overview"><title>System Details &gt;  Details  &gt;  Overview</title><simpara>This system summary page displays the system status message and the following key information about the system:</simpara>
<formalpara>
<title><guimenu>System Status</guimenu>::</title>
<para>This message indicates the current state of your system in relation to &susemgr;
.</para>
</formalpara>
<simpara>+</simpara>
<note>
<simpara>If updates are available for any entitled system, the message <guimenu>Software Updates Available</guimenu>
 appears, displaying the number of critical and non-critical updates and the sum of affected packages.
To apply these updates, click <guimenu>Packages</guimenu>
 and select some or all packages to update, then click <guimenu>Upgrade Packages</guimenu>
.</simpara>
</note>
<simpara>+</simpara>
<variablelist>
<title><guimenu>System Info</guimenu></title>
<varlistentry>
<term>Hostname</term>
<listitem>
<simpara>The host name as defined by the client system.
A machine can have one and only one hostname.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>FQDN</term>
<listitem>
<simpara>The FQDN(Names) listed here represents the host.domain that the machine answers to.
A machine can have any number of FQDNs.
Keep in mind that FQDN is not equal to hostname.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>IP Address</term>
<listitem>
<simpara>The IP address of the client.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>IPv6 Address</term>
<listitem>
<simpara>The IPv6 address of the client.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Virtualization</term>
<listitem>
<simpara>If the client is a virtual machine, the type of virtualization is listed.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>UUID</term>
<listitem>
<simpara>Displays the universally unique identifier.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Kernel</term>
<listitem>
<simpara>The kernel installed and operating on the client system.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>&susemgr; System ID</term>
<listitem>
<simpara>A unique identifier generated each time a system registers with &susemgr;
.</simpara>
<note>
<simpara>The system ID can be used to eliminate duplicate profiles from &susemgr;
.
Compare the system ID listed on this page with the information stored on the client system in the <filename>/etc/sysconfig/rhn/systemid</filename>
 file.
In that file, the system&#8217;s current ID is listed under <literal>system_id</literal>.
The value starts after the characters <literal>ID-</literal>.
If the value stored in the file does not match the value listed in the profile, the profile is not the most recent one and may be removed.</simpara>
</note>
</listitem>
</varlistentry>
<varlistentry>
<term>Activation Key</term>
<listitem>
<simpara>Displays the activation key used to register the system.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Installed Products</term>
<listitem>
<simpara>Lists the products installed on the system.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Lock Status</term>
<listitem>
<simpara>Indicates whether a system has been locked.</simpara>
<simpara>Actions cannot be scheduled for locked systems on the Web interface until the lock is removed manually.
This does not include preventing automated patch updates scheduled via the Web interface.
To prevent the application of automated patch updates, deselect <guimenu>Auto Patch Update</guimenu>
from the menu:System
Details[Details &gt; Properties]
subtab.
For more information, refer to <xref linkend="_s5_sm_system_details_properties"/>.</simpara>
<simpara>Locking a system can prevent you from accidentally changing a system.
For example, the system may be a production system that should not receive updates or new packages until you decide to unlock it.</simpara>
<important>
<simpara>Locking a system in the Web interface <emphasis>will not</emphasis> prevent any actions that originate from the client system.
For example, if a user logs in to the client directly and runs &yast;
 Online Update (on &slea;
) or <command>pup</command> (on &rhela;
), the update tool will install available patches even if the system is locked in the Web interface.</simpara>
</important>
</listitem>
</varlistentry>
</variablelist>
<simpara>Locking a system <emphasis>does not</emphasis> restrict the number of users who can access the system via the Web interface.
If you want to restrict access to the system, associate that system with a System Group and assign a System Group Administrator to it.
Refer to <xref linkend="_ref.webui.systems.systemgroups"/> for more information about System Groups.</simpara>
<simpara>+</simpara>
<simpara>+
It is also possible to lock multiple systems via the System Set Manager.
Refer to <xref linkend="_s4_sm_ssm_misc_lock"/> for instructions.</simpara>
<formalpara>
<title><guimenu>Subscribed Channels</guimenu>::</title>
<para>List of subscribed channels.
Clicking a channel name takes you to the <guimenu>Basic Channel Details</guimenu>
page.
To change subscriptions, click the menu:(Alter Channel Subscriptions)[]
link right beside the title to assign available base and child channels to this system.
When finished making selections, click the <guimenu>Change Subscriptions</guimenu>
button to change subscriptions and the base software channel.
For more information, refer to <xref linkend="_s5_sm_system_details_channels_software"/>.</para>
</formalpara>
<variablelist>
<varlistentry>
<term>Base Channel</term>
<listitem>
<simpara>The first line indicates the base channel to which this system is subscribed.
The base channel should match the operating system of the client.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Child Channels</term>
<listitem>
<simpara>The subsequent lines of text, which depend on the base channel, list child channels.
An example is the <guimenu>SUSE Manager Tools</guimenu>
channel.</simpara>
</listitem>
</varlistentry>
</variablelist>
<variablelist>
<title><guimenu>System Events</guimenu></title>
<varlistentry>
<term>Checked In</term>
<listitem>
<simpara>The date and time at which the system last checked in with &susemgr;
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Registered</term>
<listitem>
<simpara>The date and time at which the system registered with &susemgr;
and created this profile.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Last Booted</term>
<listitem>
<simpara>The date and time at which the system was last started or restarted.</simpara>
<note>
<simpara>Systems with Salt or Management system type can be rebooted from this screen.
.. Select <guimenu>Schedule system reboot</guimenu> .
.. Provide the earliest date and time at which the reboot may take place.
.. Click the <guimenu>Schedule Reboot</guimenu> button in the lower right.</simpara>
</note>
</listitem>
</varlistentry>
</variablelist>
<simpara>When the client checks in after the scheduled start time, &susemgr;
will instruct the system to restart itself.</simpara>
<simpara>+</simpara>
<variablelist>
<title><guimenu>System Properties</guimenu></title>
<varlistentry>
<term>System Types</term>
<listitem>
<simpara>Lists system types and add-on types currently applied to the system.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Notifications</term>
<listitem>
<simpara>Indicates the notification options for this system.
You can activate whether you want to receive e-mail notifying you of available updates for this system.
In addition, you may activate to include systems in the daily summary e-mail.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Contact Method</term>
<listitem>
<simpara>Available methods: Default (Pull), Push via SSH, and Push via SSH tunnel.</simpara>
<simpara>The so-called OSA status is also displayed for client systems registered with &susemgr;
that have the OSA dispatcher (osad) configured.</simpara>
<simpara>Push enables &susemgr;
customers to immediately initiate tasks rather than wait for those systems to check in with &susemgr;
.
Scheduling actions through push is identical to the process of scheduling any other action, except that the task can immediately be carried out instead of waiting the set interval for the system to check in.</simpara>
<simpara>In addition to the configuration of &susemgr;
, to receive pushed actions each client system must have the <literal role="systemitem">osad</literal>
package installed and its service started.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Auto Patch Update</term>
<listitem>
<simpara>Indicates whether this system is configured to accept updates automatically.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>System Name</term>
<listitem>
<simpara>By default, the host name of the client is displayed, but a different system name can be assigned.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Description</term>
<listitem>
<simpara>This information is automatically generated at registration.
You can edit the description to include any information you want.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Location</term>
<listitem>
<simpara>This field displays the physical address of the system if specified.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>Clicking the <guimenu>Edit These Properties</guimenu>
 link right beside the <guimenu>System Properties</guimenu>
 title opens the <menuchoice><guimenu>System Details</guimenu> <guimenuitem>Properties</guimenuitem></menuchoice>
 subtab.
On this page, edit any text you choose, then click the <guimenu>Update Properties</guimenu>
 button to confirm.</simpara>
</section>
<section xml:id="_s5_sm_system_details_properties"><title>System Details &gt;  Details  &gt;  Properties</title><simpara>This subtab allows you to alter basic properties of the selected system.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_edit.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional edit</phrase></textobject>
</mediaobject>
</informalfigure>
<variablelist>
<title>System Details</title>
<varlistentry>
<term>System Name</term>
<listitem>
<simpara>By default, this is the host name of the system.
You can however alter the profile name to anything that allows you to distinguish this system from others.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Base System Type</term>
<listitem>
<simpara>For information only.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Add-on System Types</term>
<listitem>
<simpara>Select one of the available system types such as <guimenu>Virtualization</guimenu>
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Notifications</term>
<listitem>
<simpara>Select whether notifications about this system should be sent and whether to include this system in the daily summary. This setting keeps you aware of all advisories pertaining to the system.
Anytime an update is released for the system, you receive an e-mail notification.</simpara>
<simpara>The daily summary reports system events that affect packages, such as scheduled patch updates, system reboots, or failures to check in.
In addition to including the system here, you must activate to receive e-mail notification in the <guimenu>Your Preferences</guimenu>
page of the <guimenu>Overview</guimenu>
category.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Contact Method</term>
<listitem>
<simpara>Select between <guimenu>Pull</guimenu>
, <guimenu>Push via SSH</guimenu>
, and <guimenu>Push via SSH tunnel</guimenu>
.</simpara>
</listitem>
</varlistentry>
</variablelist>
<variablelist xml:id="_varentry_system_details_properties_auto">
<varlistentry>
<term>Auto Patch Update</term>
<listitem>
<simpara>If this box is checked, available patches are automatically applied to the system when it checks in (Pull) or immediately if you select either Push option.
This action takes place without user intervention.
The &susemgr;
Daemon (<literal role="systemitem">rhnsd</literal>
) must be enabled on the system for this feature to work.</simpara>
<note>
<title>Conflicts With Third Party Packages</title>
<simpara>Enabling auto-update might lead to failures because of conflicts between system updates and third party packages.
To avoid failures caused by those issues, it is better to leave this box unchecked.</simpara>
</note>
</listitem>
</varlistentry>
<varlistentry>
<term>Description</term>
<listitem>
<simpara>By default, this text box records the operating system, release, and architecture of the system when it first registers.
Edit this information to include anything you like.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>The remaining fields record the physical address at which the system is stored.
To confirm any changes to these fields, click the <guimenu>Update Properties</guimenu>
 button.</simpara>
<note>
<title>Setting Properties for Multiple Systems</title>
<simpara>Many of these properties can be set for multiple systems in one go via the System Set Manager interface.
For details, see <xref linkend="_ref.webui.systems.ssm"/>.</simpara>
</note>
</section>
<section xml:id="_s5_sm_system_details_remote"><title>System Details &gt;  Details  &gt;  Remote Command</title><simpara>This subtab allows you to run remote commands on the selected system. Before doing so, you must first configure the system to accept such commands.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_edit.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional edit</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>On &slea; clients, subscribe the system to the &susemgr; Tools child channel. Then use Zypper to install the <command>rhncfg</command>, <command>rhncfg-client</command>, and <command>rhncfg-actions</command> packages, if not already installed:</para>
<screen>zypper in rhncfg rhncfg-client rhncfg-actions</screen>
<simpara>On &rhela;
clients, subscribe the system to the Tools child channel.
Then use <command>up2date</command> or <command>yum</command> to install the <command>rhncfg</command>, <command>rhncfg-client</command>, and <command>rhncfg-actions</command> packages, if not already installed:</simpara>
<screen>yum install rhncfg rhncfg-client rhncfg-actions</screen>
</listitem>
<listitem>
<para>Log in to the system as root and add the following file to the local &susemgr; configuration directory: <filename>allowed-actions/scripts/run</filename> .</para>
<itemizedlist>
<listitem>
<para>Create the necessary directory on the target system:</para>
<screen>mkdir -p /etc/sysconfig/rhn/allowed-actions/script</screen>
</listitem>
<listitem>
<para>Create an empty <filename>run</filename> file in that directory to act as a flag to &susemgr; , signaling permission to allow remote commands:</para>
<screen>touch /etc/sysconfig/rhn/allowed-actions/script/run</screen>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<simpara>When the setup is complete, refresh the page to view the text boxes for remote commands.
Identify a specific user, group, and timeout period, and the script to run.
Select a date and time to execute the command, then click <guimenu>Schedule</guimenu>
 or add the remote command to an action chain.
For further information on action chains, refer to <xref linkend="_ref.webui.schedule.chains"/>.</simpara>
</section>
<section xml:id="_s5_sm_system_details_react"><title>System Details &gt;  Details  &gt;  Reactivation  [Management]</title><simpara><indexterm>
<primary>reactivating</primary><secondary>systems</secondary>
</indexterm>
<indexterm>
<primary>systems</primary>
</indexterm></simpara>
<simpara>Reactivation keys include this system&#8217;s ID, history, groups, and channels.
This key can then be used only once with the <command>rhnreg_ks</command> command line utility to re-register this system and regain all &susemgr;
 settings.
Unlike typical activation keys, which are not associated with a specific system ID, keys created here do not show up within the <guimenu>Activation Keys</guimenu>
 page.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_reactivation.png" width="80%"/>
</imageobject>
<textobject><phrase>system details reactivation</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Reactivation keys can be combined with activation keys to aggregate the settings of multiple keys for a single system profile.
For example:</simpara>
<screen>rhnreg_ks --server=`server-url`\
  --activationkey=`reactivation-key`,`activationkey`--force</screen>
<warning>
<simpara>When autoinstalling a system with its existing &susemgr;
profile, the profile uses the system-specific activation key created here to re-register the system and return its other &susemgr;
settings.
For this reason, you should not regenerate, delete, or use this key (with <command>rhnreg_ks</command>) while a profile-based autoinstallation is in progress.
If you do, the autoinstallation will fail.</simpara>
</warning>
</section>
<section xml:id="_s5_sm_system_details_hardware"><title>System Details &gt;  Details  &gt;  Hardware</title><simpara><indexterm>
<primary>hardware profile</primary><secondary>Updating on server</secondary>
</indexterm>
<indexterm>
<primary>Updating on server</primary>
</indexterm></simpara>
<simpara>This subtab provides information about the system, such as networking, BIOS, memory, and other devices.
This only works if you included the hardware profile during registration.
If the hardware profile looks incomplete or outdated, click the <guimenu>Schedule Hardware Refresh</guimenu>
 button.
The next time the &susemgr;
 Daemon (<literal role="systemitem">rhnsd</literal>
) connects to &susemgr;
, it will update your system profile with the latest hardware information.</simpara>
</section>
<section xml:id="_s5_sm_system_details_migrate"><title>System Details &gt;  Details  &gt;  Migrate</title><simpara>This subtab provides the option to migrate systems between organizations.
Select an <guimenu>Organization Name</guimenu>
 and click <guimenu>Migrate System</guimenu>
 to initiate the migration.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_migrate.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional migrate</phrase></textobject>
</mediaobject>
</informalfigure>
<note>
<simpara>Defined system details such as channel assignments, system group membership, custom data value, configuration channels, reactivation keys, and snapshots will be dropped from the system configuration after the migration.</simpara>
</note>
</section>
<section xml:id="_s5_sm_system_details_notes"><title>System Details &gt;  Details  &gt;  Notes</title><simpara><indexterm>
<primary>navigation</primary><secondary>about systems</secondary>
</indexterm>
<indexterm>
<primary>about systems</primary>
</indexterm></simpara>
<simpara>This subtab provides a place to create notes about the system.
To add a new note, click the <guimenu>Create Note</guimenu>
 link, type a subject and write your note, then click the <guimenu>Create</guimenu>
 button.
To modify a note, click its subject in the list of notes, make your changes, and click the <guimenu>Update</guimenu>
 button.
To remove a note, click its subject in the list of notes then click the <guimenu>delete note</guimenu>
 link.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_notes.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional notes</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_s5_sm_system_details_info"><title>System Details &gt;  Details  &gt;  Custom Info</title><simpara><indexterm>
<primary>changing e-mail address</primary><secondary>about systems</secondary>
</indexterm>
<indexterm>
<primary>about systems</primary>
</indexterm></simpara>
<simpara>This subtab provides completely customizable information about the system.
Unlike <guimenu>Notes</guimenu>
, <guimenu>Custom Info</guimenu>
 is structured, formalized, and can be searched.
Before you can provide custom information about a system, you must have <guimenu>Custom Information Keys</guimenu>
.
To create such keys, click <guimenu>Custom System Info</guimenu>
 in the left bar.
For more information, see <xref linkend="_ref.webui.systems.cust_info"/>.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_custom_info.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional custom info</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>When you have created one or more keys, you may assign values for this system by selecting the <guimenu>Create Value</guimenu>
 link.
Click the name of the key in the resulting list and enter a value for it in the <guimenu>Description</guimenu>
 field, then click the <guimenu>Update Key</guimenu>
 button.</simpara>
</section>
<section xml:id="_s5_sm_system_details_proxy"><title>System Details &gt;  Details  &gt;  Proxy  [Proxy]</title><simpara>This tab is only available for &susemgrproxy;
systems.
The tab lists all clients registered with the selected &susemgrproxy;
server.</simpara>
</section>
</section>
<section xml:id="_s4_sm_system_details_channels"><title>System Details &gt;  Software</title><simpara>This tab and its subtabs allow you to manage the software on the system: patches (errata), packages and package profiles, software channel memberships, and migrations.</simpara>
<section xml:id="_s4_sm_system_details_errata"><title>System Details  &gt;  Software  &gt;  Patches</title><simpara>This subtab contains a list of patch (errata) alerts applicable to the system.
Refer to <xref linkend="_ref.webui.intro.patch_alerts"/> for meanings of the icons on this tab.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_software_patches.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional software patches</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>To apply updates, select them and click the <guimenu>Apply Patches</guimenu>
 button.
Double-check the updates to be applied on the confirmation page, then click the <guimenu>Confirm</guimenu>
 button.
The action is added to the <guimenu>Pending Actions</guimenu>
 list under <guimenu>Schedule</guimenu>
.
Patches that have been scheduled cannot be selected for update.
Instead of a check box there is a clock icon.
Click the clock to see the <guimenu>Action Details</guimenu>
 page.</simpara>
<simpara>A <guimenu>Status</guimenu>
 column in the patches table shows whether an update has been scheduled.
Possible values are: None, Pending, Picked Up, Completed, and Failed.
This column displays only the latest action related to a patch.
For example, if an action fails and you reschedule it, this column shows the status of the patch as <literal>Pending</literal> with no mention of the previous failure.
Clicking a status other than <literal>None</literal> takes you to the <guimenu>Action Details</guimenu>
 page.
This column corresponds to the one on the <guimenu>Affected Systems</guimenu>
 tab of the <guimenu>Patch Details</guimenu>
 page.</simpara>
</section>
<section xml:id="_s4_sm_system_details_packages"><title>System Details &gt;  Software  &gt;  Packages</title><simpara><indexterm>
<primary>package installation</primary><secondary>Updating on server</secondary>
</indexterm>
<indexterm>
<primary>Updating on server</primary>
</indexterm></simpara>
<simpara>Manage the software packages on the system.
Most of the following actions can also be performed via action chains.
For further information on action chains, refer to <xref linkend="_ref.webui.schedule.chains"/>.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_software_packages.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional software packages</phrase></textobject>
</mediaobject>
</informalfigure>
<warning>
<simpara>When new packages or updates are installed on the client via &susemgr;
, any licenses (EULAs) requiring agreement before installation are automatically accepted.</simpara>
</warning>
<variablelist>
<varlistentry>
<term>Packages</term>
<listitem>
<simpara>The default display of the <guimenu>Packages</guimenu>
tab describes the options available and provides the means to update your package list.
To update or complete a potentially outdated list, possibly because of the manual installation of packages, click the <guimenu>Update Package List</guimenu>
button in the bottom right-hand corner of this page.
The next time the &susemgr;
daemon (<literal role="systemitem">rhnsd</literal>
) connects to &susemgr;
, it updates your system profile with the latest list of installed packages.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>List / Remove</term>
<listitem>
<simpara>Lists installed packages and enables you to remove them.
View and sort packages by name or the date they were installed on the system.
Search for the wanted packages by typing its name in the <guimenu>Filter by Package Name</guimenu>
text box, or by clicking the letter or number corresponding to the first character of the package name.
Click a package name to view its <guimenu>Package Details</guimenu>
page.
To delete packages from the system, select their check boxes and click the <guimenu>Remove Packages</guimenu>
button on the bottom right-hand corner of the page.
A confirmation page appears with the packages listed.
Click the <guimenu>Confirm</guimenu>
button to remove the packages.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Upgrade</term>
<listitem>
<simpara>Displays a list of packages with newer versions available in the subscribed channels.
click the latest package name to view its <guimenu>Package Details</guimenu>
page.
To upgrade packages immediately, select them and click the <guimenu>Upgrade Packages</guimenu>
button.
Any EULAs will be accepted automatically.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Install</term>
<listitem>
<simpara>Install new packages on the system from the available channels.
Click the package name to view its <guimenu>Package Details</guimenu>
page.
To install packages, select them and click the <guimenu>Install Selected Packages</guimenu>
button.
EULAs are automatically accepted.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Verify</term>
<listitem>
<simpara>Validates the packages installed on the system against its RPM database.
This is the equivalent of running <command>rpm -V</command>.
The metadata of the system&#8217;s packages are compared with information from the database, such as file checksum, file size, permissions, owner, group and type.
To verify a package or packages, select them, click the <guimenu>Verify Selected Packages</guimenu>
button, and confirm.
When the check is finished, select this action in the <guimenu>History</guimenu>
subtab under <guimenu>Events</guimenu>
to see the results.</simpara>
</listitem>
</varlistentry>
</variablelist>
<variablelist xml:id="_s1_package_lock">
<varlistentry>
<term>Lock</term>
<listitem>
<simpara>Locking a package prevents modifications like removal or update of the package.
Since locking and unlocking happens via scheduling requests, locking might take effect with some delay.
If an update happens before then, the lock will have no effect.
Select the packages you want to lock.
If locking should happen later, select the date and time above the <guimenu>Request Lock</guimenu>
button, then click it.
A small lock icon marks locked packages.
To unlock, select the package and click <guimenu>Request Unlock</guimenu>
, optionally specifying the date and time for unlocking to take effect.</simpara>
<note>
<simpara>This feature only works if Zypper is used as the package manager.
On the target machine the <command>zypp-plugin-spacewalk</command> package must be installed (version 0.9.x or higher).</simpara>
</note>
</listitem>
</varlistentry>
</variablelist>
<variablelist xml:id="_s1_package_profiles">
<varlistentry>
<term>Profiles</term>
<listitem>
<simpara>Compare installed packages with the package lists in stored profiles and other systems.
Select a stored profile from the drop-down box and click the <guimenu>Compare</guimenu>
button.
To compare with packages installed on a different system, select the system from the associated drop-down box and click the <guimenu>Compare</guimenu>
button.
To create a stored profile based on the existing system, click the <guimenu>Create System Profile</guimenu>
button, enter any additional information you want, and click the <guimenu>Create Profile</guimenu>
button.
These profiles are kept within the <guimenu>Stored Profiles</guimenu>
page linked from the left bar.</simpara>
<simpara>When installed packages have been compared with a profile, customers have the option to synchronize the selected system with the profile.
All changes apply to the system not the profile.
Packages might get deleted and additional packages installed on the system.
To install only specific packages, click the respective check boxes in the profile.
To remove specific packages installed on the system, select the check boxes of these packages showing a difference of <guimenu>This System Only</guimenu>
.
To completely synchronize the system&#8217;s packages with the compared profile, select the master check box at the top of the column.
Then click the <guimenu>Sync Packages to</guimenu>
button.
On the confirmation screen, review the changes, select a time frame for the action, and click the <guimenu>Schedule Sync</guimenu>
button.</simpara>
<simpara>You can use a stored profile as a template for the files to be installed on an autoinstalled system; see <xref linkend="_s4_system_ks_soft_pkg_profile"/>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Non Compliant</term>
<listitem>
<simpara>Lists packages that are installed on this system and are not present in any of its channels.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_s5_sm_system_details_channels_software"><title>System Details &gt;  Software  &gt;  Software Channels</title><simpara>Software channels provide a well-defined method to determine which packages should be available to a system for installation or upgrade based on its operating systems, installed packages, and functionality.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_software_system_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional software system channels</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Click the chain icon right to a channel name to view its <guimenu>Channel Details</guimenu>
 page.
To change the base software channel the system is subscribed to select a different base channel in the left selection box.</simpara>
<simpara>To modify the child channels associated with this system, in the right selection box use the check boxes left to the channel names.
If you enable <guimenu>include recommended</guimenu>
, recommended child channels are automatically selected for subscription.
Starting with &sle;
 15, child channels can depend on each other.
In the channel subscription you can see the dependencies by hovering with a mouse on a child channel name.
Selecting a channel that depends on another channel will select this channel, too; unselecting a channel on which some other channels depend will also unselect those channels.</simpara>
<simpara>When done click <guimenu>Next</guimenu>
 to schedule the Software Channel Change action.
Then click <guimenu>Confirm</guimenu>
.</simpara>
<note>
<title>Changing the Channels Is Now an Action</title>
<simpara>Since the 3.1 maintenance update (2018) changing the channels is an action that can be scheduled like any other action.
Earlier channel changes were applied immediately.</simpara>
</note>
<simpara>For more information about channel management, see <xref linkend="_ref.webui.channels.software"/>.</simpara>
</section>
<section xml:id="_s5_sm_system_details_sp_migration"><title>System Details &gt;  Software  &gt;  SP Migration</title><simpara>Service Pack Migration (SP Migration) allows you to upgrade a system from one service pack to another.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_software_sp_migration.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional software sp migration</phrase></textobject>
</mediaobject>
</informalfigure>
<warning>
<simpara>During migration &susemgr;
automatically accepts any required licenses (EULAs) before installation.</simpara>
</warning>
<simpara>Beginning with SLE 12 &suse;
supports service pack skipping, it is now possible to migrate from for example, SLE 12 to SLE 12 SP2.
Note that SLE 11 may only be migrated step by step and individual service packs should not be skipped.
Supported migrations include any of the following:</simpara>
<itemizedlist>
<listitem>
<para>SLE 11 &gt; SLE 11 SP1 &gt; SLE 11 SP2 &gt; SLE 11 SP3 &gt; SLE 11 SP4</para>
</listitem>
<listitem>
<para>SLE 12 &gt; SLE 12 SP1 &gt; SLE 12 SP2</para>
</listitem>
<listitem>
<para>SLE 12 &gt; SLE 12 SP2 (skipping SLE 12 SP1)</para>
</listitem>
</itemizedlist>
<warning>
<title>Migrating from an Earlier Version of SLES</title>
<simpara>It is not possible to migrate, for example, from SLE 11 to SLE 12 using this tool.
You must use autoYaST to perform a migration on this level.</simpara>
</warning>
<warning>
<title>Rollback Not Possible</title>
<simpara>The migration feature does not cover any rollback functionality.
When the migration procedure is started, rolling back is not possible.
Therefore it is recommended to have a working system backup available for an emergency.</simpara>
</warning>
<orderedlist numeration="arabic">
<title>Procedure: Performing a Migration</title>
<listitem>
<para>From the <guimenu>Systems Overview</guimenu> page, select a client.</para>
</listitem>
<listitem>
<para>Select the <guimenu>Software</guimenu> tab then the <guimenu>SP Migration</guimenu> tab.</para>
</listitem>
<listitem>
<para>Select your target migration path and click <guimenu>Select Channels</guimenu> .</para>
</listitem>
<listitem>
<para>On the <guimenu>Service Pack Migration - Channels</guimenu> view select the correct base channel, including <literal>Mandatory Child Channels</literal> and any additional <literal>Optional Child Channels</literal>. Select <guimenu>Schedule Migration</guimenu> when your channels have been configured properly.</para>
</listitem>
</orderedlist>
</section>
</section>
<section xml:id="_s5_sm_system_details_channels_config"><title>System Details &gt;  Configuration  [Management]</title><simpara>This tab and its subtabs assist in managing the configuration files associated with the system.
These configuration files may be managed solely for the current system or distributed widely via a Configuration Channel.
The following sections describe these and other available options on the <menuchoice><guimenu>System Details</guimenu> <guimenuitem>Configuration</guimenuitem></menuchoice>
 subtabs.</simpara>
<note>
<simpara>To manage the configuration of a system, it must have the latest <package>rhncfg*</package>
 packages installed.
Refer to <xref linkend="_ref.webui.config.preparing"/> for instructions on enabling and disabling scheduled actions for a system.</simpara>
</note>
<simpara>This section is available to normal users with access to systems that have configuration management enabled.
Like software channels, configuration channels store files to be installed on systems.
While software updates are provided by SCC, configuration files are managed solely by you.
Also unlike with software packages, various versions of configuration files may prove useful to a system at any time.
Only the latest version can be deployed.</simpara>
<section xml:id="_s5_sdc_configuration_overview"><title>System Details  &gt;  Configuration  &gt;  Overview</title><simpara>This subtab provides access to the configuration files of your system and to the most common tasks used to manage configuration files.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_configuration_overview.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional configuration overview</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>In the <guimenu>Configuration Overview</guimenu>
, click the <guimenu>Add</guimenu>
 links to add files, directories, or symbolic links.
Here you also find shortcuts to perform any of the common configuration management tasks listed on the right of the screen by clicking one of the links under <guimenu>Configuration Actions</guimenu>
.</simpara>
</section>
<section xml:id="_s5_sdc_configuration_mngfiles"><title>System Details &gt;  Configuration  &gt;  View/Modify Files</title><simpara>This subtab lists all configuration files currently associated with the system.
These are sorted via subtabs in centrally and locally managed files and a local sandbox for files under development.</simpara>
<simpara>Using the appropriate buttons on a subtab, you can copy from one to the other subtabs.</simpara>
<variablelist>
<varlistentry>
<term>Centrally-Managed Files</term>
<listitem>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_configuration_view_mod_central_paths.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional configuration view mod central paths</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Centrally-managed configuration files are provided by global configuration channels.
Determine which channel provides which file by examining the <guimenu>Provided By</guimenu>
column below.
Some of these centrally-managed files may be overridden by locally-managed files.
Check the <guimenu>Overridden By</guimenu>
column to find out if any files are overridden, or click <guimenu>Override this file</guimenu>
to provide such an overriding file.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Locally-Managed Files</term>
<listitem>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_configuration_view_mod_local_paths.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional configuration view mod local paths</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Locally-managed configuration files are useful for overriding centrally-managed configuration profiles that cause problems on particular systems.
Also, locally-managed configuration files are a method by which system group administrators who do not have configuration administration privileges can manage configuration files on the machines they can manage.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Local Sandbox</term>
<listitem>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_configuration_view_mod_sandbox_paths.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional configuration view mod sandbox paths</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>In the sandbox you can store configuration files under development.
You can promote files from the sandbox to a centrally-managed configuration channel using <guimenu>Copy Latest to Central Channel</guimenu>
.
After files in this sandbox have been promoted to a centrally-managed configuration channel, you can deploy them to other systems.</simpara>
<simpara>Use <guimenu>Copy Latest to System Channel</guimenu>
to install a configuration on the local system only.
When done, the file will end up on the <guimenu>Locally-Managed Files</guimenu>
subtab.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_s5_sdc_configuration_add_files"><title>System Details &gt;  Configuration  &gt;  Add Files</title><simpara>To upload, import, or create new configuration files, click <guimenu>Add Files</guimenu>
.</simpara>
<variablelist>
<varlistentry>
<term>Upload File</term>
<listitem>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_configuration_add_files_upload.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional configuration add files upload</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>To upload a configuration file from your local machine, browse for the upload file, specify whether it is a text or binary file, enter <guimenu>Filename/Path</guimenu>
and user and group ownership.
Specific file permissions can be set.
When done, click <guimenu>Upload Configuration File</guimenu>
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Import Files</term>
<listitem>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_configuration_add_files_import.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional configuration add files import</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Via the <guimenu>Import Files</guimenu>
tab, you can add files from the system you have selected before and add it to the sandbox of this system.
Files will be imported the next time <command>rhn_check</command> runs on the system.
To deploy these files or override configuration files in global channels, copy this file into your local override channel after the import has occurred.</simpara>
<simpara>In the text box under <guimenu>Import New Files</guimenu>
enter the full path of any files you want import into &susemgr;
or select deployable configuration files from the <guimenu>Import Existing Files</guimenu>
list.
When done, click <guimenu>Import Configuration Files</guimenu>
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Create File</term>
<listitem>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_configuration_add_files_create.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional configuration add files create</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Under <guimenu>Create File</guimenu>
, you can directly create the configuration file from scratch.
Select the file type, specify the path and file name, where to store the file, plus the symbolic link target file name and path.
Ownership and permissions and macro delimiters need to be set.
For more information on using macros, see <xref linkend="_s3_sm_file_macros"/>.
In the <guimenu>File Contents</guimenu>
text box, type the configuration file.
Select the type of file you are creating from the drop-down box.
Possible choices are Shell, Perl, Python, Ruby and XML.
When done, click <guimenu>Create Configuration File</guimenu>
.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_s5_sdc_configuration_deploy_files"><title>System Details &gt;  Configuration  &gt;  Deploy Files</title><simpara>Under <guimenu>Deploy Files</guimenu>
 you find all files that can be deployed on the selected system.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_configuration_deploy_file.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional configuration deploy file</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Files from configuration channels with a higher priority take precedence over files from configuration channels with a lower priority.</simpara>
</section>
<section xml:id="_s5_sdc_configuration_diff"><title>System Details &gt;  Configuration  &gt;  Compare Files</title><simpara>This subtab compares a configuration file stored on the &susemgr;
 with the file stored on the client.
(It does not compare versions of the same file stored in different channels.)</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_configuration_diff_file.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional configuration diff file</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Select the files to be compared, click the <guimenu>Compare Files</guimenu>
 button, select a time to perform the diff, and click the <guimenu>Schedule Compare</guimenu>
 button to confirm.</simpara>
<simpara>To watch progress, see <xref linkend="_s4_sm_system_details_events"/>.
After the diff has been performed, go to <guimenu>Recent Events</guimenu>
 in <xref linkend="_s5_sdc_configuration_overview"/> to see the results.</simpara>
</section>
<section xml:id="_s5_sdc_configuration_channels"><title>System Details  &gt;  Configuration  &gt;  Manage Configuration Channels</title><simpara>This subtab allows you to subscribe to and rank configuration channels associated with the system, lowest first.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_configuration_config_channel_list.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional configuration config channel list</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>The <guimenu>List/Unsubscribe from Channels</guimenu>
 subtab contains a list of the system&#8217;s configuration channel subscriptions.
Click the check box next to the Channel and click <guimenu>Unsubscribe</guimenu>
 to remove the subscription to the channel.</simpara>
<simpara>The <guimenu>Subscribe to Channels</guimenu>
 subtab lists all available configuration channels.
To subscribe to a channel, select the check box next to it and click <guimenu>Continue</guimenu>
.
To subscribe to all configuration channels, click <guimenu>Select All</guimenu>
 and click <guimenu>Continue</guimenu>
.
The <guimenu>View/Modify Rankings</guimenu>
 page automatically loads.</simpara>
<simpara>The <guimenu>View/Modify Rankings</guimenu>
 subtab allows users to set the priority with which files from a particular configuration channel are ranked.
The higher the channel is on the list, the more its files take precedence over files on lower-ranked channels.
For example, the higher-ranked channel may have an <filename>httpd.conf</filename>
 file that will take precedence over the same file in a lower-ranked channel.</simpara>
</section>
</section>
<section xml:id="_s4_sm_system_details_kick"><title>System Details &gt;  Provisioning  [Management]</title><simpara>The <guimenu>Provisioning</guimenu>
 tab and its subtabs allow you to schedule and monitor &ay;
 or Kickstart installations and to restore a system to its previous state.</simpara>
<note>
<title>Available for Clients Using the "`Traditional`"Method</title>
<simpara>The note <guimenu>Provisioning</guimenu>
 tab will be available when adding a client using the <quote>traditional</quote>
 method (system type <literal>management</literal>). Using Salt the <guimenu>Provisioning</guimenu>
 tab will not be available (system type <literal>salt</literal>).</simpara>
</note>
<simpara>&ay;
is a &sle;
and Kickstart is a Red Hat utility&mdash;
both allow you to automate the reinstallation of a system.
Snapshot rollbacks provide the ability to revert certain changes on the system.
You can roll back a set of RPM packages, but rolling back across multiple update levels is not supported.
Both features are described in the sections that follow.</simpara>
<section xml:id="_s5_sdc_provisioning_kickstart"><title>System Details  &gt;  Provisioning  &gt;  Autoinstallation</title><simpara>The <guimenu>Schedule</guimenu>
 subtab allows you to configure and schedule an autoinstallation for this system.
For background information about autoinstallation, see <xref linkend="_ref.webui.systems.autoinst"/>.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_provisioning_schedule_wizard.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional provisioning schedule wizard</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>In the <guimenu>Schedule</guimenu>
 subtab, schedule the selected system for autoinstallation.
Choose from the list of available profiles.</simpara>
<note>
<simpara>You must first create a profile before it appears on this subtab.
If you have not created any profiles, refer to <xref linkend="_ref.webui.systems.autoinst.profiles.create"/> before scheduling an autoinstallation for a system.</simpara>
</note>
<simpara>To alter autoinstallation settings, click the <guimenu>Advanced Configuration</guimenu>
 button.
Configure the network connection and post-installation networking information.
You can aggregate multiple network interfaces into a single logical "bonded" interface.
In <guimenu>Kernel Options</guimenu>
 specify kernel options to be used during autoinstallation. <guimenu>Post Kernel Options</guimenu>
 are used after the installation is complete and the system is booting for the first time.
Configure package profile synchronization.</simpara>
<simpara>Select a time for the autoinstallation to begin and click <guimenu>Schedule Autoinstall and Finish</guimenu>
 for all changes to take effect and to schedule the autoinstallation.</simpara>
<simpara>Alternatively, click <guimenu>Create PXE Installation Configuration</guimenu>
 to create a Cobbler system record.
The selected autoinstallation profile will be used to automatically install the configured distribution next time that particular system boots from PXE.
In this case &susemgr;
 and its network must be properly configured to allow boot using PXE.</simpara>
<note>
<simpara>Any settings changed on the <guimenu>Advanced Configuration</guimenu>
 page will be ignored when creating a PXE installation configuration for Cobbler.</simpara>
</note>
<simpara>The <guimenu>Variables</guimenu>
 subtab can be used to create Kickstart variables, which substitute values in Kickstart files.
To define a variable, create a name-value pair (<replaceable>name/value</replaceable>) in the text box.</simpara>
<simpara>For example, to &kickstart;
a system that joins the network of a specific organization (for example the Engineering department) you can create a profile variable to set the IP address and the gateway server address to a variable that any system using that profile will use.
Add the following line to the <guimenu>Variables</guimenu>
 text box:</simpara>
<screen>IPADDR=192.168.0.28
GATEWAY=192.168.0.1</screen>
<simpara>To use the system variable, use the name of the variable in the profile instead of the value.
For example, the <option>network</option> portion of a &kickstart;
 file could look like the following:</simpara>
<screen>network --bootproto=static --device=eth0 --onboot=on --ip=$IPADDR \
  --gateway=$GATEWAY</screen>
<simpara>The <option>$IPADDR</option> will be <literal>192.168.0.28</literal>, and the <option>$GATEWAY</option> will be <literal>192.168.0.1</literal>.</simpara>
<note>
<simpara>There is a hierarchy when creating and using variables in &kickstart;
files.
System &kickstart;
variables take precedence over profile variables, which in turn take precedence over distribution variables.
Understanding this hierarchy can alleviate confusion when using variables in &kickstart;
s.</simpara>
</note>
<simpara>Using variables are one part of the larger Cobbler infrastructure for creating templates that can be shared between multiple profiles and systems.
For more information about Cobbler and &kickstart;
templates, refer to <xref linkend="_advanced.topics.cobbler"/>.</simpara>
</section>
<section xml:id="_s5_sdc_provisioning_powermgnt"><title>System Details  &gt;  Provisioning  &gt;  Power Management</title><simpara>&susemgr;
allows you to power on, off, and reboot systems via the IPMI protocol if the systems are IPMI-enabled.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_provisioning_power_management.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional provisioning power management</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>You need a fully patched &susemgr;
installation.
To use any power management functionality, IPMI configuration details must be added to &susemgr;
.
First select the target system on the systems list, then select <menuchoice><guimenu>Provisioning</guimenu> <guimenuitem>Power
     Management</guimenuitem></menuchoice>
.
On the displayed configuration page, edit all required fields (marked with a red asterisk) and click <guimenu>Save</guimenu>
.</simpara>
<simpara>Systems can be powered on, off, or rebooted from the configuration page via corresponding buttons.
Note that any configuration change is also saved in the process.
The <guimenu>Save and Get Status</guimenu>
 button can also be used to query for the system&#8217;s power state.
If configuration details are correct, a row is displayed with the current power status ("on" or "off"). If a power management operation succeeds on a system, it will also be noted in its <menuchoice><guimenu>Events</guimenu> <guimenuitem>History</guimenuitem></menuchoice>
 subtab.</simpara>
<simpara>Power management functionalities can also be used from the system set manager to operate on multiple systems at the same time.
Specifically, you can change power management configuration parameters or apply operations (power on, off, reboot) to multiple systems at once:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Add the respective systems to the system set manager as described in <xref linkend="_ref.webui.systems.ssm"/>.</para>
</listitem>
<listitem>
<para>Click <guimenu>Manage</guimenu> (in the upper right corner), then menu: Provisioning[Power Management Configuration] to change one or more configuration parameters for all systems in the set. Note that any field left blank will not alter the configuration parameter in selected systems.</para>
</listitem>
<listitem>
<para>When all configuration parameters are set correctly, click <guimenu>Manage</guimenu> , then <menuchoice><guimenu>Provisioning</guimenu> <guimenuitem>Power Management Operations</guimenuitem></menuchoice> to power on, off or reboot systems from the set.</para>
</listitem>
</orderedlist>
<simpara>To check that a power operation was executed correctly, click <menuchoice><guimenu>System Set Manager</guimenu> <guimenuitem>Status</guimenuitem></menuchoice>
 on the left-hand menu, then click the proper line in the list.
This will display a new list with systems to which the operation was applied.
If errors prevent correct execution, a brief message with an explanation will be displayed in the <guimenu>Note</guimenu>
 column.</simpara>
<simpara>This feature uses Cobbler power management, thus a Cobbler system record is automatically created at first use if it does not exist already.
In that case, the automatically created system record will not be bootable from the network and will reference a dummy image.
This is needed because Cobbler does not currently support system records without profiles or images.
The current implementation of Cobbler power management uses the fence-agent tools to support multiple protocols besides IPMI.
Those are not supported by &susemgr;
but can be used by adding the fence agent names as a comma-separated list to the <command>java.power_management.types</command> configuration parameter.</simpara>
</section>
<section xml:id="_s4_sm_system_details_shots"><title>System Details  &gt;  Provisioning  &gt;  Snapshots</title><simpara>Snapshots enable you to roll back the system&#8217;s package profile, configuration files, and &susemgr;
settings.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_provisioning_snapshot_index.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional provisioning snapshot index</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Snapshots are always captured automatically after an action takes place.
The <guimenu>Snapshots</guimenu>
 subtab lists all snapshots for the system, including the reason the snapshot was taken, the time it was taken, and the number of tags applied to each snapshot.</simpara>
<note>
<title>Technical Details</title>
<itemizedlist>
<listitem>
<para>A snapshot is always taken <emphasis>after</emphasis> a successful operation and not before, as you might expect. One consequence of taking snapshots after the action is that, to undo action number X, then you must roll back to the snapshot number X-1.</para>
</listitem>
<listitem>
<para>It is possible to disable snapshotting globally (in <filename>rhn.conf</filename> set <literal>enable_snapshots = 0</literal>), but it is enabled by default. No further fine tuning is possible.</para>
</listitem>
</itemizedlist>
</note>
<simpara>To revert to a previous configuration, click the <guimenu>Reason</guimenu>
 for the snapshot and review the potential changes on the provided subtabs, starting with <guimenu>Rollback</guimenu>
.</simpara>
<important>
<title>Unsupported Rollback Scenarios</title>
<simpara>Snapshot roll backs support the ability to revert <emphasis>certain</emphasis> changes to the system, but not in every scenario.
For example, you can roll back a set of RPM packages, but rolling back across multiple update levels is not supported.</simpara>
<simpara>Rolling back an SP migration is also not supported.</simpara>
</important>
<simpara>Each subtab provides the specific changes that will be made to the system during the rollback:</simpara>
<itemizedlist>
<listitem>
<para>group memberships,</para>
</listitem>
<listitem>
<para>channel subscriptions,</para>
</listitem>
<listitem>
<para>installed packages,</para>
</listitem>
<listitem>
<para>configuration channel subscriptions,</para>
</listitem>
<listitem>
<para>configuration files,</para>
</listitem>
<listitem>
<para>snapshot tags.</para>
</listitem>
</itemizedlist>
<simpara>When satisfied with the reversion, return to the <guimenu>Rollback</guimenu>
 subtab and click the <guimenu>Rollback to Snapshot</guimenu>
 button.
To see the list again, click <guimenu>Return to snapshot list</guimenu>
.</simpara>
<note>
<title>Background Information About Snapshots</title>
<simpara>There is no maximum number of snapshots that &susemgr;
will keep, thus related database tables will grow with system count, package count, channel count, and the number of configuration changes over time.
Installations with more than a thousand systems should consider setting up a recurring cleanup script via the API or disabling this feature altogether.</simpara>
<simpara>There is currently no integrated support for <quote>rotated
      snapshots</quote>
.</simpara>
<simpara>Snapshot rollback gets scheduled like any other action, this means the rollback usually does not happen immediately.</simpara>
</note>
</section>
<section xml:id="_s5_sm_system_details_shots_tags"><title>System Details &gt;  Provisioning  &gt;  Snapshot Tags</title><simpara>Snapshot tags provide a means to add meaningful descriptions to your most recent system snapshot.
This can be used to indicate milestones, such as a known working configuration or a successful upgrade.</simpara>
<simpara>To tag the most recent snapshot, click <guimenu>Create System Tag</guimenu>
, enter a descriptive term in the <guimenu>Tag name</guimenu>
 field, and click the <guimenu>Tag Current Snapshot</guimenu>
 button.
You may then revert using this tag directly by clicking its name in the Snapshot Tags list.
To delete tags, select their check boxes, click <guimenu>Remove Tags</guimenu>
, and confirm the action.</simpara>
</section>
</section>
<section xml:id="_s4_sm_system_details_virtualization"><title>System Details &gt;  Virtualization</title><simpara>This tab allows you to create a new virtual guest on a host system or change the status of virtual guests.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_provisioning_snapshot_index.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional provisioning snapshot index</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>The <guimenu>Virtualization</guimenu>
 tab has two subtabs, <guimenu>Details</guimenu>
 and <guimenu>Kickstart</guimenu>
.
These tabs appear the same for both virtual hosts and guests, but the functionality only makes sense for virtual hosts.
It is not possible to create a guest system that runs on another guest system.</simpara>
<bridgehead xml:id="_sdc_virt_host_place" renderas="sect4">System Details &gt; Virtualization&gt; Details</bridgehead>
<simpara><guimenu>Details</guimenu>
 is the default tab.
For host systems, it presents a table of the host system&#8217;s virtual guests.
For each guest system, the following information is provided:</simpara>
<variablelist>
<varlistentry>
<term><guimenu>Status</guimenu></term>
<listitem>
<simpara>This field indicates whether the virtual system is running, paused, stopped, or has crashed.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Updates</guimenu></term>
<listitem>
<simpara>This field indicates whether patches (errata) applicable to the guest have yet to be applied.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Base Software Channel</guimenu></term>
<listitem>
<simpara>This field indicates the Base Channel to which the guest is subscribed.</simpara>
</listitem>
</varlistentry>
</variablelist>
<note>
<simpara>If a guest system has not registered with &susemgr;
, this information appears as plain text in the table.</simpara>
</note>
<simpara>If you have System Group Administrator responsibilities assigned for your guest systems, a user might see the message <guimenu>You do not have permission to access this system</guimenu>
 in the table.
This is because it is possible to assign virtual guests on a single host to multiple System Group Administrators.
Only users that have System Group Administrator privileges on the host system may create new virtual guests.</simpara>
</section>
<section xml:id="_s4_sm_system_details_groups"><title>System Details &gt;  Groups</title><simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>assigning and removing</secondary>
</indexterm>
<indexterm>
<primary>assigning and removing</primary>
</indexterm></simpara>
<simpara>The <guimenu>Groups</guimenu>
 tab and its subtabs allow you to manage the system&#8217;s group memberships.</simpara>
<section xml:id="_s5_sm_system_details_groups_list"><title>System Details  &gt;  Groups  &gt;  List/Leave</title><simpara>This subtab lists groups to which the system belongs and enables you to cancel membership.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_list_groups.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional list groups</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Only System Group Administrators and &susemgr;
Administrators can remove systems from groups.
Non-admins see a <guimenu>Review this system&#8217;s group membership</guimenu>
 page.
To remove the system from one or more groups, select the respective check boxes of these groups and click the <guimenu>Leave Selected Groups</guimenu>
 button.
To see the <guimenu>System Group Details</guimenu>
 page, click the group&#8217;s name.
Refer to <xref linkend="_ref.webui.systems.systemgroups.details"/> for more information.</simpara>
</section>
<section xml:id="_s5_sm_system_details_groups_join"><title>System Details &gt;  Groups  &gt;  Join</title><simpara>Lists groups that the system can be subscribed to.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_add_group.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional add group</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Only System Group Administrators and &susemgr;
Administrators can add a system to groups.
Non-admins see a <guimenu>Review this system&#8217;s group membership</guimenu>
 page.
To add the system to groups, select the groups' check boxes and click the <guimenu>Join Selected Groups</guimenu>
 button.</simpara>
</section>
</section>
<section xml:id="_s4_sm_system_details_audit"><title>System Details &gt;  Audit  [Management]</title><simpara>Via the <guimenu>Audit</guimenu>
 tab, view OpenSCAP scan results or schedule scans.
For more information on auditing and OpenSCAP, refer to <xref linkend="_ref.webui.audit"/>.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_list_audit.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional list audit</phrase></textobject>
</mediaobject>
</informalfigure>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_schedule_audit.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional schedule audit</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_s4_sm_system_details_states"><title>System Details &gt;  States  [Salt]</title><simpara><indexterm>
<primary>system states</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>System states</secondary>
</indexterm>
<indexterm>
<primary>System states</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>Web Interface</primary><secondary>System States Custom</secondary>
</indexterm>
<indexterm>
<primary>System States Custom</primary>
</indexterm></simpara>
<simpara>Overview of <guimenu>States</guimenu>
 subtabs.</simpara>
<note>
<simpara>The following subtabs are only available for Salt minions.</simpara>
</note>
<section xml:id="_system_details_states_packages"><title>System Details &gt;  States  &gt;  Packages</title><simpara><guimenu>Search and install</guimenu>
 packages then assign them with a pre-defined state for a selected machine.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_salt_states_packages.png" width="80%"/>
</imageobject>
<textobject><phrase>system details salt states packages</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Here you can search for a specific package, for example <package>vim</package>
.
Then with the drop-down box activate <guimenu>Unmanaged</guimenu>
, <guimenu>Installed</guimenu>
, or <guimenu>Removed</guimenu>
.
Select <guimenu>Latest</guimenu>
 or <guimenu>Any</guimenu>
 from the drop-down box. <guimenu>Latest</guimenu>
 applies the latest package version available while <guimenu>Any</guimenu>
 applies the package version required to fulfil dependencies.
Click the <guimenu>Save</guimenu>
 button to save changes to the database, then click <guimenu>Apply</guimenu>
 to apply the new package state.</simpara>
</section>
<section xml:id="_s5_sm_system_details_states_custom"><title>System Details &gt;  States  &gt;  Custom</title><simpara>States which have been created on the <guimenu>States Catalog</guimenu>
 page located under <guimenu>Salt</guimenu>
 on the left bar may be assigned to a system on the <menuchoice><guimenu>States</guimenu> <guimenuitem>Custom</guimenuitem></menuchoice>
 page.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_salt_states_custom.png" width="80%"/>
</imageobject>
<textobject><phrase>system details salt states custom</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Search for the custom state you want to apply to the system then select the <guimenu>Assign</guimenu>
 check box.
Click <guimenu>Save</guimenu>
 to save the change to the database finally select <guimenu>Apply</guimenu>
 to apply the changes.
States applied at the system level will only be applied to the selected system.</simpara>
</section>
<section xml:id="_s5_sm_system_details_states_highstate"><title>System Details &gt;  States  &gt;  Highstate</title><simpara>From the <guimenu>Highstate</guimenu>
 page you can view and apply the high state for a selected system.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_salt_states_highstate.png" width="80%"/>
</imageobject>
<textobject><phrase>system details salt states highstate</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Select a date and time to apply the high state.
Then click <guimenu>Apply Highstate</guimenu>
.</simpara>
</section>
</section>
<section xml:id="_s4_sm_system_details_formualas"><title>System Details &gt;  Formulas  [Salt]</title><simpara>This is a feature preview.
On the <guimenu>Formualas</guimenu>
 page you can select Salt formulas for this system.
This allows you to automatically install and configure software.</simpara>
<simpara>Installed formulas are listed.
Select from the listing by clicking the check box to the left.
Then confirm with the <guimenu>Save</guimenu>
 button on the right.
When done, additional subtabs appear where you can configure the formulas.</simpara>
<simpara>For usage information, see <xref linkend="_best.practice.salt.formulas.using"/>.</simpara>
</section>
<section xml:id="_s4_sm_system_details_events"><title>System Details &gt;  Events</title><simpara>The <guimenu>Events</guimenu>
 page displays past, current, and scheduled actions on the system.
You may cancel pending events here.
The following sections describe the <guimenu>Events</guimenu>
 subtabs and the features they offer.</simpara>
<section xml:id="_s5_sm_system_details_events_pend"><title>System Details  &gt;  Events  &gt;  Pending</title><simpara>Lists events that are scheduled but have not started.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_events_pending.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional events pending</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>A prerequisite action must complete successfully before the given action is attempted.
If an action has a prerequisite, no check box is available to cancel that action.
Instead, a check box appears next to the prerequisite action; canceling the prerequisite action causes the action in question to fail.</simpara>
<simpara>Actions can be chained so that action 'a' requires action 'b' which requires action 'c'. Action 'c' is performed first and has a check box next to it until it is completed successfully.
If any action in the chain fails, the remaining actions also fail.
To unschedule a pending event, select the event and click the <guimenu>Cancel Events</guimenu>
 button at the bottom of the page.
The following icons indicate the type of events:</simpara>
<itemizedlist>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/spacewalk-icon-packages.png"/>
</imageobject>
<textobject><phrase>spacewalk icon packages</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Package Event,</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/spacewalk-icon-patches.png"/>
</imageobject>
<textobject><phrase>spacewalk icon patches</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Patch Event,</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-cog.png"/>
</imageobject>
<textobject><phrase>fa cog</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Preferences Event,</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-desktop.png"/>
</imageobject>
<textobject><phrase>fa desktop</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;System Event.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_s5_sm_system_details_events_hist"><title>System Details &gt;  Events  &gt;  History</title><simpara>The default display of the <guimenu>Events</guimenu>
 tab lists the type and status of events that have failed, occurred or are occurring.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/system_details_traditional_events_history.png" width="80%"/>
</imageobject>
<textobject><phrase>system details traditional events history</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>To view details of an event, click its summary in the <guimenu>System History</guimenu>
 list.
To go back to the table again, click <guimenu>Return to history list</guimenu>
 at the bottom of the page.</simpara>
</section>
</section>
</section>
<section xml:id="_ref.webui.systems.systemgroups"><title>System Groups</title><simpara><indexterm>
<primary>system group</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>list of</secondary>
</indexterm>
<indexterm>
<primary>list of</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>System Group List</secondary>
</indexterm>
<indexterm>
<primary>System Group List</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>Web Interface</primary><secondary>System Groups</secondary>
</indexterm>
<indexterm>
<primary>System Groups</primary>
</indexterm></simpara>
<simpara>The <guimenu>System Groups</guimenu>
 page allows &susemgr;
 users to view the <guimenu>System Groups</guimenu>
 list.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_systemgroups.png" width="80%"/>
</imageobject>
<textobject><phrase>systems systemgroups</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Only System Group Administrators and &susemgr;
Administrators may perform the following additional tasks:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Create system groups. (Refer to <xref linkend="_ref.webui.systems.systemgroups.create"/>.)</para>
</listitem>
<listitem>
<para>Add systems to system groups. (Refer to <xref linkend="_ref.webui.systems.systemgroups.add"/>.)</para>
</listitem>
<listitem>
<para>Remove systems from system groups. (Refer to <xref linkend="_s3_sm_system_details"/>.)</para>
</listitem>
<listitem>
<para>Assign system group permissions to users. (Refer to <xref linkend="_ref.webui.users"/>.)</para>
</listitem>
</orderedlist>
<simpara>The <guimenu>System Groups</guimenu>
 list displays all system groups.
The list contains several columns for each group:</simpara>
<itemizedlist>
<listitem>
<para><guimenu>Select</guimenu>&#8201;&#8212;&#8201;Via the check boxes add all systems in the selected groups to the <guimenu>System Set Manager</guimenu> by clicking the <guimenu>Update</guimenu> button. All systems in the selected groups are added to the <guimenu>System Set Manager</guimenu> . You can then use the <guimenu>System Set Manager</guimenu> to perform actions on them simultaneously. It is possible to select only those systems that are members of all of the selected groups, excluding those systems that belong only to one or some of the selected groups. To do so, select the relevant groups and click the <guimenu>Work with Intersection</guimenu> button. To add all systems of all selected groups, click the <guimenu>Work with Union</guimenu> button. Each system will show up once, regardless of the number of groups to which it belongs. Refer to <xref linkend="_ref.webui.systems.ssm"/> for details.</para>
</listitem>
<listitem>
<para><guimenu>Updates</guimenu>&#8201;&#8212;&#8201;Shows which type of patch alerts are applicable to the group or confirms that all systems are up-to-date. Clicking a group&#8217;s status icon takes you to the <guimenu>Patch</guimenu> tab of its <guimenu>System Group Details</guimenu> page. Refer to <xref linkend="_ref.webui.systems.systemgroups.details"/> for more information.</para>
<simpara>The status icons call for differing degrees of attention:
<emphasis role="strong"> <inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-check-circle.svg"/>
</imageobject>
<textobject><phrase>Check Circle</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;All systems in the group are up-to-date.
</emphasis> <inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-exclamation-circle.svg"/>
</imageobject>
<textobject><phrase>Exclamation Circle</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Critical patches available, update <emphasis>strongly</emphasis> recommended.
** <inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-warning.svg"/>
</imageobject>
<textobject><phrase>Warning</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Updates available and recommended.</simpara>
</listitem>
<listitem>
<para><guimenu>Health</guimenu> Status of the systems in the group, reported by probes.</para>
</listitem>
<listitem>
<para><guimenu>Group Name</guimenu>&#8201;&#8212;&#8201;The name of the group as configured during its creation. The name should be explicit enough to distinguish from other groups. Clicking the name of a group takes you to the <guimenu>Details</guimenu> tab of its <guimenu>System Group Details</guimenu> page. Refer to <xref linkend="_ref.webui.systems.systemgroups.details"/> for more information.</para>
</listitem>
<listitem>
<para><guimenu>Systems</guimenu>&#8201;&#8212;&#8201;Total number of systems in the group. Clicking the number takes you to the <guimenu>Systems</guimenu> tab of the <guimenu>System Group Details</guimenu> page for the group. Refer to <xref linkend="_ref.webui.systems.systemgroups.details"/> for more information.</para>
</listitem>
<listitem>
<para><guimenu>Use in SSM</guimenu>&#8201;&#8212;&#8201;Clicking the <guimenu>Use in SSM</guimenu> link in this column loads all and only the systems in the selected group and launches the <guimenu>System Set Manager</guimenu> immediately. Refer to <xref linkend="_ref.webui.systems.ssm"/> for more information.</para>
</listitem>
</itemizedlist>
<section xml:id="_ref.webui.systems.systemgroups.create"><title>Creating Groups</title><simpara>To add a new system group, click the <guimenu>Create Group</guimenu>
 link at the top-right corner of the page.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_edit_group.png" width="80%"/>
</imageobject>
<textobject><phrase>systems edit group</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Type a name and description and click the <guimenu>Create Group</guimenu>
 button.
Make sure you use a name that clearly sets this group apart from others.
The new group will appear in the <guimenu>System Groups</guimenu>
 list.</simpara>
</section>
<section xml:id="_ref.webui.systems.systemgroups.add"><title>Adding and Removing Systems in Groups</title><simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>adding and removing</secondary>
</indexterm>
<indexterm>
<primary>adding and removing</primary>
</indexterm></simpara>
<simpara>Systems can be added and removed from system groups.
Clicking the group name takes you to the <guimenu>Details</guimenu>
 page.
The <guimenu>Systems</guimenu>
 tab shows all systems in the group and allows you to select some or all systems for deletion.
Click <guimenu>Remove Systems</guimenu>
 to remove the selected systems from the group.
The <guimenu>Target Systems</guimenu>
 page shows you all systems that can be added to the group.
Select the systems and click the <guimenu>Add Systems</guimenu>
 button.</simpara>
</section>
<section xml:id="_ref.webui.systems.systemgroups.details"><title>System Group Details</title><simpara>At the top of each <guimenu>System Group Details</guimenu>
 page are two links: <guimenu>Delete Group</guimenu>
 and <guimenu>Work With Group</guimenu>
.
Clicking <guimenu>Delete Group</guimenu>
 deletes the System Group and should be used with caution.
Clicking <guimenu>Work With Group</guimenu>
 loads the group&#8217;s systems and launches the <guimenu>System Set Manager</guimenu>
 immediately like the <guimenu>Use Group</guimenu>
 button from the <guimenu>System Groups</guimenu>
 list.
Refer to <xref linkend="_ref.webui.systems.ssm"/> for more information.</simpara>
<simpara>The <guimenu>System Group Details</guimenu>
 page is split into the following tabs:</simpara>
<section xml:id="_s4_sm_system_group_details_details"><title>System Group Details  &gt;  Details</title><simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>deleting</secondary>
</indexterm>
<indexterm>
<primary>deleting</primary>
</indexterm></simpara>
<simpara>Provides the group name and group description.
To change this information, click <guimenu>Edit These Properties</guimenu>
, make your changes in the appropriate fields, and click the <guimenu>Update Group</guimenu>
 button.</simpara>
</section>
<section xml:id="_s4_sm_system_group_details_systems"><title>System Group Details &gt;  Systems</title><simpara>Lists all members of the system group.
Clicking links within the table takes you to corresponding tabs within the <guimenu>System Details</guimenu>
 page for the associated system.
To remove systems from the group, select the appropriate check boxes and click the <guimenu>Remove Systems</guimenu>
 button on the bottom of the page.
Clicking it does not delete systems from &susemgr;
 entirely.
This is done through the <guimenu>System Set Manager</guimenu>
 or <guimenu>System Details</guimenu>
 pages.
Refer to <xref linkend="_ref.webui.systems.ssm"/> or <xref linkend="_s3_sm_system_details"/>, respectively.</simpara>
</section>
<section xml:id="_s4_sm_system_group_details_target"><title>System Group Details &gt;  Target Systems</title><simpara><guimenu>Target Systems</guimenu>
&#8201;&#8212;&#8201;Lists all systems in your organization.
To add systems to the specified system group, click the check boxes to their left and click the <guimenu>Add Systems</guimenu>
 button on the bottom right-hand corner of the page.</simpara>
</section>
<section xml:id="_s4_sm_system_group_details_errata"><title>System Group Details &gt;  Patches</title><simpara>List of relevant patches for systems in the system group.
Clicking the advisory takes you to the <guimenu>Details</guimenu>
 tab of the <guimenu>Patch Details</guimenu>
 page.
(Refer to <xref linkend="_s3_sm_errata_details"/> for more information.) Clicking the Affected Systems number lists all of the systems affected by the patch.
To apply the patch updates in this list, select the systems and click the <guimenu>Apply Patches</guimenu>
 button.</simpara>
</section>
<section xml:id="_s4_sm_system_group_details_admins"><title>System Group Details &gt;  Admins</title><simpara>List of all organization users that have permission to manage the system group. &susemgr;
Administrators are clearly identified.
System Group Administrators are marked with an asterisk (*). To change the system group&#8217;s users, select and deselect the appropriate check boxes and click the <guimenu>Update</guimenu>
 button.</simpara>
</section>
<section xml:id="_s4_sm_system_group_details_states"><title>System Group Details &gt;  States  [Salt]</title><simpara>The <guimenu>States</guimenu>
 tab displays states which have been created and added using the <guimenu>Salt</guimenu>
 &gt; <guimenu>State Catalog</guimenu>
.
From this page you can select which states should be applied across a group of systems.
A state applied from this page will be applied to all minions within a group.</simpara>
<note>
<simpara>States are applied according to the following order of hierarchy within &susemgr;
:</simpara>
<screen>Organization &gt; Group &gt; Single System</screen>
</note>
<orderedlist numeration="arabic">
<title>Procedure: Applying States at the Group Level</title>
<listitem>
<para>Create a state using the <menuchoice><guimenu>Salt</guimenu> <guimenuitem>State Catalog</guimenuitem></menuchoice> or via the command line.</para>
</listitem>
<listitem>
<para>Browse to <menuchoice><guimenu>Systems</guimenu> <guimenuitem>System Groups</guimenuitem></menuchoice> . Select the group that a new state should be applied to. From a specific group page select the <guimenu>States</guimenu> tab.</para>
</listitem>
<listitem>
<para>Use the search feature to located a state by name or click the <guimenu>Search</guimenu> button to list all available states.</para>
</listitem>
<listitem>
<para>Select the check box for the state to be applied and click the <guimenu>Save</guimenu> button. The <guimenu>Save</guimenu> button will save the change to the database but will not apply the state.</para>
</listitem>
<listitem>
<para>Apply the state by clicking the <guimenu>Apply</guimenu> button. The state will be scheduled and applied to any systems included within a group.</para>
</listitem>
</orderedlist>
</section>
</section>
</section>
<section xml:id="_ref.webui.systems.ssm"><title><guimenu>System Set Manager</guimenu></title><simpara><indexterm>
<primary>System Set Manager</primary>
</indexterm></simpara>
<simpara>The following actions executed on individual systems from the System Details page may be performed for multiple systems via the System Set Manager.
The System Set Manager can be used to schedule actions on both Salt and Traditional systems.
The following table provides information on what actions may be performed across both Salt and Traditional systems.
These two methods have different actions which may be accessed with the System Set Manager:</simpara>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="3">
<colspec colname="col_1" colwidth="33.3333*"/>
<colspec colname="col_2" colwidth="33.3333*"/>
<colspec colname="col_3" colwidth="33.3334*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>System Set Manager: Overview</simpara></entry>
<entry align="left" valign="top"><simpara>Traditional SSM</simpara></entry>
<entry align="left" valign="top"><simpara>Salt SSM</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>Systems:</simpara><simpara>* List Systems</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara><simpara>* Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara><simpara>* Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Install Patches:</simpara><simpara>* Schedule Patch Updates</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara><simpara>* Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara><simpara>* Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Install Packages:</simpara><simpara>* Upgrade
* Install
* Remove
* Verify</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara><simpara>* Supported
* Supported
* Supported
* Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Limited</simpara><simpara>* Supported
* Supported
* Supported
* Not Available</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Groups:</simpara><simpara>* Create
* Manage</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara><simpara>* Supported
* Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara><simpara>* Supported
* Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Channels:</simpara><simpara>* Channel Memberships
* Channel Subscriptions
* Deploy / Diff Channels</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara><simpara>* Supported
* Supported
* Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Limited</simpara><simpara>* Supported
* Not Available
* Not Available</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Provisioning:</simpara><simpara>* Autoinstall Systems
* Tag for Snapshot
* Remote Commands
* Power Management
* Power Management Operations</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara><simpara>* Supported
* Supported
* Supported
* Supported
* Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Not Available</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Misc:</simpara><simpara>* Update Hardware Profiles
* Update Package Profiles
* Update System Preferences
* Set/Remove Custom Values
* Add/Remove Add-on Types
* Delete Systems
* Reboot Systems
* Migrate Systems to another Organization
* Lock/Unlock Systems
* Audit Systems (OpenSCAP)</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara><simpara>* Supported
* Supported
* Supported
* Supported
* Supported
* Supported
* Supported
* Supported
* Supported
* Supported</simpara></entry>
<entry align="left" valign="top"><simpara>Limited</simpara><simpara>* Supported
* Supported
* Not Available
* Supported
* Not Available
* Supported
* Supported
* Supported
* Not Available
* Not Available</simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<simpara>Before performing actions on multiple systems, select the systems to work with.
To select systems, click <guimenu>Systems</guimenu>
 in the left bar, check the boxes to the left of the systems you want to work with, and click the <guimenu>Manage</guimenu>
 button in the top bar.</simpara>
<simpara>Additionally, you can access the System Set Manager in three different ways:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Click the <guimenu>System Set Manager</guimenu> link in the left bar.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Use in SSM</guimenu> link in the <guimenu>System Groups</guimenu> list.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Work with Group</guimenu> link on the <guimenu>System Group Details</guimenu> page.</para>
</listitem>
</orderedlist>
<section xml:id="_ref.webui.systems.ssm.overview"><title>System Set Manager &gt;  Overview</title><simpara>This page contains links to most SSM option tabs with short explanations.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_overview.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm overview</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.ssm.systems"><title>System Set Manager &gt;  Systems</title><simpara>List of selected systems.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_list_systems.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm list systems</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.ssm.patches"><title>System Set Manager &gt;  Patches</title><simpara>List of patch updates applicable to the current system set.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_patches.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm patches</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Click the number in the Systems column to see to which systems in the System Set Manager a patch applies.
To apply updates, select the patches and click the <guimenu>Apply Patches</guimenu>
 button.</simpara>
</section>
<section xml:id="_ref.webui.systems.ssm.packages"><title>System Set Manager &gt;  Packages</title><simpara>Click the number in the Systems column to see the systems in the System Set Manager to which a package applies.
Modify packages on the system via the following subtabs.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_packages_overview.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm packages overview</phrase></textobject>
</mediaobject>
</informalfigure>
<section xml:id="_s4_sm_ssm_packages_install"><title>System Set Manager &gt;  Packages  &gt;  Install</title><simpara>This list includes all channels to which systems in the set are subscribed.
A package is only installed on a system if the system is subscribed to the channel providing the package.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_install.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm install</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Click the channel name and select the packages from the list.
Then click the <guimenu>Install Packages</guimenu>
 button.</simpara>
</section>
<section xml:id="_s4_sm_ssm_packages_remove"><title>System Set Manager &gt;  Packages  &gt;  Remove</title><simpara>A list of all the packages installed on the selected systems that might be removed.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_remove.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm remove</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Multiple versions appear if systems in the System Set Manager have more than one version installed.
Select the packages to be deleted, then click the <guimenu>Remove Packages</guimenu>
 button.</simpara>
</section>
<section xml:id="_s4_sm_ssm_packages_upgrade"><title>System Set Manager &gt;  Packages  &gt;  Upgrade</title><simpara>A list of all the packages installed on the selected systems that might be upgraded.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_upgrade.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm upgrade</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Systems must be subscribed to a channel providing the packages to be upgraded.
If multiple versions of a package are available, note that your system will be upgraded to the latest version.
Select the packages to be upgraded, then click the <guimenu>Upgrade Packages</guimenu>
 button.</simpara>
</section>
<section xml:id="_s3_sm_ssm_verify"><title>System Set Manager &gt;  Packages  &gt;  Verify</title><simpara>A list of all installed packages whose contents, file checksum, and other details may be verified.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_verify.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm verify</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>At the next check in, the verify event issues the command <command>rpm
     --verify</command> for the specified package.
If there are any discrepancies, they are displayed in the System Details page for each system.</simpara>
<simpara>Select the check box next to all packages to be verified, then click the <guimenu>Verify Packages</guimenu>
 button.
On the next page, select a date and time for the verification, then click the <guimenu>Schedule Verifications</guimenu>
 button.</simpara>
</section>
</section>
<section xml:id="_ref.webui.systems.ssm.groups"><title>System Set Manager &gt;  Groups</title><simpara>Tools to create groups and manage system memberships.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_groups.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm groups</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>These functions are limited to &susemgr;
Administrators and System Group Administrators.
To add a new group, click <guimenu>Create Group</guimenu>
 on the top-right corner.
In the next page, type the group name and description in the respective fields and click the <guimenu>Create Group</guimenu>
 button.
To add or remove selected systems in any of the system groups, toggle the appropriate radio buttons and click the <guimenu>Alter Membership</guimenu>
 button.</simpara>
</section>
<section xml:id="_ref.webui.systems.ssm.channels"><title>System Set Manager &gt;  Channels</title><simpara>As a Channel Administrator, you may change the base channels your systems are subscribed to.</simpara>
<note>
<title>Changing the Channels Is Now an Action</title>
<simpara>Since the 3.1 maintenance update (2018) changing the channels is an action that can be scheduled like any other action.
Earlier channel changes were applied immediately.</simpara>
</note>
<simpara>Manage channel associations through the following wizard procedure:</simpara>
<variablelist>
<varlistentry>
<term><guimenu>Base Channel Alteration</guimenu> (Page 1)</term>
<listitem>
<simpara>Valid channels are either channels created by your organization, or the vendor&#8217;s default base channel for your operating system version and processor type.
Systems will be unsubscribed from all channels, and subscribed to their new base channels.</simpara>
<warning>
<title>Changing Base Channel</title>
<simpara>This operation can have a dramatic effect on the packages and patches available to the systems.
Use with caution.</simpara>
</warning>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_base_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm base channels</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>To change the base channel, select the new one from the <guimenu>Desired base Channel</guimenu>
and confirm the action.</simpara>
<simpara>On the this wizard page you see the the <guimenu>Current base Channel</guimenu>
and how many <guimenu>Systems</guimenu>
are subscribed to it.
Click the number link in the <guimenu>Systems</guimenu>
column to see which systems are actually selected.</simpara>
<simpara>To change the base channel subscription select the <guimenu>Desired base Channel</guimenu>
from the selection box.
Then click <guimenu>Next</guimenu>
in the lower left corner.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Child Channels</guimenu> (Page 2)</term>
<listitem>
<simpara>The <guimenu>Child Channels</guimenu>
page allows you to subscribe and unsubscribe individual child channels related to its parent or base channel.
Systems must subscribe to a base channel before subscribing to a child channel.
If you enable <guimenu>with recommended</guimenu>
, recommended child channels are automatically selected for subscription.</simpara>
</listitem>
</varlistentry>
</variablelist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_child_subscriptions.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm child subscriptions</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>+
Change the child channel subscription on this page.
Then click <guimenu>Next</guimenu>
in the lower left corner.</simpara>
<variablelist>
<varlistentry>
<term><guimenu>Channel Changes Overview</guimenu> (Page 3)</term>
<listitem>
<simpara>Schedule when the channel changes should take place the earliest.
Then click <guimenu>Confirm</guimenu>
in the lower left corner.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Channel Changes Actions</guimenu> (Page 4)</term>
<listitem>
<simpara>See the scheduled change actions.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_ref.webui.systems.ssm.config"><title>System Set Manager &gt;  Configuration</title><simpara>Like in the <menuchoice><guimenu>System Details</guimenu> <guisubmenu>Channels</guisubmenu> <guimenuitem>Configuration</guimenuitem></menuchoice>
 tab, the subtabs here can be used to subscribe the selected systems to configuration channels and deploy and compare the configuration files on the systems.
The channels are created in the <guimenu>Manage Config Channels</guimenu>
 interface within the <guimenu>Channels</guimenu>
 category.
Refer to <xref linkend="_ref.webui.config.overview"/> for channel creation instructions.</simpara>
<simpara>To manage the configuration of a system, install the latest <filename>rhncfg*</filename>
 packages.
Refer to <xref linkend="_ref.webui.config.preparing"/> for instructions on enabling and disabling scheduled actions for a system.</simpara>
<section xml:id="_ref.webui.systems.ssm.config.deploy"><title>System Set Manager  &gt;  Configuration  &gt;  Deploy Files</title><simpara>Use this subtab to distribute configuration files from your central repository on &susemgr;
to each of the selected systems.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_config_deploy_files.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm config deploy files</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>The table lists the configuration files associated with any of the selected systems.
Clicking its system count displays the systems already subscribed to the file.</simpara>
<simpara>To subscribe the selected systems to the available configuration files, select the check box for each wanted file.
When done, click <guimenu>Deploy Configuration</guimenu>
 and schedule the action.
Note that the latest versions of the files, at the time of scheduling, are deployed.
Newer versions created after scheduling are disregarded.</simpara>
</section>
<section xml:id="_ref.webui.systems.ssm.config.verify"><title>System Set Manager &gt;  Configuration  &gt;  Compare Files</title><simpara>Use this subtab to validate configuration files on the selected systems against copies in your central repository on &susemgr;
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_config_compare_files.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm config compare files</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>The table lists the configuration files associated with any of the selected systems.
Clicking a file&#8217;s system count displays the systems already subscribed to the file.</simpara>
<simpara>To compare the configuration files deployed on the systems with those in &susemgr;
, select the check box for each file to be validated.
Then click <menuchoice><guimenu>Analyze Differences</guimenu> <guimenuitem>Schedule File
     Comparison</guimenuitem></menuchoice>
.
The comparisons for each system will not complete until each system checks in to &susemgr;
.
When each comparison is complete, any differences between the files will be accessible from each system&#8217;s events page.</simpara>
<simpara>Note that the latest versions of the files, at the time of scheduling, are compared.
Newer versions created after scheduling are disregarded.
Find the results in the main <guimenu>Schedule</guimenu>
 category or within the <menuchoice><guimenu>System Details</guimenu> <guimenuitem>Events</guimenuitem></menuchoice>
 tab.</simpara>
</section>
<section xml:id="_ref.webui.systems.ssm.config.subs"><title>System Set Manager &gt;  Configuration  &gt;  Subscribe to Channels</title><simpara>Subscribe systems to configuration channels, and in a second step rank these channels according to the order of preference.
This tab is available only to &susemgr;
Administrators and Configuration Administrators.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_config_subscribe_to_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm config subscribe to channels</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Select channels for subscription by activating the check box. When done, confirm with <guimenu>Continue</guimenu> .</para>
</listitem>
<listitem>
<para>In the second step, rank the channels with the arrow-up or arrow-down symbols.</para>
<simpara>Then decide how the channels are applied to the selected systems.
The three buttons below the channels reflect your options.
Clicking <guimenu>Subscribe with Highest Priority</guimenu>
places all the ranked channels before any other channels to which the selected systems are currently subscribed.
Clicking <guimenu>Subscribe With Lowest Priority</guimenu>
places the ranked channels after those channels to which the selected systems are currently subscribed.
Clicking <guimenu>Replace Existing Subscriptions</guimenu>
removes any existing association and creates new ones with the ranked channels, leaving every system with the same configuration channels in the same order.</simpara>
<note>
<title>Confliction Ranks</title>
<simpara>In the first two cases, if any of the newly ranked configuration channels are already in a system&#8217;s existing configuration channel list, the duplicate channel is removed and replaced according to the new rank, effectively reordering the system&#8217;s existing channels.
When such conflicts exist, you are presented with a confirmation page to ensure the intended action is correct.
When the change has taken place, a message appears at the top of the page indicating the update was successful.</simpara>
</note>
<simpara>Then, click <guimenu>Apply Subscriptions</guimenu>
.</simpara>
</listitem>
</orderedlist>
<simpara>Channels are accessed in the order of their rank.
Your local configuration channel always overrides all other channels.</simpara>
</section>
<section xml:id="_ref.webui.systems.ssm.config.unsubs"><title>System Set Manager &gt;  Configuration  &gt;  Unsubscribe from Channels</title><simpara>Administrators may unsubscribe systems from configuration channels by clicking the check box next to the channel name and clicking the <guimenu>Unsubscribe Systems</guimenu>
 button.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_config_unsubscribe_from_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm config unsubscribe from channels</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.ssm.config.enable"><title>System Set Manager &gt;  Configuration  &gt;  Enable Configuration</title><simpara>Registered systems without configuration management preparation will appear here in a list.</simpara>
<figure>
<title>Enable Configuration <anchor xml:id="_fig_ssm_config_enable"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_config_enable_config.png"/>
</imageobject>
<textobject><phrase>systems ssm config enable config</phrase></textobject>
</mediaobject>
</figure>
<simpara>Administrators may enable configuration management by clicking the <guimenu>Enable SUSE Manager Configuration Management</guimenu>
 button.
You can also schedule the action by adjusting the <guimenu>Schedule no sooner than</guimenu>
 date and time setting using the drop-down box, then clicking <guimenu>Enable SUSE Manager Configuration Management</guimenu>
.</simpara>
<simpara>Then the systems will get subscribed to the required &susemgr;
tools channel and required <package>rhncfg*</package>
 packages will get installed.</simpara>
</section>
</section>
<section xml:id="_ref.webui.systems.ssm.provision"><title>System Set Manager &gt;  Provisioning</title><simpara>Set the options for provisioning systems via the following subtabs.</simpara>
<section xml:id="_ref.webui.systems.ssm.provision_autoinst"><title>System Set Manager  &gt;  Provisioning  &gt;  Autoinstallation</title><simpara>Use this subtab to reinstall clients.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_autoinstallation.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm autoinstallation</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>To schedule autoinstallations for these systems, select a distribution.
The autoinstallation profile used for each system in the set is determined via the <guimenu>Autoinstallable Type</guimenu>
 radio buttons.</simpara>
<simpara>Choose <guimenu>Select autoinstallation profile</guimenu>
 to apply the same profile to all systems in the set.
This is the default option.
You will see a list of available profiles to select from when you click <guimenu>Continue</guimenu>
.</simpara>
<simpara>Choose <guimenu>Autoinstall by IP Address</guimenu>
 to apply different autoinstallation profiles to different systems in the set, by IP address.
To do so, at least two autoinstallation profiles must be configured with associated IP ranges.</simpara>
<simpara>If you use <guimenu>Autoinstall by IP Address</guimenu>
, &susemgr;
 will automatically pick a profile for each system so that the system&#8217;s IP address will be in one of the IP ranges specified in the profile itself.
If such a profile cannot be found, &susemgr;
 will look for an organization default profile and apply that instead. If no matching IP ranges nor organization default profiles can be found, no autoinstallation will be performed on the system.
You will be notified on the next page if that happens.</simpara>
<simpara>To use Cobbler system records for autoinstallation, select <guimenu>Create PXE Installation Configuration</guimenu>
.
With PXE boot, you cannot only reinstall clients, but automatically install machines that do not have an operating system installed yet. &susemgr;
 and its network must be properly configured to enable boot using PXE.
For more information on Cobbler and &kickstart;
 templates, refer to <xref linkend="_advanced.topics.cobbler"/>.</simpara>
<note>
<simpara>If a system set contains bare-metal systems and installed clients, only features working for systems without an operating system installed will be available.
Full features will be enabled again when all bare-metal systems are removed from the set.</simpara>
</note>
<simpara>If any of the systems connect to &susemgr;
via a proxy server, choose either the <guimenu>Preserve Existing Configuration</guimenu>
 radio button or the <guimenu>Use Proxy</guimenu>
 radio button.
If you choose to autoinstall through a proxy server, select from the available proxies listed in the drop-down box beside the <guimenu>Use Proxy</guimenu>
 radio button.
All of the selected systems will autoinstall via the selected proxy.
Click the <guimenu>Schedule Autoinstall</guimenu>
 button to confirm your selections.
When the autoinstallations for the selected systems are successfully scheduled, you will return to the <guimenu>System Set Manager</guimenu>
 page.</simpara>
</section>
<section xml:id="_ref.webui.systems.ssm.provision.tag"><title>System Set Manager &gt;  Provisioning  &gt;  Tag Systems</title><simpara>Use this subtab to add meaningful descriptions to the most recent snapshots of your selected systems.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_tag_systems.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm tag systems</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>To tag the most recent system snapshots, enter a descriptive term in the <guimenu>Tag name</guimenu>
 field and click the <guimenu>Tag Current Snapshots</guimenu>
 button.</simpara>
</section>
<section xml:id="_ref.webui.systems.ssm.provision.roll"><title>System Set Manager &gt;  Provisioning  &gt;  Rollback</title><simpara>Use this subtab to rollback selected systems to previous snapshots marked with a tag.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_rollback.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm rollback</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Click the tag name, verify the systems to be reverted, and click the <guimenu>Rollback Systems</guimenu>
 button.</simpara>
</section>
<section xml:id="_ref.webui.systems.ssm.provision.remote"><title>System Set Manager &gt;  Provisioning  &gt;  Remote Command</title><simpara>Use this subtab to issue remote commands.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_remote_command.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm remote command</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>First create a <filename>run</filename>
 file on the client systems to allow this function to operate.
Refer to <xref linkend="_s5_sm_system_details_remote"/> for instructions.
Then identify a specific user, group, timeout period, and the script to run.
Select a date and time to execute the command and click <guimenu>Schedule</guimenu>
.</simpara>
</section>
<section xml:id="_ref.webui.systems.ssm.provision.pm_config"><title>System Set Manager &gt;  Provisioning  &gt;  Power Management Configuration</title><informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_power_management_config.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm power management config</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.ssm.provision.pm_op"><title>System Set Manager &gt;  Provisioning  &gt;  Power Management Operation</title><informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_power_management_operations.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm power management operations</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</section>
<section xml:id="_ref.webui.systems.ssm.audit"><title>System Set Manager &gt;  Audit</title><simpara>System sets can be scheduled for XCCDF scans; XCCDF stands for <quote>The
    Extensible Configuration Checklist Description Format</quote>
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_audit.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm audit</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Enter the command and command line arguments, and the path to the XCCDF document.
Then schedule the scan.
All target systems are listed below with a flag whether they support OpenSCAP scans.
For more details on OpenSCAP and audits, refer to <xref linkend="_ref.webui.audit"/>.</simpara>
</section>
<section xml:id="_ref.webui.systems.ssm.misc"><title>System Set Manager &gt;  Misc</title><simpara>On the <guimenu>Misc</guimenu>
 page, you can modify <guimenu>Custom System Information</guimenu>
.
Click <guimenu>Set a custom value for selected systems</guimenu>
, then the name of a key.
Enter values for all selected systems, then click the <guimenu>Set Values</guimenu>
 button.
To remove values for all selected systems, click <guimenu>Remove a custom value from selected systems</guimenu>
, then the name of the key.
Click the <guimenu>Remove Values</guimenu>
 button to delete.</simpara>
<simpara>Set <guimenu>System Preferences</guimenu>
 via the respective radio buttons.</simpara>
<section xml:id="_s4_sm_ssm_misc_updates_hw"><title>System Set Manager  &gt;  Misc  &gt;  Hardware</title><simpara>Click the <guimenu>Hardware</guimenu>
 subtab to schedule a hardware profile refresh.
Click <guimenu>Confirm Refresh</guimenu>
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_misc_hardware_refresh.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm misc hardware refresh</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_s4_sm_ssm_misc_updates_sw"><title>System Set Manager &gt;  Misc  &gt;  Software</title><simpara>Click the <guimenu>Software</guimenu>
 subtab, then the <guimenu>Confirm Refresh</guimenu>
 button to schedule a package profile update of the selected systems.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_misc_software_refresh.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm misc software refresh</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_s4_sm_ssm_misc_migrate"><title>System Set Manager &gt;  Misc  &gt;  Migrate</title><simpara>Click the <guimenu>Migrate</guimenu>
 subtab to move selected systems to a selected organization.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_misc_migrate_systems.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm misc migrate systems</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_s4_sm_ssm_misc_lock"><title>System Set Manager &gt;  Misc  &gt;  Lock/Unlock</title><simpara>Select the <guimenu>Lock/Unlock</guimenu>
 subtab to select systems to be excluded from package updates.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_misc_lock_unlock.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm misc lock unlock</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Enter a <guimenu>Lock reason</guimenu>
 in the text box and click the <guimenu>Lock</guimenu>
 button.
Already locked systems can be unlocked on this page.
Select them and click <guimenu>Unlock</guimenu>
.</simpara>
</section>
<section xml:id="_s4_sm_ssm_misc_delete"><title>System Set Manager &gt;  Misc  &gt;  Delete</title><simpara>Click the <guimenu>Delete</guimenu>
 subtab, to remove systems by deleting their system profiles.
Click the <guimenu>Confirm Deletion</guimenu>
 button to remove the selected profiles permanently.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_ssm_misc_delete_confirm.png" width="80%"/>
</imageobject>
<textobject><phrase>systems ssm misc delete confirm</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_s4_sm_ssm_misc_reboot"><title>System Set Manager &gt;  Misc  &gt;  Reboot</title><simpara>Select the appropriate systems, then click the <guimenu>Reboot Systems</guimenu>
 link to select these systems for reboot.</simpara>
<simpara>To cancel a reboot action, see <xref linkend="_ref.webui.schedule.pending"/>.</simpara>
</section>
</section>
</section>
<section xml:id="_ref.webui.systems.bootstrapping"><title>Bootstrapping [Salt]</title><simpara>The <guimenu>Bootstrapp Minions</guimenu>
 page allows you to bootstrap Salt minions from the &webui;
.</simpara>
<figure>
<title>Bootstrapping</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/bootstrapping.png" width="80%"/>
</imageobject>
<textobject><phrase>bootstrapping</phrase></textobject>
</mediaobject>
</figure>
<variablelist>
<title>Bootstrapping Parameters</title>
<varlistentry>
<term>Host</term>
<listitem>
<simpara>Place the FQDN of the minion to be bootstrapped within this field.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>SSH Port</term>
<listitem>
<simpara>Place the SSH port that will be used to connect and bootstrap a machine.
The default is <literal>22</literal>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>User</term>
<listitem>
<simpara>Input the minions user login.
The default is &rootuser;
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Password</term>
<listitem>
<simpara>Input the minions login password.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Activation Key</term>
<listitem>
<simpara>Select the activation key (associated with a software source channel) that the minion should use to bootstrap with.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Disable SSH Strict Key Host Checking</term>
<listitem>
<simpara>This check box is selected by default.
This allows the script to auto-accept host keys without requiring a user to manually authenticate.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Manage System Completely via SSH (Will not Install an Agent)</term>
<listitem>
<note>
<title>Technology Preview</title>
<simpara>This feature is a Technology preview.</simpara>
</note>
<simpara>If selected a system will automatically be configured to use SSH.
No other connection method will be configured.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>Once your minion&#8217;s connection details have been filled in click the <guimenu>Bootstrap</guimenu>
 button.
When the minion has completed the bootstrap process, find your new minion listed on the <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Overview</guimenuitem></menuchoice>
 page.</simpara>
</section>
<section xml:id="_ref.webui.systems.visualization"><title>Visualization</title><simpara>You can visualize your virtualized, proxy, and systems group topologies.
Listed under <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Visualization</guimenuitem></menuchoice>
 you will find the <guimenu>Virtualization Hierarchy</guimenu>
, <guimenu>Proxy Hierarchy</guimenu>
, and <guimenu>Systems Grouping</guimenu>
 subpages.
This features allows you to search, filter, and partition systems by name, base channel, check-in date, group, etc.</simpara>
<simpara>To visualize your systems select <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Visualization</guimenuitem></menuchoice>
 from the left navigation menu.</simpara>
<simpara>Click the <guimenu>Show Filters</guimenu>
 button in the upper right corner to open the filters panel.
On the <guimenu>Filtering</guimenu>
 tab, systems are filterable by name, base channel, installed products, or with special properties such as security, bug fix, and product enhancement advisories.
etc.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_visualization_filter_example.png" width="244%"/>
</imageobject>
<textobject><phrase>systems visualization filter example</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>On the <guimenu>Partitioning</guimenu>
 tab, systems may also be partitioned by check-in time.
Select the check-in date and time and click the <guimenu>Apply</guimenu>
 button.
The <guimenu>Clear</guimenu>
 button will revert current partition configuration.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_visualization_partition_example.png" width="244%"/>
</imageobject>
<textobject><phrase>systems visualization partition example</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>All elements of the network tree are selectable.
Clicking any element in the tree opens a box containing information about the selected systems and will be displayed in the top-right of the visualization area.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_visualization_selections_example.png" width="344%"/>
</imageobject>
<textobject><phrase>systems visualization selections example</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Systems shown in the visualization view may be added to System Set Manager (SSM) for futher management.
This can be performed in two ways:</simpara>
<itemizedlist>
<listitem>
<para>Select single systems and click the <guimenu>Add system to SSM</guimenu> button in the top-right detail box.</para>
</listitem>
<listitem>
<para>Add all visible child elements of any parent node in the view (visible means when filters have been applied) by clicking the <guimenu>Add Children to SSM</guimenu> button at the bottom of the selection details panel.</para>
</listitem>
</itemizedlist>
<section xml:id="_ref.webui.systems.virtual.visualzation"><title>Virtualization Hierarchy</title><simpara>The following is an example graphical representation tree of the virtual network hierarchy of virtual systems registered with &susemgr;
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_visualization_virtualization_hierarchy.png" width="80%"/>
</imageobject>
<textobject><phrase>systems visualization virtualization hierarchy</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.proxy.visualzation"><title>Proxy Hierarchy</title><simpara>The following is an example graphical representation tree of the proxy network hierarchy of proxy systems and their clients registered with &susemgr;
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_proxy_heirarchy.png" width="80%"/>
</imageobject>
<textobject><phrase>systems proxy heirarchy</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.grouping.visualzation"><title>Systems Grouping</title><simpara>The following is a graphical representation tree of the all systems registered with &susemgr;
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/visualization_system_grouping_all.png" width="80%"/>
</imageobject>
<textobject><phrase>visualization system grouping all</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Systems are grouped according to preconfigured systems groups, and they may also be grouped into various group compositions by using the multi-select box.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/visualization_system_grouping.png" width="80%"/>
</imageobject>
<textobject><phrase>visualization system grouping</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</section>
<section xml:id="_ref.webui.systems.search"><title>Advanced Search</title><simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>searching</secondary>
</indexterm>
<indexterm>
<primary>searching</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>Web Interface</primary><secondary>System Search</secondary>
</indexterm>
<indexterm>
<primary>System Search</primary>
</indexterm></simpara>
<simpara>Carry out an <guimenu>Advanced Search</guimenu>
 on your systems according to the following criteria: network info, hardware devices, location, activity, packages, details, DMI info, and hardware.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_advanced_search.png" width="80%"/>
</imageobject>
<textobject><phrase>systems advanced search</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Refine searches using the <guimenu>Field to Search</guimenu>
 drop-down box, which is set to <guimenu>Name/Description</guimenu>
 by default.</simpara>
<simpara>The Activity selections (<guimenu>Days Since Last Check-in</guimenu>
, for example) are useful in finding and removing outdated system profiles.</simpara>
<simpara>Type the keyword, select the criterion to search by, use the radio buttons to specify whether you want to query all systems or only those in the <guimenu>System Set Manager</guimenu>
, and click the <guimenu>Search</guimenu>
 button.
To list all systems that do <emphasis>not</emphasis> match the criteria, select the <guimenu>Invert Result</guimenu>
 check box.</simpara>
<simpara>The results appear at the bottom of the page.
For details on how to use the resulting system list, refer to <xref linkend="_ref.webui.systems.systems"/>.</simpara>
</section>
<section xml:id="_ref.webui.systems.activ_keys"><title>Activation Keys</title><simpara><indexterm>
<primary>e-mail address</primary><secondary>with activation key</secondary>
</indexterm>
<indexterm>
<primary>with activation key</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>rhnreg_ks</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>Web Interface</primary><secondary>activation keys</secondary>
</indexterm>
<indexterm>
<primary>activation keys</primary>
</indexterm></simpara>
<simpara>Users with the Activation Key Administrator role (including &susemgr;
Administrators) can generate activation keys in the &susemgr;
Web interface.
With such an activation key, register a &sle;
or Red Hat Enterprise Linux system, entitle the system to a &susemgr;
service level and subscribe the system to specific channels and system groups through the <command>rhnreg_ks</command> command line utility.</simpara>
<note>
<simpara>System-specific activation keys created through the <guimenu>Reactivation</guimenu>
 subtab of the <guimenu>System Details</guimenu>
 page are not part of this list because they are not reusable across systems.</simpara>
</note>
<simpara>For more information about Activation Keys, see <xref linkend="_bp.key.managment"/>.</simpara>
<section xml:id="_s3_sm_system_keys_manage"><title>Managing Activation Keys</title><simpara><indexterm>
<primary>account</primary><secondary>disabling</secondary>
</indexterm>
<indexterm>
<primary>disabling</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>account</primary><secondary>creating</secondary>
</indexterm>
<indexterm>
<primary>creating</primary>
</indexterm></simpara>
<simpara>From the <guimenu>Activation Key</guimenu>
 page organize activation keys for channel management.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_activation_keys.png" width="80%"/>
</imageobject>
<textobject><phrase>systems activation keys</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>To create an activation key:</simpara>
<orderedlist xml:id="_pro.ref.manager.activationkey" numeration="arabic">
<title>Procedure: Creating Activation Keys</title>
<listitem>
<para>Select <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Activation Keys</guimenuitem></menuchoice> from the left bar.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Create Key</guimenu> link at the upper right corner.</para>
</listitem>
<listitem>
<para><guimenu>Description</guimenu>&#8201;&#8212;&#8201;Enter a <guimenu>Description</guimenu> to identify the generated activation key.</para>
</listitem>
<listitem>
<para><guimenu>Key</guimenu>&#8201;&#8212;&#8201;Either choose automatic generation by leaving this field blank or enter the key you want to generate in the <guimenu>Key</guimenu> field. This string of characters can then be used with <command>rhnreg_ks</command> to register client systems with &susemgr; . Refer to <xref linkend="_s3_sm_system_keys_multiple"/> for details.</para>
<formalpara>
<title>Allowed Characters</title>
<para>WARNING:</para>
</formalpara>
</listitem>
</orderedlist>
<simpara>Do not insert commas or double quotes in the key.
All other characters are allowed, but <literal>&lt;&gt; (){}</literal> (this includes the space) will get removed automatically.
If the string is empty, a random one is generated.</simpara>
<simpara>Commas are problematic because they are used as separator when two or more activation keys are used at once.</simpara>
<simpara>+</simpara>
<orderedlist numeration="arabic">
<listitem>
<para><guimenu>Usage</guimenu>&#8201;&#8212;&#8201;The maximum number systems that can be registered with the activation key concurrently. Leave blank for unlimited use. Deleting a system profile reduces the usage count by one and registering a system profile with the key increases the usage count by one.</para>
</listitem>
<listitem>
<para><guimenu>Base Channels</guimenu>&#8201;&#8212;&#8201;The primary channel for the key. This can be either the <literal>&susemgr; Default</literal> channel, a &suse; provided channel, or a custom base channel.</para>
<simpara>Selecting <literal>&susemgr;
Default</literal> allows client systems to register with the &suse;
-provided default channel that corresponds with their installed version of &sle;
.
You can also associate the key with a custom base channel.
If a system using this key is not compatible with the selected channel, it will fall back to the &susemgr;
default channel.</simpara>
</listitem>
<listitem>
<para><guimenu>Add-on System Types</guimenu>&#8201;&#8212;&#8201;The supplemental system types for the key, e.&#160; g. Virtualization Host. All systems will receive these system types with the key.</para>
</listitem>
<listitem>
<para><guimenu>Contact Method</guimenu> - Select how clients communicate with &susemgr; . <guimenu>Default</guimenu> (Pull) waits for the client to check in. With <guimenu>Push via SSH</guimenu> and <guimenu>Push via SSH tunnel</guimenu> the server contacts the client via SSH (with or without tunnel) and pushes updates and actions, etc.</para>
<simpara>For more information about contact methods, see <xref linkend="_bp.systems.management"/>.</simpara>
</listitem>
<listitem>
<para><guimenu>Universal Default</guimenu>&#8201;&#8212;&#8201;Select whether this key should be considered the primary activation key for your organization.</para>
<warning>
<title>Changing the Default Activation Key</title>
<simpara>Only one universal default activation key can be defined per organization.
If a universal key already exists for this organization, you will unset the currently used universal key by activating the check box.</simpara>
</warning>
</listitem>
<listitem>
<para>Click <guimenu>Create Activation Key</guimenu> .</para>
</listitem>
</orderedlist>
<simpara>To create more activation keys, repeat the steps above.</simpara>
<simpara>After creating the unique key, it appears in the list of activation keys along with the number of times it has been used.
Only Activation Key Administrators can see this list.
At this point, you can configure the key further, for example, associate the key with child channels (for example, the Tools child channel), packages (for example, the <package>rhncfg-actions</package>
 package) and groups.
Systems registered with the key get automatically subscribed to them.</simpara>
<simpara>To change the settings of a key, click the key&#8217;s description in the list to display its <guimenu>Details</guimenu>
 page (see <xref linkend="_fig_s1_sm_systems_akey_details"/>). Via additional tabs you can select child channels, packages, configuration channels, group membership and view activated systems.
Modify the appropriate tab then click the <guimenu>Update Activation Key</guimenu>
 button.
To disassociate channels and groups from a key, deselect them in the respective menus by <keycap>Ctrl</keycap>
-clicking their highlighted names.
To remove a key entirely, click the <guimenu>Delete Key</guimenu>
 link in the upper right corner of the <guimenu>Details</guimenu>
 page.
In the upper right corner find also the <guimenu>Clone Key</guimenu>
 link.</simpara>
<figure>
<title>Activation Key Details With Subtabs <anchor xml:id="_fig_s1_sm_systems_akey_details"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_activation_key_details.png" width="80%"/>
</imageobject>
<textobject><phrase>systems activation key details</phrase></textobject>
</mediaobject>
</figure>
<simpara>Any (client tools) package installation requires that the Client Tools channel is available and the <guimenu>Provisioning</guimenu>
 check box is selected.
The Client Tools channel should be selected in the <guimenu>Child Channels</guimenu>
 tab.</simpara>
<simpara>After creating the activation key, you can see in the <guimenu>Details</guimenu>
 tab a check box named <guimenu>Configuration File Deployment</guimenu>
.
If you select it, all needed packages are automatically added to the <guimenu>Packages</guimenu>
 list.
By default, the following packages are added: <package>rhncfg</package>
, <package>rhncfg-client</package>
, and <package>rhncfg-actions</package>
.</simpara>
<simpara>If you select <guimenu>Virtualization Host</guimenu>
 you automatically get the following package: <package>rhn-virtualization-host</package>
.</simpara>
<simpara>Adding the <package>osad</package>
 package makes sense to execute scheduled actions immediately after the schedule time.
When the activation key is created, you can add packages with selecting the key (<menuchoice><guimenu>Software</guimenu> <guimenuitem>Activation Keys</guimenuitem></menuchoice>
), then on the activation key details tab, go for the <guimenu>Packages</guimenu>
 subtab and add <package>osad</package>
.</simpara>
<simpara>To disable system activations with a key, uncheck the corresponding box in the <guimenu>Enabled</guimenu>
 column in the key list.
The key can be re-enabled by selecting the check box.
Click the <guimenu>Update Activation Keys</guimenu>
 button on the bottom right-hand corner of the page to apply your changes.</simpara>
</section>
<section xml:id="_s3_sm_system_keys_multiple"><title>Using Multiple Activation Keys at Once</title><simpara>Multiple activation keys can be specified at the command line or in a single autoinstallation profile.
This allows you to aggregate the aspects of various keys without re-creating a specific key for every system that you want to register, simplifying the registration and autoinstallation processes while slowing the growth of your key list.
Separate keys with a comma at the command line with <command>rhnreg_ks</command> or in a &kickstart;
 profile in the <guimenu>Activation Keys</guimenu>
 tab of the <guimenu>Autoinstallation Details</guimenu>
 page.</simpara>
<simpara>Registering with multiple activation keys requires some caution.
Conflicts between some values cause registration to fail.
Conflicts in the following values do not cause registration to fail, a combination of values is applied: software packages, software child channels, and configuration channels.
Conflicts in the remaining properties are resolved in the following manner:</simpara>
<itemizedlist>
<listitem>
<para>Base software channels: registration fails.</para>
</listitem>
<listitem>
<para>System types: registration fails.</para>
</listitem>
<listitem>
<para>Enable configuration flag: configuration management is set.</para>
</listitem>
</itemizedlist>
<simpara>Do not use system-specific activation keys along with other activation keys; registration fails in this event.</simpara>
<simpara>You are now ready to use multiple activation keys at once.</simpara>
</section>
</section>
<section xml:id="_ref.webui.systems.profiles"><title>Stored Profiles</title><simpara><indexterm>
<primary>Web Interface</primary><secondary>stored profiles</secondary>
</indexterm>
<indexterm>
<primary>stored profiles</primary>
</indexterm></simpara>
<simpara>&susemgr;
Provisioning customers can create package profiles via the <guimenu>System Details</guimenu>
 page.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_stored_profiles.png" width="80%"/>
</imageobject>
<textobject><phrase>systems stored profiles</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Under <menuchoice><guimenu>Software</guimenu> <guisubmenu>Packages</guisubmenu> <guimenuitem>Profiles</guimenuitem></menuchoice>
, click <guimenu>Create System Profile</guimenu>
.
Enter a <guimenu>Profile Name</guimenu>
 and <guimenu>Profile Description</guimenu>
, then click <guimenu>Create Profile</guimenu>
.
These profiles are displayed on the <guimenu>Stored Profiles</guimenu>
 page (left navigation bar), where they can be edited or deleted.</simpara>
<simpara>To edit a profile, click its name in the list, alter its name or description, and click the <guimenu>Update</guimenu>
 button.
To view software associated with the profile, click the <guimenu>Packages</guimenu>
 subtab.
To remove the profile entirely, click <guimenu>Delete Profile</guimenu>
 at the upper-right corner of the page.</simpara>
<simpara>For more information about stored profiles, see <xref linkend="_s1_package_profiles"/> in <xref linkend="_s4_sm_system_details_packages"/>.</simpara>
</section>
<section xml:id="_ref.webui.systems.cust_info"><title>Custom System Info</title><simpara>&susemgr;
customers may include completely customizable information about their systems.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_custom_system_info.png" width="80%"/>
</imageobject>
<textobject><phrase>systems custom system info</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Unlike with notes, the information here is more formal and can be searched.
for example, you may decide to specify an asset tag for each system.
To do so, select <guimenu>Custom System Info</guimenu>
 from the left navigation bar and create an <literal>asset</literal> key.</simpara>
<simpara>Click <guimenu>Create Key</guimenu>
 in the upper-right corner of the page.
Enter a suitable label and description, such as <literal>Asset</literal> and <literal>Precise location of each system</literal>, then click <guimenu>Create Key</guimenu>
.
The key will show up in the custom info keys list.</simpara>
<simpara>When the key exists, you may assign a value to it through the <guimenu>Custom Info</guimenu>
 tab of the <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="_s5_sm_system_details_info"/> for instructions.</simpara>
</section>
</chapter>
<chapter xml:id="_ref.webui.systems.autoinst"><title>Autoinstallation</title><note>
<title>Autoinstallation Types: &ay;and Kickstart</title>
<simpara>In the following section, &ay;
and &ay;
features apply for &sle;
client systems only.
For &rhela;
systems, use Kickstart and Kickstart features.</simpara>
</note>
<simpara>&ay;
and Kickstart configuration files allow administrators to create an environment for automating otherwise time-consuming system installations, such as multiple servers or workstations. &ay;
files have to be uploaded to be managed with &susemgr;
.
Kickstart files can be created, modified, and managed within the &susemgr;
Web interface.</simpara>
<simpara>&susemgr;
also features the Cobbler installation server.
For more information on Cobbler, see <xref linkend="_advanced.topics.cobbler"/>.</simpara>
<simpara>&susemgr;
provides an interface for developing Kickstart and &ay;
profiles that can be used to install &rhel;
or &sle;
on either new or already-registered systems automatically according to certain specifications.</simpara>
<figure>
<title>Autoinstallation Overview</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_kickstart_overview.png" width="444%"/>
</imageobject>
<textobject><phrase>systems kickstart overview</phrase></textobject>
</mediaobject>
</figure>
<simpara>This overview page displays the status of automated installations (Kickstart and &ay;
) on your client systems: the types and number of profiles you have created and the progress of systems that are scheduled to be installed using Kickstart or &ay;
.
In the upper right area is the <guimenu>Autoinstallation Actions</guimenu>
 section, which contains a series of links to management actions for your Kickstart or &ay;
 profiles.
Before explaining the various automated installation options on this page, the next two sections provide an introduction to &ay;
 (<xref linkend="_ref.webui.systems.autoinst.ay_intro"/>) and Kickstart (<xref linkend="_ref.webui.systems.autoinst.kick_intro"/>).</simpara>
<section xml:id="_ref.webui.systems.autoinst.ay_intro"><title>Introduction to &ay;</title><simpara>Using &ay;
, a system administrator can create a single file containing the answers to all the questions that would normally be asked during a typical installation of a &sle;
system.</simpara>
<simpara>&ay;
files can be kept on a single server system and read by individual computers during the installation.
This way the same &ay;
file is used to install &sle;
on multiple machines.</simpara>
<simpara>The [ref]_ SUSE Linux Enterprise Server AutoYaST_
 (<link xl:href="https://www.suse.com/documentation/sles-12/book_autoyast/data/book_autoyast.html">https://www.suse.com/documentation/sles-12/book_autoyast/data/book_autoyast.html</link>) contains an in-depth discussion of <quote>Automated
   Installation</quote>
 using &ay;
.</simpara>
<section xml:id="_s4_system_ay_intro_explain"><title>&ay; Explained</title><simpara><indexterm>
<primary>AutoYaST</primary><secondary>explained</secondary>
</indexterm>
<indexterm>
<primary>explained</primary>
</indexterm></simpara>
<simpara>When a machine is to receive a network-based &ay;
installation, the following events must occur in this order:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>After being connected to the network and turned on, the machine&#8217;s PXE logic broadcasts its MAC address and requests to be discovered.</para>
</listitem>
<listitem>
<para>If no static IP address is used, the DHCP server recognizes the discovery request and offers network information needed for the new machine to boot. This includes an IP address, the default gateway to be used, the netmask of the network, the IP address of the TFTP or HTTP server holding the bootloader program, and the full path and file name to that program (relative to the server&#8217;s root).</para>
</listitem>
<listitem>
<para>The machine applies the networking information and initiates a session with the server to request the bootloader program.</para>
</listitem>
<listitem>
<para>The bootloader searches for its configuration file on the server from which it was loaded. This file dictates which Kernel and Kernel options, such as the initial RAM disk (initrd) image, should be executed on the booting machine. Assuming the bootloader program is SYSLINUX, this file is located in the <filename>pxelinux.cfg</filename> directory on the server and named the hexadecimal equivalent of the new machine&#8217;s IP address. For example, a bootloader configuration file for &sls; should contain:</para>
<screen>port 0
prompt 0
timeout 1
default autoyast
label autoyast
  kernel vmlinuz
  append autoyast=http://`my_susemanager_server`/`path`\
    install=http://`my_susemanager_server`/`repo_tree`</screen>
</listitem>
<listitem>
<para>The machine accepts and uncompresses the initrd and kernel, boots the kernel, fetches the instsys from the install server and initiates the &ay; installation with the options supplied in the bootloader configuration file, including the server containing the &ay; configuration file.</para>
</listitem>
<listitem>
<para>The new machine is installed based on the parameters established within the &ay; configuration file.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_s4_system_ay_intro_prereq"><title>&ay; Prerequisites</title><simpara>Some preparation is required for your infrastructure to handle &ay;
installations.
For instance, before creating &ay;
profiles, you may consider:</simpara>
<itemizedlist>
<listitem>
<para>A DHCP server is not required for &ay; , but it can make things easier. If you are using static IP addresses, you should select static IP while developing your &ay; profile.</para>
</listitem>
<listitem>
<para>Host the &ay; distribution trees via HTTP, properly provided by &susemgr; .</para>
</listitem>
<listitem>
<para>If conducting a so-called bare-metal &ay; installation, provide the following settings:</para>
<itemizedlist>
<listitem>
<para>Configure DHCP to assign the required networking parameters and the bootloader program location.</para>
</listitem>
<listitem>
<para>In the bootloader configuration file, specify the kernel and appropriate kernel options to be used.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</section>
<section xml:id="_s4_system_ay_iso"><title>Building Bootable &ay; ISOs</title><simpara>While you can schedule a registered system to be installed by &ay;
with a new operating system and package profile, you can also automatically install a system that is not registered with &susemgr;
, or does not yet have an operating system installed.
One common method of doing this is to create a bootable CD-ROM that is inserted into the target system.
When the system is rebooted or switched on, it boots from the CD-ROM, loads the &ay;
configuration from your &susemgr;
, and proceeds to install &sls;
according to the &ay;
profile you have created.</simpara>
<simpara>To use the CD-ROM, boot the system and type <literal>autoyast</literal> at the prompt (assuming you left the label for the &ay;
 boot as <literal>autoyast</literal>). When you press <keycap>Enter</keycap>
, the &ay;
 installation begins.</simpara>
<simpara>For more information about image creation, refer to KIWI at <link xl:href="http://doc.opensuse.org/projects/kiwi/doc/">http://doc.opensuse.org/projects/kiwi/doc/</link>.</simpara>
</section>
<section xml:id="_s4_system_ay_pxe"><title>Integrating &ay; with PXE</title><simpara>In addition to CD-ROM-based installations, &ay;
 installation through a Pre-Boot Execution Environment (PXE) is supported.
This is less error-prone than CDs, enables &ay;
 installation from bare metal, and integrates with existing PXE/DHCP environments.</simpara>
<simpara>To use this method, make sure your systems have network interface cards (NIC) that support PXE, install and configure a PXE server, ensure DHCP is running, and place the installation repository on an HTTP server for deployment.
Finally upload the &ay;
profile via the Web interface to the &susemgr;
server.
Once the &ay;
profile has been created, use the URL from the <guimenu>Autoinstallation Overview</guimenu>
 page, as for CD-ROM-based installations.</simpara>
<simpara>To obtain specific instructions for conducting PXE &ay;
installation, refer to the <emphasis>Using PXE Boot</emphasis> section of the <emphasis><phrase role="ref">SUSE Linux Enterprise Deployment Guide</phrase></emphasis>
.</simpara>
<simpara>Starting with <xref linkend="_ref.webui.systems.autoinst.profiles"/>, &ay;
 options available from <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Kickstart</guimenuitem></menuchoice>
 are described.</simpara>
</section>
</section>
<section xml:id="_ref.webui.systems.autoinst.kick_intro"><title>Introduction to Kickstart</title><simpara>Using Kickstart, a system administrator can create a single file containing the answers to all the questions that would normally be asked during a typical installation of &rhel;
.</simpara>
<simpara>Kickstart files can be kept on a single server and read by individual computers during the installation.
This method allows you to use one Kickstart file to install &rhel;
on multiple machines.</simpara>
<simpara>The <emphasis><phrase role="ref">Red Hat Enterprise Linux System Administration
   Guide</phrase></emphasis>
 contains an in-depth description of Kickstart (<link xl:href="https://access.redhat.com/documentation/en/red-hat-enterprise-linux/">https://access.redhat.com/documentation/en/red-hat-enterprise-linux/</link>).</simpara>
<section xml:id="_s4_system_ks_intro_explain"><title>Kickstart Explained</title><simpara>When a machine is to receive a network-based &kickstart;
, the following events must occur in this order:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>After being connected to the network and turned on, the machine&#8217;s PXE logic broadcasts its MAC address and requests to be discovered.</para>
</listitem>
<listitem>
<para>If no static IP address is used, the DHCP server recognizes the discovery request and offers network information needed for the new machine to boot. This information includes an IP address, the default gateway to be used, the netmask of the network, the IP address of the TFTP or HTTP server holding the bootloader program, and the full path and file name of that program (relative to the server&#8217;s root).</para>
</listitem>
<listitem>
<para>The machine applies the networking information and initiates a session with the server to request the bootloader program.</para>
</listitem>
<listitem>
<para>The bootloader searches for its configuration file on the server from which it was loaded. This file dictates which kernel and kernel options, such as the initial RAM disk (initrd) image, should be executed on the booting machine. Assuming the bootloader program is SYSLINUX, this file is located in the <filename>pxelinux.cfg</filename> directory on the server and named the hexadecimal equivalent of the new machine&#8217;s IP address. For example, a bootloader configuration file for Red Hat Enterprise Linux AS 2.1 should contain:</para>
<screen>port 0
prompt 0
timeout 1
default My_Label
label My_Label
      kernel vmlinuz
      append ks=http://`my_susemanager_server`/`path`\
          initrd=initrd.img network apic</screen>
</listitem>
<listitem>
<para>The machine accepts and uncompresses the init image and kernel, boots the kernel, and initiates a Kickstart installation with the options supplied in the bootloader configuration file, including the server containing the Kickstart configuration file.</para>
</listitem>
<listitem>
<para>This &kickstart; configuration file in turn directs the machine to the location of the installation files.</para>
</listitem>
<listitem>
<para>The new machine is built based on the parameters established within the Kickstart configuration file.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_s4_system_ks_intro_prereq"><title>Kickstart Prerequisites</title><simpara>Some preparation is required for your infrastructure to handle &kickstart;
s.
For instance, before creating Kickstart profiles, you may consider:</simpara>
<itemizedlist>
<listitem>
<para>A DHCP server is not required for kickstarting, but it can make things easier. If you are using static IP addresses, select static IP while developing your Kickstart profile.</para>
</listitem>
<listitem>
<para>An FTP server can be used instead of hosting the Kickstart distribution trees via HTTP.</para>
</listitem>
<listitem>
<para>If conducting a bare metal &kickstart; , you should configure DHCP to assign required networking parameters and the bootloader program location. Also, specify within the bootloader configuration file the kernel to be used and appropriate kernel options.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_s4_system_ks_iso"><title>Building Bootable Kickstart ISOs</title><simpara>While you can schedule a registered system to be kickstarted to a new operating system and package profile, you can also &kickstart;
a system that is not registered with &susemgr;
or does not yet have an operating system installed.
One common method of doing this is to create a bootable CD-ROM that is inserted into the target system.
When the system is rebooted, it boots from the CD-ROM, loads the &kickstart;
configuration from your &susemgr;
, and proceeds to install &rhel;
according to the Kickstart profile you have created.</simpara>
<simpara>To do this, copy the contents of <filename>/isolinux</filename>
 from the first CD-ROM of the target distribution.
Then edit the <filename>isolinux.cfg</filename>
 file to default to 'ks'. Change the 'ks' section to the following template:</simpara>
<screen>label ks
kernel vmlinuz
  append text ks=`url`initrd=initrd.img lang= devfs=nomount \
    ramdisk_size=16438`ksdevice`</screen>
<simpara>IP address-based &kickstart;
URLs will look like this:</simpara>
<screen>http://`my.manager.server`/kickstart/ks/mode/ip_range</screen>
<simpara>The &kickstart;
distribution defined via the IP range should match the distribution from which you are building, or errors will occur. <replaceable>ksdevice</replaceable> is optional, but looks like:</simpara>
<screen>ksdevice=eth0</screen>
<simpara>It is possible to change the distribution for a Kickstart profile within a family, such as Red Hat Enterprise Linux AS 4 to Red Hat Enterprise Linux ES 4, by specifying the new distribution label.
Note that you cannot move between versions (4 to 5) or between updates (U1 to U2).</simpara>
<simpara>Next, customize <filename>isolinux.cfg</filename>
 further for your needs by adding multiple Kickstart options, different boot messages, shorter timeout periods, etc.</simpara>
<simpara>Next, create the ISO as described in the <emphasis>Making an
    Installation Boot CD-ROM</emphasis> section of the <emphasis><phrase role="ref">Red Hat
    Enterprise Linux Installation Guide</phrase></emphasis>
.
Alternatively, issue the command:</simpara>
<screen>mkisofs -o file.iso -b isolinux.bin -c boot.cat -no-emul-boot \
  -boot-load-size 4 -boot-info-table -R -J -v -T isolinux/</screen>
<simpara>Note that <filename>isolinux/</filename>
 is the relative path to the directory containing the modified isolinux files copied from the distribution CD, while <filename>file.iso</filename>
 is the output ISO file, which is placed into the current directory.</simpara>
<simpara>Burn the ISO to CD-ROM and insert the disc.
Boot the system and type "ks" at the prompt (assuming you left the label for the Kickstart boot as 'ks'). When you press <keycap>Enter</keycap>
, Kickstart starts running.</simpara>
</section>
<section xml:id="_s4_system_ks_pxe"><title>Integrating Kickstart with PXE</title><simpara>In addition to CD-ROM-based installs, Kickstart supports a Pre-Boot Execution Environment (PXE). This is less error-prone than CDs, enables kickstarting from bare metal, and integrates with existing PXE/DHCP environments.</simpara>
<simpara>To use this method, make sure your systems have network interface cards (NIC) that support PXE.
Install and configure a PXE server and ensure DHCP is running.
Then place the appropriate files on an HTTP server for deployment.
Once the &kickstart;
profile has been created, use the URL from the <guimenu>Kickstart Details</guimenu>
 page, as for CD-ROM-based installs.</simpara>
<simpara>To obtain specific instructions for conducting PXE &kickstart;
s, refer to the <emphasis>PXE Network Installations</emphasis> chapter of the <emphasis><phrase role="ref">Red Hat Enterprise Linux 4 System Administration
    Guide</phrase></emphasis>
.</simpara>
<note>
<simpara>Running the Network Booting Tool, as described in the Red Hat Enterprise Linux 4: System Administration Guide, select "HTTP" as the protocol and include the domain name of the &susemgr;
in the Server field if you intend to use it to distribute the installation files.</simpara>
</note>
<simpara>The following sections describe the autoinstallation options available from the <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Autoinstallation</guimenuitem></menuchoice>
 page.</simpara>
</section>
</section>
<section xml:id="_ref.webui.systems.autoinst.profiles"><title>Autoinstallation &gt; Profiles (Kickstart and &ay; )</title><simpara>This page lists all profiles for your organization, shows whether these profiles are active, and specifies the distribution tree with which each profile is associated.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_kickstart_overview.png" width="444%"/>
</imageobject>
<textobject><phrase>systems kickstart overview</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>You can either create a Kickstart profile by clicking the <guimenu>Create Kickstart Profile</guimenu>
 link, upload or paste the contents of a new profile using the <guimenu>Upload Kickstart/Autoyast File</guimenu>
, or edit an existing Kickstart profile by clicking the name of the profile.
Note, you can only update &ay;
 profiles using the upload button.
You can also view &ay;
 profiles in the edit box or change the virtualization type using the selection list.</simpara>
<section xml:id="_ref.webui.systems.autoinst.profiles.create"><title>Create a Kickstart Profile</title><simpara>Click on the <guimenu>Create Kickstart Profile</guimenu>
 link from the <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Autoinstallation</guimenuitem></menuchoice>
 page to start the wizard that populates the base values needed for a Kickstart profile.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/create_profile_wizard.png" width="444%"/>
</imageobject>
<textobject><phrase>create profile wizard</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<title>Procedure: Creating a Kickstart Profile</title>
<listitem>
<para>On the first line, enter a Kickstart profile label. This label cannot contain spaces, so use dashes (<literal>-</literal>) or underscores (<literal>\_</literal>) as separators.</para>
</listitem>
<listitem>
<para>Select a <guimenu>Base Channel</guimenu> for this profile, which consists of packages based on a specific architecture and Red Hat Enterprise Linux release.</para>
<note>
<title>Creating Base Channel</title>
<simpara>Base channels are only available if a suitable distribution is created first.
For creating distributions, see <xref linkend="_ref.webui.systems.autoinst.distribution"/>.</simpara>
</note>
</listitem>
<listitem>
<para>Select an <guimenu>Kickstartable Tree</guimenu> for this profile. The <guimenu>Kickstartable Tree</guimenu> drop-down menu is only populated if one or more distributions have been created for the selected base channel (see <xref linkend="_ref.webui.systems.autoinst.distribution"/>).</para>
</listitem>
<listitem>
<para>Instead of selecting a specific tree, you can also check the box <guimenu>Always use the newest Tree for this base channel.</guimenu> This setting lets &susemgr; automatically pick the latest tree that is associated with the specified base channels. If you add new trees later, &susemgr; will always keep the most recently created or modified.</para>
</listitem>
<listitem>
<para>Select the <guimenu>Virtualization Type</guimenu> from the drop-down menu.</para>
<note>
<simpara>If you do not intend to use the Kickstart profile to create virtual guest systems, you can leave the drop-down at the default <guimenu>None</guimenu>
 choice.</simpara>
</note>
</listitem>
<listitem>
<para>On the second page, select (or enter) the location of the Kickstart tree.</para>
</listitem>
<listitem>
<para>On the third page, select a root password for the system.</para>
</listitem>
</orderedlist>
<simpara>Depending on your base channel, your newly created Kickstart profile might be subscribed to a channel that is missing required packages.
For &kickstart;
to work properly, the following packages should be present in its base channel: <filename>pyOpenSSL</filename>
, <filename>rhnlib</filename>
, <filename>libxml2-python</filename>
, and <filename>spacewalk-koan</filename>
 and associated packages.</simpara>
<simpara>To resolve this issue:</simpara>
<itemizedlist>
<listitem>
<para>Make sure that the Tools software channel for the Kickstart profile&#8217;s base channel is available to your organization. If it is not, you must request entitlements for the Tools software channel from the &susemgr; administrator.</para>
</listitem>
<listitem>
<para>Make sure that the Tools software channel for this Kickstart profile&#8217;s base channel is available to your &susemgr; as a child channel.</para>
</listitem>
<listitem>
<para>Make sure that <filename>rhn-kickstart</filename> and associated packages corresponding to this &kickstart; are available in the Tools child channel.</para>
</listitem>
</itemizedlist>
<simpara>The final stage of the wizard presents the menu:Autoinstallation
   Details[Details]
 tab.
On this tab and the other subtabs, nearly every option for the new Kickstart profile can be customized.</simpara>
<simpara>Once created, you can access the Kickstart profile by downloading it from the <guimenu>Autoinstallation Details</guimenu>
 page by clicking the <guimenu>Autoinstallation File</guimenu>
 subtab and clicking the <guimenu>Download Autoinstallation File</guimenu>
 link.</simpara>
<simpara>If the Kickstart file is <emphasis>not</emphasis> managed by &susemgr;
, you can access it via the following URL:</simpara>
<screen>http://`my.manager.server`/ks/dist/ks-rhel-`ARCH`-`VARIANT`-`VERSION`</screen>
<simpara>In the above example, <replaceable>ARCH</replaceable> is the architecture of the Kickstart file, <replaceable>VARIANT</replaceable> is either <literal>client</literal> or <literal>server</literal>, and <replaceable>VERSION</replaceable> is the release of &rhel;
 associated with the Kickstart file.</simpara>
<simpara>The following sections describe the options available on each subtab.</simpara>
<section xml:id="_s4_system_ks_details_details"><title>Autoinstallation Details  &gt;  Details</title><figure>
<title>Autoinstallation Details <anchor xml:id="_s3_system_ks_autoinst_details"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="images/details-ks-3.png" width="444%"/>
</imageobject>
<textobject><phrase>details ks 3</phrase></textobject>
</mediaobject>
</figure>
<simpara><xref linkend="_s3_system_ks_autoinst_details"/> shows the subtabs that are available.
On the menu:Autoinstallation
    Details[Details]
 page, you have the following options:</simpara>
<itemizedlist>
<listitem>
<para>Change the profile <guimenu>Label</guimenu> .</para>
</listitem>
<listitem>
<para>Change the operating system by clicking menu:(Change)[] .</para>
</listitem>
<listitem>
<para>Change the <guimenu>Virtualization Type</guimenu> .</para>
<note>
<simpara>Changing the <guimenu>Virtualization Type</guimenu>
 may require changes to the Kickstart profile bootloader and partition options, potentially overwriting user customizations.
Consult the <guimenu>Partitioning</guimenu>
 tab to verify any new or changed settings.</simpara>
</note>
</listitem>
<listitem>
<para>Change the amount of <guimenu>Virtual Memory</guimenu> (in Megabytes of RAM) allocated to virtual guests autoinstalled with this profile.</para>
</listitem>
<listitem>
<para>Change the number of <guimenu>Virtual CPUs</guimenu> for each virtual guest.</para>
</listitem>
<listitem>
<para>Change the <guimenu>Virtual Storage Path</guimenu> from the default in <filename>/var/lib/xen/</filename> .</para>
</listitem>
<listitem>
<para>Change the amount of <guimenu>Virtual Disk Space</guimenu> (in GB) allotted to each virtual guest.</para>
</listitem>
<listitem>
<para>Change the <guimenu>Virtual Bridge</guimenu> for networking of the virtual guest.</para>
</listitem>
<listitem>
<para>Deactivate the profile so that it cannot be used to schedule a &kickstart; by removing the <guimenu>Active</guimenu> check mark.</para>
</listitem>
<listitem>
<para>Check whether to enable logging for custom <option>%post</option> scripts to the <filename>/root/ks-post.log</filename> file.</para>
</listitem>
<listitem>
<para>Decide whether to enable logging for custom <option>%pre</option> scripts to the <filename>/root/ks-pre.log</filename> file.</para>
</listitem>
<listitem>
<para>Choose whether to preserve the <filename>ks.cfg</filename> file and all <literal>%include</literal> fragments to the <filename>/root/</filename> directory of all systems autoinstalled with this profile.</para>
</listitem>
<listitem>
<para>Select whether this profile is the default for all of your organization&#8217;s &kickstart; s by checking or unchecking the box.</para>
</listitem>
<listitem>
<para>Add any <guimenu>Kernel Options</guimenu> in the corresponding text box.</para>
</listitem>
<listitem>
<para>Add any <guimenu>Post Kernel Options</guimenu> in the corresponding text box.</para>
</listitem>
<listitem>
<para>Enter comments that are useful to you in distinguishing this profile from others.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_s4_system_ks_details_options"><title>Autoinstallation Details &gt;  Operating System</title><simpara>On this page, you can make the following changes to the operating system that the Kickstart profile installs:</simpara>
<variablelist>
<varlistentry>
<term>Change the base channel</term>
<listitem>
<simpara>Select from the available base channels. &susemgr;
administrators see a list of all base channels that are currently synced to the &susemgr;
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Child Channels</term>
<listitem>
<simpara>Subscribe to available child channels of the base channel, such as the Tools channel.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Available Trees</term>
<listitem>
<simpara>Use the drop-down menu to choose from available trees associated with the base channel.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Always use the newest Tree for this base channel.</term>
<listitem>
<simpara>Instead of selecting a specific tree, you can also check the box <guimenu>Always use the newest Tree for this base channel.</guimenu>
This setting lets &susemgr;
automatically pick the latest tree that is associated with the specified base channels.
If you add new trees later, &susemgr;
will always keep the most recently created or modified.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Software URL (File Location)</term>
<listitem>
<simpara>The exact location from which the Kickstart tree is mounted.
This value is determined when the profile is created.
You can view it on this page but you cannot change it.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_s4_sm_system_kick_details_variables"><title>Autoinstallation Details &gt;  Variables</title><simpara>Autoinstallation variables can substitute values in Kickstart and &ay;
profiles.
To define a variable, create a name-value pair (<replaceable>name/value</replaceable>) in the text box.</simpara>
<simpara>For example, if you want to autoinstall a system that joins the network of a specified organization (for example the Engineering department), you can create a profile variable to set the IP address and the gateway server address to a variable that any system using that profile will use.
Add the following line to the <guimenu>Variables</guimenu>
 text box.</simpara>
<screen>IPADDR=192.168.0.28
GATEWAY=192.168.0.1</screen>
<simpara>Now you can use the name of the variable in the profile instead of a specific value.
For example, the <option>network</option> part of a Kickstart file looks like the following:</simpara>
<screen>network --bootproto=static --device=eth0 --onboot=on --ip=$IPADDR \
  --gateway=$GATEWAY</screen>
<simpara>The <option>$IPADDR</option> will be resolved to <literal>192.168.0.28</literal>, and the <option>$GATEWAY</option> to <literal>192.168.0.1</literal></simpara>
<note>
<simpara>There is a hierarchy when creating and using variables in Kickstart files.
System Kickstart variables take precedence over <guimenu>Profile</guimenu>
 variables, which in turn take precedence over <guimenu>Distribution</guimenu>
 variables.
Understanding this hierarchy can alleviate confusion when using variables in &kickstart;
s.</simpara>
</note>
<simpara>Using variables are just one part of the larger Cobbler infrastructure for creating templates that can be shared between multiple profiles and systems.
For more information about Cobbler and templates, refer to <xref linkend="_advanced.topics.cobbler"/>.</simpara>
</section>
<section xml:id="_s4_sm_system_kick_details_advanced"><title>Autoinstallation Details &gt;  Advanced Options</title><simpara>From this page, you can toggle several installation options on and off by checking and unchecking the boxes to the left of the option.
For most installations, the default options are correct.
Refer to Red Hat Enterprise Linux documentation for details.</simpara>
</section>
<section xml:id="_s4_sm_system_kick_details_defprofile"><title>Assigning Default Profiles to an Organization</title><simpara>You can specify an Organization Default Profile by clicking <menuchoice><guimenu>Autoinstallation</guimenu> <guisubmenu>Profiles</guisubmenu> <guisubmenu>profile
    name</guisubmenu> <guimenuitem>Details</guimenuitem></menuchoice>
, then checking the <guimenu>Organization Default Profile</guimenu>
 box and finally clicking <guimenu>Update</guimenu>
.</simpara>
</section>
<section xml:id="_s4_sm_system_kick_details_iprange"><title>Assigning IP Ranges to Profiles</title><simpara>You can associate an IP range to an autoinstallation profile by clicking on <menuchoice><guimenu>Autoinstallation</guimenu> <guisubmenu>Profiles</guisubmenu> <guisubmenu>profile name</guisubmenu> <guimenuitem>Bare Metal Autoinstallation</guimenuitem></menuchoice>
, adding an IPv4 range and finally clicking <guimenu>Add IP Range</guimenu>
.</simpara>
</section>
<section xml:id="_s4_sm_system_kick_details_packages"><title>Autoinstallation Details &gt;  Bare Metal Autoinstallation</title><simpara>This subtab provides the information necessary to Kickstart systems that are not currently registered with &susemgr;
.
Using the on-screen instructions, you may either autoinstall systems using boot media (CD-ROM) or by IP address.</simpara>
</section>
<section xml:id="_s4_sm_system_kick_details_pre"><title>System Details &gt;  Details</title><figure>
<title>System Details <anchor xml:id="_s3_system_ks_system_details"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="images/details-ks-4.png" width="444%"/>
</imageobject>
<textobject><phrase>details ks 4</phrase></textobject>
</mediaobject>
</figure>
<simpara><xref linkend="_s3_system_ks_system_details"/> shows the subtabs that are available from the <guimenu>System Details</guimenu>
 tab.</simpara>
<simpara>On the menu:System
    Details[Details]
 page, you have the following options:</simpara>
<itemizedlist>
<listitem>
<para>Select between DHCP and static IP, depending on your network.</para>
</listitem>
<listitem>
<para>Choose the level of SELinux that is configured on kickstarted systems.</para>
</listitem>
<listitem>
<para>Enable configuration management or remote command execution on kickstarted systems.</para>
</listitem>
<listitem>
<para>Change the root password associated with this profile.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_s4_sm_system_kick_details_post"><title>System Details &gt;  Locale</title><simpara>Change the timezone for kickstarted systems.</simpara>
</section>
<section xml:id="_s4_system_ks_sysd_partition"><title>System Details &gt;  Partitioning</title><simpara>From this subtab, indicate the partitions that you wish to create during installation.
For example:</simpara>
<screen>partition /boot --fstype=ext3 --size=200
partition swap --size=2000
partition pv.01 --size=1000 --grow
volgroup myvg pv.01 logvol / --vgname=myvg --name=rootvol --size=1000 --grow</screen>
</section>
<section xml:id="_s4_system_ks_sysd_file_pres"><title>System Details &gt;  File Preservation</title><simpara>If you have previously created a file preservation list, include this list as part of the &kickstart;
.
This will protect the listed files from being over-written during the installation process.
Refer to <xref linkend="_ref.webui.systems.autoinst.preserve"/> for information on how to create a file preservation list.</simpara>
</section>
<section xml:id="_s4_system_ks_sysd_gpg_ssl"><title>System Details &gt;  GPG &amp; SSL</title><simpara>From this subtab, select the GPG keys and/or SSL certificates to be exported to the kickstarted system during the %post section of the &kickstart;
.
For &susemgr;
customers, this list includes the SSL Certificate used during the installation of &susemgr;
.</simpara>
<note>
<simpara>Any GPG key you wish to export to the kickstarted system must be in ASCII rather than binary format.</simpara>
</note>
</section>
<section xml:id="_s4_system_ks_sysd_trouble"><title>System Details &gt;  Troubleshooting</title><simpara>From this subtab, change information that may help with troubleshooting hardware problems:</simpara>
<variablelist>
<varlistentry>
<term>Bootloader</term>
<listitem>
<simpara>For some headless systems, it is better to select the non-graphic LILO bootloader.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Kernel Parameters</term>
<listitem>
<simpara>Enter kernel parameters here that may help to narrow down the source of hardware issues.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_s4_system_ks_soft_pkg_group"><title>Software &gt;  Package Groups</title><figure>
<title>Software <anchor xml:id="_s3_system_ks_software"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="images/details-ks-5.png" width="444%"/>
</imageobject>
<textobject><phrase>details ks 5</phrase></textobject>
</mediaobject>
</figure>
<simpara><xref linkend="_s3_system_ks_software"/> shows the subtabs that are available from the <guimenu>Software</guimenu>
 tab.</simpara>
<simpara>Enter the package groups, such as <literal role="systemitem">@office</literal>
 or <literal role="systemitem">@admin-tools</literal>
 you would like to install on the kickstarted system in the large text box.
If you would like to know what package groups are available, and what packages they contain, refer to the <filename>RedHat/base/</filename>
 file of your Kickstart tree.</simpara>
</section>
<section xml:id="_s4_system_ks_soft_pkg_profile"><title>Software &gt;  Package Profiles</title><simpara>If you have previously created a Package Profile from one of your registered systems, you can use that profile as a template for the files to be installed on a kickstarted system.
Refer to <xref linkend="_s1_package_profiles"/> in <xref linkend="_s4_sm_system_details_packages"/> for more information about package profiles.</simpara>
</section>
<section xml:id="_s4_system_ks_act_keys"><title>Activation Keys</title><figure>
<title>Activation Keys</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/details-ks-6.png" width="444%"/>
</imageobject>
<textobject><phrase>details ks 6</phrase></textobject>
</mediaobject>
</figure>
<simpara>The <guimenu>Activation Keys</guimenu>
 tab allows you to select Activation Keys to include as part of the Kickstart profile.
These keys, which must be created before the Kickstart profile, will be used when re-registering kickstarted systems.</simpara>
</section>
<section xml:id="_s4_system_ks_scripts"><title>Scripts</title><figure>
<title>Scripts</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/details-ks-7.png" width="444%"/>
</imageobject>
<textobject><phrase>details ks 7</phrase></textobject>
</mediaobject>
</figure>
<simpara>The <guimenu>Scripts</guimenu>
 tab is where %pre and %post scripts are created.
This page lists any scripts that have already been created for this Kickstart profile.
To create a Kickstart script, perform the following procedure:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Click the <guimenu>add new kickstart script</guimenu> link in the upper right corner.</para>
</listitem>
<listitem>
<para>Enter the path to the scripting language used to create the script, such as <literal>/usr/bin/perl</literal>.</para>
</listitem>
<listitem>
<para>Enter the full script in the large text box.</para>
</listitem>
<listitem>
<para>Indicate whether this script is to be executed in the %pre or %post section of the Kickstart process.</para>
</listitem>
<listitem>
<para>Indicate whether this script is to run outside of the chroot environment. Refer to the <emphasis><phrase role="ref">Post-installation Script</phrase></emphasis> section of the <emphasis><phrase role="ref">Red Hat Enterprise Linux System Administration Guide</phrase></emphasis> for further explanation of the <option>nochroot</option> option.</para>
</listitem>
</orderedlist>
<note>
<simpara>&susemgr;
supports the inclusion of separate files within the Partition Details section of the Kickstart profile.
For instance, you may dynamically generate a partition file based on the machine type and number of disks at &kickstart;
time.
This file can be created via %pre script and placed on the system, such as <filename>/tmp/part-include</filename>
.
Then you can call for that file by entering the following line in the Partition Details field of the menu:System
     Details[Partitioning]
 tab:</simpara>
<screen>%include /tmp/part-include</screen>
</note>
</section>
<section xml:id="_s4_system_ks_ks_file"><title>Autoinstallation File</title><figure>
<title>Autoinstallation File</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/details-ks-8.png" width="444%"/>
</imageobject>
<textobject><phrase>details ks 8</phrase></textobject>
</mediaobject>
</figure>
<simpara>The <guimenu>Autoinstallation File</guimenu>
 tab allows you to view or download the profile that has been generated from the options chosen in the previous tabs.</simpara>
</section>
</section>
<section xml:id="_ref.webui.systems.autoinst.profiles.upload"><title>Upload Kickstart/&ay; File</title><simpara>Click the <guimenu>Upload Kickstart/Autoyast File</guimenu>
 link from the <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Autoinstallation</guimenuitem></menuchoice>
 page to upload an externally prepared &ay;
 or Kickstart profile.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>In the first line, enter a profile <guimenu>Label</guimenu> for the automated installation. This label cannot contain spaces, so use dashes (-) or underscores (_) as separators.</para>
</listitem>
<listitem>
<para>Select an <guimenu>Autoinstallable Tree</guimenu> for this profile. The <guimenu>Autoinstallable Tree</guimenu> drop-down menu is only populated if one or more distributions have been created for the selected base channel (see <xref linkend="_ref.webui.systems.autoinst.distribution"/>).</para>
</listitem>
<listitem>
<para>Instead of selecting a specific tree, you can also check the box <guimenu>Always use the newest Tree for this base channel.</guimenu> This setting lets &susemgr; automatically pick the latest tree that is associated with the specified base channels. If you add new trees later, &susemgr; will always keep the most recently created or modified.</para>
</listitem>
<listitem>
<para>Select the <guimenu>Virtualization Type</guimenu> from the drop-down menu. For more information about virtualization, refer to <xref linkend="_advanced.topics.virtualization"/>.</para>
<note>
<simpara>If you do not intend to use the autoinstall profile to create virtual guest systems, you can leave the drop-down set to the default choice <guimenu>KVM Virtualized Guest</guimenu>
.</simpara>
</note>
</listitem>
<listitem>
<para>Finally, either provide the file contents with cut-and-paste or update the file from the local storage medium:</para>
<itemizedlist>
<listitem>
<para>Paste it into the <guimenu>File Contents</guimenu> box and click <guimenu>Create</guimenu> , or</para>
</listitem>
<listitem>
<para>enter the file name in the <guimenu>File to Upload</guimenu> field and click <guimenu>Upload File</guimenu> .</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<simpara>Once done, four subtabs are available: <guimenu>Details</guimenu>
 (see <xref linkend="_s4_sm_system_kick_details_pre"/>), <guimenu>Bare Metal</guimenu>
 (see <xref linkend="_s4_sm_system_kick_details_packages"/>), <guimenu>Variables</guimenu>
 (see <xref linkend="_s4_sm_system_kick_details_variables"/>), and <guimenu>Autoinstallable File</guimenu>
 (see <xref linkend="_s4_system_ks_ks_file"/>) are available.</simpara>
</section>
</section>
<section xml:id="_ref.webui.systems.autoinst.bare_metal"><title>Autoinstallation &gt;  Bare Metal</title><simpara>Lists the IP addresses that have been associated with the profiles created by your organization.
Click either the range or the profile name to access different tabs of the <guimenu>Autoinstallation Details</guimenu>
 page.</simpara>
</section>
<section xml:id="_ref.webui.systems.autoinst.keys"><title>Autoinstallation &gt;  GPG and SSL Keys</title><simpara>Lists keys and certificates available for inclusion in &kickstart;
profiles and provides a means to create new ones.
This is especially important for customers of &susemgr;
or the Proxy Server because systems kickstarted by them must have the server key imported into &susemgr;
and associated with the relevant &kickstart;
profiles.
Import it by creating a new key here and then make the profile association in the <guimenu>GPG and SSL keys</guimenu>
 subtab of the <guimenu>Autoinstallation Details</guimenu>
 page.</simpara>
<simpara>To create a key or certificate, click the <guimenu>Create Stored Key/Cert</guimenu>
 link in the upper-right corner of the page.
Enter a description, select the type, upload the file, and click the <guimenu>Update Key</guimenu>
 button.
A unique description is required.</simpara>
<important>
<simpara>The GPG key you upload to &susemgr;
must be in ASCII format.
Using a GPG key in binary format causes anaconda, and therefore the &kickstart;
process, to fail.</simpara>
</important>
</section>
<section xml:id="_ref.webui.systems.autoinst.distribution"><title>Autoinstallation &gt;  Distributions</title><simpara>The <guimenu>Distributions</guimenu>
 page enables you to find and create custom installation trees that may be used for automated installations.</simpara>
<note>
<simpara>The <guimenu>Distributions</guimenu>
 page does not display distributions already provided.
They can be found within the <guimenu>Distribution</guimenu>
 drop-down menu of the <guimenu>Autoinstallation Details</guimenu>
 page.</simpara>
<simpara>Before creating a distribution, you must make an installation data available, as described in the <emphasis><phrase role="ref">SUSE Linux Enterprise Deployment Guide</phrase></emphasis>
 (<link xl:href="https://www.suse.com/documentation/sles-12/singlehtml/book_sle_deployment/book_sle_deployment.html">https://www.suse.com/documentation/sles-12/singlehtml/book_sle_deployment/book_sle_deployment.html</link>) or, respectively, the <emphasis>Kickstart Installations</emphasis> chapter of the <emphasis><phrase role="ref">Red Hat Enterprise Linux System
    Administration Guide</phrase></emphasis>
.
This tree must be located in a local directory on the &susemgr;
 server.</simpara>
</note>
<orderedlist numeration="arabic">
<title>Procedure: Creating a Distribution for Autoinstallation</title>
<listitem>
<para>To create a distribution, on the <guimenu>Autoinstallable Distributions</guimenu> page click <guimenu>Create Distribution</guimenu> in the upper right corner.</para>
</listitem>
<listitem>
<para>On the <guimenu>Create Autoinstallable Distribution</guimenu> page, provide the following data:</para>
<itemizedlist>
<listitem>
<para>Enter a label (without spaces) in the <guimenu>Distribution Label</guimenu> field, such as <literal>my-orgs-sles-12-sp2</literal> or <literal>my-orgs-rhel-as-7</literal>.</para>
</listitem>
<listitem>
<para>In the <guimenu>Tree Path</guimenu> field, paste the path to the base of the installation tree.</para>
</listitem>
<listitem>
<para>Select the matching distribution from the <guimenu>Base Channel</guimenu> and <guimenu>Installer Generation</guimenu> drop-down menus, such as <literal>SUSE Linux</literal> for &sle; , or <literal>Red Hat Enterprise Linux 7</literal> for &rhel; 7 client systems.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>When finished, click the <guimenu>Create Autoinstallable Distribution</guimenu> button.</para>
</listitem>
</orderedlist>
<section xml:id="_s4_sm_system_kick_dist_variables"><title>Autoinstallation &gt;  Distributions  &gt;  Variables</title><simpara>Autoinstallation variables can be used to substitute values into Kickstart and &ay;
profiles.
To define a variable, create a name-value pair (<replaceable>name/value</replaceable>) in the text box.</simpara>
<simpara>For example, if you want to autoinstall a system that joins the network of a specified organization (for example the Engineering department) you can create a profile variable to set the IP address and the gateway server address to a variable that any system using that profile will use.
Add the following line to the <guimenu>Variables</guimenu>
 text box.</simpara>
<screen>IPADDR=192.168.0.28
GATEWAY=192.168.0.1</screen>
<simpara>To use the distribution variable, use the name of the variable in the profile to substitute the value.
For example, the <option>network</option> part of a &kickstart;
 file looks like the following:</simpara>
<screen>network --bootproto=static --device=eth0 --onboot=on --ip=$IPADDR \
  --gateway=$GATEWAY</screen>
<simpara>The <option>$IPADDR</option> will be resolved to <literal>192.168.0.28</literal>, and the <option>$GATEWAY</option> to <literal>192.168.0.1</literal>.</simpara>
<note>
<simpara>There is a hierarchy when creating and using variables in Kickstart files.
System Kickstart variables take precedence over Profile variables, which in turn take precedence over Distribution variables.
Understanding this hierarchy can alleviate confusion when using variables in &kickstart;
s.</simpara>
</note>
<simpara>In &ay;
profiles you can use such variables as well.</simpara>
<simpara>Using variables are just one part of the larger Cobbler infrastructure for creating templates that can be shared between multiple profiles and systems.
For more information about Cobbler and templates, refer to <xref linkend="_advanced.topics.cobbler"/>.</simpara>
</section>
</section>
<section xml:id="_ref.webui.systems.autoinst.preserve"><title>Autoinstallation &gt;  File Preservation</title><simpara>Collects lists of files to be protected and re-deployed on systems during &kickstart;
.
For instance, if you have many custom configuration files located on a system to be kickstarted, enter them here as a list and associate that list with the Kickstart profile to be used.</simpara>
<simpara>To use this feature, click the <guimenu>Create File Preservation List</guimenu>
 link at the top.
Enter a suitable label and all files and directories to be preserved.
Enter absolute paths to all files and directories.
Then click <guimenu>Create List</guimenu>
.</simpara>
<important>
<simpara>Although file preservation is useful, it does have limitations.
Each list is limited to a total size of 1 MB.
Special devices like <filename>/dev/hda1</filename>
 and <filename>/dev/sda1</filename>
 are not supported.
Only file and directory names may be entered.
No regular expression wildcards can be used.</simpara>
</important>
<simpara>When finished, you may include the file preservation list in the Kickstart profile to be used on systems containing those files.
Refer to <xref linkend="_ref.webui.systems.autoinst.profiles.create"/> for precise steps.</simpara>
</section>
<section xml:id="_ref.webui.systems.autoinst.snippet"><title>Autoinstallation &gt;  Autoinstallation Snippets</title><simpara>Use snippets to store common blocks of code that can be shared across multiple Kickstart or &ay;
profiles in &susemgr;
.</simpara>
<section xml:id="_s4_sm_system_kick_snippet_default"><title>Autoinstallation  &gt;  Autoinstallation Snippets  &gt;  Default Snippets</title><simpara>Default snippets coming with &susemgr;
are not editable.
You can use a snippet, if you add the <guimenu>Snippet Macro</guimenu>
 statement such as <literal>$SNIPPET('spacewalk/sles_register_script')</literal> to your autoinstallation profile.
This is an &ay;
 profile example:</simpara>
<screen>&lt;init-scripts config:type="list"&gt;
  $SNIPPET('spacewalk/sles_register_script')
&lt;/init-scripts&gt;</screen>
<simpara>When you create a snippet with the <guimenu>Create Snippet</guimenu>
 link, all profiles including that snippet will be updated accordingly.</simpara>
</section>
<section xml:id="_s4_sm_system_kick_snippet_custom"><title>Autoinstallation &gt;  Autoinstallation Snippets  &gt;  Custom Snippets</title><simpara>This is the tab with custom snippets.
Click a name of a snippet to view, edit, or delete it.</simpara>
</section>
<section xml:id="_s4_sm_system_kick_snippet_all"><title>Autoinstallation &gt;  Autoinstallation Snippets  &gt;  All Snippets</title><simpara>The <guimenu>All Snippets</guimenu>
 tab lists default and custom snippets together.</simpara>
</section>
</section>
<section xml:id="_ref.webui.systems.virt_host_managers"><title>Virtual Host Managers</title><simpara>Third party hypervisors and hypervisor managers such as VMWare vCenter are called <quote>Virtual Host Managers</quote>
 (VHM) within &susemgr;
.
These managers can manage one or multiple virtual hosts, which in turn may contain virtual guests. &susemgr;
 ships with a tool called <command>virtual-host-gatherer</command> that can connect to VHMs using their API, and request information about virtual hosts.
This tool is automatically invoked via Taskomatic nightly, therefore you need to configure your VHMs via XMLRPC APIs. <command>virtual-host-gatherer</command> maintains the concept of optional modules, where each module enables a specific Virtual Host Manager.</simpara>
<simpara>Proceed to <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Virtual Host
   Managers</guimenuitem></menuchoice>
 page in the &webui;
 to begin working with a Virtual Host Manager.
In the upper right you can click <guimenu>Create</guimenu>
 and select either <guimenu>VMware-based</guimenu>
 or <guimenu>File-based</guimenu>
.</simpara>
<section xml:id="_ref.webui.systems.virt_host_managers.vmware"><title>VMware-Based</title><simpara>After selecting <menuchoice><guimenu>Create</guimenu> <guimenuitem>VMware-based</guimenuitem></menuchoice>
 enter the location of your VMware-based virtual host.
Enter a <guimenu>Label</guimenu>
, <guimenu>Hostname</guimenu>
, <guimenu>Port</guimenu>
, <guimenu>Username</guimenu>
 and <guimenu>Password</guimenu>
.
Finally click the <guimenu>Add Virtual Host Manager</guimenu>
 button.
For detailed information on working with a VMware-based Virtual Host Manager, see <xref linkend="_advanced.topics.adding.vmware.esxi.host"/>.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_virtual_host_managers_vmware.png" width="80%"/>
</imageobject>
<textobject><phrase>systems virtual host managers vmware</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.systems.virt_host_managers.file"><title>File-Based</title><simpara>If you are using an unsupported virtual host manager, you can create and use a file formatted in JSON containing information about a host and all managed guest machines.
After selecting <menuchoice><guimenu>Create</guimenu> <guimenuitem>File-Based</guimenuitem></menuchoice>
 enter a label and URL leading to the location of this file.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/systems_virtual_host_managers_file.png" width="80%"/>
</imageobject>
<textobject><phrase>systems virtual host managers file</phrase></textobject>
</mediaobject>
</informalfigure>
<note>
<title>VMWare vCenter Installations without Direct Access</title>
<simpara>The file-based is not meant to be used with manually crafted files.
It only meant to be used with the output of <command>virtual-host-gatherer</command> against some other module.
File-based is suitable for VMWare vCenter installations for which no direct API access is possible from the SUSE Manager Server.</simpara>
<simpara>The solution is to run <command>virtual-host-gatherer</command> from somewhere else in the network and save the produced JSON data for further processing.</simpara>
</note>
<simpara>The following JSON example describes how this file should look:</simpara>
<screen>{
    "examplevhost": {
        "10.11.12.13": {
            "cpuArch": "x86_64",
            "cpuDescription": "AMD Opteron(tm) Processor 4386",
            "cpuMhz": 3092.212727,
            "cpuVendor": "amd",
            "hostIdentifier": "'vim.HostSystem:host-182'",
            "name": "11.11.12.13",
            "os": "VMware ESXi",
            "osVersion": "5.5.0",
            "ramMb": 65512,
            "totalCpuCores": 16,
            "totalCpuSockets": 2,
            "totalCpuThreads": 16,
            "type": "vmware",
            "vms": {
                "vCenter": "564d6d90-459c-2256-8f39-3cb2bd24b7b0"
            }
        },
        "10.11.12.14": {
            "cpuArch": "x86_64",
            "cpuDescription": "AMD Opteron(tm) Processor 4386",
            "cpuMhz": 3092.212639,
            "cpuVendor": "amd",
            "hostIdentifier": "'vim.HostSystem:host-183'",
            "name": "10.11.12.14",
            "os": "VMware ESXi",
            "osVersion": "5.5.0",
            "ramMb": 65512,
            "totalCpuCores": 16,
            "totalCpuSockets": 2,
            "totalCpuThreads": 16,
            "type": "vmware",
            "vms": {
                "49737e0a-c9e6-4ceb-aef8-6a9452f67cb5": "4230c60f-3f98-2a65-f7c3-600b26b79c22",
                "5a2e4e63-a957-426b-bfa8-4169302e4fdb": "42307b15-1618-0595-01f2-427ffcddd88e",
                "NSX-gateway": "4230d43e-aafe-38ba-5a9e-3cb67c03a16a",
                "NSX-l3gateway": "4230b00f-0b21-0e9d-dfde-6c7b06909d5f",
                "NSX-service": "4230e924-b714-198b-348b-25de01482fd9"
            }
        }
    }
}</screen>
<simpara>For more information, see the man page on your &susemgr;
server for <command>virtual-host-gatherer</command>:</simpara>
<screen>{prompt.user}man virtual-host-gatherer</screen>
<simpara>The <literal>README</literal> file coming with the package provides background information about the <literal>type</literal> of a hypervisor, etc.:</simpara>
<screen>/usr/share/doc/packages/virtual-host-gatherer/README.md</screen>
</section>
<section xml:id="_configuring_virtual_host_managers_via_xmlrpc_api"><title>Configuring Virtual Host Managers via XMLRPC API</title><simpara>The following APIs allow you to get a list of available <command>virtual-host-manager</command> modules and the parameters they require:</simpara>
<itemizedlist>
<listitem>
<para></para>
<screen>virtualhostmanager.listAvailableVirtualHostGathererModules(session)</screen>
</listitem>
<listitem>
<para></para>
<screen>virtualhostmanager.getModuleParameters(session, moduleName)</screen>
</listitem>
</itemizedlist>
<simpara>The following APIs allow you to create and delete VHMs.
The module parameter map must match the map returned by <literal>virtualhostmanager.getModuleParameters</literal> to work correctly:</simpara>
<itemizedlist>
<listitem>
<para></para>
<screen>virtualhostmanager.create(session, label, moduleName, parameters)</screen>
</listitem>
<listitem>
<para></para>
<screen>virtualhostmanager.delete(session, label)</screen>
</listitem>
</itemizedlist>
<simpara>The following APIs return information about configured VHMs:</simpara>
<itemizedlist>
<listitem>
<para></para>
<screen>virtualhostmanager.listVirtualHostManagers(session)</screen>
</listitem>
<listitem>
<para></para>
<screen>virtualhostmanager.getDetail(session, label)</screen>
</listitem>
</itemizedlist>
</section>
</section>
</chapter>
<chapter xml:id="_ref.webui.salt"><title>Salt</title><simpara><indexterm>
<primary>Web Interface</primary><secondary>Salt</secondary>
</indexterm>
<indexterm>
<primary>Salt</primary>
</indexterm></simpara>
<simpara>Open the <guimenu>Salt</guimenu>
 menu on the left bar. <guimenu>Keys</guimenu>
 provides an overview of your Salt minions (clients). Use <guimenu>Remote Commands</guimenu>
 to execute remote commands on your Salt minions.
You can also define a <guimenu>State Catalog</guimenu>
 for creating a collection of salt system states.</simpara>
<section xml:id="_ref.webui.salt.onboarding"><title>Keys</title><simpara>The <guimenu>Keys</guimenu>
 page provides a summary of your minions, including their names, fingerprints, state, and actions you may perform on them.</simpara>
<simpara>Once you have pointed a minion to the &susemgr;
server as its master within <replaceable>/etc/salt/minion</replaceable>, you can choose to accept or reject a minion from this page.
Either click the check mark or cross in the actions column.</simpara>
<figure>
<title>Keys Overview</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/onboarding.png" width="80%"/>
</imageobject>
<textobject><phrase>onboarding</phrase></textobject>
</mediaobject>
</figure>
<simpara>For more information about key handling and onboarding, see <xref linkend="_preparing.and.registering.clients.salt"/>.</simpara>
</section>
<section xml:id="_ref.webui.salt.remote.commands"><title>Remote Commands</title><simpara>The remote commands page allows you to execute and run commands from the &susemgr;
server on several minions.</simpara>
<figure>
<title>Remote Commands</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/remote_commands.png" width="80%"/>
</imageobject>
<textobject><phrase>remote commands</phrase></textobject>
</mediaobject>
</figure>
<warning>
<title>Remote Commands Security</title>
<simpara>All commands run from the <guimenu>Remote Commands</guimenu>
 page are executed as &rootuser;
 on minions.
As you may use wildcards to run commands across any number of systems you must always take extra precaution as this may have drastic consequences for your systems.</simpara>
</warning>
<simpara>On the <guimenu>Remote Commands</guimenu>
 page located under <menuchoice><guimenu>Salt</guimenu> <guimenuitem>Remote Commands</guimenuitem></menuchoice>
 you will see two text boxes.
The first box is for entering commands.
The second box is for targeting minions by name, group or by using wildcards.</simpara>
<simpara>Input a command you want to execute, add a target minion, group or wildcard you want to execute the command on.
Select the <guimenu>Find Targets</guimenu>
 button to verify which machines will be targeted.
Select the <guimenu>Run Command</guimenu>
 button to execute a command on selected systems.</simpara>
</section>
<section xml:id="_ref.webui.salt.formula_catalog"><title>Formula Catalog</title><simpara>The <guimenu>Formula Catalog</guimenu>
 feature is a technology preview.</simpara>
</section>
</chapter>
<chapter xml:id="_ref.webui.images"><title>Images</title><info><abstract>
<simpara>&susemgr;
enables system administrators to build containers with the help of profiles and create image stores.</simpara>
<simpara>For background information, see <xref linkend="_at.images"/>.</simpara>
</abstract></info>
<section xml:id="_ref.webui.images.images"><title>Images</title><simpara>If you click <menuchoice><guimenu>Images</guimenu> <guimenuitem>Images</guimenuitem></menuchoice>
 on the left navigation menu, an overview listing of your <guimenu>Images</guimenu>
 appears.
Several columns provide information about each image:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/images_list_images.png" width="80%"/>
</imageobject>
<textobject><phrase>images list images</phrase></textobject>
</mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para>Select box: To select images, mark the appropriate check boxes. Selected images can be deleted simultaneously via the <guimenu>Delete</guimenu> button that appears in the upper right corner while selecting images.</para>
</listitem>
<listitem>
<para><guimenu>Name</guimenu> :</para>
</listitem>
<listitem>
<para><guimenu>Version</guimenu> and <guimenu>Revision</guimenu> :</para>
</listitem>
<listitem>
<para><guimenu>Updates</guimenu> : Shows which type of update action is applicable to the image or confirms that the image is up-to-date. For more information about these icons, see <xref linkend="_ref.webui.systems.systems"/>.</para>
</listitem>
<listitem>
<para><guimenu>Patches</guimenu> and <guimenu>Packages</guimenu> :</para>
</listitem>
<listitem>
<para><guimenu>Build</guimenu> :</para>
</listitem>
<listitem>
<para><guimenu>Last Modified</guimenu> : Time when the images was modified last.</para>
</listitem>
<listitem>
<para><guimenu>Actions</guimenu> : <guimenu>Details</guimenu> and <guimenu>Delete</guimenu> button. <guimenu>Details</guimenu> opens a the Image Details page.</para>
</listitem>
</itemizedlist>
<simpara>In the upper right corner offers several action buttons: The <guimenu>Delete</guimenu>
 button appears when one or more images are selected. <guimenu>Import</guimenu>
 and <guimenu>Refresh</guimenu>
 are default buttons. <guimenu>Import</guimenu>
 allows to import pre-built images; for more information, see <xref linkend="_at.images.image.importing"/>.</simpara>
<section xml:id="_image_details"><title>Image Details</title><simpara>The Image Details page contains the <guimenu>Overview</guimenu>
, <guimenu>Patches</guimenu>
, and <guimenu>Packages</guimenu>
 tabs.</simpara>
<simpara>TBD</simpara>
</section>
</section>
<section xml:id="_ref.webui.images.build"><title>Build</title><simpara>If you click <menuchoice><guimenu>Images</guimenu> <guimenuitem>Build</guimenuitem></menuchoice>
 on the left navigation menu, the dialog for building images appears:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/images_image_build.png" width="80%"/>
</imageobject>
<textobject><phrase>images image build</phrase></textobject>
</mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para><guimenu>Version</guimenu> : The version string that you would like to see in the Images listing.</para>
</listitem>
<listitem>
<para><guimenu>Build Profile</guimenu> : Select an Image Profile created with the <menuchoice><guimenu>Images</guimenu> <guimenuitem>Profiles</guimenuitem></menuchoice> page.</para>
</listitem>
<listitem>
<para><guimenu>Build Host</guimenu> : Select a Build Host. For creating a Build Host, see <xref linkend="_at.images.buildhost"/>.</para>
</listitem>
<listitem>
<para><guimenu>Earliest</guimenu> : Schedule build time.</para>
</listitem>
</itemizedlist>
<simpara>Confirm with <guimenu>Build</guimenu>
 to start image building.
When the image is done, find it listed in the <guimenu>Images</guimenu>
 overview described in <xref linkend="_ref.webui.images.images"/>.</simpara>
</section>
<section xml:id="_ref.webui.images.profiles"><title>Profiles</title><simpara>If you click <menuchoice><guimenu>Images</guimenu> <guimenuitem>Profiles</guimenuitem></menuchoice>
 on the left navigation menu, a listing of your <guimenu>Image Profiles</guimenu>
 appears.
Several columns provide information about each image:</simpara>
<itemizedlist>
<listitem>
<para>Select box: To select image profiles, mark the appropriate check boxes. Selected profiles can be deleted simultaneously via the <guimenu>Delete</guimenu> button that appears in the upper right corner while selecting profiles.</para>
</listitem>
<listitem>
<para><guimenu>Label</guimenu> : The name of the profile.</para>
</listitem>
<listitem>
<para><guimenu>Build Type</guimenu> : Currently, only Dockerfile is available.</para>
</listitem>
<listitem>
<para><guimenu>Actions</guimenu> : <guimenu>Build</guimenu> , <guimenu>Edit</guimenu> and <guimenu>Delete</guimenu> button. <guimenu>Build</guimenu> creates the image according to this profile. <guimenu>Edit</guimenu> opens a the Profile Details page for editing.</para>
</listitem>
</itemizedlist>
<simpara><guimenu>Refresh</guimenu>
 and <guimenu>Create</guimenu>
 are default buttons in the upper right corner. <guimenu>Create</guimenu>
 opens the <guimenu>Create Image Profile</guimenu>
 dialog:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/images_image_create_profile.png" width="80%"/>
</imageobject>
<textobject><phrase>images image create profile</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.images.stores"><title>Stores</title><simpara>If you click <menuchoice><guimenu>Images</guimenu> <guimenuitem>Stores</guimenuitem></menuchoice>
 on the left navigation menu, a listing of your <guimenu>Image Stores</guimenu>
 appears.
Several columns provide information about each store:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/images_image_stores.png" width="80%"/>
</imageobject>
<textobject><phrase>images image stores</phrase></textobject>
</mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para>Select box: To select image stores, mark the appropriate check boxes. Selected stores can be deleted simultaneously via the <guimenu>Delete</guimenu> button that appears in the upper right corner while selecting stores.</para>
</listitem>
<listitem>
<para><guimenu>Label</guimenu> : Name of the store.</para>
</listitem>
<listitem>
<para><guimenu>Type</guimenu> : Currently, only Registry is available.</para>
</listitem>
<listitem>
<para><guimenu>Actions</guimenu> : <guimenu>Edit</guimenu> and <guimenu>Delete</guimenu> button. <guimenu>Edit</guimenu> opens a the Store Details page for editing.</para>
</listitem>
</itemizedlist>
<simpara>In the upper right corner offers several action buttons: The <guimenu>Delete</guimenu>
 button appears when one or more stores are selected. <guimenu>Refresh</guimenu>
 and <guimenu>Create</guimenu>
 are default buttons. <guimenu>Create</guimenu>
 opens the <guimenu>Create Image Store</guimenu>
 dialog:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/imeages_image_stores_create.png" width="80%"/>
</imageobject>
<textobject><phrase>imeages image stores create</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</chapter>
<chapter xml:id="_ref.webui.patches"><title>Patches</title><simpara><indexterm>
<primary>Patches</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>WebLogic</primary><secondary>Patches</secondary>
</indexterm>
<indexterm>
<primary>Patches</primary>
</indexterm></simpara>
<simpara>The <guimenu>Patches</guimenu>
 menu from the left bar helps tracking the availability and application of patches to your managed systems.</simpara>
<simpara>The <menuchoice><guimenu>Patches</guimenu> <guimenuitem>Patches</guimenuitem></menuchoice>
 page displays all or relevant patches for at least one of your managed systems that have not been applied yet.</simpara>
<note>
<title>Receiving Patches for Your System</title>
<simpara>To receive an e-mail when patches are issued for your system, go to <menuchoice><guimenu>Overview</guimenu> <guimenuitem>Your Preferences</guimenuitem></menuchoice>
 and select <guimenu>Receive email notifications</guimenu>
.</simpara>
</note>
<simpara>&suse;
distinguishes three types of patches: security updates, bug fix updates, and enhancement updates.
Each patch consists of a summary of the problem and solution, including the RPM packages fixing the problem.</simpara>
<simpara>Icons are used to identify the three types:</simpara>
<itemizedlist>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-shield.svg"/>
</imageobject>
<textobject><phrase>Security Alert</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Security Updates available, <emphasis>strongly</emphasis> recommended</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-bug.svg"/>
</imageobject>
<textobject><phrase>Bug Fix Alert</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Bug Fix Updates available, recommended</para>
</listitem>
<listitem>
<para><inlinemediaobject>
<imageobject>
<imagedata fileref="images/spacewalk-icon-enhancement.svg"/>
</imageobject>
<textobject><phrase>Enhancement Alert</phrase></textobject>
</inlinemediaobject>&#8201;&#8212;&#8201;Enhancement Updates available, optional</para>
</listitem>
</itemizedlist>
<simpara>A summary of each patch is provided in list form displaying its type, advisory ID, synopsis (with the severity as a textual prefix in case of security updates, such as <quote>critical</quote>
, <quote>important</quote>
, <quote>moderate</quote>
, or <quote>low</quote>
), number of affected systems in your network, and date updated.</simpara>
<simpara>In addition, you may view patches by product line at the following location: <link xl:href="http://download.suse.com/patch/psdb/">http://download.suse.com/patch/psdb/</link>.
For more information on security updates, see <link xl:href="https://www.suse.com/support/security/">https://www.suse.com/support/security/</link>.</simpara>
<section xml:id="_ref.webui.patches.relevant"><title>Relevant</title><simpara><indexterm>
<primary>Web UI</primary><secondary>viewing list of applicable patches</secondary>
</indexterm>
<indexterm>
<primary>viewing list of applicable patches</primary>
</indexterm></simpara>
<simpara>The <guimenu>Relevant</guimenu>
 patches page displays a customized list of patches applying to your registered systems.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/patches_relevant_patches.png" width="80%"/>
</imageobject>
<textobject><phrase>patches relevant patches</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Clicking an <guimenu>Advisory</guimenu>
 ID of a patch takes you to the <guimenu>Details</guimenu>
 page of the <guimenu>Patch Details</guimenu>
 page.
Clicking the number of associated systems takes you to the <guimenu>Affected Systems</guimenu>
 page of the <guimenu>Patch Details</guimenu>
 page.
Refer to <xref linkend="_s3_sm_errata_details"/> for more information.</simpara>
</section>
<section xml:id="_ref.webui.patches.all"><title>All</title><simpara><indexterm>
<primary>Web UI</primary><secondary>All Patches</secondary>
</indexterm>
<indexterm>
<primary>All Patches</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>WebLogic</primary><secondary>All Patches</secondary>
</indexterm>
<indexterm>
<primary>All Patches</primary>
</indexterm></simpara>
<simpara>The <guimenu>All</guimenu>
 patches page displays a list of all patches released by &suse;
, irrelevant of whether they apply to your registered systems or not.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/patches_all_patches.png" width="80%"/>
</imageobject>
<textobject><phrase>patches all patches</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Like in the <guimenu>Relevant Patches</guimenu>
 page, clicking either <guimenu>Advisory</guimenu>
 or the number of systems affected takes you to related tabs of the <guimenu>Patch Details</guimenu>
 page.
Refer to <xref linkend="_s3_sm_errata_details"/> for more information.</simpara>
<section xml:id="_s3_sm_apply_errata"><title>Applying Patches</title><simpara>Patches include a list of updated packages.
To apply patches to a system, the system must be entitled.</simpara>
<simpara>Apply all applicable patches to a system by clicking <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Systems</guimenuitem></menuchoice>
 in the top and left navigation bars.
Click the name of an entitled system.
Then in the <guimenu>System Details</guimenu>
 page click the <menuchoice><guimenu>Software</guimenu> <guimenuitem>Patches</guimenuitem></menuchoice>
 subtab.
When the relevant patch list appears, click <guimenu>Select All</guimenu>
 then <guimenu>Apply Patches</guimenu>
 on the bottom right-hand corner of the page.
Only patches not scheduled, scheduled but failed, or canceled patches are listed.
Pending updates are excluded.</simpara>
<simpara>In addition, users with appropriate roles can apply patches using two other methods:</simpara>
<itemizedlist>
<listitem>
<para>To apply a specific patch to one or more systems, locate it in the patch list and click the number of systems affected, which takes you to the <guimenu>Affected Systems</guimenu> page of the <guimenu>Patch Details</guimenu> page. Select the individual systems to be updated and click the <guimenu>Apply Patches</guimenu> button. Double-check the systems to be updated on the confirmation page, then click the <guimenu>Confirm</guimenu> button.</para>
</listitem>
<listitem>
<para>To apply more than one patch to one or more systems, select the systems from the <guimenu>Systems</guimenu> list. Click the <guimenu>System Set Manager</guimenu> link in the left navigation bar, then click the <guimenu>Systems</guimenu> tab. After ensuring the appropriate systems are selected, click the <guimenu>Patches</guimenu> tab, select the patches to apply, and click the <guimenu>Apply Patches</guimenu> button. Schedule a date and time for the patch to be applied. Default is the current date. Click the <guimenu>Confirm</guimenu> button. You can follow the progress of the patch application via the <guimenu>Pending Actions</guimenu> list. Refer to <xref linkend="_ref.webui.schedule"/> for more details.</para>
</listitem>
</itemizedlist>
<important>
<simpara>If you use scheduled package installation, the packages or patches are installed via the &susemgr;
daemon (<command>rhnsd</command>). You must enable the &susemgr;
 daemon on your systems.
For more information about the &susemgr;
 daemon, see <xref linkend="_bp.contact.methods.rhnsd"/>.</simpara>
</important>
<simpara>The following rules apply to patches:</simpara>
<itemizedlist>
<listitem>
<para>Each package is a member of one or more channels. If a selected system is not subscribed to a channel containing the package, the update will not be installed on that system.</para>
</listitem>
<listitem>
<para>If a newer version of the package is already installed on the system, the update will not be installed.</para>
</listitem>
<listitem>
<para>If an older version of the package is installed, the package will be upgraded.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_s3_sm_errata_details"><title>Patch Details</title><simpara><indexterm>
<primary>Web UI</primary><secondary>viewing details</secondary>
</indexterm>
<indexterm>
<primary>viewing details</primary>
</indexterm></simpara>
<simpara>If you click the advisory of a patch in the <guimenu>Relevant</guimenu>
 or <guimenu>All</guimenu>
 pages, its <guimenu>Patch Details</guimenu>
 page appears.
This page is further divided into the following tabs:</simpara>
<section xml:id="_s4_sm_errata_details_details"><title><guimenu>Patch Details</guimenu> &gt; <guimenu>Details</guimenu></title><simpara>This subtab displays the patch report issued by &suse;
.
It provides a synopsis of the patch first (with the severity as a textual prefix in case of security updates, such as <quote>critical</quote>
, <quote>important</quote>
, <quote>moderate</quote>
, or <quote>low</quote>
), issue date, and any update dates.
This is followed by a description of the patch and the steps required to resolve the issue.</simpara>
<simpara>Below the <guimenu>Affected Channels</guimenu>
 label, all channels that contain the affected package are listed.
Clicking a channel name displays the <guimenu>Packages</guimenu>
 subtab of the <guimenu>Channel Details</guimenu>
 page for that channel.
Refer to <xref linkend="_s3_sm_channel_details"/> for more information.</simpara>
<simpara>Security updates list the specific vulnerability as tracked by <link xl:href="http://cve.mitre.org">http://cve.mitre.org</link>.
This information is listed below the <guimenu>CVEs</guimenu>
 label.</simpara>
<simpara>OVAL is an open vulnerability and assessment language promoted by Mitre, <link xl:href="http://oval.mitre.org">http://oval.mitre.org</link>.
Clicking the link below the <guimenu>Oval</guimenu>
 label downloads this information to your system.
More useful are the &suse;
 Update Advisories at <link xl:href="https://www.suse.com/support/update/">https://www.suse.com/support/update/</link>.</simpara>
</section>
<section xml:id="_s4_sm_errata_details_packages"><title><guimenu>Patch Details</guimenu> &gt; <guimenu>Packages</guimenu></title><simpara>This page provides links to each of the updated RPMs by channel.
Clicking the name of a package displays its <guimenu>Package Details</guimenu>
 page.</simpara>
</section>
<section xml:id="_s4_sm_errata_details_systems"><title><guimenu>Patch Details</guimenu> &gt; <guimenu>Affected Systems</guimenu></title><simpara>This page lists systems affected by the patches.
You can apply updates here.
(See <xref linkend="_s3_sm_apply_errata"/>.) Clicking the name of a system takes you to its <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="_s3_sm_system_details"/> for more information.</simpara>
<simpara>To determine whether an update has been scheduled, refer to the <guimenu>Status</guimenu>
 column in the affected systems table.
Possible values are: N/A, Pending, Picked Up, Completed, and Failed.
This column identifies only the last action related to a patch.
For example, if an action fails and you reschedule it, this column shows the status of the patch as pending with no mention of the previous failure.
Clicking a status other than <guimenu>N/A</guimenu>
 takes you to the <guimenu>Action Details</guimenu>
 page.
This column corresponds to one on the <guimenu>Patch</guimenu>
 tab of the <guimenu>System Details</guimenu>
 page.</simpara>
</section>
</section>
</section>
<section xml:id="_ref.webui.patches.search"><title>Advanced Search</title><simpara><indexterm>
<primary>Web UI</primary><secondary>searching</secondary>
</indexterm>
<indexterm>
<primary>searching</primary>
</indexterm></simpara>
<simpara>The <guimenu>Patches Search</guimenu>
 page allows you to search through patches by specific criteria.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/patches_advanced_search_patches.png" width="80%"/>
</imageobject>
<textobject><phrase>patches advanced search patches</phrase></textobject>
</mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para><guimenu>All Fields</guimenu>&#8201;&#8212;&#8201;Search patches by synopsis, description, topic, or solution.</para>
</listitem>
<listitem>
<para><guimenu>Patch Advisory</guimenu>&#8201;&#8212;&#8201;The name or the label of the patch.</para>
</listitem>
<listitem>
<para><guimenu>Package Name</guimenu>&#8201;&#8212;&#8201;Search particular packages by name:</para>
<screen>kernel</screen>
<simpara>Results will be grouped by advisory.
For example, searching for 'kernel' returns all package names containing the string <literal>kernel</literal>, grouped by advisory.</simpara>
</listitem>
<listitem>
<para><guimenu>CVE</guimenu>&#8201;&#8212;&#8201;The name assigned to the security advisory by the Common Vulnerabilities and Exposures (CVE) project at <link xl:href="http://cve.mitre.org">http://cve.mitre.org</link>. For example:</para>
<screen>CVE-2006-4535</screen>
</listitem>
</itemizedlist>
<simpara>To filter patch search results, check or uncheck the boxes next to the type of advisory:</simpara>
<itemizedlist>
<listitem>
<para>Bug Fix Advisory&#8201;&#8212;&#8201;Patches that fix issues reported by users or discovered during development or testing.</para>
</listitem>
<listitem>
<para>Security Advisory&#8201;&#8212;&#8201;Patches fixing a security issue found during development, testing, or reported by users or a software security clearing house. A security advisory usually has one or more CVE names associated with each vulnerability found in each package.</para>
</listitem>
<listitem>
<para>Product Enhancement Advisory&#8201;&#8212;&#8201;Patches providing new features, improving functionality, or enhancing performance of a package.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_ref.webui.patches.manage"><title>Manage Patches</title><simpara><indexterm>
<primary>Web UI</primary><secondary>Managing Patches</secondary>
</indexterm>
<indexterm>
<primary>Managing Patches</primary>
</indexterm></simpara>
<simpara>Custom patches enable organizations to issue patch alerts for the packages in their custom channels, schedule deployment and manage patches across organizations.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/patches_published_patches.png" width="80%"/>
</imageobject>
<textobject><phrase>patches published patches</phrase></textobject>
</mediaobject>
</informalfigure>
<warning>
<simpara>If the organization is using both &susemgr;
and &susemgr;
Proxy server, then manage patches only on the &susemgr;
server since the proxy servers receive updates directly from it.
Managing patches on a proxy in this combined configuration risks putting your servers out of synchronization.</simpara>
</warning>
<section xml:id="_s3_sm_errata_create"><title>Creating and Editing Patches</title><simpara><indexterm>
<primary>Web UI</primary><secondary>Editing Patches</secondary>
</indexterm>
<indexterm>
<primary>Editing Patches</primary>
</indexterm></simpara>
<simpara>To create a custom patch alert, proceed as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>On the top navigation bar, click <guimenu>Patches</guimenu> , then select <guimenu>Manage Patches</guimenu> on the left navigation bar. On the <guimenu>Patches Management</guimenu> page, click <guimenu>Create Patch</guimenu> .</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/patches_create_patch.png" width="80%"/>
</imageobject>
<textobject><phrase>patches create patch</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Enter a label for the patch in the <guimenu>Advisory</guimenu> field, ideally following a naming convention adopted by your organization.</para>
</listitem>
<listitem>
<para>Complete all remaining required fields, then click the <guimenu>Create Patch</guimenu> button. View standard SUSE Alerts for examples of properly completed fields.</para>
</listitem>
</orderedlist>
<simpara>Patch management distinguishes between published and unpublished patches.</simpara>
<itemizedlist>
<listitem>
<para><guimenu>Published</guimenu> : this page displays the patch alerts the organization has created and disseminated. To edit an existing published patch, follow the steps described in <xref linkend="_s3_sm_errata_create"/>. To distribute the patch, click <guimenu>Send Notification</guimenu> in the <guimenu>Send Patch Mail</guimenu> section on the top of the <guimenu>Patch Details</guimenu> page. The patch alert is sent to the administrators of all affected systems.</para>
</listitem>
<listitem>
<para><guimenu>Unublished</guimenu> : this page displays the patch alerts your organization has created but not yet distributed. To edit an existing unpublished patch, follow the steps described in <xref linkend="_s3_sm_errata_create"/>. To publish the patch, click <guimenu>Publish Patch</guimenu> on the top-right corner of the <guimenu>Patch Details</guimenu> page. Confirm the channels associated with the patch and click the <guimenu>Publish Patch</guimenu> button, now in the lower-right corner. The patch alert is moved to the <guimenu>Published</guimenu> page awaiting distribution.</para>
</listitem>
</itemizedlist>
<simpara>&susemgr;
administrators can also create patches by cloning an existing one.
Cloning preserves package associations and simplifies issuing patches.
See <xref linkend="_ref.webui.patches.clone"/> for instructions.</simpara>
<simpara>To edit an existing patch alert&#8217;s details, click its advisory on the <guimenu>Patches Management</guimenu>
 page, make the changes in the appropriate fields of the <guimenu>Details</guimenu>
 tab, and click the <guimenu>Update Patch</guimenu>
 button.
Click the <guimenu>Channels</guimenu>
 tab to alter the patch&#8217;s channel association.
Click the <guimenu>Packages</guimenu>
 tab to view and modify its packages.</simpara>
<simpara>To delete patches, select their check boxes on the <guimenu>Patches Management</guimenu>
 page, click the <guimenu>Delete Patches</guimenu>
 button, and confirm the action.
Deleting published patches might take a few minutes.</simpara>
</section>
<section xml:id="_s3_sm_errata_assign_packs"><title>Assigning Packages to Patches</title><simpara>To assign packages to patches, proceed as follows:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Select a patch, click the <guimenu>Packages</guimenu> tab, then the <guimenu>Add</guimenu> subtab.</para>
</listitem>
<listitem>
<para>To associate packages with the patch being edited, select the channel from the <guimenu>View</guimenu> drop-down box that contains the packages and click <guimenu>View</guimenu> . Packages already associated with the patch being edited are not displayed. Selecting <guimenu>All managed packages</guimenu> presents all available packages.</para>
</listitem>
<listitem>
<para>After clicking <guimenu>View</guimenu> , the package list for the selected option appears. Note that the page header still lists the patch being edited.</para>
</listitem>
<listitem>
<para>In the list, select the check boxes of the packages to be assigned to the edited patch and click <guimenu>Add Packages</guimenu> at the bottom-right corner of the page.</para>
</listitem>
<listitem>
<para>A confirmation page appears with the packages listed. Click <guimenu>Confirm</guimenu> to associate the packages with the patch. The <guimenu>List/Remove</guimenu> subtab of the <guimenu>Managed Patch Details</guimenu> page appears with the new packages listed.</para>
</listitem>
</orderedlist>
<simpara>When packages are assigned to a patch, the patch cache is updated to reflect the changes.
This update is delayed briefly so that users may finish editing a patch before all the changes are made available.
To initiate the changes to the cache manually, follow the directions to <guimenu>commit the changes immediately</guimenu>
 at the top of the page.</simpara>
</section>
<section xml:id="_s3_sm_errata_publish"><title>Publishing Patches</title><simpara>After adding packages to the patch, the patch needs to be published to be disseminated to affected systems.
Follow this procedure to publish patches:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>On the top navigation bar, click <guimenu>Patches</guimenu> , then <menuchoice><guimenu>Manage Patches</guimenu> <guimenuitem>Unpublished</guimenuitem></menuchoice> on the left navigation bar to see all the unpublished patches listed.</para>
</listitem>
<listitem>
<para>Click the patch <guimenu>Advisory</guimenu> name to open the patch details pages.</para>
</listitem>
<listitem>
<para>On the patch details page, click <guimenu>Publish Patch</guimenu> . A confirmation page appears that will ask you to select which channels you want to make the patch available in. Choose the relevant channels.</para>
</listitem>
<listitem>
<para>At the bottom of the page, click <guimenu>Publish Patch</guimenu> . The patch published will now appear on the <guimenu>Published</guimenu> page of <guimenu>Manage Patches</guimenu> .</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_s3_sm_errata_published"><title>Published</title><simpara><indexterm>
<primary>Web UI</primary><secondary>Published Patches</secondary>
</indexterm>
<indexterm>
<primary>Published Patches</primary>
</indexterm></simpara>
<simpara>Here all published patches are listed.
It is possible to perform the following actions:</simpara>
<itemizedlist>
<listitem>
<para>To create a patch, click <guimenu>Create Patch</guimenu> .</para>
</listitem>
<listitem>
<para>To delete patches, select them first and then click <guimenu>Delete Patches</guimenu> .</para>
</listitem>
<listitem>
<para>Click an Advisory name to open the patch details page.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_s3_sm_errata_unpublished"><title>Unpublished</title><simpara>Here all published patches are listed.
It is possible to perform the same actions as with published patches.
For more information, see <xref linkend="_s3_sm_errata_published"/>.
Additionally, on a patch details page, you can click <guimenu>Publish Patch</guimenu>
 for publishing.</simpara>
</section>
</section>
<section xml:id="_ref.webui.patches.clone"><title>Cloning Patches</title><simpara><indexterm>
<primary>Web UI</primary><secondary>Cloning Patches</secondary>
</indexterm>
<indexterm>
<primary>Cloning Patches</primary>
</indexterm></simpara>
<simpara>Patches can be cloned for easy replication and distribution as part of &susemgr;
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/patches_clone_patches.png" width="80%"/>
</imageobject>
<textobject><phrase>patches clone patches</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Only patches potentially applicable to one of your channels can be cloned.
Patches can be applicable to a channel if that channel was cloned from a channel to which the patch applies.
To access this functionality, click <guimenu>Patches</guimenu>
 on the top navigation bar, then <guimenu>Clone Patches</guimenu>
 on the left navigation bar.</simpara>
<simpara>On the <guimenu>Clone Patches</guimenu>
 page, select the channel containing the patch from the <guimenu>View</guimenu>
 drop-down box and click <guimenu>View</guimenu>
.
When the patch list appears, select the check box of the patch to be cloned and click <guimenu>Clone Patch</guimenu>
.
A confirmation page appears with the patch listed.
Click <guimenu>Confirm</guimenu>
 to finish cloning.</simpara>
<simpara>The cloned patch appears in the <guimenu>Unpublished</guimenu>
 patch list.
Verify the patch text and the packages associated with that patch, then publish the patch so it is available to users in your organization.</simpara>
</section>
</chapter>
<chapter xml:id="_ref.webui.channels"><title>Software</title><simpara><indexterm>
<primary>Web UI</primary><secondary>Software and Configuration Files</secondary>
</indexterm>
<indexterm>
<primary>Software and Configuration Files</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>WebLogic</primary><secondary>channels</secondary>
</indexterm>
<indexterm>
<primary>channels</primary>
</indexterm></simpara>
<simpara>The pages in the <guimenu>Software</guimenu>
 category enable you to view and manage software channels and packages associated with your systems.</simpara>
<section xml:id="_ref.webui.channels.software"><title>Channels</title><simpara><indexterm>
<primary>channel list</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>child channel</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>WebLogic</primary><secondary>channel list</secondary>
</indexterm>
<indexterm>
<primary>channel list</primary>
</indexterm></simpara>
<simpara>The <guimenu>Channels</guimenu>
 page is the first to appear in the <guimenu>Software</guimenu>
 category.
A software channel provides packages grouped by products or applications to simplify the selection of packages to be installed on a system.</simpara>
<simpara>There are two types of software channels: base channels and child channels.</simpara>
<variablelist xml:id="_s3_sm_channel_list_base">
<varlistentry>
<term>Base Channels</term>
<listitem>
<simpara>A base channel consists of packages built for a specific architecture and release.
For example, all of the packages in &sls;&#160;
12 for the <literal>x86_64</literal> architecture make up a base channel.
The list of packages in &sls;&#160;
12 for the <literal>s390x</literal> architecture make up a different base channel.</simpara>
<simpara>A system must be subscribed to only one base channel assigned automatically during registration based on the &sle;
release and system architecture.
For paid base channels, an associated subscription must exist.</simpara>
</listitem>
</varlistentry>
</variablelist>
<variablelist xml:id="_s3_sm_channel_list_child">
<varlistentry>
<term>Child Channels</term>
<listitem>
<simpara>A child channel is associated with a base channel and provides extra packages.
For example, an organization can create a child channel associated with &sls;
on <literal>x86_64</literal> architecture that contains extra packages for a custom application.</simpara>
<simpara>Especially important are the &susemgr;
Tools channels that are available for every base channel.
These tools channels provide the tools needed to connect the clients with the &susemgr;
server.</simpara>
<simpara>A system can be subscribed to multiple child channels of its base channel.
Only packages provided by a subscribed channel can be installed or updated. &susemgr;
Administrators and Channel Administrators have channel management authority.
This authority gives them the ability to create and manage their own custom channels.</simpara>
<note>
<simpara>Do not create child channels containing packages that are not compatible with the client system.</simpara>
</note>
<simpara>Channels can be further distinguished by relevance: <guimenu>All</guimenu>
, <guimenu>SUSE</guimenu>
, <guimenu>Channels</guimenu>
, <guimenu>My Channels</guimenu>
, <guimenu>Shared</guimenu>
, and <guimenu>Retired</guimenu>
.</simpara>
</listitem>
</varlistentry>
</variablelist>
<section xml:id="_s3_sm_channel_list_all"><title>All</title><simpara>Under <guimenu>Channels</guimenu>
 in the left navigation menu select <guimenu>All</guimenu>
.
All channels available to your organization are listed.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/channels_all_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>channels all channels</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Links within this list go to different tabs of the <guimenu>Software Channel Details</guimenu>
 page.
Clicking a channel name takes you to the <guimenu>Details</guimenu>
 tab.
Clicking the number of packages takes you to the <guimenu>Packages</guimenu>
 tab.
Clicking the number of systems takes you to the <guimenu>Subscribed Systems</guimenu>
 tab.
Refer to <xref linkend="_s3_sm_channel_details"/> for details.</simpara>
<important>
<title>Package Count Update Change</title>
<simpara>During a channel synchronization all package are now downloaded before they are incremented and displayed within the WebUI.
When packages have completed the initial download, packages will begin to increment in your channel as they are imported to the database.</simpara>
</important>
</section>
<section xml:id="_s3_sm_channel_list_redhat"><title>&suse;</title><simpara><indexterm>
<primary>channels</primary><secondary>Novell</secondary>
</indexterm>
<indexterm>
<primary>Novell</primary>
</indexterm></simpara>
<simpara>The <guimenu>SUSE</guimenu>
 page displays all &suse;
 channels and any available child channels.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/channels_vendor_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>channels vendor channels</phrase></textobject>
</mediaobject>
</informalfigure>
<warning>
<title>&suse;Channels Cannot be Deleted</title>
<simpara>When imported, &suse;
channels cannot be deleted.
Only custom software channels can be deleted.</simpara>
</warning>
</section>
<section xml:id="_s3_sm_channel_list_popular"><title>Popular</title><simpara>The <guimenu>Popular</guimenu>
 page displays the software channels most subscribed by systems registered to your organization.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/channels_popular_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>channels popular channels</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>You can refine the search by using the drop-down box to list only the channels with at least a certain number of systems subscribed.</simpara>
</section>
<section xml:id="_s3_sm_channel_list_my"><title>My Channels</title><simpara><indexterm>
<primary>channels</primary><secondary>my</secondary>
</indexterm>
<indexterm>
<primary>my</primary>
</indexterm></simpara>
<simpara>The <guimenu>My Channels</guimenu>
 page displays all software channels that belong to your organization, including both &suse;
 and custom channels.
Use the text box to filter by channel name.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/channels_custom_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>channels custom channels</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_s3_sm_channel_list_shared"><title>Shared</title><simpara>The <guimenu>Shared</guimenu>
 page displays the channels shared with others in the organizational trust.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/channels_shared_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>channels shared channels</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_s3_sm_channel_list_retired"><title>Retired</title><simpara><indexterm>
<primary>channels</primary><secondary>retired</secondary>
</indexterm>
<indexterm>
<primary>retired</primary>
</indexterm></simpara>
<simpara>The <guimenu>Retired</guimenu>
 page displays available channels that have reached their end-of-life dates and do not receive updates.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/channels_retired_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>channels retired channels</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_s3_sm_channel_details"><title>Channel Details</title><simpara><indexterm>
<primary>WebLogic</primary><secondary>software channel details</secondary>
</indexterm>
<indexterm>
<primary>software channel details</primary>
</indexterm></simpara>
<simpara>If you click the name of a channel, the <guimenu>Channel Details</guimenu>
 page appears.</simpara>
<section xml:id="_s4_sm_channel_details_details"><title><guimenu>Channel Details</guimenu> &gt; <guimenu>Details</guimenu></title><simpara>General information about the channel and its parent if applicable.
This summary, description, and architecture is also displayed when clicking a channel.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/channels_details_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>channels details channels</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>In addition, <guimenu>Per-User Subscription Restrictions</guimenu>
 can be set globally by &susemgr;
 administrators and channel administrators.
By default, any user can subscribe channels to a system.
To manage user permissions, select <guimenu>Only selected users within your organization may subscribe to this channel</guimenu>
 and click <guimenu>Update</guimenu>
.
The <guimenu>Subscribers</guimenu>
 tab appears.
Click it to grant specific users subscription permissions to a channel. &susemgr;
 administrators and channel administrators can always subscribe any channels to a system.</simpara>
<simpara>Only customers with custom base channels can change their systems' base channel assignments via the &susemgr;
Web interface in two ways:</simpara>
<itemizedlist>
<listitem>
<para>Assign the system to a custom base channel.</para>
</listitem>
<listitem>
<para>Revert subscriptions from a custom base channel to the appropriate distribution-based base channel.</para>
</listitem>
</itemizedlist>
<note>
<simpara>The assigned base channel must match the installed system.
For example, a system running &sle;&#160;
11 for <literal>x86_64</literal> cannot be registered to a &sle;&#160;
12 for <literal>s390x</literal> base channel.
Use the files <filename>/etc/os-release</filename>
 or <filename>/etc/SuSE-release</filename>
 to check your product, architecture (try <command>uname -a</command>), version, and patch level.</simpara>
</note>
</section>
<section xml:id="_s4_sm_channel_details_managers"><title><guimenu>Channel Details</guimenu> &gt; <guimenu>Managers</guimenu></title><simpara>On the <guimenu>Managers</guimenu>
 page, you can check which users are authorized to manage the selected channel.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/channels_details_managers_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>channels details managers channels</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Real name and e-mail address are listed with the user names.
Organization and Channel administrators can manage any channel.
As a &susemgr;
administrator you can change roles for specific users by clicking the name.
For more information on user management and the <guimenu>User Details</guimenu>
 page, see <xref linkend="_ref.webui.users"/>.</simpara>
</section>
<section xml:id="_s4_sm_channel_details_errata"><title><guimenu>Channel Details</guimenu> &gt; <guimenu>Patches</guimenu></title><simpara><indexterm>
<primary>software channels</primary><secondary>patches</secondary>
</indexterm>
<indexterm>
<primary>patches</primary>
</indexterm></simpara>
<simpara>The <guimenu>Patches</guimenu>
 page lists patches to be applied to packages provided in the channel.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/channels_details_patches_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>channels details patches channels</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>The list displays advisory types, names, summaries, and issue dates.
Clicking an advisory name takes you to its <guimenu>Patch Details</guimenu>
 page.
Refer to <xref linkend="_s3_sm_errata_details"/> for more information.</simpara>
</section>
<section xml:id="_s4_sm_channel_details_packages"><title><guimenu>Channel Details</guimenu> &gt; <guimenu>Packages</guimenu></title><simpara><indexterm>
<primary>package installation</primary><secondary>filter</secondary>
</indexterm>
<indexterm>
<primary>filter</primary>
</indexterm></simpara>
<simpara>This page lists packages in the channel.
Clicking a package name takes you to the <guimenu>Package Details</guimenu>
 page.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/channels_details_packages_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>channels details packages channels</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>This page displays a set of tabs with information about the package, including architectures on which it runs, the package size, build date, package dependencies, change log, list of files in the package, newer versions, and which systems have the package installed.
Download the packages as RPMs.</simpara>
<simpara>To search for a specific package or a subset of packages, use the package filter at the top of the list.
Enter a substring to search for package names containing the string.
For example, typing <literal>dd</literal> in the filter might return: <literal role="systemitem">dd_rescue</literal>
, <literal role="systemitem">ddclient</literal>
, and <literal role="systemitem">uuidd</literal>
.
The filter is case-insensitive.</simpara>
</section>
<section xml:id="_s4_sm_channel_details_subsys"><title><guimenu>Channel Details</guimenu> &gt; <guimenu>Subscribed Systems</guimenu></title><simpara>The list displays system names and their system type.
Clicking a system name takes you to its <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="_s3_sm_system_details"/> for more information.</simpara>
</section>
<section xml:id="_s4_sm_channel_details_tarsys"><title><guimenu>Software Channel Details</guimenu> &gt; <guimenu>Target Systems</guimenu></title><simpara>List of systems eligible for subscription to the channel.
This tab appears only for child channels.
Use the check boxes to select the systems, then click the <guimenu>Confirm</guimenu>
 and <guimenu>Subscribe</guimenu>
 button on the bottom right-hand corner.
You will receive a success message or be notified of any errors.
This can also be accomplished through the <guimenu>Channels</guimenu>
 tab of the <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="_s3_sm_system_details"/> for more information.</simpara>
</section>
</section>
</section>
<section xml:id="_ref.webui.channels.search"><title>Package Search</title><simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>searching</secondary>
</indexterm>
<indexterm>
<primary>searching</primary>
</indexterm></simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/channels_search_channels.png" width="80%"/>
</imageobject>
<textobject><phrase>channels search channels</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>The <guimenu>Package Search</guimenu>
 page allows you to search through packages using various criteria provided by the <guimenu>What to search for</guimenu>
 selection list:</simpara>
<itemizedlist>
<listitem>
<para><guimenu>Free Form</guimenu>&#8201;&#8212;&#8201;a general keyword search useful when the details of a particular package and its contents are unknown.</para>
</listitem>
<listitem>
<para><guimenu>Name Only</guimenu>&#8201;&#8212;&#8201;Targeted search to find a specific package known by name.</para>
</listitem>
<listitem>
<para><guimenu>Name and Summary</guimenu>&#8201;&#8212;&#8201;Search for a package or program which might not show up in the respective package name but in its one-line summary.</para>
</listitem>
<listitem>
<para><guimenu>Name and Description</guimenu>&#8201;&#8212;&#8201;Search package names and their descriptions.</para>
</listitem>
</itemizedlist>
<simpara>The <guimenu>Free Form</guimenu>
 field additionally allows you to search using field names that you prepend to search queries and filter results by that field keyword.</simpara>
<simpara>For example, if you wanted to search all of the &sle;
packages for the word <literal>java</literal> in the description and summary, type the following in the <guimenu>Free Form</guimenu>
 field:</simpara>
<screen>summary:java and description:java</screen>
<simpara>Other supported field names include:</simpara>
<itemizedlist>
<listitem>
<para><literal>name</literal>: search package names for a particular keyword,</para>
</listitem>
<listitem>
<para><literal>version</literal>: search for a particular package version,</para>
</listitem>
<listitem>
<para><literal>filename</literal>: search the package file names for a particular keyword,</para>
</listitem>
<listitem>
<para><literal>description</literal>: search the packages' detailed descriptions for a particular keyword,</para>
</listitem>
<listitem>
<para><literal>summary</literal>: search the packages' brief summary for a particular keyword,</para>
</listitem>
<listitem>
<para><literal>arch</literal>: search the packages by their architecture (such as <literal>x86_64</literal>, <literal>ppc64le</literal>, or <literal>s390</literal>).</para>
</listitem>
</itemizedlist>
<simpara>You can also limit searches to <guimenu>Channels relevant to your systems</guimenu>
 by clicking the check box.
Additionally, you can restrict your search by platform (<guimenu>Specific channel you have access to</guimenu>
) or architecture (<guimenu>Packages of a specific architecture</guimenu>
).</simpara>
</section>
<section xml:id="_ref.webui.channels.manage"><title>Manage Software Channels</title><simpara><indexterm>
<primary>software channels</primary><secondary>managing</secondary>
</indexterm>
<indexterm>
<primary>managing</primary>
</indexterm></simpara>
<simpara>This menu allows administrators to create, clone, and delete custom channels.
These channels may contain altered versions of distribution-based channels or custom packages.</simpara>
<section xml:id="_ref.webui.channels.manage.overview"><title>Manage Software Channels &gt; Overview</title><simpara>The <guimenu>Overview</guimenu>
 page of the <guimenu>Manage Software Channels</guimenu>
 menu lists all available channels including custom, distribution-based, and child channels.</simpara>
<simpara>To clone an existing channel, click the <guimenu>Clone Channel</guimenu>
 link.
Select the channel to be cloned from the drop-down box, select whether to clone the current state (including patches) or the original state (without patches). You can also select specific patches to use for cloning.
Then click the <guimenu>Create Channel</guimenu>
 button.
In the next screen select options for the new channel, including base architecture and GPG, then click <guimenu>Create Channel</guimenu>
.</simpara>
<note>
<title>GPG Key URL</title>
<simpara>The GPG key URL may be either an internal file location such as <literal><link xl:href="file:///">file:///</link></literal> or you may use an external URL.</simpara>
</note>
<simpara>To create a new channel, click the <guimenu>Create Channel</guimenu>
 link.
Select the appropriate options for the new channel, including base architecture and GPG options, then click <guimenu>Create Channel</guimenu>
.
Note that a channel created in this manner is blank, containing no packages.
You must either upload software packages or add packages from other repositories.
You may also choose to include patches in your custom channel.</simpara>
<important>
<title>Enable GPG Check</title>
<simpara><literal>Enable GPG Check</literal> is automatically selected when creating a new channel.
If you would like to add custom packages and applications to your channel, make sure you deselect this box or you cannot install/add unsigned packages.
Keep in mind this is a security risk for packages from an untrusted source.</simpara>
</important>
</section>
<section xml:id="_s3_chnl_mgmt_channel_details"><title><guimenu>Manage Software Channels</guimenu> &gt; <guimenu>Channel Details</guimenu></title><section xml:id="_s4_chnlmgmt_cdetails_cdetails"><title><guimenu>Manage Software Channels</guimenu> &gt; <guimenu>Channel Details</guimenu> &gt; <guimenu>Details</guimenu></title><simpara>This page lists the settings made during channel creation.</simpara>
</section>
<section xml:id="_s4_chnlmgmt_cdetails_manage"><title><guimenu>Manage Software Channels</guimenu> &gt; <guimenu>Channel Details</guimenu> &gt; <guimenu>Managers</guimenu></title><simpara>&susemgr;
administrators and channel administrators may alter or delete any channel.
To grant other users rights to alter or delete this channel, check the box next to the user&#8217;s name and click <guimenu>Update</guimenu>
.</simpara>
<simpara>To allow all users to manage the channel, click the <guimenu>Select All</guimenu>
 button at the bottom of the list then click <guimenu>Update</guimenu>
.
To remove a user&#8217;s right to manage the channel, uncheck the box next to their name and click <guimenu>Update</guimenu>
.</simpara>
</section>
<section xml:id="_s4_chnlmgmt_cdetails_errata"><title><guimenu>Manage Software Channels</guimenu> &gt; <guimenu>Channel Details</guimenu> &gt; <guimenu>Patches</guimenu></title><simpara>Channel managers can list, remove, clone, and add patches to their custom channel.
Custom channels not cloned from a distribution may not contain patches until packages are available.
Only patches that match the base architecture and apply to a package in that channel may be added.
Finally, only cloned or custom patches may be added to custom channels.
Patches may be included in a cloned channel if they are selected during channel creation.</simpara>
<simpara>The <guimenu>Sync</guimenu>
 tab lists patches that were updated since they were originally cloned in the selected cloned channel.
More specifically, a patch is listed here if and only if:</simpara>
<itemizedlist>
<listitem>
<para>it is a cloned patch,</para>
</listitem>
<listitem>
<para>it belongs to the selected cloned channel,</para>
</listitem>
<listitem>
<para>it has already been published in the selected cloned channel,</para>
</listitem>
<listitem>
<para>it does not contain a package that the original patch has, or it has at least one package with a different version with regard to the corresponding one in the original patch, or both.</para>
</listitem>
</itemizedlist>
<simpara>Clicking the <guimenu>Sync Patches</guimenu>
 button opens a confirmation page in which a subset of those patches can be selected for synchronization.
Clicking the <guimenu>Confirm</guimenu>
 button in the confirmation page results in such patches being copied over from the original channel to the cloned channel, thus updating corresponding packages.</simpara>
</section>
<section xml:id="_s4_cnlmgmt_cdetails_pkgs"><title><guimenu>Manage Software Channels</guimenu> &gt; <guimenu>Channel Details</guimenu> &gt; <guimenu>Packages</guimenu></title><simpara>As with patches, administrators can list, remove, compare, and add packages to a custom channel.</simpara>
<simpara>To list all packages in the channel, click the <guimenu>List / Remove Packages</guimenu>
 link.
Check the box to the left of any package you want to remove, then click <guimenu>Remove Packages</guimenu>
.</simpara>
<simpara>To add packages, click the <guimenu>Add Packages</guimenu>
 link.
From the drop-down box activate a channel from which to add packages and click <guimenu>View</guimenu>
 to continue.
Check the box to the left of any package you want to add to the custom channel, then click <guimenu>Add Packages</guimenu>
.</simpara>
<simpara>To compare packages in the current channel with those in another, select a channel from the drop-down box and click <guimenu>Compare</guimenu>
.
Packages in both channels are compared, including architecture and the latest version of packages.
The results are displayed on the next screen.</simpara>
<simpara>To make the two channels identical, click the <guimenu>Merge Differences</guimenu>
 button.
In the next dialog, resolve any conflicts. <guimenu>Preview Merge</guimenu>
 allows you to review the changes before applying them to the channels.
Select those packages that you want to merge.
Click <guimenu>Merge Packages</guimenu>
 then <guimenu>Confirm</guimenu>
 to perform the merge.</simpara>
</section>
<section xml:id="_s4_chnlmgmt_cdetails_repos"><title><guimenu>Manage Software Channels</guimenu> &gt; <guimenu>Channel Details</guimenu> &gt; <guimenu>Repositories</guimenu></title><simpara>On the <guimenu>Repositories</guimenu>
 page, assign software repositories to the channel and synchronize repository content:</simpara>
<itemizedlist>
<listitem>
<para><guimenu>Add/Remove</guimenu> lists configured repositories, which can be added and removed by selecting the check box next to the repository name and clicking <guimenu>Update Repositories</guimenu> .</para>
</listitem>
<listitem>
<para><guimenu>Sync</guimenu> lists configured repositories. The synchronization schedule can be set using the drop-down boxes, or an immediate synchronization can be performed by clicking <guimenu>Sync Now</guimenu> .</para>
</listitem>
</itemizedlist>
<simpara>The <guimenu>Manage Repositories</guimenu>
 tab to the left shows all assigned repositories.
Click a name to see details and possibly delete a repository.</simpara>
</section>
</section>
<section xml:id="_s3_chnl_mgmt_mng_pkgs"><title><guimenu>Manage Software Channels</guimenu> &gt; <guimenu>Manage Software Packages</guimenu></title><simpara>This page allows managing custom software packages, listing all software or viewing only packages in a custom channel.
Select the respective channel from the drop-down box and click <guimenu>View Packages</guimenu>
.</simpara>
</section>
<section xml:id="_s3_chnl_mgmt_mng_repos"><title><guimenu>Manage Software Channels</guimenu> &gt; <guimenu>Manage Repositories</guimenu></title><simpara>Add or manage custom or third-party package repositories and link the repositories to an existing channel.
The repositories feature currently supports repomd repositories.</simpara>
<simpara>To create a new repository click the <guimenu>Create Repository</guimenu>
 link at the top right of the <guimenu>Manage Repositories</guimenu>
 page.
The <guimenu>Create Repository</guimenu>
 screen prompts you to enter a <guimenu>Repository Label</guimenu>
 such as <literal>sles-12-x86_64</literal> and a <guimenu>Repository URL</guimenu>
.
You may enter URLs pointing to mirror lists or direct download repositories, then click <guimenu>Create Repository</guimenu>
.
Select the desired SSL certificate of authority, client certificate and key from the drop down list.
SSL keys should be placed in <filename><link xl:href="http://&lt;EXAMPLE-MANAGER-FQDN.com/pub&gt;">http://&lt;EXAMPLE-MANAGER-FQDN.com/pub&gt;</link></filename>
.</simpara>
<simpara>To link the new repository to an existing software channel, select <guimenu>Manage Software Channels</guimenu>
 from the left menu, then click the channel you want to link.
In the channel&#8217;s detail page, click the <guimenu>Repositories</guimenu>
 subtab, then check the box next to the repository you want to link to the channel.
Click <guimenu>Update Repositories</guimenu>
.</simpara>
<simpara>To synchronize packages from a custom repository to your channel, click the <guimenu>Sync</guimenu>
 link from the channel&#8217;s <guimenu>Repositories</guimenu>
 subtab, and confirm by clicking the <guimenu>Sync</guimenu>
 button.</simpara>
<simpara>You can also perform a synchronization via command line by using the <command>spacewalk-repo-sync</command> command, which additionally allows you to accept keys.</simpara>
<simpara><command>spacewalk-repo-sync</command> creates log files in the <filename>/var/log/rhn/reposync</filename>
 directory. &susemgr;
 uses one log file per channel and reuses it with the next synchronization run.</simpara>
</section>
</section>
<section xml:id="_ref.webui.channels.mapping"><title>Distribution Channel Mapping</title><simpara>The Distribution Channel Mapping page displays a list of all your defined default base channels that clients will pick up according to their operating system and architecture at registration time.
These mappings can be overriden, but cannot be deleted.
To create such a mapping click <guimenu>Create Distribution Channel Mapping</guimenu>
 in the upper-right corner.
Several columns provide information for each mapping.</simpara>
<note>
<title>Using Distribution Channel Mapping</title>
<simpara>For &sle;
or &rhel;{suse}
does not use the <guimenu>Distribution Channel Mapping</guimenu>
 feature.
It can be used for other products (for example, for free products such as openSUSE, Fedora, Oracle Linux, etc.). It can help when letting clients pick up base channels automatically.</simpara>
</note>
</section>
</chapter>
<chapter xml:id="_ref.webui.audit"><title>Audit</title><simpara>Select <guimenu>Audit</guimenu>
 from the left navigation menu to audit your managed systems.</simpara>
<section xml:id="_ref.webui.audit.cve"><title>CVE Audit</title><simpara><indexterm>
<primary>CVE audit</primary><secondary>SUSE Manager data</secondary>
</indexterm>
<indexterm>
<primary>SUSE Manager data</primary>
</indexterm></simpara>
<simpara>The <guimenu>CVE Audit</guimenu>
 page will display a list of client systems with their patch status regarding a given CVE (Common Vulnerabilities and Exposures) number.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/audit_cve_audit.png" width="80%"/>
</imageobject>
<textobject><phrase>audit cve audit</phrase></textobject>
</mediaobject>
</informalfigure>
<section xml:id="_s1_cve_usage"><title>Normal Usage</title><simpara>Proceed as follows if you want to verify that a client system has received a given CVE patch:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Make sure that the CVE data is up-to-date. For more information, see <xref linkend="_sec_cve_maint"/>.</para>
</listitem>
<listitem>
<para>Click <menuchoice><guimenu>Audit</guimenu> <guimenuitem>CVE Audit</guimenuitem></menuchoice> in the left navigation menu to open the <guimenu>CVE Audit</guimenu> page.</para>
</listitem>
<listitem>
<para>Input a 13-char CVE identifier in the <guimenu>CVE Number</guimenu> field. The year setting will be automatically adjusted. Alternatively, set the year manually and add the last four digits.</para>
</listitem>
<listitem>
<para>Optionally, uncheck the patch statuses you are not interested in.</para>
</listitem>
<listitem>
<para>Click <guimenu>Audit systems</guimenu> .</para>
</listitem>
</orderedlist>
<simpara>Performing this procedure will result in a list of client systems, where each system comes with a <guimenu>Patch Status</guimenu>
 belonging to the given CVE identifier.
Possible statuses are:</simpara>
<variablelist>
<varlistentry>
<term><inlinemediaobject>
<imageobject>
<imagedata fileref="images/patch-status-affected-patch-inapplicable.png"/>
</imageobject>
<textobject><phrase>[red</phrase></textobject>
</inlinemediaobject>,scaledwidth=1em]&#8201;&#8212;&#8201;Affected, patches are available in channels that are not assigned</term>
<listitem>
<simpara>The system is affected by the vulnerability and &susemgr;
has one or more patches for it, but at this moment, the channels offering the patches are not assigned to the system.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><inlinemediaobject>
<imageobject>
<imagedata fileref="images/patch-status-affected-patch-applicable.png"/>
</imageobject>
<textobject><phrase>[orange</phrase></textobject>
</inlinemediaobject>,scaledwidth=1em]&#8201;&#8212;&#8201;Affected, at least one patch available in an assigned channel</term>
<listitem>
<simpara>The system is affected by the vulnerability, &susemgr;
has at least one patch for it in a channel that is directly assigned to the system.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><inlinemediaobject>
<imageobject>
<imagedata fileref="images/patch-status-not-affected.png"/>
</imageobject>
<textobject><phrase>[grey</phrase></textobject>
</inlinemediaobject>,scaledwidth=1em]&#8201;&#8212;&#8201;Not affected</term>
<listitem>
<simpara>The system does not have any packages installed that are patchable.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><inlinemediaobject>
<imageobject>
<imagedata fileref="images/patch-status-patched.png"/>
</imageobject>
<textobject><phrase>[green</phrase></textobject>
</inlinemediaobject>,scaledwidth=1em]&#8201;&#8212;&#8201;Patched</term>
<listitem>
<simpara>A patch has already been installed.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>In other words, it can mean the following:</simpara>
<itemizedlist>
<listitem>
<para>More than one patch might be needed to fix a certain vulnerability.</para>
</listitem>
<listitem>
<para>The <inlinemediaobject>
<imageobject>
<imagedata fileref="images/patch-status-affected-patch-applicable.png"/>
</imageobject>
<textobject><phrase>[orange</phrase></textobject>
</inlinemediaobject>,scaledwidth=1em] state is displayed when &susemgr; has at least one patch in an assigned channel. This might mean that, after installing such patch, others might be needed&mdash; users should double check the CVE Audit page after applying a patch to be sure that their systems are not affected anymore.</para>
</listitem>
</itemizedlist>
<simpara>For a more precise definitions of these states, see <xref linkend="_sec_cve_tips"/>.</simpara>
<note>
<title>Unknown CVE Number</title>
<simpara>If the CVE number is not known to &susemgr;
, an error message is displayed because &susemgr;
cannot collect and display any audit data.</simpara>
</note>
<simpara>For each system, the <guimenu>Next Action</guimenu>
 column contains suggestions on the steps to take to address the vulnerabilities.
Under these circumstances it is either sensible to install a certain patch or assign a new channel.
If applicable, a list of <quote>candidate</quote>
 channels or patches is displayed for your convenience.</simpara>
<simpara>You can also assign systems to a <guimenu>System Set</guimenu>
 for further batch processing.</simpara>
</section>
<section xml:id="_api_usage"><title>API Usage</title><simpara>An API method called <literal>audit.listSystemsByPatchStatus</literal> is available to run CVE audits from custom scripts.
Details on how to use it are available in the API guide.</simpara>
</section>
<section xml:id="_sec_cve_maint"><title>Maintaining CVE Data</title><simpara>To produce correct results, CVE Audit must periodically refresh the data needed for the search in the background.
By default, the refresh is scheduled at 11:00 PM every night.
It is recommended to run such a refresh right after the &susemgr;
installation to get proper results immediately instead of waiting until the next day.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>In the Web interface, click <menuchoice><guimenu>Admin</guimenu> <guimenuitem>Task Schedules</guimenuitem></menuchoice> in the left navigation menu.</para>
</listitem>
<listitem>
<para>Click the <literal>cve-server-channels-default</literal> schedule link.</para>
</listitem>
<listitem>
<para>Click the <literal>cve-server-channels-bunch</literal> link.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Single Run Schedule</guimenu> button.</para>
</listitem>
<listitem>
<para>After some minutes, refresh the page and check that the scheduled run status is <literal>FINISHED</literal>.</para>
</listitem>
</orderedlist>
<simpara>A direct link is also available on the <guimenu>CVE Audit</guimenu>
 page (<guimenu>extra CVE data update</guimenu>
).</simpara>
</section>
<section xml:id="_sec_cve_tips"><title>Tips and Background Information</title><simpara>Audit results are only correct if the assignment of channels to systems did not change since the last scheduled refresh (normally at 11:00 PM every night). If a CVE audit is needed and channels were assigned or unassigned to any system during the day, a manual run is recommended.
For more information, see <xref linkend="_sec_cve_maint"/>.</simpara>
<simpara>Systems are called <quote>affected</quote>
, <quote>not affected</quote>
 or <quote>patched</quote>
 not in an absolute sense, but based on information available to &susemgr;
.
This implies that concepts such as <quote>being
    affected by a vulnerability</quote>
 have particular meanings in this context.
The following definitions apply:</simpara>
<variablelist>
<varlistentry>
<term>System affected by a certain vulnerability</term>
<listitem>
<simpara>A system which has an installed package with version lower than the version of the same package in a relevant patch marked for the vulnerability.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>System not affected by a certain vulnerability</term>
<listitem>
<simpara>A system which has no installed package that is also in a relevant patch marked for the vulnerability.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>System patched for a certain vulnerability</term>
<listitem>
<simpara>A system which has an installed package with version equal to or greater than the version of the same package in a relevant patch marked for the vulnerability.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Relevant patch</term>
<listitem>
<simpara>A patch known by &susemgr;
in a relevant channel.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Relevant channel</term>
<listitem>
<simpara>A channel managed by &susemgr;
, which is either assigned to the system, the original of a cloned channel which is assigned to the system, a channel linked to a product which is installed on the system or a past or future service pack channel for the system.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>A notable consequence of the above definitions is that results can be incorrect in cases of unmanaged channels, unmanaged packages, or non-compliant systems.</simpara>
</section>
</section>
<section xml:id="_ref.webui.audit.subscription"><title><guimenu>Subscription Matching</guimenu></title><simpara>To match subscriptions with your systems use the Subscription Matcher tool.</simpara>
<simpara>The <guimenu>Edit Virtual Host Managers</guimenu>
 link in the upper right corner will take you to the <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Virtual Host Managers</guimenuitem></menuchoice>
 overview.
For more information about Virtual Host Managers, see <xref linkend="_ref.webui.systems.virt_host_managers"/>.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/audit_subscription_matching.png" width="80%"/>
</imageobject>
<textobject><phrase>audit subscription matching</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>It gathers information about systems, subscriptions and pinned matches (fixed customer defined subscriptions to systems mapping) as input and returns the best possible match according to the SUSE Terms and Conditions.
The Subscription Matcher (<command>subscription-matcher</command>) is also able to write CSV Reports.</simpara>
<itemizedlist>
<listitem>
<para>The <guimenu>Subscriptions Report</guimenu> provides subscriptions report data when used</para>
</listitem>
<listitem>
<para>The <guimenu>Unmatched Products Report</guimenu> provides information on products and their systems when a match to a subscription cannot be found</para>
</listitem>
<listitem>
<para>The <guimenu>Error Report</guimenu> provides a list of errors raised during the matching process</para>
</listitem>
</itemizedlist>
<simpara>Selecting <menuchoice><guimenu>Audit</guimenu> <guimenuitem>Subscription
   Matching</guimenuitem></menuchoice>
 from the left navigation menu will provide you with an overview of all results generated by the Subscription Matcher.</simpara>
<important>
<title>Subscription Matcher Accuracy</title>
<simpara>This tool&#8217;s goal is to help provide visual coverage on current subscription use and support reporting.
The Subscription Matcher is excellent at matching systems and products registered with &susemgr;
, however any systems, products or environments which are not found in the database will remain unmatched.
This tool is not intended to act as a replacement for auditing.
Auditing should always take precedence over subscription matching.</simpara>
</important>
<section xml:id="_guimenu_subscription_matching_guimenu_guimenu_subscriptions_guimenu"><title><guimenu>Subscription Matching</guimenu> &gt; <guimenu>Subscriptions</guimenu></title><simpara>The Subscription Matching overview provides subscription part numbers, product descriptions, policies, matched total subscriptions used and remaining, and the start and end dates of subscriptions.</simpara>
<figure>
<title>Subscription Matching Overview</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/smatching-overview.png" width="80%"/>
</imageobject>
<textobject><phrase>smatching overview</phrase></textobject>
</mediaobject>
</figure>
<variablelist>
<varlistentry>
<term>Part Number</term>
<listitem>
<simpara>Identifier of a particular product</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Description</term>
<listitem>
<simpara>Name of a particular product</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Policy</term>
<listitem>
<simpara>Kind of the subscription of this product</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Matched/Total</term>
<listitem>
<itemizedlist>
<listitem>
<para></para>
<formalpara>
<title>Fully Matched</title>
<para>If the total amounts of a subscription are fully matched, the quantity column value is highlighted with a yellow warning triangle: <inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-warning.svg"/>
</imageobject>
<textobject><phrase>Warning</phrase></textobject>
</inlinemediaobject></para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title>Susbscritions about to Expire</title>
<para>When a subscription will expire within less than 3 months, the record is highlighted.</para>
</formalpara>
</listitem>
<listitem>
<para></para>
<formalpara>
<title>Expired Subscriptions</title>
<para>If a subscription is expired, the record for it is faded.</para>
</formalpara>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Start Date</term>
<listitem>
<simpara>Start date of the subscription</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>End Date</term>
<listitem>
<simpara>End date of the subscription</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_subscription_matcher_reports"><title>Subscription Matcher Reports</title><simpara>&susemgr;
automatically generates up-to-date nightly status reports by matching your &suse;
subscriptions with all your registered systems.
These reports are stored in <filename>/var/lib/spacewalk/subscription-matcher</filename>
 and provided in CSV format.
These CSV files may be opened with a spreadsheet application such as LibreOffice Calc.</simpara>
<simpara>If you want to schedule these reports to be produced at different times, or at a certain frequency or schedule a one time completion you can perform this task by editing the Taskomatic settings for the gatherer-matcher located in the &webui;
at <menuchoice><guimenu>Admin</guimenu> <guisubmenu>Task Schedules</guisubmenu> <guimenuitem>gatherer-matcher-default</guimenuitem></menuchoice>
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/audit_subscription_matching_gatherer_matcher_default.png" width="80%"/>
</imageobject>
<textobject><phrase>audit subscription matching gatherer matcher default</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.audit.submatch.unmatched.systems"><title><guimenu>Subscription Matching</guimenu> &gt; <guimenu>Unmatched Products</guimenu></title><simpara>Selecting the <menuchoice><guimenu>Subscription Matching</guimenu> <guimenuitem>Unmatched Products</guimenuitem></menuchoice>
 tab provides an overview of all systems the matcher could not find in the database or which were not registered with &susemgr;
.
The <guimenu>Unmatched Products</guimenu>
 overview contains product names and the number of systems which remain unmatched with known installed products.</simpara>
<figure>
<title>Unmatched Products</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/audit_subscription_matching_unmatched_products.png" width="80%"/>
</imageobject>
<textobject><phrase>audit subscription matching unmatched products</phrase></textobject>
</mediaobject>
</figure>
<variablelist>
<varlistentry>
<term>Show System List</term>
<listitem>
<simpara>Select to open and display a list of all systems which were detected with an installed product but remain unmatched with a subscription.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_ref.webui.audit.submatch.sub.pinning"><title><guimenu>Subscription Matching</guimenu> &gt; <guimenu>Pins</guimenu></title><simpara>The subscription pinning feature allows a user to instruct the subscription matcher to favor matching a specific subscription with a given system or group of systems.
This is achieved by creating pins.
Each pin contains information about the preferred subscription-system match.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/audit_subscription_matching_pins.png" width="80%"/>
</imageobject>
<textobject><phrase>audit subscription matching pins</phrase></textobject>
</mediaobject>
</informalfigure>
<note>
<title>Respecting Pins</title>
<simpara>In some cases the algorithm may determine that a specific pin cannot be respected, depending on the subscription&#8217;s availability and applicability rules, in this case it will be shown as not satisfied.</simpara>
</note>
<simpara>The pins table displays a list of all pins.
Items in the list contain the status of pins, which can be <literal>satisfied</literal>, <literal>not
    satisfied</literal> and <literal>pending next run</literal>.</simpara>
<itemizedlist>
<listitem>
<para>A pin is <literal>satisfied</literal> if its system and subscription was matched in the last matcher run.</para>
</listitem>
<listitem>
<para>A pin is <literal>not satisfied</literal> if its system and subscription was <emphasis>not</emphasis> matched in the last matcher run. This can happen, for example, if the pin violates terms and conditions for subscriptions.</para>
</listitem>
<listitem>
<para>A pin is in the <literal>pending next run</literal> state when it needs a new matcher run to be taken into account. After the new run, the pin will become either <literal>satisfied</literal> or <literal>not satisfied</literal>.</para>
</listitem>
</itemizedlist>
<figure>
<title>Subscription Pinning</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/sm-pins.png" width="80%"/>
</imageobject>
<textobject><phrase>sm pins</phrase></textobject>
</mediaobject>
</figure>
<simpara>Click the <guimenu>Add a Pin</guimenu>
 button to open the <guimenu>Available Systems</guimenu>
 window.
You may filter systems by name and select a system for the matcher to pin manually.</simpara>
<figure>
<title>Add a Pin</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/add-pin.png" width="80%"/>
</imageobject>
<textobject><phrase>add pin</phrase></textobject>
</mediaobject>
</figure>
<simpara>Within the <guimenu>Subscriptions Available for Selected System</guimenu>
 window click the <guimenu>Save Pin</guimenu>
 button to raise priority for subscription use on the selected system.</simpara>
</section>
<section xml:id="_ref.webui.audit.submatch.submatch.messages"><title><guimenu>Subscription Matching</guimenu> &gt; <guimenu>Messages</guimenu></title><simpara>You can review all messages related to <guimenu>Subscription Matching</guimenu>
 from the menu:Subscription
    Matching[Messages]
 overview.</simpara>
<simpara>The following status messages can be displayed.</simpara>
<variablelist>
<varlistentry>
<term>Unknown Part Number</term>
<listitem>
<simpara>Unsupported part number detected</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Physical Guest</term>
<listitem>
<simpara>Physical system is reported as virtual guest, check hardware data</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Guest with Unknown Host</term>
<listitem>
<simpara>Virtual guest has unknown host, assuming it is a physical system</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Unknown CPU Count</term>
<listitem>
<simpara>System has an unknown number of sockets, assuming 16.
You can try fixing this by scheduling hardware refresh for affected system.</simpara>
</listitem>
</varlistentry>
</variablelist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/audit_subscription_matching_messages.png" width="80%"/>
</imageobject>
<textobject><phrase>audit subscription matching messages</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</section>
<section xml:id="_ref.webui.audit.openscap"><title>OpenSCAP</title><simpara>If you click <menuchoice><guimenu>Audit</guimenu> <guisubmenu>OpenSCAP</guisubmenu> <guimenuitem>All
   Scans</guimenuitem></menuchoice>
 in the left navigation menu, an overview of the &openscap;
 Scans appears.
SCAP (Security Content Automation Protocol) is a framework to maintain the security of enterprise systems.
It mainly performs the following tasks:</simpara>
<itemizedlist>
<listitem>
<para>Automatically verifying the availability of patches</para>
</listitem>
<listitem>
<para>Checking system security configuration settings</para>
</listitem>
<listitem>
<para>Examining systems for signs of compromise</para>
</listitem>
</itemizedlist>
<simpara>For a description of the &webui;
dialogs, see <xref linkend="_s2_openscap_suma_pages"/>.</simpara>
<simpara>For instructions and tips on how to best use OpenSCAP with &susemgr;
, refer to <xref linkend="_ch_openscap"/>.
To learn more about OpenSCAP, see the project home page at <link xl:href="http://open-scap.org">http://open-scap.org</link>.</simpara>
</section>
</chapter>
<chapter xml:id="_ch_openscap"><title>System Security via OpenSCAP</title><simpara>The Security Certification and Authorization Package (SCAP) is a standardized compliance checking solution for enterprise-level Linux infrastructures.
It is a line of specifications maintained by the National Institute of Standards and Technology (NIST) for maintaining system security for enterprise systems.</simpara>
<simpara>&susemgr;
uses OpenSCAP to implement the SCAP specifications.
OpenSCAP is an auditing tool that utilizes the Extensible Configuration Checklist Description Format (XCCDF). XCCDF is a standard way of expressing checklist content and defines security checklists.
It also combines with other specifications such as Common Platform Enumeration (CPE), Common Configuration Enumeration (CCE), and Open Vulnerability and Assessment Language (OVAL), to create a SCAP-expressed checklist that can be processed by SCAP-validated products.</simpara>
<section xml:id="_s1_openscap_features"><title>OpenSCAP Features</title><simpara>OpenSCAP verifies the presence of patches by using content produced by the SUSE Security Team (<link xl:href="https://www.suse.com/support/security/">https://www.suse.com/support/security/</link>), checks system security configuration settings and examines systems for signs of compromise by using rules based on standards and specifications.</simpara>
<simpara>To effectively use OpenSCAP, the following must be available:</simpara>
<variablelist>
<varlistentry>
<term>A tool to verify a system confirms to a standard</term>
<listitem>
<simpara>&susemgr;
uses OpenSCAP as an auditing feature.
It allows you to schedule and view compliance scans for any system.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>SCAP content</term>
<listitem>
<simpara>SCAP content files defining the test rules can be created from scratch if you understand at least XCCDF or OVAL.
XCCDF content is also frequently published online under open source licenses and this content can be customized to suit your needs.</simpara>
<simpara>The <literal role="systemitem">openscap-content</literal>
package provides default content guidance for systems via a template.</simpara>
</listitem>
</varlistentry>
</variablelist>
<note>
<simpara>&suse;
supports the use of templates to evaluate your systems.
However, you are creating custom content at your own risk.</simpara>
</note>
<simpara>SCAP was created to provide a standardized approach to maintaining system security, and the standards that are used will therefore continually change to meet the needs of the community and enterprise businesses.
New specifications are governed by NIST&#8217;s SCAP Release cycle in order to provide a consistent and repeatable revision work flow.
For more information, see <link xl:href="http://scap.nist.gov/timeline.html">http://scap.nist.gov/timeline.html</link>.</simpara>
</section>
<section xml:id="_s1_openscap_suma_prerq"><title>Prerequisites for Using OpenSCAP in &susemgr;</title><simpara>The following sections describe the server and client prerequisites for using OpenSCAP.</simpara>
<variablelist>
<varlistentry>
<term>Package Requirements</term>
<listitem>
<simpara>As Server: &susemgr;
1.7 or later.</simpara>
<simpara>For the Client: <literal role="systemitem">spacewalk-oscap</literal>
package (available from the &susemgr;
Tools Child Channel).</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Other Requirements</term>
<listitem>
<simpara>Client: Distribution of the XCCDF content to all client machines.</simpara>
</listitem>
</varlistentry>
</variablelist>
<note>
<title>OpenSCAP Auditing Availability</title>
<simpara>OpenSCAP auditing is not available on Salt SSH minions.</simpara>
</note>
<simpara>You can distribute XCCDF content to client machines using any of the following methods:</simpara>
<itemizedlist>
<listitem>
<para>Traditional Methods (CD, USB, NFS, scp, ftp)</para>
</listitem>
<listitem>
<para>&susemgr; Scripts</para>
</listitem>
<listitem>
<para>RPMs</para>
</listitem>
</itemizedlist>
<simpara>Custom RPMs are the recommended way to distribute SCAP content to other machines.
RPM packages can be signed and verified to ensure their integrity.
Installation, removal, and verification of RPM packages can be managed from the user interface.</simpara>
</section>
<section xml:id="_s2_openscap_suma_audit_scans"><title>Performing Audit Scans</title><simpara>OpenSCAP integration in &susemgr;
provides the ability to perform audit scans on client systems.
This section describes the available scanning methods.</simpara>
<important>
<title>OpenSCAP Scans via Salt ssh-push Minions</title>
<simpara>Currently performing an OpenSCAP scan is disabled in the WebUI for Salt ssh-push minions.
This functionality will be adapted and enabled in a future release.</simpara>
</important>
<orderedlist xml:id="_pro_os_suma_audit_scans_webui" numeration="arabic">
<title>Procedure: Scans via the Web Interface</title>
<listitem>
<para>To perform a scan via the Web interface, log in to &susemgr; .</para>
</listitem>
<listitem>
<para>Click on <guimenu>Systems</guimenu> and select the target system.</para>
</listitem>
<listitem>
<para>Click on <menuchoice><guimenu>Audit</guimenu> <guimenuitem>Schedule</guimenuitem></menuchoice> .</para>
</listitem>
<listitem>
<para>Fill in the Schedule New XCCDF Scan form. See <xref linkend="_sm_audit_schedule"/> for more information about the fields on this page.</para>
<warning>
<simpara>The XCCDF content is validated before it is run on the remote system.
Specifying invalid arguments can make spacewalk-oscap fail to validate or run.
Due to security concerns the <command>oscap xccdf eval</command> command only accepts a limited set of parameters.</simpara>
</warning>
<simpara>Run the <command>mgr_check</command> command to ensure the action is being picked up by the client system.</simpara>
<screen>mgr_check -vv</screen>
<note>
<simpara>If the &susemgr;
daemon (<command>rhnsd</command>) or <command>osad</command> are running on the client system, the action will be picked up by these services.
To check if they are running, use:</simpara>
</note>
</listitem>
</orderedlist>
<screen>service rhnsd start</screen>
<simpara>or</simpara>
<screen>service osad start</screen>
<simpara>+</simpara>
<simpara>To view the results of the scan, refer to <xref linkend="_s2_openscap_suma_audit_scans_view"/>.</simpara>
<figure>
<title>Scheduling a Scan via the Web Interface</title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/audit_openscap_schedule_scan.png" width="333%"/>
</imageobject>
<textobject><phrase>audit openscap schedule scan</phrase></textobject>
</mediaobject>
</figure>
<orderedlist numeration="arabic">
<title>Procedure: Scans via API</title>
<listitem>
<para>To perform an audit scan via API, choose an existing script or create a script for scheduling a system scan through <literal>system.scap.scheduleXccdfScan</literal>, the front end API, for example:</para>
<screen>#!/usr/bin/python
client = xmlrpclib.Server('https://spacewalk.example.com/rpc/api')
key = client.auth.login('username', 'password')
client.system.scap.scheduleXccdfScan(key, 1000010001,
    '/usr/local/share/scap/usgcb-sled11desktop-xccdf.xml',
    '--profile united_states_government_configuration_baseline')</screen>
<simpara>Where:
<emphasis role="strong"> <literal>1000010001</literal> is the system ID (sid).
</emphasis> <filename>/usr/local/share/scap/usgcb-sled11desktop-xccdf.xml</filename> is the path to the content location on the client system. In this case, it assumes USGCB content in the <filename>/usr/local/share/scap</filename> directory.
** <option>--profile united_states_government_configuration_baseline</option> is an additional argument for the <command>oscap</command> command. In this case, it is using the USGCB.</simpara>
</listitem>
<listitem>
<para>Run the script on the command-line interface of any system. The system needs the appropriate Python and XML-RPC libraries installed.</para>
</listitem>
<listitem>
<para>Run the <command>mgr_check</command> command to ensure that the action is being picked up by the client system.</para>
<screen>mgr_check -vv</screen>
<simpara>If the &susemgr;
daemon (<command>rhnsd</command>) or <command>osad</command> are running on the client system, the action will be picked up by these services.
To check if they are running, use:</simpara>
<screen>service rhnsd start</screen>
<simpara>or</simpara>
<screen>service osad start</screen>
</listitem>
</orderedlist>
<note>
<title>Enabling Upload of Detailed SCAP Files</title>
<simpara>To make sure detailed information about the scan will be available, activate the upload of detailed SCAP files on the clients to be evaluated.
On the <guimenu>Admin</guimenu>
 page, click on <guimenu>Organization</guimenu>
 and select one.
Click on the <guimenu>Configuration</guimenu>
 tab and check <guimenu>Enable Upload Of Detailed SCAP Files</guimenu>
.
This feature generates an additional HTML version when you run a scan.
The results will show an extra line like: <literal>Detailed Results: xccdf-report.html xccdf-results.xml
     scap-yast2sec-oval.xml.result.xml</literal>.</simpara>
</note>
</section>
<section xml:id="_s2_openscap_suma_audit_scans_view"><title>Viewing SCAP Results</title><simpara>There are three methods of viewing the results of finished scans:</simpara>
<itemizedlist>
<listitem>
<para>Via the Web interface. Once the scan has finished, the results should show up on the <guimenu>Audit</guimenu> tab of a specific system. This page is discussed in <xref linkend="_s2_openscap_suma_pages"/>.</para>
</listitem>
<listitem>
<para>Via the API functions in handler <literal>system.scap</literal>.</para>
</listitem>
<listitem>
<para>Via the <command>spacewalk-report</command> command as follows:</para>
<screen>spacewalk-report system-history-scap
spacewalk-report scap-scan
spacewalk-report scap-scan-results</screen>
</listitem>
</itemizedlist>
</section>
<section xml:id="_s2_openscap_suma_pages"><title>OpenSCAP &susemgr; Web Interface</title><simpara>The following sections describe the tabs in the &susemgr;
Web interface that provide access to OpenSCAP and its features.</simpara>
<section xml:id="_openscap_scans_page"><title>OpenSCAP Scans Page</title><simpara>Click the <guimenu>Audit</guimenu>
 tab on the top navigation bar, then OpenSCAP on the left.
Here you can view, search for, and compare completed OpenSCAP scans.</simpara>
<section xml:id="_guimenu_openscap_guimenu_guimenu_all_scans_guimenu"><title><guimenu>OpenSCAP</guimenu> &gt; <guimenu>All Scans</guimenu></title><simpara><guimenu>All Scans</guimenu>
 is the default page that appears on the <menuchoice><guimenu>Audit</guimenu> <guimenuitem>OpenSCAP</guimenuitem></menuchoice>
 page.
Here you see all the completed OpenSCAP scans you have permission to view.
Permissions for scans are derived from system permissions.</simpara>
<simpara>For each scan, the following information is displayed:</simpara>
<variablelist>
<varlistentry>
<term>System</term>
<listitem>
<simpara>the scanned system.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>XCCDF Profile</term>
<listitem>
<simpara>the evaluated profile.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Completed</term>
<listitem>
<simpara>time of completion.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Satisfied</term>
<listitem>
<simpara>number of rules satisfied.
A rule is considered to be satisfied if the result of the evaluation is either Pass or Fixed.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Dissatisfied</term>
<listitem>
<simpara>number of rules that were not satisfied.
A rule is considered Dissatisfied if the result of the evaluation is a Fail.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Unknown</term>
<listitem>
<simpara>number of rules which failed to evaluate.
A rule is considered to be Unknown if the result of the evaluation is an Error, Unknown or Not Checked.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>The evaluation of XCCDF rules may also return status results like <literal>Informational</literal>, <literal>Not Applicable</literal>, or not <literal>Selected</literal>.
In such cases, the given rule is not included in the statistics on this page.
See <menuchoice><guimenu>System Details</guimenu> <guimenuitem>Audit</guimenuitem></menuchoice>
 for information on these types of results.</simpara>
</section>
<section xml:id="_guimenu_openscap_guimenu_guimenu_xccdf_diff_guimenu"><title><guimenu>OpenSCAP</guimenu> &gt; <guimenu>XCCDF Diff</guimenu></title><simpara>XCCDF Diff is an application that visualizes the comparison of two XCCDF scans.
It shows metadata for two scans as well as the lists of results.</simpara>
<simpara>Click the appropriate icon on the Scans page to access the diff output of similar scans.
Alternatively, specify the ID of scans you want to compare.</simpara>
<simpara>Items that show up in only one of the compared scans are considered to be "varying". Varying items are always highlighted in beige.
There are three possible comparison modes:</simpara>
<variablelist>
<varlistentry>
<term>Full Comparison</term>
<listitem>
<simpara>all the scanned items.</simpara>
<variablelist>
<varlistentry>
<term>Only Changed Items</term>
<listitem>
<simpara>items that have changed.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Only Invariant</term>
<listitem>
<simpara>unchanged or similar items.</simpara>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_guimenu_openscap_guimenu_guimenu_advanced_search_guimenu"><title><guimenu>OpenSCAP</guimenu> &gt; <guimenu>Advanced Search</guimenu></title><simpara>Use the Advanced Search page to search through your scans according to specified criteria including:</simpara>
<itemizedlist>
<listitem>
<para>rule results,</para>
</listitem>
<listitem>
<para>targeted machine,</para>
</listitem>
<listitem>
<para>time frame of the scan.</para>
</listitem>
</itemizedlist>
<figure>
<title>OpenSCAP Advanced Search</title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/audit_openscap_advanced_search.png" width="333%"/>
</imageobject>
<textobject><phrase>audit openscap advanced search</phrase></textobject>
</mediaobject>
</figure>
<simpara>The search either returns a list of results or a list of scans, which are included in the results.</simpara>
</section>
</section>
<section xml:id="_sm_audit_page"><title>Systems Audit Page</title><simpara>To display a system&#8217;s audit page, click <menuchoice><guimenu>Systems</guimenu> <guisubmenu>system_name</guisubmenu> <guimenuitem>Audit</guimenuitem></menuchoice>
.
Use this page to schedule and view compliance scans for a particular system.
Scans are performed by the OpenSCAP tool, which implements NIST&#8217;s standard Security Content Automation Protocol (SCAP). Before you scan a system, make sure that the SCAP content is prepared and all prerequisites in <xref linkend="_s1_openscap_suma_prerq"/> are met.</simpara>
<section xml:id="_list_scans"><title>List Scans</title><simpara>This subtab lists a summary of all scans completed on the system.
The following columns are displayed:</simpara>
<variablelist>
<varlistentry>
<term>XCCDF Test Result</term>
<listitem>
<simpara>The scan test result name, which provides a link to the detailed results of the scan.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Completed</term>
<listitem>
<simpara>The exact time the scan finished.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Compliance</term>
<listitem>
<simpara>The unweighted pass/fail ratio of compliance based on the Standard used.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>P</term>
<listitem>
<simpara>Number of checks that passed.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>F</term>
<listitem>
<simpara>Number of checks that failed.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>E</term>
<listitem>
<simpara>Number of errors that occurred during the scan.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>U</term>
<listitem>
<simpara>Unknown.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>N</term>
<listitem>
<simpara>Not applicable to the machine.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>K</term>
<listitem>
<simpara>Not checked.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>S</term>
<listitem>
<simpara>Not Selected.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>I</term>
<listitem>
<simpara>Informational.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>X</term>
<listitem>
<simpara>Fixed.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Total</term>
<listitem>
<simpara>Total number of checks.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>Each entry starts with an icon indicating the results of a comparison to a previous similar scan.
The icons indicate the following:</simpara>
<itemizedlist>
<listitem>
<para>"RHN List Checked" Icon&#8201;&#8212;&#8201;no difference between the compared scans.</para>
</listitem>
<listitem>
<para>"RHN List Alert" Icon&#8201;&#8212;&#8201;arbitrary differences between the compared scans.</para>
</listitem>
<listitem>
<para>"RHN List Error" Icon&#8201;&#8212;&#8201;major differences between the compared scans. Either there are more failures than the previous scan or less passes</para>
</listitem>
<listitem>
<para>"RHN List Check In" Icon&#8201;&#8212;&#8201;no comparable scan was found, therefore, no comparison was made.</para>
</listitem>
</itemizedlist>
<simpara>To find out what has changed between two scans in more detail, select the ones you are interested in and click <guimenu>Compare Selected Scans</guimenu>
.
To delete scans that are no longer relevant, select those and click on <guimenu>Remove Selected Scans</guimenu>
.
Scan results can also be downloaded in CSV format.</simpara>
</section>
<section xml:id="_scan_details"><title>Scan Details</title><simpara>The Scan Details page contains the results of a single scan.
The page is divided into two sections:</simpara>
<variablelist>
<varlistentry>
<term>Details of the XCCDF Scan</term>
<listitem>
<simpara>This section displays various details about the scan, including:</simpara>
<itemizedlist>
<listitem>
<para>File System Path: the path to the XCCDF file used for the scan.</para>
</listitem>
<listitem>
<para>Command-line Arguments: any additional command-line arguments that were used.</para>
</listitem>
<listitem>
<para>Profile Identifier: the profile identifier used for the scan.</para>
</listitem>
<listitem>
<para>Profile Title: the title of the profile used for the scan.</para>
</listitem>
<listitem>
<para>Scan&#8217;s Error output: any errors encountered during the scan.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>XCCDF Rule Results</term>
<listitem>
<simpara>The rule results provide the full list of XCCDF rule identifiers, identifying tags, and the result for each of these rule checks.
This list can be filtered by a specific result.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_sm_audit_schedule"><title>Schedule Page</title><simpara>Use the Schedule New XCCDF Scan page to schedule new scans for specific machines.
Scans occur at the system&#8217;s next scheduled check-in that occurs after the date and time specified.
The following fields can be configured:</simpara>
<variablelist>
<varlistentry>
<term>Command-line Arguments</term>
<listitem>
<simpara>Optional arguments to the <command>oscap</command> command, either:</simpara>
<itemizedlist>
<listitem>
<para><literal>--profile PROFILE</literal>: Specifies a particular profile from the XCCDF document.</para>
<simpara>Profiles are determined by the Profile tag in the XCCDF XML file.
Use the <command>oscap</command> command to see a list of profiles within a given XCCDF file, for example:</simpara>
<screen># oscap info /usr/local/share/scap/dist_sles12_scap-sles12-oval.xml
Document type: XCCDF Checklist
Checklist version: 1.1
Status: draft
Generated: 2015-12-12
Imported: 2016-02-15T22:09:33
Resolved: false
Profiles: SLES12-Default</screen>
<simpara>If not specified, the default profile is used.
Some early versions of OpenSCAP in require that you use the <literal>--profile</literal> option or the scan will fail.</simpara>
</listitem>
<listitem>
<para><literal>--skip-valid</literal>: Do not validate input and output files. You can use this option to bypass the file validation process if you do not have well-formed XCCDF content.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Path to XCCDF Document</term>
<listitem>
<simpara>This is a required field.
The path parameter points to the XCCDF content location on the client system.
For example: <filename>/usr/local/share/scap/dist_sles12_scap-sles12-oval.xml</filename></simpara>
<warning>
<simpara>The XCCDF content is validated before it is run on the remote system.
Specifying invalid arguments can cause <command>spacewalk-oscap</command> to fail to validate or run.
Due to security concerns, the <command>oscap xccdf eval</command> command only accepts a limited set of parameters.</simpara>
</warning>
</listitem>
</varlistentry>
</variablelist>
<simpara>For information about how to schedule scans using the &webui;
, refer to <xref linkend="_pro_os_suma_audit_scans_webui"/>.</simpara>
</section>
</section>
</section>
</chapter>
<chapter xml:id="_ref.webui.config"><title>Configuration</title><simpara>Only Configuration Administrators or &susemgr;
Administrators see the <guimenu>Configuration</guimenu>
 pages.</simpara>
<simpara>On this configuration pages, manage systems with configuration files, channels offering configuration files, and configartion files themselves.
Centrally-managed files are available to multiple systems; locally-managed files are available to individual systems only.</simpara>
<note>
<title>Differences of System Types</title>
<simpara>Configuration Managment is available for both client system types, traditionally managed clients ([Management]) and Salt minions ([Salt]).  Some traditional features are not suitable for Salt minions, and thus not available and excluded from the &webui;
.</simpara>
</note>
<section xml:id="_configuration_management_for_salt"><title>Configuration Management for Salt</title><simpara>Configuration Management is now enabled for Salt.
The following matrix provides both supported and unsupported configuration management features.</simpara>
<important>
<title>Missing &webui;Options</title>
<simpara>Several &webui;
tabs will be missing for Salt Configuration Management.
These features are not suitable for Salt minions.</simpara>
</important>
<table frame="all" rowsep="1" colsep="1">
<title>Salt Configuration Management</title>
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Configuration Management Features</simpara></entry>
<entry align="left" valign="top"><simpara>Salt Support Status</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>Global Configuration Channels</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Deploying Files</simpara></entry>
<entry align="left" valign="top"><simpara>Supported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Comparing Files</simpara></entry>
<entry align="left" valign="top"><simpara>Supported (but the logic is currently inverted)</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Locally Managed Files</simpara></entry>
<entry align="left" valign="top"><simpara>Unsupported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Sandbox Files</simpara></entry>
<entry align="left" valign="top"><simpara>Unsupported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Applying the Highstate</simpara></entry>
<entry align="left" valign="top"><simpara>Apply the highstate and configuration channels will be deployed to all subscribed systems.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>File Import from a Client</simpara></entry>
<entry align="left" valign="top"><simpara>Unsupported</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Configuration Macros</simpara></entry>
<entry align="left" valign="top"><simpara>Unsupported</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
</section>
<section xml:id="_ref.webui.config.preparing"><title>Preparing Systems for Configuration Management [Management]</title><simpara><indexterm>
<primary>changing email address</primary><secondary>system preparation</secondary>
</indexterm>
<indexterm>
<primary>system preparation</primary>
</indexterm></simpara>
<simpara>To manage a traditional client&#8217;s configuration with &susemgr;
, it must have the appropriate tools and the <filename>config-enable</filename>
 file installed.
These tools will be available if you installed the system with the configuration management functionality using &ay;
 or Kickstart.
If not, they can be found in the Tools child channel for your distribution.
Download and install the latest <filename>rhncfg*</filename>
 packages:</simpara>
<itemizedlist>
<listitem>
<para><filename>rhncfg</filename>&#8201;&#8212;&#8201;the base libraries and functions needed by all <filename>rhncfg-*</filename> packages,</para>
</listitem>
<listitem>
<para><filename>rhncfg-actions</filename>&#8201;&#8212;&#8201;the RPM package required to run configuration actions scheduled via &susemgr; ,</para>
</listitem>
<listitem>
<para><filename>rhncfg-client</filename>&#8201;&#8212;&#8201;the RPM package with a command line interface to the client features of the Configuration Management system,</para>
</listitem>
<listitem>
<para><filename>rhncfg-management</filename>&#8201;&#8212;&#8201;the RPM package with a command line interface used to manage &susemgr; configuration.</para>
</listitem>
</itemizedlist>
<simpara>Installation of these packages can also be accomplished during bootstrapping if you enable <guimenu>Configuration File Deployment</guimenu>
 on the <guimenu>Details</guimenu>
 page of the activation key after creating that activation key.
For more information about activation keys, see <xref linkend="_s3_sm_system_keys_manage"/>.</simpara>
</section>
<section xml:id="_ref.webui.config.overview"><title>Overview</title><simpara>The <guimenu>Configuration Overview</guimenu>
 page shows all of the configuration files that are managed by your organization in &susemgr;
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/configuration_overview.png" width="80%"/>
</imageobject>
<textobject><phrase>configuration overview</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>This list includes files that are managed centrally in configuration channels and files that are managed locally via individual system profiles.</simpara>
<variablelist>
<varlistentry>
<term>Configuration Summary</term>
<listitem>
<simpara>The panel provides quick information about your configuration files.
Click the blue text to the right to display relevant systems, channel details, or configuration files.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Configuration Actions</term>
<listitem>
<simpara><guimenu>Configuration Actions</guimenu>
offers direct access to the most common configuration management tasks.
Deploy, compare, or create files on your systems.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Recently Modified Configuration Files</term>
<listitem>
<simpara>The list shows which files have changed when and to which channel they belong.
If no files have been changed, no list appears.
Click the name of a file to see its <guimenu>Details</guimenu>
page.
Click the channel name to see its <guimenu>Channel Details</guimenu>
page.</simpara>
<simpara>File types that can appear here:
* <inlinemediaobject>
<imageobject>
<imagedata fileref="images/spacewalk-icon-software-channels.svg"/>
</imageobject>
<textobject><phrase>Spacewalk Icon Software Channels</phrase></textobject>
</inlinemediaobject>
&#8201;&#8212;&#8201;Centrally-managed configuration file provided by a global
       configuration channel.
* <inlinemediaobject>
<imageobject>
<imagedata fileref="images/fa-desktop.svg"/>
</imageobject>
<textobject><phrase>FA Desktop</phrase></textobject>
</inlinemediaobject>
&#8201;&#8212;&#8201;[Management] Locally-managed configuration file, maybe overriding a
       centrally-managed file.
* <inlinemediaobject>
<imageobject>
<imagedata fileref="images/spacewalk-icon-sandbox.svg"/>
</imageobject>
<textobject><phrase>Spacewalk Icon Sandbox</phrase></textobject>
</inlinemediaobject>
&#8201;&#8212;&#8201;[Management] Sandbox configuration file.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Recently Scheduled Configuration File Deployments</term>
<listitem>
<simpara>Each scheduled action is listed along with the status of the action.
Any scheduled configuration task, from enabling configuration management on a system to deploying a specific configuration file, is displayed.
Here you can quickly assess if all tasks have been successfully carried out or fix any problems.
Clicking the blue text displays the <menuchoice><guimenu>System Details</guimenu> <guimenuitem>Schedule</guimenuitem></menuchoice>
page for the specified system.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_ref.webui.config.channels"><title>Configuration Channels</title><simpara><indexterm>
<primary>actions</primary><secondary>create</secondary>
</indexterm>
<indexterm>
<primary>create</primary>
</indexterm></simpara>
<simpara>As mentioned above, &susemgr;
manages both central and local configuration channels and files.
Central configuration management allows you to deploy configuration files to multiple systems (both traditional clients ([Management]) and Salt minions ([Salt])). Local configuration management is available for traditional clients ([Management]) only and allows you to specify overrides or configuration files that are not changed by subscribing the system to a central channel.</simpara>
<simpara>A <quote>state channel</quote>
 is a type of a configuration channel but for Salt minion only.
For a state channel, the <filename>init.sls</filename>
 file is not auto-generated, the user creates and edits it.
Additionally, state channels can contain arbitrary configuration files that could be referenced from within the <filename>init.sls</filename>
 file.
Therefore, state channels effectively replace custom states.</simpara>
<note>
<title>Referencing Configuration Files with Organization ID</title>
<simpara>You must reference configuration files with the <literal>salt://</literal> prefix, the organization ID, and the channel name.
For example, to reference <filename>/etc/motd</filename>
 use:</simpara>
<screen>file.managed:
  - source: salt://manager_org_1/`channel_name`/etc/motd</screen>
</note>
<simpara>Central configuration or state channels must be created via the links on this page.</simpara>
<simpara>Click the name of the configuration channel to see the details page for that channel.
If you click the number of files in the channel, you are taken to the <guimenu>List/Remove Files</guimenu>
 page of that channel.
If you click the number of systems subscribed to the configuration channel, you are taken to the <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Subscribed
   Systems</guimenuitem></menuchoice>
 page for that channel.</simpara>
<simpara>To create a new central configuration channel:</simpara>
<orderedlist xml:id="_proc.config.channels.create.cfgch" numeration="arabic">
<title>Procedure: Creating Central Configuration Channel</title>
<listitem>
<para>Click the <guimenu>Create Config Channel</guimenu> link in the upper right corner of this screen.</para>
</listitem>
<listitem>
<para>Enter a name for the channel.</para>
</listitem>
<listitem>
<para>Enter a label for the channel. This field must contain only alphanumeric characters, "-", "_", and ".".</para>
</listitem>
<listitem>
<para>Enter a mandatory description for the channel that allows you to distinguish it from other channels. No character restrictions apply.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Create Config Channel</guimenu> button to create the new channel.</para>
</listitem>
<listitem>
<para>The following page is a subset of the <guimenu>Channel Details</guimenu> page and has three tabs: <guimenu>Overview</guimenu> , <guimenu>Add Files</guimenu> , and <guimenu>Systems</guimenu> . The <guimenu>Channel Details</guimenu> page is discussed in <xref linkend="_config_config_channels_channel_details"/>.</para>
</listitem>
</orderedlist>
<simpara>To create a new state channel with an <filename>init.sls</filename>
 file:</simpara>
<orderedlist xml:id="_proc.config.channels.create.statech" numeration="arabic">
<title>Procedure: Creating State Channel [Salt]</title>
<listitem>
<para>Click the <guimenu>Create State Channel</guimenu> link in the upper right corner of this screen.</para>
</listitem>
<listitem>
<para>Enter a name for the channel.</para>
</listitem>
<listitem>
<para>Enter a label for the channel. This field must contain only alphanumeric characters, "-", "_", and ".".</para>
</listitem>
<listitem>
<para>Enter a mandatory description for the channel that allows you to distinguish it from other channels. No character restrictions apply.</para>
</listitem>
<listitem>
<para>Enter the <guimenu>SLS Contents</guimenu> for the <filename>init.sls</filename> file.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Create Config Channel</guimenu> button to create the new channel.</para>
</listitem>
<listitem>
<para>The following page is a subset of the <guimenu>Channel Details</guimenu> page and has three tabs: <guimenu>Overview</guimenu> , <guimenu>List/Remove Files</guimenu> , <guimenu>Add Files</guimenu> , and <guimenu>Systems</guimenu> . The <guimenu>Channel Details</guimenu> page is discussed in <xref linkend="_config_config_channels_channel_details"/>.List/Remove Files</para>
</listitem>
</orderedlist>
<section xml:id="_config_config_channels_channel_details"><title><guimenu>Configuration</guimenu> &gt; <guimenu>Configuration Channels</guimenu> &gt; <guimenu>Configuration Channel Details</guimenu></title><variablelist>
<varlistentry>
<term>Overview</term>
<listitem>
<simpara>The <guimenu>Overview</guimenu>
page of the <guimenu>Configuration Channel Details</guimenu>
page is divided into several panels.</simpara>
<variablelist>
<varlistentry>
<term>Channel Information</term>
<listitem>
<simpara>The panel provides status information for the contents of the channel.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Configuration Actions</term>
<listitem>
<simpara>The panel provides access to the most common configuration tasks.
For Salt minions, there is a link to edit the <filename>init.sls</filename>
file.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Channel Properties [Management]</term>
<listitem>
<simpara>By clicking the <guimenu>Edit Properties</guimenu>
link, you can edit the name, label, and description of the channel.</simpara>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
<varlistentry>
<term>List/Remove Files</term>
<listitem>
<simpara>This page only appears if there are files in the configuration channel.
You can remove files or copy the latest versions into a set of local overrides or into other central configuration channels.
Check the box next to files you want to manipulate and click the respective action button.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Add Files</term>
<listitem>
<simpara>The <guimenu>Add Files</guimenu>
page has three subtabs of its own, which allow you to <guimenu>Upload</guimenu>
, <guimenu>Import</guimenu>
, or <guimenu>Create</guimenu>
configuration files to be included in the channel.</simpara>
<variablelist>
<varlistentry>
<term>Upload File</term>
<listitem>
<simpara>To upload a file into the configuration channel, browse for the file on your local system, populate all fields, and click the <guimenu>Upload Configuration File</guimenu>
button.
The <guimenu>Filename/Path</guimenu>
field is the absolute path where the file will be deployed.</simpara>
<simpara>You can set the <guimenu>Ownership</guimenu>
via the <guimenu>user name</guimenu>
and <guimenu>group name</guimenu>
and the <guimenu>Permissions</guimenu>
of the file when it is deployed.</simpara>
<simpara>If the client has SELinux enabled, you can configure <guimenu>SELinux contexts</guimenu>
to enable the required file attributes (such as user, role, and file type).</simpara>
<simpara>If the configuration file includes a macro (a variable in a configuration file), enter the symbol that marks the beginning and end of the macro.
For more information on using macros, see <xref linkend="_s3_sm_file_macros"/>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Import Files</term>
<listitem>
<simpara>To import files from other configuration channels, including any locally-managed channels, check the box to the left of any file you want to import.
Then click the <guimenu>Import Configuration File(s)</guimenu>
button.</simpara>
<note>
<simpara>A sandbox icon (<inlinemediaobject>
<imageobject>
<imagedata fileref="images/spacewalk-icon-sandbox.svg"/>
</imageobject>
<textobject><phrase>Spacewalk Icon Sandbox</phrase></textobject>
</inlinemediaobject>
) indicates that the listed file is currently located in a local sandbox.
Files in a system&#8217;s sandbox are considered experimental and could be unstable.
Use caution when selecting them for a central configuration channel.</simpara>
</note>
</listitem>
</varlistentry>
<varlistentry>
<term>Create File</term>
<listitem>
<simpara>Create a configuration file, directory, or symbolic link from scratch to be included in the configuration channel.</simpara>
</listitem>
</varlistentry>
</variablelist>
<orderedlist numeration="lowerroman">
<title>Procedure: Creating a Configuration File, Directory, or Symbolic Link From Scratch</title>
<listitem>
<para>Choose whether you want to create a text file, directory, or symbolic link in the <guimenu>File Type</guimenu> section.</para>
</listitem>
<listitem>
<para>In the <filename>Filename/Path</filename> text box, set the absolute path to where the file should be deployed.</para>
</listitem>
<listitem>
<para>If you are creating a symbolic link, indicate the target file and path in the <guimenu>Symbolic Link Target Filename/Path</guimenu> text box.</para>
</listitem>
<listitem>
<para>Enter the <guimenu>User name</guimenu> and <guimenu>Group name</guimenu> for the file in the <guimenu>Ownership</guimenu> section, and the <guimenu>File Permissions Mode</guimenu> .</para>
</listitem>
<listitem>
<para>If the client has SELinux enabled, you can configure <guimenu>SELinux contexts</guimenu> to enable the required file attributes (such as user, role, and file type).</para>
</listitem>
<listitem>
<para>If the configuration file includes a macro, enter the symbol that marks the beginning and end of the macro.</para>
</listitem>
<listitem>
<para>Then enter the configuration file content in the <guimenu>File Contents</guimenu> field, using the script drop-down box to choose the appropriate scripting language.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Create Configuration File</guimenu> button to create the new file.</para>
</listitem>
</orderedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>Deploy Files</term>
<listitem>
<simpara>This page only appears when there are files in the channel and a system is subscribed to the channel.
Deploy all files by clicking the <guimenu>Deploy All Files</guimenu>
button or check selected files and click the <guimenu>Deploy Selected Files</guimenu>
button.
Select to which systems the file(s) should be applied.
All systems subscribed to this channel are listed.
If you want to apply the file to a different system, subscribe it to the channel first.
To deploy the files, click <guimenu>Confirm &amp; Deploy to Selected Systems</guimenu>
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Systems</term>
<listitem>
<simpara>Manage systems subscribed to the configuration channel via two subtabs:</simpara>
<variablelist>
<varlistentry>
<term>Subscribed Systems</term>
<listitem>
<simpara>All systems subscribed to the current channel are displayed.
Click the name of a system to see the <guimenu>System Details</guimenu>
page.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Target Systems</term>
<listitem>
<simpara>This subtab displays a list of systems enabled for configuration management but not yet subscribed to the channel.
To add a system to the configuration channel, check the box to the left of the system&#8217;s name and click the <guimenu>Subscribe System</guimenu>
button.</simpara>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
</section>
</section>
<section xml:id="_ref.webui.config.files"><title>Configuration Files</title><simpara>This page allows you to manage your configuration files independently.
Both centrally-managed and locally-managed files can be reached from sub-pages.</simpara>
<note>
<title>Maximum Size for Configuration Files</title>
<simpara>By default, the maximum file size for configuration files is 128 KB (131072 bytes). &suse;
supports a configuration file size up to 1 MB; larger values are not guaranteed to work.</simpara>
</note>
<simpara>To change the file size limit, edit all the following files on the &susemgr;
 server and edit or add the following variables:</simpara>
<screen># /usr/share/rhn/config-defaults/rhn_web.conf
web.maximum_config_file_size = 262144

# /usr/share/rhn/config-defaults/rhn_server.conf
maximum_config_file_size = 262144

# /etc/rhn/rhn.conf
web.maximum_config_file_size=262144
server.maximum_config_file_size=262144</screen>
<simpara>Then restart <literal role="systemitem">spacewalk</literal>
:</simpara>
<screen># spacewalk-service restart</screen>
<section xml:id="_configuration_files_central"><title>Centrally-Managed Files</title><simpara>Centrally-managed files are available to multiple systems.
Changing a file within a centrally-managed channel may result in changes to several systems.
Locally-managed files supersede centrally-managed files.
For more information about locally-managed files, see <xref linkend="_configuration_files_local"/>.</simpara>
<simpara>This page lists all files currently stored in your central configuration channel.
Click the <guimenu>Path</guimenu>
 of a file to see its <guimenu>Details</guimenu>
 tab.
Click the name of the <guimenu>Configuration Channel</guimenu>
 to see the channel&#8217;s <guimenu>Overview</guimenu>
 tab.
Clicking <guimenu>Systems Subscribed</guimenu>
 shows you all systems currently subscribed to the channel containing that file.
Click <guimenu>Systems Overriding</guimenu>
 to see all systems that have a local (or override) version of the configuration file.
The centrally-managed file will not be deployed to those systems.</simpara>
</section>
<section xml:id="_configuration_files_local"><title>Locally-Managed Files [Management]</title><simpara>Locally-managed configuration files apply to only one system.
They may be files in the system&#8217;s sandbox or files that can be deployed to the system at any time.
Local files have higher priority than centrally-managed files.
If a system is subscribed to a configuration channel with a given file and additionally has a locally-managed version of that file, the locally-managed version will be deployed.</simpara>
<simpara>The list of all local (override) configuration files for your systems includes the local configuration channels and the sandbox channel for each Provisioning-entitled system.</simpara>
<simpara>Click the <guimenu>Path</guimenu>
 of the file to see its <guimenu>Config File Details</guimenu>
.
Click the name of the system to which it belongs to see its <menuchoice><guimenu>System Details</guimenu> <guisubmenu>Configuration</guisubmenu> <guimenuitem>Overview</guimenuitem></menuchoice>
 page.</simpara>
</section>
<section xml:id="_s3_sm_file_macros"><title>Including Macros in your Configuration Files</title><simpara><indexterm>
<primary>within configuration Files</primary><secondary>interpolation</secondary>
</indexterm>
<indexterm>
<primary>interpolation</primary>
</indexterm></simpara>
<simpara>Being able to store one file and share identical configurations is useful, but what if you have many variations of the same configuration file? What do you do if you have configuration files that differ only in system-specific details, such as host name and MAC address?</simpara>
<simpara>Traditional file management would require to upload and distribute each file separately, even if the distinction is nominal and the number of variations is in the hundreds or thousands. &susemgr;
addresses this by allowing the inclusion of macros, or variables, within the configuration files it manages.
In addition to variables for custom system information, the following standard macros are supported:</simpara>
<screen>rhn.system.sid
rhn.system.profile_name
rhn.system.description
rhn.system.hostname
rhn.system.ip_address
rhn.system.custom_info(key_name)
rhn.system.net_interface.ip_address(eth_device)
rhn.system.net_interface.netmask(eth_device)
rhn.system.net_interface.broadcast(eth_device)
rhn.system.net_interface.hardware_address(eth_device)
rhn.system.net_interface.driver_module(eth_device)</screen>
<simpara>To use this powerful feature, either upload or create a configuration file via the <guimenu>Configuration Channel Details</guimenu>
 page.
Then open its <guimenu>Configuration File Details</guimenu>
 page and include the supported macros of your choice.
Ensure that the delimiters used to offset your variables match those set in the <guimenu>Macro Start Delimiter</guimenu>
 and <guimenu>Macro End Delimiter</guimenu>
 fields and do not conflict with other characters in the file.
We recommend that the delimiters be two characters in length and must not contain the percent (<literal>%</literal>) symbol.</simpara>
<simpara>For example, you may have a file applicable to all of your servers that differs only in IP address and host name.
Rather than manage a separate configuration file for each server, you may create a single file, such as <filename>server.conf</filename>
, with the IP address and host name macros included.</simpara>
<screen>hostname={| rhn.system.hostname |}
ip_address={| rhn.system.net_interface.ip_address(eth0) |}</screen>
<simpara>Upon delivery of the file to individual systems, whether through a scheduled action in the &susemgr;
 Web interface or at the command line with the &susemgr;
 Configuration Client (<command>mgrcfg-client</command>), the variables will be replaced with the host name and IP address of the system as recorded in &susemgr;
's system profile.
In the above example configuration file the deployed version resembles the following:</simpara>
<screen>hostname=test.example.domain.com
ip_address=177.18.54.7</screen>
<simpara>To capture custom system information, insert the key label into the custom information macro (<literal>rhn.system.custom_info</literal>). For example, if you developed a key labeled <quote><literal>asset</literal></quote> you can add it to the custom information macro in a configuration file to have the value substituted on any system containing it.
The macro would look like this:</simpara>
<screen>asset={@ rhn.system.custom_info(asset) @}</screen>
<simpara>When the file is deployed to a system containing a value for that key, the macro gets translated, resulting in a string similar to the following:</simpara>
<screen>asset=Example#456</screen>
<simpara>To include a default value, for example, if one is required to prevent errors, you can append it to the custom information macro, like this:</simpara>
<screen>asset={@ rhn.system.custom_info(asset) = 'Asset #' @}</screen>
<simpara>This default is overridden by the value on any system containing it.</simpara>
<simpara>Using the &susemgr;
Configuration Manager (<command>mgrcfg-manager</command>) will not translate or alter files, as this tool is system agnostic. <command>mgrcfg-manager</command> does not depend on system settings.
Binary files cannot be interpolated.</simpara>
</section>
</section>
<section xml:id="_ref.webui.config.systems"><title>Systems</title><simpara>This page displays status information about your system in relation to configuration.
There are two sub-pages: <guimenu>Managed Systems</guimenu>
 and <guimenu>Target Systems</guimenu>
.</simpara>
<section xml:id="_config_systems_managed"><title>Managed Systems</title><simpara>By default the <menuchoice><guimenu>Configuration</guimenu> <guimenuitem>Managed Systems</guimenuitem></menuchoice>
 page is displayed.
The listed systems have been fully prepared for configuration file deployment.
The number of locally- and centrally-managed files is displayed.
Clicking the name of a system shows its menu:System
    Details[Configuration &gt; Overview]
 page.
Clicking the number of local files takes you to the <menuchoice><guimenu>System Details</guimenu> <guisubmenu>Configuration</guisubmenu> <guisubmenu>View/Modify Files</guisubmenu> <guimenuitem>Locally-Managed Files</guimenuitem></menuchoice>
 page, where you manage which local (override) files apply to the system.
Clicking the number of centrally-managed files takes you to the <menuchoice><guimenu>System Details</guimenu> <guisubmenu>Configuration</guisubmenu> <guisubmenu>Manage Configuration Channels</guisubmenu> <guimenuitem>List/Unsubscribe
    from Channels</guimenuitem></menuchoice>
 page.
Here you unsubscribe from any channels you want.</simpara>
</section>
<section xml:id="_config_systems_target"><title>Target Systems</title><simpara>Here you see the systems either not prepared for configuration file deployment or not yet subscribed to a configuration channel.
The table has three columns.
The first identifies the system name, the second shows whether the system is prepared for configuration file deployment, and the third lists the steps necessary to prepare the system.
To prepare a system, check the box to the left of the profile name then click the <guimenu>Enable SUSE Manager Configuration Management</guimenu>
 button.
All of the preparatory steps that can be automatically performed are scheduled by &susemgr;
.</simpara>
<note>
<simpara>You will need to perform some manual tasks to enable configuration file deployment.
Follow the on-screen instructions provided to assist with each step.</simpara>
</note>
</section>
</section>
</chapter>
<chapter xml:id="_ref.webui.schedule"><title>Schedule</title><info><abstract>
<simpara><guimenu>Schedule</guimenu>
 helps with managing actions and combining actions to action chains.</simpara>
</abstract></info>
<simpara><indexterm>
<primary>Schedule</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>WebLogic</primary><secondary>Schedule</secondary>
</indexterm>
<indexterm>
<primary>Schedule</primary>
</indexterm></simpara>
<simpara><guimenu>Schedule</guimenu>
 on the left navigation menu features pages that enable you to manage the actions carried out on your systems.
An action is a scheduled task to be performed on one or more client systems.
For example, an action can be scheduled to apply all patches to a system.
Actions can also be grouped into action chains to schedule them at the same time in a particular order, for example to reboot a system after deploying patches.</simpara>
<simpara>&susemgr;
keeps track of the following action types:</simpara>
<itemizedlist>
<listitem>
<para>package alteration (installation, upgrade, and removal),</para>
</listitem>
<listitem>
<para>rollback package actions,</para>
</listitem>
<listitem>
<para>system reboots,</para>
</listitem>
<listitem>
<para>patch application,</para>
</listitem>
<listitem>
<para>configuration file alteration (deploy, upload, and diff),</para>
</listitem>
<listitem>
<para>hardware profile updates,</para>
</listitem>
<listitem>
<para>package list profile updates,</para>
</listitem>
<listitem>
<para>automated installation initiation,</para>
</listitem>
<listitem>
<para>service pack migrations,</para>
</listitem>
<listitem>
<para>remote commands.</para>
</listitem>
</itemizedlist>
<simpara>Each page in the <guimenu>Schedule</guimenu>
 category represents an action status.</simpara>
<section xml:id="_ref.webui.schedule.pending"><title>Pending Actions</title><simpara>The <guimenu>Pending Actions</guimenu>
 page appears when clicking <menuchoice><guimenu>Schedule</guimenu> <guimenuitem>Pending Actions</guimenuitem></menuchoice>
.
It displays actions not yet started or still in progress.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/schedule_pending_actions.png" width="80%"/>
</imageobject>
<textobject><phrase>schedule pending actions</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>To cancel an action, select the action, and click <guimenu>Cancel Actions</guimenu>
, then <guimenu>Confirm</guimenu>
.</simpara>
</section>
<section xml:id="_ref.webui.schedule.fail"><title>Failed Actions</title><simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>Failed Actions</secondary>
</indexterm>
<indexterm>
<primary>Failed Actions</primary>
</indexterm></simpara>
<simpara>Sometimes actions cannot be completed.
If the action returns an error, it is displayed here.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/schedule_failed_actions.png" width="80%"/>
</imageobject>
<textobject><phrase>schedule failed actions</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.schedule.compl"><title>Completed Actions</title><simpara>List of actions successfully carried out.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/schedule_completed_actions.png" width="80%"/>
</imageobject>
<textobject><phrase>schedule completed actions</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_s2_sm_action_arch"><title>Archived Actions</title><simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>Archived Actions</secondary>
</indexterm>
<indexterm>
<primary>Archived Actions</primary>
</indexterm></simpara>
<simpara>If you selected actions to store for review, they are displayed here and can be deleted.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/schedule_archived_actions.png" width="80%"/>
</imageobject>
<textobject><phrase>schedule archived actions</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.schedule.chains"><title>Action Chains</title><simpara>You can create action chains&mdash;
or grouped actions&mdash;
for example, in the <menuchoice><guimenu>Software</guimenu> <guimenuitem>Packages</guimenuitem></menuchoice>
 or <menuchoice><guimenu>Software</guimenu> <guimenuitem>Packages</guimenuitem></menuchoice>
 subtabs on a system details page (see <xref linkend="_s4_sm_system_details_errata"/> or <xref linkend="_s4_sm_system_details_packages"/>) or in the <menuchoice><guimenu>Configuration</guimenu> <guimenuitem>Deploy Files</guimenuitem></menuchoice>
 subtab on a system details page (see <xref linkend="_s5_sdc_configuration_deploy_files"/>).</simpara>
<simpara>The following list of actions may be added to an action chain.
These actions are supported on both traditional clients and Salt minions.
Schedulable actions are located under a systems, <guimenu>System Details</guimenu>
 page on the following subtabs.</simpara>
<itemizedlist>
<title>Chainable Actions</title>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guimenuitem>Remote Command</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guimenuitem>Schedule System Reboot</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guisubmenu>States</guisubmenu> <guimenuitem>Highstate</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guisubmenu>Software</guisubmenu> <guisubmenu>Packages</guisubmenu> <guimenuitem>List/Remove</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guisubmenu>Software</guisubmenu> <guisubmenu>Packages</guisubmenu> <guimenuitem>Install</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guisubmenu>Software</guisubmenu> <guisubmenu>Packages</guisubmenu> <guimenuitem>Upgrade</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guisubmenu>Software</guisubmenu> <guimenuitem>Patches</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guisubmenu>Software</guisubmenu> <guimenuitem>Software Channels</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>System Details</guimenu> <guimenuitem>Configuration</guimenuitem></menuchoice></para>
</listitem>
<listitem>
<para><menuchoice><guimenu>Images</guimenu> <guimenuitem>Build</guimenuitem></menuchoice></para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/schedule_action_chains.png" width="80%"/>
</imageobject>
<textobject><phrase>schedule action chains</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>In the <guimenu>Action Chain List</guimenu>
 you can click the label to view or edit an <guimenu>Action Chain</guimenu>
.
In the top right corner is the <guimenu>delete action chain</guimenu>
 link.
To add actions to an existing chain, pick up a <quote>chainable</quote>
 action (such as running a remote command) from a system details page (see <xref linkend="_s3_sm_system_details"/>.
Then check <guimenu>Add to Action Chain</guimenu>
 and select an action chain from the drop-down box.
Confirm with <guimenu>Schedule</guimenu>
.</simpara>
<simpara>To create a new action chain, configure the first action, then select <guimenu>Add to Action Chain</guimenu>
 instead of <guimenu>Schedule no sooner than</guimenu>
.
Click the drop-down box, enter a name, and click <guimenu>Schedule</guimenu>
 to save the chain.
Then proceed to the next action and add it to the new chain.</simpara>
<simpara>Action chains can be edited via the <menuchoice><guimenu>Schedule</guimenu> <guimenuitem>Action Chains</guimenuitem></menuchoice>
 page.
Click a chain name to see the actions in the order they will be performed.
The following tasks can be carried out here:</simpara>
<itemizedlist>
<listitem>
<para>Change the order of actions by dragging the respective action to the right position and dropping it.</para>
</listitem>
<listitem>
<para>Delete actions from the chain by clicking the <guimenu>delete action</guimenu> link.</para>
</listitem>
<listitem>
<para>Inspect the list of systems on which an action is run by clicking the <guimenu>+</guimenu> sign.</para>
</listitem>
<listitem>
<para>Delete a single system from an action chain by clicking the <guimenu>delete system</guimenu> link.</para>
</listitem>
<listitem>
<para>Delete the complete action chain with the <guimenu>delete action chain</guimenu> link in the top-left corner.</para>
</listitem>
<listitem>
<para>Change an action chain label by clicking it.</para>
</listitem>
<listitem>
<para>Schedule an action chain for execution on a certain date by clicking the <guimenu>Save and Schedule</guimenu> button.</para>
</listitem>
</itemizedlist>
<note>
<title>Unsaved Changes</title>
<simpara>If you leave the page without clicking either <guimenu>Save</guimenu>
 or <guimenu>Save and Schedule</guimenu>
 all unsaved changes will be discarded.
In this case, a confirmation dialog will pop up.</simpara>
</note>
<simpara>Currently you cannot add an action to an action chain from the <guimenu>Edit</guimenu>
 section of the action chain details page.
When a Chain is scheduled, the actions it contains will be displayed under <guimenu>Schedule</guimenu>
 on the appropriate pages: <guimenu>Pending Actions</guimenu>
, <guimenu>Failed Actions</guimenu>
 or <guimenu>Completed Actions</guimenu>
, depending on the status.
If one action fails on a system no other actions from the same chain will be executed on that systems.
Because of technical limitations it is not possible to reuse Action Chains.</simpara>
</section>
<section xml:id="_ref.webui.schedule.list"><title>Actions List</title><simpara><indexterm>
<primary>SUSE Manager Administrator</primary><secondary>Actions List</secondary>
</indexterm>
<indexterm>
<primary>Actions List</primary>
</indexterm></simpara>
<simpara>On each action page, each row in the list represents a single scheduled event or action that might affect multiple systems and involve various packages.
The list contains several columns of information:</simpara>
<itemizedlist>
<listitem>
<para><guimenu>Filter by Action</guimenu>&#8201;&#8212;&#8201;Enter a term to filter the listed actions or use the check boxes in this column to select actions. Then either add them to your selection list or archive them by clicking <guimenu>Archive Actions</guimenu> . If you archive a pending action, it is not canceled, but the action item moves from the <guimenu>Pending Actions</guimenu> list to the <guimenu>Archived Actions</guimenu> list.</para>
</listitem>
<listitem>
<para><guimenu>Action</guimenu>&#8201;&#8212;&#8201;Type of action to perform such as Patches or Package Install. Clicking an action name shows its <guimenu>Action Details</guimenu> page. Refer to <xref linkend="_s3_sm_action_details"/> for more information.</para>
</listitem>
<listitem>
<para><guimenu>Scheduled Time</guimenu>&#8201;&#8212;&#8201;The earliest day and time the action will be performed.</para>
</listitem>
<listitem>
<para><guimenu>Succeeded</guimenu>&#8201;&#8212;&#8201;Number of systems on which this action was successfully carried out.</para>
</listitem>
<listitem>
<para><guimenu>Failed</guimenu>&#8201;&#8212;&#8201;Number of systems on which this action has been tried and failed.</para>
</listitem>
<listitem>
<para><guimenu>In Progress</guimenu>&#8201;&#8212;&#8201;Number of systems on which this action is taking place.</para>
</listitem>
<listitem>
<para><guimenu>Total</guimenu>&#8201;&#8212;&#8201;Total number of systems on which this action has been scheduled.</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_s3_sm_action_details"><title>Action Details</title><simpara>If you click the name of an action, the <guimenu>Action Details</guimenu>
 page appears.
This page is split into the following tabs.</simpara>
<section xml:id="_s4_sm_action_details_details"><title>Action Details &gt;  Details</title><simpara>General information about the action.
This is the first tab you see when you click an action.
It displays the action type, scheduling administrator, earliest execution, and notes.</simpara>
<note>
<title>Patch Advisory</title>
<simpara>Clicking the Patch Advisory takes you to the <guimenu>Patch Details</guimenu>
 page.
The Patch Advisory appears only if the action is a patch.
Refer to <xref linkend="_s3_sm_errata_details"/> for more information.</simpara>
</note>
</section>
<section xml:id="_s4_sm_action_details_completed"><title>Action Details &gt;  Completed Systems</title><simpara>List of systems on which the action has been successfully performed.
Clicking a system name displays its <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="_s3_sm_system_details"/> for more information.</simpara>
</section>
<section xml:id="_s4_sm_action_details_progress"><title>Action Details &gt;  In Progress Systems</title><simpara>List of systems on which the action is now being carried out.
To cancel an action, select the system by marking the appropriate check box and click the <guimenu>Unschedule Action</guimenu>
 button.
Clicking a system name shows its <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="_s3_sm_system_details"/> for more information.</simpara>
</section>
<section xml:id="_s4_sm_action_details_failed"><title>Action Details &gt;  Failed Systems</title><simpara>List of systems on which the action has failed.
It can be rescheduled here.
Clicking a system name takes you to its <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="_s3_sm_system_details"/> for more information.</simpara>
</section>
<section xml:id="_s4_sm_action_details_packagelist"><title>Action Details &gt;  Package List</title><simpara>List of packages are associated with this action.
The tab appears only if the action is package related (installation, removal, etc.).</simpara>
</section>
</section>
</chapter>
<chapter xml:id="_ref.webui.users"><title>Users</title><simpara><indexterm>
<primary>users</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>WebLogic</primary><secondary>Users</secondary>
</indexterm>
<indexterm>
<primary>Users</primary>
</indexterm></simpara>
<simpara>Only &susemgr;
administrators can see <guimenu>Users</guimenu>
 in the left navigation menu.
With <guimenu>Users</guimenu>
 you can grant and edit permissions for those who administer your system groups.
Click a user name in the <guimenu>User List</guimenu>
 to modify the user.</simpara>
<simpara>To add new users to your organization, click the <guimenu>Create User</guimenu>
 link on the top right corner of the page.
On the <guimenu>Create User</guimenu>
 page, fill in the required values for the new user.</simpara>
<simpara>Once all fields are completed, click the <guimenu>Create Login</guimenu>
 button. &susemgr;
 now sends an e-mail to the specified address and takes you back to the <menuchoice><guimenu>Users</guimenu> <guisubmenu>User
  List</guisubmenu> <guimenuitem>Active</guimenuitem></menuchoice>
 page.
If you want to set permissions and options for the new user, click the name in the list.
The <guimenu>User Details</guimenu>
 page for this user provides several tabs of options.
Refer to <xref linkend="_s3_sm_user_active_details"/> for detailed descriptions of each tab.</simpara>
<section xml:id="_ref.webui.users.list"><title><guimenu>User List</guimenu></title><simpara>The <guimenu>User List</guimenu>
 provides three views:</simpara>
<itemizedlist>
<listitem>
<para><xref linkend="_ref.webui.users.list.active"/></para>
</listitem>
<listitem>
<para><xref linkend="_ref.webui.users.list.deact"/></para>
</listitem>
<listitem>
<para><xref linkend="_ref.webui.users.list.all"/></para>
</listitem>
</itemizedlist>
<section xml:id="_ref.webui.users.list.active"><title><guimenu>User List</guimenu> &gt; <guimenu>Active</guimenu></title><simpara>The active user list shows all active users on your &susemgr;
and displays basic information about each user: user name, real name, roles, and date of their last sign in.</simpara>
<simpara>Each row in the <guimenu>User List</guimenu>
 represents a user within your organization.
There are four columns of information for each user:</simpara>
<itemizedlist>
<listitem>
<para><guimenu>Username</guimenu>&#8201;&#8212;&#8201;The login name of the user. Clicking a user name displays the <guimenu>User Details</guimenu> page for the user. Refer to <xref linkend="_s3_sm_user_active_details"/> for more information.</para>
</listitem>
<listitem>
<para><guimenu>Real Name</guimenu>&#8201;&#8212;&#8201;The full name of the user (last name, first name).</para>
</listitem>
<listitem>
<para><guimenu>Roles</guimenu>&#8201;&#8212;&#8201;List of the user&#8217;s privileges, such as organization administrator, channel administrator and normal user. Users can have multiple roles.</para>
</listitem>
<listitem>
<para><guimenu>Last Sign In</guimenu>&#8201;&#8212;&#8201;Shows when the user last logged in to &susemgr; .</para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/users_user_list.png" width="80%"/>
</imageobject>
<textobject><phrase>users user list</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_ref.webui.users.list.deact"><title><guimenu>User List</guimenu> &gt; <guimenu>Deactivated</guimenu></title><simpara>The deactivated user list shows all deactivated users.
You may also reactivate any user listed here.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/users_deactivated_user_list.png" width="80%"/>
</imageobject>
<textobject><phrase>users deactivated user list</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Click the check box to the left of their name and click the <guimenu>Reactivate</guimenu>
 button then the <guimenu>Confirm</guimenu>
 button.
Reactivated users retain the permissions and system group associations they had when they were deactivated.
Clicking a user name shows the <guimenu>User Details</guimenu>
 page.</simpara>
</section>
<section xml:id="_ref.webui.users.list.all"><title><guimenu>User List</guimenu> &gt; <guimenu>All</guimenu></title><simpara>The <guimenu>All</guimenu>
 page lists all users that belong to your organization.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/users_all_users.png" width="80%"/>
</imageobject>
<textobject><phrase>users all users</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>In addition to the fields listed in the previous two screens, the table of users includes a <guimenu>Status</guimenu>
 field.
This field indicates whether the user is <guimenu>Active</guimenu>
 or <guimenu>Deactivated</guimenu>
. Click a user name to see the <guimenu>User Details</guimenu>
 page.</simpara>
</section>
<section xml:id="_s3_sm_user_active_details"><title><guimenu>User Details</guimenu></title><simpara><indexterm>
<primary>deactivate</primary><secondary>user (SUSE Manager only)</secondary>
</indexterm>
<indexterm>
<primary>user (SUSE Manager only)</primary>
</indexterm></simpara>
<simpara>Clicking a user name on a <menuchoice><guimenu>Users</guimenu> <guimenuitem>User List</guimenuitem></menuchoice>
 listing displays the <guimenu>User Details</guimenu>
 page.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/users_user_list.png" width="80%"/>
</imageobject>
<textobject><phrase>users user list</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Here &susemgr;
administrators manage the permissions and activity of all the users.
Here you can also delete or deactivate users.</simpara>
<simpara>Users can be deactivated directly in the &susemgr;
Web interface. &susemgr;
administrators can deactivate or delete users of their organization.
Users can deactivate their own accounts.</simpara>
<note>
<title>Users with &susemgr;Administrator Role</title>
<simpara>Users with the &susemgr;
administrator role cannot be deactivated until that role is removed from their account.</simpara>
</note>
<simpara>Deactivated users cannot log in to the &susemgr;
Web interface or schedule any actions.
Actions scheduled by a user prior to their deactivation remain in the action queue.
Deactivated users can be reactivated by &susemgr;
administrators.</simpara>
<warning>
<title>Irreversible Deletion</title>
<simpara>User deletion is irreversible; exercise it with caution.
Consider deactivating the user first to assess the effect deletion will have on your infrastructure.</simpara>
</warning>
<simpara>To deactivate a user:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Click a user name to navigate to the <guimenu>User Details</guimenu> tab.</para>
</listitem>
<listitem>
<para>Verify that the user is not a &susemgr; administrator. If they are, uncheck the box to the left of that role and click the <guimenu>Submit</guimenu> button.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Deactivate User</guimenu> link in the upper right corner of the dialog.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Deactivate User</guimenu> button to confirm.</para>
</listitem>
</orderedlist>
<simpara>To delete a user:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Click a user name to navigate to the <guimenu>User Details</guimenu> tab.</para>
</listitem>
<listitem>
<para>Verify that the user is not a &susemgr; administrator. Uncheck the box to remove the role if necessary.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Delete User</guimenu> link in the upper right corner of the dialog.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Delete User</guimenu> button to permanently delete the user.</para>
</listitem>
</orderedlist>
<simpara>For instructions to deactivate your own account, refer to <xref linkend="_ref.webui.overview.account.deactivate"/>.</simpara>
<section xml:id="_s4_usr_active_details_details"><title><guimenu>User Details</guimenu> &gt; <guimenu>Details</guimenu></title><simpara><indexterm>
<primary>changing password</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>email address</primary><secondary>changing</secondary>
</indexterm>
<indexterm>
<primary>changing</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>user roles</primary>
</indexterm></simpara>
<simpara>The <guimenu>Details</guimenu>
 tab, displays the user name, first name, last name, e-mail address, roles of a user, and other details about the user.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/users_user_details.png" width="80%"/>
</imageobject>
<textobject><phrase>users user details</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Edit this information as needed and then confirm with <guimenu>Update</guimenu>
.
When changing a user&#8217;s password, you will only see asterisks as you type.</simpara>
<simpara>To delegate responsibilities within your organization, &susemgr;
provides several roles with varying degrees of access.
This list describes the permissions of each role and the differences between them:</simpara>
<itemizedlist>
<listitem>
<para><guimenu>User</guimenu> (normal user)&#8201;&#8212;&#8201;Also known as a <emphasis>System Group User</emphasis>, this is the standard role associated with any newly created user. This person may be granted access to manage system groups and software channels, if the &susemgr; administrator sets the roles accordingly. The systems must be in system groups for which the user has permissions to manage them. However, all globally subscribable channels may be used by anyone.</para>
</listitem>
<listitem>
<para><guimenu>SUSE Manager Administrator</guimenu>&#8201;&#8212;&#8201;This role allows a user to perform any function available in &susemgr; . As the master account for your organization, the person holding this role can alter the privileges of all other accounts of this organization, and conduct any of the tasks available to the other roles. Like with other roles, multiple &susemgr; administrators may exist. Go to <menuchoice><guimenu>Admin</guimenu> <guimenuitem>Users</guimenuitem></menuchoice> and click the check box in the <guimenu>SUSE Manager Admin</guimenu> row. For more information, see <xref linkend="_ref.webui.admin.users"/>.</para>
<simpara>A <guimenu>SUSE Manager Administrator</guimenu>
can create foreign organizations; but a <guimenu>SUSE Manager Administrator</guimenu>
can only create users for an organization if he is entitled with organization administrator privileges for this organization.</simpara>
</listitem>
<listitem>
<para><guimenu>Organization Administrator</guimenu>&#8201;&#8212;&#8201;This role provides a user with all the permissions other administrators have, namely the activation key, configuration, channel, and system group administrator. <guimenu>Organization Administrator</guimenu> is not entitled to perform actions that belong to the <guimenu>Admin</guimenu> tab (see <xref linkend="_ref.webui.admin"/>).</para>
</listitem>
<listitem>
<para><guimenu>Activation Key Administrator</guimenu>&#8201;&#8212;&#8201;This role is designed to manage your collection of activation keys. A user assigned to this role can modify and delete any key within your organization.</para>
</listitem>
<listitem>
<para><guimenu>Image Administrator</guimenu>&#8201;&#8212;&#8201;This role is designed to manage Image building. Modifiable content includes Image Profiles, Image Builds and Image Stores. A user assigned with this role can modify and delete all content located under the <guimenu>Image</guimenu> tab located on the left navigation menu. These changes will be applied across the organization.</para>
</listitem>
<listitem>
<para><guimenu>Configuration Administrator</guimenu>&#8201;&#8212;&#8201;This role enables a user to manage the configuration of systems within the organization, using either the &susemgr; Web interface or tool from the <package>rhncfg-management</package> package.</para>
</listitem>
<listitem>
<para><guimenu>Channel Administrator</guimenu>&#8201;&#8212;&#8201;This role provides a user with full access to all software channels within your organization. This requires the &susemgr; synchronization tool (<command>mgr-sync</command> from the <package>susemanager-tools</package> package). The channel administrator may change the base channels of systems, make channels globally subscribable, and create entirely new channels.</para>
</listitem>
<listitem>
<para><guimenu>System Group Administrator</guimenu>&#8201;&#8212;&#8201;This role limits authority to systems or system groups to which access is granted. The System Group Administrator can create new system groups, delete any assigned systems from groups, add systems to groups, and manage user access to groups.</para>
</listitem>
</itemizedlist>
<simpara>Being a &susemgr;
administrator enables you to remove administrator rights from other users.
It is possible to remove your own privileges as long as you are not the only &susemgr;
administrator.</simpara>
<simpara>To assign a new role to a user, check the respective box. &susemgr;
administrators are automatically granted administration access to all other roles, signified by grayed-out check boxes.
Click <guimenu>Update</guimenu>
 to submit your changes.</simpara>
</section>
<section xml:id="_s4_usr_active_details_sysg"><title><guimenu>User Details</guimenu> &gt; <guimenu>System Groups</guimenu></title><simpara>This tab displays a list of system groups the user may administer; for more information about system groups, see <xref linkend="_ref.webui.systems.systemgroups"/></simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/users_details_system_groups.png" width="80%"/>
</imageobject>
<textobject><phrase>users details system groups</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara><xref linkend="_ref.webui.systems.systemgroups"/>. &susemgr;
 administrators can set this user&#8217;s access permissions to each system group.
Check or uncheck the box to the left of the system group and click the <guimenu>Update Permissions</guimenu>
 button to save the changes.</simpara>
<simpara>&susemgr;
administrators may select one or more default system groups for a user.
When the user registers a system, it gets assigned to the selected group or groups.
This allows the user to access the newly-registered system immediately.
System groups to which this user has access are preceded by an (*).</simpara>
</section>
<section xml:id="_s4_usr_active_details_systems"><title><guimenu>User Details</guimenu> &gt; <guimenu>Systems</guimenu></title><simpara>This tab lists all systems a user can access according to the system groups assigned to the user.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/users_details_systems.png" width="80%"/>
</imageobject>
<textobject><phrase>users details systems</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>To carry out tasks on some of these systems, select the set of systems by checking the boxes to the left and click the <guimenu>Update List</guimenu>
 button.
Use the System Set Manager page to execute actions on those systems.
Clicking the name of a system takes you to its <guimenu>System Details</guimenu>
 page.
Refer to <xref linkend="_s3_sm_system_details"/> for more information.</simpara>
</section>
<section xml:id="_s4_usr_active_details_chans"><title><guimenu>User Details</guimenu> &gt; <guimenu>Channel Permissions</guimenu></title><simpara>This tab lists all channels available to your organization.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/users_details_channel_permissions.png" width="80%"/>
</imageobject>
<textobject><phrase>users details channel permissions</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Grant explicit channel subscription permission to a user for each of the channels listed by checking the box to the left of the channel, then click the <guimenu>Update Permissions</guimenu>
 button.
Permissions granted by a &susemgr;
 administrator or channel administrator have no check box but a check icon like globally subscribable channels.</simpara>
<section xml:id="_s5_sm_user_details_chanperms_subs"><title><guimenu>User Details</guimenu> &gt; <guimenu>Channel Permissions</guimenu> &gt; <guimenu>Subscription</guimenu></title><simpara>Identifies channels to which the user may subscribe systems.</simpara>
<simpara>To change these, select or deselect the appropriate check boxes and click the <guimenu>Update Permissions</guimenu>
 button.
Note that channels subscribable because of the user&#8217;s administrator status or the channel&#8217;s global settings cannot be altered.
They are identified with a check icon.</simpara>
</section>
<section xml:id="_s5_sm_user_details_chanperms_mgmt"><title><guimenu>User Details</guimenu> &gt; <guimenu>Channel Permissions</guimenu> &gt; <guimenu>Management</guimenu></title><simpara>Identifies channels the user may manage.
To change these, select or deselect the appropriate check boxes and click the <guimenu>Update Permissions</guimenu>
 button.
The permission to manage channels does not enable the user to create new channels.
Note that channels automatically manageable through the user&#8217;s admin status cannot be altered.
These channels are identified with a check icon.
Remember, &susemgr;
 administrators and channel administrators can subscribe to or manage any channel.</simpara>
</section>
</section>
<section xml:id="_s4_usr_active_details_prefs"><title><guimenu>User Details</guimenu> &gt; <guimenu>Preferences</guimenu></title><simpara>Configure the following preference settings for a user.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/users_details_preferences.png" width="80%"/>
</imageobject>
<textobject><phrase>users details preferences</phrase></textobject>
</mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para><guimenu>Email Notifications</guimenu> : Determine whether this user should receive e-mail every time a patch alert is applicable to one or more systems in his or her &susemgr; account, and daily summaries of system events.</para>
</listitem>
<listitem>
<para><guimenu>SUSE Manager List Page Size</guimenu> : Maximum number of items that appear in a list on a single page. If the list contains more items than can be displayed on one page, click the <guimenu>Next</guimenu> button to see the next page. This preference applies to the user&#8217;s view of system lists, patch lists, package lists, and so on.</para>
</listitem>
<listitem>
<para><guimenu>Overview Start Page</guimenu> : Configure which information to be displayed on the <quote>Overview</quote> page at login.</para>
</listitem>
<listitem>
<para><guimenu>CSV Files</guimenu> : Select whether to use the default comma or a semicolon as separator in downloadable CSV files.</para>
</listitem>
</itemizedlist>
<simpara>Change these options to fit your needs, then click the <guimenu>Save Preferences</guimenu>
 button.
To change the time zone for this user, click the <guimenu>Locale</guimenu>
 subtab and select from the drop-down box.
Dates and times, like system check-in times, will be displayed according to the selected time zone.
Click <guimenu>Save Preferences</guimenu>
 for changes to take effect.</simpara>
</section>
<section xml:id="_s4_usr_active_details_addresses"><title><guimenu>User Details</guimenu> &gt; <guimenu>Addresses</guimenu></title><simpara>This tab lists mailing addresses associated with the user&#8217;s account.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/users_details_addresses.png" width="80%"/>
</imageobject>
<textobject><phrase>users details addresses</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>If there is no address specified yet, click <guimenu>Fill in this address</guimenu>
 and fill out the form.
When finished, click <guimenu>Update</guimenu>
.
To modify this information, click the <guimenu>Edit this address</guimenu>
 link, change the relevant information, and click the <guimenu>Update</guimenu>
 button.</simpara>
</section>
</section>
</section>
<section xml:id="_ref.webui.users.sgc"><title><guimenu>System Group Configuration</guimenu></title><simpara>System Groups help when diferrent users shall administer different groups of systems within one organization.</simpara>
<section xml:id="_ref.webui.users.sgc.cfg"><title><guimenu>System Group Configuration</guimenu> &gt; <guimenu>Configuration</guimenu></title><simpara>Enable <guimenu>Create a user default System Group</guimenu>
 and confirm with <guimenu>Update</guimenu>
.</simpara>
<simpara>Assign such a group to systems via the <menuchoice><guimenu>Groups</guimenu> <guimenuitem>Join</guimenuitem></menuchoice>
 subtab of systems details page.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/users_system_group_config.png" width="80%"/>
</imageobject>
<textobject><phrase>users system group config</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>For more information, see <xref linkend="_s5_sm_system_details_groups_join"/> or <xref linkend="_ref.webui.systems.systemgroups.details"/>.</simpara>
</section>
<section xml:id="_ref.webui.users.sgc.extauth"><title><guimenu>System Group Configuration</guimenu> &gt; <guimenu>External Authentication</guimenu></title><simpara>Allows to create an external group with the <guimenu>Create External Group</guimenu>
 link.</simpara>
<simpara>Users can join such groups via the <guimenu>System Groups</guimenu>
 of the user details page, then check the wanted <guimenu>Group</guimenu>
, and confirm with <guimenu>Update Permissions</guimenu>
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/users_system_group_config_external_auth.png" width="80%"/>
</imageobject>
<textobject><phrase>users system group config external auth</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>For more information, see <xref linkend="_s4_usr_active_details_sysg"/>.</simpara>
</section>
</section>
</chapter>
<chapter xml:id="_ref.webui.admin"><title>Admin</title><simpara>The <guimenu>Admin</guimenu>
 pages allows &susemgr;
 customers to manage the basic configuration, including creating and managing multiple organizations.
Only the &susemgr;
 administrator can access the <guimenu>Admin</guimenu>
 pages.</simpara>
<section xml:id="_ref.webui.admin.wizard"><title><guimenu>Admin</guimenu> &gt; <guimenu>Setup Wizard</guimenu></title><simpara>Setting up &susemgr;
typically requires some extra steps after installation for common configuration tasks.</simpara>
<simpara>The <guimenu>Setup Wizard</guimenu>
 link is displayed when the &susemgr;
 Web interface is used for the fist time and can be accessed later at any time by clicking <menuchoice><guimenu>Admin</guimenu> <guimenuitem>Setup Wizard</guimenuitem></menuchoice>
.
On the three tabs configure the HTTP proxy server, organization credentials, and &suse;
 products.</simpara>
<variablelist>
<varlistentry>
<term><guimenu>HTTP Proxy:</guimenu></term>
<listitem>
<simpara>Configure a proxy server that &susemgr;
will use to access SCC (&suse;
Customer Center) and other remote servers here.</simpara>
</listitem>
</varlistentry>
</variablelist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_proxy_settings.png" width="80%"/>
</imageobject>
<textobject><phrase>admin proxy settings</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>+
Use <literal>hostname:port</literal> syntax in the <guimenu>Hostname</guimenu>
field if the proxy port is not 8080.
Clearing the fields disables proxy.</simpara>
<variablelist>
<varlistentry>
<term><guimenu>Organization Credentials:</guimenu></term>
<listitem>
<simpara>Click <guimenu>Add a new credential</guimenu>
and enter user name and password to allow a user to access SCC.</simpara>
</listitem>
</varlistentry>
</variablelist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_organization_credentials.png" width="80%"/>
</imageobject>
<textobject><phrase>admin organization credentials</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>+
After saving, a new credential card will be displayed.
Buttons below the credential card allow you to:
<emphasis role="strong"> see the credential validation status (green tick or red cross icon). To re-check the credential with SCC, click the icon;
</emphasis> set the primary credentials for inter-server synchronization (yellow star icon);
<emphasis role="strong"> list the subscriptions related to a certain credential (list icon);
</emphasis> edit the credential (pencil icon);
** delete the credential (trash can icon).</simpara>
<variablelist xml:id="_vle.webui.admin.wizard.products">
<varlistentry>
<term><guimenu>SUSE Products:</guimenu></term>
<listitem>
<simpara>On the <guimenu>SUSE Products</guimenu>
page, select product-specific channels you are entitled to.</simpara>
</listitem>
</varlistentry>
</variablelist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_suse_products.png" width="80%"/>
</imageobject>
<textobject><phrase>admin suse products</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>+
The products displayed are directly linked to your organization credentials and your &suse;
subscriptions.
Product extension and module lists are shown when you click the arrow sign to the left of the product description.
This is a cascading mechanism and allows to unfold several levels according to the integration of the extensions and modules in the base product.</simpara>
<simpara>+
Products based on SUSE Linux Enterprise 15 or higher have a toggle button named <guimenu>include recommended</guimenu>
.
When the toogle button is enabled on a base product, recommended extensions and modules are automatically selected for synchronization.
Once the <guimenu>include recommended</guimenu>
option is enabled, you may uncheck product child channels you are not interested in syncing.
Recommended channels are labeled accordingly.
You cannot disable required channels.</simpara>
<simpara>+
If you click the <guimenu>Channels</guimenu>
icon in a row of a product, a popup lists the underlying channels (repositories) that build the product.</simpara>
<simpara>+
In the row above the product listing two filter options are available:
<emphasis role="strong"> Search by the product description. The filter limits the search on the base products.
</emphasis> Filter by architecture. Click in the search field (or press <keycap>Enter</keycap> ) and then select from drop-down menu. You can repeat this as often as wanted. To remove an architecture either click the <quote>x</quote> symbol (or press <keycap>Backspace</keycap> ).</simpara>
<simpara>+
After you have made your selection, click <guimenu>Add products</guimenu>
in the upper right area.
This equals running <command>mgr-sync add products</command> or <command>mgr-sync</command> without any argument.</simpara>
<simpara>+
At the right in a dedicated pane, you can see the progress of the synchronization process.</simpara>
<simpara>+</simpara>
<note>
<title>Synchronization Time</title>
<simpara>Channel synchronization will start and might take several hours.
When finished the corresponding channels can be used in &susemgr;
.</simpara>
</note>
<simpara>+</simpara>
<simpara>+
.If Synchronization Fails
IMPORTANT: SUSE does not automatically trust 3rd party GPG keys.
If a reposync fails check if an untrusted GPG key is the cause by viewing the log files located in:</simpara>
<screen>/var/log/rhn/reposync</screen>
<simpara>Look for lines similar to the following:</simpara>
<screen>['/usr/bin/spacewalk-repo-sync', '--channel', 'sle-12-sp1-ga-desktop-
nvidia-driver-x86_64', '--type', 'yum', '--non-interactive']
ChannelException: The GPG key for this repository is not part of the keyring.
Please run spacewalk-repo-sync in interactive mode to import it.</screen>
<simpara>+</simpara>
<simpara>+
Alternatively, you can add listed channels right away by clicking the <guimenu>Add this product</guimenu>
button in the status column.
A progress bar will be displayed.
The main product will expand, and now you can select add-on products belonging to the product that is currently added.
To check for required channels, click the list icon in the <guimenu>Channels</guimenu>
column.
When a product is downloaded and ready to use, the state will change to <guimenu>Finished</guimenu>
.</simpara>
</section>
<section xml:id="_ref.webui.admin.org"><title><guimenu>Admin</guimenu> &gt; <guimenu>Organizations</guimenu></title><simpara>The organizations feature allows &susemgr;
administrators to create and manage multiple organizations across &susemgr;
.
Administrators can control an organization&#8217;s access to system management tasks.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_list_organizations.png" width="80%"/>
</imageobject>
<textobject><phrase>admin list organizations</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>If you click the name of an organization, the Organization Details page appears.</simpara>
<section xml:id="_s2_sattools_org_details_details"><title><guimenu>Organization Details</guimenu> &gt; <guimenu>Details</guimenu></title><simpara>The <guimenu>Organization Details</guimenu>
 page lists the details of the selected organization.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_organization_details.png" width="80%"/>
</imageobject>
<textobject><phrase>admin organization details</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>The following details are avialable:</simpara>
<itemizedlist>
<listitem>
<para><guimenu>Organization Name</guimenu> : String (between 3 and 128 characters). This is the only value that you can change here. When done, confirm with clicking the <guimenu>Update Organization</guimenu> button.</para>
</listitem>
<listitem>
<para><guimenu>Organization ID</guimenu> : Number</para>
</listitem>
<listitem>
<para><guimenu>Active Users</guimenu> : Number. Clicking this number will open the <guimenu>Users</guimenu> tab. For more information, see <xref linkend="_s2_sattools_org_details_users"/>.</para>
</listitem>
<listitem>
<para><guimenu>Systems</guimenu> : Number</para>
</listitem>
<listitem>
<para><guimenu>System Groups</guimenu> : Number</para>
</listitem>
<listitem>
<para><guimenu>Activation Keys</guimenu> : Number</para>
</listitem>
<listitem>
<para><guimenu>Autoinstallation Profiles</guimenu> : Number</para>
</listitem>
<listitem>
<para><guimenu>Configuration Channels</guimenu> : Number</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_s2_sattools_org_details_users"><title><guimenu>Organization Details</guimenu> &gt; <guimenu>Users</guimenu></title><simpara>List of all the users of an organization.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_organization_users.png" width="80%"/>
</imageobject>
<textobject><phrase>admin organization users</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>You can modify the user details if you belong to that organization and have organization administrator privileges.
For more information, see <xref linkend="_ref.webui.admin.users"/>.</simpara>
</section>
<section xml:id="_s2_sattools_org_details_trust"><title><guimenu>Organization Details</guimenu> &gt; <guimenu>Trust</guimenu></title><simpara>Here establish trust between organizations.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_organization_trusts.png" width="80%"/>
</imageobject>
<textobject><phrase>admin organization trusts</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Such a trust allows sharing contents and migrate systems between these two organizations.
You may add a trust by checking the box next to an organization (or remove a trust by unchecking it) and clicking the <guimenu>Modify Trusts</guimenu>
 button.</simpara>
</section>
<section xml:id="_s2_sattools_org_details_conf"><title><guimenu>Organization Details</guimenu> &gt; <guimenu>Configuration</guimenu></title><simpara>Here you enable the Organization Administrator to manage Organization configuration, configure the organization to use staged contents (<quote>pre-fetching</quote>
 packages, etc.), set up software crash reporting, and upload of SCAP files.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_organization_configuration.png" width="80%"/>
</imageobject>
<textobject><phrase>admin organization configuration</phrase></textobject>
</mediaobject>
</informalfigure>
<variablelist>
<varlistentry>
<term>SUSE Manager Configuration</term>
<listitem>
<simpara>Enable <guimenu>Allow Organization Admin to manage Organization Configuration</guimenu>
if wanted.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Organization Configuration</term>
<listitem>
<itemizedlist>
<listitem>
<para><guimenu>Enable Staging Contents</guimenu></para>
</listitem>
<listitem>
<para><guimenu>Enable Errata E-mail Notifications (for users belonging to this organization)</guimenu></para>
</listitem>
<listitem>
<para><guimenu>Enable Software Crash Reporting</guimenu></para>
</listitem>
<listitem>
<para><guimenu>Enable Upload Of Crash Files</guimenu></para>
</listitem>
<listitem>
<para><guimenu>Crash File Upload Size Limit</guimenu></para>
</listitem>
<listitem>
<para><guimenu>Enable Upload Of Detailed SCAP Files</guimenu></para>
</listitem>
<listitem>
<para><guimenu>SCAP File Upload Size Limit</guimenu></para>
</listitem>
<listitem>
<para><guimenu>Allow Deletion of SCAP Results</guimenu></para>
</listitem>
<listitem>
<para><guimenu>Allow Deletion After (period in days)</guimenu></para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
</variablelist>
<simpara>When settings are done, confirm with clicking the <guimenu>Update Organization</guimenu>
 button.</simpara>
<formalpara>
<title>Enable Staging Contents</title>
<para>The clients will download packages in advance and stage them.
This has the advantage that the package installation action will take place immediately, when the schedule is actually executed.
This <quote>pre-fetching</quote>
 saves maintenance window time, which is good for service uptime.</para>
</formalpara>
<simpara>For staging contents (<quote>pre-fetching</quote>
), edit on the client <filename>/etc/sysconfig/rhn/up2date</filename>
:</simpara>
<screen>stagingContent=1
stagingContentWindow=24</screen>
<simpara><literal>stagingContentWindow</literal> is a time value expressed in hours and determines when downloading will start.
It is the number of hours before the scheduled installation or update time.
In this case, it means <literal>24</literal> hours before the installation time.
The exact download start time depends on the contact method&mdash;
when the next <command>rhn_check</command> is performed.</simpara>
<simpara>Next time an action is scheduled, packages will automatically be downloaded but not installed yet.
When the scheduled time comes, the action will use the staged version.</simpara>
<formalpara>
<title>Minion Content Staging</title>
<para>Every Organization administrator can enable Content Staging from the Organization configuration page <menuchoice><guimenu>Admin</guimenu> <guisubmenu>Organization</guisubmenu> <guisubmenu>OrgName</guisubmenu> <guisubmenu>Configuration</guisubmenu> <guimenuitem>Enable Staging Contents</guimenuitem></menuchoice>
.</para>
</formalpara>
<simpara>Staging content for minions is affected by two parameters.</simpara>
<itemizedlist>
<listitem>
<para><filename>salt_content_staging_advance:</filename> expresses the advance time, in hours, for the content staging window to open with regard to the scheduled installation/upgrade time.</para>
</listitem>
<listitem>
<para><filename>salt_content_staging_window:</filename> expresses the duration, in hours, of the time window for Salt minions to stage packages in advance of scheduled installations or upgrades.</para>
</listitem>
</itemizedlist>
<simpara>A value of <emphasis role="strong">salt_content_staging_advance</emphasis> equal to <emphasis role="strong">salt_content_staging_window</emphasis> results in the content staging window closing exactly when the installation/upgrade is scheduled to be executed, a larger value allows separating the download time from the installation time.</simpara>
<simpara>These options are configured in <filename>/usr/share/rhn/config-defaults/rhn_java.conf</filename>
 and by default assume the following values:</simpara>
<itemizedlist>
<listitem>
<para><filename>salt_content_staging_advance: 8 hours</filename></para>
</listitem>
<listitem>
<para><filename>salt_content_staging_window: 8 hours</filename></para>
</listitem>
</itemizedlist>
<note>
<simpara>These parameters will only have an effect when Content Staging is enabled for the targeted Organization.</simpara>
</note>
</section>
<section xml:id="_s2_sattools_org_details_states"><title><guimenu>Organization Details</guimenu> &gt; <guimenu>States</guimenu></title><simpara>From the <menuchoice><guimenu>Admin</guimenu> <guisubmenu>Organizations</guisubmenu> <guimenuitem>States</guimenuitem></menuchoice>
 page you can assign State Channels to all systems in an organization.
For example, this way it is possible to define a few global security policies or add a common admin user to all machines.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_organization_states.png" width="80%"/>
</imageobject>
<textobject><phrase>admin organization states</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>For more information about the State Channels, see <xref linkend="_ref.webui.config.channels"/>.</simpara>
</section>
</section>
<section xml:id="_ref.webui.admin.users"><title><guimenu>Admin</guimenu> &gt; <guimenu>Users</guimenu></title><simpara>To view and manage all users of the organization you are currently logged in to, click <guimenu>Users</guimenu>
 in the left navigation bar.
The table lists user name, real name, organization and whether the user is organization or &susemgr;
 administrator.
To modify administrator privileges, click the user name to get to the user&#8217;s <guimenu>Details</guimenu>
 page.
For more information, see <xref linkend="_s3_sm_user_active_details"/>.</simpara>
</section>
<section xml:id="_ref.webui.admin.config"><title><guimenu>Admin</guimenu> &gt; <guimenu>Manager Configuration</guimenu></title><simpara><guimenu>Manager Configuration</guimenu>
 is split into tabs that allow you to configure most aspects of &susemgr;
.</simpara>
<section xml:id="_s3_sattools_config_gen"><title><guimenu>Admin</guimenu> &gt; <guimenu>Manager Configuration</guimenu> &gt; <guimenu>General</guimenu></title><simpara>This page allows you to alter basic &susemgr;
administration settings.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_general_configuration.png" width="80%"/>
</imageobject>
<textobject><phrase>admin general configuration</phrase></textobject>
</mediaobject>
</informalfigure>
<variablelist>
<varlistentry>
<term><guimenu>Administrator Email Address</guimenu></term>
<listitem>
<simpara>E-mail address of the &susemgr;
administrator.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>SUSE Manager Hostname</guimenu></term>
<listitem>
<simpara>Host name of the &susemgr;
server.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>&susemgr; Proxy Configuration</term>
<listitem>
<simpara><guimenu>HTTP proxy</guimenu>
, <guimenu>HTTP proxy username</guimenu>
, <guimenu>HTTP proxy password</guimenu>
, and <guimenu>Confirm HTTP proxy password</guimenu>
.</simpara>
<simpara>The HTTP proxy settings are for the communication with a &susemgr;
parent server, if there is any.
The HTTP proxy should be of the form: <literal>hostname:port</literal>; the default port <literal>8080</literal> will be used if none is explicitly provided.
HTTP proxy settings for client systems to connect to this &susemgr;
can be different, and will be configured separately, for example via <xref linkend="_s3_sattools_config_bootstrap"/>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>RPM repository mount point</guimenu></term>
<listitem>
<simpara>The directory where RPM packages are mirrored.
By default: <filename>/var/spacewalk</filename>
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Default To SSL</guimenu></term>
<listitem>
<simpara>For secure communication, use SSL.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>When done, confirm with <guimenu>Update</guimenu>
.</simpara>
</section>
<section xml:id="_s3_sattools_config_bootstrap"><title><guimenu>Admin</guimenu> &gt; <guimenu>Manager Configuration</guimenu> &gt; <guimenu>Bootstrap Script</guimenu></title><simpara>The <menuchoice><guimenu>Manager Configuration</guimenu> <guimenuitem>Bootstrap Script</guimenuitem></menuchoice>
 page allows you to generate a bootstrap script that registers the client systems with &susemgr;
 and disconnects them from the remote &scc;
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_configuration_bootstrap.png" width="80%"/>
</imageobject>
<textobject><phrase>admin configuration bootstrap</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>This generated script will be placed within the <filename>/srv/www/htdocs/pub/bootstrap/</filename>
 directory on your &susemgr;
 server.
The bootstrap script will significantly reduce the effort involved in reconfiguring all systems, which by default obtain packages from the &scc;
.
The required fields are pre-populated with values derived from previous installation steps.
Ensure this information is accurate.</simpara>
<variablelist>
<varlistentry>
<term>SUSE Manager server hostname</term>
<listitem>
<simpara>The name of the SUSE Manager server where you want to register the client (pre-populated).</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>SSL cert location</term>
<listitem>
<simpara>Location and name of the SSL certificate (pre-populated).</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Bootstrap using Salt</term>
<listitem>
<simpara>To bootstrap traditional clients, uncheck <guimenu>Bootstrap using Salt</guimenu>
.
For more information, see <xref linkend="_registering.clients.traditional"/>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Enable SSL</term>
<listitem>
<simpara>It is advised keeping SSL enabled.
If enabled the corporate public CA certificate will be installed on the client.
If disabled the user must manage CA certificates to be able to run the registration (<command>rhnreg_ks</command>).</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Enable Client GPG checking</term>
<listitem>
<simpara>GNU Privacy Guard (GPG)</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Enable Remote Configuration</term>
<listitem>
<simpara>Enable remote configuration management and remote command acceptance of the systems to be bootstrapped to the &susemgr;
.
Both features are useful for completing client configuration.
For more information, see <xref linkend="_ref.webui.config"/> and <xref linkend="_s5_sm_system_details_remote"/>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Client HTTP Proxy</term>
<listitem>
<simpara>Client HTTP proxy settings if you are using an HTTP proxy server.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>When finished, click <guimenu>Update</guimenu>
.</simpara>
</section>
<section xml:id="_s3_sattools_config_orgs"><title><guimenu>Admin</guimenu> &gt; <guimenu>Manager Configuration</guimenu> &gt; <guimenu>Organizations</guimenu></title><simpara>The <menuchoice><guimenu>Manager Configuration</guimenu> <guimenuitem>Organizations</guimenuitem></menuchoice>
 page contains details about the organizations feature of &susemgr;
, and links for creating and configuring organizations.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_configuration_organization.png" width="80%"/>
</imageobject>
<textobject><phrase>admin configuration organization</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_s3_sattools_config_restart"><title><guimenu>Admin</guimenu> &gt; <guimenu>Manager Configuration</guimenu> &gt; <guimenu>Restart</guimenu></title><simpara>The <menuchoice><guimenu>Manager Configuration</guimenu> <guimenuitem>Restart</guimenuitem></menuchoice>
 page comprises the final step in configuring &susemgr;
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_configuration_restart.png" width="80%"/>
</imageobject>
<textobject><phrase>admin configuration restart</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Click the <guimenu>Restart</guimenu>
 button to restart &susemgr;
 and incorporate all of the configuration options added on the previous screens.
It will take between four and five minutes for the restart to finish.</simpara>
</section>
<section xml:id="_s3_sattools_config_cobbler"><title><guimenu>Admin</guimenu> &gt; <guimenu>Manager Configuration</guimenu> &gt; <guimenu>Cobbler</guimenu></title><simpara>On the <menuchoice><guimenu>Manager Configuration</guimenu> <guimenuitem>Cobbler</guimenuitem></menuchoice>
 page you can run the Cobbler synchronization by clicking <guimenu>Update</guimenu>
.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_configuration_cobbler.png" width="80%"/>
</imageobject>
<textobject><phrase>admin configuration cobbler</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Cobbler synchronization is used to repair or rebuild the contents of <filename>/srv/tftpboot</filename>
 or <filename>/srv/www/cobbler</filename>
 when a manual modification of the cobbler setup has occurred.</simpara>
</section>
<section xml:id="_s3_sattools_config_bare_metal"><title><guimenu>Admin</guimenu> &gt; <guimenu>Manager Configuration</guimenu> &gt; <guimenu>Bare-metal systems</guimenu></title><simpara>Here you can add unprovisioned ("bare-metal") systems capable of booting using PXE to an organization.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_configuration_bare_metal_systems.png" width="80%"/>
</imageobject>
<textobject><phrase>admin configuration bare metal systems</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>First click <guimenu>Enable adding to this organization</guimenu>
.
Those systems then will appear in the <guimenu>Systems</guimenu>
 list, where regular provisioning via autoinstallation is possible in a completely unattended fashion.
Only AMD64/Intel 64 systems with at least 1 GB of RAM are supported. &susemgr;
 server will use its integrated Cobbler instance and will act as TFTP server for this feature to work, so the network segment that connects it to target systems must be properly configured.
In particular, a DHCP server must exist and have a next-server configuration parameter set to the &susemgr;
 server IP address or hostname.</simpara>
<simpara>When enabled, any bare-metal system connected to the SUSE Manager server network will be automatically added to the organization when it powers on.
The process typically takes a few minutes; when it finishes, the system will automatically shut down and then appear in the <guimenu>Systems</guimenu>
 list.</simpara>
<note>
<simpara>New systems will be added to the organization of the administrator who enabled this feature.
To change the organization, disable the feature, log in as an administrator of a different organization and enable it again.</simpara>
</note>
<simpara>Provisioning can be initiated by clicking the <guimenu>Provisioning</guimenu>
 tab.
In case of bare-metal systems, though, provisioning cannot be scheduled, it will happen automatically when it is completely configured and the system is powered on.</simpara>
<simpara>It is possible to use <guimenu>System Set Manager</guimenu>
 with bare-metal systems, although in that case some features will not be available as those systems do not have an operating system installed.
This limitation also applies to mixed sets with regular and bare-metal systems: full features will be enabled again when all bare-metal systems are removed from the set.</simpara>
</section>
</section>
<section xml:id="_ref.webui.admin.iss"><title><guimenu>Admin</guimenu> &gt; <guimenu>ISS Configuration</guimenu></title><simpara>Inter-Server Synchronization (ISS) allows &susemgr;
synchronizing content and permissions from another &susemgr;
instance in a peer-to-peer relationship.</simpara>
<section xml:id="_s3_sattools_iss_master"><title>Configuring the Master &susemgr; Server</title><simpara>The following will help you set up a master ISS server.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_iss_configuration_master.png" width="80%"/>
</imageobject>
<textobject><phrase>admin iss configuration master</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Click <menuchoice><guimenu>Admin</guimenu> <guisubmenu></guisubmenu> <guisubmenu>ISS Configuration</guisubmenu> <guimenuitem>Master Setup</guimenuitem></menuchoice>
.
In the top right-hand corner of this page, click <guimenu>Add New Slave</guimenu>
:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_iss_configuration_edit_slave.png" width="80%"/>
</imageobject>
<textobject><phrase>admin iss configuration edit slave</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>and fill in the following information:</simpara>
<itemizedlist>
<listitem>
<para>Slave Fully Qualified Domain Name (FQDN)</para>
</listitem>
<listitem>
<para></para>
<simpara>Allow Slave to Sync? &mdash;
Choosing this field will allow the slave &susemgr;
to access this master &susemgr;
.
Otherwise, contact with this slave will be denied.</simpara>
</listitem>
<listitem>
<para>Sync All Orgs to Slave? &mdash; Checking this field will synchronize all organizations to the slave &susemgr; .</para>
</listitem>
</itemizedlist>
<note>
<simpara>Choosing the <guimenu>Sync All Orgs to Slave?</guimenu>
 option on the <guimenu>Master Setup</guimenu>
 page will override any specifically selected organizations in the local organization table.</simpara>
</note>
<simpara>Click <guimenu>Create</guimenu>
.
Optionally, click any local organization to be exported to the slave &susemgr;
 then click <guimenu>Allow Orgs</guimenu>
.</simpara>
<note>
<title>Enabling Inter-server Synchronization in &susemgr;2.1</title>
<simpara>ISS is enabled by default in &susemgr;
 3.1 and later.</simpara>
<simpara>To enable the inter-server synchronization (ISS) feature in &susemgr;
 2.1, edit the <filename>/etc/rhn/rhn.conf</filename>
 file and set: <command>disable_iss=0</command>.
Save the file and restart the httpd service with <command>service httpd restart</command>.</simpara>
</note>
<simpara>For synchronization timeout settings, see <xref linkend="_bp.troubleshooting.timeouts"/>.</simpara>
</section>
<section xml:id="_s3_sattools_iss_slave"><title>Configuring Slave Servers</title><simpara>Slave servers receive content synchronized from the master server.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_iss_configuration_slave.png" width="80%"/>
</imageobject>
<textobject><phrase>admin iss configuration slave</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>To securely transfer content to the slave servers, the ORG-SSL certificate from the master server is needed.
Click <menuchoice><guimenu>Admin</guimenu> <guisubmenu>ISS Configuration</guisubmenu> <guimenuitem>Slave Setup</guimenuitem></menuchoice>
.
In the top right-hand corner, click <guimenu>Add New Master:</guimenu></simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_iss_configuration_edit_master.png" width="80%"/>
</imageobject>
<textobject><phrase>admin iss configuration edit master</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>menu:[]
 and fill in the following information:</simpara>
<itemizedlist>
<listitem>
<para>Master Fully Qualified Domain Name (FQDN)</para>
</listitem>
<listitem>
<para>Default Master?</para>
</listitem>
<listitem>
<para>Filename of this Master&#8217;s CA Certificate: use the full path to the CA Certificate. For example:</para>
<screen>/etc/pki/trust/anchors</screen>
</listitem>
</itemizedlist>
<simpara>Click <guimenu>Add New Master</guimenu>
.</simpara>
<simpara>Once the master and slave servers are configured, start the synchronization on the Master server by executing <command>mgr-inter-sync</command>:</simpara>
<screen>mgr-inter-sync -c`YOUR-CHANNEL`</screen>
</section>
<section xml:id="_s3_sattools_iss_map_orgs"><title>Mapping &susemgr; Master Server Organizations to Slave Organizations</title><simpara>A mapping between organizational names on the master &susemgr;
allows for channel access permissions being set on the master server and propagated when content is synchronized to a slave &susemgr;
.
Not all organization and channel details need to be mapped for all slaves. &susemgr;
administrators can select which permissions and organizations can be synchronized by allowing or omitting mappings.</simpara>
<simpara>To complete the mapping, log in to the Slave &susemgr;
as administrator.
Click <menuchoice><guimenu>Admin</guimenu> <guisubmenu>ISS Configuration</guisubmenu> <guimenuitem>Slave Setup</guimenuitem></menuchoice>
 and select a master &susemgr;
 by clicking its name.
Use the drop-down box to map the exported master organization name to a matching local organization in the slave &susemgr;
, then click <guimenu>Update Mapping</guimenu>
.</simpara>
<simpara>On the command line, issue the synchronization command on each of the custom channels to obtain the correct trust structure and channel permissions:</simpara>
<screen>mgr-inter-sync -c`YOUR-CHANNEL`</screen>
</section>
</section>
<section xml:id="_ref.webui.admin.schedules"><title><guimenu>Admin</guimenu> &gt; <guimenu>Task Schedules</guimenu></title><simpara>Under <guimenu>Task Schedules</guimenu>
 all predefined task bunches are listed.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_task_schedules.png" width="80%"/>
</imageobject>
<textobject><phrase>admin task schedules</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Click a <guimenu>Schedule name</guimenu>
 to open its <guimenu>Basic Schedule Details</guimenu>
 where you disable it or change the frequency.  Click <guimenu>Edit Schedule</guimenu>
 to update the schedule with your settings.
To delete a schedule, click <guimenu>delete schedule</guimenu>
 in the upper right-hand corner.</simpara>
<warning>
<simpara>Only disable or delete a schedule if you are absolutely certain this is necessary as they are essential for &susemgr;
to work properly.</simpara>
</warning>
<simpara>If you click a bunch name, a list of runs of that bunch type and their status will be displayed.
Clicking the start time links takes you back to the <guimenu>Basic Schedule Details</guimenu>
.</simpara>
<simpara>For example, the following predefined task bunches are scheduled by default and can be configured:</simpara>
<variablelist>
<varlistentry>
<term><guimenu>channel-repodata-default:</guimenu></term>
<listitem>
<simpara>(re)generates repository metadata files.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>cleanup-data-default:</guimenu></term>
<listitem>
<simpara>cleans up stale package change log and monitoring time series data from the database.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>clear-taskologs-default:</guimenu></term>
<listitem>
<simpara>clears task engine (taskomatic) history data older than a specified number of days, depending on the job type, from the database.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>cobbler-sync-default:</guimenu></term>
<listitem>
<simpara>synchronizes distribution and profile data from &susemgr;
to Cobbler.
For more information on Cobbler, see <xref linkend="_advanced.topics.cobbler"/>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>compare-configs-default:</guimenu></term>
<listitem>
<simpara>compares configuration files as stored in configuration channels with the files stored on all configuration-enabled servers.
To review comparisons, click the <guimenu>Systems</guimenu>
tab and click the system of interest.
Go tomenu: Configuration[Compare Files]
.
For more information, refer to <xref linkend="_s5_sdc_configuration_diff"/>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>cve-server-channels-default:</guimenu></term>
<listitem>
<simpara>updates internal pre-computed CVE data that is used to display results on the <guimenu>CVE Audit</guimenu>
page.
Search results in the <guimenu>CVE Audit</guimenu>
page are updated to the last run of this schedule). For more information, see <xref linkend="_ref.webui.audit.cve"/>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>daily-status-default:</guimenu></term>
<listitem>
<simpara>sends daily report e-mails to relevant addresses.
See <xref linkend="_s4_usr_active_details_prefs"/> to learn more about how to configure notifications for specific users.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>errata-cache-default:</guimenu></term>
<listitem>
<simpara>updates internal patch cache database tables, which are used to look up packages that need updates for each server.
Also, this sends notification emails to users that might be interested in certain patches.
For more information on patches, see <xref linkend="_ref.webui.patches"/>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>errata-queue-default:</guimenu></term>
<listitem>
<simpara>queues automatic updates (patches) for servers that are configured to receive them.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>kickstart-cleanup-default:</guimenu></term>
<listitem>
<simpara>cleans up stale kickstart session data.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>kickstartfile-sync-default:</guimenu></term>
<listitem>
<simpara>generates Cobbler files corresponding to Kickstart profiles created by the configuration wizard.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>mgr-register-default:</guimenu></term>
<listitem>
<simpara>calls the <command>mgr-register</command> command, which synchronizes client registration data with NCC (new, changed or deleted clients' data are forwarded).</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>mgr-sync-refresh-default:</guimenu></term>
<listitem>
<simpara>the default time at which the start of synchronization with SUSE Customer Center (SCC) takes place (<literal>mgr-sync-refresh</literal>).</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>package-cleanup-default:</guimenu></term>
<listitem>
<simpara>deletes stale package files from the file system.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>reboot-action-cleanup-default:</guimenu></term>
<listitem>
<simpara>any reboot actions pending for more than six hours are marked as failed and associated data is cleaned up in the database.
For more information on scheduling reboot actions, see <xref linkend="_s5_sdc_provisioning_powermgnt"/>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>sandbox-cleanup-default:</guimenu></term>
<listitem>
<simpara>cleans up <guimenu>sandbox</guimenu>
configuration files and channels that are older than the <guimenu>sandbox_lifetime</guimenu>
configuration parameter (3 days by default). Sandbox files are those imported from systems or files under development.
For more information, see <xref linkend="_s5_sdc_configuration_add_files"/></simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>session-cleanup-default:</guimenu></term>
<listitem>
<simpara>cleans up stale Web interface sessions, typically data that is temporarily stored when a user logs in and then closes the browser before logging out.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>ssh-push-default:</guimenu></term>
<listitem>
<simpara>prompts clients to check in with &susemgr;
via SSH if they are configured with a <guimenu>SSH Push</guimenu>
contact method.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_ref.webui.admin.status"><title><guimenu>Admin</guimenu> &gt; <guimenu>Task Engine Status</guimenu></title><simpara>This is a status report of the various tasks running by the &susemgr;
task engine.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_task_status_last_execution.png" width="80%"/>
</imageobject>
<textobject><phrase>admin task status last execution</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Next to the task name you find the date and time of the last execution and the status.</simpara>
</section>
<section xml:id="_ref.webui.admin.logs"><title><guimenu>Admin</guimenu> &gt; <guimenu>Show Tomcat Logs</guimenu></title><simpara>Here the &susemgr;
Admin user has access to the Tomcat log file located at <filename>/var/log/rhn/rhn_web_ui.log</filename>
.
No &rootuser;
 privileges are required.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/admin_show_tomcat_logs.png" width="80%"/>
</imageobject>
<textobject><phrase>admin show tomcat logs</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</chapter>
<chapter xml:id="_s1_sm_help"><title>Help</title><simpara><indexterm>
<primary>Help Desk</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>WebLogic</primary><secondary>Help</secondary>
</indexterm>
<indexterm>
<primary>Help</primary>
</indexterm></simpara>
<simpara>The <guimenu>Help</guimenu>
 pages provide access to the full suite of documentation and support available to &susemgr;
 users.</simpara>
<section xml:id="_s2_sm_your_rhn_help_sat"><title>&susemgr;{mgrgetstart}</title><simpara>In <xref linkend="_book.suma.getting_started"/> find information regarding    &susemgr;
 server and its installation and initial configuration.
Implementing a fully functional &susemgr;
 requires more than installing software and a database.
Client systems must be configured to use &susemgr;
.
Custom packages and channels should be created for optimal use.
Since these tasks extend beyond the basic installation, they are covered in detail in the other guides.</simpara>
</section>
<section xml:id="_s2_sm_your_rhn_help_rg"><title>&susemgr;{mgrrefguide}</title><simpara><xref linkend="_book.suma.reference.manual"/> explains the Web interface and its features in detail.</simpara>
</section>
<section xml:id="_s2_sm_your_rhn_help_bp"><title>&susemgr;{mgrbestpract}</title><simpara><xref linkend="_book.suma.best.practices"/> describes &suse;
 recommended best practices for &susemgr;
.
This information has been collected from many successful &susemgr;
 real world implementations and includes feedback provided by product management, sales, and engineering.</simpara>
</section>
<section xml:id="_s2_sm_your_rhn_help_at"><title>&susemgr;{mgradvtop}</title><simpara><xref linkend="_book.suma.advanced.topics"/> contains a collection of advanced topics not covered under the best practices guide.</simpara>
</section>
<section xml:id="_s2_sm_your_rhn_help_rn"><title>Release Notes</title><simpara>The <guimenu>Release Notes</guimenu>
 page lists the notes accompanying every recent release of &susemgr;
.
All significant changes in a given release cycle, from major enhancements to the user interface to changes in the related documentation are documented here.</simpara>
</section>
<section xml:id="_s2_sm_your_rhn_help_api"><title>API</title><simpara>Documentation for using the Application Programming Interface (API) for creating tools and programs to automate common tasks via &susemgr;
.</simpara>
<simpara>The <guimenu>API</guimenu>
 page contains an overview of the API, with links to detailed descriptions of various API calls available to administrators and developers.
There is also an <guimenu>FAQ</guimenu>
 page for answers to common questions about the &susemgr;
 API.
A <guimenu>Sample Scripts</guimenu>
 page shows example code using API calls.</simpara>
</section>
<section xml:id="_s2_sm_your_rhn_help_docsearch"><title>Search</title><simpara>The <guimenu>Documentation Search</guimenu>
 page features a robust search engine that indexes and searches &susemgr;
 documentation.</simpara>
<figure>
<title>Documentation Search</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/help_search.png" width="80%"/>
</imageobject>
<textobject><phrase>help search</phrase></textobject>
</mediaobject>
</figure>
<simpara>Users can search the available online documentation and filter them according to the following choices in the <guimenu>What to Search</guimenu>
 drop-down box:</simpara>
<itemizedlist>
<listitem>
<para><guimenu>Content &amp; Title</guimenu>&#8201;&#8212;&#8201;Search both the title heading or body content of all available documents.</para>
</listitem>
<listitem>
<para><guimenu>Free Form</guimenu>&#8201;&#8212;&#8201;Search documents for any keyword matches, which broadens search results.</para>
</listitem>
<listitem>
<para><guimenu>Content</guimenu>&#8201;&#8212;&#8201;Search only the body content of documentation for more specific matches.</para>
</listitem>
<listitem>
<para><guimenu>Title</guimenu>&#8201;&#8212;&#8201;Search only the title headings of the documentation for targeted, specific search results.</para>
</listitem>
</itemizedlist>
<simpara>The <guimenu>Free Form</guimenu>
 field additionally allows you to search using field names that you prepend to search queries and filter results in that field.</simpara>
<simpara>For example, if you wanted to search all of the &susemgr;
manuals for the word <literal>Virtualization</literal> in the title and <literal>install</literal> in the content, type the following in the <guimenu>Free Form</guimenu>
 field:</simpara>
<screen>title:Virtualization and content:install</screen>
<simpara>Other supported field names for documentation search include:</simpara>
<itemizedlist>
<listitem>
<para><literal>url</literal>&#8201;&#8212;&#8201;Search the URL for a particular keyword.</para>
</listitem>
<listitem>
<para><literal>title</literal>&#8201;&#8212;&#8201;Search titles for a particular keyword.</para>
</listitem>
<listitem>
<para><literal>content</literal>&#8201;&#8212;&#8201;Search the body of the documentation for a particular keyword.</para>
</listitem>
</itemizedlist>
<simpara>If there are several pages of search results, you can limit the amount of visible results shown on one page by clicking the <guimenu>Display quantity items per page</guimenu>
 drop-down box, which offers between 10 and 500 results per page.</simpara>
<simpara>To move between pages, click the right or left angle brackets (<guimenu>&gt;</guimenu>
 to go forward or <guimenu>&lt;</guimenu>
 to go backward).</simpara>
</section>
</chapter>
</part>
<part xml:id="_book.suma.advanced.topics"><title>Advanced Topics</title><preface xml:id="_preface.susemanager.at"><title>About This Guide</title><note>
<title>&susemgr;Version Information</title>
<simpara>In this manual if not other specified, &susemgr;
version &productnumber;
is assumed and this version is required if a feature is discussed. &susemgr;
 &productnumber;
and &susemgr;
 &productnumber;
Proxy were originally released as a SLES 12 SP3 extension.
Whenever features of the &susemgr;{productnumber}
host operating system are documented and not other specified version 12 SP3 is assumed.</simpara>
</note>
</preface>
<chapter xml:id="_art.suma.install.zsystems"><title>&susemgr; on IBM &zsystems;</title><section xml:id="_introduction_2"><title>Introduction</title><simpara>This best practice guide is intended for z/VM administrators responsible for operating the IBM &zseries;
Mainframe.
The goal of this guide is to lead an z/VM administrator trained on normal &zseries;
operating protocols through the installation of &susemgr;
onto an existing mainframe system.
The intent of this article is not to cover the variety of hardware configuration profiles available on &zseries;
but instead to provide a foundational overview of the procedure and requirements necessary for a successful &susemgr;
server deployment.</simpara>
</section>
<section xml:id="_base_system_requirements"><title>Base System Requirements</title><simpara>The z/VM administrator should acquire and prepare the following resources for a successful &susemgr;
installation. &susemgr;{productnumber}
is delivered as an extension.
These sections will provide you with the minimum and recommended system requirements for &susemgr;
.
The base system for &susemgr;
 &productnumber;
is SLES {sles-version}{sp-version}
.</simpara>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Hardware</simpara></entry>
<entry align="left" valign="top"><simpara>Recommended Hardware</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>IBM Systems</simpara></entry>
<entry align="left" valign="top"><simpara>* IBM zEnterprise System z196 <emphasis>(z196)</emphasis>
* IBM zEnterprise System z114 <emphasis>(z114)</emphasis>
* IBM zEnterprise EC12 <emphasis>(zEC12)</emphasis>
* IBM zEnterprise EC12 <emphasis>(zEC12)</emphasis>
* IBM zEnterprise BC12 <emphasis>(zBC12)</emphasis>
* IBM z13 <emphasis>(z13)</emphasis>
* LinuxOne Rockhopper
* LinuxOne Emperor</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>RAM</simpara></entry>
<entry align="left" valign="top"><simpara><emphasis>Split memory requirements across available RAM, VDISK and
        swap to suit your environment. On a production system the ratio of
        physical memory to VDISK will need to be re-evaluated based on the
        number of clients which will be supported.</emphasis></simpara><simpara>Minimum 5&#160;
 GB+ for test server <emphasis>(3 GB RAM + 2 GB VDISK
        Swap)</emphasis></simpara><simpara>Minimum 16&#160;
GB+ for base installation</simpara><simpara>Minimum 32&#160;
GB+ for a production server</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Free Disk Space</simpara></entry>
<entry align="left" valign="top"><simpara>Minimum 100&#160;
GB for root partition</simpara><simpara>Minimum 50&#160;
GB for <replaceable>/var/lib/pgsql</replaceable></simpara><simpara>Minimum 50&#160;
GB per &suse;
product + 100 GB per Red Hat product <replaceable>/var/spacewalk</replaceable></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Network Connection</simpara></entry>
<entry align="left" valign="top"><simpara>* OSA Express Ethernet <emphasis>(including Fast and Gigabit Ethernet) _
* HiperSockets or Guest LAN
* 10 GBE, VSWITCH
* RoCE _(RDMA over Converged Ethernet)</emphasis></simpara><simpara>The following interfaces are still included but no longer supported:</simpara><simpara>* CTC <emphasis>(or virtual CTC)</emphasis>
* IP network interface for IUCV</simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<itemizedlist>
<title>Media Requirements</title>
<listitem>
<para>&sle; {sles-version}{sp-version} Installation Media for IBM &zsystems; :</para>
<simpara><link xl:href="https://www.suse.com/products/server/download/">https://www.suse.com/products/server/download/</link></simpara>
</listitem>
</itemizedlist>
</section>
<section xml:id="_additional_requirements"><title>Additional Requirements</title><simpara>There are a few additional resource requirements you will need to prepare before installing the &susemgr;
extension on your system.
This section overviews these requirements.</simpara>
<simpara>The guest z/VM should be provided with a static IP address and hostname as these cannot be easily changed after initial setup.
The hostname should contain less than 8 characters.</simpara>
<simpara>For more information on &susemgr;
additional requirements, see <link xl:href="https://www.suse.com/documentation/suse-manager-3/book_suma_best_practices/data/mgr_conceptual_overview.html">https://www.suse.com/documentation/suse-manager-3/book_suma_best_practices/data/mgr_conceptual_overview.html</link>.</simpara>
<simpara>You are required to calculate sufficient disk storage for &susemgr;
before running:</simpara>
<screen>yast2 susemanager_setup</screen>
<simpara>The following information will help fulfill these requirements.</simpara>
<warning>
<title>&susemgr;Default Volume Groups and Disk Space</title>
<simpara>By default the file system of &susemgr;
including the embedded database and patch directories will reside within the root volume.
While adjustments are possible once installation has completed it becomes the administrators responsibility to specify and monitor these adjustments.</simpara>
<simpara>If your &susemgr;
runs out of disk space, this can have a severe impact on its database and file structure.
Preparing storage requirements in accordance with this section will aid in preventing these harmful effects.</simpara>
<simpara>_&suse;
 technical services will not be able to provide support for
    systems suffering from low disk space conditions as this can have an effect
    on an entire system and therefore becomes unresolvable. A full recovery is
    only possible with a previous backup or a new &susemgr;</simpara>
<literallayout class="monospaced">installation._</literallayout>
</warning>
<itemizedlist>
<title>Required Storage Devices</title>
<listitem>
<para>An additional disk is required for database storage. This should be an <literal role="systemitem">zFCP</literal> or <literal role="systemitem">DASD</literal> device as these are preferred for use with <literal role="systemitem">HYPERPAV</literal> . This disk should fulfill the following requirements</para>
<simpara>At least 50 GB for</simpara>
<screen>/var/lib/pgsql</screen>
<simpara>Minimum 50&#160;
GB per SUSE product + 100 GB per Red Hat product</simpara>
<screen>/var/spacewalk</screen>
</listitem>
</itemizedlist>
</section>
<section xml:id="_sles_sles_version_sp_version_installation_and_the_susemgr_extension"><title>SLES {sles-version}{sp-version} Installation and the &susemgr; Extension</title><simpara>This section covers the installation of &susemgr;{productnumber}
as an extension to SLES {sles-version}{sp-version}
.</simpara>
<simpara>For more information on deploying SLES {sles-version}{sp-version}
on your hardware, see <link xl:href="https://www.suse.com/documentation/sles-12/book_sle_deployment/data/cha_zseries.html">https://www.suse.com/documentation/sles-12/book_sle_deployment/data/cha_zseries.html</link>.</simpara>
<simpara>During installation of SLES {sles-version}{sp-version}
select &susemgr;
as an extension.</simpara>
<simpara>After rebooting you will need to set up the additional storage required for <filename>/var/spacewalk</filename>
 and <filename>/var/lib/pgsql</filename>
 and swap space using the yast partitioner tool.
This step is <emphasis>required</emphasis> before running <command>yast2
   susemanager_setup</command>.</simpara>
<simpara>After configuring the storage requirements, having executed a &yast;
online update and completed a full system reboot, run &susemgr;
setup to finalize the &susemgr;
installation on your &zsystems;
mainframe:</simpara>
<screen>{prompt.root}yast2 susemanager_setup</screen>
<simpara>This completes the installation of &susemgr;
on your &zseries;
.
For more information on beginning management with &susemgr;
, see <xref linkend="_suma.setup.with.yast.sumasetup"/>.</simpara>
</section>
</chapter>
<chapter xml:id="_advanced.topics.proxy.quickstart"><title>&susemgr;{productnumber} Proxy</title><info><abstract>
<simpara>This chapter explains how to install and set up &susemgr;{productnumber}
Proxy.
It also provides notes about migrating a previous proxy such as version 2.1, 3.0, or 3.1 to version 3.2.</simpara>
</abstract></info>
<section xml:id="_at.manager.proxy.concepts"><title>Overview</title><simpara>&susemgr;{productnumber}
Proxy is a &susemgr;
add-on that caches software packages on an internal, central server.
The proxy caches patch updates from &suse;
or custom RPMs generated by third-party organizations.
A proxy allows you to use bandwidth more effectively because client systems connect to the proxy for updates, and the &susemgr;
server is no longer required to handle all client requests.
The proxy also supports transparent custom package deployment.</simpara>
<simpara>&susemgr;
Proxy is an open source (GPLv2) solution that provides the following features:</simpara>
<itemizedlist>
<listitem>
<para>Cache software packages within a Squid proxy.</para>
</listitem>
<listitem>
<para>Client systems see the &susemgrproxy; as a &susemgr; server instance.</para>
</listitem>
<listitem>
<para>The &susemgrproxy; is registered as a client system with the &susemgr; server.</para>
</listitem>
</itemizedlist>
<simpara>The primary goal of a &susemgrproxy;
is to improve &susemgr;
performance by reducing bandwidth requirements and accelerating response time.</simpara>
</section>
<section xml:id="_at.manager.proxy.inst_and_clients"><title>Proxy Installation and Connecting Clients</title><section xml:id="_at.manager.proxy.requirements"><title>Requirements</title><simpara>The following section provides &susemgrproxy;
requirements.</simpara>
<formalpara>
<title>Supported Client Systems</title>
<para>For supported clients and their requirements, see <xref linkend="_mgr.supported.client.systems"/>.</para>
</formalpara>
<formalpara>
<title>Hardware Requirements</title>
<para>Hardware requirements highly depend on your usage scenario.
When planning proxy environments, consider the amount of data you want to cache on your proxy.
If your proxy should be a 1:1 mirror of your &susemgr;
, the same amount of disk space is required.
For specific hardware requirements, see the following table.</para>
</formalpara>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Hardware</simpara></entry>
<entry align="left" valign="top"><simpara>Required</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>CPU</simpara></entry>
<entry align="left" valign="top"><simpara>Multi-core 64-bit CPU (x86_64).</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>RAM</simpara></entry>
<entry align="left" valign="top"><simpara>Minimum 4&#160;
GB for a non-production server</simpara><simpara>Minimum 16&#160;
GB for a production server</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Free Disk Space</simpara></entry>
<entry align="left" valign="top"><simpara>Minimum 100&#160;
GB for base installation and at least 50 GB for caching per SUSE product and +100 GB per Red Hat product; a resizeable partition strongly recommended.</simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<tip>
<title>Storage for Proxy Data</title>
<simpara>&suse;
recommends storing the squid proxy caching data on a separate disk formatted with the XFS file system.</simpara>
</tip>
<formalpara>
<title>SSL Certificate Password</title>
<para>For installing the proxy, you need the SSL certificate password entered during the initial installation of &susemgr;
.</para>
</formalpara>
<formalpara>
<title>Network Requirements</title>
<para>For additional network requirements, see <xref linkend="_mgr.additional.requirements"/>.</para>
</formalpara>
<formalpara>
<title>&scc;</title>
<para>For using &susemgrproxy;
, you need an account at &scc;
(SCC) where your purchased products and product subscriptions are registered.
Make sure you have the following subscriptions:</para>
</formalpara>
<itemizedlist>
<listitem>
<para>One or more subscriptions for &susemgrproxy; .</para>
</listitem>
<listitem>
<para>One or more subscriptions for &susemgr; .</para>
</listitem>
<listitem>
<para>Subscriptions for the products on the client systems you want to register with &susemgr; via &susemgrproxy; .</para>
</listitem>
<listitem>
<para>Subscriptions to client entitlements for the client system you want to register with &susemgr; via &susemgrproxy; .</para>
</listitem>
</itemizedlist>
<formalpara>
<title>Network Time Protocol (NTP)</title>
<para>The connection to the Web server via Secure Sockets Layer (SSL) requires correct time settings on the server, proxy and clients.
For this reason, all systems must use NTP.
For more information, see <link xl:href="https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_netz_xntp.html">https://www.suse.com/documentation/sles-12/book_sle_admin/data/cha_netz_xntp.html</link>.</para>
</formalpara>
<formalpara>
<title>Virtual Environments</title>
<para>The following virtual environments are supported:</para>
</formalpara>
<itemizedlist>
<listitem>
<para><link xl:href="http://www.linux-kvm.org/page/Main_Page">http://www.linux-kvm.org/page/Main_Page</link></para>
</listitem>
<listitem>
<para><link xl:href="http://www.vmware.com/">http://www.vmware.com/</link></para>
</listitem>
<listitem>
<para><link xl:href="http://www.microsoft.com/en-us/server-cloud/solutions/virtualization.aspx">http://www.microsoft.com/en-us/server-cloud/solutions/virtualization.aspx</link></para>
</listitem>
</itemizedlist>
<simpara>For running &susemgrproxy;
in virtual environments, use the following settings for the virtual machine (VM):</simpara>
<itemizedlist>
<listitem>
<para>At least 1 GB of RAM</para>
</listitem>
<listitem>
<para>Bridged network</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_at.manager.proxy.inst"><title>Installation and Setup</title><simpara>The following section will guide you through the installation and setup procedure.</simpara>
<important>
<title>Registering Proxies</title>
<simpara>&susemgr;
Proxy systems are registered as traditional clients using a bootstrap script.
Currently there is no method to register proxy systems using Salt.
A &susemgrproxy;
can serve both Traditional and Salt clients.</simpara>
</important>
<important xml:id="_at.manager.proxy.install.prep">
<title>Procedure: Registering the Proxy</title>
<simpara>First completly download the channels (&sle;
 12 SP3) and then create the activation key.
Only then you can select the correct child channels.</simpara>
</important>
<simpara>+</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Create an activation key based on the &sle; 12 SP3 base channel. For more information about activation keys, see <xref linkend="_create.act.keys"/>.</para>
<figure>
<title>Proxy Activation Key</title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/proxy-key.png"/>
</imageobject>
<textobject><phrase>proxy key</phrase></textobject>
</mediaobject>
</figure>
</listitem>
<listitem>
<para>Click the <guimenu>Child Channels</guimenu> subtab and select the &susemgr; &productnumber; Proxy child channel with the matching update channel (<literal role="systemitem">SUSE Manager Proxy-3.2-Pool</literal> and <literal role="systemitem">SUSE-Manager-Proxy-3.2-Updates</literal> ). These child channels are required for providing the proxy packages and updates. As for normal SLES clients, <literal role="systemitem">SLES12-SP3-Updates</literal> plus <literal role="systemitem">SLE-Manager-Tools12-Pool</literal> and <literal role="systemitem">SLE-Manager-Tools12-Updates</literal> are required.</para>
<figure>
<title>Base and Child Proxy Channel</title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/sles12-proxy-child.png"/>
</imageobject>
<textobject><phrase>sles12 proxy child</phrase></textobject>
</mediaobject>
</figure>
</listitem>
</orderedlist>
<orderedlist xml:id="_at.manager.proxy.install.prep.bss" numeration="arabic">
<listitem>
<para>Modify a bootstrap script for the proxy. Ensure unchecking <guimenu>Bootstrap using Salt</guimenu> , because in this case the proxy must be bootstrapped as a so-called traditional client. For more information about bootstrap scripts, see <xref linkend="_modify.bootstrap.script"/>.</para>
</listitem>
<listitem>
<para>Bootstrap the client with the bootstrap script.</para>
</listitem>
<listitem>
<para>You will see a list of channels to which your client is already subscribed to. Select the two unchecked proxy channels which include the <literal role="systemitem">SUSE Manager Proxy-3.2-Pool</literal> and <literal role="systemitem">SUSE-Manager-Proxy-3.2-Updates</literal> , then select <guimenu>Change Subscriptions</guimenu> to continue. This will provide the required repositories for the proxy packages from the &susemgr; server to the client.</para>
</listitem>
</orderedlist>
<simpara>A few more steps are still needed:</simpara>
<itemizedlist>
<listitem>
<para>install the <filename>suma_proxy</filename> pattern (see <xref linkend="_at.manager.proxy.run.pattern"/>);</para>
</listitem>
<listitem>
<para>copy the SSL certificate and key from the server (see <xref linkend="_at.manager.proxy.run.copycert"/>);</para>
</listitem>
<listitem>
<para>run <command>configure-proxy.sh</command> (see <xref linkend="_at.manager.proxy.run.confproxy"/>);</para>
</listitem>
</itemizedlist>
<simpara>You will then be able to register your clients against the proxy using the &webui;
or a bootstrap script as if it were a &susemgr;
server.
For more information, see <xref linkend="_at.manager.proxy.register.saltclients"/>.</simpara>
</section>
<section xml:id="_at.manager.proxy.run.pattern"><title>Install the <filename>suma_proxy</filename> pattern</title><simpara>Make sure the <filename>suma_proxy</filename>
 pattern version 2.5.1.3 or later is installed using the following command on the proxy:</simpara>
<screen>{prompt.root}zypper in -t pattern suma_proxy</screen>
<simpara>The new salt-broker service will be automatically started at the end of the package installation.
This service forwards the Salt interactions to the &susemgr;
server.</simpara>
<note>
<title>Proxy Chains</title>
<simpara>It is possible to arrange Salt proxies in a chain.
In such a case, the upstream proxy is named <quote>parent</quote>
.</simpara>
</note>
<simpara>Make sure the proxie&#8217;s TCP ports <literal>4505</literal> and <literal>4506</literal> are open and that the proxy can reach the &susemgr;
 server (or another upstream proxy) on these ports.</simpara>
</section>
<section xml:id="_at.manager.proxy.run.copycert"><title>Copy Server Certificate and Key</title><simpara>The proxy will share some SSL information with the &susemgr;
server, so the next step is to copy the certificate and its key from the &susemgr;
server or the upstream proxy.</simpara>
<simpara>As &rootuser;
, enter the following commands on the proxy using your &susemgr;
server or chained proxy named as <replaceable>PARENT</replaceable>:</simpara>
<screen>{prompt.root}cd /root/ssl-build{prompt.root}scp root@`PARENT`:/root/ssl-build/RHN-ORG-PRIVATE-SSL-KEY .{prompt.root}scp root@`PARENT`:/root/ssl-build/RHN-ORG-TRUSTED-SSL-CERT .{prompt.root}scp root@`PARENT`:/root/ssl-build/rhn-ca-openssl.cnf .</screen>
<note>
<title>Known Limitation</title>
<simpara>The &susemgrproxy;
functionality is only supported if the SSL certificate was signed by the same CA as the &susemgr;
Server certificate.
Using certificates signed by different CAs for Proxies and Server is not supported.</simpara>
</note>
</section>
<section xml:id="_at.manager.proxy.run.confproxy"><title>Running <command>configure-proxy.sh</command></title><simpara>The <command>configure-proxy.sh</command> script will finalize the setup of your &susemgrproxy;
.</simpara>
<simpara>Now execute the interactive <command>configure-proxy.sh</command> script.
Pressing <keycap>Enter</keycap>
 without further input will make the script use the default values provided between brackets <literal>[]</literal>.
Here is some information about the requested settings:</simpara>
<variablelist>
<varlistentry>
<term>&susemgr; Parent</term>
<listitem>
<simpara>A &susemgr;
parent can be either another proxy server or a &susemgr;
server.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>HTTP Proxy</term>
<listitem>
<simpara>A HTTP proxy enables your &susemgr;
proxy to access the Web.
This is needed if where direct access to the Web is prohibited by a firewall.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Proxy Version to Activate</term>
<listitem>
<simpara>Normally, the correct value (3.0, 3.1, or 3.2) should be offered as a default.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Traceback Email</term>
<listitem>
<simpara>An email address where to report problems.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Use SSL</term>
<listitem>
<simpara>For safety reasons, press <literal>Y</literal>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Do You Want to Import Existing Certificates?</term>
<listitem>
<simpara>Answer <literal>N</literal>.
This ensures using the new certificates that were copied previously from the &susemgr;
server.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Organization</term>
<listitem>
<simpara>The next questions are about the characteristics to use for the SSL certificate of the proxy.
The organization might be the same organization that was used on the server, unless of course your proxy is not in the same organization as your main server.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Organization Unit</term>
<listitem>
<simpara>The default value here is the proxy&#8217;s hostname.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>City</term>
<listitem>
<simpara>Further information attached to the proxy&#8217;s certificate.
Beware the country code must be made of two upper case letters.
For further information on country codes, refer to the online <link xl:href="https://www.iso.org/obp/ui/#search">list of alpha-2
codes</link>.</simpara>
<tip>
<title>Country Code</title>
<simpara>As the country code enter the country code set during the SUSE Manager installation.
For example, if your proxy is in US and your &susemgr;
in DE, you must enter <literal>DE</literal> for the proxy.</simpara>
</tip>
</listitem>
</varlistentry>
<varlistentry>
<term>Cname Aliases (Separated by Space)</term>
<listitem>
<simpara>Use this if your proxy server can be accessed through various DNS CNAME aliases.
Otherwise it can be left empty.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>CA Password</term>
<listitem>
<simpara>Enter the password that was used for the certificate of your &susemgr;
server.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Do You Want to Use an Existing SSH Key for Proxying SSH-Push Salt Minions?</term>
<listitem>
<simpara>Use this option if you want to reuse a SSH key that was used for SSH-Push Salt minions on the server.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Create and Populate Configuration Channel rhn_proxy_config_1000010001?</term>
<listitem>
<simpara>Accept default <literal>Y</literal>.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>SUSE Manager Username</term>
<listitem>
<simpara>Use same user name and password as on the &susemgr;
server.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Activate advertising proxy via SLP?</term>
<listitem>
<simpara>SLP stands for Service Location Protocol.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>If parts are missing, such as CA key and public certificate, the script prints commands that you must execute to integrate the needed files.
When the mandatory files are copied, re-run <command>configure-proxy.sh</command>.
Also restart the script if a HTTP error was met during script execution.</simpara>
<simpara><command>configure-proxy.sh</command> activates services required by &susemgr;
 Proxy, such as <literal role="systemitem">squid</literal>
, <literal role="systemitem">apache2</literal>
, <literal role="systemitem">salt-broker</literal>
, and <literal role="systemitem">jabberd</literal>
.</simpara>
<simpara>To check the status of the proxy system and its clients, click the proxy system&#8217;s details page on the &webui;
(<menuchoice><guimenu>Systems</guimenu> <guimenuitem>Proxy</guimenuitem></menuchoice>
, then the system name). <guimenu>Connection</guimenu>
 and <guimenu>Proxy</guimenu>
 subtabs display the respective status information.</simpara>
</section>
<section xml:id="_at.manager.proxy.register.saltclients"><title>Registering Salt Clients via &susemgrproxy;</title><simpara>Proxy servers may now act as a broker and package cache for Salt minions.
These minions can be registered with a bootstrap script like the traditional clients, or directly from the &webui;
or the command line.</simpara>
<simpara>Registering Salt clients via &susemgrproxy;
from the &webui;
is done almost the same way as registering clients directly with the &susemgr;
server.
The difference is that you specify the name of the proxy in the <guimenu>Proxy</guimenu>
 drop-box on <menuchoice><guimenu>Salt</guimenu> <guimenuitem>Bootstrapping</guimenuitem></menuchoice>
 page.</simpara>
<figure>
<title>Bootstrapping a Salt Client With a Proxy</title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/proxy-saltbootstrap.png" width="80%"/>
</imageobject>
<textobject><phrase>proxy saltbootstrap</phrase></textobject>
</mediaobject>
</figure>
<orderedlist numeration="arabic">
<title>Procedure: Register a Salt client through a proxy from command line</title>
<listitem>
<para>Instead of the &webui; , you may use the command line to register a minion through a proxy. To do so, add the proxy FQDN as the master in the minions configuration file located at:</para>
<screen>/etc/salt/minion</screen>
<simpara>or alternatively:</simpara>
<screen>/etc/salt/minion.d/`name`.conf</screen>
</listitem>
<listitem>
<para>Add the FQDN to the minion file:</para>
<screen>master: proxy123.example.com</screen>
<simpara>Save and restart the salt-minion service with:</simpara>
<screen>{prompt.root}systemctl restart salt-minion</screen>
</listitem>
<listitem>
<para>On the proxy, accept the new minion key with:</para>
<screen>{prompt.root}salt-key -a 'minion'</screen>
<simpara>The minion will now connect to the proxy exclusively for Salt operations and normal HTTP package downloads.</simpara>
</listitem>
</orderedlist>
</section>
<section xml:id="_at.manager.proxy.register.clients"><title>Registering Clients via &susemgrproxy; with a Script</title><simpara>Registering clients (either traditional or Salt) via &susemgrproxy;
with a script is done almost the same way as registering clients directly with the &susemgr;
server.
The difference is that you create the bootstrap script on the &susemgrproxy;
with a command-line tool.
The bootstrap script then deploys all necessary information to the clients.
The bootstrap script refers some parameters (such as activation keys or GPG keys) that depend on your specific setup.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Create a client activation key on the &susemgr; server using the &webui; . See <xref linkend="_create.act.keys"/>.</para>
</listitem>
<listitem>
<para>On the proxy, execute the <command>mgr-bootstrap</command> command-line tool as &rootuser; . If needed, use the additional command-line switches to tune your bootstrap script. An important option is <command>--traditional</command> that enables to opt for a traditional client instead of a salt minion.</para>
<simpara>To view available options type <command>mgr-bootstrap
--help</command> from the command line:</simpara>
<screen># ``mgr-bootstrap --activation-keys=key-string``</screen>
</listitem>
<listitem>
<para>Optionally edit the resulting bootstrap script. Execute the bootstrap script on the clients as described in <xref linkend="_connect.first.client"/>.</para>
</listitem>
</orderedlist>
<simpara>The clients are registered with the &susemgrproxy;
specified in the bootstrap script.</simpara>
</section>
<section xml:id="_additional_information_about_client_registration_on_proxies"><title>Additional Information about Client Registration on Proxies</title><simpara>Within the &webui;
, standard proxy pages will show information about client, no matter whether minions or traditional clients.</simpara>
<simpara>A list of clients connected to a proxy can be located under <guimenu>Systems</guimenu>
 &lt;proxy name&gt; <guimenu>Details</guimenu><guimenu>Proxy</guimenu>
.</simpara>
<simpara>A list of chained proxies for a minion can be located under <guimenu>Systems</guimenu>
 &lt;minion name&gt; <guimenu>Details</guimenu><guimenu>Connection</guimenu></simpara>
<simpara>If you decide to move any of your clients between proxies or the server you will need to repeat the registration process from scratch.</simpara>
</section>
</section>
<section xml:id="_advanced.topics.proxy.pxe"><title>Enabling PXE Boot via &susemgrproxy;</title><section xml:id="_advanced.topics.proxy.pxe.sync"><title>Synchronizing Profiles and System Information</title><simpara>To enable PXE boot via a proxy server, additional software must be installed and configured on both the &susemgr;
server and the &susemgrproxy;
server.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>On the &susemgr; server install <package>susemanager-tftpsync</package> :</para>
<screen># ``zypper in susemanager-tftpsync``</screen>
</listitem>
<listitem>
<para>On the &susemgrproxy; server install <package>susemanager-tftpsync-recv</package> :</para>
<screen># ``zypper in susemanager-tftpsync-recv``</screen>
</listitem>
<listitem>
<para>Run the <command>configure-tftpsync.sh</command> setup script and enter the requested information:</para>
<screen># ``configure-tftpsync.sh``</screen>
<simpara>It asks for hostname and IP address of the &susemgr;
server and of the proxy itself.
Additionally, it asks for the tftpboot directory on the proxy.</simpara>
</listitem>
<listitem>
<para>On the &susemgr; server, run <command>configure-tftpsync.sh</command> to configure the upload to the &susemgrproxy; server:</para>
<screen># ``configure-tftpsync.sh FQDN_of_Proxy_Server``</screen>
</listitem>
<listitem>
<para>To initiate an initial synchronization on the SUSE Manager Server run:</para>
<screen># ``cobbler sync``</screen>
<simpara>Also can also be done after each a change within Cobbler that needs to be synchronized immediately.
Otherwise Cobbler synchronization will also run automatically when needed.
For more information about Cobbler, see <xref linkend="_advanced.topics.cobbler"/>.</simpara>
</listitem>
</orderedlist>
</section>
<section xml:id="_advanced.topics.proxy.pxe.dhcp"><title>Configuring DHCP for PXE via &susemgrproxy;</title><simpara>&susemgr;
is using Cobbler to provide provisioning.
PXE (tftp) is installed and activated by default.
To enable systems to find the PXE boot on the &susemgrproxy;
server add the following to the DHCP configuration for the zone containing the systems to be provisioned:</simpara>
<screen>next-server:`IP_Address_of_SUSE_Manager_Proxy_Server`filename: "pxelinux.0"</screen>
</section>
</section>
<section xml:id="_advanced.topics.proxy.migration3"><title>Migrating &susemgr;  3 Proxy to Version 3.1</title><simpara>The recommended order for migrations is to first migrate the server and then the proxies.
Note that a &susemgr;
 3 Proxy cooperates just fine with &susemgr;
 3.1.</simpara>
<simpara>For the migration of the proxies there are two possible approaches: Existing &susemgr;
proxies may be upgraded to version 3.1 with &yast;
or <command>zypper</command> migration.
Alternatively, the proxies may be replaced by new ones.
This section documents both approaches.</simpara>
<section xml:id="_replacing_a_susemgrproxy"><title>Replacing a &susemgrproxy;</title><simpara>A &susemgrproxy;
is <literal>dumb</literal> in the sense that it does not contain any information about the clients which are connected to it.
A &susemgrproxy;
 can therefore be replaced by a new one.
Naturally, the replacement proxy must have the same name and IP address as its predecessor.</simpara>
<simpara>In order to replace a &susemgrproxy;
and keeping the clients registered to the proxy leave the old proxy in &susemgr;
.
Create a reactivation key for this system and then register the new proxy using the reactivation key.
If you do not use the reactivation key, you will need to re-registered all the clients against the new proxy.</simpara>
<orderedlist xml:id="_proc.advanced.topics.proxy.migration3.replace" numeration="arabic">
<title>Procedure: Replacing a &susemgrproxy;and Keeping the ClientsRegistered</title>
<listitem>
<para>Before starting the actual migration procedure, save the data from the old proxy, if needed. Consider copying important data to a central place that can also be accessed by the new server:</para>
<itemizedlist>
<listitem>
<para>Copy the scripts that are still needed.</para>
</listitem>
<listitem>
<para>Copy the activation keys from the previous server. Of course, it is always better to re-create the keys.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Shutdown the server.</para>
</listitem>
<listitem>
<para>Install a new &susemgr; 3.1 Proxy, see <xref linkend="_at.manager.proxy.inst_and_clients"/>.</para>
</listitem>
<listitem>
<para>In the SUSE Manager &webui; select the newly installed &susemgrproxy; and delete it from the systems list.</para>
</listitem>
<listitem xml:id="_step.at.proxy.migration3.replace.react">
<para>In the &webui; , create a reactivation key for the old proxy system: On the System Details of the old proxy click <guimenu>Reactivation</guimenu> . Then click <guimenu>Generate New Key</guimenu> , and remember it (write it on a piece of paper or copy it to the clipboard).  For more information about reactivation keys, see <xref linkend="_s5_sm_system_details_react"/>.</para>
</listitem>
<listitem>
<para>After the installation of the new proxy, perform the following actions (if needed):</para>
<itemizedlist>
<listitem>
<para>Copy the centrally saved data to the new proxy system.</para>
</listitem>
<listitem>
<para>Install any other needed software.</para>
</listitem>
<listitem>
<para>If the proxy is also used for autoinstallation, do not forget to setup TFTP synchronization.</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<important>
<title>Proxy Installation and Client Connections</title>
<simpara>During the installation of the proxy, clients will not be able to reach the &susemgr;
server.
After a &susemgrproxy;
system has been deleted from the systems list, all clients connected to this proxy will be (incorrectly) listed as <literal>directly connected</literal> to the &susemgr;
 server.
After the first successful operation on a client <emphasis>such as execution of a remote command or installation of a
     package or patch</emphasis> this information will automatically be corrected.
This may take a few hours.</simpara>
</important>
</section>
<section xml:id="_upgrading_a_susemgrproxy_from_3_to_3_1"><title>Upgrading a &susemgrproxy; from 3 to 3.1</title><simpara>In most situations upgrading the proxy will be your preferred solution as this retains all cached packages.
Selecting this route saves time especially regarding proxies connected to &susemgr;
server via low-bandwith links.
This upgrade is similar to a standard client migration.</simpara>
<warning>
<title>Synchronizing Target Channels</title>
<simpara>Before successfully initializing the product migration, you first must make sure that the migration target channels are completely mirrored.
For the upgrade to &susemgr;
 3.1 Proxy, at least the <literal role="systemitem">SUSE Linux
     Enterprise Server 12 SP3</literal>
 base channel with the <literal role="systemitem">SUSE Manager Proxy 3.1</literal>
 child channel for your architecture is required.</simpara>
</warning>
<orderedlist numeration="arabic">
<title>Procedure: Migrating Proxy to 3.1</title>
<listitem>
<para>Direct your browser to the &susemgr;{webui} where your proxy is registered, and login.</para>
</listitem>
<listitem>
<para>On the <menuchoice><guimenu>Systems</guimenu> <guisubmenu>Systems</guisubmenu> <guimenuitem>Proxy</guimenuitem></menuchoice> page select your proxy client system from the table.</para>
<figure>
<title>&susemgr;Proxy Details Page <anchor xml:id="_fig_proxy_old_details"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/suma_proxy_old_details_page.png"/>
</imageobject>
<textobject><phrase>suma proxy old details page</phrase></textobject>
</mediaobject>
</figure>
</listitem>
<listitem>
<para>On the system&#8217;s detail page (<xref linkend="_fig_proxy_old_details"/>) select the <guimenu>Software</guimenu> tab, then the <guimenu>SP Migration</guimenu> tab (<xref linkend="_fig_proxy_old_spmigr"/>).</para>
<figure>
<title>SP Migration Page <anchor xml:id="_fig_proxy_old_spmigr"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/suma_proxy_old_details_spmigration.png"/>
</imageobject>
<textobject><phrase>suma proxy old details spmigration</phrase></textobject>
</mediaobject>
</figure>
</listitem>
<listitem>
<para>On <xref linkend="_fig_proxy_old_spmigr"/> you will see the installed products listed on your proxy client, and the available target products. Select the wanted <guimenu>Target Products</guimenu> , which include <literal role="systemitem">SUSE Linux Enterprise Server 12 SP3</literal> and <literal role="systemitem">SUSE Manager Proxy 3.1</literal> .</para>
<figure>
<title>SP Migration Target <anchor xml:id="_fig_proxy_migration_target"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/suma_proxy_migration_target.png"/>
</imageobject>
<textobject><phrase>suma proxy migration target</phrase></textobject>
</mediaobject>
</figure>
<simpara>Then confirm with <guimenu>Select Channels</guimenu>
.</simpara>
<figure>
<title>SP Migration Channels <anchor xml:id="_fig_proxy_migration_channels"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/suma_proxy_migration_channels.png"/>
</imageobject>
<textobject><phrase>suma proxy migration target</phrase></textobject>
</mediaobject>
</figure>
</listitem>
<listitem>
<para>On <xref linkend="_fig_proxy_migration_channels"/>, <guimenu>Schedule Migration</guimenu> , and then <guimenu>Confirm</guimenu> .</para>
</listitem>
</orderedlist>
<simpara>Check the <guimenu>System Status</guimenu>
 on the system&#8217;s details when the migration is done.</simpara>
<figure>
<title>Migrated &susemgrproxy;System <anchor xml:id="_fig_proxy_migrated"/></title>
<mediaobject>
<imageobject>
<imagedata fileref="./images/suma_proxy_migrated.png"/>
</imageobject>
<textobject><phrase>suma proxy migrated</phrase></textobject>
</mediaobject>
</figure>
<note>
<title>Checking <literal>refresh_pattern</literal> in <filename>/etc/squid/squid.conf</filename></title>
<simpara>If you migrate from an early &susemgrproxy;
 3.0 add the following <literal>refresh_pattern</literal> to <filename>/etc/squid/squid.conf</filename>
:</simpara>
<screen># salt minions get the repodata via a different URL
refresh_pattern /rhn/manager/download/.*/repodata/.*$ 0 1% 1440 ignore-no-cache reload-into-ims refresh-ims</screen>
</note>
<simpara>Finally consider to schedule a reboot.</simpara>
</section>
</section>
<section xml:id="_advanced.topics.proxy.migration"><title>Migrating &susemgr;  2.1 Proxy to Version 3.1</title><simpara>For the migration of &susemgr;
 2.1 Proxies there are two possible approaches&#8212;&#8203;this section documents both approaches:</simpara>
<itemizedlist>
<listitem>
<para>Existing &susemgr; proxies may be replaced by newly installed and reconfigured proxies, see <xref linkend="_advanced.topics.proxy.migration.replace"/>. This is the recommended method.</para>
</listitem>
<listitem>
<para>Proxies may be auto-upgraded to version 3.1 by means of &yast; auto-installation, see <xref linkend="_advanced.topics.proxy.migration.upgrade"/>.</para>
</listitem>
</itemizedlist>
<tip>
<title>Order of Server and Proxy Migration</title>
<simpara>The recommended order for migrations is to first migrate the server and then the proxies.
A &susemgr;
 2.1 Proxy cooperates just fine with &susemgr;
 3.1.</simpara>
</tip>
<section xml:id="_advanced.topics.proxy.migration.replace"><title>Replacing a &susemgrproxy;</title><simpara>A &susemgrproxy;
is <literal>dumb</literal> in the sense that it does not contain any information about the clients which are connected to it.
A &susemgrproxy;
 can therefore be replaced by a new one.
The replacement proxy must have the same name and IP address as its predecessor.</simpara>
<simpara>In order to replace a &susemgrproxy;
and keeping the clients registered to the proxy leave the old proxy in &susemgr;
.
Create a reactivation key for this system and then register the new proxy using the reactivation key.
If you do not use the reactivation key, you will need to re-registered all the clients against the new proxy.</simpara>
<orderedlist xml:id="_proc.advanced.topics.proxy.migration21.replace" numeration="arabic">
<title>Procedure: Replacing a &susemgrproxy;and Keeping the ClientsRegistered</title>
<listitem>
<para>Before starting the actual migration procedure, save the important data from the old proxy. Copy the data to a central place that also the new server can access:</para>
<itemizedlist>
<listitem>
<para>Copy the scripts that are still needed.</para>
</listitem>
<listitem>
<para>Copy the activation keys from the existing server. Of course, it is always better to re-create the keys.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Shutdown the server.</para>
</listitem>
<listitem>
<para>Install a new &susemgr; 3.1 Proxy, see <xref linkend="_at.manager.proxy.inst_and_clients"/>.</para>
<important>
<title>Proxy Installation and Client Connections</title>
<simpara>During the installation of the proxy, clients will not be able to reach the &susemgr;
server.
After a &susemgrproxy;
system has been deleted from the systems list, all clients connected to this proxy will be (incorrectly) listed as <literal>directly
       connected</literal> to the &susemgr;
 server.
After the first successful operation on a client <emphasis>such as execution of a
       remote command or installation of a package or patch</emphasis> this information will automatically be corrected.
This may take a few hours.</simpara>
</important>
</listitem>
<listitem>
<para>In the SUSE Manager &webui; select the newly installed &susemgrproxy; and delete it from the systems list.</para>
</listitem>
<listitem xml:id="_step.at.proxy.migration.replace.react">
<para>In the &webui; , create a reactivation key for the old proxy system: On the System Details of the old proxy click <guimenu>Reactivation</guimenu> . Then click <guimenu>Generate New Key</guimenu> , and remember it (write it on a piece of paper or copy it to the clipboard).  For more information about reactivation keys, see <xref linkend="_s5_sm_system_details_react"/>.</para>
</listitem>
<listitem>
<para>After the installation of the new proxy, perform the following actions (if needed):</para>
<itemizedlist>
<listitem>
<para>Copy the centrally saved data back to the new proxy system.</para>
</listitem>
<listitem>
<para>Install any other needed software.</para>
</listitem>
<listitem>
<para>If the proxy is also used for autoinstallation, do not forget to setup TFTP synchronization.</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</section>
<section xml:id="_advanced.topics.proxy.migration.upgrade"><title>Upgrading a &susemgrproxy; from 2.1 to 3.1</title><simpara>In other situations upgrading the proxy will be the preferred solution as it retains all cached packages.
This route saves time especially regarding proxies connected to a &susemgr;
server via low-bandwith links.
This upgrade can be automated by using the &yast;
auto-installation feature.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Upgrading &susemgrproxy;from 2.1 to 3.1</title>
<listitem>
<para>Create an auto-installable distribution based on SLES 12 SP3. &susemgr; 3.1 Proxy is an Add-On for SLES 12 SP3. Refer to the <xref linkend="_ref.webui.systems.autoinst"/> on creating an auto-installable distribution.</para>
</listitem>
<listitem>
<para>To start the auto-installation of a proxy, some additional packages must be installed that are only available in the &susemgr; Tools channel. These tools were not available for proxies when in the past the system was shipped as an appliance. To gain access to the required packages for use with proxies, the underlying SLES 11 SP3 channel (<literal role="systemitem">SLES11-SP3-SUSE-Manager-Tools</literal> ) needs to be cloned and assigned to the to-be-upgraded proxies. After these steps have been completed, create an auto-installation profile.</para>
</listitem>
</orderedlist>
<simpara>In the following example you will see an auto-install profile.
The label <literal>Proxy31</literal> is used both for the auto-installable distribution as well as for the auto-install profile.
Use the following auto-installation as template and create the auto-installation profile by uploading the edited file:</simpara>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns"
         xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;general&gt;
  $SNIPPET('spacewalk/sles_no_signature_checks')
    &lt;mode&gt;
      &lt;confirm config:type="boolean"&gt;false&lt;/confirm&gt;
    &lt;/mode&gt;
  &lt;/general&gt;
  &lt;add-on&gt;
    &lt;add_on_products config:type="list"&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sles12-sp3-updates-x86_64/Proxy31&lt;/media_url&gt;
        &lt;name&gt;SLES12 SP3 Updates&lt;/name&gt;
        &lt;product&gt;SLES12-SP3&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sle-manager-tools12-pool-x86_64-sp3/Proxy31&lt;/media_url&gt;
        &lt;name&gt;SLE12 Manager Tools Pool&lt;/name&gt;
        &lt;product&gt;SLES12&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sle-manager-tools12-updates-x86_64-sp3/Proxy31&lt;/media_url&gt;
        &lt;name&gt;SLE12 Manager Tools Updates&lt;/name&gt;
        &lt;product&gt;SLES12&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/suse-manager-proxy-3.1-pool-x86_64/Proxy31&lt;/media_url&gt;
        &lt;name&gt;SLE12 Proxy 3.1 Pool&lt;/name&gt;
        &lt;product&gt;SLES12&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
        &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/suse-manager-proxy-3.1-updates-x86_64/Proxy31&lt;/media_url&gt;
        &lt;name&gt;SLE12 Proxy 3.1 Update&lt;/name&gt;
        &lt;product&gt;SLES12&lt;/product&gt;
        &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;/listentry&gt;
    &lt;/add_on_products&gt;
  &lt;/add-on&gt;
  &lt;upgrade&gt;
    &lt;only_installed_packages config:type="boolean"&gt;false&lt;/only_installed_packages&gt;
    &lt;stop_on_solver_conflict config:type="boolean"&gt;true&lt;/stop_on_solver_conflict&gt;
  &lt;/upgrade&gt;
  &lt;backup&gt;
    &lt;sysconfig config:type="boolean"&gt;true&lt;/sysconfig&gt;
    &lt;modified config:type="boolean"&gt;true&lt;/modified&gt;
    &lt;remove_old config:type="boolean"&gt;false&lt;/remove_old&gt;
  &lt;/backup&gt;
  &lt;networking&gt;
    &lt;keep_install_network config:type="boolean"&gt;true&lt;/keep_install_network&gt;
    &lt;start_immediately config:type="boolean"&gt;true&lt;/start_immediately&gt;
  &lt;/networking&gt;
  &lt;scripts&gt;
    &lt;pre-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;filename&gt;remove_initrd_koan.sh&lt;/filename&gt;
        &lt;source&gt;

        mount /dev/sda1 /mnt
        rm -f /mnt/initrd_koan
        umount /mnt

        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/pre-scripts&gt;
    &lt;chroot-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;filename&gt;migration_fix_script.sh&lt;/filename&gt;
        &lt;chrooted config:type="boolean"&gt;true&lt;/chrooted&gt;
        &lt;source&gt;&lt;![CDATA[ ln -sf /usr/share/rhn/RHN-ORG-TRUSTED-SSL-CERT /etc/pki/trust/anchors/
/usr/sbin/update-ca-certificates ]]&gt;
&lt;/source&gt;
      &lt;/script&gt;
    &lt;/chroot-scripts&gt;
    &lt;init-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;filename&gt;sles_register.sh&lt;/filename&gt;
        &lt;source&gt;

         $SNIPPET('spacewalk/sles_register')
         chmod 640 /etc/sysconfig/rhn/systemid
         chown root:www /etc/sysconfig/rhn/systemid
         systemctl enable squid
         systemctl start squid

        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/init-scripts&gt;
  &lt;/scripts&gt;
&lt;/profile&gt;</screen>
<simpara>Ensure all channels referenced in this file are available and fully synced.
Replace the label <literal>Proxy31</literal> with the correct reference chosen for your auto-installation profile.
It is recommended to create a new activation key, for example: <literal>1-sles12sp3</literal> which has the relevant channels assigned; later this key will be used to subscribe the upgraded proxy with the correct channels.
The following base channel should be assigned:</simpara>
<screen>SLES12-SP3-Pool</screen>
<simpara>Also include the following child channels:</simpara>
<screen>SLE-Manager-Tools12-Pool
SLE-Manager-Tools12-Updates
SLES12-SP3-Updates
SUSE-Manager-Proxy-3.1-Pool
SUSE-Manager-Proxy-3.1-Updates</screen>
<simpara>In <literal>Kernel Options</literal> enter the following value:</simpara>
<screen>autoupgrade=1 Y2DEBUG=1</screen>
<simpara>The debug setting is not required but can help investigate problems in case something goes wrong; the <literal role="parameter">autoupgrade</literal> parameter is vital! Do not remove it.</simpara>
<simpara>Save your changes then click on "Variables" and enter the following value:</simpara>
<screen>registration_key=1-sles12sp3</screen>
<simpara>Specify the name of the key which has all respective channels assigned to it.
The auto-install file contains a script named <command>remove_initrd_koan.sh</command>.
In this script you should specify the device name of your <filename>/boot</filename>
 partition.</simpara>
<note>
<title>remove_initrd_koan.sh</title>
<simpara>The purpose of this script is to act as a workaround for the following problem: During installation the initrd of the installation media (SLES12SP3) is in use.
This initrd is rather large (around 50 MB), so there is not enough space left when the new kernel is being installed.
Therefore this script deletes the initial ramdisk file once it has been booted.
The partition of your boot partition might differ, so it should be explicitly specified in the autoinstall file.</simpara>
</note>
<simpara>During auto-installation this script attempts to delete the initial ramdisk file once it has booted.
Your boot partition may differ, so ensure it is explicitly specified within the auto-install file.</simpara>
<simpara>If this step is bypassed or mixed up (for example: specifying a wrong value) it&#8217;s fine.
During installation of the new kernel, &yast;
will detect that there is not enough space available and will stop.
You may switch to another console (there is a shell running on virtual console 2) and reclaim some disk space by issuing the command:</simpara>
<screen>rm /mnt/boot/initrd_koan</screen>
<simpara>When you have completed this step, switch back to the console where &yast;
is running (console 7) and click <guimenu>Retry</guimenu>
.
Installation of the kernel will continue and succeed.
The system will reboot, a few automated init scripts will run and the proxy will be upgraded to the &susemgr;
 3.1 based on SLES12SP3 and will be fully functional.</simpara>
</section>
</section>
</chapter>
<chapter xml:id="_advanced.topics.security"><title>Security</title><section xml:id="_setup_a_minion_to_master_validation_fingerprint"><title>Setup a Minion to Master Validation Fingerprint</title><simpara>In highly secure network configurations you may wish to ensure your minions are connecting a specific master.
To setup validation from minion to master enter the masters fingerprint within the <filename>/etc/salt/minion</filename>
 configuration file.
See the following procedure:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>On the master enter the following command as root and note the fingerprint:</para>
<screen>salt-key -F master</screen>
<simpara>On your minion, open the minion configuration file located in <filename>/etc/salt/minion</filename>
.
Uncomment the following line and enter the masters fingerprint replacing the example fingerprint:</simpara>
<screen>master_finger: 'ba:30:65:2a:d6:9e:20:4f:d8:b2:f3:a7:d4:65:11:13'</screen>
</listitem>
<listitem>
<para>Restart the salt-minion service:</para>
<screen># systemctl restart salt-minion</screen>
</listitem>
</orderedlist>
<simpara>For more information on configuring security from a minion see: <link xl:href="https://docs.saltstack.com/en/latest/ref/configuration/minion.html">https://docs.saltstack.com/en/latest/ref/configuration/minion.html</link></simpara>
</section>
</chapter>
<chapter xml:id="_susemgr_in_the_public_cloud_susemgr_server_and_susemgr_proxy_in_the_public_cloud"><title>&susemgr; in the Public Cloud</title><subtitle>&susemgr; Server and &susemgr; Proxy in the Public Cloud</subtitle><info><abstract>
<simpara>&susemgr;
delivers best-in-class Linux server management capabilities.
For detailed information about the product please refer to the <link xl:href="https://www.suse.com/documentation/suse_manager">SUSE
     Manager</link> documentation.</simpara>
<simpara>The &susemgr;
Server and &susemgr;
Proxy images published by SUSE in selected Public Cloud environments are provided as Bring Your Own Subscription (BYOS) images. &susemgr;
Server instances need to be registered with the SUSE Customer Center (SCC). Subscriptions of &susemgr;
Proxy instances are handled through their parent &susemgr;
Server.
After an instance is launched, &susemgr;
needs to be set up and configured following the procedure in the &susemgr;
documentation.</simpara>
</abstract></info>
<section xml:id="_instance_requirements"><title>Instance Requirements</title><simpara>Select an instance size that meets the system requirements as documented in the &susemgr;
documentation.</simpara>
<itemizedlist>
<listitem>
<para>Minimal main memory: &gt;12G</para>
</listitem>
<listitem>
<para>The &susemgr; setup procedure performs a Forward-confirmed reverse DNS lookup. This must succeed in order for the setup procedure to complete successfully and for &susemgr; to operate as expected. Therefore it is important that the hostname and IP configuration be performed prior to running the &susemgr; setup procedure.</para>
</listitem>
<listitem>
<para>&susemgr; Server and &susemgr; Proxy instances are expected to run in a network configuration that provides you control over DNS entries and that is shielded from the Internet at large. Within this network configuration DNS (Domain Name Service) resolution must be provided, such that <literal>hostname -f</literal> returns the FQDN (Full Qualified Domain Name). The DNS resolution is not only important for the &susemgr; Server procedure but is also important when clients are configured to be managed via &susemgr; . Configuring DNS is Cloud Framework dependent, please refer to the cloud service provider documentation for detailed instructions.</para>
</listitem>
<listitem>
<para>Minimal free disk space for &susemgr; 15G.</para>
<simpara>For Public Cloud instances we recommend that the repositories and the &susemgr;
Server database, and respectively the &susemgr;
Proxy squid cache, be located on an external virtual disk.
The details for this setup are provided in <xref linkend="_using_separate_storage_volume"/>.</simpara>
<simpara>Storing the database and the repositories on an external virtual disk ensures that the data is not lost should the instance need to be terminated for some reason.</simpara>
</listitem>
</itemizedlist>
<simpara>Please ensure that the selected instance type matches the requirements listed above.
Although we recommend that the database and the repositories are stored on a separate device it is still recommended to set the root volume size of the instance to 20G.</simpara>
</section>
<section xml:id="_setup"><title>Setup</title><orderedlist numeration="arabic">
<listitem>
<para>Run an instance of the &susemgr; Server or &susemgr; Proxy image as published by SUSE.</para>
<simpara>The images are identifiable by the suse, manager, server or proxy, and byos keywords in each public cloud environment.</simpara>
<simpara>The &susemgr;
instance must run in a network access restricted environment such as the private subnet of a VPC or with an appropriate firewall setting such that it can only be accessed by machines in the IP ranges you use.
A generally accessible &susemgr;
instance violates the terms of the &susemgr;
EULA.
Access to the web interface of SUSE Manager requires https.</simpara>
</listitem>
<listitem>
<para>Setup the hostname as follows:</para>
<simpara>&susemgr;
requires a stable and reliable hostname and does not take kindly to hostname changes.
All commands provided need to be executed as the <emphasis role="strong">root</emphasis> user.
.. Disable hostname setup in the dhcp configuration file: <filename>/etc/sysconfig/network/dhcp</filename></simpara>
<simpara>+</simpara>
<screen>DHCLIENT_SET_HOSTNAME="no"</screen>
<orderedlist numeration="loweralpha">
<listitem>
<para>Set the hostname to a name of your choice. Please note it is important to provide the <replaceable>system name</replaceable> and not the <replaceable>fully qualified hostname</replaceable> to the <filename>hostnamectl</filename> command.</para>
<simpara>It is expected that the Fully Qualified Domain Name (FQDN) is set by the cloud framework; for example if  <emphasis role="strong">cloud_instance.cloud.net</emphasis> is the fully qualified name than <emphasis role="strong">cloud_instance</emphasis> is the system name and <emphasis role="strong">cloud.net</emphasis> is the domain name.</simpara>
<simpara>In the following example we will change the system name to <emphasis role="strong">suma</emphasis></simpara>
<screen>$ hostnamectl set-hostname suma</screen>
<simpara>The fully qualified hostname is now locally set to <emphasis role="strong">suma.cloud.net</emphasis>.
Once the hostname is set locally a DNS entry needs to be created in your network environment such that domain name resolution works properly.</simpara>
<simpara>Alternatively to force proper resolution of the name on the &susemgr;
system you may alter the <filename>/etc/hosts</filename>
file as follows:</simpara>
<screen>$ echo "${local_address} suma.cloud.net suma" &gt;&gt; /etc/hosts</screen>
<simpara>The current value for the <replaceable>local_address</replaceable>, can be obtained from the public cloud Web console or from within a terminal session as follows:
<emphasis role="strong">*</emphasis> Obtain local ip address from within Amazon EC2 instance</simpara>
<simpara>+</simpara>
<screen>$ ec2metadata --local-ipv4</screen>
<itemizedlist mark="listing">
<listitem>
<para>Obtain local ip address from within Google Compute Engine instance</para>
<screen>$ gcemetadata --query instance --network-interfaces --ip</screen>
</listitem>
<listitem>
<para>Obtain local ip address from within Microsoft Azure instance</para>
<screen>$ azuremetadata --internal-ip</screen>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<simpara>Note that forcing the DNS resolution to work via modification of the <filename>/etc/hosts</filename>
file will allow the <filename>yast2 susemanager_setup</filename>
procedure to work.
However, if DNS resolution is not properly configured this also implies that any client that is to be managed via this &susemgr;
instance must also receive the same modification to <filename>/etc/hosts</filename>
.</simpara>
<simpara>+
One more aspect of hostname resolution is the <filename>/etc/resolv.conf</filename>
file.
Depending on the order of your setup, i.e.
if you started the &susemgr;
instance prior to setting up DNS services the file may not contain the appropriate <emphasis role="strong">search</emphasis> directive.
Double check that the proper search directive exists in <filename>/etc/resolv.conf</filename>
.
In our example the directive would be <emphasis role="strong">search cloud.net</emphasis>.
If the directive is missing add it to the file.</simpara>
<simpara>+
Reference information for the DNS record update is provided below.</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<para>For an update of the DNS records for the instance within the DNS service of your network environment, refer to the cloud service provider documentation for detailed instructions:</para>
<itemizedlist>
<listitem>
<para><link xl:href="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-dns.html"> DNS setup on Amazon EC2</link></para>
</listitem>
<listitem>
<para><link xl:href="https://cloud.google.com/compute/docs/networking"> DNS setup on Google Compute Engine</link></para>
</listitem>
<listitem>
<para><link xl:href="https://azure.microsoft.com/en-us/documentation/articles/dns-operations-recordsets"> DNS setup on Microsoft Azure</link></para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</listitem>
<listitem>
<para>Configure &susemgr;</para>
<itemizedlist>
<listitem>
<para>If you run a &susemgr; Server instance run YaST as shown below after the instance is launched, the external storage is attached and prepared according to <xref linkend="_using_separate_storage_volume"/>, and the DNS resolution is set up as described earlier.</para>
<screen>$ /sbin/yast2 susemanager_setup</screen>
<simpara>Note that the setup of &susemgr;
from this point forward does not differ from the documentation in the <link xl:href="https://www.suse.com/documentation/suse_manager">SUSE
Manager Guide</link>.</simpara>
<simpara>The &susemgr;
setup procedure in YaST is designed as a one pass process with no rollback or cleanup capability.
Therefore, if the setup procedure is interrupted or ends with an error, it is not recommended to attempt a recovery as a reapate of the setup process or attempts to manually "fix" the configuration are most likely to fail and result in a broken &susemgr;
installation.
In case of any errors we recommend to start a new instance in order to run a fresh setup procedure on a clean system.</simpara>
<simpara>If you are prompted with a message that there is not enough space available for the setup of &susemgr;
verify that your root volume is at least 20GB and double check that the instructions in <xref linkend="_using_separate_storage_volume"/> had the desired effects.</simpara>
<simpara>&susemgr;
Server for the Public Cloud comes with a bootstrap data module pre-installed that contains optimized package lists for bootstrapping instances started from SUSE Linux Enterprise images published by SUSE.
If you intend to register such an instance, make sure when creating the bootstrap repository you run the mgr-create-bootstrap-repo script as follows:</simpara>
<screen>$ mgr-create-bootstrap-repo --datamodule=mgr_pubcloud_bootstrap_data -c SLE-12-SP1-x86_64</screen>
<simpara>The above example creates a bootstrap repository suitable for SUSE Linux Enterprise Server 12 SP1 instances.
See <link xl:href="https://www.suse.com/documentation/suse-manager-3/book.suma.getting-started/data/create_tools_repository.html">
Creating the SUSE Manger Tools Repository</link> for more information on bootstrapping.</simpara>
<simpara>Prior to registering instances started from on demand images remove the following packages from the instance to be registered:
&#8230;&#8203; cloud-regionsrv-client
&#8230;&#8203; <emphasis role="strong">For Amazon EC2</emphasis></simpara>
<simpara>+
regionServiceClientConfigEC2</simpara>
<simpara>+
regionServiceCertsEC2</simpara>
<orderedlist numeration="lowerroman">
<listitem>
<para><emphasis role="strong">For Google Compute Engine</emphasis></para>
<simpara>cloud-regionsrv-client-plugin-gce</simpara>
<simpara>regionServiceClientConfigGCE</simpara>
<simpara>regionServiceCertsGCE</simpara>
</listitem>
<listitem>
<para><emphasis role="strong">For Microsoft Azure</emphasis></para>
<simpara>regionServiceClientConfigAzure</simpara>
<simpara>regionServiceCertsAzure</simpara>
</listitem>
</orderedlist>
</listitem>
</itemizedlist>
<simpara>If these packages are not removed it is possible to create interference between the repositories provided by &susemgr;
and the repositories provided by the SUSE operated update infrastructure.</simpara>
<simpara>+
Additionally remove the line from the <filename>/etc/hosts</filename>
file that contains the <emphasis role="strong">susecloud.net</emphasis> reference.</simpara>
<itemizedlist>
<listitem>
<para>If you run a &susemgr; Proxy instance</para>
<simpara>Launch the instance, optionally with external storage configured.
If you use external storage (recommended), prepare it according to <xref linkend="_using_separate_storage_volume"/>.
It is recommended but not required to prepare the storage before configuring &susemgr;
proxy, as the suma-storage script will migrate any existing cached data to the external storage.
After preparing the instance, register the system with the parent SUSE Manager, which could be a &susemgr;
Server or another &susemgr;
Proxy.
See the <link xl:href="https://www.suse.com/documentation/suse-manager-3/singlehtml/suse_manager21/book_susemanager_proxyquick/book_susemanager_proxyquick.html"> SUSE Manager Proxy Setup guide</link> for details.
Once registered, run</simpara>
<screen>$ /usr/sbin/configure-proxy.sh</screen>
<simpara>to configure your &susemgr;
Proxy instance.</simpara>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>After the completion of the configuration step, &susemgr; should be functional and running. For &susemgr; Server, the setup process created an administrator user with following user name:</para>
<itemizedlist>
<listitem>
<para>User name: <literal>admin</literal></para>
<table frame="all" rowsep="1" colsep="1">
<title>Account credentials for admin user</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33.3333*"/>
<colspec colname="col_2" colwidth="33.3333*"/>
<colspec colname="col_3" colwidth="33.3334*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Amazon EC2</simpara></entry>
<entry align="left" valign="top"><simpara>Google Compute Engine</simpara></entry>
<entry align="left" valign="top"><simpara>Microsoft Azure</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara><replaceable>Instance-ID</replaceable></simpara></entry>
<entry align="left" valign="top"><simpara><replaceable>Instance-ID</replaceable></simpara></entry>
<entry align="left" valign="top"><simpara><replaceable>Instance-Name</replaceable><emphasis role="strong">-suma</emphasis></simpara></entry>
</row>
</tbody>
</tgroup>
</table>
<simpara>The current value for the <replaceable>Instance-ID</replaceable> or <replaceable>Instance-Name</replaceable> in case of the Azure Cloud, can be obtained from the public cloud Web console or from within a terminal session as follows:
** Obtain instance id from within Amazon EC2 instance</simpara>
<simpara>+</simpara>
<screen>$ ec2metadata --instance-id</screen>
<itemizedlist mark="listing">
<listitem>
<para>Obtain instance id from within Google Compute Engine instance</para>
<screen>$ gcemetadata --query instance --id</screen>
</listitem>
<listitem>
<para>Obtain instance name from within Microsoft Azure instance</para>
<screen>$ azuremetadata --instance-name</screen>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
<simpara>After logging in through the &susemgr;
Server Web UI, <emphasis role="strong">change</emphasis> the default password.</simpara>
<simpara>+
{susemgr}
Proxy does not have administration Web interface itself.
It can be managed through its parent &susemgr;
Server.</simpara>
</listitem>
</orderedlist>
<section xml:id="_using_separate_storage_volume"><title>Using Separate Storage Volume</title><simpara>We recommend that the repositories and the database for &susemgr;
be stored on a virtual storage device.
This best practice will avoid data loss in cases where the &susemgr;
instance may need to be terminated.
These steps <emphasis role="strong">must</emphasis> be performed <emphasis role="strong">prior</emphasis> to running the YaST &susemgr;
 setup procedure.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Provision a disk device in the public cloud environment, refer to the cloud service provider documentation for detailed instructions. The size of the disk is dependent on the number of distributions and channels you intend to manage with &susemgr; . For sizing information refer to <link xl:href="https://www.suse.com/support/kb/doc.php?id=7015050">SUSE Manager sizing examples</link>. A rule of thumb is 25 GB per distribution per channel.</para>
</listitem>
<listitem>
<para>Once attached the device appears as Unix device node in your instance. For the following command to work this device node name is required. In many cases the attached storage appears as <emphasis role="strong">/dev/sdb</emphasis>. In order to check which disk devices exists on your system, call the following command:</para>
<screen>$ hwinfo --disk | grep -E "Device File:"</screen>
</listitem>
<listitem>
<para>With the device name at hand the process of re-linking the directories in the filesystem &susemgr; uses to store data is handled by the suma-storage script. In the following example we use <filename>/dev/sdb</filename> as the device name.</para>
<screen>$ /usr/bin/suma-storage /dev/sdb</screen>
<simpara>After the call all database and repository files used by SUSE Manager Server are moved to the newly created xfs based storage.
In case your instance is a &susemgr;
Proxy, the script will move the Squid cache, which caches the software packages, to the newly created storage.
The xfs partition is mounted below the path <filename>/manager_storage</filename>
.</simpara>
</listitem>
<listitem>
<para>Create an entry in /etc/fstab (optional)</para>
<simpara>Different cloud frameworks treat the attachment of external storage devices differently at instance boot time.
Please refer to the cloud environment documentation for guidance about the fstab entry.</simpara>
<simpara>If your cloud framework recommends to add an fstab entry, add the following line to the <emphasis role="strong">/etc/fstab</emphasis> file.</simpara>
<screen>/dev/sdb1 /manager_storage xfs defaults 1 1</screen>
</listitem>
</orderedlist>
</section>
</section>
<section xml:id="_registration_of_cloned_systems"><title>Registration of Cloned Systems</title><simpara>&susemgr;
treats systems (instances) with the same system ID as one.
This implies that one instance will mask another if the instances have the same system ID.
This situation occurs by launching multiple instances from the same image or when an image has been created from a running instance.
Thus prior to registering a new instance complete step 5.1 or 5.2,  depending on the distribution on the following wiki.</simpara>
<simpara><link xl:href="http://wiki.novell.com/index.php/SUSE_Manager/Register_Clones">http://wiki.novell.com/index.php/SUSE_Manager/Register_Clones</link></simpara>
</section>
</chapter>
<chapter xml:id="_advanced.topics.optimizing.scalability"><title>Optimization and Scalability</title><section xml:id="_optimizing.apache_tomcat"><title>Optimizing Apache and Tomcat</title><warning>
<title>Altering Apache and Tomcat Parameters</title>
<simpara>Apache and Tomcat Parameters should only be modified with support or consulting as these parameters can have severe and catastrophic performance impacts on your server when improperly adjusted.
SUSE will not be able to provide support for catastrophic failure when these advanced parameters are modified without consultation.
Tuning values for Apache httpd and Tomcat requires that you align these parameters with your server hardware.
Furthermore testing of these altered values should be performed within a test environment.</simpara>
</warning>
<section xml:id="_apache_s_httpd_maxclients_parameter"><title>Apache&#8217;s httpd MaxClients Parameter</title><simpara>The <literal role="parameter">MaxClients</literal> setting determines the number of Apache httpd processes, and thus limits the number of client connections that can be made at the same time (SUSE Manager uses the pre-fork MultiProcessing Modules). The default value for <literal role="parameter">MaxClients</literal> in SUSE Manager is 150.
If you need to set the <literal role="parameter">MaxClients</literal> value greater than 150, Apache httpd&#8217;s ServerLimit setting and Tomcat&#8217;s <literal role="parameter">maxThreads</literal> must also be increased accordingly (see below).</simpara>
<warning>
<simpara>The Apache httpd <literal role="parameter">MaxClients</literal> parameter must always be less or equal than Tomcat&#8217;s <literal role="parameter">maxThreads</literal> parameter!</simpara>
</warning>
<simpara>If the <literal role="parameter">MaxClients</literal> value is reached while the software is running, new client connections will be queued and forced to wait, this may result in timeouts.
You can check the Apache httpd&#8217;s <filename>error.log</filename>
 for details:</simpara>
<screen>[error] Server reached MaxClients setting, consider increasing the MaxClients setting</screen>
<simpara>The default <literal role="parameter">MaxClients</literal> parameter can be overridden on SUSE Manager by editing the <filename>server-tuning.conf</filename>
 file located at <literal role="systemitem">/etc/apache2/</literal>
.</simpara>
<simpara>Example <filename>server-tuning.conf</filename>
 file:</simpara>
<screen># prefork MPM
   &lt;IfModule prefork.c&gt;
           # number of server processes to start
           # http://httpd.apache.org/docs/2.2/mod/mpm_common.html#startservers
           StartServers         5
           # minimum number of server processes which are kept spare
           # http://httpd.apache.org/docs/2.2/mod/prefork.html#minspareservers
           MinSpareServers      5
           # maximum number of server processes which are kept spare
           # http://httpd.apache.org/docs/2.2/mod/prefork.html#maxspareservers
           MaxSpareServers     10
           # highest possible MaxClients setting for the lifetime of the Apache process.
           # http://httpd.apache.org/docs/2.2/mod/mpm_common.html#serverlimit
           ServerLimit        150
           # maximum number of server processes allowed to start
           # http://httpd.apache.org/docs/2.2/mod/mpm_common.html#maxclients
           MaxClients         150
           # maximum number of requests a server process serves
           # http://httpd.apache.org/docs/2.2/mod/mpm_common.html#maxrequestsperchild
           MaxRequestsPerChild  10000
   &lt;/IfModule&gt;</screen>
</section>
<section xml:id="_tomcat_s_maxthreads_parameter"><title>Tomcat&#8217;s maxThreads Parameter</title><simpara>Tomcat&#8217;s <literal role="parameter">maxThreads</literal> represents the maximum number of request processing threads that it will create.
This value determines the maximum number of simultaneous requests that it is able to handle.
All HTTP requests to the SUSE Manager server (from clients, browsers, XMLRPC API scripts, etc.) are handled by Apache httpd, and some of them are routed to Tomcat for further processing.
It is thus important that Tomcat is able to serve the same amount of simultaneous requests that Apache httpd is able to serve in the worst case.
The default value for SUSE Manager is 200 and should always be equal or greater than Apache httpd&#8217;s <literal role="parameter">MaxClients</literal>.
The <literal role="parameter">maxThreads</literal> value is located within the <filename>server.xml</filename>
 file located at <literal role="systemitem">/etc/tomcat/</literal>
.</simpara>
<simpara>Example relevant lines in <filename>server.xml</filename>
:</simpara>
<screen>&lt;Connector port="8009" protocol="AJP/1.3" redirectPort="8443" URIEncoding="UTF-8" address="127.0.0.1" maxThreads="200" connectionTimeout="20000"/&gt;
&lt;Connector port="8009" protocol="AJP/1.3" redirectPort="8443" URIEncoding="UTF-8" address="::1" maxThreads="200" connectionTimeout="20000"/&gt;</screen>
<note>
<title>Tuning Notes</title>
<simpara>When configuring Apache httpd&#8217;s <literal role="parameter">MaxClients</literal> and Tomcat&#8217;s <literal role="parameter">maxThreads</literal> parameters you should also take into consideration that each HTTP connection will need one or more database connections.
If the RDBMS is not able to serve an adequate amount of connections, issues will arise.
See the following equation for a rough calculation of the needed amount of database connections:</simpara>
<screen>((3 * java_max) +  apache_max + 60)</screen>
<simpara>Where:</simpara>
<itemizedlist>
<listitem>
<para>3 is the number of Java processes the server runs with pooled connections (Tomcat, Taskomatic and Search)</para>
</listitem>
<listitem>
<para>java_max is the maximum number of connections per Java pool (20 by default, changeable in <filename>/etc/rhn/rhn.conf</filename> via the hibernate.c3p0.max_size parameter)</para>
</listitem>
<listitem>
<para>apache_max is Apache httpd&#8217;s <literal role="parameter">MaxClients</literal></para>
</listitem>
<listitem>
<para>60 is the maximum expected number of extra connections for local processes and other uses</para>
</listitem>
</itemizedlist>
</note>
</section>
</section>
<section xml:id="_optimizing.big"><title>Big Scale Deployment (1000 Minions or More)</title><simpara>In the following sections find considerations about a big scale deployment.
In this context, a big scale compromises 1000 minions or more.</simpara>
<section xml:id="_optimizing.big.general"><title>General Recommendations</title><simpara>&suse;
recommends the following in a big scale &susemgr;
deployment:</simpara>
<itemizedlist>
<listitem>
<para>&susemgr; servers should have at least 8 recent &x86; cores, 32 GiB of RAM, and, most important, fast I/O devices such as at least an SSD (2 SSDs in RAID-0 are strongly recommended).</para>
</listitem>
<listitem>
<para>Proxies with many minions (hundreds) should have at least 2 recent &x86; cores and 16 GiB of RAM.</para>
</listitem>
<listitem>
<para>Use one &susemgrproxy; per 500-1000 clients. Keep into account that download time depends on network capacity. Here is a rough example calculation with physical link speed of 1 GB/s:</para>
<screen>400 Megabytes  *        3000       /      119 Megabyte/s        / 60
= 169 Minutes</screen>
<simpara>This is:</simpara>
<screen>Size of updates * Number of minions / Theoretical download speed / 60</screen>
</listitem>
<listitem>
<para>Depending on hardware you can accept hundreds of minion keys.</para>
</listitem>
<listitem>
<para>Plan time for onboarding minions&mdash; at least one hour per 1000 minions.</para>
</listitem>
<listitem>
<para>It is not recommended onboarding more than approx. 1000 minions directly to the &susemgr; server&mdash; proxies should be used instead. This is because every minion can use up to 3 TCP connections simultaneously, and too many TCP connections can cause performance issues.</para>
</listitem>
<listitem>
<para>If the following error appears in output of <command>dmesg</command>, you probably have an excessive number of minions attached to a single &susemgr; server or proxy for the ARP cache to contain all of their addresses:</para>
<screen>kernel: neighbour table overflow</screen>
<simpara>In that case, increase the ARP cache values via <literal role="systemitem">sysctl</literal>
, for example, by adding the following lines to <filename>/etc/sysctl.conf</filename>
:</simpara>
<screen>net.ipv4.neigh.default.gc_thresh1 = 4096
net.ipv4.neigh.default.gc_thresh2 = 8192
net.ipv4.neigh.default.gc_thresh3 = 16384
net.ipv4.neigh.default.gc_interval = 60
net.ipv4.neigh.default.gc_stale_time = 120</screen>
</listitem>
</itemizedlist>
<tip>
<title>Start Small and Scale Up</title>
<simpara>Always start small and scale up gradually.
Keep the server monitored in order to identify possible issues early.</simpara>
</tip>
</section>
<section xml:id="_optimizing.big.tuning"><title>Tuning Proposals</title><simpara>&suse;
proposes the following tuning settingsin a big scale &susemgr;
deployment:</simpara>
<itemizedlist>
<listitem>
<para>Increase Tomcat memory to face a long queue of Salt return results. Items in the Salt return queue might accumulate in a short time: Set 8 GiB instead of the current default 1 GiB.</para>
</listitem>
<listitem>
<para>Several RHN parameters should be changed from their defaults:</para>
<itemizedlist>
<listitem>
<para>The number of Taskomatic workers should be increased, and thus parallelizing work on a high number of separate jobs (onboarding, staging).</para>
</listitem>
<listitem>
<para>Quartz should check for runnable jobs more frequently to reduce latency (onboarding, staging, Action execution).</para>
</listitem>
<listitem>
<para>Tomcat&#8217;s Salt return result workers should be increased, and thus parallelizing work on a high number of Salt return results (patching).</para>
</listitem>
<listitem>
<para>The number of PostgreSQL connections available to Java applications (Tomcat, Taskomatic) should increase accordingly. Otherwise extra workers will starve waiting for a connection.</para>
</listitem>
<listitem>
<para>Salt&#8217;s presence ping timeouts should be increased because responses might come back later than the defaults.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Salt master worker threads should be increased to 100 from 15, and thus parallelizing more requests (otherwise Tomcat and Taskomatic workers will starve waiting for the API to do something).</para>
</listitem>
<listitem>
<para>Increasing the number of Salt master worker threads more requires more RAM and does not bring benefits. Apache maximum request time should be increased.</para>
</listitem>
</itemizedlist>
</section>
</section>
</chapter>
<chapter xml:id="_salt_ssh_integration"><title>Salt SSH Integration</title><simpara>Version 1, 2018-03-20</simpara>
<simpara>The following topic provides an overview of the <link xl:href="https://docs.saltstack.com/en/latest/topics/ssh/">Salt SSH</link> integration with SUSE Manager. This integration adds support for both ssh-push and ssh-push-tunnel connections for Salt minions.</simpara>

<section xml:id="ssh-push-overview"><title>SSH Push Overview</title><simpara>Like the traditional stack, Salt minions may use an ssh connection to manage minions in place of <link xl:href="https://docs.saltstack.com/en/latest/topics/transports/zeromq.html">Zeromq</link>. This additional functionality is based on Salt SSH. Salt SSH enables you to execute salt commands and states via ssh without ever needing to install a salt-minion.</simpara>
<simpara>When the server executes an action on a minion an ssh connection is made on demand. This connection differs from the always-connected mode used by minions managed via Zeromq.</simpara>
<simpara>In SUSE Manager there are two ssh-push methods. In both use cases the server initiates an ssh connection to the minion in order to execute a Salt call using <literal>salt-ssh</literal>. The difference in the two methods is how <literal>zypper/<emphasis>yum</emphasis></literal>  initially connects to the server repositories:</simpara>
<variablelist xml:id="zypper-connection-methods">
<title>zypper Connection Methods:</title>
<varlistentry>
<term>ssh-push</term>
<listitem>
<simpara>zypper works as usual. The http(s) connection to the server is created directly.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>ssh-push-tunnel</term>
<listitem>
<simpara>The server creates an http(s) connection through an ssh tunnel. The http(s) connection initiated by <literal>zypper</literal> is redirected through the tunnel by means of <literal>/etc/hosts</literal> aliasing (see below). This method should be used for in place firewall setups that block http(s) connections from a minion to the server.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="salt-ssh-integration"><title>Salt SSH Integration</title><simpara>As with all Salt calls, SUSE Manager invokes <literal>salt-ssh</literal> via the <literal>salt-api</literal>.</simpara>
<simpara>Salt SSH relies on a Roster to obtain details such as hostname, ports, and ssh parameters of an ssh minion. SUSE Manager keeps these details in the database and makes them available to Salt by generating a temporary Roster file for each salt-ssh call. The location of the temporary Roster file is supplied to salt-ssh using the <literal>--roster-file= option</literal>.</simpara>
<section xml:id="authentication-types"><title>Authentication</title><simpara>salt-ssh supports both password and key authentication. SUSE Manager uses both methods:</simpara>
<variablelist xml:id="password-and-key-authentication">
<title>Password and Key Authentication:</title>
<varlistentry>
<term>Bootstrapping Authentication</term>
<listitem>
<simpara>Password authentication is used only when bootstrapping. During the bootstrap step the key of the server is not authorized on the minion and therefore a password must be utilized for a connection to be made. The password is used transiently in a temporary roster file used for bootstrapping. This password is not stored.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Common Salt Call Authentication</term>
<listitem>
<simpara>All other common salt calls use key authentication. During the bootstrap step the ssh key of the server is authorized on the minion (added to a minion&#8217;s <literal>~/.ssh/authorized_keys</literal> file). Therefore subsequent calls no longer require a password.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_user_account_for_salt_ssh_calls"><title>User Account for salt-ssh Calls</title><simpara>The user for <literal>salt-ssh</literal> calls made by SUSE Manager is taken from the <literal>ssh_push_sudo_user</literal> setting. The default value of this is <literal>root</literal>.</simpara>
<simpara>If the value of <literal>ssh_push_sudo_user</literal> is not <literal>root</literal> then the <literal>--sudo</literal> options of <literal>salt-ssh</literal> are used.</simpara>
</section>
</section>
<section xml:id="_ssh_push_tunnel_http_s_redirection"><title>SSH Push Tunnel HTTP(s) Redirection</title><simpara>For the <literal>ssh-push-tunnel</literal> method the traffic originating from zypper/yum has to be redirected through an ssh tunnel in order to bypass any firewall blocking a direct connection from the minion to the server.</simpara>
<simpara>This is achieved by using port <literal>1233</literal> in the repo url:</simpara>
<screen>https://suma-server:1233/repourl...</screen>
<simpara>Next alias the suma-server hostname to localhost in /etc/hosts:</simpara>
<screen>127.0.0.1       localhost    suma-server</screen>
<simpara>The server creates a reverse ssh tunnel that connects <literal>localhost:1233</literal> on the minion to <literal>suma-server:443</literal> (<literal>ssh &#8230;&#8203; -R 1233:suma-server:443</literal>)</simpara>
<simpara>The result is that zypper/yum will actually connect to <literal>localhost:1233</literal> which is then forwarded to <literal>suma-server:443</literal> via the ssh tunnel.</simpara>
<simpara>This implies that zypper can contact the server only if the tunnel is open. This happens only when the servers executes an action on the minion. Manual zypper operations that require server connectivity are not possible in this case.</simpara>
</section>
<section xml:id="_suse_manager_salt_ssh_call_sequence"><title>SUSE Manager Salt SSH Call Sequence</title><orderedlist numeration="arabic">
<listitem>
<para>Prepare the Salt Roster for the call</para>
<orderedlist numeration="loweralpha">
<listitem>
<para>Create remote port forwarding option IF the contact method is ssh-push-tunnel</para>
</listitem>
<listitem>
<para>Compute the ProxyCommand IF the minion is connected through a proxy</para>
</listitem>
<listitem>
<para>create Roster content:</para>
<itemizedlist>
<listitem>
<para><literal>hostname</literal></para>
</listitem>
<listitem>
<para><literal>user</literal></para>
</listitem>
<listitem>
<para><literal>port</literal></para>
</listitem>
<listitem>
<para><literal>remote_port_forwards</literal>: The remote port forwarding ssh option</para>
</listitem>
<listitem>
<para><literal>ssh_options</literal>: other ssh options:</para>
<itemizedlist>
<listitem>
<para><literal>ProxyCommand</literal>: If the minion connects through a SUMA proxy</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para><literal>timeout</literal>: default 180s</para>
</listitem>
<listitem>
<para><literal>minion_opts</literal>:</para>
<itemizedlist>
<listitem>
<para><literal>master</literal>: set to the minion id if contact method is ssh-push-tunnel</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</listitem>
<listitem>
<para>create a temporary Roster file</para>
</listitem>
<listitem>
<para>execute a synchronous salt-ssh call via the API</para>
</listitem>
<listitem>
<para>remove the temporary Roster file</para>
</listitem>
</orderedlist>
<simpara><emphasis role="strong">Additional Information:</emphasis></simpara>
<simpara><link xl:href="https://github.com/SUSE/spacewalk/blob/Manager/java/code/src/com/suse/manager/webui/services/impl/SaltSSHService.java">SaltSSHService.callSyncSSH</link></simpara>
</section>
<section xml:id="_bootstrap_process_sequence"><title>Bootstrap Process Sequence</title><simpara>Bootstrapping minions uses salt-ssh under the hood. This happens for both regular and ssh minion.</simpara>
<simpara>The bootstrap sequence is a bit different than the regular salt-ssh call:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>For a regular minion generate and pre-authorize the Salt key of the minion</para>
</listitem>
<listitem>
<para>If this is an ssh minion and a proxy was selected retrieve the ssh public key of the proxy using the mgrutil.chain_ssh_cmd runner. The runner copies the public key of the proxy to the server using ssh. If needed it can chain multiple ssh commands to reach the proxy across multiple hops.</para>
</listitem>
<listitem>
<para>Generate pillar data for bootstrap. Pillar data contains:</para>
<variablelist>
<varlistentry>
<term>mgr_server</term>
<listitem>
<simpara>The hostname of the SUSE Manager server</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>minion_id</term>
<listitem>
<simpara>The hostname of the minion to bootstrap</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>contact_method</term>
<listitem>
<simpara>The connection type</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>mgr_sudo_user</term>
<listitem>
<simpara>The user for salt-ssh</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>activation_key</term>
<listitem>
<simpara>If selected</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>minion_pub</term>
<listitem>
<simpara>The public minion key that was pre-authorized</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>minion_pem</term>
<listitem>
<simpara>The private minion key that was pre-authorized</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>proxy_pub_key</term>
<listitem>
<simpara>The public ssh key that was retrieved from the proxy if the target is an ssh minion and a proxy was selected</simpara>
</listitem>
</varlistentry>
</variablelist>
</listitem>
<listitem>
<para>If contact method is <literal>ssh-push-tunnel</literal> fill the remote port forwarding option</para>
</listitem>
<listitem>
<para>if the minion connects through a SUMA proxy compute the <literal>ProxyCommand</literal> option. This depends on the path used to connect to the proxy, e.g. server &#8594; proxy1 &#8594; proxy2 &#8594; minion</para>
</listitem>
<listitem>
<para>generate the roster for bootstrap into a temporary file. This contains:</para>
<itemizedlist>
<listitem>
<para><literal>hostname</literal></para>
</listitem>
<listitem>
<para><literal>user</literal></para>
</listitem>
<listitem>
<para><literal>password</literal></para>
</listitem>
<listitem>
<para><literal>port</literal></para>
</listitem>
<listitem>
<para><literal>remote_port_forwards</literal>: the remote port forwarding ssh option</para>
</listitem>
<listitem>
<para><literal>ssh_options</literal>: other ssh options:</para>
<itemizedlist>
<listitem>
<para><literal>ProxyCommand</literal> if the minion connects through a SUMA proxy</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para><literal>timeout</literal>: default 180s</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Via the Salt API execute:</para>
<screen>salt-ssh --roster-file=&lt;temporary_bootstrap_roster&gt; minion state.apply certs,&lt;bootstrap_state&gt;`</screen>
<note>
<simpara> &lt;bootstrap_state&gt; replaceable by <emphasis role="strong">bootstrap</emphasis> for regular minions or <emphasis role="strong">ssh_bootstrap</emphasis> for ssh minions.</simpara>
</note>
</listitem>
</orderedlist>
<simpara>The following image provides an overview of the Salt SSH bootstrap process.</simpara>
<figure>
<title>Salt SSH Bootstrap Process</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/salt-ssh-bootstrap-process.png"/>
</imageobject>
<textobject><phrase>salt ssh bootstrap process</phrase></textobject>
</mediaobject>
</figure>
<simpara><emphasis role="strong">Additional Information:</emphasis></simpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://github.com/SUSE/spacewalk/blob/Manager/java/code/src/com/suse/manager/webui/controllers/utils/RegularMinionBootstrapper.java">SSHMinionBootstrapper.java</link></para>
</listitem>
<listitem>
<para><link xl:href="https://github.com/SUSE/spacewalk/blob/Manager/java/code/src/com/suse/manager/webui/controllers/utils/SSHMinionBootstrapper.java">RegularMinionBootstrapper.java</link></para>
</listitem>
<listitem>
<para><link xl:href="https://github.com/SUSE/spacewalk/blob/Manager/susemanager-utils/susemanager-sls/salt/bootstrap/init.sls">bootstrap/init.sls</link></para>
</listitem>
<listitem>
<para><link xl:href="https://github.com/SUSE/spacewalk/blob/Manager/susemanager-utils/susemanager-sls/salt/ssh_bootstrap/init.sls">ssh_bootstrap/init.sls</link></para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_proxy_support"><title>Proxy Support</title><simpara>In order to make salt-ssh work with SUSE Managers proxies the ssh connection is chained from one server/proxy to the next. This is also know as multi-hop or multi gateway ssh connection.</simpara>
<figure>
<title>Salt SSH Proxy Multiple Hops</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/salt-ssh-proxy-multi-hop.png"/>
</imageobject>
<textobject><phrase>salt ssh proxy multi hop</phrase></textobject>
</mediaobject>
</figure>
<section xml:id="_the_proxycommand"><title>The ProxyCommand</title><simpara>In order to redirect the ssh connection through the proxies the ssh <literal>ProxyCommand</literal> option is used. This options invokes an arbitrary command that is expected to connect to the ssh port on the target host. The standard input and output of the command is used by the invoking ssh process to talk to the remote ssh daemon.</simpara>
<simpara>The ProxyCommand basically replaces the TCP/IP connection. It doesn&#8217;t do any authorization, encryption, etc. Its role is simply to create a byte stream to the remote ssh daemon&#8217;s port.</simpara>
<simpara>E.g. connecting to a server behind a gateway:</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/salt-ssh-proxycommand.png"/>
</imageobject>
<textobject><phrase>salt ssh proxycommand</phrase></textobject>
</mediaobject>
</informalfigure>
<note>
<simpara>In this example netcat (nc) is used to pipe port 22 of the target host into the ssh std i/o.</simpara>
</note>
</section>
<section xml:id="_salt_ssh_call_sequence_via_proxy"><title>Salt SSH Call Sequence via Proxy</title><orderedlist numeration="arabic">
<listitem>
<para>SUSE Manager initates the ssh connections as described above.</para>
</listitem>
<listitem>
<para>Additionally the ProxyCommand uses ssh to create a connection from the server to the minion through the proxies.</para>
</listitem>
</orderedlist>
<section xml:id="_twin_proxies_and_ssh_push"><title>Twin Proxies and SSH Push</title><simpara>The following example uses the ProxyCommand option with two proxies and the usual ssh-push method:</simpara>
<formalpara>
<title>Twin Proxies and ssh-push</title>
<para>
<programlisting language="bash" linenumbering="unnumbered"># 1
/usr/bin/ssh -i /srv/susemanager/salt/salt_ssh/mgr_ssh_id -o StrictHostKeyChecking=no -o User=mgrsshtunnel  proxy1
# 2
/usr/bin/ssh -i /var/lib/spacewalk/mgrsshtunnel/.ssh/id_susemanager_ssh_push -o StrictHostKeyChecking=no -o User=mgrsshtunnel -W minion:22  proxy2</programlisting>
</para>
</formalpara>
<orderedlist numeration="arabic">
<title>Steps</title>
<listitem>
<para>connect from the server to the first proxy</para>
</listitem>
<listitem>
<para>connect from the first proxy to the second and forward standard input/output on the client to minion:22 using the -W option.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/salt-ssh-push-push-plain-sequence.png"/>
</imageobject>
<textobject><phrase>salt ssh push push plain sequence</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_twin_proxies_and_ssh_push_tunnel"><title>Twin Proxies and SSH Push Tunnel</title><simpara>The following example uses the ProxyCommand option with two proxies over an ssh-push-tunnel connection:</simpara>
<programlisting language="bash" linenumbering="unnumbered"># 1
/usr/bin/ssh -i /srv/susemanager/salt/salt_ssh/mgr_ssh_id -o User=mgrsshtunnel  proxy1
# 2
/usr/bin/ssh -i /home/mgrsshtunnel/.ssh/id_susemanager_ssh_push -o User=mgrsshtunnel  proxy2
# 3
/usr/bin/ssh -i /home/mgrsshtunnel/.ssh/id_susemanager_ssh_push -o User=root -R 1233:proxy2:443 minion
# 4
/usr/bin/ssh -i /root/.ssh/mgr_own_id -W minion:22 -o User=root minion</programlisting>
<orderedlist numeration="arabic">
<title>Steps</title>
<listitem>
<para>Connect from the server to the first proxy.</para>
</listitem>
<listitem>
<para>Connect from the first proxy to the second.</para>
</listitem>
<listitem>
<para>connect from the second proxy to the minion and open an reverse tunnel (-R 1233:proxy2:443) from the minion to the https port on the second proxy.</para>
</listitem>
<listitem>
<para>Connect from the minion to itself and forward the std i/o of the server to the ssh port of the minion (-W minion:22). This is equivalent to ssh &#8230;&#8203; proxy2 netcat minion 22 and is needed because ssh doesn&#8217;t allow to have both the reverse tunnel (-R 1233:proxy2:443) and the standard i/o forwarding (-W minion:22) in the same command.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/salt-ssh-push-push-tunnel-sequence.png"/>
</imageobject>
<textobject><phrase>salt ssh push push tunnel sequence</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara><emphasis role="strong">Additional Information:</emphasis></simpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://github.com/SUSE/spacewalk/blob/Manager/java/code/src/com/suse/manager/webui/services/impl/SaltSSHService.java">SaltSSHService.sshProxyCommandOption</link></para>
</listitem>
</itemizedlist>
</section>
</section>
</section>
<section xml:id="_users_and_ssh_key_management"><title>Users and SSH Key Management</title><simpara>In order to connect to a proxy the parent server/proxy uses a specific user called <literal>mgrsshtunnel</literal>.</simpara>
<simpara>The ssh config <literal>/etc/ssh/sshd_config</literal> of the proxy will force the execution of <literal>`/usr/sbin/mgr-proxy-ssh-force-cmd</literal> when <literal>mgrsshtunnel</literal> connects.</simpara>
<simpara><literal>`/usr/sbin/mgr-proxy-ssh-force-cmd</literal> is a simple shell script that allows only the execution of <literal>scp</literal>, <literal>ssh</literal> or <literal>cat</literal> commands.</simpara>
<simpara>The connection to the proxy or minion is authorized using ssh keys in the following way:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>The server connects to the minion and to the first proxy using the key in <literal>`/srv/susemanager/salt/salt_ssh/mgr_ssh_id</literal>.</para>
</listitem>
<listitem>
<para>Each proxy has its own key pair in <literal>`/home/mgrsshtunnel/.ssh/id_susemanager_ssh_push</literal>.</para>
</listitem>
<listitem>
<para>Each proxy authorizes the key of the parent proxy or server.</para>
</listitem>
<listitem>
<para>The minion authorized its own key.</para>
</listitem>
</orderedlist>
<figure>
<title>Salt SSH Key Authorization Process</title>
<mediaobject>
<imageobject>
<imagedata fileref="images/salt-ssh-push-ssh-keys.png"/>
</imageobject>
<textobject><phrase>salt ssh push ssh keys</phrase></textobject>
</mediaobject>
</figure>
<simpara><emphasis role="strong">Additional Information:</emphasis></simpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://github.com/SUSE/spacewalk/blob/Manager/proxy/proxy/mgr-proxy-ssh-force-cmd">mgr-proxy-ssh-force-cmd</link></para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_repository_access_via_proxy"><title>Repository access via proxy</title><simpara>For both ssh-push and ssh-push-tunnel the minion connects to the proxy to retrieve packages and repo data.</simpara>
<simpara>The difference is how the connection works:</simpara>
<itemizedlist>
<listitem>
<para>In case of ssh-push, zypper or yum connect directly to the proxy using http(s). This assumes there&#8217;s not firewall between the minion and the proxy that would block http connections initiated by the minion.</para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/salt-ssh-push-repo-access.png"/>
</imageobject>
<textobject><phrase>salt ssh push repo access</phrase></textobject>
</mediaobject>
</informalfigure>
<itemizedlist>
<listitem>
<para>In case of ssh-push-tunnel, the http connection to the proxy is redirected through a reverse ssh tunnel.</para>
</listitem>
</itemizedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="images/salt-ssh-push-tunnel-repo-access.png"/>
</imageobject>
<textobject><phrase>salt ssh push tunnel repo access</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_proxy_setup"><title>Proxy setup</title><simpara>When the <literal>spacewalk-proxy</literal> package is installed on the proxy the user <literal>mgrsshtunnel</literal> is created if it doesn&#8217;t already exist.</simpara>
<simpara>During the initial configuration with <literal>configure-proxy.sh</literal> the following happens:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Generate a ssh key pair or import an existing one</para>
</listitem>
<listitem>
<para>Retrieve the ssh key of the parent server/proxy in order to authorize it on the proxy</para>
</listitem>
<listitem>
<para>Configure the <literal>sshd</literal> of the proxy to restrict the user <literal>mgrsshtunnel</literal></para>
</listitem>
</orderedlist>
<simpara>This configuration is done by the <literal>mgr-proxy-ssh-push-init</literal> script. This is called from <literal>configure-proxy.sh</literal> and the user doesn&#8217;t have to invoke it manually.</simpara>
<simpara>Retrieving the parent key is done by calling an HTTP endpoint on the parent server or proxy.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>First <literal>https//$PARENT/pub/id_susemanager_ssh_push.pub</literal> is tried. If the parent is proxy this will return the public ssh key of that proxy.</para>
</listitem>
<listitem>
<para>If a <literal>404</literal> is received then it&#8217;s assumed the parent is a server not a proxy and <literal><link xl:href="https://$PARENT/rhn/manager/download/saltssh/pubkey">https://$PARENT/rhn/manager/download/saltssh/pubkey</link></literal> is tried.</para>
<orderedlist numeration="loweralpha">
<listitem>
<para>If <literal>/srv/suseemanager/salt/salt_ssh/mgr_ssh_id.pub</literal> already exists on the server it&#8217;s returned</para>
</listitem>
<listitem>
<para>If the public key doesn&#8217;t exist (because <literal>salt-ssh</literal> has not been invoked yet) generate the key by calling the <literal>mgrutil.ssh_keygen</literal> runner</para>
</listitem>
</orderedlist>
</listitem>
</orderedlist>
<note>
<simpara>salt-ssh generates a key pair the first time it is invoked in
<literal>/srv/suseemanager/salt/salt_ssh/mgr_ssh_id</literal>. The previous sequence is needed in case a proxy is configured before salt-ssh was invoked for the first time.</simpara>
</note>
<simpara><emphasis role="strong">Additional Information:</emphasis></simpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://github.com/SUSE/spacewalk/blob/Manager/java/code/src/com/suse/manager/webui/controllers/SaltSSHController.java">com.suse.manager.webui.controllers.SaltSSHController</link></para>
</listitem>
<listitem>
<para><link xl:href="https://github.com/SUSE/spacewalk/blob/Manager/susemanager-utils/susemanager-sls/modules/runners/mgrutil.py">mgrutil.ssh_keygen</link></para>
</listitem>
<listitem>
<para><link xl:href="https://github.com/SUSE/spacewalk/blob/Manager/proxy/proxy/mgr-proxy-ssh-push-init">mgr-proxy-ssh-push-init</link></para>
</listitem>
<listitem>
<para><link xl:href="https://github.com/SUSE/spacewalk/blob/Manager/proxy/proxy/spacewalk-proxy.spec">spacewalk-proxy.spec</link></para>
</listitem>
</itemizedlist>
</section>
</chapter>
<chapter xml:id="_advanced.topics.monitoring.with.icinga"><title>Monitoring with Icinga</title><section xml:id="_introduction_3"><title>Introduction</title><simpara>This chapter provides guidance on the setup of an Icinga server using SLES {sles-version}{sp-version}
.
For more information, see the Official Icinga documentation: <link xl:href="http://docs.icinga.org/latest/en/">http://docs.icinga.org/latest/en/</link>.</simpara>
</section>
<section xml:id="_installation_and_basic_configuration"><title>Installation and Basic Configuration</title><simpara>Icinga packages are found in the <literal>SLE-Manager-Tools{sles-version}
-Updates
            x86_64</literal>.</simpara>
<tip>
<title>Icinga Installation Location</title>
<simpara>Do not install Icinga on the &susemgr;
server.
Install Icinga on a stand-alone &sle;
client.</simpara>
</tip>
<orderedlist numeration="arabic">
<title>Procedure: Installation and Basic Configuration</title>
<listitem>
<para>Register the new client with &susemgr; and subscribe it to the &susemgr; client and update channels. SLES {sles-version} and later include these channels by default.</para>
</listitem>
<listitem>
<para>Install the required Icinga packages on the new client:</para>
<screen>zypper in icinga icinga-idoutils-pgsql postgresql postgresql94-server \
monitoring-plugins-all apache2</screen>
</listitem>
<listitem>
<para>Edit the <literal>/etc/icinga/objects/contacts.cfg</literal> file and add the email address which you will use for reciving alerts.</para>
<screen>define contact {
  contact_name      icingaadmin          ; Short name of user
  use               generic-contact      ; Inherit default values
  alias             Icinga Admin         ; Full name of user
  email             icinga@localhost     ; &lt;&lt;*** CHANGE THIS TO YOUR EMAIL ADDRESS ***
}</screen>
</listitem>
<listitem>
<para>Enable postgres on boot and start the database:</para>
<screen>systemctl enable postgresql.service
systemctl start postgresql.service</screen>
</listitem>
<listitem>
<para>Create the database and user for Icinga:</para>
<screen>&gt;psql
 postgres=# ALTER USER postgres WITH PASSWORD '&lt;newpassword&gt;';
 postgres=# CREATE USER icinga;
 postgres=# ALTER USER icinga WITH PASSWORD 'icinga';
 postgres=# CREATE DATABASE icinga;
 postgres=# GRANT ALL ON DATABASE icinga TO icinga;
 postgres=# \q
 exit</screen>
</listitem>
<listitem>
<para>Adjust client authentication rights located in <literal>/var/lib/pgsql/data/pg_hba.conf</literal> to match the following:</para>
<screen># TYPE  DATABASE        USER            ADDRESS                 METHOD
local   icinga         icinga                                  trust
local   all            postgres                                ident

# "local" is for Unix domain socket connections only
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust
# Allow replication connections from localhost, by a user with the
# replication privilege.
#local   replication     postgres                                peer
#host    replication     postgres        127.0.0.1/32            ident
#host    replication     postgres        ::1/128                 ident</screen>
<important>
<title>Placement of Authentication Settings</title>
<simpara>Ensure the local entries for icinga authentication settings are placed above all other local entries or you will get an error when configuring the database schema.
The entries in <filename>pg_hba.conf</filename>
 are read from top to bottom.</simpara>
</important>
</listitem>
<listitem>
<para>Reload the Postgres service:</para>
<screen>systemctl reload postgresql.service</screen>
</listitem>
<listitem>
<para>Configure the database schema by running the following command in <literal>/usr/share/doc/packages/icinga-idoutils-pgsql/pgsql/</literal>:</para>
<screen>psql -U icinga -d icinga &lt; pgsql.sql</screen>
</listitem>
<listitem>
<para>Edit the following lines in <literal>/etc/icinga/ido2db.cfg</literal> to switch from the default setting of mysql to postgres:</para>
<screen>vi /etc/icinga/ido2db.cfg

 db_servertype=pgsql
 db_port=5432</screen>
<important>
<title>Open Firewall Port</title>
<simpara>Allow port <literal>5432</literal> through your firewall or you will not be able to access the WebGUI.</simpara>
</important>
</listitem>
<listitem>
<para>Create an icinga admin account for logging into the web interface:</para>
<screen>htpasswd -c /etc/icinga/htpasswd.users icingaadmin</screen>
</listitem>
<listitem>
<para>Enable and start all required services:</para>
<screen>systemctl enable icinga.service
systemctl start icinga.service
systemctl enable ido2db.service
systemctl start ido2db.service
systemctl enable apache2.service
systemctl start apache2.service</screen>
</listitem>
<listitem>
<para>Login to the WebGUI at: <link xl:href="http://localhost/icinga">http://localhost/icinga</link>.</para>
</listitem>
</orderedlist>
<simpara>This concludes setup and initial configuration of Icinga.</simpara>
</section>
<section xml:id="_icinga_and_nrpe_quickstart"><title>Icinga and NRPE Quickstart</title><simpara>The following sections provides an overview on monitoring your &susemgr;
server using Icinga.
You will add &susemgr;
as a host to Icinga and use a Nagios script/plugin to monitor running services via <literal>NRPE</literal> (Nagios Remote Plugin Executor). This section does not attempt to cover all monitoring solutions Icinga has to offer but should help you get started.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Adding &susemgr;to Icinga for Monitoring</title>
<listitem>
<para>On your &susemgr; server install the required packages:</para>
<screen>zypper install nagios-nrpe susemanager-nagios-plugin insserv nrpe monitoring-plugins-nrpe</screen>
</listitem>
<listitem>
<para>Modify the NRPE configuration file located at:</para>
<screen>/etc/nrpe.cfg</screen>
<simpara>Edit or add the following lines:</simpara>
<screen>server_port=5666
nrpe_user=nagios
nrpe_group=nagios
allowed_hosts=Icinga.example.com
dont_blame_nrpe=1
command[check_systemd.sh]=/usr/lib/nagios/plugins/check_systemd.sh $ARG1$</screen>
<simpara>Variable definitions:</simpara>
<variablelist>
<varlistentry>
<term>server_port</term>
<listitem>
<simpara>The variable <literal>server_port</literal> defines the port nrpe will listen on.
The default port is 5666.
This port must be opened in your firewall.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>nrpe_user</term>
<listitem>
<simpara>The variables <literal>nrpe_user</literal> and <literal>nrpe_group</literal> control the user and group IDs that nrpe will run under. &susemgr;
probes need access to the database, therefore nrpe requires access to database credentials stored in <filename>/etc/rhn/rhn.conf</filename>
.
There are multiple ways to achieve this.
You may add the user <literal>nagios</literal> to the group <literal>www</literal> (this is already done for other IDs such as tomcat); alternatively you can simply have nrpe run with the effective group ID <literal>www</literal> in <filename>/etc/rhn/rhn.conf</filename>
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>allowed_hosts</term>
<listitem>
<simpara>The variable <literal>allowed_hosts</literal> defines which hosts nrpe will accept connections from.
Enter the FQDN or IP address of your Icinga server here.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>dont_blame_nrpe</term>
<listitem>
<simpara>The use of variable <literal>dont_blame_nrpe</literal> is unavoidable in this example. <literal>nrpe</literal> commands by default will not allow arguments being passed due to security reasons.
However, in this example you should pass the name of the host you want information on to nrpe as an argument.
This action is only possible when setting the variable to 1.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>command[check_systemd.sh]</term>
<listitem>
<simpara>You need to define the command(s) that nrpe can run on &susemgr;
.
To add a new nrpe command specify a command call by adding <literal>command</literal> followed by square brackets containing the actual nagios/icinga plugin name.
Next define the location of the script to be called on your &susemgr;
server.
Finally the variable <literal>$ARG1$</literal> will be replaced by the actual host the Icinga server would like information about.
In the example above, the command is named <literal>check_systemd.sh</literal>.
You can specify any name you like but keep in mind the command name is the actual script stored in <filename>/usr/lib/nagios/plugins/</filename>
on your &susemgr;
server.
This name must also match your probe definition on the Icinga server. <emphasis>This will be described in greater
detail later in the chapter. The check_systemd.sh script/plugin
will also be provided in a later section.</emphasis></simpara>
</listitem>
</varlistentry>
</variablelist>
</listitem>
<listitem>
<para>One your configuration is complete load the new nrpe configuration with:</para>
<screen>{prompt.root}systemctl start nrpe</screen>
</listitem>
</orderedlist>
<simpara>This concludes setup of nrpe.</simpara>
<section xml:id="_adding_a_host_to_icinga"><title>Adding a Host to Icinga</title><simpara>To add a new host to Icinga create a host.cfg file for each host in <filename>/etc/icinga/conf.d/</filename>
.
For example <filename>susemanager.cfg</filename>
:</simpara>
<screen>define host {
  host_name           susemanager
  alias               SUSE Manager
  address             192.168.1.1
  check_period        24x7
  check_interval      1
  retry_interval      1
  max_check_attempts  10
  check_command       check-host-alive
}</screen>
<note>
<simpara>Place the host IP address you want to add to Icinga on the <literal>Address</literal> line.</simpara>
</note>
<simpara>After adding a new host restart Icinga and load the new configuation:</simpara>
<screen>{prompt.root}systemctl restart icinga</screen>
</section>
<section xml:id="_adding_services"><title>Adding Services</title><simpara>To add services for monitoring on a specific host define them by adding a service definition to your host.cfg file located in <filename>/etc/icinga/conf.d</filename>
.
For example you can monitor if a systems SSH service is running with the following service definition.</simpara>
<screen>define service {
  host_name           susemanager
  use                 generic-service
  service_description SSH
  check_command       check_ssh
  check_interval      60
}</screen>
<simpara>After adding any new services restart Icinga to load the new configuration:</simpara>
<screen>{prompt.root}systemctl restart icinga</screen>
</section>
<section xml:id="_creating_hostgroups"><title>Creating Hostgroups</title><simpara>You can create hostgroups to simplify and visualize hosts logically.
Create a <filename>hostgroups.cfg</filename>
 file located in <filename>/etc/icinga/conf.d/</filename>
 and add the following lines:</simpara>
<screen>define hostgroup {
  hostgroup_name  ssh_group
  alias           ssh group
  members         susemanager,mars,jupiter,pluto,examplehost4
}</screen>
<simpara>The <literal>members</literal> variable should contain the <literal>host_name</literal> from within each host.cfg file you created to represent your hosts.
Every time you add an additional host by creating a host.cfg ensure you add the host_name to the members list of included hosts if you want it to be included within a logical hostgroup.</simpara>
<simpara>After adding hosts to a hostgroup restart Icinga to load the new configuration:</simpara>
<screen>{prompt.root}systemctl restart icinga</screen>
</section>
<section xml:id="_creating_servicegroups"><title>Creating Servicegroups</title><simpara>You can create logical groupings of services as well.
For example if you would like to create a group of essential &susemgr;
services which are running define them within a <filename>servicegroups.cfg</filename>
 file placed in <filename>/etc/icinga/conf.d/</filename></simpara>
<screen>#Servicegroup 1
define servicegroup {
  servicegroup_name     SUSE Manager Essential Services
  alias                 Essential Services
}

#Servicegroup 2
define servicegroup {
  servicegroup_name     Client Patch Status
  alias                 SUSE Manager 3 Client Patch Status
}</screen>
<simpara>Within each host&#8217;s <filename>host.cfg</filename>
 file add a service to a servicegroup with the following variable:</simpara>
<screen>define service {
  use                 generic-service
  service_description SSH
  check_command       check_ssh
  check_interval      60
  servicegroups       SUSE Manager Essential Services
}</screen>
<simpara>All services that include the <literal>servicegroups</literal> variable and the name of the servicegroup will be added to the specified servicegroup.
After adding services to a servicegroup restart Icinga to load the new configuation:</simpara>
<screen>{prompt.root}systemctl restart icinga</screen>
</section>
</section>
<section xml:id="_monitoring_systemd_services"><title>Monitoring Systemd Services</title><simpara>The following section provides information on monitoring uptime of critical &susemgr;
services.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Monitoring Running Systemd Services</title>
<listitem>
<para>As root create a new plugin file called <filename>check_systemd.sh</filename> in <filename>/usr/lib/nagios/plugins/</filename> on your &susemgr; server:</para>
<screen>vi /usr/lib/nagios/plugins/ check_systemd.sh</screen>
</listitem>
<listitem>
<para>For this example you will use an opensource community script to monitor Systemd services. You may also wish to write your own.</para>
<screen>#!/bin/bash
# Copyright (C) 2016 Mohamed El Morabity &lt;melmorabity@fedoraproject.com&gt;
#
# This module is free software: you can redistribute it and/or modify it under
# the terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later
# version.
#
# This software is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
# FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License along with
# this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.


PLUGINDIR=$(dirname $0)
. $PLUGINDIR/utils.sh


if [ $# -ne 1 ]; then
    echo "Usage: ${0##*/} &lt;service name&gt;" &gt;&amp;2
    exit $STATE_UNKNOWN
fi

service=$1

status=$(systemctl is-enabled $service 2&gt;/dev/null)
r=$?
if [ -z "$status" ]; then
    echo "ERROR: service $service doesn't exist"
    exit $STATE_CRITICAL
fi

if [ $r -ne 0 ]; then
    echo "ERROR: service $service is $status"
    exit $STATE_CRITICAL
fi

systemctl --quiet is-active $service
if [ $? -ne 0 ]; then
    echo "ERROR: service $service is not running"
    exit $STATE_CRITICAL
fi

echo "OK: service $service is running"
exit $STATE_OK</screen>
<simpara>A current version of this script can be found at: <link xl:href="https://github.com/melmorabity/nagios-plugin-systemd-service/blob/master/check_systemd_service.sh">https://github.com/melmorabity/nagios-plugin-systemd-service/blob/master/check_systemd_service.sh</link></simpara>
<warning>
<title>Non-supported 3rd Party Plugin</title>
<simpara>The script used in this example is an external script and is not supported by &suse;
.
Always check to ensure scripts are not modified or contain malicous code before using them on production machines.</simpara>
</warning>
</listitem>
<listitem>
<para>Make the script executable:</para>
<screen>chmod 755 check_systemd.sh</screen>
</listitem>
<listitem>
<para>On your SUSE manager server add the following line to the <filename>nrpe.cfg</filename> located at <filename>/etc/nrpe.cfg</filename> :</para>
<screen># SUSE Manager Service Checks
command[check_systemd.sh]=/usr/lib/nagios/plugins/check_systemd.sh $ARG1$</screen>
<simpara>This will allow the Icinga server to call the plugin via nrpe on &susemgr;
.</simpara>
</listitem>
<listitem>
<para>Provide proper permissions by adding the script to the sudoers file:</para>
<screen>{prompt.root}visudo</screen>
<screen>nagios  ALL=(ALL)       NOPASSWD:/usr/lib/nagios/plugins/check_systemd.sh
Defaults:nagios !requiretty</screen>
<simpara>You can also add permissions to the entire plugin directory instead of allowing permissions for individual scripts:</simpara>
<screen>nagios  ALL=(ALL)       NOPASSWD:/usr/lib/nagios/plugins/</screen>
</listitem>
<listitem>
<para>On your Icinga server define the following command within <filename>/etc/icinga/objects/commands.cfg</filename> :</para>
<screen>define command {
        command_name   check-systemd-service
        command_line   /usr/lib/nagios/plugins/check_nrpe -H $HOSTADDRESS$ -c check_systemd.sh -a $ARG1$
}</screen>
</listitem>
<listitem>
<para>Now you will add the following critical services to be montitored to your &susemgr; host file:</para>
<itemizedlist>
<listitem>
<para>auditlog-keeper.service</para>
</listitem>
<listitem>
<para>jabberd.service</para>
</listitem>
<listitem>
<para>spacewalk-wait-for-jabberd.service</para>
</listitem>
<listitem>
<para>tomcat.service</para>
</listitem>
<listitem>
<para>spacewalk-wait-for-tomcat.service</para>
</listitem>
<listitem>
<para>salt-master.service</para>
</listitem>
<listitem>
<para>salt-api.service</para>
</listitem>
<listitem>
<para>spacewalk-wait-for-salt.service</para>
</listitem>
<listitem>
<para>apache2.service</para>
</listitem>
<listitem>
<para>osa-dispatcher.service</para>
</listitem>
<listitem>
<para>rhn-search.service</para>
</listitem>
<listitem>
<para>cobblerd.service</para>
</listitem>
<listitem>
<para>taskomatic.service</para>
</listitem>
<listitem>
<para>spacewalk-wait-for-taskomatic.service</para>
</listitem>
</itemizedlist>
<simpara>On your Icinga server add the following service blocks to your &susemgr;
host file <filename>susemanager.cfg</filename>
file located in <filename>/etc/icinga/conf.d/</filename>
.
(This configuration file was created in the previous section <emphasis>Adding a Host to Icinga</emphasis>.)</simpara>
<simpara>+</simpara>
<screen># Monitor Audit Log Keeper
define service {
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Audit Log Keeper Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!auditlog-keeper.service

}

# Monitor Jabberd
define service {
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Jabberd Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!jabberd.service

}

# Monitor Spacewalk Wait for Jabberd
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Spacewalk Wait For Jabberd Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!spacewalk-wait-for-jabberd.service
}

# Monitor Tomcat
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Tomcat Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!tomcat.service
}

# Monitor Spacewalk Wait for Tomcat
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Spacewalk Wait For Tomcat Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!spacewalk-wait-for-tomcat.service
}

# Monitor Salt Master
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Salt Master Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!salt-master.service
}

# Monitor Salt API
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Salt API Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!salt-api.service
}

# Monitor Spacewalk Wait for Salt
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Spacewalk Wait For Salt Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!spacewalk-wait-for-salt.service
}

# Monitor apache2
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Apache2 Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!apache2.service
}

# Monitor osa dispatcher
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Osa Dispatcher Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!osa-dispatcher.service
}

# Monitor rhn search
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    RHN Search Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!rhn-search.service
}

# Monitor Cobblerd
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Cobblerd Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!cobblerd.service
}

# Monitor taskomatic
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Taskomatic Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!taskomatic.service
}

# Monitor wait for taskomatic
define service{
       use                    generic-service
       host_name              susemanager
       check_interval         1
       active_checks_enabled  1
       service_description    Spacewalk Wait For Taskomatic Service
       servicegroups          SUSE Manager Essential Services
       check_command          check-systemd-service!spacewalk-wait-for-taskomatic.service
}</screen>
<simpara>+
Each of these service blocks will be passed as the check-systemd-service!$ARG1$ variable to SUSE manager server via nrpe.
You probably noticed the servicegroups parameter was also included.
This adds each service to a servicegroup and has been defined in a <filename>servicesgroups.cfg</filename>
file located in <filename>/etc/icinga/conf.d/</filename>
:</simpara>
<simpara>+</simpara>
<screen>define servicegroup {
       servicegroup_name     SUSE Manager Essential Services
       alias                 Essential Services
}</screen>
</listitem>
<listitem>
<para>Restart Icinga:</para>
<screen>systemctl restart icinga</screen>
</listitem>
</orderedlist>
</section>
<section xml:id="_using_the_check_suma_patches_plugin"><title>Using the check_suma_patches Plugin</title><simpara>You can use the <filename>check_suma_patches</filename>
 plugin to check if any machines connected to &susemgr;
 as clients require a patch or an update.
The following procedure will guide you through the setup of the check_suma_patches plugin.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Setup check_suma_patches</title>
<listitem>
<para>On your &susemgr; server open <filename>/etc/nrpe.cfg</filename> and add the following lines:</para>
<screen># SUSE Manager check_patches
command[check_suma_patches]=sudo /usr/lib/nagios/plugins/check_suma_patches $ARG1$</screen>
</listitem>
<listitem>
<para>On your Icinga server open <filename>/etc/icinga/objects/commands.cfg</filename> and define the following command:</para>
<screen>define command{
        command_name    check_suma
        command_line    /usr/lib/nagios/plugins/check_nrpe -H 192.168.1.1 -c $ARG1$ -a $HOSTNAME$
}</screen>
</listitem>
<listitem>
<para>On your Icinga server open any of your &susemgr; client host configration files located at <filename>/etc/icinga/conf.d/clients.cfg</filename> and add the following service definition:</para>
<screen>define service {
        use                             generic-service
        host_name                       client-hostname
        service_description             Available Patches for client-host_name
        servicegroups                   Client Patch Status
        check_command                   check_suma!check_suma_patches
}</screen>
</listitem>
<listitem>
<para>In the above service definition notice that this host is included in the servicegroup labeled <emphasis>Client Patch Status</emphasis>. Add the following servicegroup definition to <filename>/etc/icinga/conf.d/servicegroups.cfg</filename> to create a servicegroup:</para>
<screen>define servicegroup {
       servicegroup_name     Client Patch Status
       alias                 SUSE Manager 3 Client Patch Status
}</screen>
</listitem>
<listitem>
<para></para>
<itemizedlist>
<listitem>
<para><literal>OK:System is up to date</literal></para>
</listitem>
<listitem>
<para><literal>Warning: At least one patch or package update is available</literal></para>
</listitem>
<listitem>
<para><literal>Critical:At least one security/critical update is available</literal></para>
</listitem>
<listitem>
<para><literal>Unspecified:The host cannot be found in the SUSE Manager database or the host name is not unique</literal></para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<simpara>This concludes setup of the <literal>check_suma_patches</literal> plugin.</simpara>
</section>
<section xml:id="_using_the_check_suma_lastevent_plugin"><title>Using the check_suma_lastevent Plugin</title><simpara>You can use the <filename>check_suma_lastevent</filename>
 plugin to display the last action executed on any host.</simpara>
<simpara>The following procedure will guide you through the setup of the check_suma_patches plugin.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Setup check_suma_lastevent</title>
<listitem>
<para>On your &susemgr; server open <filename>/etc/nrpe.cfg</filename> and add the following lines:</para>
<screen># Check SUSE Manager Hosts last events
command[check_events]=sudo /usr/lib/nagios/plugins/check_suma_lastevent $ARG1$</screen>
</listitem>
<listitem>
<para>On the Icinga server open <filename>/etc/icinga/objects/commands.cfg</filename> and add the following lines:</para>
<screen>define command {
        command_name    check_events
        command_line    /usr/lib/nagios/plugins/check_nrpe -H manager.suse.de -c $ARG1$ -a $HOSTNAME$
}</screen>
</listitem>
<listitem>
<para>On your Icinga server add the following line to a host.cfg service definition:</para>
<screen>define service{
        use                             generic-service
        host_name                       hostname
        service_description             Last Events
        check_command                   check_events!check_suma_lastevent
}</screen>
</listitem>
<listitem>
<para>Status will be reported as follows:</para>
<itemizedlist>
<listitem>
<para><literal>OK:Last action completed successfully</literal></para>
</listitem>
<listitem>
<para><literal>Warning: Action is currently in progress</literal></para>
</listitem>
<listitem>
<para><literal>Critical:Last action failed</literal></para>
</listitem>
<listitem>
<para><literal>Unspecified:The host cannot be found in the &susemgr; database or the host name is not unique</literal></para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<simpara>This concludes setup of the <literal>check_suma_lastevent</literal> plugin.</simpara>
</section>
<section xml:id="_additional_resources"><title>Additional Resources</title><simpara>For more information, see Icinga&#8217;s official documentation located at <link xl:href="http://docs.icinga.org/latest/en">http://docs.icinga.org/latest/en</link>.</simpara>
<simpara>For some excellent time saving configuration tips and tricks not covered in this guide, see the following section located within the official documentation: <link xl:href="http://docs.icinga.org/latest/en/objecttricks.html">http://docs.icinga.org/latest/en/objecttricks.html</link></simpara>
</section>
</chapter>
<chapter xml:id="_at.images"><title>Image Building and Management</title><section xml:id="_at.image.overview"><title>Image Building Overview</title><simpara>&susemgr;
enables system administrators to build containers, create Image Stores, and manage Image Profiles.
The following sections target administrators familiar with containers, registry services, and assocaited terminology.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/image-building.png" width="80%"/>
</imageobject>
<textobject><phrase>image building</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section xml:id="_at.image.requirements"><title>Requirements</title><simpara>The containers feature is available for Salt minions running &sls;
 12 or later.
The following requirements should be met before following this guide:</simpara>
<itemizedlist>
<listitem>
<para>You will need an existing external Github or internal Gitlab Repository containing a Dockerfile and configuration scripts (Example scripts are provided in the following sections)</para>
</listitem>
<listitem>
<para>Portus or another image registry properly configured.</para>
<note>
<title>Registry Provider Solutions</title>
<simpara>If you require a private image registry you can use an open source solution such as <literal>Portus</literal>.
For additional information on setting up Portus as a registry provider, see the:
** <link xl:href="http://port.us.org/">Portus Documentation</link></simpara>
</note>
</listitem>
</itemizedlist>
<simpara>For more information on Containers or CaaS Platform review the following links:</simpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://www.suse.com/documentation/sles-12/book_sles_docker/data/book_sles_docker.html">SUSE Linux Enterprise Server 12 SP3 Docker Guide</link></para>
</listitem>
<listitem>
<para><link xl:href="https://www.suse.com/documentation/suse-caasp-2/">SUSE CaaS Platform 2 Documentation</link></para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_at.images.buildhost"><title>Creating a Build Host</title><simpara>To build container images with &susemgr;
, you will need to create and configure a build host.
Build hosts are Salt minions running SLES 12 or later.
The following steps will guide you though the initial configuration for a build host.</simpara>
<simpara>From the &susemgr;{webui}
perform the following steps to configure a build host.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Select a minion that will be designated as a build host from the <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Overview</guimenuitem></menuchoice> page.</para>
</listitem>
<listitem>
<para>From the <guimenu>System Details</guimenu> page for the selected minion assign the containers modules by going to <menuchoice><guimenu>Software</guimenu> <guimenuitem>Software Channels</guimenuitem></menuchoice> and enable <literal>SLE-Module-Containers12-Pool</literal> and <literal>SLE-Module-Containers12-Updates</literal>. Confirm by clicking <guimenu>Change Subscriptions</guimenu> .</para>
</listitem>
<listitem>
<para>From the <menuchoice><guimenu>System Details</guimenu> <guimenuitem>Properties</guimenuitem></menuchoice> page, enable the <guimenu>Add-on System Type</guimenu><literal>Container Build Host</literal> and confirm by selecting <guimenu>Update Properties</guimenu> .</para>
</listitem>
<listitem>
<para>Install all required packaged by applying the Highstate. From the system&#8217;s details page select <menuchoice><guimenu>States</guimenu> <guimenuitem>Highstate</guimenuitem></menuchoice> and select <guimenu>Apply Highstate</guimenu> . Alternatively apply a Highstate from the command line by executing <literal>state.highstate</literal> from the SUSE Manager Server command line.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_at.images.buildchannels"><title>Define Container Build Channels with an Activation Key</title><simpara>Create an activation key associated with the channel that your images will use.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/systems_create_activation_key.png" width="80%"/>
</imageobject>
<textobject><phrase>systems create activation key</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>From the left navigation menu select <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Activation Keys</guimenuitem></menuchoice> .</para>
</listitem>
<listitem>
<para>Click <guimenu>Create Key</guimenu> .</para>
</listitem>
<listitem>
<para>Enter a <guimenu>Description</guimenu> , a <guimenu>Key</guimenu> name, Use the drop-down box to select the <guimenu>Base Channel</guimenu> that should be associated with this key. Confirm with <guimenu>Create Activation Key</guimenu> .</para>
</listitem>
</orderedlist>
<simpara>For more information, see <xref linkend="_bp.key.managment"/>.</simpara>
</section>
<section xml:id="_creating_an_image_store"><title>Creating an Image Store</title><simpara>Define a location to store all of your images by creating an Image Store.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/images_image_stores.png" width="80%"/>
</imageobject>
<textobject><phrase>images image stores</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>From the left navigation menu select <menuchoice><guimenu>Images</guimenu> <guimenuitem>Stores</guimenuitem></menuchoice> .</para>
</listitem>
<listitem>
<para>Click <guimenu>Create</guimenu> to create a new store.</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/images_image_stores_create.png" width="80%"/>
</imageobject>
<textobject><phrase>images image stores create</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>&susemgr; currently provides support only for the `Registry`<guimenu>Store Type</guimenu> . Define a name for the image store in the <guimenu>Label</guimenu> field.</para>
</listitem>
<listitem>
<para>Provide the path to your image registry by filling in the <guimenu>URI</guimenu> field. The FQDN of the container registry host (whether internal or external) is sufficient.</para>
<screen>registry.example.com</screen>
</listitem>
<listitem>
<para>Click <guimenu>Create</guimenu> to add the new <literal>Image Store</literal>.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_at.images.profile"><title>Creating an Image Profile</title><simpara>Manage Image Profiles from the Image Profile page.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/images_image_profiles.png" width="80%"/>
</imageobject>
<textobject><phrase>images image profiles</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<title>Procedure: Create an Image Profile</title>
<listitem>
<para>To create an image profile select <menuchoice><guimenu>Image</guimenu> <guimenuitem>Profiles</guimenuitem></menuchoice> and click <guimenu>Create</guimenu> .</para>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/images_image_create_profile.png" width="80%"/>
</imageobject>
<textobject><phrase>images image create profile</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Provide a name for the <literal>Image Profile</literal> by filling in the <guimenu>Label</guimenu> field.</para>
</listitem>
<listitem>
<para>Use a <literal>Dockerfile</literal> as the default <literal>Image Type</literal></para>
</listitem>
<listitem>
<para>Use the dropdown to select your registry from the <literal>Target Image Store</literal> field.</para>
</listitem>
<listitem>
<para>Enter a Github or Gitlab repositiory URL (http/https/token authentication) in the <guimenu>Path</guimenu> field using one of the following formats:</para>
</listitem>
</orderedlist>
<itemizedlist>
<title>Github Path Options</title>
<listitem>
<para>Github Single User Project Repository:</para>
<screen>https://github.com/USER/project.git#branchname:folder</screen>
</listitem>
<listitem>
<para>Github Organization Project Repository:</para>
<screen>https://github.com/ORG/project.git#branchname:folder</screen>
</listitem>
<listitem>
<para>Github Token Authentication</para>
<simpara>If your GIT repository is private and not publicly accessible, you need to modify the profile&#8217;s GIT URL to include some authentication.
Use the following URL format to authenticate with a Github token.</simpara>
<screen>https://USER:&lt;AUTHENTICATION_TOKEN&gt;@github.com/USER/project.git#master:/container/</screen>
</listitem>
</itemizedlist>
<itemizedlist>
<title>Gitlab Path Options</title>
<listitem>
<para>Gitlab Single User Project Repository</para>
<screen>https://gitlab.example.com/USER/project.git#master:/container/</screen>
</listitem>
<listitem>
<para>Gitlab Groups Project Repository</para>
<screen>https://gitlab.example.com/GROUP/project.git#master:/container/</screen>
</listitem>
<listitem>
<para>Gitlab Token Authentication</para>
<simpara>If your GIT repository is private and not publicly accessible, you need to modify the profile&#8217;s GIT URL to include some authentication.
Use the following URL format to authenticate with a Gitlab token.</simpara>
<screen>https://gitlab-ci-token:&lt;AUTHENTICATION_TOKEN&gt;@gitlab.example.com/USER/project.git#master:/container/</screen>
<important>
<title>Specifying a Github or Gitlab Branch</title>
<simpara>If a branchname is not specified the <literal>master</literal> branch will be used by default.
If a <literal>folder</literal> is not specified a <literal>Dockerfile</literal> is expected to be in the root directory of the Github or Gitlab checkout.</simpara>
</important>
<orderedlist numeration="arabic">
<listitem>
<para>Select an <literal>Activation Key</literal> (Activation Keys ensure images using a profile are assigned to the correct channel and packages).</para>
<note>
<title>Relationship Between Activation Keys and Image Profiles</title>
<simpara>When you associate an activation key with an image profile you are ensuring any image using the profile will use the correct software channel and any packages in the channel.</simpara>
</note>
</listitem>
<listitem>
<para>Click the <guimenu>Create</guimenu> button.</para>
</listitem>
</orderedlist>
</listitem>
</itemizedlist>
<section xml:id="_example_dockerfile_and_add_packages_script"><title>Example Dockerfile and add_packages Script</title><simpara>The following is an example Dockerfile.
You specify a Dockerfile that will be used during iamge building when creating an image profile.
A Dockerfiel and any assocaited scripts should be stored within an internal or external Github/Gitlab repository:</simpara>
<important>
<title>Required Dockerfile Lines</title>
<simpara>The following basic Dockerfile lines provide access to a specific repository version served by SUSE manager.
The following example Dockerfile is used by SUSE Manager to trigger a build job on a build host minion.
These ARGS ensure that the image built is associated with the desired repo version served by SUSE Manager.
These <literal>ARG</literal>s also allow you to build image versions of SLES which may differ from the version of SLES used by the build host itself.</simpara>
<simpara>For example: The <literal>ARG repo</literal> and echo to the repository file creates and then injects the correct path into the repo file for the desired channel version . <emphasis>The repository version is determined by the activation key that you assigned to your
      Image Profile.</emphasis></simpara>
</important>
<screen>FROM registry.example.com/sles12sp2
MAINTAINER Tux Administrator "tux@example.com"

### Begin: These lines Required for use with SUSE Manager

ARG repo
ARG cert

# Add the correct certificate
RUN echo "$cert" &gt; /etc/pki/trust/anchors/RHN-ORG-TRUSTED-SSL-CERT.pem

# Update certificate trust store
RUN update-ca-certificates

# Add the repository path to the image
RUN echo "$repo" &gt; /etc/zypp/repos.d/susemanager:dockerbuild.repo

### End: These lines required for use with SUSE Manager

# Add the package script
ADD add_packages.sh /root/add_packages.sh

# Run the package script
RUN /root/add_packages.sh

# After building remove the repository path from image
RUN rm -f /etc/zypp/repos.d/susemanager:dockerbuild.repo</screen>
<simpara>The following is an example add_packages.sh script for use with your Dockerfile:</simpara>
<screen>#!/bin/bash
set -e

zypper --non-interactive --gpg-auto-import-keys ref

zypper --non-interactive in python python-xml aaa_base aaa_base-extras net-tools timezone vim less sudo tar</screen>
<note>
<title>Packages Required for Inspecting Your Images</title>
<simpara>To inspect images and provide the package and product list of a container to the &susemgr;{webui}
you are required to install <package>python</package>
 and <package>python-xml</package>
 within the container.
If these packages remain uninstalled, your images will still build, but the package and product list will be unavailable from the &webui;
.</simpara>
</note>
</section>
</section>
<section xml:id="_at.images.image.building"><title>Building an Image</title><simpara>There are two ways to build an image.
You can select <menuchoice><guimenu>Images</guimenu> <guimenuitem>Build</guimenuitem></menuchoice>
 from the left navigation bar, or click the build icon in the <menuchoice><guimenu>Images</guimenu> <guimenuitem>Profiles</guimenuitem></menuchoice>
 list.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/images_image_build.png" width="80%"/>
</imageobject>
<textobject><phrase>images image build</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<title>Procedure: Build an Image</title>
<listitem>
<para>For this example select <menuchoice><guimenu>Images</guimenu> <guimenuitem>Build</guimenuitem></menuchoice> .</para>
</listitem>
<listitem>
<para>Add a different tag name if you want a version other than the default <literal>latest</literal>.</para>
</listitem>
<listitem>
<para>Select the <guimenu>Build Profile</guimenu> and a <guimenu>Build Host</guimenu></para>
<note>
<title>Profile Summary</title>
<simpara>Notice the <guimenu>Profile Summary</guimenu>
 to the right of the build fields.
When you have selected a build profile detailed information about the selected profile will show up in this area.</simpara>
</note>
</listitem>
<listitem>
<para>To schedule a build click the <guimenu>Build</guimenu> button.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_at.images.image.importing"><title>Importing an Image</title><simpara>You can import and inspect arbitrary images.
Select <menuchoice><guimenu>Images</guimenu> <guimenuitem>Images</guimenuitem></menuchoice>
 from the left navigation bar.
Fill the text boxes of the Import dialog.
When processed the imported image will get listed on the <guimenu>Images</guimenu>
 page.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Import an Image</title>
<listitem>
<para>From <menuchoice><guimenu>Images</guimenu> <guimenuitem>Images</guimenuitem></menuchoice> click the <guimenu>Import</guimenu> to open the <guimenu>Import Image</guimenu> dialog.</para>
</listitem>
<listitem>
<para>In the <guimenu>Import</guimenu> dialog fill the following fields:</para>
<variablelist>
<varlistentry>
<term>Image store</term>
<listitem>
<simpara>The registry from where the image will be pulled for inspection.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Image name</term>
<listitem>
<simpara>The name of the image in the registry.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Image version</term>
<listitem>
<simpara>The version of the image in the registry.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Build host</term>
<listitem>
<simpara>The build host that will pull and inspect the image.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>Activation key</term>
<listitem>
<simpara>The activation key provides the path to the software channel that the image will be inspected with.</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>For confirmation, click <guimenu>Import</guimenu>
.</simpara>
</listitem>
</orderedlist>
<simpara>At this point, the entry for the image is created in the database and an Inspect Image action on &susemgr;
is scheduled right away.</simpara>
<simpara>When processed find the imported image in the images list.
You can recognize it because of a different icon in the Build column, which means that the image is imported (see screenshot below). The status icon for the imported image can also be seen on the overview tab for the image.</simpara>
</section>
<section xml:id="_listing_images_available_for_building"><title>Listing Images Available for Building</title><simpara>To list images availabe for building select <menuchoice><guimenu>Images</guimenu> <guimenuitem>Images</guimenuitem></menuchoice>
.
A list of all images will be displayed.</simpara>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/images_list_images.png" width="80%"/>
</imageobject>
<textobject><phrase>images list images</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Displayed data about images includes an image <guimenu>Name</guimenu>
, its <guimenu>Version</guimenu>
 and the build <guimenu>Status</guimenu>
.
You will also see an images update status with a listing of possible patch/package updates that are available for the image.</simpara>
<simpara>Clicking the <guimenu>Details</guimenu>
 button on an image will provide a detailed view including an exact list of relevant patches and a list of all packages installed within the image.</simpara>
<note>
<simpara>The patch and package list is only available if the inspect state after a build was successful.</simpara>
</note>
</section>
<section xml:id="_troubleshooting"><title>Troubleshooting</title><simpara>The following are some known pitfalls when working with images.</simpara>
<itemizedlist>
<listitem>
<para>HTTPS certificates to access the registry or the git repositories should be deployed to the minion by a custom state file.</para>
</listitem>
<listitem>
<para>SSH git access with docker is currently unsupported. You may test it, but SUSE will not provide support.</para>
</listitem>
<listitem>
<para>If the <package>python</package> and <package>python-xml</package> packages are not installed within your images during the build process, Salt cannot run within the container and reporting of installed packages or products will fail. This will result in an unknown update status.</para>
</listitem>
</itemizedlist>
</section>
</chapter>
<chapter xml:id="_advanced.topics.kubernetes.integration"><title>Kubernetes Integration Guide</title><section xml:id="_at.k8s.integration.requires"><title>Prerequisites</title><simpara>The prerequisites listed below should be met before proceeding.</simpara>
<itemizedlist>
<listitem>
<para>At least one <emphasis>Kubernetes</emphasis> or _SUSE CaaS Platform _ cluster available on your network</para>
</listitem>
<listitem>
<para>&susemgr; configured for container management</para>
<note>
<simpara>Required channels are present, a registered build host available etc.</simpara>
</note>
</listitem>
<listitem>
<para><package>virtual-host-gatherer-Kubernetes</package> package installed on your &susemgr; server</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_requirements_2"><title>Requirements</title><itemizedlist>
<listitem>
<para>Kubernetes version 1.5.0 or higher. Alternatively use SUSE CaaS Platform <emphasis>(SUSE CaaS Platform includes Kubernetes 1.5.0 by default)</emphasis></para>
</listitem>
<listitem>
<para>Docker version 1.12 or higher on the container build host</para>
</listitem>
</itemizedlist>
<note>
<simpara>To enable all Kubernetes related features within the &webui;
, the <package>virtual-host-gatherer-Kubernetes</package>
 package must be installed.</simpara>
</note>
</section>
<section xml:id="_register_kubernetes_as_a_virtual_host_manager"><title>Register Kubernetes as a Virtual Host Manager</title><simpara>_
Kubernetes_ clusters are registered with SUSE Manager as <literal>virtual host managers</literal>.
Registration and authorization begins with importing a <literal>kubeconfig</literal> file using Kubernetes official command line tool <literal>kubectl</literal>.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Registering a Kubernetes Cluster with &susemgr;</title>
<listitem>
<para>Select <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Virtual Host Managers</guimenuitem></menuchoice> from the navigation menu.</para>
</listitem>
<listitem>
<para>Expand the <literal>Create</literal> dropdown in the upper right corner of the page and select <guimenu>Kubernetes Cluster</guimenu> .</para>
</listitem>
<listitem>
<para>Input a label for the new Virtual Host Manager.</para>
</listitem>
<listitem>
<para>Select the <literal>kubeconfig</literal> file which contains the required data for the Kubernetes cluster.</para>
</listitem>
<listitem>
<para>Select the correct <emphasis>context</emphasis> for the cluster, as specified in the kubeconfig file.</para>
</listitem>
<listitem>
<para>Click <literal>Create</literal>.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_viewing_the_list_of_nodes_in_a_cluster"><title>Viewing the List of Nodes in a Cluster</title><orderedlist numeration="arabic">
<listitem>
<para>Select <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Virtual Host Managers</guimenuitem></menuchoice> from the navigation menu.</para>
</listitem>
<listitem>
<para>Select the desired Kubernetes cluster to view it.</para>
</listitem>
<listitem>
<para>Node data is not refreshed during registration. To refresh node data, click on <literal>Schedule refresh data</literal>.</para>
</listitem>
<listitem>
<para>Refresh the browser. If the node data is not available wait a few moments and try again.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_obtaining_runtime_data_about_images"><title>Obtaining Runtime Data about Images</title><simpara>See the following steps to find runtime data for images.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Select <menuchoice><guimenu>Images</guimenu> <guimenuitem>Images</guimenuitem></menuchoice> from the navigation menu.</para>
</listitem>
<listitem>
<para>In the image list table, take notice of the new runtime columns. These are labeled: <literal>Revision</literal>, <literal>Runtime</literal> and <literal>Instances</literal>. Initially these columns will not provide useful data.</para>
<itemizedlist>
<listitem>
<para><literal>Revision</literal>: An artificial sequence number which increments on every rebuild for manager-built images, or on every reimport for externally built images.</para>
</listitem>
<listitem>
<para><literal>Runtime</literal>: Overall status of the running instances of the image throughout the registered clusters. The status can be one of the following:</para>
<itemizedlist>
<listitem>
<para>All instances are consistent with SUSE Manager: All the running instances are running the same build of the image as tracked by SUSE Manager.</para>
</listitem>
<listitem>
<para>Outdated instances found: Some of the instances are running an older build of the image. A redeploy of the image into the pod may be required.</para>
</listitem>
<listitem>
<para>No information: The checksum of the instance image does not match the image data contained in SUSE Manager. A redeploy of the image into the pod may be required.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para><literal>Instances</literal>: Number of instances running this image across all the clusters registered in SUSE Manager. A breakdown of numbers can be seen by clicking on the pop-up icon next to the number.</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</section>
<section xml:id="_building_an_image_for_deployment_in_kubernetes"><title>Building an image for deployment in Kubernetes</title><simpara>The following steps will help you build an image for deployment in Kubernetes.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Under <menuchoice><guimenu>Images</guimenu> <guimenuitem>Stores</guimenuitem></menuchoice> , create an image store.</para>
</listitem>
<listitem>
<para>Under <menuchoice><guimenu>Images</guimenu> <guimenuitem>Profiles</guimenuitem></menuchoice> , create an image profile (with a Dockerfile which is suitable to deploy to Kubernetes).</para>
</listitem>
<listitem>
<para>Under <menuchoice><guimenu>Images</guimenu> <guimenuitem>Build</guimenuitem></menuchoice> , build an image with the new profile and wait for the build to finish.</para>
</listitem>
<listitem>
<para>Deploy the image into one of the registered Kubernetes clusters (via <literal>kubectl</literal>).</para>
</listitem>
<listitem>
<para>Notice the updated data in <literal>Runtime</literal> and <literal>Instances</literal> columns in the respective image row.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_importing_an_image_already_deployed_in_kubernetes"><title>Importing an image already deployed in Kubernetes</title><simpara>The following steps will guide you through importing a previously deployed image in Kubernetes.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Select an image that has already been deployed to any of your registered Kubernetes clusters.</para>
</listitem>
<listitem>
<para>Add the registry owning the image to SUSE Manager as an image store.</para>
</listitem>
<listitem>
<para>Select <menuchoice><guimenu>Images</guimenu> <guimenuitem>Images</guimenuitem></menuchoice> , click <literal>Import</literal> from the top-right corner, fill in the form fields and click <literal>Import</literal>.</para>
</listitem>
<listitem>
<para>Notice the updated data in <literal>Runtime</literal> and <literal>Instances</literal> columns in the respective image row.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_obtaining_additional_runtime_data"><title>Obtaining Additional Runtime Data</title><simpara>The following steps will help you find additional runtime data.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Select to <menuchoice><guimenu>Images</guimenu> <guimenuitem>Images</guimenuitem></menuchoice> , click the <literal>Details</literal> button on the right end of a row which has running instances.</para>
</listitem>
<listitem>
<para>Under the <literal>Overview</literal> tab, notice the data in <literal>Runtime</literal> and <literal>Instances</literal> fields under <literal>Image Info</literal> section.</para>
</listitem>
<listitem>
<para>Select the <literal>Runtime</literal> tab.</para>
</listitem>
<listitem>
<para>Here is a breakdown of the Kubernetes pods running this image in all the registered clusters including the following data:</para>
<itemizedlist>
<listitem>
<para>Pod name</para>
</listitem>
<listitem>
<para>Namespace which the pod resides in</para>
</listitem>
<listitem>
<para>The runtime status of the container in the specific pod. Status icons are explained in the preceeding example.</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</section>
<section xml:id="_rebuilding_a_previously_deployed_image_in_kubernetes"><title>Rebuilding a Previously Deployed Image in Kubernetes</title><simpara>The following steps will guide you through rebuilding an image which has been deployed to a Kubernetes cluster.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Go to <menuchoice><guimenu>Images</guimenu> <guimenuitem>Images</guimenuitem></menuchoice> , click the Details button on the right end of a row which has running instances. The image must be manager-built.</para>
</listitem>
<listitem>
<para>Click the <literal>Rebuild</literal> button located under the <literal>Build Status</literal> section and wait for the build to finish.</para>
</listitem>
<listitem>
<para>Notice the change in the <literal>Runtime</literal> icon and title, reflecting the fact that now the instances are running a previous build of the image.</para>
</listitem>
</orderedlist>
</section>
<section xml:id="_role_based_access_control_permissions_and_certificate_data"><title>Role Based Access Control Permissions and Certificate Data</title><important>
<simpara>Currently, only kubeconfig files containing all embedded certificate data may be used with SUSE Manager</simpara>
</important>
<simpara>The API calls from &susemgr;
are:</simpara>
<itemizedlist>
<listitem>
<para>GET /api/v1/pods</para>
</listitem>
<listitem>
<para>GET /api/v1/nodes</para>
</listitem>
</itemizedlist>
<simpara>According to this list, the minimum recommended permissions for &susemgr;
should be as follows:</simpara>
<itemizedlist>
<listitem>
<para>A ClusterRole to list all the nodes:</para>
<screen>resources: ["nodes"]
verbs: ["list"]</screen>
</listitem>
<listitem>
<para>A ClusterRole to list pods in all namespaces (role binding must not restrict the namespace):</para>
<screen>resources: ["pods"]
verbs: ["list"]</screen>
</listitem>
</itemizedlist>
<simpara>Due to a a 403 response from /pods, the entire cluster will be ignored by SUSE Manager.</simpara>
<simpara>For more information on working with RBAC Authorization see: <link xl:href="https://kubernetes.io/docs/admin/authorization/rbac/">https://kubernetes.io/docs/admin/authorization/rbac/</link></simpara>
</section>
</chapter>
<chapter xml:id="_advanced.topics.cobbler"><title>Cobbler</title><simpara><indexterm>
<primary>Cobbler</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>cobbler</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>Koan</primary>
</indexterm></simpara>
<simpara><indexterm>
<primary>koan</primary>
</indexterm></simpara>
<simpara>&susemgr;
features the Cobbler server that allows administrators to centralize their system installation and provisioning infrastructure.
Cobbler is an installation server that provides various methods of performing unattended system installations, whether it be server, workstation, or guest systems in a full or para-virtualized setup.</simpara>
<simpara>Cobbler offers several tools to assist in pre-installation guidance, automated installation file management, installation environment management, and more.
This section explains supported features of Cobbler, which include:</simpara>
<itemizedlist>
<listitem>
<para>installation environment analysis using the <command>cobbler check</command> command,</para>
</listitem>
<listitem>
<para>multi-site installation server configuration with <command>cobbler replicate</command>,</para>
</listitem>
<listitem>
<para>virtual machine guest installation automation with the <command>koan</command> client-side tool,</para>
</listitem>
<listitem>
<para>building installation ISOs with PXE-like menus using the <command>cobbler buildiso</command> command for &susemgr; systems with x86_64 architecture.</para>
</listitem>
</itemizedlist>
<simpara>For more detailed upstream documentation on Cobbler, see <link xl:href="http://cobbler.github.io/manuals/">http://cobbler.github.io/manuals/</link>.</simpara>
<important>
<title>Supported Cobbler Functions</title>
<simpara>&suse;
only support those Cobbler functions that are either listed within our formal documentation or available via the Web Interface and API.</simpara>
</important>
<section xml:id="_advanced.topics.cobbler.reqs"><title>Cobbler Requirements</title><simpara>To use Cobbler as a PXE boot server, follow these guidelines:</simpara>
<itemizedlist>
<listitem>
<para>For system installation with PXE, you must have a TFTP server installed and configured. By default, &susemgr; installs such a TFTP server.</para>
</listitem>
<listitem>
<para>To PXE boot systems for installation, you must either set up a DHCP server for Cobbler PXE booting or have access to your network&#8217;s DHCP server. Edit <filename>/etc/dhcp.conf</filename> to change <option>next-server</option> to the hostname or IP address of your Cobbler server.</para>
</listitem>
</itemizedlist>
<important>
<title>Correct Hostname Configuration</title>
<simpara>When onboarding bare metal systems using the pxe-default-image, it&#8217;s important to ensure all systems to be on-board have unique hostnames.
Otherwise, if you later assign a provisioning profile to it, the new configuration file will overwrite the configuration settings for any system with the duplicate hostname.
Cobbler uses hostnames as a unique key for each system.</simpara>
</important>
<section xml:id="_advanced.topics.cobbler.reqs.settings"><title>Configuring Cobbler with /etc/cobbler/settings</title><simpara>Cobbler configuration is mainly done in the <filename>/etc/cobbler/settings</filename>
 file.
With the default settings unchanged, Cobbler runs as intended.
All configurable settings are explained in detail in the <filename>/etc/cobbler/settings</filename>
 file with regard to how they affect functionality of Cobbler and whether it is recommended for users to adjust values to their environment.</simpara>
<note>
<title>Supported Languages</title>
<simpara>If &susemgr;
complains about language <quote><literal>en</literal></quote> was not found within the list of supported languages available at <filename>/usr/share/YaST2/data/languages</filename>
, remove the lang in <filename>/etc/cobbler/settings</filename>
 or add a proper value such as <literal>en_US</literal>.</simpara>
<simpara>For background info, see <link xl:href="https://www.suse.com/support/kb/doc?id=7018334">https://www.suse.com/support/kb/doc?id=7018334</link>.</simpara>
</note>
</section>
<section xml:id="_advanced.topics.cobbler.req.dhcp"><title>Cobbler and DHCP</title><simpara>Cobbler supports bare-metal automated installation of systems configured to perform network boots using a PXE boot server.
To properly implement a Cobbler installation server, administrators need to either have administrative access to the network&#8217;s DHCP server or set up DHCP on the Cobbler server itself.</simpara>
<section xml:id="_advanced.topics.cobbler.reqs.dhcp.notmanaged"><title>Configuring an Existing DHCP Server</title><simpara>If you have a DHCP server deployed on another system in the network, you will need administrative access to the DHCP server to edit the DHCP configuration file so that it points to the Cobbler server and PXE boot image.</simpara>
<simpara>As &rootuser;
on the DHCP server, edit the <filename>/etc/dhcpd.conf</filename>
 file and append a new class with options for performing PXE boot installation.
For example:</simpara>
<screen>allow booting;
allow bootp; &lt;1&gt;class "PXE" &lt;2&gt;{
match if substring(option vendor-class-identifier, 0, 9) = "PXEClient"; &lt;3&gt;next-server 192.168.2.1; &lt;4&gt;filename "pxelinux.0"; &lt;5&gt;}</screen>
<simpara>Step by step explanation:
&lt;1&gt;
       Enable network booting with the <literal role="systemitem">bootp</literal>
 protocol.</simpara>
<simpara>&lt;2&gt;
       Create a class called <literal>
PXE</literal>
.</simpara>
<simpara>&lt;3&gt;
       A system configured to have PXE first in its boot priority identifies
       itself as <literal>PXEClient</literal>
.</simpara>
<simpara>&lt;4&gt;
       As a result, the DHCP server directs the system to the Cobbler server at
       <literal>192.168.2.1</literal>
.</simpara>
<simpara>&lt;5&gt;
       The DHCP server retrieves the <filename>pxelinux.0</filename>
 bootloader
       file.</simpara>
</section>
<section xml:id="_advanced.topics.cobbler.reqs.dhcp.kvm"><title>Setting up PXE Boot in KVM</title><simpara>Not necessarily for production, but for lab or demo environments you can alternativly set up PXE boot in KVM.
Such a configuration can replace the <literal>next-server</literal> setting on a DHCP server explained in <xref linkend="_advanced.topics.cobbler.reqs.dhcp.notmanaged"/>.
To edit the network XML description with <command>virsh</command>, proceed as follow:</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Produce an XML dump of the current description:</para>
<screen>{prompt.root}virsh net-dumpxml --inactive network &gt; network.xml</screen>
</listitem>
<listitem>
<para>Open the XML dump file (here <filename>network.xml</filename> ) with a text editor and add a <literal>bootp</literal> statement within the <literal>&lt;dhcp&gt;</literal> element:</para>
<screen>&lt;bootp file='/pxelinux.0' server='192.168.100.153'/&gt;</screen>
</listitem>
<listitem>
<para>Install the edited description:</para>
<screen>{prompt.root}virsh net-define network.xml</screen>
</listitem>
</orderedlist>
<simpara>Or try the <literal>net-edit</literal> subcommand that does some error checking.</simpara>
<example xml:id="_at.cobbler.bootp.kvm">
<title>Minimal Network XML Description for KVM</title>
<screen>&lt;network&gt;
  &lt;name&gt;default&lt;/name&gt;
  &lt;uuid&gt;1da84185-31b5-4c8b-9ee2-a7f5ba39a7ee&lt;/uuid&gt;
  &lt;forward mode='nat'&gt;
    &lt;nat&gt;
      &lt;port start='1024' end='65535'/&gt;
    &lt;/nat&gt;
  &lt;/forward&gt;
  &lt;bridge name='virbr0' stp='on' delay='0'/&gt;
  &lt;mac address='52:54:00:29:59:18'/&gt;
  &lt;domain name='default'/&gt;
  &lt;ip address='192.168.100.1' netmask='255.255.255.0'&gt;
    &lt;dhcp&gt;
      &lt;range start='192.168.100.128' end='192.168.100.254'/&gt;
      &lt;bootp file='/pxelinux.0' server='192.168.100.153'/&gt; <co xml:id="CO1-1"/>
&lt;/dhcp&gt;
  &lt;/ip&gt;
&lt;/network&gt;</screen>
<simpara>&lt;6&gt;
        <literal>bootp</literal>
 statement that directs to the PXE server.</simpara>
</example>
</section>
</section>
<section xml:id="_advanced.topics.cobbler.reqs.tftp"><title>Xinetd and TFTP</title><simpara>&susemgr;
uses the <literal role="daemon">atftpd</literal>
 daemon, but it can also operate with Xinetd/TFTP.
The <literal role="daemon">atftpd</literal>
 is installed by default as the recommended method for providing PXE services.
Usually, you do not have to change its configuration, but if you have to, use the &yast;
 Sysconfig Editor.</simpara>
<simpara>Xinetd is a daemon that manages a suite of services, including TFTP, the FTP server used for transferring the boot image to a PXE client.</simpara>
<simpara>To configure TFTP, you must first enable the service via Xinetd.
To do this, edit the <filename>/etc/xinetd.d/tftp</filename>
 file as &rootuser;
 and change the <option>disable = yes</option> line to <literal>disable =
    no</literal>.</simpara>
<simpara>Before TFTP can serve the <filename>pxelinux.0</filename>
 boot image, you must start the Xinetd service.
Start &yast;
 and use <menuchoice><guimenu>System</guimenu> <guimenuitem>Services Manager</guimenuitem></menuchoice>
 to configure the <literal role="daemon">Xinetd</literal>
 daemon.</simpara>
</section>
<section xml:id="_advanced.topics.cobbler.reqs.sync.tftp"><title>Syncing TFTP Contents to SUSE Manager Proxies</title><simpara>It is possible to sync cobbler generated TFTP contents to &susemgr;
Proxies to perform PXE booting via these proxies.</simpara>
<section xml:id="_installation"><title>Installation</title><simpara>On the &susemgr;
Server, install the package <literal role="systemitem">susemanager-tftpsync</literal>
:</simpara>
<screen>{prompt.root}zypper install susemanager-tftpsync</screen>
<simpara>On the &susemgrproxy;
systems, install the package <literal role="systemitem">susemanager-tftpsync-recv</literal>
:</simpara>
<screen>{prompt.root}zypper install susemanager-tftpsync-recv</screen>
</section>
<section xml:id="_configuring_susemgrproxy"><title>Configuring &susemgrproxy;</title><simpara>Execute <filename>configure-tftpsync.sh</filename>
 on the &susemgrproxy;
 systems.</simpara>
<simpara>This setup script asks for hostnames and IP addresses of the &susemgr;
server and the proxy.
Additionally, it asks for the <literal>tftpboot</literal> directory on the proxy.
For more information, see the output of <command>configure-tftpsync.sh --help</command>.</simpara>
</section>
<section xml:id="_configuring_susemgr_server"><title>Configuring &susemgr; Server</title><simpara>Execute <filename>configure-tftpsync.sh</filename>
 on &susemgr;
 Server:</simpara>
<screen>{prompt.root}configure-tftpsync.sh proxy1.example.com proxy2.example.com</screen>
<simpara>Execute <command>cobbler sync</command> to initially push the files to the proxy systems.
This will succeed if all listed proxies are properly configured.</simpara>
<note>
<title>Changing the List of Proxy Systems</title>
<simpara>You can call <command>configure-tftpsync.sh</command> to change the list of proxy systems.
You must always provide the full list of proxy systems.</simpara>
</note>
<note>
<title>Reinstalling a Configured Proxy</title>
<simpara>In case you reinstall an already configured proxy and want to push all files again you must remove the cache file <filename>/var/lib/cobbler/pxe_cache.json</filename>
 before you can call <command>cobbler sync</command> again.</simpara>
</note>
</section>
<section xml:id="_requirements_3"><title>Requirements</title><simpara>The &susemgr;
Server must be able to access the &susemgrproxy;
systems directly.
Push via proxies is not possible.</simpara>
</section>
</section>
<section xml:id="_advanced.topics.cobbler.reqs.service"><title>Syncing and Starting the Cobbler Service</title><simpara>Before starting the cobbler service, run a check on the cobbler service to make sure that all the prerequisites are configured according to the organization&#8217;s needs with the command: <command>cobbler check</command>.</simpara>
<simpara>If content, start the &susemgr;
server with the following command:</simpara>
<screen>{prompt.root}/usr/sbin/spacewalk-service start</screen>
<warning>
<simpara>Do not start or stop the <command>cobblerd</command> service independent of the &susemgr;
 service.
Doing so may cause errors and other issues.</simpara>
<simpara>Always use <command>/usr/sbin/spacewalk-service</command> to start or stop &susemgr;
.</simpara>
</warning>
</section>
</section>
<section xml:id="_advanced.topics.cobbler.adddistro"><title>Adding a Distribution to Cobbler</title><simpara>If all Cobbler prerequisites have been met and Cobbler is running, you can use the Cobbler server as an installation source for a distribution: Make installation files such as the kernel image and the initrd image available on the Cobbler server.
Then add a distribution to Cobbler, using either the Web interface or the command line tools.</simpara>
<simpara>For information about creating and configuring &ay;
or Kickstart distributions from the &susemgr;
interface, refer to <xref linkend="_ref.webui.systems.autoinst.distribution"/>.</simpara>
<simpara>To create a distribution from the command line, use <command>cobbler</command> as follows:</simpara>
<screen>{prompt.root}cobbler distro add --name=`string`--kernel=`path`--initrd=`path`</screen>
<simpara>The <option>--name=</option><replaceable>string</replaceable> option is a label used to differentiate one distribution choice from another (for example, <literal>sles12server</literal>).</simpara>
<simpara>The <option>--kernel=</option><replaceable>path</replaceable> option specifies the path to the kernel image file.</simpara>
<simpara>The <option>--initrd=</option><replaceable>path</replaceable> option specifies the path to the initial ram disk (initrd) image file.</simpara>
</section>
<section xml:id="_advanced.topics.cobbler.addprofile"><title>Adding a Profile to Cobbler</title><simpara>Once you have added a distribution to Cobbler, you can add profiles.</simpara>
<simpara>Cobbler profiles associate a distribution with additional options like &ay;
or Kickstart files.
Profiles are the core unit of provisioning and there must be at least one Cobbler profile for every distribution added.
For example, two profiles might be created for a Web server and a desktop configuration.
While both profiles use the same distribution, the profiles are for different installation types.</simpara>
<simpara>For information about creating and configuring Kickstart and &ay;
profiles in the &susemgr;
interface, refer to <xref linkend="_ref.webui.systems.autoinst.profiles"/>.</simpara>
<simpara>Use <command>cobbler</command> to create profiles on the command line:</simpara>
<screen>{prompt.root}cobbler profile add --name=string --distro=string [--kickstart=url] \
  [--virt-file-size=gigabytes] [--virt-ram=megabytes]</screen>
<simpara>The <option>--name=</option><replaceable>string</replaceable> is the unique label for the profile, such as <literal>sles12webserver</literal> or <literal>sles12workstation</literal>.</simpara>
<simpara>The <option>--distro=</option><replaceable>string</replaceable> option specifies the distribution that will be used for this particular profile.
For adding distributions, see <xref linkend="_advanced.topics.cobbler.adddistro"/>.</simpara>
<simpara>The <option>--kickstart=</option><replaceable>url</replaceable> option specifies the location of the Kickstart file (if available).</simpara>
<simpara>The <option>--virt-file-size=</option><replaceable>gigabytes</replaceable> option allows you to set the size of the virtual guest file image.
The default is 5 GB.</simpara>
<simpara>The <option>--virt-ram=</option><replaceable>megabytes</replaceable> option specifies how many MB of physical RAM a virtual guest can consume.
The default is 512 MB.</simpara>
</section>
<section xml:id="_advanced.topics.cobbler.addsystem"><title>Adding a System to Cobbler</title><simpara>Once the distributions and profiles for Cobbler have been created, add systems to Cobbler.
System records map a piece of hardware on a client with the cobbler profile assigned to run on it.</simpara>
<note>
<simpara>If you are provisioning via <command>koan</command> and PXE menus alone, it is not required to create system records.
They are useful when system-specific Kickstart templating is required or to establish that a specific system should always get specific content installed.
If a client is intended for a certain role, system records should be created for it.</simpara>
</note>
<simpara>For information about creating and configuring automated installation from the &susemgr;
interface, refer to <xref linkend="_s4_sm_system_details_kick"/>.</simpara>
<simpara>The following command adds a system to the Cobbler configuration:</simpara>
<screen>{prompt.root}cobbler system add --name=string --profile=string \
  --mac-address=AA:BB:CC:DD:EE:FF</screen>
<simpara>The <option>--name=</option><replaceable>string</replaceable> is the unique label for the system, such as <literal>engineering_server</literal> or <literal>frontoffice_workstation</literal>.</simpara>
<simpara>The <option>--profile=</option><replaceable>string</replaceable> specifies the name of one of the profiles added in <xref linkend="_advanced.topics.cobbler.addprofile"/>.</simpara>
<simpara>The <option>--mac-address=</option><replaceable>AA:BB:CC:DD:EE:FF</replaceable> option allows systems with the specified MAC address automatically being provisioned to the profile associated with the system record when they are being installed.</simpara>
<simpara>For more options, such as setting hostname or IP addresses, refer to the Cobbler manpage (<command>man cobbler</command>).</simpara>
</section>
<section xml:id="_advanced.topics.cobbler.templates"><title>Using Cobbler Templates</title><simpara>The &susemgr;
Web interface facilitates creating variables for use with Kickstart distributions and profiles.
To create a Kickstart profile variable, refer to <xref linkend="_s4_sm_system_kick_details_variables"/>.</simpara>
<simpara>Kickstart variables are part of an infrastructural change in &susemgr;
to support templating in Kickstart files.
Kickstart templates are files describing how to build actual Kickstart files rather than creating specific Kickstarts.</simpara>
<simpara>These templates are shared by various profiles and systems that have their own variables and corresponding values.
These variables modify the templates and a template engine parses the template and variable data into a usable Kickstart file.
Cobbler uses an advanced template engine called Cheetah that provides support for templates, variables, and snippets.</simpara>
<simpara>Advantages of using templates include:</simpara>
<itemizedlist>
<listitem>
<para>Robust features that allow administrators to create and manage large amounts of profiles or systems without duplication of effort or manually creating Kickstarts for every unique situation.</para>
</listitem>
<listitem>
<para>While templates can become complex and involve loops, conditionals and other enhanced features and syntax, you can keep them simple by creating Kickstart files without such complexity.</para>
</listitem>
</itemizedlist>
<section xml:id="_advanced.topics.cobbler.templates.usage"><title>Using Templates</title><simpara>Kickstart templates can have static values for certain common items such as PXE image file names, subnet addresses, and common paths such as <filename>/etc/sysconfig/network-scripts/</filename>
.
However, templates differ from standard Kickstart files in their use of variables.</simpara>
<simpara>For example, a standard Kickstart file may have a networking section similar to the following:</simpara>
<screen>{prompt.root}network --device=eth0 --bootproto=static --ip=192.168.100.24 \
  --netmask=255.255.255.0 --gateway=192.168.100.1 --nameserver=192.168.100.2</screen>
<simpara>In a Kickstart template file, the networking section would rather look like this:</simpara>
<screen>{prompt.root}network --device=$net_dev --bootproto=static --ip=$ip_addr \
  --netmask=255.255.255.0 --gateway=$my_gateway --nameserver=$my_nameserver</screen>
<simpara>These variables will be substituted with the values set in your Kickstart profile variables or in your system detail variables.
If the same variables are defined in both the profile and the system detail, then the system detail variable takes precedence.</simpara>
<note>
<simpara>The template for the autoinstallation has syntax rules, using punctuation symbols.
To avoid clashes, they need to be properly treated.</simpara>
</note>
<simpara>In case the autoinstallation scenario contains any shell script using variables like <literal>$(example)</literal>, its content should be escaped by using the backslash symbol: <literal>\$(example)</literal>.</simpara>
<simpara>If the variable named <literal>example</literal> is defined in the autoinstallation snippet, the templating engine will evaluate <literal>$example</literal> with its content.
If there is no such variable, the content will be left unchanged.
Escaping the <keycap>$</keycap>
 symbol will prevent the templating engine to perform its evaluation as an internal variable.
Long scripts or strings can be escaped by wrapping them with the <literal>\#raw</literal> and <literal>\#end raw</literal> directives.
For example:</simpara>
<screen>#raw
#!/bin/bash
for i in {0..2}; do
 echo "$i - Hello World!"
done
#end raw</screen>
<simpara>Also, pay attention to similar scenarios like the following:</simpara>
<screen>#start some section (this is a comment)
echo "Hello, world"
#end some section (this is a comment)</screen>
<simpara>Any line with a <keycap>#</keycap>
 symbol followed by a whitespace is treated as a comment and is therefore not evaluated.</simpara>
<simpara>For more information about Kickstart templates, refer to the Cobbler project page at:</simpara>
<simpara><link xl:href="https://fedorahosted.org/cobbler/wiki/KickstartTemplating">https://fedorahosted.org/cobbler/wiki/KickstartTemplating</link></simpara>
</section>
<section xml:id="_advanced.topics.cobbler.templates.snippets"><title>Kickstart Snippets</title><simpara>If you have common configurations across all Kickstart templates and profiles, you can use the Snippets feature of Cobbler to take advantage of code reuse.</simpara>
<simpara>Kickstart snippets are sections of Kickstart code that can be called by a <option>$SNIPPET()</option> function that will be parsed by Cobbler and substituted with the contents of the snippet.</simpara>
<simpara>For example, you might have a common hard drive partition configuration for all servers, such as:</simpara>
<screen>clearpart --all
part /boot --fstype ext3 --size=150 --asprimary
part / --fstype ext3 --size=40000 --asprimary
part swap --recommended

part pv.00 --size=1 --grow

volgroup vg00 pv.00
logvol /var --name=var vgname=vg00 --fstype ext3 --size=5000</screen>
<simpara>Save this snippet of the configuration to a file like <filename>my_partition</filename>
 and place the file in <filename>/var/lib/cobbler/snippets/</filename>
, where Cobbler can access it.</simpara>
<simpara>Use the snippet by calling the <option>$SNIPPET()</option> function in your Kickstart templates.
For example:</simpara>
<screen>$SNIPPET('my_partition')</screen>
<simpara>Wherever you invoke that function, the Cheetah parser will substitute the function with the snippet of code contained in the <filename>my_partition</filename>
 file.</simpara>
</section>
</section>
<section xml:id="_advanced.topics.cobbler.koan"><title>Using Koan</title><simpara>Whether you are provisioning guests on a virtual machine or reinstalling a new distribution on a running system, koan works in conjunction with Cobbler to provision systems.</simpara>
<section xml:id="_advanced.topics.cobbler.koan.virt"><title>Using Koan to Provision Virtual Systems</title><simpara>If you have created a virtual machine profile as documented in <xref linkend="_advanced.topics.cobbler.addprofile"/>, you can use <command>koan</command> to initiate the installation of a virtual guest on a system.</simpara>
<simpara>For example, create a Cobbler profile with the following command:</simpara>
<screen>{prompt.root}cobbler add profile --name=virtualfileserver \
  --distro=sles12-x86_64-server --virt-file-size=20 --virt-ram=1000</screen>
<simpara>This profile is for a fileserver running &sls;&#160;
12 with a 20 GB guest image size and allocated 1 GB of system RAM.</simpara>
<simpara>To find the name of the virtual guest system profile, run the following <command>koan</command> command:</simpara>
<screen>{prompt.root}koan --server=hostname --list-profiles</screen>
<simpara>This command lists all the available profiles created with <command>cobbler
    profile add</command>.</simpara>
<simpara>Start creating the image file and the installation of the virtual guest system:</simpara>
<screen>{prompt.root}koan --virt --server=cobbler-server.example.com \
  --profile=virtualfileserver --virtname=marketingfileserver</screen>
<simpara>The command specifies that a virtual guest system be created from the Cobbler server (hostname <literal role="server">cobbler-server.example.com</literal>
) using the <literal>virtualfileserver</literal> profile.
The <option>virtname</option> option specifies a label for the virtual guest, which by default is the system&#8217;s MAC address.</simpara>
<simpara>Once the installation of the virtual guest is complete, it can be used as any other virtual guest system.</simpara>
</section>
<section xml:id="_advanced.topics.cobbler.koan.reinstall"><title>Using Koan to Reinstall Running Systems</title><simpara><command>koan</command> can replace a still running system with a new installation from the available Cobbler profiles by executing the following command <emphasis>on the system to be reinstalled</emphasis>:</simpara>
<screen>{prompt.root}koan --replace-self --server=hostname --profile=name</screen>
<simpara>This command, running on the system to be replaced, will start the provisioning process and replace its own system using the profile in <option>--profile=name</option> on the Cobbler server specified in <option>--server=hostname</option>.</simpara>
</section>
</section>
<section xml:id="_advanced.topics.cobbler.buildiso"><title>Building ISOs with Cobbler</title><simpara>Some environments might lack PXE support.
The cobbler buildiso command provides functionality to create a boot ISO image containing a set of distributions and kernels, and a menu similar to PXE network installations.
Define the name and output location of the boot ISO using the <option>--iso</option> option.</simpara>
<note>
<title>ISO Build Directory</title>
<simpara>Depending on Cobbler related systemd settings (see <filename>/usr/lib/systemd/system/cobblerd.service</filename>
) writing ISO images to public <filename>tmp</filename>
 directories will not work.</simpara>
</note>
<screen>{prompt.root}cobbler buildiso --iso=/path/to/boot.iso</screen>
<simpara>The boot ISO includes all profiles and systems by default.
Limit these profiles and systems using the <option>--profiles</option> and <option>--systems</option> options.</simpara>
<screen>{prompt.root}cobbler buildiso --systems="system1,system2,system3" \
  --profiles="profile1,profile2,profile3"</screen>
<note>
<simpara>Building ISOs with the <command>cobbler buildiso</command> command is supported for all architectures except the &zsystems;
 architecture.</simpara>
</note>
</section>
</chapter>
<chapter xml:id="_advanced.topics.virtualization"><title>Virtualization</title><info><abstract>
<simpara>&susemgr;
 allows you to autoinstall and manage &xen;
 and &kvm;{vmguest}
s on a registered &vmhost;
.
To autoinstall a &vmguest;
, an autoinstallable distribution and an autoinstallation profile (&ay;
 or &kickstart;
) need to exist on &susemgr;
. &vmguest;
s registered with &susemgr;
 can be managed like <quote>regular</quote>
 machines.
In addition, basic &vmguest;
 management tasks such as (re)starting and stopping or changing processor and memory allocation can be carried out using &susemgr;
.</simpara>
<simpara><emphasis>The following documentation is valid in the context of
    traditional clients.  Salt minions must be treated differently:
    autoinstallation is still not supported and libvirt hosts are
    supported read-only.</emphasis></simpara>
</abstract></info>
<warning>
<title>Limitation to Xen and KVM Guests</title>
<simpara>Autoinstalling and managing &vmguest;
s via &susemgr;
is limited to &xen;
and &kvm;
guests. &susemgr;
uses <literal role="library">libvirt</literal>
 for virtual machine management.
Currently, virtual machines from other virtualization solutions such as VMware* or VirtualBox*, are recognized as &vmguest;
s, but cannot be managed from within &susemgr;
.</simpara>
</warning>
<section xml:id="_sec.virtualization.autoinstall"><title>Autoinstalling &vmguest; s</title><simpara>With &susemgr;
you can automatically deploy &xen;
and &kvm;{vmguest}
s using &ay;
or &kickstart;
profiles.
It is also possible to automatically register the &vmguest;
s, so they can immediately be managed by &susemgr;
.</simpara>
<section xml:id="_sec.virtualization.autoinstall.req_mgr"><title>Requirements on &susemgr;</title><simpara>Setting up and managing &vmguest;
s with &susemgr;
does not require special configuration options.
However, you need to provide activation keys for the &vmhost;
and the &vmguest;
s, an autoinstallable distribution and an autoinstallation profile.
To automatically register &vmguest;
s with &susemgr;
, a bootstrap script is needed.</simpara>
<section xml:id="_sec.virtualzation.autoinstall.req_mgr.keys"><title>Activation Keys</title><simpara>Just like any other client, &vmhost;
and &vmguest;
s need to be registered with &susemgr;
using activation keys.
Find details on how to set up activation keys at <xref linkend="_create.act.keys"/>.
While there are no special requirements for a &vmguest;
 key, at least the following requirements must be met for the &vmhost;
 activation key.</simpara>
<itemizedlist>
<title>&vmhost;Activation Key: Minimum Requirements</title>
<listitem>
<para>Entitlements: Provisioning, Virtualization Platform.</para>
</listitem>
<listitem>
<para>Packages: <literal role="resource">rhn-virtualization-host</literal> , <literal role="resource">osad</literal> .</para>
<simpara>If you want to manage the &vmhost;
system from &susemgr;
(e.g.
by executing remote scripts), the package <literal role="resource">rhncfg-actions</literal>
needs to be installed as well.</simpara>
</listitem>
</itemizedlist>
</section>
<section xml:id="_sec.virtualzation.autoinstall.req_mgr.inst_source"><title>Setting up an Autoinstallable Distribution</title><simpara>To autoinstall clients from &susemgr;
, you need to provide an <quote>autoinstallable distribution</quote>
, also referred to as autoinstallable tree or installation source.
This installation source needs to be made available through the file system of the &susemgr;
 host.
It can for example be a mounted local or remote directory or a <quote>loop-mounted</quote>
 ISO image.
It must match the following requirements:</simpara>
<itemizedlist>
<listitem>
<para>Kernel and initrd location:</para>
</listitem>
</itemizedlist>
<itemizedlist>
<title>RedHat / Generic RPM</title>
<listitem>
<para>images/pxeboot/vmlinuz</para>
</listitem>
<listitem>
<para>images/pxeboot/initrd.img</para>
</listitem>
</itemizedlist>
<itemizedlist>
<title>SUSE</title>
<listitem>
<para>boot/<replaceable>arch</replaceable>/loader/initrd</para>
</listitem>
<listitem>
<para>boot/<replaceable>arch</replaceable>/loader/linux</para>
<itemizedlist>
<listitem>
<para>The <guimenu>Base Channel</guimenu> needs to match the autoinstallable distribution.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
<important>
<title>Autoinstallation package sources</title>
<simpara>There is a fundamental difference between RedHat and &suse;
systems regarding the package sources for autoinstallation.
The packages for a RedHat installation are being fetched from the <guimenu>Base Channel</guimenu>
.
Packages for installing &suse;
 systems are being fetched from the autoinstallable distribution.</simpara>
<simpara>As a consequence, the autoinstallable distribution for a &suse;
system has to be a complete installation source (same as for a regular installation).</simpara>
</important>
<orderedlist numeration="arabic">
<title>Procedure: Creating Autoinstallable Distribution</title>
<listitem>
<para>Make sure an installation source is available from a local directory. The data source can be any kind of network resource, a local directory or an ISO image (which has to be <quote>loop-mounted</quote> ). Files and directories must be world readable.</para>
</listitem>
<listitem>
<para>Log in to the &susemgr; Web interface and navigate to <menuchoice><guimenu>Systems</guimenu> <guisubmenu>Autoinstallation</guisubmenu> <guisubmenu>Distributions</guisubmenu> <guimenuitem>Create Distribution</guimenuitem></menuchoice> .</para>
</listitem>
<listitem>
<para>Fill out the form <guimenu>Create Autoinstallable Distribution</guimenu> as follows:</para>
<variablelist>
<varlistentry>
<term><guimenu>Distribution Label</guimenu></term>
<listitem>
<simpara>Choose a unique name for the distribution.
Only letters, numbers, hyphens, periods, and underscores are allowed; the minimum length is 4 characters.
This field is mandatory.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Tree Path</guimenu></term>
<listitem>
<simpara>Absolute local disk path to installation source.
This field is mandatory.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Base Channel</guimenu></term>
<listitem>
<simpara>Channel matching the installation source.
This channel is the package source for non-&suse;
installations.
This field is mandatory.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Installer Generation</guimenu></term>
<listitem>
<simpara>Operating system version matching the installation source.
This field is mandatory.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Kernel Options</guimenu></term>
<listitem>
<simpara>Options passed to the kernel when booting for the installation.
There is no need to specify the <option>install=</option> parameter since it will automatically be added.
Moreover, the parameters <option>self_update=0 pt.options=self_update</option> are added automatically to prevent AutoYaST from updating itself during the system installation.
This field is optional.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term><guimenu>Post Kernel Options</guimenu></term>
<listitem>
<simpara>Options passed to the kernel when booting the installed system for the first time.
This field is optional.</simpara>
</listitem>
</varlistentry>
</variablelist>
</listitem>
<listitem>
<para>Save your settings by clicking <guimenu>Create Autoinstallable Distribution</guimenu> .</para>
</listitem>
</orderedlist>
<simpara>To edit an existing <guimenu>Autoinstallable Distribution</guimenu>
, go to <menuchoice><guimenu>Systems</guimenu> <guisubmenu>Autoinstallation</guisubmenu> <guimenuitem>Distributions</guimenuitem></menuchoice>
 and click on a <guimenu>Label</guimenu>
.
Make the desired changes and save your settings by clicking <guimenu>Update Autoinstallable Distribution</guimenu>
.</simpara>
</section>
<section xml:id="_sec.virtualzation.autoinstall.req_mgr.profile"><title>Providing an Autoinstallation Profile</title><simpara>Autoinstallation profiles (&ay;
or &kickstart;
files) contain all the installation and configuration data needed to install a system without user intervention.
They may also contain scripts that will be executed after the installation has completed.</simpara>
<simpara>All profiles can be uploaded to &susemgr;
and be edited afterwards.
Kickstart profiles can also be created from scratch with &susemgr;
.</simpara>
<simpara>A minimalist &ay;
profile including a script for registering the client with &susemgr;
is listed in <xref linkend="_advanced.topics.app.ay.example_simple"/>.
For more information, examples and HOWTOs on &ay;
 profiles, refer to <emphasis><phrase role="ref">SUSE Linux Enterprise AutoYaST</phrase></emphasis>
 (<link xl:href="https://www.suse.com/documentation/sles-12/book_autoyast/data/book_autoyast.html">https://www.suse.com/documentation/sles-12/book_autoyast/data/book_autoyast.html</link>). For more information on &kickstart;
 profiles, refer to your RedHat documentation.</simpara>
<section xml:id="_sec.virtualzation.autoinstall.req_mgr.profile.upload"><title>Uploading an Autoinstallation Profile</title><orderedlist numeration="arabic">
<listitem>
<para>Log in to the &susemgr; Web interface and open <menuchoice><guimenu>Systems</guimenu> <guisubmenu>Autoinstallation</guisubmenu> <guisubmenu>Profiles</guisubmenu> <guimenuitem>Upload New Kickstart/AutoYaST File</guimenuitem></menuchoice> .</para>
</listitem>
<listitem>
<para>Choose a unique name for the profile. Only letters, numbers, hyphens, periods, and underscores are allowed; the minimum length is 6 characters. This field is mandatory.</para>
</listitem>
<listitem>
<para>Choose an <guimenu>Autoinstallable Tree</guimenu> from the drop-down menu. If no <guimenu>Autoinstallable Tree</guimenu> is available, you need to add an Autoinstallable Distribution. Refer to <xref linkend="_sec.virtualzation.autoinstall.req_mgr.inst_source"/> for instructions.</para>
</listitem>
<listitem>
<para>Choose a <guimenu>Virtualization Type</guimenu> from the drop-down menu. &kvm; and &xen; (para-virtualized and fully-virtualized) are available. Do not choose <guimenu>Xen Virtualized Host</guimenu> here.</para>
</listitem>
<listitem>
<para>Scroll down to the <guimenu>File to Upload</guimenu> dialog, click <guimenu>Browse</guimenu> to select it, then click <guimenu>Upload File</guimenu> .</para>
</listitem>
<listitem>
<para>The uploaded file will be displayed in the <guimenu>File Contents</guimenu> section, where you can edit it.</para>
</listitem>
<listitem>
<para>Click <guimenu>Create</guimenu> to store the profile.</para>
</listitem>
</orderedlist>
<simpara>To edit an existing profile, go to <menuchoice><guimenu>Systems</guimenu> <guisubmenu>Autoinstallation</guisubmenu> <guimenuitem>Profiles</guimenuitem></menuchoice>
 and click on a <guimenu>Label</guimenu>
.
Make the desired changes and save your settings by clicking <guimenu>Create</guimenu>
.</simpara>
<note>
<title>Editing existing &kickstart;profiles</title>
<simpara>If you are changing the <guimenu>Virtualization Type</guimenu>
 of an existing &kickstart;
 profile, it may also modify the bootloader and partition options, potentially overwriting any user customizations.
Be sure to review the <guimenu>Partitioning</guimenu>
 tab to verify these settings when changing the <guimenu>Virtualization Type</guimenu>
.</simpara>
</note>
</section>
<section xml:id="_sec.virtualzation.autoinstall.req_mgr.profile.generate"><title>Creating a Kickstart Profile</title><note>
<simpara>Currently it is only possible to create autoinstallation profiles for RHEL systems.
If installing a &sls;
system, you need to upload an existing &ay;
profile as described in <xref linkend="_sec.virtualzation.autoinstall.req_mgr.profile.upload"/>.</simpara>
</note>
<orderedlist xml:id="_pro.at.virtualzation.autoinstall.ks.profile.generate" numeration="arabic">
<listitem>
<para>Log in to the &susemgr; Web interface and go to <menuchoice><guimenu>Systems</guimenu> <guisubmenu>Autoinstallation</guisubmenu> <guisubmenu>Profiles</guisubmenu> <guimenuitem>Create New Kickstart File</guimenuitem></menuchoice> .</para>
</listitem>
<listitem xml:id="_pro.at.virtualzation.autoinstall.ks.profile.generate.name">
<para>Choose a unique name for the profile. The minimum length is 6 characters. This field is mandatory.</para>
</listitem>
<listitem xml:id="_pro.at.virtualzation.autoinstall.ks.profile.generate.bc">
<para>Choose a <guimenu>Base Channel</guimenu> . This channel is the package source for non-&suse; installations and must match the <guimenu>Autoinstallable Tree</guimenu> . This field is mandatory.</para>
</listitem>
<listitem>
<para>Choose an <guimenu>Autoinstallable Tree</guimenu> from the drop-down menu. If no <guimenu>Autoinstallable Tree</guimenu> is available, you need to add an Autoinstallable Distribution. Refer to <xref linkend="_sec.virtualzation.autoinstall.req_mgr.inst_source"/> for instructions.</para>
</listitem>
<listitem>
<para>Choose a <guimenu>Virtualization Type</guimenu> from the drop-down menu. &kvm; and &xen; (para-virtualized and fully-virtualized) are available. Do not choose <guimenu>Xen Virtualized Host</guimenu> here.</para>
</listitem>
<listitem>
<para>Click the <guimenu>Next</guimenu> button to continue to <xref linkend="_pro.at.virtualzation.autoinstall.ks.profile.generate.name"/>.</para>
</listitem>
<listitem>
<para>Select the location of the distribution files for the installation of your &vmguest; s. There should already be a <guimenu>Default Download Location</guimenu> filled out and selected for you on this screen. Click the <guimenu>Next</guimenu> button to continue to <xref linkend="_pro.at.virtualzation.autoinstall.ks.profile.generate.bc"/>.</para>
</listitem>
<listitem>
<para>Choose a &rootuser; password for the &vmguest; s. Click the <guimenu>Finish</guimenu> button to generate the profile.</para>
<simpara>This completes &kickstart;
profile creation.
After completing <xref linkend="_pro.at.virtualzation.autoinstall.ks.profile.generate.bc"/>, you are taken to the newly-created &kickstart;
profile.
You may browse through the various tabs of the profile and modify the settings as you see fit, but this is not necessary as the default settings should work well for the majority of cases.</simpara>
</listitem>
</orderedlist>
</section>
<section xml:id="_sec.virtualzation.autoinstall.req_mgr.profile.scripts"><title>Adding a Registration Script to the Autoinstallation Profile</title><simpara>A &vmguest;
that is autoinstalled does not get automatically registered.
Adding a section to the autoinstallation profile that invokes a bootstrap script for registration will fix this.
The following procedure describes adding a corresponding section to an &ay;
profile.
Refer to your RedHat Enterprise Linux documentation for instructions on adding scripts to a &kickstart;
file.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>First, provide a bootstrap script on the &susemgr; :</para>
<itemizedlist>
<listitem>
<para>Create a bootstrap script for &vmguest; s on the &susemgr; as described in <xref linkend="_generate.bootstrap.script"/>.</para>
</listitem>
<listitem>
<para>Log in as &rootuser; to the konsole of &susemgr; and go to <filename>/srv/www/htdocs/pub/bootstrap</filename> . Copy <filename>bootstrap.sh</filename> (the bootstrap script created in the previous step) to e.g. <filename>bootstrap_vm_guests.sh</filename> in the same directory.</para>
</listitem>
<listitem>
<para>Edit the newly created file according to your needs. The minimal requirement is to include the activation key for the &vmguest; s (see <xref linkend="_sec.virtualzation.autoinstall.req_mgr.keys"/> for details). We strongly recommend to also include one or more GPG keys (for example, your organization key and package signing keys).</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>Log in to the &susemgr; Web interface and go to <menuchoice><guimenu>Systems</guimenu> <guisubmenu>Autoinstallation</guisubmenu> <guimenuitem>Profiles</guimenuitem></menuchoice> . Click on the profile that is to be used for autoinstalling the &vmguest; s to open it for editing.</para>
<simpara>Scroll down to the <guimenu>File Contents</guimenu>
section where you can edit the &ay;
XML file.
Add the following snippet at the end of the XML file right before the closing <literal>&lt;/profile&gt;</literal> tag and replace the given IP address with the address of the &susemgr;
server.
See <xref linkend="_advanced.topics.app.ay.example_simple"/>for an example script.</simpara>
<screen>&lt;scripts&gt;
  &lt;init-scripts config:type="list"&gt;
    &lt;script&gt;
      &lt;interpreter&gt;shell &lt;/interpreter&gt;
      &lt;location&gt;
        http://`192.168.1.1`/pub/bootstrap/bootstrap_vm_guests.sh
      &lt;/location&gt;
    &lt;/script&gt;
  &lt;/init-scripts&gt;
&lt;/scripts&gt;</screen>
<important>
<title>Only one <literal>&lt;scripts&gt;</literal> section allowed</title>
<simpara>If your &ay;
profile already contains a <literal>&lt;scripts&gt;</literal> section, do not add a second one, but rather place the <literal>&lt;script&gt;</literal> part above within the existing <literal>&lt;scripts&gt;</literal> section!</simpara>
</important>
</listitem>
<listitem>
<para>Click <guimenu>Update</guimenu> to save the changes.</para>
</listitem>
</orderedlist>
</section>
</section>
</section>
<section xml:id="_sec.virtualization.autoinstall.req_vmhost"><title>&vmhost; Setup</title><simpara>A &vmhost;
system serving as a target for autoinstalling &vmguest;
s from &susemgr;
must be capable of running guest operating systems.
This requires either &kvm;
or &xen;
being properly set up.
For installation instructions for &sls;
systems refer to the <emphasis><phrase role="ref">SLES Virtualization Guide</phrase></emphasis>
 available from <link xl:href="https://www.suse.com/documentation/sles-12/book_virt/data/book_virt.html">https://www.suse.com/documentation/sles-12/book_virt/data/book_virt.html</link>.
For instructions on setting up a RedHat &vmhost;
 refer to your RedHat Enterprise Linux documentation.</simpara>
<simpara>Since &susemgr;
uses <literal role="library">libvirt</literal>
 for &vmguest;
 installation and management, the <literal role="daemon">libvirtd</literal>
 needs to run on the &vmhost;
.
The default <literal role="library">libvirt</literal>
 configuration is sufficient to install and manage &vmguest;
s from &susemgr;
.
However, in case you want to access the VNC console of a &vmguest;
 as a non-&rootuser;
 user, you need to configure <literal role="library">libvirt</literal>
 appropriately.
Configuration instructions for <literal role="library">libvirt</literal>
 on &sls;
 are available in the <emphasis><phrase role="ref">SLES Virtualization
    Guide</phrase></emphasis>
 available from <link xl:href="https://www.suse.com/documentation/sles-12/book_virt/data/book_virt.html">https://www.suse.com/documentation/sles-12/book_virt/data/book_virt.html</link> available from <link xl:href="http://www.suse.com/documentation/sles11/">http://www.suse.com/documentation/sles11/</link>.
For instructions for a RedHat &vmhost;
 refer to your RedHat Enterprise Linux documentation.</simpara>
<simpara>Apart from being able to serve as a host for &kvm;
or &xen;
guests, which are managed by <literal role="library">libvirt</literal>
, a &vmhost;
 must be registered with &susemgr;
.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>Make sure either &kvm; or &xen; is properly set up.</para>
</listitem>
<listitem>
<para>Make sure the <literal role="daemon">libvirtd</literal> is running.</para>
</listitem>
<listitem>
<para>Register the &vmhost; with &susemgr; :</para>
<itemizedlist>
<listitem>
<para>Create a bootstrap script on the &susemgr; as described in <xref linkend="_generate.bootstrap.script"/>.</para>
</listitem>
<listitem>
<para>Download the bootstrap script from <literal>susemanager.example.com/pub/bootstrap/bootstrap.sh</literal> to the &vmhost; .</para>
</listitem>
<listitem>
<para>Edit the bootstrap script according to your needs. The minimal requirement is to include the activation key for the &vmhost; (see <xref linkend="_sec.virtualzation.autoinstall.req_mgr.keys"/> for details). We strongly recommend to also include one or more GPG keys (for example, your organization key and package signing keys).</para>
</listitem>
<listitem>
<para>Execute the bootstrap script to register the &vmhost; .</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para></para>
<simpara>Once the registration process is finished and all packages have been installed, enable the <literal role="daemon">osad</literal>
(Open Source Architecture Daemon). On a &sls;
system this can be achieved by running the following commands as user &rootuser;
:</simpara>
<screen>systemctl stop rhnsd
systemctl disable rhnsd</screen>
<screen>systemctl enable osad
systemctl start osad</screen>
<important>
<title><literal role="daemon">osad</literal>Together with <literal role="daemon">rhnsd</literal></title>
<simpara>The <literal role="daemon">rhnsd</literal>
 daemon checks for scheduled actions every four hours, so it can take up to four hours before a scheduled action is carried out.
If many clients are registered with &susemgr;
, this long interval ensures a certain level of load balancing since not all clients act on a scheduled action at the same time.</simpara>
</important>
</listitem>
</orderedlist>
<simpara>However, when managing &vmguest;
s, you usually want actions like rebooting a &vmguest;
to be carried out immediately. Adding <literal role="daemon">osad</literal>
 ensures that.
The <literal role="daemon">osad</literal>
 daemon receives commands over the jabber protocol from &susemgr;
 and commands are instantly executed.
Alternatively you may schedule actions to be carried out at a fixed time in the future (whereas with <literal role="daemon">rhnsd</literal>
 you can only schedule for a time in the future plus up to four hours).</simpara>
<simpara>+</simpara>
</section>
<section xml:id="_sec.virtualization.autoinstall.installation"><title>Autoinstalling &vmguest; s</title><simpara>Once all requirements on the &susemgr;
and the &vmhost;
are met, you can start to autoinstall &vmguest;
s on the host.
Note that &vmguest;
s will not be automatically registered with &susemgr;
, therefore we strongly recommend to modify the autoinstallation profile as described in <xref linkend="_sec.virtualzation.autoinstall.req_mgr.profile.scripts"/>. &vmguest;
s need to be registered to manage them with &susemgr;
.
Proceed as follows to autoinstall a &vmguest;
;.</simpara>
<important>
<title>No parallel Autoinstallations on &vmhost;</title>
<simpara>It is not possible to install more than one &vmguest;
at a time on a single &vmhost;
.
When scheduling more than one autoinstallation with &susemgr;
make sure to choose a timing, that starts the next installation after the previous one has finished.
If a guest installation starts while another one is still running, the running installation will be cancelled.</simpara>
</important>
<orderedlist numeration="arabic">
<listitem>
<para>Log in to the &susemgr; Web interface and click the <guimenu>Systems</guimenu> tab.</para>
</listitem>
<listitem>
<para>Click the &vmhost; 's name to open its <guimenu>System Status</guimenu> page.</para>
</listitem>
<listitem>
<para>Open the form for creating a new &vmguest; by clicking <menuchoice><guimenu>Virtualization</guimenu> <guimenuitem>Provisioning</guimenuitem></menuchoice> . Fill out the form by choosing an autoinstallation profile and by specifying a name for the &vmguest; (must not already exist on &vmhost; ). Choose a proxy if applicable and enter a schedule. To change the &vmguest; 's hardware profile and configuration options, click <guimenu>Advanced Options</guimenu> .</para>
</listitem>
<listitem>
<para>Finish the configuration by clicking <guimenu>Schedule Autoinstallation and Finish</guimenu> . The <guimenu>Session Status</guimenu> page opens for you to monitor the autoinstallation process.</para>
</listitem>
</orderedlist>
<note>
<title>Checking the Installation Log</title>
<simpara>To view the installation log, click <menuchoice><guimenu>Events</guimenu> <guimenuitem>History</guimenuitem></menuchoice>
 on the <guimenu>Session Status</guimenu>
 page.
On the <guimenu>System History Event</guimenu>
 page you can click a <guimenu>Summary</guimenu>
 entry to view a detailed log.</simpara>
<simpara>In case an installation has failed, you can <guimenu>Reschedule</guimenu>
 it from this page once you have corrected the problem.
You do not have to configure the installation again.</simpara>
<simpara>If the event log does not contain enough information to locate a problem, log in to the &vmhost;
console and read the log file <filename>/var/log/up2date</filename>
.
If you are using the <literal role="daemon">rhnsd</literal>
, you may alternatively immediately trigger any scheduled actions by calling <command>rhn_ckeck</command> on the &vmhost;
.
Increase the command&#8217;s verbosity by using the options <option>-v</option>, <option>-vv</option>, or <option>-vvv</option>, respectively.</simpara>
</note>
</section>
</section>
<section xml:id="_sec.virtualization.vmguest_manage"><title>Managing &vmguest; s</title><simpara>Basic &vmguest;
management actions such as restarting or shutting down a virtual machine as well as changing the CPU and memory allocation can be carried out in the &susemgr;
Web interface if the following requirements are met:</simpara>
<itemizedlist>
<listitem>
<para>&vmhost; must be a &kvm; or &xen; host.</para>
</listitem>
<listitem>
<para><literal role="daemon">libvirtd</literal> must be running on &vmhost; .</para>
</listitem>
<listitem>
<para>&vmhost; and &vmguest; must be registered with &susemgr; .</para>
</listitem>
</itemizedlist>
<simpara>All actions can be triggered in the &susemgr;
Web interface from the <guimenu>Virtualization</guimenu>
 page of the &vmhost;
.
Navigate to this page by clicking the <guimenu>Systems</guimenu>
 tab.
On the resulting page, click the &vmhost;
's name and then on <guimenu>Virtualization</guimenu>
.
This page lists all &vmguest;
s for this host, known to &susemgr;
.</simpara>
<section xml:id="_sec.virtualization.vmguest_manage.details"><title>Displaying a &vmguest; 's Profile</title><simpara>Click the name of a &vmguest;
on the &vmhost;
's <guimenu>Virtualization</guimenu>
 page to open its profile page with detailed information about this guest.
For details, refer to <xref linkend="_ref.webui.systems.systems"/>.</simpara>
<simpara>A profile page for a virtual system does not differ from a regular system&#8217;s profile page.
You can perform the same actions (e.g.
installing software or changing its configuration).</simpara>
</section>
<section xml:id="_sec.virtualization.vmguest_manage.status"><title>Starting, Stopping, Suspending and Resuming a &vmguest;</title><simpara>To start, stop, restart, suspend, or resume a &vmguest;
, navigate to the &vmhost;
's <guimenu>Virtualization</guimenu>
 page.
Check one or more <guimenu>Guests</guimenu>
 listed in the table and scroll down to the bottom of the page.
Choose an action from the drop-down list and click <guimenu>Apply Action</guimenu>
. <guimenu>Confirm</guimenu>
 the action on the next page.</simpara>
<note>
<title>Automatically restarting a &vmguest;</title>
<simpara>Automatically restarting a &vmguest;
when the &vmhost;
reboots is not enabled by default on &vmguest;
s and cannot be configured from &susemgr;
.
Refer to your &kvm;
or &xen;
documentation.
Alternatively, you may use <literal role="library">libvirt</literal>
 to enable automatic reboots.</simpara>
</note>
</section>
<section xml:id="_changing_the_cpu_or_ram_allocation_of_a_vmguest"><title>Changing the CPU or RAM allocation of a &vmguest;</title><simpara>To change the CPU or RAM allocation of a &vmguest;
navigate to the &vmhost;
's <guimenu>Virtualization</guimenu>
 page.
Check one or more <guimenu>Guests</guimenu>
 from the table and scroll down to the bottom of the page.
Choose an action from the <guimenu>Set</guimenu>
 drop-down list and provide a new value.
Confirm with <guimenu>Apply Changes</guimenu>
 followed by <guimenu>Confirm</guimenu>
.</simpara>
<simpara>The memory allocation can be changed on the fly, provided the memory ballooning driver is installed on the &vmguest;
.
If this is not the case, or if you want to change the CPU allocation, you need to shutdown the guest first.
Refer to <xref linkend="_sec.virtualization.vmguest_manage.status"/> for details.</simpara>
</section>
<section xml:id="_sec.virtualization.vmguest_manage.delete"><title>Deleting a &vmguest;</title><simpara>To delete a &vmguest;
you must first shut it down as described in <xref linkend="_sec.virtualization.vmguest_manage.status"/>.
Wait at least two minutes to allow the shutdown to finish and then choose <guimenu>Delete Systems</guimenu>
 followed by <guimenu>Apply Action</guimenu>
 and <guimenu>Confirm</guimenu>
.</simpara>
</section>
</section>
</chapter>
<chapter xml:id="_advanced.topics.adding.vmware.esxi.host"><title>Inventorying vCenter/vSphere ESXi Hosts with &susemgr;</title><section xml:id="_introduction_4"><title>Introduction</title><simpara>Foreign virtual hosts (such as vCenter and vSphere ESXi) can be inventoried using the <guimenu>Virtual Host Manager</guimenu>
.
From the vSphere Client you can define roles and permissions for vCenter and vSphere ESXi users allowing vSphere objects and resources to be imported and inventoried by &susemgr;
.
Objects and resources are then displayed as foreign hosts on the &susemgr;<menuchoice><guimenu>Systems</guimenu> <guimenuitem>Virtual Systems</guimenuitem></menuchoice>
 page.</simpara>
<simpara>The following sections will guide you through:</simpara>
<itemizedlist>
<listitem>
<para>Requirements</para>
</listitem>
<listitem>
<para>Overview of permissions and roles</para>
</listitem>
<listitem>
<para>Adding vCenter and vSphere ESXi hosts to SUSE Manager</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_requirements_4"><title>Requirements</title><simpara>The following table displays the default API communication port and required access rights for inventorying objects and resources.</simpara>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="2">
<colspec colname="col_1" colwidth="50*"/>
<colspec colname="col_2" colwidth="50*"/>
<thead>
<row>
<entry align="left" valign="top"><simpara>Ports / Permissions</simpara></entry>
<entry align="left" valign="top"><simpara>Description</simpara></entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>443</simpara></entry>
<entry align="left" valign="top"><simpara>Default port that SUSE Manager uses to access the ESXi API for obtaining infrastructure data</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>read-only</simpara></entry>
<entry align="left" valign="top"><simpara>All vCenter/ESXi objects and resources that should be inventoried by the Virtual Host Manager should be at least assigned the <emphasis>read-only</emphasis> role.
Mark objects and resources with <emphasis>no-access</emphasis> to exclude them from the inventory.</simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
</section>
<section xml:id="_permissions_and_roles_overview"><title>Permissions and Roles Overview</title><simpara>The following section will guide you through assigning user permissions and roles in vCenter/ESXi.</simpara>
<simpara>A user is someone who has been authorized access to an ESXi host.
The Virtual Host Manager (located on the SUSE Manager server) will inventory ESXi data defined by assigned roles and permissions on a user account.</simpara>
<simpara>For example: The user John has been assigned the <emphasis>read-only</emphasis> access role to all servers and datacenters in his company with one exception.
Johns account has been assigned the <emphasis>no-access</emphasis> role on the company&#8217;s <emphasis>Financial Database server </emphasis>.
You decide to use Johns user account and add the ESXi host to SUSE Manager.
During the inventory the<emphasis>
                Financial Database server</emphasis> will be excluded.</simpara>
<simpara>Keep user access roles in mind when planning to add ESXi hosts to SUSE manager.
It is important to understand that SUSE Manager will not inventory any objects or resources assigned with the no-access role on any user account.</simpara>
<tip>
<title>User Roles/Permissions</title>
<simpara>When planning to add new ESXi hosts to SUSE Manager, ask yourself the following question:</simpara>
<simpara><emphasis>Have users assigned to a host been provided with the required roles and
                    permissions for objects and resources that should be inventoried by SUSE
                    Manager?</emphasis></simpara>
</tip>
</section>
<section xml:id="_adding_new_users_and_assigning_roles"><title>Adding New Users and Assigning Roles</title><simpara>See the official vSphere documentation on adding new users and assigning roles.</simpara>
<itemizedlist>
<listitem>
<para><link xl:href="https://pubs.vmware.com/vsphere-50/index.jsp#com.vmware.vsphere.security.doc_50/GUID-D7AEC653-EBC8-4573-B990-D8E58742F8ED.html">Authentication and User Management</link></para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_inventorying_vcenter_vsphere_esxi_hosts"><title>Inventorying vCenter/vSphere ESXi Hosts</title><simpara>The following procedure will guide you through inventorying a VSphere ESXi host with &susemgr;
.</simpara>
<orderedlist numeration="arabic">
<listitem>
<para>From the &susemgr;{webui} select <guimenu>Systems</guimenu> and then <guimenu>Virtual Host Managers</guimenu> from the left navigation bar.</para>
</listitem>
<listitem>
<para>From the upper right corner of the <guimenu>Virtual Host Managers</guimenu> page select <guimenu>Add VMware-based Virtual Host Manager</guimenu> .</para>
</listitem>
<listitem>
<para>From the <guimenu>Add a VMware-based Virtual Host Manager</guimenu> page fill the following fields with your ESXi host data:</para>
<itemizedlist>
<listitem>
<para>Label: Custom name for your Virtual Host Manager</para>
</listitem>
<listitem>
<para>Hostname: FQDN or host IP address</para>
</listitem>
<listitem>
<para>Port: Default ESXi API port</para>
</listitem>
<listitem>
<para>Username: ESXi user</para>
<important>
<simpara>Remember that only objects and resources which match a users defined role will be inventoried.
Set the users role on objects and resources you want inventoried to <emphasis>read-only</emphasis></simpara>
</important>
</listitem>
<listitem>
<para>Password: ESXi users password</para>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
<informalfigure>
<mediaobject>
<imageobject>
<imagedata fileref="./images/systems_virtual_host_managers_vmware.png" width="80%"/>
</imageobject>
<textobject><phrase>systems virtual host managers vmware</phrase></textobject>
</mediaobject>
</informalfigure>
<orderedlist numeration="arabic">
<listitem>
<para>Click the <guimenu>Add Virtual Host Manager</guimenu> button.</para>
</listitem>
<listitem>
<para>From the <guimenu>Virtual Host Managers</guimenu> page select the newly added Virtual Host manager.</para>
</listitem>
<listitem>
<para>From the Virtual Host Managers <guimenu>Properties</guimenu> page select <guimenu>Refresh data from this Virtual Host Manager.</guimenu></para>
<important>
<simpara>If you do not refresh the data from a new Virtual Host Manager, host data will not be inventoried and therefore will not be displayed under <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Virtual Systems</guimenuitem></menuchoice>
.</simpara>
</important>
</listitem>
<listitem>
<para>View inventoried ESXi host objects and resources by selecting <menuchoice><guimenu>Systems</guimenu> <guimenuitem>Virtual Systems</guimenuitem></menuchoice> .</para>
</listitem>
</orderedlist>
</section>
</chapter>
<chapter xml:id="_at.mgr.spacecmd.command.guide"><title>spacecmd Reference</title><section xml:id="_at.spacecmd.introduction"><title>Introduction</title><simpara>The following section will help you become more familiar with the <command>spacecmd</command> command-line interface.
This interface is available for SUSE Manager, Satellite and Spacewalk servers.
spacecmd is written in Python and uses the XML-RPC API provided by the server.</simpara>
<itemizedlist>
<title>What can spacecmd do for me?</title>
<listitem>
<para>Manage almost all aspects of SUSE Manager from the command line with spacecmd</para>
</listitem>
<listitem>
<para>Tab completion is available for all commands</para>
</listitem>
<listitem>
<para>Single commands can be passed to spacecmd without entering the interactive shell (excellent for shell scripts)</para>
</listitem>
<listitem>
<para>May also be accessed and used as an interactive shell</para>
</listitem>
<listitem>
<para>Advanced search methods are available for finding specific systems, thus removing the need to create system groups (nevertheless groups are still recommended)</para>
</listitem>
<listitem>
<para>Complete functionality through the Spacewalk API. Almost all commands that can be executed from the WebUI can be performed via the spacecmd command-line</para>
</listitem>
</itemizedlist>
</section>
<section xml:id="_at.spacecmd.configuration.overview"><title>Configuring spacecmd</title><simpara>The following section provides configuration tips for spacecmd.</simpara>
<section xml:id="_setup_spacecmd_credentials"><title>Setup Spacecmd Credentials</title><simpara>Normally spacecmd prompts you for a username and password each time you attempt to login to the interactive shell.
Alternatively you can configure spacecmd with a credentials file to avoid this requirement.</simpara>
<orderedlist numeration="arabic">
<title>Procedure: Creating a spacecmd Credentials File</title>
<listitem>
<para>Create a hidden spacecmd directory in your home directory and set permissions:</para>
<screen>mkdir ~/.spacecmd
chmod 700 ~/.spacecmd</screen>
</listitem>
<listitem>
<para>Create a <literal>config</literal> file in <filename>~/.spacecmd/</filename> and provide proper permissions:</para>
<screen>touch ~/.spacecmd/config
chmod 600 ~/.spacecmd/config</screen>
</listitem>
<listitem>
<para>Edit the <literal>config</literal> file and add the following configuration lines. (You can use either localhost or the FQDN of your SUSE Manager server):</para>
<screen>[spacecmd]

server=FQDN-here

username=username-here
password=password-here</screen>
</listitem>
<listitem>
<para>Check connectivity by entering <command>spacecmd</command> as root:</para>
<screen># spacecmd</screen>
</listitem>
</orderedlist>
</section>
<section xml:id="_spacecmd_quiet_mode"><title>spacecmd Quiet Mode</title><simpara>By default spacecmd prints server status messages during connection attempts.
These messages can cause a lot of clutter when parsing system lists.
The following alias will force spacecmd to use quiet mode thus preventing this behavior.
Add the following line to your <literal>~/.bashrc</literal> file:</simpara>
<screen>alias spacecmd='spacecmd -q'</screen>
</section>
<section xml:id="_spacecmd_help"><title>spacecmd Help</title><simpara>spacecmd help can be access by typing spacecmd <command>-h --help</command></simpara>
<screen>Usage: spacecmd [options] [command]

Options:
  -u USERNAME, --username=USERNAME
                        use this username to connect to the server
  -p PASSWORD, --password=PASSWORD
                        use this password to connect to the server
  -s SERVER, --server=SERVER
                        connect to this server [default: local hostname]
  --nossl               use HTTP instead of HTTPS
  --nohistory           do not store command history
  -y, --yes             answer yes for all questions
  -q, --quiet           print only error messages
  -d, --debug           print debug messages (can be passed multiple times)
  -h, --help            show this help message and exit</screen>
<simpara>As root you can access available functions without entering the spacecmd shell:</simpara>
<screen># spacecmd -- help

        Documented commands (type help &lt;topic&gt;):
========================================
activationkey_addchildchannels         org_trustdetails
activationkey_addconfigchannels        package_details
activationkey_addentitlements          package_listdependencies
activationkey_addgroups                package_listerrata
activationkey_addpackages              package_listinstalledsystems
activationkey_clone                    package_listorphans
activationkey_create                   package_remove
activationkey_delete                   package_removeorphans
activationkey_details                  package_search
activationkey_diff                     repo_addfilters
activationkey_disable                  repo_clearfilters
activationkey_disableconfigdeployment  repo_create

...</screen>
</section>
</section>
<section xml:id="_troubleshooting_2"><title>Troubleshooting</title><simpara>This section provides troubleshooting solutions when working with spacecmd</simpara>
<section xml:id="_creating_a_distribution_with_spacecmd_sets_localhost_instead_of_fqdn"><title>Creating a Distribution With spacecmd Sets Localhost Instead of FQDN</title><simpara>The support article associated with this issue may be located at:https://www.suse.com/support/kb/doc/?id=7018627</simpara>
<variablelist>
<varlistentry>
<term>Situation</term>
<listitem>
<simpara>When creating a distribution with spacecmd it will  automatically set localhost as the server name instead of the FQDN of SUSE Manager.
This will result in the following kernel option being written:</simpara>
<screen>install=http://localhost/ks/dist/&lt;distributionname&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Resolution</term>
<listitem>
<simpara>Set the FQDN in <filename>$HOME/.spacecmd/config</filename>
like the following:</simpara>
<screen>test:~/.spacecmd # cat config
[spacecmd]
server=test.mytest.env
username=admin
password=password
nossl=0</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>Cause</term>
<listitem>
<simpara>This problem may be experienced if <filename>$HOME/.spacecmd/config</filename>
has been created and the server name option was set to localhost.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
</section>
<section xml:id="_at.spacecmd.command.reference"><title>spacecmd Functions</title><simpara>The following sections provide descriptions for all documented spacecmd commands.
Each command is grouped by the function prefix.
Keep in mind that all commands may also be called using scripts and passed to spacecmd as stand-alone commands.</simpara>
<section xml:id="_at.spacecmd.activationkey"><title>activationkey_</title><simpara>The following spacecmd commands are available for use with activation keys.</simpara>
<variablelist>
<varlistentry>
<term>activationkey_addchildchannels</term>
<listitem>
<simpara>Add child channels to an activation key.</simpara>
<screen>usage: activationkey_addchildchannels KEY &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_addconfigchannels</term>
<listitem>
<simpara>Add configuration channels to an activation key.</simpara>
<screen>usage: activationkey_addconfigchannels KEY &lt;CHANNEL ...&gt; [options]

options:
  -t add channels to the top of the list
  -b add channels to the bottom of the list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_addentitlements</term>
<listitem>
<simpara>Add available entitlements to an activation key.</simpara>
<note>
<title>WebUI Name Change</title>
<simpara>In the WebUI entitlements are known as System Types.
Nevertheless the spacecmd backend still utilizes the entitlements term.
Therefore any scripts you may be using can remain unchanged.</simpara>
</note>
<screen>usage: activationkey_addentitlements KEY &lt;ENTITLEMENT ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_addgroups</term>
<listitem>
<simpara>Add existing groups to an activation key.</simpara>
<screen>usage: activationkey_addgroups KEY &lt;GROUP ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_addpackages</term>
<listitem>
<simpara>Add packages to an activation key.</simpara>
<screen>usage: activationkey_addpackages KEY &lt;PACKAGE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_clone</term>
<listitem>
<simpara>Clone an existing activation key.</simpara>
<screen>usage examples:
                 activationkey_clone foo_key -c bar_key
                 activationkey_clone foo_key1 foo_key2 -c prefix
                 activationkey_clone foo_key -x "s/foo/bar"
                 activationkey_clone foo_key1 foo_key2 -x "s/foo/bar"

options:
  -c CLONE_NAME  : Name of the resulting key, treated as a prefix for multiple
                   keys
  -x "s/foo/bar" : Optional regex replacement, replaces foo with bar in the
                   clone description, base-channel label, child-channel
                   labels, config-channel names</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_create</term>
<listitem>
<simpara>Create a new activation key.</simpara>
<screen>usage: activationkey_create [options]

options:
  -n NAME
  -d DESCRIPTION
  -b BASE_CHANNEL
  -u set key as universal default
  -e [enterprise_entitled,virtualization_host]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_delete</term>
<listitem>
<simpara>Delete an existing activation key.</simpara>
<screen>usage: activationkey_delete KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_details</term>
<listitem>
<simpara>Show details of an existing activation key.</simpara>
<screen>usage: activationkey_details KEY ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_diff</term>
<listitem>
<simpara>Check the difference between two activation keys.</simpara>
<screen>usage: activationkey_diff SOURCE_ACTIVATIONKEY TARGET_ACTIVATIONKEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_disable</term>
<listitem>
<simpara>Disable an existing activation key.</simpara>
<screen>usage: activationkey_disable KEY [KEY ...]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_disableconfigdeployment</term>
<listitem>
<simpara>Disable configuration channel deployment for an existing activation key.</simpara>
<screen>usage: activationkey_disableconfigdeployment KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_enable</term>
<listitem>
<simpara>Enable an existing activation key.</simpara>
<screen>usage: activationkey_enable KEY [KEY ...]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_enableconfigdeployment</term>
<listitem>
<simpara>Enable configuration channel deployment for an existing activation key.</simpara>
<screen>usage: activationkey_enableconfigdeployment KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_export</term>
<listitem>
<simpara>Export activation key(s) to a JSON formatted file.</simpara>
<screen>usage: activationkey_export [options] [&lt;KEY&gt; ...]

options:
    -f outfile.json : specify an output filename, defaults to &lt;KEY&gt;.json
                      if exporting a single key, akeys.json for multiple keys,
                      or akey_all.json if no KEY specified (export ALL)

Note : KEY list is optional, default is to export ALL keys</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_import</term>
<listitem>
<simpara>Import activation key(s) from JSON file(s)</simpara>
<screen>usage: activationkey_import &lt;JSONFILE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_list</term>
<listitem>
<simpara>List all existing activation keys.</simpara>
<screen>usage: activationkey_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listbasechannel</term>
<listitem>
<simpara>List the base channel associated with an activation key.</simpara>
<screen>usage: activationkey_listbasechannel KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listchildchannels</term>
<listitem>
<simpara>List child channels associated with an activation key.</simpara>
<screen>usage: activationkey_listchildchannels KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listconfigchannels</term>
<listitem>
<simpara>List configuration channels associated with an activation key.</simpara>
<screen>usage: activationkey_listconfigchannels KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listentitlements</term>
<listitem>
<simpara>List entitlements associated with an activation key.</simpara>
<screen>usage: activationkey_listentitlements KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listgroups</term>
<listitem>
<simpara>List groups associated with an activation key</simpara>
<screen>usage: activationkey_listgroups KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listpackages</term>
<listitem>
<simpara>List packages associated with an activation key.</simpara>
<screen>usage: activationkey_listpackages KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_listsystems</term>
<listitem>
<simpara>List systems registered with an activation key.</simpara>
<screen>usage: activationkey_listsystems KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_removechildchannels</term>
<listitem>
<simpara>Remove child channels from an activation key.</simpara>
<screen>usage: activationkey_removechildchannels KEY &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_removeconfigchannels</term>
<listitem>
<simpara>Remove configuration channels from an activation key.</simpara>
<screen>usage: activationkey_removeconfigchannels KEY &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_removeentitlements</term>
<listitem>
<simpara>Remove entitlements from an activation key.</simpara>
<screen>usage: activationkey_removeentitlements KEY &lt;ENTITLEMENT ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_removegroups</term>
<listitem>
<simpara>Remove groups from an activation key.</simpara>
<screen>usage: activationkey_removegroups KEY &lt;GROUP ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_removepackages</term>
<listitem>
<simpara>Remove packages from an activation key.</simpara>
<screen>usage: activationkey_removepackages KEY &lt;PACKAGE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_setbasechannel</term>
<listitem>
<simpara>Set the base channel for an activation key.</simpara>
<screen>usage: activationkey_setbasechannel KEY CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_setconfigchannelorder</term>
<listitem>
<simpara>Set the ranked order of configuration channels.</simpara>
<screen>usage: activationkey_setconfigchannelorder KEY</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_setcontactmethod</term>
<listitem>
<simpara>Set the contact method to use for systems registered with a specific key.
(Use the XML-RPC API to access the latest contact methods.) The following contact methods are available for use with traditional spacecmd: ['default', 'ssh-push', 'ssh-push-tunnel']</simpara>
<screen>usage: activationkey_setcontactmethod KEY CONTACT_METHOD</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_setdescription</term>
<listitem>
<simpara>Add a description for an activation key.</simpara>
<screen>usage: activationkey_setdescription KEY DESCRIPTION</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_setuniversaldefault</term>
<listitem>
<simpara>Set a specific key as the universal default.</simpara>
<screen>usage: activationkey_setuniversaldefault KEY</screen>
<warning>
<title>Universal Default Key</title>
<simpara>Using a universal default key is not a Best Practice recommendation.</simpara>
</warning>
</listitem>
</varlistentry>
<varlistentry>
<term>activationkey_setusagelimit</term>
<listitem>
<simpara>Set the usage limit of an activation key, can be a number or "unlimited".</simpara>
<screen>usage: activationkey_setbasechannel KEY &lt;usage limit&gt;
usage: activationkey_setbasechannel KEY unlimited</screen>
</listitem>
</varlistentry>
</variablelist>
<tip>
<title>Usage Limits</title>
<simpara>Usage limits are only applicable to traditionally managed systems.
Currently usage limits do not apply to Salt or foreign managed systems.</simpara>
</tip>
</section>
<section xml:id="_at.spacecmd.api"><title>api</title><simpara>The following API command and its options are available for calling the XML-RPC API directly.
Calling the API directly allows you to use the latest features in SUSE Manager from the command-line using spacecmd as a wrapper for stand-alone commands or used from within scripts.</simpara>
<note>
<title>Use the api Command for Access to Latest Features</title>
<simpara>spacecmd is the traditional tool for spacewalk.
It functions out of the box with SUSE Manager but you should know that latest features (for example, Salt) are often excluded from traditional spacecmd command-line tool.
To gain access to the latest feature additions call <command>api api.getApiCallList</command> from within spacecmd to list all currently available API commands formatted in json.
You can then call these commands directly.</simpara>
</note>
<variablelist>
<varlistentry>
<term>api</term>
<listitem>
<simpara>Call XML-RPC API with arguments directly.</simpara>
<screen>usage: api [options] API_STRING

options:
  -A, --args  Arguments for the API other than session id in comma separated
              strings or JSON expression
  -F, --format   Output format
  -o, --output   Output file

examples:
  api api.getApiCallList
  api --args "sysgroup_A" systemgroup.listSystems
  api -A "rhel-i386-server-5,2011-04-01,2011-05-01" -F "%(name)s" \
      channel.software.listAllPackages</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.clear"><title>clear</title><simpara>Clears the terminal screen</simpara>
</section>
<section xml:id="_at.spacecmd.clearcaches"><title>clear_caches</title><simpara>Clear the internal caches kept for systems and packages</simpara>
<screen>usage: clear_caches</screen>
</section>
<section xml:id="_at.spacecmd.configchannel"><title>configchannel_</title><simpara>The following spacecmd commands are available for use with configuration channels.</simpara>
<variablelist>
<varlistentry>
<term>configchannel_addfile</term>
<listitem>
<simpara>Creates a configuration file.</simpara>
<screen>usage: configchannel_addfile [CHANNEL] [options]

options:
  -c CHANNEL
  -p PATH
  -r REVISION
  -o OWNER [default: root]
  -g GROUP [default: root]
  -m MODE [defualt: 0644]
  -x SELINUX_CONTEXT
  -d path is a directory
  -s path is a symlink
  -b path is a binary (or other file which needs base64 encoding)
  -t SYMLINK_TARGET
  -f local path to file contents

  Note re binary/base64: Some text files, notably those containing trailing
  newlines, those containing ASCII escape characters (or other charaters not
  allowed in XML) need to be sent as binary (-b).  Some effort is made to auto-
  detect files which require this, but you may need to explicitly specify.</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_backup</term>
<listitem>
<simpara>Backup a configuration channel.</simpara>
<screen>usage: configchannel_backup CHANNEL [OUTDIR]

OUTDIR defaults to $HOME/spacecmd-backup/configchannel/YYYY-MM-DD/CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_clone</term>
<listitem>
<simpara>Clone configuration channel(s).</simpara>
<screen>usage examples:
                 configchannel_clone foo_label -c bar_label
                 configchannel_clone foo_label1 foo_label2 -c prefix
                 configchannel_clone foo_label -x "s/foo/bar"
                 configchannel_clone foo_label1 foo_label2 -x "s/foo/bar"

options:
  -c CLONE_LABEL : name/label of the resulting cc (note does not update
                   description, see -x option), treated as a prefix if
                   multiple keys are passed
  -x "s/foo/bar" : Optional regex replacement, replaces foo with bar in the
                   clone name, label and description
  Note : If no -c or -x option is specified, interactive is assumed</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_create</term>
<listitem>
<simpara>Create a configuration channel.</simpara>
<screen>usage: configchannel_create [options]

options:
  -n NAME
  -l LABEL
  -d DESCRIPTION</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_delete</term>
<listitem>
<simpara>Delete a configuration channel.</simpara>
<screen>usage: configchannel_delete CHANNEL ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_details</term>
<listitem>
<simpara>Show the details of a configuration channel.</simpara>
<screen>usage: configchannel_details CHANNEL ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_diff</term>
<listitem>
<simpara>Find differences between configuration channels.</simpara>
<screen>usage: configchannel_diff SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_export</term>
<listitem>
<simpara>Export configuration channel(s) to a json formatted file.</simpara>
<screen>usage: configchannel_export &lt;CHANNEL&gt;... [options]
options:
    -f outfile.json : specify an output filename, defaults to &lt;CHANNEL&gt;.json
                      if exporting a single channel, ccs.json for multiple
                      channels, or cc_all.json if no CHANNEL specified
                      e.g (export ALL)

Note : CHANNEL list is optional, default is to export ALL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_filedetails</term>
<listitem>
<simpara>Show the details of a file in a configuration channel.</simpara>
<screen>usage: configchannel_filedetails CHANNEL FILE [REVISION]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_forcedeploy</term>
<listitem>
<simpara>Forces a redeployment of files within a channel on all subscribed systems.</simpara>
<screen>usage: configchannel_forcedeploy CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_import</term>
<listitem>
<simpara>Import configuration channel(s) from a json file.</simpara>
<screen>usage: configchannel_import &lt;JSONFILES...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_list</term>
<listitem>
<simpara>List all configuration channels.</simpara>
<screen>usage: configchannel_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_listfiles</term>
<listitem>
<simpara>List all files in a configuration channel.</simpara>
<screen>usage: configchannel_listfiles CHANNEL ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_listsystems</term>
<listitem>
<simpara>List all systems subscribed to a configuration channel.</simpara>
<screen>usage: configchannel_listsystems CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_removefiles</term>
<listitem>
<simpara>Remove configuration files.</simpara>
<screen>usage: configchannel_removefile CHANNEL &lt;FILE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_sync</term>
<listitem>
<simpara>Sync configuration files between two configuration channels.</simpara>
<screen>usage: configchannel_sync SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_updatefile</term>
<listitem>
<simpara>Update a configuration file.</simpara>
<screen>usage: configchannel_updatefile CHANNEL FILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>configchannel_verifyfile</term>
<listitem>
<simpara>Verify a configuration file.</simpara>
<screen>usage: configchannel_verifyfile CHANNEL FILE &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; may be substituted with any of the following targets:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.cryptokey"><title>cryptokey_</title><simpara>The following spacecmd commands are available for use with cryptographic keys.</simpara>
<variablelist>
<varlistentry>
<term>cryptokey_create</term>
<listitem>
<simpara>Create a cryptographic key.</simpara>
<screen>usage: cryptokey_create [options]

options:
  -t GPG or SSL
  -d DESCRIPTION
  -f KEY_FILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>cryptokey_delete</term>
<listitem>
<simpara>Delete a cryptographic key.</simpara>
<screen>usage: cryptokey_delete NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>cryptokey_details</term>
<listitem>
<simpara>Show the contents of a cryptographic key.</simpara>
<screen>usage: cryptokey_details KEY ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>cryptokey_list</term>
<listitem>
<simpara>List all cryptographic keys (SSL, GPG).</simpara>
<screen>usage: cryptokey_list</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.custominfo"><title>custominfo_</title><simpara>The following spacecmd commands are available for working with custom keys.</simpara>
<variablelist>
<varlistentry>
<term>custominfo_createkey</term>
<listitem>
<simpara>Create a custom key.</simpara>
<screen>usage: custominfo_createkey [NAME] [DESCRIPTION]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>custominfo_deletekey</term>
<listitem>
<simpara>Delete a custom key.</simpara>
<screen>usage: custominfo_deletekey KEY ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>custominfo_details</term>
<listitem>
<simpara>Show the details of a custom key.</simpara>
<screen>usage: custominfo_details KEY ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>custominfo_listkeys</term>
<listitem>
<simpara>List all custom keys.</simpara>
<screen>usage: custominfo_listkeys</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>custominfo_updatekey</term>
<listitem>
<simpara>Update a custom key.</simpara>
<screen>usage: custominfo_updatekey [NAME] [DESCRIPTION]</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.distribution"><title>distribution_</title><simpara>The following spacecmd commands are available for working with kickstart distributions.</simpara>
<variablelist>
<varlistentry>
<term>distribution_create</term>
<listitem>
<simpara>Create a Kickstart tree.</simpara>
<screen>usage: distribution_create [options]

options:
  -n NAME
  -p path to tree
  -b base channel to associate with
  -t install type [fedora|rhel_4/5/6|suse|generic_rpm]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>distribution_delete</term>
<listitem>
<simpara>Delete a Kickstart tree.</simpara>
<screen>usage: distribution_delete LABEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>distribution_details</term>
<listitem>
<simpara>Show the details of a Kickstart tree.</simpara>
<screen>usage: distribution_details LABEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>distribution_list</term>
<listitem>
<simpara>List the available autoinstall trees.</simpara>
<screen>usage: distribution_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>distribution_rename</term>
<listitem>
<simpara>Rename a Kickstart tree.</simpara>
<screen>usage: distribution_rename OLDNAME NEWNAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>distribution_update</term>
<listitem>
<simpara>Update the path of a Kickstart tree.</simpara>
<screen>usage: distribution_update NAME [options]

options:
  -p path to tree
  -b base channel to associate with
  -t install type [fedora|rhel_4/5/6|suse|generic_rpm]</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.errata"><title>errata_</title><simpara>The following spacecmd commands are available for use with errata data.</simpara>
<variablelist>
<varlistentry>
<term>errata_apply</term>
<listitem>
<simpara>Apply an patch to all affected systems.</simpara>
<screen>usage: errata_apply ERRATA|search:XXX ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_delete</term>
<listitem>
<simpara>Delete an patch.</simpara>
<screen>usage: errata_delete ERRATA|search:XXX ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_details</term>
<listitem>
<simpara>Show the details of an patch.</simpara>
<screen>usage: errata_details ERRATA|search:XXX ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_findbycve</term>
<listitem>
<simpara>List errata addressing a CVE.</simpara>
<screen>usage: errata_findbycve CVE-YYYY-NNNN ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_list</term>
<listitem>
<simpara>List all patches.</simpara>
<screen>usage: errata_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_listaffectedsystems</term>
<listitem>
<simpara>List of systems affected by an patch.</simpara>
<screen>usage: errata_listaffectedsystems ERRATA|search:XXX ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_listcves</term>
<listitem>
<simpara>List of CVEs addressed by an patch.</simpara>
<screen>usage: errata_listcves ERRATA|search:XXX ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_publish</term>
<listitem>
<simpara>Publish an patch to a channel.</simpara>
<screen>usage: errata_publish ERRATA|search:XXX &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_search</term>
<listitem>
<simpara>List patches that meet user provided criteria</simpara>
<screen>usage: errata_search CVE|RHSA|RHBA|RHEA|CLA ...

Example:
&gt; errata_search CVE-2009:1674
&gt; errata_search RHSA-2009:1674</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>errata_summary</term>
<listitem>
<simpara>Print a summary of all errata.</simpara>
<screen>usage: errata_summary</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.kickstart.filepreservation"><title>filepreservation_</title><simpara>The following spacecmd commands are available for working with kickstart file preservation lists.</simpara>
<variablelist>
<varlistentry>
<term>filepreservation_create</term>
<listitem>
<simpara>Create a file preservation list.</simpara>
<screen>usage: filepreservation_create [NAME] [FILE ...]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>filepreservation_delete</term>
<listitem>
<simpara>Delete a file preservation list.</simpara>
<screen>filepreservation_delete NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>filepreservation_details</term>
<listitem>
<simpara>Show the details of a file preservation list.</simpara>
<screen>usage: filepreservation_details NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>filepreservation_list</term>
<listitem>
<simpara>List all file preservations.</simpara>
<screen>usage: filepreservation_list</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.get"><title>get_</title><variablelist>
<varlistentry>
<term>get_apiversion</term>
<listitem>
<simpara>Display the API version of the server.</simpara>
<screen>usage: get_apiversion</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>get_certificateexpiration</term>
<listitem>
<simpara>Print the expiration date of the server&#8217;s entitlement certificate.</simpara>
<screen>usage: get_certificateexpiration</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>get_serverversion</term>
<listitem>
<simpara>Display SUSE Manager server version.</simpara>
<screen>usage: get_serverversion</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>get_session</term>
<listitem>
<simpara>Show the current session string.</simpara>
<screen>usage: get_session</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.group"><title>group_</title><variablelist>
<varlistentry>
<term>group_addsystems</term>
<listitem>
<simpara>Add systems to a group.</simpara>
<screen>usage: group_addsystems GROUP &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_backup</term>
<listitem>
<simpara>Backup a system group.</simpara>
<screen>usage: group_backup NAME [OUTDIR]

OUTDIR defaults to $HOME/spacecmd-backup/group/YYYY-MM-DD/NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_create</term>
<listitem>
<simpara>Create a system group.</simpara>
<screen>usage: group_create [NAME] [DESCRIPTION]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_delete</term>
<listitem>
<simpara>Delete a system group.</simpara>
<screen>usage: group_delete NAME ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_details</term>
<listitem>
<simpara>Show the details of a system group.</simpara>
<screen>usage: group_details GROUP ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_list</term>
<listitem>
<simpara>List available system groups.</simpara>
<screen>usage: group_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_listsystems</term>
<listitem>
<simpara>List the members of a group.</simpara>
<screen>usage: group_listsystems GROUP</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_removesystems</term>
<listitem>
<simpara>Remove systems from a group.</simpara>
<screen>usage: group_removesystems GROUP &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>group_restore</term>
<listitem>
<simpara>Restore a system group.</simpara>
<screen>usage: group_backup INPUTDIR [NAME] ...</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.help"><title>help</title><simpara>List all available spacecmd commands with the help function.
Check for additional help on a specific function by calling for example:<command>user_create
                    --help</command>.</simpara>
<screen>Documented commands (type help &lt;topic&gt;):
========================================
activationkey_addchildchannels         org_trustdetails
activationkey_addconfigchannels        package_details
activationkey_addentitlements          package_listdependencies
activationkey_addgroups                package_listerrata
activationkey_addpackages              package_listinstalledsystems
activationkey_clone                    package_listorphans
activationkey_create                   package_remove
activationkey_delete                   package_removeorphans
activationkey_details                  package_search
activationkey_diff                     repo_addfilters
activationkey_disable                  repo_clearfilters
activationkey_disableconfigdeployment  repo_create
activationkey_enable                   repo_delete
activationkey_enableconfigdeployment   repo_details
activationkey_export                   repo_list
activationkey_import                   repo_listfilters
activationkey_list                     repo_removefilters
activationkey_listbasechannel          repo_rename
activationkey_listchildchannels        repo_setfilters
activationkey_listconfigchannels       repo_updatessl
activationkey_listentitlements         repo_updateurl
activationkey_listgroups               report_duplicates
activationkey_listpackages             report_errata
activationkey_listsystems              report_inactivesystems
activationkey_removechildchannels      report_ipaddresses
activationkey_removeconfigchannels     report_kernels
activationkey_removeentitlements       report_outofdatesystems
activationkey_removegroups             report_ungroupedsystems
activationkey_removepackages           scap_getxccdfscandetails
activationkey_setbasechannel           scap_getxccdfscanruleresults
activationkey_setconfigchannelorder    scap_listxccdfscans
activationkey_setcontactmethod         scap_schedulexccdfscan
activationkey_setdescription           schedule_cancel
activationkey_setuniversaldefault      schedule_details
activationkey_setusagelimit            schedule_getoutput
api                                    schedule_list
clear                                  schedule_listarchived
clear_caches                           schedule_listcompleted
configchannel_addfile                  schedule_listfailed
configchannel_backup                   schedule_listpending
configchannel_clone                    schedule_reschedule
configchannel_create                   snippet_create
configchannel_delete                   snippet_delete
configchannel_details                  snippet_details
configchannel_diff                     snippet_list
configchannel_export                   snippet_update
configchannel_filedetails              softwarechannel_adderrata
configchannel_forcedeploy              softwarechannel_adderratabydate
configchannel_import                   softwarechannel_addpackages
configchannel_list                     softwarechannel_addrepo
configchannel_listfiles                softwarechannel_clone
configchannel_listsystems              softwarechannel_clonetree
configchannel_removefiles              softwarechannel_create
configchannel_sync                     softwarechannel_delete
configchannel_updatefile               softwarechannel_details
configchannel_verifyfile               softwarechannel_diff
cryptokey_create                       softwarechannel_errata_diff
cryptokey_delete                       softwarechannel_errata_sync
cryptokey_details                      softwarechannel_getorgaccess
cryptokey_list                         softwarechannel_list
custominfo_createkey                   softwarechannel_listallpackages
custominfo_deletekey                   softwarechannel_listbasechannels
custominfo_details                     softwarechannel_listchildchannels
custominfo_listkeys                    softwarechannel_listerrata
custominfo_updatekey                   softwarechannel_listerratabydate
distribution_create                    softwarechannel_listlatestpackages
distribution_delete                    softwarechannel_listpackages
distribution_details                   softwarechannel_listrepos
distribution_list                      softwarechannel_listsyncschedule
distribution_rename                    softwarechannel_listsystems
distribution_update                    softwarechannel_mirrorpackages
errata_apply                           softwarechannel_regenerateneededcache
errata_delete                          softwarechannel_regenerateyumcache
errata_details                         softwarechannel_removeerrata
errata_findbycve                       softwarechannel_removepackages
errata_list                            softwarechannel_removerepo
errata_listaffectedsystems             softwarechannel_removesyncschedule
errata_listcves                        softwarechannel_setorgaccess
errata_publish                         softwarechannel_setsyncschedule
errata_search                          softwarechannel_sync
errata_summary                         softwarechannel_syncrepos
filepreservation_create                ssm_add
filepreservation_delete                ssm_clear
filepreservation_details               ssm_intersect
filepreservation_list                  ssm_list
get_apiversion                         ssm_remove
get_certificateexpiration              system_addchildchannels
get_serverversion                      system_addconfigchannels
get_session                            system_addconfigfile
group_addsystems                       system_addcustomvalue
group_backup                           system_addentitlements
group_create                           system_addnote
group_delete                           system_applyerrata
group_details                          system_comparepackageprofile
group_list                             system_comparepackages
group_listsystems                      system_comparewithchannel
group_removesystems                    system_createpackageprofile
group_restore                          system_delete
help                                   system_deletecrashes
history                                system_deletenotes
kickstart_addactivationkeys            system_deletepackageprofile
kickstart_addchildchannels             system_deployconfigfiles
kickstart_addcryptokeys                system_details
kickstart_addfilepreservations         system_getcrashfiles
kickstart_addoption                    system_installpackage
kickstart_addpackages                  system_list
kickstart_addscript                    system_listbasechannel
kickstart_addvariable                  system_listchildchannels
kickstart_clone                        system_listconfigchannels
kickstart_create                       system_listconfigfiles
kickstart_delete                       system_listcrashedsystems
kickstart_details                      system_listcrashesbysystem
kickstart_diff                         system_listcustomvalues
kickstart_disableconfigmanagement      system_listentitlements
kickstart_disableremotecommands        system_listerrata
kickstart_enableconfigmanagement       system_listevents
kickstart_enablelogging                system_listhardware
kickstart_enableremotecommands         system_listinstalledpackages
kickstart_export                       system_listnotes
kickstart_getcontents                  system_listpackageprofiles
kickstart_getsoftwaredetails           system_listupgrades
kickstart_getupdatetype                system_lock
kickstart_import                       system_reboot
kickstart_import_raw                   system_removechildchannels
kickstart_importjson                   system_removeconfigchannels
kickstart_list                         system_removecustomvalues
kickstart_listactivationkeys           system_removeentitlement
kickstart_listchildchannels            system_removepackage
kickstart_listcryptokeys               system_rename
kickstart_listcustomoptions            system_runscript
kickstart_listoptions                  system_schedulehardwarerefresh
kickstart_listpackages                 system_schedulepackagerefresh
kickstart_listscripts                  system_search
kickstart_listvariables                system_setbasechannel
kickstart_removeactivationkeys         system_setconfigchannelorder
kickstart_removechildchannels          system_setcontactmethod
kickstart_removecryptokeys             system_show_packageversion
kickstart_removefilepreservations      system_syncpackages
kickstart_removeoptions                system_unlock
kickstart_removepackages               system_updatecustomvalue
kickstart_removescript                 system_upgradepackage
kickstart_removevariables              toggle_confirmations
kickstart_rename                       user_adddefaultgroup
kickstart_setcustomoptions             user_addgroup
kickstart_setdistribution              user_addrole
kickstart_setlocale                    user_create
kickstart_setpartitions                user_delete
kickstart_setselinux                   user_details
kickstart_setupdatetype                user_disable
kickstart_updatevariable               user_enable
list_proxies                           user_list
login                                  user_listavailableroles
logout                                 user_removedefaultgroup
org_addtrust                           user_removegroup
org_create                             user_removerole
org_delete                             user_setemail
org_details                            user_setfirstname
org_list                               user_setlastname
org_listtrusts                         user_setpassword
org_listusers                          user_setprefix
org_removetrust                        whoami
org_rename                             whoamitalkingto


Miscellaneous help topics:
==========================
time  systems  ssm</screen>
</section>
<section xml:id="_at.spacecmd.history"><title>history</title><simpara>List recent commands using the <command>history</command> command.</simpara>
<screen>spacecmd {SSM:0}&gt; history
   1  help
   2  api
   3  exit
   4  help
   5  time --help
   6  quit
   7  clear
spacecmd {SSM:0}&gt;</screen>
</section>
<section xml:id="_at.spacecmd.kickstart"><title>kickstart_</title><simpara>The following spacecmd functions are available for use with kickstart.</simpara>
<variablelist>
<varlistentry>
<term>kickstart_addactivationkeys</term>
<listitem>
<simpara>Add activation keys to a Kickstart profile.</simpara>
<screen>usage: kickstart_addactivationkeys PROFILE &lt;KEY ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addchildchannels</term>
<listitem>
<simpara>Add a child channels to a Kickstart profile.</simpara>
<screen>usage: kickstart_addchildchannels PROFILE &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addcryptokeys</term>
<listitem>
<simpara>Add cryptography keys to a Kickstart profile.</simpara>
<screen>usage: kickstart_addcryptokeys PROFILE &lt;KEY ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addfilepreservations</term>
<listitem>
<simpara>Add file preservations to a Kickstart profile.</simpara>
<screen>usage: kickstart_addfilepreservations PROFILE &lt;FILELIST ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addoption</term>
<listitem>
<simpara>Set an option for a Kickstart profile.</simpara>
<screen>usage: kickstart_addoption PROFILE KEY [VALUE]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addpackages</term>
<listitem>
<simpara>Add packages to a Kickstart profile.</simpara>
<screen>usage: kickstart_addpackages PROFILE &lt;PACKAGE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addscript</term>
<listitem>
<simpara>Add a script to a Kickstart profile.</simpara>
<screen>usage: kickstart_addscript PROFILE [options]

options:
  -p PROFILE
  -e EXECUTION_TIME ['pre', 'post']
  -i INTERPRETER
  -f FILE
  -c execute in a chroot environment
  -t ENABLING_TEMPLATING</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_addvariable</term>
<listitem>
<simpara>Add a variable to a Kickstart profile.</simpara>
<screen>usage: kickstart_addvariable PROFILE KEY VALUE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_clone</term>
<listitem>
<simpara>Clone a Kickstart profile.</simpara>
<screen>usage: kickstart_clone [options]

options:
  -n NAME
  -c CLONE_NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_create</term>
<listitem>
<simpara>Create a Kickstart profile.</simpara>
<screen>usage: kickstart_create [options]

options:
  -n NAME
  -d DISTRIBUTION
  -p ROOT_PASSWORD
  -v VIRT_TYPE ['none', 'para_host', 'qemu', 'xenfv', 'xenpv']</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_delete</term>
<listitem>
<simpara>Delete kickstart profile(s).</simpara>
<screen>usage: kickstart_delete PROFILE
usage: kickstart_delete PROFILE1 PROFILE2
usage: kickstart_delete "PROF*"</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_details</term>
<listitem>
<simpara>Show the details of a Kickstart profile.</simpara>
<screen>usage: kickstart_details PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_diff</term>
<listitem>
<simpara>List differences between two kickstart files.</simpara>
<screen>usage: kickstart_diff SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_disableconfigmanagement</term>
<listitem>
<simpara>Disable configuration management on a Kickstart profile.</simpara>
<screen>usage: kickstart_disableconfigmanagement PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_disableremotecommands</term>
<listitem>
<simpara>Disable remote commands on a Kickstart profile.</simpara>
<screen>usage: kickstart_disableremotecommands PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_enableconfigmanagement</term>
<listitem>
<simpara>Enable configuration management on a Kickstart profile.</simpara>
<screen>usage: kickstart_enableconfigmanagement PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_enablelogging</term>
<listitem>
<simpara>Enable logging for a Kickstart profile.</simpara>
<screen>usage: kickstart_enablelogging PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_enableremotecommands</term>
<listitem>
<simpara>Enable remote commands on a Kickstart profile.</simpara>
<screen>usage: kickstart_enableremotecommands PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_export</term>
<listitem>
<simpara>Export kickstart profile(s) to json formatted file.</simpara>
<screen>usage: kickstart_export &lt;KSPROFILE&gt;... [options]
options:
    -f outfile.json : specify an output filename, defaults to &lt;KSPROFILE&gt;.json
                      if exporting a single kickstart, profiles.json for multiple
                      kickstarts, or ks_all.json if no KSPROFILE specified
                      e.g (export ALL)

Note : KSPROFILE list is optional, default is to export ALL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_getcontents</term>
<listitem>
<simpara>Show the contents of a Kickstart profile as they would be presented to a client.</simpara>
<screen>usage: kickstart_getcontents LABEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_getsoftwaredetails</term>
<listitem>
<simpara>Gets kickstart profile software details.</simpara>
<screen>usage: kickstart_getsoftwaredetails KS_LABEL
usage: kickstart_getsoftwaredetails KS_LABEL KS_LABEL2 ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_getupdatetype</term>
<listitem>
<simpara>Get the update type for a kickstart profile(s).</simpara>
<screen>usage: kickstart_getupdatetype PROFILE
usage: kickstart_getupdatetype PROFILE1 PROFILE2
usage: kickstart_getupdatetype "PROF*"</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_import</term>
<listitem>
<simpara>Import a Kickstart profile from a file.</simpara>
<screen>usage: kickstart_import [options]

options:
  -f FILE
  -n NAME
  -d DISTRIBUTION
  -v VIRT_TYPE ['none', 'para_host', 'qemu', 'xenfv', 'xenpv']</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_import_raw</term>
<listitem>
<simpara>Import a raw Kickstart or autoyast profile from a file.</simpara>
<screen>usage: kickstart_import_raw [options]

options:
  -f FILE
  -n NAME
  -d DISTRIBUTION
  -v VIRT_TYPE ['none', 'para_host', 'qemu', 'xenfv', 'xenpv']</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_importjson</term>
<listitem>
<simpara>Import kickstart profile(s) from json file.</simpara>
<screen>usage: kickstart_import &lt;JSONFILES...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_list</term>
<listitem>
<simpara>List the available Kickstart profiles.</simpara>
<screen>usage: kickstart_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listactivationkeys</term>
<listitem>
<simpara>List the activation keys associated with a Kickstart profile.</simpara>
<screen>usage: kickstart_listactivationkeys PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listchildchannels</term>
<listitem>
<simpara>List the child channels of a Kickstart profile.</simpara>
<screen>usage: kickstart_listchildchannels PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listcryptokeys</term>
<listitem>
<simpara>List the crypto keys associated with a Kickstart profile.</simpara>
<screen>usage: kickstart_listcryptokeys PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listcustomoptions</term>
<listitem>
<simpara>List the custom options of a Kickstart profile.</simpara>
<screen>usage: kickstart_listcustomoptions PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listoptions</term>
<listitem>
<simpara>List the options of a Kickstart profile.</simpara>
<screen>usage: kickstart_listoptions PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listpackages</term>
<listitem>
<simpara>List the packages for a Kickstart profile.</simpara>
<screen>usage: kickstart_listpackages PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listscripts</term>
<listitem>
<simpara>List the scripts for a Kickstart profile.</simpara>
<screen>usage: kickstart_listscripts PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_listvariables</term>
<listitem>
<simpara>List the variables of a Kickstart profile.</simpara>
<screen>usage: kickstart_listvariables PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removeactivationkeys</term>
<listitem>
<simpara>Remove activation keys from a Kickstart profile.</simpara>
<screen>usage: kickstart_removeactivationkeys PROFILE &lt;KEY ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removechildchannels</term>
<listitem>
<simpara>Remove child channels from a Kickstart profile.</simpara>
<screen>usage: kickstart_removechildchannels PROFILE &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removecryptokeys</term>
<listitem>
<simpara>Remove crypto keys from a Kickstart profile.</simpara>
<screen>usage: kickstart_removecryptokeys PROFILE &lt;KEY ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removefilepreservations</term>
<listitem>
<simpara>Remove file preservations from a Kickstart profile.</simpara>
<screen>usage: kickstart_removefilepreservations PROFILE &lt;FILE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removeoptions</term>
<listitem>
<simpara>Remove options from a Kickstart profile.</simpara>
<screen>usage: kickstart_removeoptions PROFILE &lt;OPTION ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removepackages</term>
<listitem>
<simpara>Remove packages from a Kickstart profile.</simpara>
<screen>usage: kickstart_removepackages PROFILE &lt;PACKAGE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removescript</term>
<listitem>
<simpara>Add a script to a Kickstart profile.</simpara>
<screen>usage: kickstart_removescript PROFILE [ID]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_removevariables</term>
<listitem>
<simpara>Remove variables from a Kickstart profile.</simpara>
<screen>usage: kickstart_removevariables PROFILE &lt;KEY ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_rename</term>
<listitem>
<simpara>Rename a Kickstart profile</simpara>
<screen>usage: kickstart_rename OLDNAME NEWNAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_setcustomoptions</term>
<listitem>
<simpara>Set custom options for a Kickstart profile.</simpara>
<screen>usage: kickstart_setcustomoptions PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_setdistribution</term>
<listitem>
<simpara>Set the distribution for a Kickstart profile.</simpara>
<screen>usage: kickstart_setdistribution PROFILE DISTRIBUTION</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_setlocale</term>
<listitem>
<simpara>Set the locale for a Kickstart profile.</simpara>
<screen>usage: kickstart_setlocale PROFILE LOCALE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_setpartitions</term>
<listitem>
<simpara>Set the partitioning scheme for a Kickstart profile.</simpara>
<screen>usage: kickstart_setpartitions PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_setselinux</term>
<listitem>
<simpara>Set the SELinux mode for a Kickstart profile.</simpara>
<screen>usage: kickstart_setselinux PROFILE MODE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_setupdatetype</term>
<listitem>
<simpara>Set the update type for a kickstart profile(s).</simpara>
<screen>usage: kickstart_setupdatetype [options] KS_LABEL

options:
    -u UPDATE_TYPE ['red_hat', 'all', 'none']</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>kickstart_updatevariable</term>
<listitem>
<simpara>Update a variable in a Kickstart profile.</simpara>
<screen>usage: kickstart_updatevariable PROFILE KEY VALUE</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.list.proxies"><title>list_proxies</title><simpara>The following spacecmd function is available for listing proxies.</simpara>
<variablelist>
<varlistentry>
<term>list_proxies</term>
<listitem>
<simpara>List the proxies within the user&#8217;s organization.</simpara>
<screen>usage: list_proxies</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.login"><title>login</title><simpara>Connect as a specific user to the SUSE manager server.</simpara>
<screen># spacecmd -- login &lt;USERNAME&gt;</screen>
</section>
<section xml:id="_at.spacecmd.logout"><title>logout</title><simpara>Logout from server as the current user.</simpara>
<screen># spacecmd -- logout</screen>
</section>
<section xml:id="_at.spacecmd.org"><title>org_</title><simpara>The following spacecmd functions are available for use with organizations.</simpara>
<variablelist>
<varlistentry>
<term>org_addtrust</term>
<listitem>
<simpara>Add a trust between two organizations</simpara>
<screen>usage: org_addtrust YOUR_ORG ORG_TO_TRUST</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_create</term>
<listitem>
<simpara>Create an organization.</simpara>
<screen>usage: org_create [options]

options:
  -n ORG_NAME
  -u USERNAME
  -P PREFIX (Dr., Mr., Miss, Mrs., Ms.)
  -f FIRST_NAME
  -l LAST_NAME
  -e EMAIL
  -p PASSWORD
  --pam enable PAM authentication</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_delete</term>
<listitem>
<simpara>Delete an organization.</simpara>
<screen>usage: org_delete NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_details</term>
<listitem>
<simpara>Show the details of an organization.</simpara>
<screen>usage: org_details NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_list</term>
<listitem>
<simpara>List all organizations.</simpara>
<screen>usage: org_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_listtrusts</term>
<listitem>
<simpara>List an organization&#8217;s trusts.</simpara>
<screen>org_listtrusts NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_listusers</term>
<listitem>
<simpara>List an organization&#8217;s users.</simpara>
<screen>org_listusers NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_removetrust</term>
<listitem>
<simpara>Remove a trust between two organizations.</simpara>
<screen>usage: org_removetrust YOUR_ORG TRUSTED_ORG</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_rename</term>
<listitem>
<simpara>Rename an organization.</simpara>
<screen>usage: org_rename OLDNAME NEWNAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>org_trustdetails</term>
<listitem>
<simpara>Show the details of an organizational trust.</simpara>
<screen>usage: org_trustdetails TRUSTED_ORG</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.package"><title>package_</title><simpara>The following spacecmd functions are available for working with packages.</simpara>
<variablelist>
<varlistentry>
<term>package_details</term>
<listitem>
<simpara>Show the details of a software package.</simpara>
<screen>usage: package_details PACKAGE ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_listdependencies</term>
<listitem>
<simpara>List the dependencies for a package.</simpara>
<screen>usage: package_listdependencies PACKAGE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_listerrata</term>
<listitem>
<simpara>List the errata that provide this package.</simpara>
<screen>usage: package_listerrata PACKAGE ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_listinstalledsystems</term>
<listitem>
<simpara>List the systems with a package installed.</simpara>
<screen>usage: package_listinstalledsystems PACKAGE ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_listorphans</term>
<listitem>
<simpara>List packages that are not in a channel.</simpara>
<screen>usage: package_listorphans</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_remove</term>
<listitem>
<simpara>Remove a package from SUSE Manager/Satellite</simpara>
<screen>usage: package_remove PACKAGE ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_removeorphans</term>
<listitem>
<simpara>Remove packages that are not in a channel.</simpara>
<screen>usage: package_removeorphans</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>package_search</term>
<listitem>
<simpara>Find packages that meet the given criteria.</simpara>
<screen>usage: package_search NAME|QUERY

Example: package_search kernel

Advanced Search:
Available Fields: name, epoch, version, release, arch, description, summary
Example: name:kernel AND version:2.6.18 AND -description:devel</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.repo"><title>repo_</title><simpara>The following spacecmd functions are available for working with repositories.</simpara>
<variablelist>
<varlistentry>
<term>repo_addfilters</term>
<listitem>
<simpara>Add filters for a user repository.</simpara>
<screen>usage: repo_addfilters repo &lt;filter ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_clearfilters</term>
<listitem>
<simpara>Clears the filters for a user repository.</simpara>
<screen>usage: repo_clearfilters repo</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_create</term>
<listitem>
<simpara>Create a user repository.</simpara>
<screen>usage: repo_create &lt;options&gt;

options:
  -n, --name   name of repository
  -u, --url    url of repository

  --ca         SSL CA certificate (not required)
  --cert       SSL Client certificate (not required)
  --key        SSL Client key (not required)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_delete</term>
<listitem>
<simpara>Delete a user repository.</simpara>
<screen>usage: repo_delete &lt;repo ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_details</term>
<listitem>
<simpara>Show the details of a user repository.</simpara>
<screen>usage: repo_details &lt;repo ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_list</term>
<listitem>
<simpara>List all available user repository.</simpara>
<screen>usage: repo_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_listfilters</term>
<listitem>
<simpara>Show the filters for a user repository.</simpara>
<screen>usage: repo_listfilters repo</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_removefilters</term>
<listitem>
<simpara>Remove filters from a user repository.</simpara>
<screen>usage: repo_removefilters repo &lt;filter ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_rename</term>
<listitem>
<simpara>Rename a user repository.</simpara>
<screen>usage: repo_rename OLDNAME NEWNAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_setfilters</term>
<listitem>
<simpara>Set the filters for a user repo.</simpara>
<screen>usage: repo_setfilters repo &lt;filter ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_updatessl</term>
<listitem>
<simpara>Change the SSL certificates of a user repository.</simpara>
<screen>usage: repo_updatessl &lt;options&gt;
options:
  --ca         SSL CA certificate (not required)
  --cert       SSL Client certificate (not required)
  --key        SSL Client key (not required)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>repo_updateurl</term>
<listitem>
<simpara>Change the URL of a user repository.</simpara>
<screen>usage: repo_updateurl &lt;repo&gt; &lt;url&gt;</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.report"><title>report_</title><simpara>The following spacecmd functions are available for working with reports.</simpara>
<variablelist>
<varlistentry>
<term>report_duplicates</term>
<listitem>
<simpara>List duplicate system profiles.</simpara>
<screen>usage: report_duplicates</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>report_errata</term>
<listitem>
<simpara>List all errata and how many systems they affect.</simpara>
<screen>usage: report_errata [ERRATA|search:XXX ...]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>report_inactivesystems</term>
<listitem>
<simpara>List all inactive systems.</simpara>
<screen>usage: report_inactivesystems [DAYS]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>report_ipaddresses</term>
<listitem>
<simpara>List the hostname and IP of each system.</simpara>
<screen>usage: report_network [&lt;SYSTEMS&gt;]

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>report_kernels</term>
<listitem>
<simpara>List the running kernel of each system.</simpara>
<screen>usage: report_kernels [&lt;SYSTEMS&gt;]

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>report_outofdatesystems</term>
<listitem>
<simpara>List all out-of-date systems.</simpara>
<screen>usage: report_outofdatesystems</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>report_ungroupedsystems</term>
<listitem>
<simpara>List all ungrouped systems.</simpara>
<screen>usage: report_ungroupedsystems</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.scap"><title>scap_</title><simpara>The following spacecmd functions are available for working with OpenSCAP.</simpara>
<variablelist>
<varlistentry>
<term>scap_getxccdfscandetails</term>
<listitem>
<simpara>Get details of given OpenSCAP XCCDF scan.</simpara>
<screen>usage: scap_getxccdfscandetails &lt;XID&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>scap_getxccdfscanruleresults</term>
<listitem>
<simpara>Return a full list of RuleResults for given OpenSCAP XCCDF scan.</simpara>
<screen>usage: scap_getxccdfscanruleresults &lt;XID&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>scap_listxccdfscans</term>
<listitem>
<simpara>Return a list of finished OpenSCAP scans for given systems.</simpara>
<screen>usage: scap_listxccdfscans &lt;SYSTEMS&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>scap_schedulexccdfscan</term>
<listitem>
<simpara>Schedule Scap XCCDF scan.</simpara>
<screen>usage: scap_schedulexccdfscan PATH_TO_XCCDF_FILE XCCDF_OPTIONS SYSTEMS

Example:
&gt; scap_schedulexccdfscan '/usr/share/openscap/scap-security-xccdf.xml' 'profile Web-Default' \
system-scap.example.com</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.schedule"><title>schedule_</title><simpara>The following spacecmd functions are available for working with scheduling.</simpara>
<variablelist>
<varlistentry>
<term>schedule_cancel</term>
<listitem>
<simpara>Cancel a scheduled action.</simpara>
<screen>usage: schedule_cancel ID|* ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_details</term>
<listitem>
<simpara>Show the details of a scheduled action.</simpara>
<screen>usage: schedule_details ID</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_getoutput</term>
<listitem>
<simpara>Show the output from an action.</simpara>
<screen>usage: schedule_getoutput ID</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_list</term>
<listitem>
<simpara>List all actions.</simpara>
<screen>usage: schedule_list [BEGINDATE] [ENDDATE]

Dates can be any of the following:
Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_listarchived</term>
<listitem>
<simpara>List archived actions.</simpara>
<screen>usage: schedule_listarchived [BEGINDATE] [ENDDATE]

Dates can be any of the following:
Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_listcompleted</term>
<listitem>
<simpara>List completed actions.</simpara>
<screen>Dates can be any of the following:
Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_listfailed</term>
<listitem>
<simpara>List failed actions.</simpara>
<screen>usage: schedule_listfailed [BEGINDATE] [ENDDATE]

Dates can be any of the following:
Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_listpending</term>
<listitem>
<simpara>List pending actions.</simpara>
<screen>usage: schedule_listpending [BEGINDATE] [ENDDATE]

Dates can be any of the following:
Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>schedule_reschedule</term>
<listitem>
<simpara>Reschedule failed actions.</simpara>
<screen>usage: schedule_reschedule ID|* ...</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.snippet"><title>snippet_</title><simpara>The following spacecmd functions are available for working with Kickstart snippets.</simpara>
<variablelist>
<varlistentry>
<term>snippet_create</term>
<listitem>
<simpara>Create a Kickstart snippet</simpara>
<screen>usage: snippet_create [options]

options:
  -n NAME
  -f FILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>snippet_delete</term>
<listitem>
<simpara>Delete a Kickstart snippet.</simpara>
<screen>usage: snippet_removefile NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>snippet_details</term>
<listitem>
<simpara>Show the contents of a snippet.</simpara>
<screen>usage: snippet_details SNIPPET ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>snippet_list</term>
<listitem>
<simpara>List the available Kickstart snippets.</simpara>
<screen>usage: snippet_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>snippet_update</term>
<listitem>
<simpara>Update a Kickstart snippet.</simpara>
<screen>usage: snippet_update NAME</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.softwarechannel"><title>softwarechannel_</title><simpara>The following spacecmd functions are available for working with software channels.</simpara>
<variablelist>
<varlistentry>
<term>softwarechannel_adderrata</term>
<listitem>
<simpara>Add patches from one channel into another channel.</simpara>
<screen>usage: softwarechannel_adderrata SOURCE DEST &lt;ERRATA|search:XXX ...&gt;
Options:
    -q/--quick : Don't display list of packages (slightly faster)
    -s/--skip :  Skip errata which appear to exist already in DEST</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_adderratabydate</term>
<listitem>
<simpara>Add errata from one channel into another channel based on a date range.</simpara>
<screen>usage: softwarechannel_adderratabydate [options] SOURCE DEST BEGINDATE ENDDATE
Date format : YYYYMMDD
Options:
        -p/--publish : Publish errata to the channel (don't clone)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_addpackages</term>
<listitem>
<simpara>Add packages to a software channel.</simpara>
<screen>usage: softwarechannel_addpackages CHANNEL &lt;PACKAGE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_addrepo</term>
<listitem>
<simpara>Add a repo to a software channel.</simpara>
<screen>usage: softwarechannel_addrepo CHANNEL REPO</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_clone</term>
<listitem>
<simpara>Clone a software channel.</simpara>
<screen>usage: softwarechannel_clone [options]

options:
  -s SOURCE_CHANNEL
  -n NAME
  -l LABEL
  -p PARENT_CHANNEL
  --gpg-copy/-g (copy SOURCE_CHANNEL GPG details)
  --gpg-url GPG_URL
  --gpg-id GPG_ID
  --gpg-fingerprint GPG_FINGERPRINT
  -o do not clone any patches
  --regex/-x "s/foo/bar" : Optional regex replacement,
        replaces foo with bar in the clone name and label</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_clonetree</term>
<listitem>
<simpara>Clone a software channel and its child channels.</simpara>
<screen>usage: softwarechannel_clonetree [options]A
             e.g    softwarechannel_clonetree foobasechannel -p "my_"
                    softwarechannel_clonetree foobasechannel -x "s/foo/bar"
                    softwarechannel_clonetree foobasechannel -x "s/^/my_"

options:
  -s/--source-channel SOURCE_CHANNEL
  -p/--prefix PREFIX (is prepended to the label and name of all channels)
  --gpg-copy/-g (copy GPG details for correspondoing source channel))
  --gpg-url GPG_URL (applied to all channels)
  --gpg-id GPG_ID (applied to all channels)
  --gpg-fingerprint GPG_FINGERPRINT (applied to all channels)
  -o do not clone any errata
  --regex/-x "s/foo/bar" : Optional regex replacement,
        replaces foo with bar in the clone name, label and description</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_create</term>
<listitem>
<simpara>Create a software channel.</simpara>
<screen>usage: softwarechannel_create [options]

options:
  -n NAME
  -l LABEL
  -p PARENT_CHANNEL
  -a ARCHITECTURE ['ia32', 'ia64', 'x86_64', 'ppc',
                  'i386-sun-solaris', 'sparc-sun-solaris']
  -c CHECKSUM ['sha1', 'sha256', 'sha384', 'sha512']
  -u GPG_URL
  -i GPG_ID
  -f GPG_FINGERPRINT</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_delete</term>
<listitem>
<simpara>Delete a software channel.</simpara>
<screen>usage: softwarechannel_delete &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_details</term>
<listitem>
<simpara>Show the details of a software channel.</simpara>
<screen>usage: softwarechannel_details &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_diff</term>
<listitem>
<simpara>Check the difference between software channels.</simpara>
<screen>usage: softwarechannel_diff SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_errata_diff</term>
<listitem>
<simpara>Check the difference between software channel files.</simpara>
<screen>usage: softwarechannel_errata_diff SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_errata_sync</term>
<listitem>
<simpara>Sync errata of two software channels.</simpara>
<screen>usage: softwarechannel_errata_sync SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_getorgaccess</term>
<listitem>
<simpara>Get the org-access for the software channel.</simpara>
<screen>usage : softwarechannel_getorgaccess : get org access for all channels
usage : softwarechannel_getorgaccess &lt;channel_label(s)&gt; : get org access for specific channel(s)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_list</term>
<listitem>
<simpara>List all available software channels.</simpara>
<screen>usage: softwarechannel_list [options]'
options:
  -v verbose (display label and summary)
  -t tree view (pretty-print child-channels)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listallpackages</term>
<listitem>
<simpara>List all packages in a channel.</simpara>
<screen>usage: softwarechannel_listallpackages CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listbasechannels</term>
<listitem>
<simpara>List all base software channels.</simpara>
<screen>usage: softwarechannel_listbasechannels [options]
options:
  -v verbose (display label and summary)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listchildchannels</term>
<listitem>
<simpara>List child software channels.</simpara>
<screen>usage:
softwarechannel_listchildchannels [options]
softwarechannel_listchildchannels : List all child channels
softwarechannel_listchildchannels CHANNEL : List children for a specific base channel
options:
 -v verbose (display label and summary)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listerrata</term>
<listitem>
<simpara>List the errata associated with a software channel.</simpara>
<screen>usage: softwarechannel_listerrata &lt;CHANNEL ...&gt; [from=yyyymmdd [to=yyyymmdd]]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listerratabydate</term>
<listitem>
<simpara>List errata from channelbased on a date range.</simpara>
<screen>usage: softwarechannel_listerratabydate CHANNEL BEGINDATE ENDDATE
Date format : YYYYMMDD</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listlatestpackages</term>
<listitem>
<simpara>List the newest version of all packages in a channel.</simpara>
<screen>usage: softwarechannel_listlatestpackages CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listpackages</term>
<listitem>
<simpara>List the most recent packages available from a software channel.</simpara>
<screen>usage: softwarechannel_listpackages CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listrepos</term>
<listitem>
<simpara>List the repos for a software channel.</simpara>
<screen>usage: softwarechannel_listrepos CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listsyncschedule</term>
<listitem>
<simpara>List sync schedules for all software channels.</simpara>
<screen>usage: softwarechannel_listsyncschedule : List all channels</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_listsystems</term>
<listitem>
<simpara>List all systems subscribed to a software channel.</simpara>
<screen>usage: softwarechannel_listsystems CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_mirrorpackages</term>
<listitem>
<simpara>Download packages of a given channel.</simpara>
<screen>usage: softwarechannel_mirrorpackages CHANNEL
Options:
    -l/--latest : Only mirror latest package version</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_regenerateneededcache</term>
<listitem>
<simpara>Regenerate the needed errata and package cache for all systems.</simpara>
<screen>usage: softwarechannel_regenerateneededcache</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_regenerateyumcache</term>
<listitem>
<simpara>Regenerate the YUM cache for a software channel.</simpara>
<screen>usage: softwarechannel_regenerateyumcache &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_removeerrata</term>
<listitem>
<simpara>Remove patches from a software channel.</simpara>
<screen>usage: softwarechannel_removeerrata CHANNEL &lt;ERRATA:search:XXX ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_removepackages</term>
<listitem>
<simpara>Remove packages from a software channel.</simpara>
<screen>usage: softwarechannel_removepackages CHANNEL &lt;PACKAGE ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_removerepo</term>
<listitem>
<simpara>Remove a repo from a software channel.</simpara>
<screen>usage: softwarechannel_removerepo CHANNEL REPO</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_removesyncschedule</term>
<listitem>
<simpara>Removes the repo sync schedule for a software channel.</simpara>
<screen>usage: softwarechannel_setsyncschedule &lt;CHANNEL&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_setorgaccess</term>
<listitem>
<simpara>Set the org-access for the software channel.</simpara>
<screen>usage : softwarechannel_setorgaccess &lt;channel_label&gt; [options]
-d,--disable : disable org access (private, no org sharing)
-e,--enable : enable org access (public access to all trusted orgs)</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_setsyncschedule</term>
<listitem>
<simpara>Sets the repo sync schedule for a software channel.</simpara>
<screen>usage: softwarechannel_setsyncschedule &lt;CHANNEL&gt; &lt;SCHEDULE&gt;

The schedule is specified in Quartz CronTrigger format without enclosing quotes.
For example, to set a schedule of every day at 1am, &lt;SCHEDULE&gt; would be 0 0 1 * * ?</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_sync</term>
<listitem>
<simpara>Sync the packages of two software channels.</simpara>
<screen>usage: softwarechannel_sync SOURCE_CHANNEL TARGET_CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>softwarechannel_syncrepos</term>
<listitem>
<simpara>Sync users repos for a software channel.</simpara>
<screen>usage: softwarechannel_syncrepos &lt;CHANNEL ...&gt;</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.ssm"><title>ssm_</title><simpara>The following spacecmd functions are available for use with System Set Manager.</simpara>
<variablelist>
<varlistentry>
<term>ssm_add</term>
<listitem>
<simpara>Add systems to the SSM.</simpara>
<screen>usage: ssm_add &lt;SYSTEMS&gt;

see 'help ssm' for more details

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>ssm_clear</term>
<listitem>
<simpara>Remove all systems from the SSM.</simpara>
<screen>usage: ssm_clear</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>ssm_intersect</term>
<listitem>
<simpara>Replace the current SSM with the intersection of the current list of systems and the list of systems passed as arguments.</simpara>
<screen>usage: ssm_intersect &lt;SYSTEMS&gt;

see 'help ssm' for more details

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>ssm_list</term>
<listitem>
<simpara>List the systems currently in the SSM.</simpara>
<screen>usage: ssm_list

see 'help ssm' for more details</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>ssm_remove</term>
<listitem>
<simpara>Remove systems from the SSM.</simpara>
<screen>usage: ssm_remove &lt;SYSTEMS&gt;

see 'help ssm' for more details

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.system"><title>system_</title><simpara>The following spacecmd functions are available for use with systems.</simpara>
<variablelist>
<varlistentry>
<term>system_addchildchannels</term>
<listitem>
<simpara>Add child channels to a system.</simpara>
<screen>usage: system_addchildchannels &lt;SYSTEMS&gt; &lt;CHANNEL ...&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_addconfigchannels</term>
<listitem>
<simpara>Add config channels to a system.</simpara>
<screen>usage: system_addconfigchannels &lt;SYSTEMS&gt; &lt;CHANNEL ...&gt; [options]

options:
  -t add channels to the top of the list
  -b add channels to the bottom of the list

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_addconfigfile</term>
<listitem>
<simpara>Create a configuration file.</simpara>
<screen>Note this is only for system sandbox or locally-managed files
Centrally managed files should be created via configchannel_addfile
usage: system_addconfigfile [SYSTEM] [options]

options:
  -S/--sandbox : list only system-sandbox files
  -L/--local   : list only locally managed files
  -p PATH
  -r REVISION
  -o OWNER [default: root]
  -g GROUP [default: root]
  -m MODE [defualt: 0644]
  -x SELINUX_CONTEXT
  -d path is a directory
  -s path is a symlink
  -b path is a binary (or other file which needs base64 encoding)
  -t SYMLINK_TARGET
  -f local path to file contents

  Note re binary/base64: Some text files, notably those containing trailing
  newlines, those containing ASCII escape characters (or other charaters not
  allowed in XML) need to be sent as binary (-b).  Some effort is made to auto-
  detect files which require this, but you may need to explicitly specify.</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_addcustomvalue</term>
<listitem>
<simpara>Set a custom value for a system.</simpara>
<screen>usage: system_addcustomvalue KEY VALUE &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_addentitlements</term>
<listitem>
<simpara>Add entitlements to a system.</simpara>
<screen>usage: system_addentitlements &lt;SYSTEMS&gt; ENTITLEMENT

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_addnote</term>
<listitem>
<simpara>Set a note for a system.</simpara>
<screen>usage: system_addnote &lt;SYSTEM&gt; [options]

options:
  -s SUBJECT
  -b BODY

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_applyerrata</term>
<listitem>
<simpara>Apply errata to a system.</simpara>
<screen>usage: system_applyerrata &lt;SYSTEMS&gt; [ERRATA|search:XXX ...]

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_comparepackageprofile</term>
<listitem>
<simpara>Compare a system against a package profile.</simpara>
<screen>usage: system_comparepackageprofile &lt;SYSTEMS&gt; PROFILE

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_comparepackages</term>
<listitem>
<simpara>Compare the packages between two systems.</simpara>
<screen>usage: system_comparepackages SOME_SYSTEM ANOTHER_SYSTEM</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_comparewithchannel</term>
<listitem>
<simpara>Compare the installed packages on a system with those in the channels it is registered to, or optionally some other channel.</simpara>
<screen>usage: system_comparewithchannel &lt;SYSTEMS&gt; [options]
options:
         -c/--channel : Specific channel to compare against,
                        default is those subscribed to, including
                        child channels

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_createpackageprofile</term>
<listitem>
<simpara>Create a package profile.</simpara>
<screen>usage: system_createpackageprofile SYSTEM [options]

options:
  -n NAME
  -d DESCRIPTION</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_delete</term>
<listitem>
<simpara>Delete a system profile.</simpara>
<screen>usage: system_delete &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_deletecrashes</term>
<listitem>
<simpara>Delete crashes reported by spacewalk-abrt.</simpara>
<screen>usage: Delete all crashes for all systems    : system_deletecrashes [--verbose]
usage: Delete all crashes for a single system: system_deletecrashes -i sys_id [--verbose]
usage: Delete a single crash record          : system_deletecrashes -c crash_id [--verbose]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_deletenotes</term>
<listitem>
<simpara>Delete notes from a system.</simpara>
<screen>usage: system_deletenotes &lt;SYSTEM&gt; &lt;ID|*&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_deletepackageprofile</term>
<listitem>
<simpara>Delete a package profile.</simpara>
<screen>usage: system_deletepackageprofile PROFILE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_deployconfigfiles</term>
<listitem>
<simpara>Deploy all configuration files for a system.</simpara>
<screen>usage: system_deployconfigfiles &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_details</term>
<listitem>
<simpara>Show the details of a system profile.</simpara>
<screen>usage: system_details &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_getcrashfiles</term>
<listitem>
<simpara>Download all files for a crash record.</simpara>
<screen>usage: system_getcrashfiles -c crash_id [--verbose]
usage: system_getcrashfiles -c crash_id [--dest_folder=/tmp/crash_files] [--verbose]</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_installpackage</term>
<listitem>
<simpara>Install a package on a system.</simpara>
<screen>usage: system_installpackage &lt;SYSTEMS&gt; &lt;PACKAGE ...&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_list</term>
<listitem>
<simpara>List all system profiles.</simpara>
<screen>usage: system_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listbasechannel</term>
<listitem>
<simpara>List the base channel for a system.</simpara>
<screen>usage: system_listbasechannel &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listchildchannels</term>
<listitem>
<simpara>List the child channels for a system.</simpara>
<screen>usage: system_listchildchannels &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listconfigchannels</term>
<listitem>
<simpara>List the config channels of a system.</simpara>
<screen>usage: system_listconfigchannels &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listconfigfiles</term>
<listitem>
<simpara>List the managed config files of a system.</simpara>
<screen>usage: system_listconfigfiles &lt;SYSTEMS&gt;'
options:
  -s/--sandbox : list only system-sandbox files
  -l/--local   : list only locally managed files
  -c/--central : list only centrally managed files
  -q/--quiet   : quiet mode (omits the header)

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listcrashedsystems</term>
<listitem>
<simpara>List all systems that have experienced a crash and reported by spacewalk-abrt.</simpara>
<screen>usage: system_listcrashedsystems</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listcrashesbysystem</term>
<listitem>
<simpara>List all reported crashes for a system.</simpara>
<screen>usage: system_listcrashesbysystem -i sys_id</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listcustomvalues</term>
<listitem>
<simpara>List the custom values for a system.</simpara>
<screen>usage: system_listcustomvalues &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listentitlements</term>
<listitem>
<simpara>List the entitlements for a system.</simpara>
<screen>usage: system_listentitlements &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listerrata</term>
<listitem>
<simpara>List available errata for a system.</simpara>
<screen>usage: system_listerrata &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listevents</term>
<listitem>
<simpara>List the event history for a system.</simpara>
<screen>usage: system_listevents &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listhardware</term>
<listitem>
<simpara>List the hardware details of a system.</simpara>
<screen>usage: system_listhardware &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listinstalledpackages</term>
<listitem>
<simpara>List the installed packages on a system.</simpara>
<screen>usage: system_listinstalledpackages &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listnotes</term>
<listitem>
<simpara>List the available notes for a system.</simpara>
<screen>usage: system_listnotes &lt;SYSTEM&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listpackageprofiles</term>
<listitem>
<simpara>List all package profiles.</simpara>
<screen>usage: system_listpackageprofiles</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_listupgrades</term>
<listitem>
<simpara>List the available upgrades for a system.</simpara>
<screen>usage: system_listupgrades &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_lock</term>
<listitem>
<simpara>Lock a system.</simpara>
<screen>usage: system_lock &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_reboot</term>
<listitem>
<simpara>Reboot a system.</simpara>
<screen>usage: system_reboot &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_removechildchannels</term>
<listitem>
<simpara>Remove child channels from a system.</simpara>
<screen>usage: system_removechildchannels &lt;SYSTEMS&gt; &lt;CHANNEL ...&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_removeconfigchannels</term>
<listitem>
<simpara>Remove config channels from a system.</simpara>
<screen>usage: system_removeconfigchannels &lt;SYSTEMS&gt; &lt;CHANNEL ...&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_removecustomvalues</term>
<listitem>
<simpara>Remove a custom value for a system.</simpara>
<screen>usage: system_removecustomvalues &lt;SYSTEMS&gt; &lt;KEY ...&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_removeentitlement</term>
<listitem>
<simpara>Remove an entitlement from a system.</simpara>
<screen>usage: system_removeentitlement &lt;SYSTEMS&gt; ENTITLEMENT

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_removepackage</term>
<listitem>
<simpara>Remove a package from a system.</simpara>
<screen>usage: system_removepackage &lt;SYSTEMS&gt; &lt;PACKAGE ...&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_rename</term>
<listitem>
<simpara>Rename a system profile.</simpara>
<screen>usage: system_rename OLDNAME NEWNAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_runscript</term>
<listitem>
<simpara>Schedule a script to run on the list of systems provided.</simpara>
<screen>usage: system_runscript &lt;SYSTEMS&gt; [options]

options:
  -u USER
  -g GROUP
  -t TIMEOUT
  -s START_TIME
  -l LABEL
  -f FILE

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL


Dates can be any of the following:
Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_schedulehardwarerefresh</term>
<listitem>
<simpara>Schedule a hardware refresh for a system.</simpara>
<screen>usage: system_schedulehardwarerefresh &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_schedulepackagerefresh</term>
<listitem>
<simpara>Schedule a software package refresh for a system.</simpara>
<screen>usage: system_schedulepackagerefresh &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_search</term>
<listitem>
<simpara>List systems that match the given criteria.</simpara>
<screen>usage: system_search QUERY

Available Fields:
id
name
ip
hostname
device
vendor
driver
uuid

Examples:
&gt; system_search device:vmware
&gt; system_search ip:192.168.82</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_setbasechannel</term>
<listitem>
<simpara>Set a system&#8217;s base software channel.</simpara>
<screen>usage: system_setbasechannel &lt;SYSTEMS&gt; CHANNEL

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_setconfigchannelorder</term>
<listitem>
<simpara>Set the ranked order of configuration channels.</simpara>
<screen>usage: system_setconfigchannelorder &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_setcontactmethod</term>
<listitem>
<simpara>Set the contact method for given system(s).</simpara>
<screen>Available contact methods: ['default', 'ssh-push', 'ssh-push-tunnel']
usage: system_setcontactmethod &lt;SYSTEMS&gt; &lt;CONTACT_METHOD&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_show_packageversion</term>
<listitem>
<simpara>Shows version of installed package on given system(s).</simpara>
<screen>usage: system_show_packageversion &lt;SYSTEM&gt; &lt;PACKAGE&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_syncpackages</term>
<listitem>
<simpara>Sync packages between two systems.</simpara>
<screen>usage: system_syncpackages SOURCE TARGET</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_unlock</term>
<listitem>
<simpara>Unlock a system.</simpara>
<screen>usage: system_unlock &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_updatecustomvalue</term>
<listitem>
<simpara>Update a custom value for a system.</simpara>
<screen>usage: system_updatecustomvalue KEY VALUE &lt;SYSTEMS&gt;

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>system_upgradepackage</term>
<listitem>
<simpara>Upgrade a package on a system.</simpara>
<screen>usage: system_upgradepackage &lt;SYSTEMS&gt; &lt;PACKAGE ...&gt;|*

&lt;SYSTEMS&gt; can be any of the following:
name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.toggle"><title>toggle_</title><variablelist>
<varlistentry>
<term>toggle_confirmations</term>
<listitem>
<simpara>Toggle confirmation messages on/off.</simpara>
<screen>usage: toggle_confirmations</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.user"><title>user_</title><variablelist>
<varlistentry>
<term>user_adddefaultgroup</term>
<listitem>
<simpara>Add a default group to an user account.</simpara>
<screen>usage: user_adddefaultgroup USER &lt;GROUP ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_addgroup</term>
<listitem>
<simpara>Add a group to an user account.</simpara>
<screen>usage: user_addgroup USER &lt;GROUP ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_addrole</term>
<listitem>
<simpara>Add a role to an user account.</simpara>
<screen>usage: user_addrole USER ROLE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_create</term>
<listitem>
<simpara>Create an user.</simpara>
<screen>usage: user_create [options]

options:
  -u USERNAME
  -f FIRST_NAME
  -l LAST_NAME
  -e EMAIL
  -p PASSWORD
  --pam enable PAM authentication</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_delete</term>
<listitem>
<simpara>Delete an user.</simpara>
<screen>usage: user_delete NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_details</term>
<listitem>
<simpara>Show the details of an user.</simpara>
<screen>usage: user_details USER ...</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_disable</term>
<listitem>
<simpara>Disable an user account.</simpara>
<screen>usage: user_disable NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_enable</term>
<listitem>
<simpara>Enable an user account.</simpara>
<screen>usage: user_enable NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_list</term>
<listitem>
<simpara>List all users.</simpara>
<screen>usage: user_list</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_listavailableroles</term>
<listitem>
<simpara>List all available roles for users.</simpara>
<screen>usage: user_listavailableroles</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_removedefaultgroup</term>
<listitem>
<simpara>Remove a default group from an user account.</simpara>
<screen>usage: user_removedefaultgroup USER &lt;GROUP ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_removegroup</term>
<listitem>
<simpara>Remove a group to an user account.</simpara>
<screen>usage: user_removegroup USER &lt;GROUP ...&gt;</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_removerole</term>
<listitem>
<simpara>Remove a role from an user account.</simpara>
<screen>usage: user_removerole USER ROLE</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_setemail</term>
<listitem>
<simpara>Set an user accounts email field.</simpara>
<screen>usage: user_setemail USER EMAIL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_setfirstname</term>
<listitem>
<simpara>Set an user accounts first name field.</simpara>
<screen>usage: user_setfirstname USER FIRST_NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_setlastname</term>
<listitem>
<simpara>Set an user accounts last name field.</simpara>
<screen>usage: user_setlastname USER LAST_NAME</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_setpassword</term>
<listitem>
<simpara>Set an user accounts name prefix field.</simpara>
<screen>usage: user_setpassword USER PASSWORD</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>user_setprefix</term>
<listitem>
<simpara>Set an user accounts name prefix field.</simpara>
<screen>usage: user_setprefix USER PREFIX</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.whoami"><title>whoami</title><simpara>The following command is available for returning the currently logged spacecmd username.</simpara>
<variablelist>
<varlistentry>
<term>whoami</term>
<listitem>
<simpara>Print the currently logged spacecmd user.</simpara>
<screen>spacecmd {SSM:0}&gt; whoami
admin</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.whoamitalkingto"><title>whoamitalkingto</title><simpara>The following spacecmd function is available for returning the server hostname.</simpara>
<variablelist>
<varlistentry>
<term>whoamitalkingto</term>
<listitem>
<simpara>Return the server hostname that spacecmd is connected with.</simpara>
<screen>spacecmd {SSM:0}&gt; whoamitalkingto
MGR_SERVER_HOSTNAME</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_at.spacecmd.misc.help.topics"><title>Miscellaneous Help Topics</title><simpara>The following help topics are printed with all functions requiring the relevant information.</simpara>
<variablelist>
<varlistentry>
<term>time</term>
<listitem>
<simpara>Dates can be any of the following:</simpara>
<screen>Explicit Dates:
Dates can be expressed as explicit date strings in the YYYYMMDD[HHMM]
format.  The year, month and day are required, while the hours and
minutes are not; the hours and minutes will default to 0000 if no
values are provided.

Deltas:
Dates can be expressed as delta values.  For example, '2h' would
mean 2 hours in the future.  You can also use negative values to
express times in the past (e.g., -7d would be one week ago).

Units:
s -&gt; seconds
m -&gt; minutes
h -&gt; hours
d -&gt; days</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>systems</term>
<listitem>
<simpara>&lt;SYSTEMS&gt; can be any of the following:</simpara>
<screen>name
ssm (see 'help ssm')
search:QUERY (see 'help system_search')
group:GROUP
channel:CHANNEL</screen>
</listitem>
</varlistentry>
<varlistentry>
<term>ssm</term>
<listitem>
<simpara>The System Set Manager (SSM) is a group of systems that you</simpara>
<simpara>can perform tasks on as a group.</simpara>
<screen>Adding Systems:
&gt; ssm_add group:rhel5-x86_64
&gt; ssm_add channel:rhel-x86_64-server-5
&gt; ssm_add search:device:vmware
&gt; ssm_add host.example.com

Intersections:
&gt; ssm_add group:rhel5-x86_64
&gt; ssm_intersect group:web-servers

Using the SSM:
&gt; system_installpackage ssm zsh
&gt; system_runscript ssm</screen>
</listitem>
</varlistentry>
</variablelist>
</section>
</section>
</chapter>
<appendix xml:id="_advanced.topics.app.ports"><title>Ports</title><section xml:id="_advanced.topics.app.ports.server"><title>&susemgr; Server</title><simpara>Some ports are only relevant if you actually run the related service on the &susemgr;
server.</simpara>
<variablelist>
<title>Ports to Open on &susemgr;Server</title>
<varlistentry>
<term>67</term>
<listitem>
<simpara>Inbound / TCP/UDP / DHCP</simpara>
<simpara>Required when &susemgr;
is configured as a DHCP server for systems requesting IP addresses.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>69</term>
<listitem>
<simpara>Inbound / TCP/UDP / TFTP</simpara>
<simpara>Used when &susemgr;
is configured as a PXE server and allows installation and re-installation of PXE-boot enabled systems.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>80</term>
<listitem>
<simpara>Inbound / TCP / HTTP</simpara>
<simpara>All &webui;
, client, and proxy server requests travel via HTTP or HTTPS.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>80</term>
<listitem>
<simpara>Outbound / TCP / HTTP</simpara>
<simpara>Used to contact &scc;
/&ncc;
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>443</term>
<listitem>
<simpara>Inbound / TCP / HTTPS</simpara>
<simpara>All &webui;
, client, and proxy server requests travel via HTTP or HTTPS.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>443</term>
<listitem>
<simpara>Outbound / TCP / HTTPS</simpara>
<simpara>&susemgr;
uses this port to reach &scc;
(unless running in a disconnected mode with RMT or SMT&mdash;
as described in <xref linkend="_disconnect_setup"/>).</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>5222</term>
<listitem>
<simpara>Inbound / TCP / osad</simpara>
<simpara>When you wish to push actions to clients this port is required by the <literal role="systemitem">osad</literal>
daemon running on your client systems.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>5269</term>
<listitem>
<simpara>Inbound/Outbound / TCP / jabberd</simpara>
<simpara>Needed if you push actions to or via a &susemgrproxy;
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>4505</term>
<listitem>
<simpara>Inbound / TCP / salt</simpara>
<simpara>Required by the Salt-master to accept communication requests via TCP from minions.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>4506</term>
<listitem>
<simpara>Inbound / TCP / salt</simpara>
<simpara>Required by the Salt-master to accept communication requests via TCP from minions.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>25151</term>
<listitem>
<simpara>TCP</simpara>
<simpara>Cobbler.</simpara>
</listitem>
</varlistentry>
</variablelist>
<variablelist>
<title>Internally Used Ports on &susemgr;Server</title>
<varlistentry>
<term>2828</term>
<listitem>
<simpara>Internal /</simpara>
<simpara>satellite-search API, used by the RHN application in Tomcat and Taskomatic.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>2829</term>
<listitem>
<simpara>Internal /</simpara>
<simpara>Taskomatic API, used by the RHN application in Tomcat.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>6868</term>
<listitem>
<simpara>Internal</simpara>
<simpara>Auditlog-keeper to database.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>6888</term>
<listitem>
<simpara>Internal</simpara>
<simpara>Auditlog-keeper API, used by the RHN application in Tomcat.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>8005</term>
<listitem>
<simpara>Internal</simpara>
<simpara>Tomcat shutdown port.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>8009</term>
<listitem>
<simpara>Internal</simpara>
<simpara>Tomcat to Apache HTTPD (AJP).</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>8080</term>
<listitem>
<simpara>Internal</simpara>
<simpara>Tomcat to Apache HTTPD (HTTP).</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>9080</term>
<listitem>
<simpara>Internal</simpara>
<simpara>salt-api, used by the RHN application in Tomcat and Taskomatic.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>32000</term>
<listitem>
<simpara>Internal / TCP</simpara>
<simpara>Port for a TCP connection to the Java Virtual Machine (JVM) that runs Taskomatic and the search (satellite-search).</simpara>
</listitem>
</varlistentry>
</variablelist>
<note>
<title>Ephemeral Ports</title>
<simpara>Anything from port 32768 on (more exactly, what you can see with <command>cat
    /proc/sys/net/ipv4/ip_local_port_range</command>) is an ephemeral port, typically used as the receiving end of a TCP connection.
So if process A opens a TCP connection to process B (for example, port 22), then A chooses an arbitrary source TCP port to match with destination port 22.</simpara>
</note>
</section>
<section xml:id="_advanced.topics.app.ports.proxy"><title>&susemgr; Proxy Server</title><variablelist>
<title>Ports to Open on &susemgr;Proxy Server</title>
<varlistentry>
<term>22</term>
<listitem>
<simpara>Inbound /</simpara>
<simpara>Required when using ssh-push or ssh-push-tunnel contact methods.
Check-in on clients connected to a SUSE Manager Proxy will be initiated on the SUSE Manager Server and <quote>hop through</quote>
through to clients.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>80</term>
<listitem>
<simpara>Outbound /</simpara>
<simpara>Used to reach &susemgr;
.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>5222</term>
<listitem>
<simpara>Inbound / TCP</simpara>
<simpara>For push actions and connections issued by <literal role="systemitem">osad</literal>
running on the client systems.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>5269</term>
<listitem>
<simpara>Inbound/Outbound / TCP</simpara>
<simpara>For push actions with the server.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section xml:id="_advanced.topics.app.ports.client"><title>&susemgr; Client</title><variablelist>
<title>Ports to Open on &susemgr;Client</title>
<varlistentry>
<term>22</term>
<listitem>
<simpara>Inbound / SSH</simpara>
<simpara>Required when using ssh-push or ssh-push-tunnel contact methods.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>80</term>
<listitem>
<simpara>Outbound</simpara>
<simpara>To reach the &susemgr;
server or &susemgrproxy;
server.</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>5222</term>
<listitem>
<simpara>Outbound / TCP</simpara>
<simpara>For push actions with the server or proxy server.</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
</appendix>
<appendix xml:id="_advanced.topics.app.ay.example_simple"><title>Minimalist &ay; Profile for Automated Installations and Useful Enhancements</title><simpara>The following &ay;
profile will install a &sls;
system with all default installation options including a default network configuration with DHCP.
After the installation is completed, a bootstrap script located on the &susemgr;
server will be executed in order to register the freshly installed system with &susemgr;
.
You need to adjust the IP address of the &susemgr;
server, the name of the bootstrap script and the &rootuser;
password according to your needs in the following lines:</simpara>
<screen>&lt;user&gt;
 ...
 &lt;username&gt;root&lt;/username&gt;
 &lt;user_password&gt;`linux`&lt;/user_password&gt;
&lt;/user&gt;

&lt;location&gt;http://`192.168.1.1`/pub/bootstrap/`my_bootstrap.sh`&lt;/location&gt;</screen>
<simpara>The complete &ay;
file:</simpara>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns"
         xmlns:config="http://www.suse.com/1.0/configns"&gt;
 &lt;general&gt;
  &lt;mode&gt;
   &lt;confirm config:type="boolean"&gt;false&lt;/confirm&gt;
  &lt;/mode&gt;
 &lt;/general&gt;
 &lt;networking&gt;
  &lt;keep_install_network config:type="boolean"&gt;true&lt;/keep_install_network&gt;
 &lt;/networking&gt;
 &lt;software&gt;
  &lt;install_recommended config:type="boolean"&gt;true&lt;/install_recommended&gt;
   &lt;patterns config:type="list"&gt;
    &lt;pattern&gt;base&lt;/pattern&gt;
   &lt;/patterns&gt;
 &lt;/software&gt;
 &lt;users config:type="list"&gt;
  &lt;user&gt;
   &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
   &lt;fullname&gt;root&lt;/fullname&gt;
   &lt;gid&gt;0&lt;/gid&gt;
   &lt;home&gt;/root&lt;/home&gt;
   &lt;password_settings&gt;
    &lt;expire&gt;&lt;/expire&gt;
    &lt;flag&gt;&lt;/flag&gt;
    &lt;inact&gt;&lt;/inact&gt;
    &lt;max&gt;&lt;/max&gt;
    &lt;min&gt;&lt;/min&gt;
    &lt;warn&gt;&lt;/warn&gt;
   &lt;/password_settings&gt;
   &lt;shell&gt;/bin/bash&lt;/shell&gt;
   &lt;uid&gt;0&lt;/uid&gt;
   &lt;username&gt;root&lt;/username&gt;
   &lt;user_password&gt;linux&lt;/user_password&gt;
  &lt;/user&gt;
 &lt;/users&gt;
 &lt;scripts&gt;
  &lt;init-scripts config:type="list"&gt;
   &lt;script&gt;
    &lt;interpreter&gt;shell&lt;/interpreter&gt;
    &lt;location&gt;http://192.168.1.1/pub/bootstrap/my_bootstrap.sh&lt;/location&gt;
   &lt;/script&gt;
  &lt;/init-scripts&gt;
 &lt;/scripts&gt;
&lt;/profile&gt;</screen>
<simpara>Use the following enhancement fragment to add child channels:</simpara>
<screen>&lt;add-on&gt;
 &lt;add_on_products config:type="list"&gt;
  &lt;listentry&gt;
   &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
   &lt;media_url&gt;http://$c_server/ks/dist/child/`channel-label`/`distribution-label`&lt;/media_url&gt;
   &lt;name&gt;$c_name&lt;/name&gt;
   &lt;product&gt;$c_product&lt;/product&gt;
   &lt;product_dir&gt;/&lt;/product_dir&gt;
  &lt;/listentry&gt;
...
 &lt;/add_on_products&gt;
&lt;/add-on&gt;</screen>
<simpara>Replace <replaceable>channel-label</replaceable> and <replaceable>distribution-label</replaceable> with actual labels such as <literal>sles11-sp1-updates-x86_64</literal> and <literal>sles11-sp2-x86_64</literal> (the distribution label must correspond to the Autoinstallable Distribution!), and set the variables (<literal>$c_server</literal>, etc.) according to your environment.
For information about variables, see <xref linkend="_s4_sm_system_kick_dist_variables"/>.</simpara>
<important>
<title>Add the Updates Channel</title>
<simpara>It is required to add the updates tools channel to the &lt;add-on&gt; AutoYaST snippet section.
This ensures your systems are provided with an up-to-date version of libzypp.
Without the inclusion of an updates channel you will encounter 400 errors.
See the following example where the (DISTRIBUTION_NAME) is replaced with the name of the autoinstallation distribution created previously in <menuchoice><guimenu>Systems</guimenu> <guisubmenu>Autoinstallation</guisubmenu> <guimenuitem>Distributions</guimenuitem></menuchoice></simpara>
<screen>&lt;listentry&gt;
     &lt;ask_on_error config:type="boolean"&gt;true&lt;/ask_on_error&gt;
     &lt;media_url&gt;http://$redhat_management_server/ks/dist/child/sles12-sp2-updates-x86_64/(DISTRIBUTION_NAME)&lt;/media_url&gt;
     &lt;name&gt;sles12 sp2 updates&lt;/name&gt;
     &lt;product&gt;SLES12&lt;/product&gt;
     &lt;product_dir&gt;/&lt;/product_dir&gt;
  &lt;/listentry&gt;</screen>
</important>
</appendix>
<appendix xml:id="_gnu_licenses_2"><title>GNU Licenses</title><simpara>This appendix contains the GNU Free Documentation License version 1.2.</simpara>
</appendix>
<chapter xml:id="_gnu_free_documentation_license_2"><title>GNU Free Documentation License</title><simpara>Copyright &#169; 2000, 2001, 2002 Free Software Foundation, Inc.
51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.</simpara>
<bridgehead xml:id="_0_preamble_2" renderas="sect2">0. PREAMBLE</bridgehead>
<simpara>The purpose of this License is to make a manual, textbook, or other functional and useful document "free" in the sense of freedom: to assure everyone the effective freedom to copy and redistribute it, with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way to get credit for their work, while not being considered responsible for modifications made by others.</simpara>
<simpara>This License is a kind of "copyleft", which means that derivative works of the document must themselves be free in the same sense.
It complements the GNU General Public License, which is a copyleft license designed for free software.</simpara>
<simpara>We have designed this License in order to use it for manuals for free software, because free software needs free documentation: a free program should come with manuals providing the same freedoms that the software does.
But this License is not limited to software manuals; it can be used for any textual work, regardless of subject matter or whether it is published as a printed book.
We recommend this License principally for works whose purpose is instruction or reference.</simpara>
<bridgehead xml:id="_1_applicability_and_definitions_2" renderas="sect2">1. APPLICABILITY AND DEFINITIONS</bridgehead>
<simpara>This License applies to any manual or other work, in any medium, that contains a notice placed by the copyright holder saying it can be distributed under the terms of this License.
Such a notice grants a world-wide, royalty-free license, unlimited in duration, to use that work under the conditions stated herein.
The "Document", below, refers to any such manual or work.
Any member of the public is a licensee, and is addressed as "you". You accept the license if you copy, modify or distribute the work in a way requiring permission under copyright law.</simpara>
<simpara>A "Modified Version" of the Document means any work containing the Document or a portion of it, either copied verbatim, or with modifications and/or translated into another language.</simpara>
<simpara>A "Secondary Section" is a named appendix or a front-matter section of the Document that deals exclusively with the relationship of the publishers or authors of the Document to the Document&#8217;s overall subject (or to related matters) and contains nothing that could fall directly within that overall subject.
(Thus, if the Document is in part a textbook of mathematics, a Secondary Section may not explain any mathematics.) The relationship could be a matter of historical connection with the subject or with related matters, or of legal, commercial, philosophical, ethical or political position regarding them.</simpara>
<simpara>The "Invariant Sections" are certain Secondary Sections whose titles are designated, as being those of Invariant Sections, in the notice that says that the Document is released under this License.
If a section does not fit the above definition of Secondary then it is not allowed to be designated as Invariant.
The Document may contain zero Invariant Sections.
If the Document does not identify any Invariant Sections then there are none.</simpara>
<simpara>The "Cover Texts" are certain short passages of text that are listed, as Front-Cover Texts or Back-Cover Texts, in the notice that says that the Document is released under this License.
A Front-Cover Text may be at most 5 words, and a Back-Cover Text may be at most 25 words.</simpara>
<simpara>A "Transparent" copy of the Document means a machine-readable copy, represented in a format whose specification is available to the general public, that is suitable for revising the document straightforwardly with generic text editors or (for images composed of pixels) generic paint programs or (for drawings) some widely available drawing editor, and that is suitable for input to text formatters or for automatic translation to a variety of formats suitable for input to text formatters.
A copy made in an otherwise Transparent file format whose markup, or absence of markup, has been arranged to thwart or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount of text.
A copy that is not "Transparent" is called "Opaque".</simpara>
<simpara>Examples of suitable formats for Transparent copies include plain ASCII without markup, Texinfo input format, LaTeX input format, SGML or XML using a publicly available DTD, and standard-conforming simple HTML, PostScript or PDF designed for human modification.
Examples of transparent image formats include PNG, XCF and JPG.
Opaque formats include proprietary formats that can be read and edited only by proprietary word processors, SGML or XML for which the DTD and/or processing tools are not generally available, and the machine-generated HTML, PostScript or PDF produced by some word processors for output purposes only.</simpara>
<simpara>The "Title Page" means, for a printed book, the title page itself, plus such following pages as are needed to hold, legibly, the material this License requires to appear in the title page.
For works in formats which do not have any title page as such, "Title Page" means the text near the most prominent appearance of the work&#8217;s title, preceding the beginning of the body of the text.</simpara>
<simpara>A section "Entitled XYZ" means a named subunit of the Document whose title either is precisely XYZ or contains XYZ in parentheses following text that translates XYZ in another language.
(Here XYZ stands for a specific section name mentioned below, such as "Acknowledgements", "Dedications", "Endorsements", or "History".) To "Preserve the Title" of such a section when you modify the Document means that it remains a section "Entitled XYZ" according to this definition.</simpara>
<simpara>The Document may include Warranty Disclaimers next to the notice which states that this License applies to the Document.
These Warranty Disclaimers are considered to be included by reference in this License, but only as regards disclaiming warranties: any other implication that these Warranty Disclaimers may have is void and has no effect on the meaning of this License.</simpara>
<bridgehead xml:id="_2_verbatim_copying_2" renderas="sect2">2. VERBATIM COPYING</bridgehead>
<simpara>You may copy and distribute the Document in any medium, either commercially or noncommercially, provided that this License, the copyright notices, and the license notice saying this License applies to the Document are reproduced in all copies, and that you add no other conditions whatsoever to those of this License.
You may not use technical measures to obstruct or control the reading or further copying of the copies you make or distribute.
However, you may accept compensation in exchange for copies.
If you distribute a large enough number of copies you must also follow the conditions in section 3.</simpara>
<simpara>You may also lend copies, under the same conditions stated above, and you may publicly display copies.</simpara>
<bridgehead xml:id="_3_copying_in_quantity_2" renderas="sect2">3. COPYING IN QUANTITY</bridgehead>
<simpara>If you publish printed copies (or copies in media that commonly have printed covers) of the Document, numbering more than 100, and the Document&#8217;s license notice requires Cover Texts, you must enclose the copies in covers that carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on the back cover.
Both covers must also clearly and legibly identify you as the publisher of these copies.
The front cover must present the full title with all words of the title equally prominent and visible.
You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve the title of the Document and satisfy these conditions, can be treated as verbatim copying in other respects.</simpara>
<simpara>If the required texts for either cover are too voluminous to fit legibly, you should put the first ones listed (as many as fit reasonably) on the actual cover, and continue the rest onto adjacent pages.</simpara>
<simpara>If you publish or distribute Opaque copies of the Document numbering more than 100, you must either include a machine-readable Transparent copy along with each Opaque copy, or state in or with each Opaque copy a computer-network location from which the general network-using public has access to download using public-standard network protocols a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps, when you begin distribution of Opaque copies in quantity, to ensure that this Transparent copy will remain thus accessible at the stated location until at least one year after the last time you distribute an Opaque copy (directly or through your agents or retailers) of that edition to the public.</simpara>
<simpara>It is requested, but not required, that you contact the authors of the Document well before redistributing any large number of copies, to give them a chance to provide you with an updated version of the Document.</simpara>
<bridgehead xml:id="_4_modifications_2" renderas="sect2">4. MODIFICATIONS</bridgehead>
<simpara>You may copy and distribute a Modified Version of the Document under the conditions of sections 2 and 3 above, provided that you release the Modified Version under precisely this License, with the Modified Version filling the role of the Document, thus licensing distribution and modification of the Modified Version to whoever possesses a copy of it.
In addition, you must do these things in the Modified Version:</simpara>
<orderedlist numeration="upperalpha">
<listitem>
<para>Use in the Title Page (and on the covers, if any) a title distinct from that of the Document, and from those of previous versions (which should, if there were any, be listed in the History section of the Document). You may use the same title as a previous version if the original publisher of that version gives permission.</para>
</listitem>
<listitem>
<para>List on the Title Page, as authors, one or more persons or entities responsible for authorship of the modifications in the Modified Version, together with at least five of the principal authors of the Document (all of its principal authors, if it has fewer than five), unless they release you from this requirement.</para>
</listitem>
<listitem>
<para>State on the Title page the name of the publisher of the Modified Version, as the publisher.</para>
</listitem>
<listitem>
<para>Preserve all the copyright notices of the Document.</para>
</listitem>
<listitem>
<para>Add an appropriate copyright notice for your modifications adjacent to the other copyright notices.</para>
</listitem>
<listitem>
<para>Include, immediately after the copyright notices, a license notice giving the public permission to use the Modified Version under the terms of this License, in the form shown in the Addendum below.</para>
</listitem>
<listitem>
<para>Preserve in that license notice the full lists of Invariant Sections and required Cover Texts given in the Document&#8217;s license notice.</para>
</listitem>
<listitem>
<para>Include an unaltered copy of this License.</para>
</listitem>
<listitem>
<para>Preserve the section Entitled "History", Preserve its Title, and add to it an item stating at least the title, year, new authors, and publisher of the Modified Version as given on the Title Page. If there is no section Entitled "History" in the Document, create one stating the title, year, authors, and publisher of the Document as given on its Title Page, then add an item describing the Modified Version as stated in the previous sentence.</para>
</listitem>
<listitem>
<para>Preserve the network location, if any, given in the Document for public access to a Transparent copy of the Document, and likewise the network locations given in the Document for previous versions it was based on. These may be placed in the "History" section. You may omit a network location for a work that was published at least four years before the Document itself, or if the original publisher of the version it refers to gives permission.</para>
</listitem>
<listitem>
<para>For any section Entitled "Acknowledgements" or "Dedications", Preserve the Title of the section, and preserve in the section all the substance and tone of each of the contributor acknowledgements and/or dedications given therein.</para>
</listitem>
<listitem>
<para>Preserve all the Invariant Sections of the Document, unaltered in their text and in their titles. Section numbers or the equivalent are not considered part of the section titles.</para>
</listitem>
<listitem>
<para>Delete any section Entitled "Endorsements". Such a section may not be included in the Modified Version.</para>
</listitem>
<listitem>
<para>Do not retitle any existing section to be Entitled "Endorsements" or to conflict in title with any Invariant Section.</para>
</listitem>
<listitem>
<para>Preserve any Warranty Disclaimers.</para>
</listitem>
</orderedlist>
<simpara>If the Modified Version includes new front-matter sections or appendices that qualify as Secondary Sections and contain no material copied from the Document, you may at your option designate some or all of these sections as invariant.
To do this, add their titles to the list of Invariant Sections in the Modified Version&#8217;s license notice.
These titles must be distinct from any other section titles.</simpara>
<simpara>You may add a section Entitled "Endorsements", provided it contains nothing but endorsements of your Modified Version by various parties&#8212;&#8203;for example, statements of peer review or that the text has been approved by an organization as the authoritative definition of a standard.</simpara>
<simpara>You may add a passage of up to five words as a Front-Cover Text, and a passage of up to 25 words as a Back-Cover Text, to the end of the list of Cover Texts in the Modified Version.
Only one passage of Front-Cover Text and one of Back-Cover Text may be added by (or through arrangements made by) any one entity.
If the Document already includes a cover text for the same cover, previously added by you or by arrangement made by the same entity you are acting on behalf of, you may not add another; but you may replace the old one, on explicit permission from the previous publisher that added the old one.</simpara>
<simpara>The author(s) and publisher(s) of the Document do not by this License give permission to use their names for publicity for or to assert or imply endorsement of any Modified Version.</simpara>
<bridgehead xml:id="_5_combining_documents_2" renderas="sect2">5. COMBINING DOCUMENTS</bridgehead>
<simpara>You may combine the Document with other documents released under this License, under the terms defined in section 4 above for modified versions, provided that you include in the combination all of the Invariant Sections of all of the original documents, unmodified, and list them all as Invariant Sections of your combined work in its license notice, and that you preserve all their Warranty Disclaimers.</simpara>
<simpara>The combined work need only contain one copy of this License, and multiple identical Invariant Sections may be replaced with a single copy.
If there are multiple Invariant Sections with the same name but different contents, make the title of each such section unique by adding at the end of it, in parentheses, the name of the original author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of Invariant Sections in the license notice of the combined work.</simpara>
<simpara>In the combination, you must combine any sections Entitled "History" in the various original documents, forming one section Entitled "History"; likewise combine any sections Entitled "Acknowledgements", and any sections Entitled "Dedications". You must delete all sections Entitled "Endorsements".</simpara>
<bridgehead xml:id="_6_collections_of_documents_2" renderas="sect2">6. COLLECTIONS OF DOCUMENTS</bridgehead>
<simpara>You may make a collection consisting of the Document and other documents released under this License, and replace the individual copies of this License in the various documents with a single copy that is included in the collection, provided that you follow the rules of this License for verbatim copying of each of the documents in all other respects.</simpara>
<simpara>You may extract a single document from such a collection, and distribute it individually under this License, provided you insert a copy of this License into the extracted document, and follow this License in all other respects regarding verbatim copying of that document.</simpara>
<bridgehead xml:id="_7_aggregation_with_independent_works_2" renderas="sect2">7. AGGREGATION WITH INDEPENDENT WORKS</bridgehead>
<simpara>A compilation of the Document or its derivatives with other separate and independent documents or works, in or on a volume of a storage or distribution medium, is called an "aggregate" if the copyright resulting from the compilation is not used to limit the legal rights of the compilation&#8217;s users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not apply to the other works in the aggregate which are not themselves derivative works of the Document.</simpara>
<simpara>If the Cover Text requirement of section 3 is applicable to these copies of the Document, then if the Document is less than one half of the entire aggregate, the Document&#8217;s Cover Texts may be placed on covers that bracket the Document within the aggregate, or the electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole aggregate.</simpara>
<bridgehead xml:id="_8_translation_2" renderas="sect2">8. TRANSLATION</bridgehead>
<simpara>Translation is considered a kind of modification, so you may distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special permission from their copyright holders, but you may include translations of some or all Invariant Sections in addition to the original versions of these Invariant Sections.
You may include a translation of this License, and all the license notices in the Document, and any Warranty Disclaimers, provided that you also include the original English version of this License and the original versions of those notices and disclaimers.
In case of a disagreement between the translation and the original version of this License or a notice or disclaimer, the original version will prevail.</simpara>
<simpara>If a section in the Document is Entitled "Acknowledgements", "Dedications", or "History", the requirement (section 4) to Preserve its Title (section 1) will typically require changing the actual title.</simpara>
<bridgehead xml:id="_9_termination_2" renderas="sect2">9. TERMINATION</bridgehead>
<simpara>You may not copy, modify, sublicense, or distribute the Document except as expressly provided for under this License.
Any other attempt to copy, modify, sublicense or distribute the Document is void, and will automatically terminate your rights under this License.
However, parties who have received copies, or rights, from you under this License will not have their licenses terminated so long as such parties remain in full compliance.</simpara>
<bridgehead xml:id="_10_future_revisions_of_this_license_2" renderas="sect2">10. FUTURE REVISIONS OF THIS LICENSE</bridgehead>
<simpara>The Free Software Foundation may publish new, revised versions of the GNU Free Documentation License from time to time.
Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns.
See <link xl:href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</link>.</simpara>
<simpara>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this License "or any later version" applies to it, you have the option of following the terms and conditions either of that specified version or of any later version that has been published (not as a draft) by the Free Software Foundation.
If the Document does not specify a version number of this License, you may choose any version ever published (not as a draft) by the Free Software Foundation.</simpara>
<bridgehead xml:id="_addendum_how_to_use_this_license_for_your_documents_2" renderas="sect2">ADDENDUM: How to use this License for your documents</bridgehead>
<screen>Copyright (c) YEAR YOUR NAME.
   Permission is granted to copy, distribute and/or modify this document
   under the terms of the GNU Free Documentation License, Version 1.2
   or any later version published by the Free Software Foundation;
   with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
   A copy of the license is included in the section entitled&ldquo;GNU
   Free Documentation License&rdquo;.</screen>
<simpara>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts, replace the &#8220;
with&#8230;&#8203;Texts.&#8221;
line with this:</simpara>
<screen>with the Invariant Sections being LIST THEIR TITLES, with the
   Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</screen>
<simpara>If you have Invariant Sections without Cover Texts, or some other combination of the three, merge those two alternatives to suit the situation.</simpara>
<simpara>If your document contains nontrivial examples of program code, we recommend releasing these examples in parallel under your choice of free software license, such as the GNU General Public License, to permit their use in free software.</simpara>
</chapter>
</part>
</book>